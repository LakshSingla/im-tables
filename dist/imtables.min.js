"use strict";function _defineProperty2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _iterableToArrayLimit(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}return n}function _toArray(t){return _arrayWithHoles(t)||_iterableToArray(t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _classCallCheck2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass2(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=_superPropBase(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){function e(t){return n.apply(this,arguments)}var n,i;function r(t){return i.apply(this,arguments)}return(_typeof="function"==typeof Symbol&&"symbol"===_typeof(Symbol.iterator)?(i=function(t){return void 0===t?"undefined":_typeof(t)},r.toString=function(){return i.toString()},r):(n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof(t)},e.toString=function(){return n.toString()},e))(t)}!function(t){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).imtables=t()}}(function(){return function s(o,a,l){function u(n,t){if(!a[n]){if(!o[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(c)return c(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=a[n]={exports:{}};o[n][0].call(r.exports,function(t){var e=o[n][1][t];return u(e||t)},r,r.exports,s,o,a,l)}return a[n].exports}for(var c="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(n,t,i){(function(){var r,t,o,a,l,s,u,e=n("es6-promise");a=e.Promise,l=n("underscore"),r=n("jquery"),t={server:"http://cdn.intermine.org",imtables:"/js/intermine/im-tables/2.0.0-beta/",tests:{fontawesome:/font-awesome/,glyphicons:/bootstrap-icons/},resources:{prettify:["/js/google-code-prettify/latest/prettify.js"],d3:"/js/d3/3.0.6/d3.v3.min.js",glyphicons:"/css/bootstrap/2.3.2/css/bootstrap-icons.css",fontawesome:"/css/font-awesome/4.x/css/font-awesome.min.css",filesaver:"/js/filesaver.js/FileSaver.min.js"}},(o=n("./options")).set("CDN",t),s=function(e){var t;return null!=e&&(t=l.asArray(document.querySelectorAll('link[rel="stylesheet"]')),l.any(t,function(t){return e.test(t.href)}))},u=function(i){return function(t,e){var n;return n=new a(function(t){return l.delay(t,50,!0)}),/\.css$/.test(t)?(s(e)||r('<link type="text/css" rel="stylesheet">').appendTo("head").attr({href:i+t}),n):r.ajax({url:i+t,cache:!0,dataType:"script"}).then(function(){return n})}},i.load=function(t){var i,r,s,e,n;return e=o.get("CDN.server"),r=o.get(["CDN","resources",t]),n=o.get(["CDN","tests",t]),s=u(e),r?l.isArray(r)?a.all(function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(s(i));return n}()):s(r,n):a.reject("No resource is configured for "+t)}}).call(this)},{"./options":63,"es6-promise":238,jquery:256,underscore:262}],2:[function(t,i,e){(function(){var e,n;e=t("backbone"),n=function(t){return!t},i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e.Model),_createClass2(t,[{key:"toggle",value:function(t){return this.swap(t,n)}},{key:"swap",value:function(t,e){return this.set(t,e(this.get(t)))}},{key:"toJSON",value:function(){return this.destroyed?"DESTROYED":_get(_getPrototypeOf(t.prototype),"toJSON",this).call(this)}},{key:"destroy",value:function(){if(!this.destroyed)return this.stopListening(),this.destroyed=!0,this.trigger("destroy",this,this.collection),this._frozen=[],this.clear(),this.off()}},{key:"_validate",value:function(t,e){var n,i,r,s,o,a;for(a=[],n=0,i=(o=this._frozen).length;n<i;n++)if((s=o[n])in t&&t[s]!==this.get(s)){if(r=s+" is frozen (trying to set it to "+t[s]+" - is "+this.get(s)+")",!e.merge)throw new Error(r);a.push(t[s]=this.get(s))}return a}},{key:"freeze",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._frozen=this._frozen.concat(e),this}}]),t}();return t.prototype.destroyed=!1,t.prototype._frozen=[],t}.call(this)}).call(this)},{backbone:235}],3:[function(r,v,t){(function(){var c,i,f,s,d,o,a,t,_,l,u,e,p,g,m,n,h;r("./shim"),i=r("backbone"),_=r("underscore"),c=r("jquery"),f=r("./core-model"),a=r("./messages"),t=r("./templates"),d=r("./icons"),s=r("./event"),u=r("./templates/helpers"),h=r("./utils/on-change"),o=t.template("progress-bar")({doneness:1}),e=0,l=function(){return e++},g=function(){return n.call(this,"model")},m=function(){return n.call(this,"state")},p=function(){return n.call(this,"collection")},n=function(t){var e,n,i,r;if(e=_.result(this,t+"Events"),_.size(e)){if(null==this[t])throw new Error("Cannot listen to "+t+" - it is null.");for(n in r=[],e){if(i=e[n],null==(i=_.isFunction(i)?i:this[i]))throw new Error("No handler for "+t+":"+n);r.push(this.listenTo(this[t],n,i))}return r}},v.exports=function(){var r,t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}function e(t){return n.apply(this,arguments)}var n;return _inherits(t,i.View),_createClass2(t,[{key:"initState",value:function(){}},{key:"initialize",value:function(t){var e,n,i,r,s,o,a,l,u,c,h=0<arguments.length&&void 0!==t?t:{};for(this.state=h.state,a=null!=(l=_.result(this,"parameters"))?l:[],s=null!=(u=_.result(this,"optionalParameters"))?u:[],_.extend(this,(e=_).pick.apply(e,[h].concat(_toConsumableArray(a)))),i=0,r=s.length;i<r;i++)null!=h[o=s[i]]&&(this[o]=h[o]);return this.children={},n=this.Model||f,null!=(null!=(c=this.model)?c.toJSON:void 0)&&(this.hasOwnModel=!1),null==this.model&&(this.model=new n),null==this.model.toJSON&&(this.model=new n(this.model)),null==this.state&&(this.state=new f),null==this.state.toJSON&&(this.state=new f(this.state)),null!=this.RERENDER_EVENT&&this.listenTo(this.model,this.RERENDER_EVENT,this.reRender),this.on("rendering",this.preRender),this.on("rendered",this.postRender),this.assertInvariants(),this.initState(),g.call(this),m.call(this),p.call(this),this.listenTo(d,this.ICONS,function(){if(this.template)return this.reRender()}),this.listenTo(this.model,"destroy",function(){return this.remove()})}},{key:"stopListeningTo",value:function(t){return this.stopListening(t)}},{key:"listenForChange",value:function(t,e){for(var n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(!(null!=i?i.length:void 0))throw new Error("No properties listed");return this.listenTo(t,h(i),e)}},{key:"renderError",value:(n=function(t){return renderError(this.el)(t)},e.toString=function(){return n.toString()},e)},{key:"helpers",value:function(){return _.extend({IndeterminateProgressBar:o},u)}},{key:"getBaseData",value:function(){var t;return u=_.result(this,"helpers"),t=_.result(this,"labels"),_.extend({state:this.state.toJSON(),Messages:a,Icons:d,labels:t},u)}},{key:"getData",value:function(){var t,e;return _.extend(this.getBaseData(),this.model.toJSON(),{collection:null!=(t=null!=(e=this.collection)?e.toJSON():void 0)?t:[]})}},{key:"reRender",value:function(){return this.rendered&&!this.removed&&this.render(),this}},{key:"postRender",value:function(){}},{key:"preRender",value:function(){}},{key:"onRenderError",value:function(t){return console.error("RENDER FAILED",this,t),this.state.set({error:t})}},{key:"render",value:function(){var e,t,n,i;if(!this.removed){if((null!=(i=_.result(this,"renderRequires"))?i.length:void 0)&&!r(this.model,i))return t=h(i),this.listenToOnce(this.model,t,this.render),this;if(n=new s(this.rendered),this.trigger("rendering",n),n.cancelled)return this;if(this.removeAllChildren(),null!=this.template)try{this.$el.html(this.template(this.getData()))}catch(t){e=t,this.onRenderError(e)}return this.renderChildren(),this.trigger("rendered",this.rendered=!0),this}}},{key:"renderChildren",value:function(){}},{key:"renderChild",value:function(t,e,n,i){var r=2<arguments.length&&void 0!==n?n:this.el,s=3<arguments.length&&void 0!==i?i:"append";if(null==t&&(t=l()),this.removeChild(t),null==(this.children[t]=e))return this;switch(s){case"append":e.$el.appendTo(r);break;case"prepend":e.$el.prependTo(r);break;case"at":e.setElement(r[0]||r);break;default:throw new Error("Unknown position: "+s)}return e.render(),this}},{key:"renderChildAt",value:function(t,e,n){return null==n&&(n=this.$(t)),this.renderChild(t,e,n,"at")}},{key:"removeChild",value:function(t){var e;return null!=(e=this.children[t])&&e.remove(),delete this.children[t]}},{key:"removeAllChildren",value:function(){var t,e,n,i,r;if(null!=this.children){for(r=[],e=0,n=(i=_.keys(this.children)).length;e<n;e++)t=i[e],r.push(this.removeChild(t));return r}}},{key:"remove",value:function(){if(!this.removed)return this.stopListening(),this.removed=!0,this.$el.parent().trigger("childremoved",this),this.trigger("remove",this),this.hasOwnModel&&this.model.destroy(),this.removeAllChildren(),this.off(),_get(_getPrototypeOf(t.prototype),"remove",this).call(this),this}},{key:"make",value:function(t,e,n){var i,r,s,o,a,l,u;if(r=document.createElement(t),i=c(r),null!=e)for(a in e)l=e[a],"class"===a||"className"===a?i.addClass(l):i.attr(a,l);if(null!=n)if(_.isArray(n))for(s=0,o=n.length;s<o;s++)u=n[s],i.append(u);else i.append(n);return r}},{key:"invariants",value:function(){return{}}},{key:"assertInvariant",value:function(t,e){if(!t)throw new Error(e)}},{key:"assertInvariants",value:function(){var t,e,n,i,r,s,o,a,l,u,c,h,f,d,p,g,m,v,y;for(c=null!=(h=_.result(this,"parameters"))?h:[],a=null!=(f=_.result(this,"optionalParameters"))?f:[],u=null!=(d=_.result(this,"parameterTypes"))?d:{},n=0,r=c.length;n<r;n++)y=this[l=c[n]],this.assertInvariant(null!=y,"Missing required option: "+l);for(i=0,s=(p=c.concat(a)).length;i<s;i++)null!=(v=u[l=p[i]])&&(y=this[l],t=v.test(y),o=v.message(l),this.assertInvariant(t,o));for(e in m=[],g=this.invariants())o=g[e],m.push(this.assertInvariant(_.result(this,e),o));return m}}],[{key:"include",value:function(t){return _.extend(this.prototype,t)}}]),t}();return t.prototype.hasOwnModel=!0,t.prototype.parameters=[],t.prototype.optionalParameters=[],t.prototype.parameterTypes={},t.prototype.ICONS="change",t.prototype.renderRequires=[],t.prototype.modelEvents={},t.prototype.stateEvents={},t.prototype.collectionEvents={},r=function(e,t){return _.all(t,function(t){return e.has(t)})},t.prototype.removed=!1,t}.call(this)}).call(this)},{"./core-model":2,"./event":11,"./icons":14,"./messages":16,"./shim":66,"./templates":67,"./templates/helpers":68,"./utils/on-change":93,backbone:235,jquery:256,underscore:262}],4:[function(t,r,e){(function(){var e,n,i;e=t("../core-view"),i=t("../templates"),n=t("../messages"),r.exports=function(){var t=function(){function i(){return _classCallCheck2(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,e),_createClass2(i,[{key:"getData",value:function(){return{checked:this.checked(),label:this.label?n.getText(this.label):null}}},{key:"initialize",value:function(t){var e=t.attr,n=t.label;return this.attr=e,this.label=n,_get(_getPrototypeOf(i.prototype),"initialize",this).call(this)}},{key:"checked",value:function(){return this.model.get(this.attr)}},{key:"toggle",value:function(t){return null!=t&&t.stopPropagation(),this.model.toggle(this.attr)}},{key:"events",value:function(){return{click:"toggle"}}},{key:"modelEvents",value:function(){var t;return(t={})["change:"+this.attr]=this.setCheckboxState,t}},{key:"setCheckboxState",value:function(){return null==this.cb&&(this.cb=this.$("input")[0]),this.cb.checked=this.model.get(this.attr)}}]),i}();return t.prototype.class="checkbox",t.prototype.template=i.template("checkbox"),t}.call(this)}).call(this)},{"../core-view":3,"../messages":16,"../templates":67}],5:[function(t,i,e){(function(){var e,n;e=t("backbone"),n=t("../core-model"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e.Collection),_createClass2(t,[{key:"close",value:function(){var t;for(this.trigger("close",this),this.off();t=this.pop();)t.collection===this&&(delete t.collection,t.destroy());return this.reset(),this.stopListening()}}]),t}();return t.prototype.model=n,t}.call(this)}).call(this)},{"../core-model":2,backbone:235}],6:[function(t,r,e){(function(){var e,n,i;i=t("underscore"),e=t("../core-view"),n=t("../templates"),r.exports=function(){var t=function(){function r(){return _classCallCheck2(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,e),_createClass2(r,[{key:"getData",value:function(){return i.extend(this.getBaseData(),{value:this.model.get(this.sets),placeholder:this.placeholder,button:this.button})}},{key:"initialize",value:function(t){var e=t.placeholder,n=t.button,i=t.sets;return this.placeholder=e,this.button=n,this.sets=i,_get(_getPrototypeOf(r.prototype),"initialize",this).call(this),null!=this.sets?this.sets:this.sets="value"}},{key:"postRender",value:function(){return this.$el.addClass(this.className)}},{key:"modelEvents",value:function(){var t;return(t={})["change:"+this.sets]=this.setDomValue,t}},{key:"events",value:function(){return{"keyup input":"setModelValue","click button":"act"}}},{key:"setModelValue",value:function(t){return this.model.set(this.sets,t.target.value)}},{key:"setDomValue",value:function(){var t,e;if(e=this.model.get(this.sets),(t=this.$("input")).val()!==e)return t.val(e)}},{key:"act",value:function(){return this.trigger("act",this.model.get(this.sets))}}]),r}();return t.prototype.className="input-group",t.prototype.template=n.template("input-with-button"),t}.call(this)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],7:[function(t,r,e){(function(){var e,n,i;i=t("underscore"),e=t("../core-view"),n=t("../templates"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"parameters",value:function(){return["attr","placeholder","label"]}},{key:"optionalParameters",value:function(){return["getProblem","helpMessage"]}},{key:"getProblem",value:function(t){return null}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.setValidity()}},{key:"setValidity",value:function(){return this.state.set({problem:this.getProblem(this.model.get(this.attr))})}},{key:"getData",value:function(){return i.extend(this.getBaseData(),{value:this.model.get(this.attr),label:this.label,placeholder:this.placeholder,helpMessage:this.helpMessage,hasProblem:this.state.get("problem")})}},{key:"postRender",value:function(){return this.$el.addClass(this.className),this.onChangeValidity()}},{key:"events",value:function(){return{"keyup input":"setModelValue"}}},{key:"stateEvents",value:function(){return{"change:problem":this.onChangeValidity}}},{key:"modelEvents",value:function(){var t;return(t={})["change:"+this.attr]=this.onChangeValue,t}},{key:"onChangeValue",value:function(){return this.setValidity(),this.setDOMValue()}},{key:"onChangeValidity",value:function(){var t,e;return e=this.state.get("problem"),t=this.$(".help-block"),e?(this.$el.toggleClass("has-warning","warning"===e.level),this.$el.toggleClass("has-error","warning"!==e.level),null!=e.message&&t.text(Messages.getText(e.message)),t.slideDown()):(this.$el.removeClass("has-warning has-error"),t.slideUp())}},{key:"setModelValue",value:function(t){return this.model.set(this.attr,this.$(t.target).val())}},{key:"setDOMValue",value:function(){var t,e,n;if(e=(t=this.$("input")).val(),(n=this.model.get(this.attr))!==e)return t.val(n)}}]),t}();return t.prototype.className="form-group",t.prototype.template=n.template("input-with-label"),t.prototype.helpMessage=null,t}.call(this)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],8:[function(e,n,t){(function(){var t,p,g,m,v=[].splice;p=e("underscore"),t=e("../core-model"),m=function(t,e){var n;return n=t[e],p.isObject(n)?n:t[e]={}},g=function(t){return p.isObject(t)&&!p.isFunction(t)&&!p.isArray(t)},n.exports=function(){function d(){return _classCallCheck2(this,d),_possibleConstructorReturn(this,_getPrototypeOf(d).apply(this,arguments))}return _inherits(d,t),_createClass2(d,[{key:"_triggerChangeRecursively",value:function(t,e){var n,i,r,s;for(n in i=[],e)s=e[n],r=t+"."+n,p.isObject(s)?i.push(this._triggerChangeRecursively(r,s)):i.push(this.trigger("change:"+r,this,this.get(r)));return i}},{key:"get",value:function(t){var e;if(p.isArray(t)){var n=_toArray(t);return e=n[0],n.slice(1).reduce(function(t,e){return t&&t[e]},_get(_getPrototypeOf(d.prototype),"get",this).call(this,e))}return/\w+\.\w+/.test(t)?this.get(t.split(/\./)):_get(_getPrototypeOf(d.prototype),"get",this).call(this,t)}},{key:"pick",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return p.object(p.flatten(n).map(function(t){return[t,e.get(t)]}))}},{key:"_triggerPathChange",value:function(t,e){var n,i,r,s,o;for(r=[],this.trigger("change",this,t.join("."),e),s=[],n=0,i=t.length;n<i;n++)o=t[n],r.push(o),s.push(this.trigger("change:"+r.join("."),this,this.get(r)));return s}},{key:"_triggerUnsetPath",value:function(t,e){var n,i,r;if(p.isObject(e)){for(n in i=[],e)r=e[n],i.push(this._triggerUnsetPath(t.concat([n]),r));return i}return this.trigger("change:"+t.join("."))}},{key:"set",value:function(t,e){var n,i,r,s,o,a,l,u,c,h,f;if(null==t)throw new Error("No key");if(!p.isArray(t)){if(p.isString(t))return/\w+\.\w+/.test(t)?this.set(t.split(/\./),e):p.isObject(e)&&!p.isArray(e)?this.set([t],e):_get(_getPrototypeOf(d.prototype),"set",this).call(this);for(o in u=[],t)h=t[o],u.push(this.set(o,h));return u}if(g(e))for(o in e)h=e[o],this.set(t.concat([o]),h);else if(r=(f=_toArray(t))[0],a=f.slice(1),i=_slicedToArray(v.call(a,-1),1)[0],!(s=this.get(r))||!p.isFunction(s)&&p.isObject(s)||this.unset(r),c=null!=s?s:{},l=(n=a.reduce(m,c))[i],n[i]=e,_get(_getPrototypeOf(d.prototype),"set",this).call(this,r,c),this._triggerPathChange(t,e),null!=l&&null==e)return this._triggerUnsetPath(t,l)}}]),d}()}).call(this)},{"../core-model":2,underscore:262}],9:[function(t,r,e){(function(){var e,n,i;i=t("underscore"),n=t("../templates"),e=t("./input-with-label"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"parameters",value:function(){return["model","collection","attr","label","optionLabel"]}},{key:"optionalParameters",value:function(){return["noOptionsMessage"].concat(_get(_getPrototypeOf(t.prototype),"optionalParameters",this).call(this))}},{key:"events",value:function(){return{"change select":"setModelValue"}}},{key:"collectionEvents",value:function(){return{"add remove reset change":this.reRender}}},{key:"getData",value:function(){var e;return e=this.model.get(this.attr),i.extend(this.getBaseData(),{label:this.label,model:this.model.toJSON(),selected:function(t){return t.name===e},options:this.collection.toJSON(),optionLabel:this.optionLabel,helpMessage:this.helpMessage,noOptionsMessage:this.noOptionsMessage,hasProblem:this.state.get("problem")})}}]),t}();return t.prototype.template=n.template("select-with-label"),t.prototype.noOptionsMessage="core.NoOptions",t}.call(this)}).call(this)},{"../templates":67,"./input-with-label":7,underscore:262}],10:[function(f,t,d){(function(){var t,e,n,i,r,s,o,a,l,u,c,h;h=f("underscore"),e=f("backbone"),r=f("../core-model"),i=f("./collection"),d.assertMatch=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"value";if(!t.test(e))throw new Error(t.message(n))},o=function(){function n(t,e){if(_classCallCheck2(this,n),this.type=t,this.name=e,!(this instanceof n))return new n(this.type,this.name)}return _createClass2(n,[{key:"test",value:function(t){return t instanceof this.type}},{key:"message",value:function(t){return t+" is not an instance of "+this.name}}]),n}(),c=function(){function n(t,e){_classCallCheck2(this,n),this.name=t,this.structure=e,this._msg=null}return _createClass2(n,[{key:"failValidation",value:function(t){return this._msg=t,!1}},{key:"test",value:function(t){var e,n,i,r;if((this._msg=null)==t)return this.failValidation("it is null");if(null==t)return!1;for(n in i=this.structure)if(r=i[n],e=t[n],!r.test(e))return this.failValidation(r.message("."+n));return!0}},{key:"message",value:function(t){return t+" failed "+this.name+" validation, because "+this._msg}}]),n}(),d.InstanceOf=o,d.Structure=c,d.Model=new o(e.Model,"Backbone.Model"),d.CoreModel=new o(r,"core-model"),d.CoreCollection=new o(i,"core/collection"),d.Array=l={name:"array",test:h.isArray,message:function(t){return t+" is not an array"}},d.ArrayOf=t=function(n){return{name:"array of "+n.name,test:function(t){return this.passed=l.test(t)&&h.all(t,n.test)},message:function(t){var e;return t+" is not an array of "+(null!=(e=n.name)?e:"the correct type")}}},d.Function={name:"function",test:h.isFunction,message:function(t){return t+" is not a function"}},d.Number={name:"number",test:h.isNumber,message:function(t){return t+" is not a number"}},d.String=u={name:"string",test:h.isString,message:function(t){return t+" is not a string"}},d.Maybe=function(e){return{name:"maybe "+e.name,test:function(t){return null==t||e.test(t)},message:function(t){return e.message(t)}}},d.Callable=n={name:"callable",test:function(t){return null!=t&&h.isFunction(t.call)},message:function(t){return t+" is not callable"}},d.HasProperty=function(e){return{name:"has-property("+e+")",test:function(t){return null!=t&&e in t},message:function(t){return t+"."+e+" not found"}}},d.UnionOf=function(){for(var t=arguments.length,i=Array(t),e=0;e<t;e++)i[e]=arguments[e];return{name:function(){return"Union of "+i.map(function(t){return t.name}).join(", ")},test:function(e){var n=this;return h.all(i,function(t){return(n._t=t).test(e)})},message:function(t){var e;return null!=(e=this._t)?e.message(t):void 0}}},d.Listenable=new c("Listenable",{on:d.Function,off:d.Function}),d.Service=a=new c("Service",{root:u,query:n,fetchModel:n,fetchLists:n,count:n,whoami:n}),d.DataModel=s=new c("imjs.Model",{name:u,makePath:n,findCommonType:n}),d.Query=new c("Query",{service:a,model:s,rows:n,count:n,toXML:n,root:u,views:t(u)})}).call(this)},{"../core-model":2,"./collection":5,backbone:235,underscore:262}],11:[function(t,e,n){(function(){e.exports=function(){function n(t,e){_classCallCheck2(this,n),this.data=t,this.target=e}return _createClass2(n,[{key:"cancel",value:function(){return this.cancelled=!0}},{key:"preventDefault",value:function(){return this.cancel()}},{key:"stopPropagation",value:function(){}}]),n}()}).call(this)},{}],12:[function(t,e,n){(function(){n.suppress=function(t){return null!=t&&t.preventDefault(),null!=t?t.stopPropagation():void 0}}).call(this)},{}],13:[function(a,t,l){(function(){var t,i,r,e,s,c,h,n,o;r=a("underscore"),i=a("./templates"),t=a("./core/nested-model"),o=function(t){return t.isAttribute()?t.getParent().getType():t.getType()},h=function(t){var e;return[(e=o(t)).name].concat(t.model.getAncestorsOf(e))},e=function(t){return!!t},c=new t,l.getFormatter=n=function(t){var e,n,i,r,s,o,a,l,u;if(null==t||t.isRoot())throw new Error("No path or path is root");for(l=t.model,s=null!=(u=c.get([l.name]))?u:{},n=h(t),i=t.end.name,o=0,a=n.length;o<a;o++)if(!0===(r=s[(e=n[o])+"."+i]||s[e+".*"])&&(r=s[e]),null!=r)return r;return null},l.shouldFormat=function(t){if(null==t)throw new Error("no path");return!!t.isAttribute()&&e(n(t))},l.registerFormatter=function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:["*"];if(null==(null!=t?t.call:void 0))throw new Error("formatter is not a function");return 1===i.length&&"*"!==i[0]?c.set([e,n+"."+i[0]],t):(c.set([e,n],t),s(e,n,i))},l.disableFormatter=function(t,e){var n,i,r,s,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:["*"];for(s=[],n=0,i=o.length;n<i;n++)r=o[n],s.push(c.set([t,e+"."+r],!1));return s},l.list=function(t){var e,n,i;for(e in i=[],n=c.get([t]))n[e]&&i.push(e);return i},l.enableFormatter=s=function(t,e,n){var i,r,s,o,a=2<arguments.length&&void 0!==n?n:["*"];for(o=[],i=0,r=a.length;i<r;i++)s=a[i],o.push(c.set([t,e+"."+s],!0));return o},l.defaultFormatter=function(t,e,n){return null!=n?r.escape(n):i.null_value},l.reset=function(){return c.clear(),c.trigger("reset")}}).call(this)},{"./core/nested-model":8,"./templates":67,underscore:262}],14:[function(s,o,t){(function(){var i,t,e,n,l,r;l=s("underscore"),e=s("./core-model"),n=s("./options"),i={},r=function(t,e){return i[t]=l.extend({},e)},t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"icon",value:function(t,e,n){var i,r,s,o,a=2<arguments.length&&void 0!==n?n:{};return i=[],o=function(){var t;for(r in t=[],a)s=a[r],"className"!==r&&t.push(r+'="'+l.escape(s)+'"');return t}(),"className"in a&&i.push(l.escape(a.className)),i.push(this.iconClasses(t)),e&&i.push(this.getSize(e)),'<i class="'+i.join(" ")+'" '+o.join(" ")+"></i>"}},{key:"iconWithProps",value:function(t,e){return this.icon(t,null,e)}},{key:"getSize",value:function(t){var e;return null!=(e=this.get("size"+t.toUpperCase()))?e:""}},{key:"iconClasses",value:function(t){return this.get("Base")+" "+this.get(t)}},{key:"_loadIconSet",value:function(){var t;if((t=i[this.options.get("icons")])&&(this.clear({silent:!0}),null!=t))return this.set(t)}},{key:"initialize",value:function(t){var e=0<arguments.length&&void 0!==t?t:n;return this.options=e,this._loadIconSet(),this.listenTo(this.options,"change:icons",this._loadIconSet)}}]),t}(),i.glyphicons={Base:"glyphicon",unsorted:"glyphicon-resize-vertical",ASC:"glyphicon-arrow-up",DESC:"glyphicon-arrow-down",headerIcon:"icon",headerIconRemove:"glyphicon-remove",headerIconHide:"glyphicon-minus",headerIconReveal:"glyphicon-fullscreen",SortStringASC:"glyphicon-sort-by-alphabet",SortStringDESC:"glyphicon-sort-by-alphabet-alt",SortNumericASC:"glyphicon-sort-by-order",SortNumericDESC:"glyphicon-sort-by-order-alt",RootClass:"glyphicon-stop",Yes:"glyphicon-star",No:"glyphicon-star-empty",Table:"glyphicon-list",Script:"glyphicon-console",Export:"glyphicon-cloud-download",Error:"glyphicon-warning-sign",Info:"glyphicon-info-sign",Warning:"glyphicon-warning-sign",Remove:"glyphicon-minus-sign",OK:"glyphicon-ok",Cancel:"glyphicon-remove",Check:"glyphicon-check",UnCheck:"glyphicon-unchecked",CheckUnCheck:"glyphicon-ok-none",Add:"glyphicon-plus-sign",Move:"glyphicon-move",More:"glyphicon-plus-sign",Filter:"glyphicon-filter",Summary:"glyphicon-stats",Undo:"glyphicon-refresh",Refresh:"glyphicon-refresh",Columns:"glyphicon-pause",Collapsed:"glyphicon-chevron-right",Expanded:"glyphicon-chevron-down",CollapsedSection:"glyphicon-triangle-right",ExpandedSection:"glyphicon-triangle-bottom",MoveDown:"glyphicon-chevron-down",GoBack:"glyphicon-chevron-left",GoForward:"glyphicon-chevron-right",MoveUp:"glyphicon-chevron-up",Toggle:"glyphicon-random",ExpandCollapse:"glyphicon-chevron-right icon-chevron-down",Help:"glyphicon-question-sign",ReverseRef:"glyphicon-retweet",Reorder:"glyphicon-menu-hamburger",Edit:"glyphicon-edit",ExtraValue:"glyphicon-map-marker",Tree:"glyphicon-plus",Download:"glyphicon-save-file",download:"glyphicon-cloud-download",Options:"glyphicon-tasks",ClipBoard:"glyphicon-paperclip",Composed:"glyphicon-tags",RemoveConstraint:"glyphicon-remove-sign",Dismiss:"glyphicon-remove-sign",ClosedReference:"glyphicon-expand",OpenReference:"glyphicon-collapse-down",Lock:"glyphicon-lock",Lists:"glyphicon-list-alt",Attribute:"glyphicon-unchecked",ExternalLink:"glyphicon-globe",tsv:"glyphicon-list",csv:"glyphicon-list",xml:"glyphicon-xml",json:"glyphicon-json",fake:"glyphicon-bug",Bug:"glyphicon-bug",Rubbish:"glyphicon-trash",RubbishFull:"glyphicon-trash",Joins:"glyphicon-link",Mail:"glyphicon-envelope"},i.fontawesome={Base:"fa",unsorted:"fa-unsorted",ASC:"fa-sort-up",DESC:"fa-sort-down",SortStringASC:"fa-sort-alpha-asc",SortStringDESC:"fa-sort-alpha-desc",SortNumericASC:"fa-sort-numeric-asc",SortNumericDESC:"fa-sort-numeric-desc",headerIcon:"fa",headerIconRemove:"fa-times",headerIconHide:"fa-ellipsis-h",headerIconReveal:"fa-arrows-h",sizeLG:"fa-2x",Yes:"fa-star",No:"fa-star-o",Table:"fa-list",EmptyTable:"fa-table",Script:"fa-file-code-o",Export:"fa-cloud-download",Remove:"fa-minus-circle",OK:"fa-check",Cancel:"fa-remove",Check:"fa-toggle-on",UnCheck:"fa-toggle-off",CheckUnCheck:"fa-toggle-on fa-toggle-off",Add:"fa-plus",Move:"fa-arrows",More:"fa-plus",Dropbox:"fa-dropbox",Drive:"fa-google",download:"fa-cloud-download",Galaxy:"fa-cloud-upload",GenomeSpace:"fa-cloud-upload",Filter:"fa-filter",Summary:"fa-bar-chart-o",Undo:"fa-undo",Refresh:"fa-refresh",Columns:"fa-columns",Collapsed:"fa-chevron-right",Expanded:"fa-chevron-down",CollapsedSection:"fa-caret-right",ExpandedSection:"fa-caret-down",MoveDown:"fa-chevron-down",GoBack:"fa-chevron-left",GoForward:"fa-chevron-right",MoveUp:"fa-chevron-up",Toggle:"fa-retweet",ExpandCollapse:"fa-chevron-right fa-chevron-down",Help:"fa-question-circle",Tree:"fa-sitemap",ReverseRef:"fa-retweet",Reorder:"fa-reorder",Options:"fa-tasks",Edit:"fa-edit",ExtraValue:"fa-database",Download:"fa-file-archive-o",ClipBoard:"fa-paperclip",Composed:"fa-tags",RemoveConstraint:"fa-times-circle",Dismiss:"fa-times-circle",Error:"fa-warning",Info:"fa-info-circle",Warning:"fa-warning",Lock:"fa-lock",RootClass:"fa-square",Attribute:"fa-tag",ClosedReference:"fa-plus-square",OpenReference:"fa-plus-square-o",CodeFile:"fa-file-code-o",Rubbish:"fa-trash-o",RubbishFull:"fa-trash",Joins:"fa-share-alt",ExternalLink:"fa-globe",Lists:"fa-cloud-upload",tsv:"fa-file-excel-o",csv:"fa-file-excel-o",xml:"fa-code",json:"fa-json",fake:"fa-bug",Bug:"fa-bug",Mail:"fa-envelope"},o.exports=new t,o.exports.Icons=t,o.exports.registerIconSet=r,o.exports.names=function(){var t,e,n;return t=function(){var t;for(e in t=[],i)n=i[e],t.push(l.keys(n));return t}(),l.union.apply(null,t)}}).call(this)},{"./core-model":2,"./options":63,underscore:262}],15:[function(m,t,v){(function(){var e,t,n,u,a,i,l,c,h,f,d,r,s,o;c=m("underscore"),m("./shim");var p=m("imjs");f=p.Service.connect;var g=m("es6-promise");a=g.Promise,o=m("./version"),l=m("./core/type-assertions"),e=m("./views/dashboard"),i=m("./views/table"),u=m("./options"),n=m("./messages"),t=m("./formatting"),s=m("./utils/simple-formatter"),r=function(s){var o;return o=function(t,e,n){var i,r;return l.Query.test(n)?new a(d(s,t,n,e)):(r=n.service,i=n.query,(l.Service.test(r)?r:f(r)).query(i).then(c.partial(o,t,e)))}},d=function(n,i,a,t){var l=3<arguments.length&&void 0!==t?t:{};return function(t){var r,s,e,o;return s=h(i),e="undefined"!=typeof page&&null!==page?c.pick(l,"start","size"):null,l=c.extend(c.omit(l,"start","size"),{model:e,query:a}),(o=n(l)).setElement(s),function(){var t,e,n,i;for(i=[],t=0,e=(n=c.result(o,"className").split(" ")).length;t<e;t++)r=n[t],i.push(s.classList.add(r))}(),s.classList.add(u.get("StylePrefix")),o.render(),t(o)}},h=function(t){var e,n;if(null==t)throw new Error("No target element provided");if(null==(n=c.isString(t)?document.querySelector(t):null!=(e=t[0])?e:t))throw new Error("Target("+t+") not found on page");return n},v.version=o,v.setMessages=n.set.bind(n),v.configure=u.set.bind(u),v.loadTable=r(i.create),v.loadDash=r(function(t){return new e(t)}),v.createFormatter=s,v.formatting=c.omit(t,"getFormatter","shouldFormat","reset")}).call(this)},{"./core/type-assertions":10,"./formatting":13,"./messages":16,"./options":63,"./shim":66,"./utils/simple-formatter":104,"./version":111,"./views/dashboard":136,"./views/table":209,"es6-promise":238,imjs:247,underscore:262}],16:[function(c,h,t){(function(){var t,e,o,n,a,i,r,s,l;t=c("backbone"),a=c("underscore"),i=c("./messages/actions"),r=c("./messages/common");var u=c("./templates/helpers");s=u.numToString,l=u.pluralise,e=[r,i],o={formatNumber:s,pluralise:l},n=function(){function s(){var t;return _classCallCheck2(this,s),(t=_possibleConstructorReturn(this,_getPrototypeOf(s).apply(this,arguments))).getText=t.getText.bind(_assertThisInitialized(t)),t}return _inherits(s,t.Model),_createClass2(s,[{key:"initialize",value:function(){var t=this;return this.cache={},this.on("change",function(){return t.cache={}})}},{key:"destroy",value:function(){var t,e;for(t in this.off(),e=[],this)e.push(delete this[t]);return e}},{key:"getTemplate",value:function(t){var e,n;return null!=(n=null!=(e=this.cache[t])?e:this.get(t))&&null==n.call&&(n=a.template(n)),this.cache[t]=n}},{key:"getText",value:function(t,e){var n,i,r=1<arguments.length&&void 0!==e?e:{};return function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,s),null!=(n="function"==typeof(i=this.getTemplate(t))?i(a.extend({Messages:this},o,r)):void 0)?n:"!!!No message for "+t+"!!!"}},{key:"setWithPrefix",value:function(t,e){var n,i,r;for(n in i=[],e)r=e[n],i.push(this.set(t+"."+n,r));return i}},{key:"defaults",value:function(){return a.extend.apply(null,[{}].concat(e))}}]),s}(),h.exports=new n,h.exports.Messages=n}).call(this)},{"./messages/actions":17,"./messages/common":20,"./templates/helpers":68,backbone:235,underscore:262}],17:[function(t,e,n){(function(){e.exports={"export.Export":"Export","export.ExportQuery":"Export","export.DialogueTitle":"Export","export.category.Format":"<%= format.EXT %> Format","export.category.Columns":"<%= columns %> Columns","export.category.Preview":"Preview","export.preview.Limit":"Preview is limited to at most 3 results.","export.heading.Columns":"Columns","export.category.Rows":"<% if (rowCount === max) { %>\n  All\n<% } else { %>\n  <%= rowCount %> of <%= max %>\n<% } %>\nRows","export.category.Compression":"<% if (compression) { %>\n  <%= compression.toUpperCase() %>\n<% } else { %>\n  No\n<% } %> Compression","export.category.Options":"Options","export.category.JsonFormat":"As <%= (jsonFormat === 'objects') ? 'Objects' : 'Rows' %>","export.category.FastaFormat":"FASTA options","export.category.ColumnHeaders":"<% if (headers) { %>\n  <%= {friendly: 'Formatted', path: 'Raw'}[headerType] %>\n<% } else { %>\n  No\n<% } %>\nColumn Headers","export.category.Destination":"<% if (dest === 'download') { %>\n  Download <%= format.EXT %> file\n<% } else { %>\n  Send <%= format.EXT %> to <%= dest %>\n<% } %>","export.galaxy.name":["<% if (orgs.length === 1) { %><%= orgs[0] %> <% } %>","<%= cls %> data","<% if (branding) { %> from <%= branding.name %><% } %>"].join(""),"export.galaxy.info":"<%= query.root %> data from <%= query.service.root %>.\nUploaded from <%= currentLocation %>.\n<% if (lists.length) { %>source: <%= lists.join(', ') %><% } %>\n<% if (orgs.length)  { %>organisms: <%= orgs.join(', ') %><% } %>","export.format.description.TSV":"A flat file format suitable for spreadsheet programmes","export.format.name.TSV":"Tab separated values.","export.format.description.CSV":"A flat file format, suitable for spreadsheet programmes","export.format.name.CSV":"Comma separated values.","export.format.description.XML":"A text format suitable for machine processing.","export.format.name.XML":"XML","export.format.name.JSON":"JSON","export.format.description.JSON":"A text format suitable for machine processing.","export.format.name.FASTA":"FASTA sequence.","export.format.description.FASTA":"FASTA output for sequence data.","export.format.name.GFF3":"GFF3 features.","export.format.description.GFF3":"GFF3 output for sequence features.","export.format.name.BED":"BED locations.","export.format.description.BED":"BED output for sequence feature locations.","export.format.name.FAKE":"Fake","export.format.description.FAKE":"Fake format for testing. Should only appear if the\nquery has departments in the view.","export.format.name.FAKE_2":"Also Fake","export.format.description.FAKE_2":"Fake format for testing. Should only appear if the\nquery has companies in the view.","export.param.Size":"Size: <%= size %>","export.param.Format":"Format","export.param.Start":"Offset: <%= start %>","export.param.Destination":"Destination","export.param.Name":"File name","export.help.AdditionalCols":"You can add any attributes of objects which are already\nin the query.","rows.All":"No limit","export.cloud.FileLocation":"Upload to <%- cloud %> successful. Your file is available at:","export.UseCompression":"Compress results","export.UseGZIP":"Use GZIP compression (produces a .gzip archive)","export.UseZIP":"Use Zip compression (produces a .zip archive)","export.AddHeaders":"Add column headers","export.json.Rows":"Return results as rows - each row is an Array of JSON values, e.g.:","export.SetTablePage":"Select rows in table","export.ResetRowSelection":"Select all rows","export.json.RowsExample":'["eve", "2R", 5866824, 5868300]',"export.json.ObjExample":'{\n  "class": "Gene",\n  "symbol": "eve",\n  "chromosomeLocation": {\n    "class": "ChromosomeLocation",\n    "start": 5866824,\n    "end": 5868300\n    "locatedOn": {\n      "class": "Chromosome",\n      "primaryIdentifier": "2R"\n    }\n  }\n}',"export.json.Objects":"Return results as objects - each result is a nested graph of\ndata, e.g.:","export.json.ObjWarning":"Please note that it is not recommended to set the size parameters\nwhen requesting object results, since the size of the result\nset, and the position of the offsets will differ when multiple\nrows are replaced by a single object with a collection.","export.ff.FriendlyHeaders":'Human readable headers (eg. "Gene > Organism Name")',"export.ff.PathHeaders":'Raw path headers (eg. "Gene.organism.shortName)',"export.error.NoColumnsSelected":"No columns selected","export.error.OffsetOutOfBounds":"The offset is greater than the total number of results.",ListNameDuplicate:"List names must be unique. This name is already taken",ListNameEmpty:"Lists must have names. Please enter one",ListNameIllegal:"Some characters are not allowed in list names. This name contains the following\nillegal characters: <%- illegals.join(', ') %>. Please remove them.",ExportTitle:"Download results for <%= name || 'query' %>",ConfigureExport:"Configure Export",GetData:"Download Data",ExportHelp:"Download file containing results to your computer",ExportButton:"Download","download-file":"Download File",download:"Download file",Galaxy:"Send to Galaxy",GenomeSpace:"Upload to Genomespace",Drive:"Save to Google Drive",Dropbox:"Save to Dropbox","Destdownload-file":"File",DestGalaxy:"Galaxy",DestGenomespace:"Genomespace",ExportAlt:"Send Data Somewhere Else",ExportLong:'<span class="hidden-tablet">Download</span>\nFile\n<span class="im-only-widescreen">to your Computer</span>',SendToGalaxy:'<span class="hidden-tablet">Send to</span>\nGalaxy\n<span class="im-only-widescreen">for analysis</span>',SendToGenomespace:'<span class="hidden-tablet">Upload to</span>\n<span class="im-only-widescreen">your</span>\nGenomespace\n<span class="im-only-widescreen">account</span>',MyGalaxy:"Send to your Galaxy",ForgetGalaxy:"Clear this galaxy URL",GalaxyHelp:"Start a file upload job within Galaxy",GalaxyURILabel:"Galaxy Location:",GalaxyAlt:"Send to a specific Galaxy",SaveGalaxyURL:"Make this my default Galaxy",WhatIsGalaxy:"What is Galaxy?",WhatIsGalaxyURL:"http://wiki.g2.bx.psu.edu/",GalaxyAuthExplanation:"If you have already logged into Galaxy with this browser, then the data\nwill be sent into your active account. Otherwise it will appear in a \ntemporary anonymous account.",CopyToClipBoard:"Copy to clipboard: <CTL>+C, <ENTER>",IsPrivateData:"This link provides access to data stored in your private lists. In order to do so\nit uses the API access token provided on initialisation. If this is your permanent\nAPI token you should be as careful of this link as you would of the data is provides\naccess to. If this is just a 24 hour access token, then you will need to replace it\nonce it becomes invalid.",LongURI:"The normal URI for this query (which includes the full query XML in the \nparameters) is too long for a GET request. The URI you can see here uses a\nquery-id, which has a limited validity. You should not store this URI for long\nterm use.",SendToOtherGalaxy:"Send",AllRows:"Whole Result Set",SomeRows:"Specific Range",WhichRows:"Rows to Export",RowsHelp:"Export all rows, or define a range of rows to export.",AllColumns:"All Current Columns",SomeColumns:"Choose Columns",CompressResults:"Compress results",NoCompression:"No compression",GZIPCompression:"GZIP",ZIPCompression:"ZIP",Copy:"copy to clip-board",ResultsPermaLink:"Perma-link to results",ResultsPermaLinkText:"Results URI",QueryXML:"Query XML",ResultsPermaLinkTitle:"Get a permanent URL for these results, suitable for your own use",ResultsPermaLinkShareTitle:"Get a permanent URL for these results, suitable for sharing with others",ColumnsHelp:"Export all columns, or choose specific columns to export.",WhichColumns:"Columns to Export",ResetColumns:"Reset Columns.",FirstRow:"From",LastRow:"To",SpreadsheetOptions:"Spreadsheet Options",ColumnHeaders:"Include Column Headers",PossibleColumns:"You can add any attribute from these nodes without changing your results:",ExportedColumns:"Exported Columns (drag to reorder)",ChangeColumns:"You may add any of the columns in the right hand box by clicking on the\nplus sign. You may remove unwanted columns by clicking on the minus signs\nin the left hand box. Note that while adding these columns will not alter your query,\nif you remove all the attributes from an item, then you <b>may change</b> the results\nyou receive.",OuterJoinWarning:"This query has outer-joined collections. This means that the number of rows in \nthe table is likely to be different from the number of rows in the exported results.\n<b>You are strongly discouraged from specifying specific ranges for export</b>. If\nyou do specify a certain range, please check that you did in fact get all the \nresults you wanted.",IncludedFeatures:"Exportable parts of this Query - <strong>choose at least one</strong>:",FastaFeatures:"Features with Sequences in this Query - <strong>select one</strong>:",FastaOptions:"FASTA Specific Options",FastaExtension:"Extension (eg: 100/100bp/5kbp/0.5mbp):",ExtraAttributes:"Columns to include as extra attributes on each exported record:",NoSuitableColumns:"There are no columns of a suitable type for this format.",BEDOptions:"BED Specific Options",Gff3Options:"GFF3 Specific Options",ChrPrefix:'Prefix "chr" to the chromosome identifier as per UCSC convention (eg: chr2)',ConfigureExportHelp:"Configure the export options in these categories","largetable.ok":"Set page size to <%- size %>","largetable.abort":"Cancel","largetable.appeal":"You have requested a very large table size (<%= size %> rows per page). Your\nbrowser may struggle to render such a large table,\nand the page could become unresponsive. In any case,\nwill be very difficult for you to read the whole table\nin the page. We suggest the following alternatives:"}}).call(this)},{}],18:[function(t,e,n){(function(){var n;(n=t("../messages")).setWithPrefix("codegen",{AsHTML:"As HTML page",DialogueTitle:'Generated <%= Messages.getText("codegen.Lang", {lang: lang}) %>\nCode for <%= query.name || "Query" %>',CannotExportXML:"You cannot save the XML as a file directly. Please use your browser's cut\nand paste functionality.",PrimaryAction:"Save",ChooseLang:"Choose Language",ShowBoilerPlate:"Show comments",HighlightSyntax:"Highlight Syntax",GenerateCodeIn:function(t){var e=t.lang;return"Generate "+n.getText("codegen.Lang",{lang:e})+"\n"+("xml"!==e?"code":"")},Lang:function(t){var e=t.lang;switch(e){case"py":return"Python";case"pl":return"Perl";case"java":return"Java";case"rb":return"Ruby";case"js":return"JavaScript";case"xml":return"XML";default:throw new Error("Unknown language "+e)}}})}).call(this)},{"../messages":16}],19:[function(t,e,n){(function(){t("../messages").setWithPrefix("columns",{DialogueTitle:"Manage Columns",ApplyChanges:"Apply Changes",FindColumnToAdd:"Add a Column",AddColumn:"<% if (num < 1) { %>\n  No columns chosen\n<% } else { %>\n  Add <%= num %> new <%= pluralise('column', num) %>\n<% } %>",AddColumnToSortOrder:"Sort by this column",NoChangesToApply:"There are no changes to apply.",OrderVerb:"Add / Remove / Re-Arrange",OrderTitle:"Columns",SortVerb:"Configure",SortTitle:"Sort-Order",OnlyColsInView:"Only show columns in the table:",SortingHelpTitle:"What Columns Can I Sort by?",ViewTabTitle:"Selected Columns",SortOrderTabTitle:"Sort Order",CurrentView:"Current Columns",CurrentViewHelp:"Re-arrange or remove columns by dragging, or by using the buttons",CurrentSortOrder:"<% if (oes.length) { %>\n  <%= oes.length %> Order <%= pluralise('Elements', oes.length) %>\n<% } else { %>\n  Not sorted.\n<% } %>",NoSortOrder:"No sort order. Drop columns here to sort the table.",RemoveOrderElement:"Remove this column from the sort-order",CurrentSortOrderHelp:"Re-arrange, add or remove columns. The full set of available\ncolumns is listed below.",ColumnsSelected:'<%= columns.length %> <%= pluralise("Column", columns.length) %>\nSelected<% if (removed) { %>, <%= removed %> Removed<% } %>',ChooseAPathFrom:"Choose a path from <%= root %>",RemoveColumn:"Remove this column",MoveUp:"Move this column up",MoveDown:"Move this column down",ColumnWillBeRemoved:"This column will be removed",RestoreColumn:"Add this column back to the table",ChangeDirection:"Change sort direction",CurrentDirection:"Sorted in\n<%= (dir === 'DESC') ? 'reverse' : void 0 %>\n<%= numeric ? 'numerical' : 'alphabetical' %>\norder.",ManageColumns:"Manage Columns",ManageColumnsShort:"Columns"})}).call(this)},{"../messages":16}],20:[function(t,e,n){(function(){e.exports={All:"All",Reset:"Reset",Export:"Download",Clear:"Clear",Cancel:"Cancel",Complete:"Complete",Error:"Error",Warning:"Warning",Filter:"Filter",Loading:"Loading",Undo:"Undo",and:"and",or:"or",comma:",",Number:"<%= formatNumber(n) %>","modal.DefaultTitle":"Excuse me...","modal.Dismiss":"Close","modal.OK":"OK","modal.ApplyChanges":"Apply Changes","core.NoOptions":"There are no options to select from.",ErrorTitle:function(t){switch(t.level){case"Error":return"Error";case"Warning":return"Warning";case"Info":return"nb";case"Positive":return"Success";default:return"Error"}}}}).call(this)},{}],21:[function(t,e,n){(function(){t("../messages").setWithPrefix("constraints",{Heading:'<%= n %> Active <%= pluralise("Filter", n) %>',AddNewFilter:"Add New Filter",AddFilter:"Add filter",AddNew:"Add Filter",DefineNew:"Define a new filter",EditOrRemove:"edit or remove the currently active filters",None:"No active filters",NoOfValues:'<%= (n === 1) ? "one" : formatNumber(n) %> <%= pluralise("value", n) %>',NoOfIds:'<%= (n === 1) ? "one" : formatNumber(n) %> <%= pluralise("ID", n) %>',ISA:"is a",LookupIn:"in",AddConFor:"Add filter to\n<% if (isAttribute && !hideType) { %><%= typeName %><% } %>\n<%= _.last(parts) %>",ManageFilters:"Manage Filters",ManageFiltersShort:"Filters"})}).call(this)},{"../messages":16}],22:[function(e,t,n){(function(){var t;(t=e("../messages")).setWithPrefix("error",{Oops:"Oops! - Sorry we cannot get that table for you.",EmailHelp:"Send a bug report",ShowQuery:"Show query",ShowError:"Show error",ConnectionError:"Could not connect to server"}),t.setWithPrefix("error.mail",{Subject:"[IMTABLES] - Error running query."}),t.setWithPrefix("error.client",{Heading:"Application error.",Body:"This is due to an unexpected error in the tables\napplication - this is our fault, and we are sorry for the\ninconvenience. Please send us the pre-filled bug report so\nwe can fix this as soon as possible."}),t.setWithPrefix("error.server",{Heading:"Server error - our bad!",Body:"This is most likely related to the query that was just run. If you have\ntwo minutes, please send us an email with details of this query to help us\ndiagnose and fix this bug - we have already pre-filled the bug report,\nyou just need to hit send (and maybe give us some extra details).\nAlternatively, you might be able to fix this query by changing its column, \nfilters or joins; use the tools above to do so."})}).call(this)},{"../messages":16}],23:[function(e,t,n){(function(){var t;(t=e("../messages")).setWithPrefix("joins",{Heading:"Manage Relationships",Manage:function(){return t.getText("joins.Heading")},ManageShort:"Relationships",Inner:"Required",Outer:"Optional",ExplanationTitle:"What does this do?",Explanation:"You can specify the entity relationships within the query here. This\nhas a couple of effects - one is to exclude a class of matched results, the\nother is to change the way the results are presented in the table.\nIf set to required, then an entity which matches the filters\nbut lacks the given relationship will not be returned in the results,\nwhereas if set to optional it will. This also has an effect on the\nway that results are laid out: required collection relationships\nare returned inline, whereas optional collection relationships are\nreturned as nested sub-tables within the main result set."})}).call(this)},{"../messages":16}],24:[function(e,t,n){(function(){var t;(t=e("../messages")).setWithPrefix("lists",{DefaultName:"<%= typeName %> List (<%= new Date() %>)",Create:"Create List",Append:"Add to List",SaveAsList:"Save as List",CreateListTitle:"Create a new List\n<% if (state.count) { %>\n  of <%= formatNumber(state.count) %>\n  <%= pluralise(state.typeName, (state.count || 0)) %>\n<% } %>",AppendToListTitle:"Add\n<% if (state.count) { %>\n  <%= formatNumber(state.count) %>\n  <%= pluralise(state.typeName, (state.count || 0)) %>\n<% } %>\nto\n<%= target || 'a List' %>",NoTags:"No tags",AddTag:"Add a new tag",AddTagBtn:"add",RemoveTag:"Remove this tag",ShowExtraOptions:"<% if (minimised) { %>Show <% } %>Optional attributes",TargetDoesNotExist:"Your target list does not exist.",NoTargetSelected:"Please select a target list.",PossibleAppendTarget:"<%= name %> (<%= formatNumber(size) %> <%= pluralise((typeName || 'item'), size) %>)",NoObjectsSelected:"No objects selected. Choose objects from the table beneath. You can\ndrag this dialog around if it is in the way.",StartPicking:"Pick items from the table",NoCommonType:"There is no common type for these objects."}),t.setWithPrefix("lists.error",{MustBeLoggedIn:"You are not logged in. Anonymous users cannot create lists."}),t.setWithPrefix("lists.params",{Name:"List Name",NamePlaceholder:"List name is required",Desc:"List Description",DescPlaceholder:"Enter a description",Target:"Choose list to append items to"}),t.setWithPrefix("lists.params.help",{Name:"You must provide a unique list name",Target:"You must select a target list"}),t.setWithPrefix("lists.picker",{Expand:"show more options",Collapse:"show fewer options"}),t.setWithPrefix("lists.append",{NoSuitableLists:"No suitable lists were found\n<% if (model.type) { %>\n  for <%- model.type %>.\n<% } else { %>\n  because no items are selected, or they have no common type.\n<% } %>"})}).call(this)},{"../messages":16}],25:[function(e,t,n){(function(){var t;(t=e("../messages")).setWithPrefix("logic",{Heading:"Manage Constraint Logic",Manage:function(){return t.getText("logic.Heading")},ManageShort:"Constraint Logic",LogicLabel:function(){return t.getText("logic.ManageShort")},ApplyLogic:"Change logic"})}).call(this)},{"../messages":16}],26:[function(t,e,n){(function(){t("../messages").setWithPrefix("subtables",{OpenHint:"Click to view/hide rows",RemoveColumn:"Remove this column"})}).call(this)},{"../messages":16}],27:[function(t,e,n){(function(){t("../messages").setWithPrefix("summary",{Got:"<% if (available > got) { %>Showing <%= formatNumber(got) %> of<% } %>",Max:"Maximum",Min:"Minimum",Bucket:"<%= range.min %> to <%= range.max %>: <%= count %> values",Count:"Count",Item:"Item",Average:"Average",StdDev:"Standard Deviation",OnlyOne:"There is only one <%- names.typeName %> <%- names.endName %>:\n<strong><%- item.item %></strong>, which occurs\n<strong>\n  <% if (item.count === 1) { %>\n    once\n  <% } else if (item.count === 2) { %>\n    twice\n  <% } else { %>\n    <%- formatNumber(item.count) %> times\n  <% } %>\n</strong>",NumericDistribution:"Showing distribution of <%= formatNumber(n) %>",FilterValuesPlaceholder:"Filter values",DownloadData:"Download data",DownloadFormat:"As",MoreItems:"Load more items",Include:"Restrict table to matching rows",Exclude:"Exclude matching rows from table",Reset:"Reset selection",Toggle:"Toggle selection",SelectFilter:"Select filter type",FacetBar:"rgba(206, 210, 222, <%= opacity %>)",NoResults:"No results for <%= path %>",SelectedCount:"<%= isApprox ? \"ca. \" : void 0 %><%= formatNumber(selectedCount) %>\n<%= pluralise('Item', selectedCount) %> Selected",Total:"<% if (filtered) { %>(filtered from <%= formatNumber(total) %>)<% } %>"})}).call(this)},{"../messages":16}],28:[function(e,t,n){(function(){var t;(t=e("../messages")).setWithPrefix("table",{Building:"Loading Table ...",OverlayText:"Requesting data...",Empty:"No Results",EmptyWhy:"This query returns no results. You may wish to change its filters"}),t.setWithPrefix("table.lg",{ShowingAll:"Showing all <%= formatNumber(count) %> rows",ShowingRange:'Showing <%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %> <%= pluralise("row", count) %>'}),t.setWithPrefix("table.md",{ShowingAll:"All <%= formatNumber(count) %> rows",ShowingRange:"Showing rows <%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %>"}),t.setWithPrefix("table.sm",{ShowingAll:"All rows",ShowingRange:"Rows <%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %>"}),t.setWithPrefix("table.xs",{ShowingAll:"All rows",ShowingRange:"<%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %>"}),t.setWithPrefix("table.header",{FailedToInitSortMenu:"Could not initialise the sorting menu.",FailedToInitFilter:"Could not initialise the filter menu.",FailedToInitSummary:"Could not intitialise the column summary.",ViewSummary:"View column summary",ToggleColumn:"Toggle column visibility",RemoveColumn:"Remove this column",SortColumn:"<% if (dir === 'ASC') { %>\n  Sorted in ascending order.\n<% } else if (dir === 'DESC') { %>\n  Sorted in descending order.\n<% } else { %>\n  Sort this column.\n<% } %>",ToggleTables:"Expand/collapse all sub-tables",Composed:"This column replaces <%= replaces.length %> others. Click here\nto show the individual columns separately.",FilterTitle:"<% if (count > 0) { %>\n  <%= count %> active filters.\n<% } else { %>\n  Filter by values in this column.\n<% } %>"})}).call(this)},{"../messages":16}],29:[function(t,e,n){(function(){t("../messages").setWithPrefix("undo",{StepTitle:"<% if (label === 'Initial') { %>\n  Initial State\n<% } else if (verb === 'Added') { %>\n  <% if (label === 'sort order element') { %>\n    Added <%= formatNumber(number) %> <%= pluralise('column', number) %> to the sort order\n  <% } else if (label === 'column') { %>\n    Selected <%= formatNumber(number) %> <%= pluralise('column', number) %>\n  <% } else { %>\n    Added <%= formatNumber(number) %> <%= pluralise(label, number) %>\n  <% } %>\n<% } else if (verb === 'Removed') { %>\n  <% if (label === 'sort order element') { %>\n    Removed <%= formatNumber(number) %> <%= pluralise('column', number) %> from the sort order\n  <% } else if (label === 'column') { %>\n    Unselected <%= formatNumber(number) %> <%= pluralise('column', number) %>\n  <% } else { %>\n    Removed <%= formatNumber(number) %> <%= pluralise(label, number) %>\n  <% } %>\n<% } else if (verb === 'Changed') { %>\n  <% if (label === 'sort order element') { %>\n    Changed sort order\n  <% } else { %>\n    Changed <%= pluralise(label, 2) %>\n  <% } %>\n<% } else if (verb === 'Rearranged') { %>\n  Rearranged <%= pluralise(label, 2) %>\n<% } else { %>\n  !!!Cannot handle <%= verb %> <%= label %>!!!\n<% } %>",StepCount:'<%= formatNumber(count) %> <%= pluralise("row", count) %>',RevertToState:"Revert to this state",IsCurrentState:"This is the current state",ViewCount:'<%= n %> <%= pluralise("column", n) %> selected',ConstraintCount:"<% if (n) { %>\n  <%= n %> <%= pluralise('filter', n) %>\n<% } else { %>\n  No filters\n<% } %>",OrderElemCount:"<% if (n) { %>\n  Sorted on <%= n %> <%= pluralise('column', n) %>\n<% } else { %>\n  Not sorted\n<% } %>",ShowAllStates:"Show <%= n %> hidden <%= pluralise('state', n) %>",ToggleTrivial:'<%= hideTrivial ? "Hiding" : "Hide" %> minor steps',ToggleTrivialTitle:'<%= hideTrivial ? "Hiding" : "Hide" %> steps that did not change the row count',Revision:"no. <%= v %>",RevisionTitle:"revision <%= v %>",MoreSteps:'<%= more %> more <%= pluralise("step", more) %>'})}).call(this)},{"../messages":16}],30:[function(t,e,r){(function(){var i,n;i=t("jquery"),n=function(t){var e,n;return e=i("body").width(),n=t.width(),t.css({left:(e-n)/2,top:50})},r._showModal=function(){var t,e=this;return(t=this.$el).modal({show:!1}).addClass("im-floating").draggable({handle:".modal-header"}).show(function(){return n(t),t.animate({opacity:1},{complete:function(){return t.addClass("in")}})}),this.listenToOnce(this,"remove",function(){return e.$el.draggable("destroy")})},r._hideModal=function(){return this.$el.removeClass("in"),this.onHidden()}}).call(this)},{jquery:256}],31:[function(t,e,n){(function(){var f;f=t("underscore"),n.setChildIndices=function(e){var t,n,i,r,s,o,a,l,u,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"collection";for(r=this.children,t=this[h],u=f.compact(t.map(function(t){return r[e(t)]})),o=[],n=i=0,s=(a=f.sortBy(u,function(t){return t.el.getBoundingClientRect()[c]})).length;i<s;n=++i)l=a[n],o.push(l.model.set({index:n}));return o}}).call(this)},{underscore:262}],32:[function(t,e,n){(function(){var e;e=t("underscore"),n.initTypeaheads=function(){return null!=this._typeaheads?this._typeaheads:this._typeaheads=[]},n.removeTypeAheads=function(){var t,e;if(null!=this._typeaheads){for(t=[];e=this._typeaheads.shift();)e.off("typeahead:select"),e.off("typeahead:selected"),e.off("typeahead:autocompleted"),e.off("typeahead:close"),t.push(e.typeahead("destroy"));return t}},n.lastTypeahead=function(){var t;return e.last(null!=(t=this._typeaheads)?t:[])},n.activateTypeahead=function(t,e,n,i,r,s){return t.attr({placeholder:i}).typeahead(e,n),t.on("typeahead:selected",r),t.on("typeahead:select",r),t.on("typeahead:autocompleted",r),null!=s&&t.on("typeahead:close",s),this.initTypeaheads().push(t),t.focus(),this}}).call(this)},{underscore:262}],33:[function(t,e,i){(function(){var o,n;n=t("underscore"),o={},i.runQuery=function(){var t,e,n,i,r,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return i=this.getExportParameters(s),n="results:"+this.query.service.root+":"+JSON.stringify(i),t="query/results",(null!=(r=(e=this.model.get("format")).needs)?r.length:void 0)&&(t+="/"+e.id),null!=o[n]?o[n]:o[n]=this.query.service.post(t,i)},i.getEstimatedSize=function(){var t,e;return t="count:"+(e=this.getExportQuery()).service.root+":"+e.toXML(),null!=o[t]?o[t]:o[t]=e.count()},i.getExportQuery=function(){var t,e;return e=this.query.clone(),(null!=(t=this.model.get("columns"))?t.length:void 0)&&e.select(t),e},i.getExportURI=function(t){return this.getExportQuery().getExportURI(this.model.get("format").id,this.getExportParameters(t))},i.getFileName=function(){return this.getBaseName()+"."+this.getFileExtension()},i.getBaseName=function(){return this.model.get("filename")},i.getFileExtension=function(){return this.model.get("format").ext},i.getExportParameters=function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(t=this.model.pick("start","size","format","filename")).format=t.format.id,t.query=this.getExportQuery().toXML(),this.model.get("compress")&&(t.compress=this.model.get("compression")),this.model.get("headers")&&(t.columnheaders=this.model.get("headerType")),"json"===t.format&&"rows"!==this.model.get("jsonFormat")&&(t.format+=this.model.get("jsonFormat")),"fasta"===t.format&&this.model.get("fastaExtension")&&(t.extension=this.model.get("fastaExtension")),"fasta"!==t.format&&"gff3"!==t.format||(t.view=this.model.get("columns")),n.extend(t,e)}}).call(this)},{underscore:262}],34:[function(t,e,n){(function(){n.setPathNames=function(){var t,e,n,i,r,s,o,a,l,u;return e=null!=(n=this.query)?n:this.model.query,u=null!=(i=this.view)?i:this.model.view,s=e.service,l=u.getParent().getType(),t=u.end,r=this.state,a=(o=function(e){return function(t){return r.set(e,t)}})("error"),u.getDisplayName().then(o("pathName"),a),l.getDisplayName().then(o("typeName"),a),s.get("model/"+l.name+"/"+t.name).then(function(t){return t.name}).then(o("endName"),a)}}).call(this)},{}],35:[function(t,n,e){(function(){var e;t("underscore"),e=t("../core-model"),n.exports=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"defaults",value:function(){return{target:null,type:null}}}]),t}()}).call(this)},{"../core-model":2,underscore:262}],36:[function(t,o,e){(function(){var e,n,i,r,s;e=t("../core/collection"),n=t("./path"),i=function(r,s,o){var t,e,a,n=_slicedToArray(function(){var t,e,n,i;for(i=[],t=0,e=(n=[s,o]).length;t<e;t++)a=n[t],i.push(r(a));return i}(),2);return(t=n[0])<(e=n[1])?-1:e<t?1:0},s=function(t){return t.get("parts").length},r=function(t){return t.get("displayName")},o.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass2(n,[{key:"add",value:function(t){var e;if((e=_get(_getPrototypeOf(n.prototype),"add",this).call(this))&&null==e.collection)return e.collection=this}},{key:"initialize",value:function(){var t=this;return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.on("change:parts change:displayName",function(){return t.sort()})}},{key:"comparator",value:function(t,e){return i(s,t,e)||i(r,t,e)}}]),n}();return t.prototype.model=n,t}.call(this)}).call(this)},{"../core/collection":5,"./path":56}],37:[function(i,r,t){(function(){var t,u,c,e;e=i("underscore");var n=i("es6-promise");c=n.Promise,u=i("../options"),t=i("../core-model"),r.exports=function(){function l(){return _classCallCheck2(this,l),_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))}return _inherits(l,t),_createClass2(l,[{key:"defaults",value:function(){return{columnName:null,typeName:null,typeNames:[],entity:null,column:null,node:null,field:null,value:null}}},{key:"initialize",value:function(){var t,i,e,n,r,s,o=this;_get(_getPrototypeOf(l.prototype),"initialize",this).call(this),s=null!=(n=this.get("entity").get("classes"))?n:[this.get("node")];var a=t=this.get("column");return i=a.model,t.getDisplayName().then(function(t){return o.set({columnName:t})}),e=function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)r=s[t],n.push(i.makePath(r).getDisplayName());return n}(),c.all(e).then(function(t){return o.set({typeNames:t,typeName:t.join(u.get("DynamicObjects.NameDelimiter"))})})}},{key:"getPath",value:function(){return this.get("column")}},{key:"toJSON",value:function(){return e.extend(_get(_getPrototypeOf(l.prototype),"toJSON",this).call(this),{column:this.get("column").toString(),node:this.get("node").toString(),entity:this.get("entity").toJSON()})}}]),l}()}).call(this)},{"../core-model":2,"../options":63,"es6-promise":238,underscore:262}],38:[function(t,i,e){(function(){var e,n;n=t("../options"),e=t("../core-model"),i.exports=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"defaults",value:function(){return{lang:n.get("CodeGen.Default"),showBoilerPlate:!1,highlightSyntax:!0}}}]),t}()}).call(this)},{"../core-model":2,"../options":63}],39:[function(t,i,e){(function(){var e,o,n;e=t("../core/collection"),o=t("./header"),n=t("../utils/build-headers"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this,"change:index",this.sort)}},{key:"setHeaders",value:function(s,t){var e=this;return n(s,t).then(function(i){var r;return e.set(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(new o(r,s));return n}())})}}]),t}();return t.prototype.model=o,t.prototype.comparator="index",t}.call(this)}).call(this)},{"../core/collection":5,"../utils/build-headers":71,"./header":44}],40:[function(n,i,t){(function(){var o,a,l,t,u,c,r,s,h=[].indexOf;r=n("underscore");var e=n("imjs").Query;o=e.LIST_OPS,a=e.LOOP_OPS,c=e.TERNARY_OPS,u=e.RANGE_OPS,l=e.NULL_OPS,t=n("./path"),s=function(t){var e,n,i,r,s;if(t.path.isAttribute())return t.values?"MULTI_VALUE":"ATTR_VALUE";if(t.type)return"TYPE";if(t.ids)return"IDS";if(t.values&&(e=t.op,0<=h.call(u,e)))return"RANGE";if(n=t.op,0<=h.call(c,n))return"LOOKUP";if(i=t.op,0<=h.call(o,i))return"LIST";if(r=t.op,0<=h.call(a,r))return"LOOP";if(s=t.op,0<=h.call(l,s))return t.op;throw new Error("Cannot determine constraint type: "+t.path+" "+t.op)},i.exports=function(){function i(t){var e,n;return _classCallCheck2(this,i),e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t.path)),n=t.type,e.unset("id"),e.unset("type"),e.set(r.omit(t,"path","type")),null!=n&&(e.set({type:n.toString()}),n.getDisplayName().then(function(t){return e.set({typeName:t})})),e.set({CONSTRAINT_TYPE:s(t)}),e}return _inherits(i,t),_createClass2(i,[{key:"defaults",value:function(){return r.extend(_get(_getPrototypeOf(i.prototype),"defaults",this).call(this),{value:null,values:[],ids:[],extraValue:null,code:null,CONSTRAINT_TYPE:"ATTR_VALUE"})}}]),i}()}).call(this)},{"./path":56,imjs:247,underscore:262}],41:[function(e,r,t){(function(){var t,n,o,i,a;i=e("underscore"),n=e("../core-model"),t=e("../core/collection"),o=/,\s*/,a=function(t){return t.replace(/(^\s+|\s+$)/g,"")},r.exports=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,n),_createClass2(e,[{key:"defaults",value:function(){return{name:null,description:null}}},{key:"initialize",value:function(){var r,e=this;return this.tags=new t,this.has("tags")&&this.tags.reset(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.get("tags")).length;t<e;t++)r=n[t],i.push({id:r});return i}.call(this)),this.listenTo(this.tags,"remove",function(t){return e.trigger("remove:tag",t),e.trigger("change")}),this.listenTo(this.tags,"add",function(t){return e.trigger("add:tag",t),e.trigger("change")})}},{key:"toJSON",value:function(){return i.extend(_get(_getPrototypeOf(e.prototype),"toJSON",this).call(this),{tags:this.tags.map(function(t){return t.get("id")})})}},{key:"addTag",value:function(){var t,e,n,i,r,s;if(null==(s=this.get("nextTag")))throw new Error("No tag to add");for(this.unset("nextTag"),i=[],t=0,e=(n=a(s).split(o)).length;t<e;t++)r=n[t],i.push(this.tags.add({id:r}));return i}},{key:"destroy",value:function(){var t;return null!=(t=this.tags)&&t.close(),_get(_getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}()}).call(this)},{"../core-model":2,"../core/collection":5,underscore:262}],42:[function(t,e,n){(function(){var r,h,s;h=t("underscore"),s=[new(r=function(){function c(t){var e,n,i,r,s=t.id,o=t.group,a=t.icon,l=t.needs,u=t.maxColumns;_classCallCheck2(this,c),this.id=s,this.group=o,this.maxColumns=u,e=(i="tab"===this.id?"tsv":this.id).toUpperCase(),null==a&&(a=i),null==l&&(l=[]),n="export.format.description."+e,r="export.format.name."+e,h.extend(this,{icon:a,desc:n,name:r,needs:l,ext:i,EXT:e})}return _createClass2(c,[{key:"toString",value:function(){return this.ext}},{key:"toJSON",value:function(){return{id:this.id,group:this.group,icon:this.icon,needs:this.needs,ext:this.ext}}},{key:"isSuitable",value:function(e){return 0===this.needs.length||h.any(this.needs,function(t){return e[t]})}}]),c}())({id:"tab",group:"flat"}),new r({id:"csv",group:"flat"}),new r({id:"xml",group:"machine"}),new r({id:"json",group:"machine"}),new r({id:"fasta",group:"bio",icon:"dna",needs:["Protein","SequenceFeature"],maxColumns:1}),new r({id:"gff3",group:"bio",icon:"dna",needs:["SequenceFeature"]}),new r({id:"bed",group:"bio",icon:"dna",needs:["SequenceFeature"]}),new r({id:"fake",group:"fake",icon:"fake",needs:["Department"]}),new r({id:"fake_2",group:"fake",icon:"fake",needs:["Company"]})],n.getFormat=function(t){return h.findWhere(s,{id:t})},n.getFormats=function(t){var e,n,i,r;for(r=[],n=0,i=s.length;n<i;n++)(e=s[n]).isSuitable(t)&&r.push(e);return r},n.registerFormat=function(t){var e=t.id,n=t.icons,i=t.needs;return s.push(new r(e,n,i))}}).call(this)},{underscore:262}],43:[function(e,n,t){(function(){var t;t=e("../core-model"),n.exports=function(){function i(t,e){var n;return _classCallCheck2(this,i),(n=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this))).set({id:null,classes:[t.class],"service:base":"","service:url":"","report:uri":null}),n.set(e,t.value),n}return _inherits(i,t),i}()}).call(this)},{"../core-model":2}],44:[function(n,r,t){(function(){var t,e,o,s,i,a;o=n("underscore"),e=n("./path"),t=n("../options"),a=function(t){return null!=t?t.toUpperCase():void 0},s=o.compose(o.first,o.compact,o.map),i=function(t){return null!=t&&null!=t.isReference&&null!=t.isAttribute},r.exports=function(){function r(t,e){var n,i;if(_classCallCheck2(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,t.path))).query=e,!(null!=(i=n.query)?i.on:void 0))throw new Error("no query");if(null==t)throw new Error("no options");return n.set(o.omit(t,"path")),n.set({id:n.query.toXML()+"-"+n.get("path")}),n.listenTo(n.query,"change:joins",n.setOuterJoined),n.listenTo(n.query,"change:sortorder",n.setSortDirection),n.listenTo(n.query,"change:constraints",n.setConstraintNum),n._update_attrs(),n}return _inherits(r,e),_createClass2(r,[{key:"defaults",value:function(){return o.extend(_get(_getPrototypeOf(r.prototype),"defaults",this).call(this),{replaces:[],isFormatted:!1,isComposed:!1,sortable:!0,sortDirection:null,numOfCons:0,minimised:!1,outerJoined:!1,expanded:t.get("Subtables.Initially.Expanded")})}}]),_createClass2(r,[{key:"_update_attrs",value:function(){return this.setOuterJoined(),this.setSortDirection(),this.setConstraintNum()}},{key:"toJSON",value:function(){return o.extend(_get(_getPrototypeOf(r.prototype),"toJSON",this).call(this),{replaces:this.get("replaces").map(String)})}},{key:"getView",value:function(){var t,e,n,i=this.pick("replaces","isFormatted","path");return n=i.replaces,t=i.isFormatted,e=i.path,String(t&&1===n.length?n[0]:e)}},{key:"validate",value:function(t,e){var n;if("replaces"in t){if(n=t.replaces,!o.isArray(n))return new Error("replaces must be an array");if(n.length&&!o.all(n,i))return new Error("all elements in replaces must be PathInfo objects")}}},{key:"setOuterJoined",value:function(){var t,e,n,i,r;return r=this.getView(),n=this.get("replaces"),e=this.query.isOuterJoined(r),t=this.get("isFormatted")&&1<n.length,i=!e,this.set({outerJoined:e,isComposed:t,sortable:i})}},{key:"setSortDirection",value:function(){var t,e,n,i,r=this;return n=this.get("replaces"),i=this.getView(),e=function(t){return r.query.getSortDirection(t)},t=a(s(n.concat([i]),e)),this.set({sortDirection:t})}},{key:"setConstraintNum",value:function(){var r,t,s;return s=this.getView(),t=o.size(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.constraints).length;t<e;t++)(r=n[t]).path.match(s)&&i.push(r);return i}.call(this)),this.set({numOfCons:t})}}]),r}()}).call(this)},{"../options":63,"./path":56,underscore:262}],45:[function(t,i,e){(function(){var e,n,f;f=t("underscore"),e=t("../core/collection"),n=t("./step"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this,"remove",this.unwatch),this.listenTo(this,"add",this.watch)}},{key:"getCurrentQuery",value:function(){return this.currentQuery}},{key:"setCurrentQuery",value:function(t){return this.currentQuery=t.get("query").clone()}},{key:"unwatch",value:function(t){var e,n;if(null!=(e=null!=(n=null!=t?t.get("query"):void 0)?n:this.getCurrentQuery()))return this.stopListening(e)}},{key:"watch",value:function(t){var e;if(this.setCurrentQuery(t),null!=(e=this.getCurrentQuery()))return this.listenTo(e,"change:constraints",this.onChangeConstraints),this.listenTo(e,"change:views",this.onChangeViews),this.listenTo(e,"change:joins",this.onChangeJoins),this.listenTo(e,"change:sortorder",this.onChangeSortOrder),this.listenTo(e,"change:logic",this.onChangeLogic),this.listenTo(e,"undo",this.popState)}},{key:"onChangeConstraints",value:function(){return this.onChange("constraints","filter",function(t){return f.map(t,JSON.stringify)})}},{key:"onChangeViews",value:function(){return this.onChange("views","column")}},{key:"onChangeJoins",value:function(){return this.onChange("joins","join",function(t){return f.map(t,function(t,e){return e+":"+t})})}},{key:"onChangeSortOrder",value:function(){return this.onChange("sortOrder","sort order element",function(t){return f.map(t,JSON.stringify)})}},{key:"onChangeLogic",value:function(){return this.onChange("constraintLogic","constraint logic element",function(t){var e;return null!=(e=null!=t?t.match(/([A-Z]+)/):void 0)?e:[]})}},{key:"triggerChangedCurrent",value:function(){return this.trigger("changed:current",this.last())}},{key:"onChange",value:function(t,e,n){var i,r,s,o,a,l,u,c,h=2<arguments.length&&void 0!==n?n:function(t){return t};return o=this.currentQuery,s=this.last().get("query"),u=h(s[t]),c=h(o[t]),l=u.length,r=c.length,i=Math.abs(l-r),a=function(){switch(!1){case!(l<r):return"Added";case!(r<l):return"Removed";case r!==f.union(u,c).length:return"Rearranged";default:return"Changed"}}(),this.addStep(a,i,e,o)}},{key:"setInitialState",value:function(t){return this.size()&&this.reset(),this.addStep(null,null,"Initial",t)}},{key:"addStep",value:function(t,e,n,i){var r,s;return s=this.currentQuery,r=i.clone(),this.unwatch(),this.add({query:r,revision:this.currentStep++,title:{verb:t,number:e,label:n}}),null!=s&&s.trigger("replaced:by",r),this.triggerChangedCurrent()}},{key:"popState",value:function(){return this.revertToIndex(-2)}},{key:"revertToIndex",value:function(t){var e;return t<0&&(t=this.length+t),e=this.at(t),this.revertTo(e)}},{key:"revertTo",value:function(t){var e,n;if(!this.contains(t))throw new Error("State not in history");for(n=this.getCurrentQuery(),e=t.get("revision");this.last().get("revision")>e;)this.pop();return this.watch(t),null!=n&&n.trigger("replaced:by",t.get("query")),this.triggerChangedCurrent()}}]),t}();return t.prototype.model=n,t.prototype.currentQuery=null,t.prototype.currentStep=0,t.prototype.comparator="revision",t}.call(this)}).call(this)},{"../core/collection":5,"./step":59,underscore:262}],46:[function(e,i,t){(function(){var t,n;n=e("underscore"),t=e("../core-model"),i.exports=function(){function r(t,e,n){var i;return _classCallCheck2(this,r),(i=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,{classes:null!=e?e.map(String):void 0,id:n}))).set({"service:base":t}),i.freeze("service:base","id","classes"),i}return _inherits(r,t),_createClass2(r,[{key:"toJSON",value:function(){var t,e;return e=this.get("service:url"),t=/^http/.test(e)?e:this.get("service:base")+e,n.extend(_get(_getPrototypeOf(r.prototype),"toJSON",this).call(this),{"report:uri":t})}},{key:"merge",value:function(t,e){return this.set(e,t.value),this.set({"service:url":t.url})}}]),r}()}).call(this)},{"../core-model":2,underscore:262}],47:[function(i,r,t){(function(){var e,c,h,t,n;n=i("underscore"),e=i("../core/collection"),t=i("./path"),c=function(){function r(t){var e,n=t.path,i=t.style;return _classCallCheck2(this,r),e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,n)),null!=i&&e.set({style:i}),e}return _inherits(r,t),_createClass2(r,[{key:"defaults",value:function(){return n.extend(_get(_getPrototypeOf(r.prototype),"defaults",this).call(this),{style:"INNER"})}}]),r}(),r.exports=h=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this,"change:displayName",this.sort)}},{key:"getJoins",value:function(){return n.object(this.where({style:"OUTER"}).map(function(t){return[t.get("path"),t.get("style")]}))}}]),t}();return t.prototype.model=c,t.prototype.comparator="displayName",t}.call(this),h.fromQuery=function(t){var e,n,i,r,s,o,a,l,u;for(s in n=new h,a=t.joins)u=a[s],o=t.makePath(s),n.add(new c({style:u,path:o}));for(e=0,i=(l=t.getQueryNodes()).length;e<i;e++)for(r=l[e];!r.isRoot();)n.add(new c({path:r})),r=r.getParent();return n}}).call(this)},{"../core/collection":5,"./path":56,underscore:262}],48:[function(t,n,e){(function(){var e,r;r=t("underscore"),e=t("../core-model"),n.exports=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"defaults",value:function(){var t;return _defineProperty2(t={columnName:null,columnTypeName:null},"columnName",null),_defineProperty2(t,"typeName",null),_defineProperty2(t,"column",null),_defineProperty2(t,"node",null),_defineProperty2(t,"fieldName",null),_defineProperty2(t,"contentName",null),_defineProperty2(t,"view",[]),_defineProperty2(t,"rows",[]),t}},{key:"initialize",value:function(){return this.onChangeColumn(),this.listenTo(this,"change:column",this.onChangeColumn)}},{key:"onChangeColumn",value:function(){var e,t,n,i=this;return e=this.get("column"),t=this.get("node"),1===(n=this.get("view")).length&&(t=(e=e.model.makePath(n[0],e.subclasses)).isAttribute()?e.getParent():e),t.getType().getDisplayName().then(function(t){return i.set({columnTypeName:t})}),e.getDisplayName().then(function(t){return i.set({columnName:t}),e.isAttribute()&&i.set({fieldName:r.last(t.split(" > "))}),i.set({contentName:r.compact([i.get("columnTypeName"),i.get("fieldName")]).join(" ")})})}},{key:"getPath",value:function(){return this.get("column")}},{key:"toJSON",value:function(){return r.extend(_get(_getPrototypeOf(t.prototype),"toJSON",this).call(this),{column:this.get("column").toString(),node:this.get("node").toString(),rows:this.get("rows").map(function(t){return t.map(function(t){return t.toJSON()})})})}}]),t}()}).call(this)},{"../core-model":2,underscore:262}],49:[function(e,n,t){(function(){var t;t=e("../core-model"),n.exports=function(){function i(t,e){var n;return _classCallCheck2(this,i),(n=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this))).set({id:null,isNULL:!0,classes:[t],"service:base":"","service:url":"","report:uri":null}),e&&n.set(e,null),n}return _inherits(i,t),i}()}).call(this)},{"../core-model":2}],50:[function(t,n,e){(function(){var e,r;r=t("underscore"),e=t("backbone"),n.exports=function(){var t=function(){function i(){return _classCallCheck2(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,e.Model),_createClass2(i,[{key:"setLimits",value:function(t){return r.extend(this._defaults,t)}},{key:"get",value:function(t){var e;return null!=(e=_get(_getPrototypeOf(i.prototype),"get",this).call(this,t))?e:t in this._defaults?this._defaults[t]:null}},{key:"toJSON",value:function(){return r.extend({},this._defaults,this.attributes)}},{key:"nullify",value:function(){var t,e,n,i,r;for(this.unset("min"),this.unset("max"),this.nulled=!0,r=[],e=0,n=(i=["change:min","change:max","change"]).length;e<n;e++)t=i[e],r.push(this.trigger(t,this));return r}},{key:"reset",value:function(){return this.clear(),this.trigger("reset",this)}},{key:"set",value:function(t,e){var n;return this.nulled=!1,r.isString(t)&&t in this._defaults?(n="min"===t?"max":"min",_get(_getPrototypeOf(i.prototype),"set",this).call(this,t,Math[n](this._defaults[t],e))):_get(_getPrototypeOf(i.prototype),"set",this).apply(this,arguments)}},{key:"isAll",value:function(){return!this.isNotAll()}},{key:"isNotAll",value:function(){var t,e;if(this.nulled)return!1;var n=this.toJSON();return e=n.min,t=n.max,null!=e&&e!==this._defaults.min||null!=t&&t!==this._defaults.max}}]),i}();return t.prototype._defaults={},t}.call(this)}).call(this)},{backbone:235,underscore:262}],51:[function(t,n,e){(function(){var e;t("underscore"),e=t("./intermine-object"),n.exports=function(){function n(t,e){if(_classCallCheck2(this,n),this.schema=e,null==t)throw new Error("No root");if(null==this.schema)throw new Error("no schema");this.base=t.replace(/\/service\/?$/,""),this._objects={}}return _createClass2(n,[{key:"get",value:function(t,e){var n,i,r;return(i=null!=(n=this._objects)[r=t.id]?n[r]:n[r]=this._newObject(t)).merge(t,e),i}},{key:"_newObject",value:function(o){var a,t;return t=function(){var t,e,n,i,r,s;for(s=[],t=0,e=(r=null!=(n=null!=(i=o.class)?i.split(","):void 0)?n:[]).length;t<e;t++)a=r[t],s.push(this.schema.makePath(a));return s}.call(this),new e(this.base,t,o.id)}},{key:"destroy",value:function(){var t,e;for(t in e=this._objects)e[t].destroy();return delete this.selectedObjects,delete this._objects}}]),n}()}).call(this)},{"./intermine-object":46,underscore:262}],52:[function(e,n,t){(function(){var a,t,l;a=e("backbone"),t=e("./uniq-items"),l=function(t,e){if(!(null!=t?t.equals:void 0)||!(null!=e?e.isRoot:void 0))return!1;for(;!t.equals(e);){if(e.isRoot())return!1;e=e.getParent()}return!0},n.exports=function(){function o(){return _classCallCheck2(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t),_createClass2(o,[{key:"contains",value:function(e){return e instanceof a.Model?_get(_getPrototypeOf(o.prototype),"contains",this).call(this,e):this.any(function(t){return l(e,t.get("item"))})}},{key:"remove",value:function(e){var t,n,i,r,s;if(null==e)return!1;for(e instanceof a.Model&&_get(_getPrototypeOf(o.prototype),"remove",this).call(this,e),s=[],i=0,r=(t=this.filter(function(t){return l(e,t.get("item"))})).length;i<r;i++)n=t[i],s.push(_get(_getPrototypeOf(o.prototype),"remove",this).call(this,n));return s}}]),o}()}).call(this)},{"./uniq-items":62,backbone:235}],53:[function(e,n,t){(function(){var t;t=e("./path"),n.exports=function(){function r(t){var e,n=t.path,i=t.direction;return _classCallCheck2(this,r),null==i&&(i="ASC"),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,n))).set({direction:i}),e}return _inherits(r,t),_createClass2(r,[{key:"asOrderElement",value:function(){return this.pick("path","direction")}},{key:"toOrderString",value:function(){return this.get("path")+" "+this.get("direction")}}]),r}()}).call(this)},{"./path":56}],54:[function(t,e,n){(function(){e.exports=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(_classCallCheck2(this,n),this.start=t,this.size=e,!(null!=this.start&&0<=this.start))throw new Error("Start must be >= 0");if(null!=this.size&&this.size<0)throw new Error("Size must be null or Natural")}return _createClass2(n,[{key:"end",value:function(){return this.all()?null:this.start+this.size}},{key:"all",value:function(){return!this.size}},{key:"isBefore",value:function(t){return null!=this.size&&this.end()<t}},{key:"isAfter",value:function(t){return t<this.start}},{key:"leftGap",value:function(t){return this.isAfter(t)?this.start-t:null}},{key:"rightGap",value:function(t){return this.isBefore(t)?t-this.end():null}},{key:"next",value:function(){return new n(this.end(),this.size)}},{key:"prev",value:function(){return new n(Math.max(0,this.start-this.size),this.size)}},{key:"toString",value:function(){return"Page("+this.start+" .. "+this.end()+")"}}]),n}()}).call(this)},{}],55:[function(e,n,t){(function(){var i,t;t=e("./uniq-items"),i=e("backbone"),n.exports=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,t),_createClass2(n,[{key:"paths",value:function(){return this.map(function(t){return t.get("item")})}},{key:"contains",value:function(e){return this.any(function(t){return e.equals(t.get("item"))})}},{key:"toggle",value:function(t){return this.contains(t)?this.remove(t):this.add(t)}},{key:"remove",value:function(e){var t;return e instanceof i.Model?_get(_getPrototypeOf(n.prototype),"remove",this).call(this):null!=(t=this.find(function(t){return e.equals(t.get("item"))}))?_get(_getPrototypeOf(n.prototype),"remove",this).call(this,t):void 0}}]),n}()}).call(this)},{"./uniq-items":62,backbone:235}],56:[function(n,i,t){(function(){var o,t,a,l=[].indexOf;t=n("../core-model");var e=n("imjs").Model;a=e.NUMERIC_TYPES,o=e.BOOLEAN_TYPES,i.exports=function(){function n(t){var e;return _classCallCheck2(this,n),(e=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this))).set(e.pathAttributes(t)),e.setDisplayName(t),e.setTypeName(t),e.pathInfo=function(){return t},e.freeze("path","isNumeric","isBoolean","isReference","isAttribute"),e}return _inherits(n,t),_createClass2(n,[{key:"defaults",value:function(){return{path:null,type:null,displayName:null,typeName:null,parts:[],isNumeric:!1,isBoolean:!1,isReference:!1,isAttribute:!0}}}]),_createClass2(n,[{key:"setDisplayName",value:function(t){var e=this;return t.getDisplayName().then(function(t){return e.set({displayName:t,parts:t.split(" > ")}),e.freeze("displayName","parts")})}},{key:"setTypeName",value:function(t){var e=this;return(t.isAttribute()?t.getParent():t).getType().getDisplayName().then(function(t){return e.set({typeName:t})})}},{key:"pathAttributes",value:function(t){var e,n,i,r,s;return r=String(t),e={id:(n=t.isAttribute())?r:r+".id",path:r,type:null!=(i=(s=t.getType()).name)?i:s},n?(e.isNumeric=0<=l.call(a,s),e.isBoolean=0<=l.call(o,s)):(e.isReference=!0,e.isAttribute=!1),e}}]),n}()}).call(this)},{"../core-model":2,imjs:247}],57:[function(t,r,e){(function(){var e,n,i,s;s=t("underscore"),n=t("../core-model"),e=t("../core/collection"),i=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"defaults",value:function(){return{index:null,query:null,cells:[]}}},{key:"toJSON",value:function(){var r;return s.extend(_get(_getPrototypeOf(t.prototype),"toJSON",this).call(this),{cells:function(){var t,e,n,i;for(i=[],t=0,e=(n=this.get("cells")).length;t<e;t++)r=n[t],i.push(r.toJSON());return i}.call(this)})}}]),t}(),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.prototype.model=i,t.prototype.comparator="index",t}.call(this)}).call(this)},{"../core-model":2,"../core/collection":5,underscore:262}],58:[function(t,s,e){(function(){var e,i,n,r;i=t("../core-model"),e=t("../core/collection"),r=t("../core/type-assertions"),n=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,i),_createClass2(t,[{key:"defaults",value:function(){return{class:null,id:null}}},{key:"validate",value:function(t,e){return"class"in t&&null==t.class?'"class" must not be null':"id"in t&&null==t.id&&'"id" must not be null'}}]),t}(),s.exports=function(){var t=function(){function n(t){var e;return _classCallCheck2(this,n),e=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this)),r.assertMatch(r.Service,t,"service"),e.state=new i({node:null,commonType:null,typeName:null}),e.listenTo(e.state,"change:commonType",e.onChangeType),e.listenTo(e.state,"change:node",e.onChangeNode),e.listenTo(_assertThisInitialized(e),"add remove reset",e.setType),t.fetchModel().then(function(t){return e.schema=t,e.setType()}),e}return _inherits(n,e),_createClass2(n,[{key:"onChangeNode",value:function(){return this.trigger("change:node change",this.state.get("node"))}},{key:"onChangeType",value:function(){var t,e=this;if(null!=this.schema)return null==(t=this.state.get("commonType"))?this.state.set({typeName:null}):(this.schema.makePath(t).getDisplayName().then(function(t){return e.state.set({typeName:t}),e.trigger("change:typeName change")}),this.trigger("change:commonType change"))}},{key:"setType",value:function(){var t;if(null!=this.schema)return null!=(t=this.size()?t=this.schema.findCommonType(this.map(function(t){return t.get("class")})):null)?this.state.set({commonType:t}):this.state.set({commonType:null,typeName:null})}}]),n}();return t.prototype.model=n,t}.call(this)}).call(this)},{"../core-model":2,"../core/collection":5,"../core/type-assertions":10}],59:[function(t,r,e){(function(){var e,n,i;i=t("underscore"),e=t("../core-model"),n=t("../utils/count-executor"),r.exports=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"defaults",value:function(){return{count:0}}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.set({createdAt:new Date}),this.listenTo(this,"change:query",this._setCount),this._setCount()}},{key:"_setCount",value:function(){var t,e=this;return null!=(t=this.get("query"))?n.count(t).then(function(t){return e.set({count:t})}):this.set({count:0})}},{key:"toJSON",value:function(){return i.extend(_get(_getPrototypeOf(t.prototype),"toJSON",this).call(this),{query:this.get("query").toJSON()})}}]),t}()}).call(this)},{"../core-model":2,"../utils/count-executor":77,underscore:262}],60:[function(r,s,t){(function(){var e,n,a,l,i,u,m,c,h;m=r("underscore"),n=r("../core-model"),e=r("../core/collection"),a=r("../options");var t=r("../services/column-summary");c=t.getColumnSummary,h=function(t){return"int"===t||"Integer"===t||"long"===t||"Long"===t||"short"===t||"Short"===t},s.exports=function(){function o(t){var e,n,i,r=t.query,s=t.view;if(_classCallCheck2(this,o),(e=_possibleConstructorReturn(this,_getPrototypeOf(o).call(this))).query=r,e.view=s,null==e.query)throw new Error("No query in call to new SummaryModel");if(null==e.view)throw new Error("No view in call to new SummaryModel");return e.fetch=m.partial(c,e.query,e.view),i=e.view.getType(),n=h(i),e.set({limit:a.get("INITIAL_SUMMARY_ROWS"),canHaveMultipleValues:e.query.canHaveMultipleValues(e.view),type:i,integral:n}),e.histogram=new l,e.items=new u,e.listenTo(_assertThisInitialized(e),"change:filterTerm",e.onFilterChange),e.listenTo(_assertThisInitialized(e),"change:summaryLimit",e.onLimitChange),e.listenTo(e.query,"change:constraints",e.load),e.load(),e}return _inherits(o,n),_createClass2(o,[{key:"defaults",value:function(){return{error:null,maxCount:null,loading:!1,initialized:!1,canHaveMultipleValues:!1,numeric:!1,filterTerm:null}}}]),_createClass2(o,[{key:"destroy",value:function(){return this.histogram.close(),this.items.close(),_get(_getPrototypeOf(o.prototype),"destroy",this).call(this)}},{key:"getMaxCount",value:function(){return this.get("maxCount")}},{key:"hasMore",value:function(){return!this.get("numeric")&&this.get("got")<this.get("uniqueValues")}},{key:"hasAll",value:function(){return!this.hasMore()}},{key:"toJSON",value:function(){return m.extend(_get(_getPrototypeOf(o.prototype),"toJSON",this).call(this),{items:this.items.toJSON(),histogram:this.getHistogram()})}},{key:"onFilterChange",value:function(){return this.hasAll()?this.filterLocally():this.load()}},{key:"filterLocally",value:function(){var t,n,e;return null!=(t=this.get("filterTerm"))?(n=t.toLowerCase().split(/\s+/),e=function(e){return m.all(n,function(t){return!(!e||!~e.toLowerCase().indexOf(t))})},this.items.each(function(t){return t.show(e(t.get("item")))})):this.items.each(function(t){return t.show()})}},{key:"increaseLimit",value:function(t){var e;return e=(0<arguments.length&&void 0!==t?t:2)*this.get("limit"),this.set({limit:e})}},{key:"onLimitChange",value:function(){return this.load()}},{key:"setFilterTerm",value:function(t){return this.set({filterTerm:t})}},{key:"fetchAll",value:function(){return this.set({limit:null})}},{key:"load",value:function(){var e=this;return this.set({loading:!0}),this.fetch(this.get("filterTerm"),this.get("limit")).then(this.getSummaryHandler()).then(null,function(t){return e.set({error:t})})}},{key:"getSummaryHandler",value:function(){var e,n=this;return this.lastSummaryHandlerCreatedAt=e=m.now(),function(t){return n.handleSummary(e,t)}}},{key:"getHistogram",value:function(){var t,e,n,i,r,s,o;if(!(n=this.get("buckets")))return[];for(o=[],t=e=1,i=n;1<=i?e<=i:i<=e;t=1<=i?++e:--e)o.push(null!=(r=null!=(s=this.histogram.get(t))?s.get("count"):void 0)?r:0);return o}},{key:"handleSummary",value:function(t,e){var n,r,i,s,o,a,l,u,c,h,f,d,p=e.stats,g=e.results;if(t===this.lastSummaryHandlerCreatedAt)return h=null!=p.max,c={filteredCount:p.filteredCount,uniqueValues:p.uniqueValues,available:null!=(f=p.filteredCount)?f:p.uniqueValues,got:g.length,numeric:h,initialized:!0,loading:!1},h?(i=p.buckets,l=p.max,u=p.min,d=p.stdev,n=p.average,m.extend(c,{buckets:i,max:l,min:u,stdev:parseFloat(d),average:parseFloat(n)}),this.items.size()&&this.items.reset(),this.histogram.set(function(){var t,e,n;for(n=[],t=0,e=g.length;t<e;t++){var i=g[t];r=i.bucket,s=i.count,n.push({item:r,count:s,id:r})}return n}()),c.maxCount=this.histogram.getMaxCount()):(this.histogram.size()&&this.histogram.reset(),this.items.set(function(){var t,e,n;for(n=[],o=t=0,e=g.length;t<e;o=++t){var i=g[o];a=i.item,s=i.count,n.push({item:a,count:s,id:o})}return n}()),c.maxCount=this.items.getMaxCount()),this.set(c)}}]),o}(),i=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"defaults",value:function(){return{symbol:null,share:null,visible:!0,selected:!1,hover:!1,count:0,item:null}}},{key:"select",value:function(){return this.set({selected:!1})}},{key:"deselect",value:function(){return this.set({selected:!1})}},{key:"hide",value:function(){return this.set({visible:!1})}},{key:"show",value:function(t){var e=!(0<arguments.length&&void 0!==t)||t;return this.set({visible:e})}},{key:"mousein",value:function(){return this.set({hover:!0})}},{key:"mouseout",value:function(){return this.set({hover:!1})}}]),t}(),u=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"getMaxCount",value:function(){var t;return null!=(t=this.first())?t.get("count"):void 0}}]),t}();return t.prototype.model=i,t}.call(this),l=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"getMaxCount",value:function(){var r;return m.max(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.models).length;t<e;t++)r=n[t],i.push(r.get("count"));return i}.call(this))}}]),t}();return t.prototype.model=i,t}.call(this)}).call(this)},{"../core-model":2,"../core/collection":5,"../options":63,"../services/column-summary":65,underscore:262}],61:[function(e,r,t){(function(){var t,n,i;n=e("../options"),t=e("../core-model"),i=e("./path-set"),r.exports=function(){function e(){var t;return _classCallCheck2(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).filled=t.filled.bind(_assertThisInitialized(t)),t}return _inherits(e,t),_createClass2(e,[{key:"defaults",value:function(){return{phase:"FETCHING",start:0,size:n.get("DefaultPageSize"),count:null,fill:0,error:null,selecting:!1,previewOwner:null,highlitNode:null,minimisedColumns:new i}}},{key:"initialize",value:function(){var t;return t=this.get("minimisedColumns"),this.listenTo(t,"add remove reset",function(){return this.trigger("change:minimisedColumns change")}),this.freeze("minimisedColumns")}},{key:"filled",value:function(){return function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,e),this.swap("fill",function(t){return t+1})}},{key:"toJSON",value:function(){var t;return(t=_get(_getPrototypeOf(e.prototype),"toJSON",this).call(this)).minimisedColumns=this.get("minimisedColumns").toJSON().map(String),t}},{key:"destroy",value:function(){return this.get("minimisedColumns").close(),_get(_getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}()}).call(this)},{"../core-model":2,"../options":63,"./path-set":55}],62:[function(t,r,e){(function(){var e,n,i,a,l;e=t("backbone"),l=t("underscore"),i=t("../core-model"),n=t("../core/collection"),a=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,i),_createClass2(t,[{key:"initialize",value:function(t,e){return null!=e&&this.set(e),this.set({item:t,id:String(t)})}}]),t}(),r.exports=function(){var t=function(){function o(){return _classCallCheck2(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,n),_createClass2(o,[{key:"toJSON",value:function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.models).length;t<e;t++)n=i[t],r.push(n.get("item"));return r}},{key:"togglePresence",value:function(t){return this.contains(t)?this.remove(t):this.add(t)}},{key:"get",value:function(t){return _get(_getPrototypeOf(o.prototype),"get",this).call(this,t instanceof e.Model?t:String(t))}},{key:"contains",value:function(t){return t instanceof a?_get(_getPrototypeOf(o.prototype),"contains",this).call(this,t):null!=this.findWhere({item:t})}},{key:"add",value:function(t,e){var n,i,r,s;for(s=[],n=0,r=(t=l(t).isArray()?t:[t]).length;n<r;n++)null!=(i=t[n])&&""!==i&&(this.contains(i)?s.push(void 0):s.push(_get(_getPrototypeOf(o.prototype),"add",this).call(this,new a(i,e))));return s}},{key:"remove",value:function(t,e){var n,i,r,s;for(s=[],n=0,r=(t=l(t).isArray()?t:[t]).length;n<r;n++)(i=t[n])instanceof a?s.push(_get(_getPrototypeOf(o.prototype),"remove",this).call(this,i,e)):s.push(_get(_getPrototypeOf(o.prototype),"remove",this).call(this,this.findWhere({item:i}),e));return s}}]),o}();return t.prototype.model=a,t}.call(this)}).call(this)},{"../core-model":2,"../core/collection":5,backbone:235,underscore:262}],63:[function(n,i,t){(function(){var e,t;e=n("./core/nested-model"),t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"defaults",value:function(){return{INITIAL_SUMMARY_ROWS:1e3,NUM_SEPARATOR:",",NUM_CHUNK_SIZE:3,MAX_PIE_SLICES:15,DropdownMax:20,DefaultPageSize:25,DynamicObjects:{NameDelimiter:" / "},CodeGen:{Default:"py",Langs:["py","pl","java","rb","js","xml"],Extra:{js:"codegen.AsHTML"}},ListFreshness:250,MaxSuggestions:1e3,ListCategorisers:["organism.name","department.company.name"],PieColors:"category10",TableResults:{CacheFactor:10,RequestLimit:5e3},TableHeader:{FullPathPopoverEnabled:!0},TableCell:{AddDataClasses:!0,PreviewTrigger:"hover",HoverDelay:200,IndicateOffHostLinks:!0,ExternalLinkIcons:{"http://some.host.somewhere":"http://some.host.somewhere/logo.png"}},ItemDetails:{ShowReferenceCounts:!1,Fields:{},Count:{}},StylePrefix:"imtables",SuggestionDepth:2,Events:{ActivateTab:"mouseenter"},Subtables:{Initially:{expanded:!1}},Facets:{DrawAverageLine:!0,Initially:{Open:!0}},Destinations:["download","Galaxy","GenomeSpace","Drive","Dropbox"],Destination:{download:{Enabled:!0},Galaxy:{Main:"http://main.g2.bx.psu.edu",Current:null,Tool:"flymine",Save:!1,Enabled:!0},GenomeSpace:{Upload:"https://gsui.genomespace.org/jsui/upload/loadUrlToGenomespace.html",Enabled:!0},Drive:{Library:"https://apis.google.com/js/client.js",Enabled:!1},Dropbox:{Library:"https://www.dropbox.com/static/api/2/dropins.js",Enabled:!1}},ShowId:!1,TableWidgets:{Pagination:{enabled:!0,index:0},PageSizer:{enabled:!0,index:1},TableSummary:{enabled:!0,index:2}},CellCutoff:100,ShowHistory:!0,icons:"fontawesome",D3:{Transition:{Easing:"exp",Duration:500,DurationShort:200}},brand:{"http://www_flymine_org/query/service/":{name:"FlyMine"},"http://preview_flymine_org/preview/service/":{name:"FlyMine-Preview"},"http://www_mousemine_org/mousemine/service/":{name:"MouseMine (MGI)"}},Formatters:{testmodel:{},genomic:{}},ColumnManager:{SelectColumn:{Multi:!0}},UndoHistory:{ShowAllStatesCutOff:6}}}}]),t}(),i.exports=new t,i.exports.Options=t}).call(this)},{"./core/nested-model":8}],64:[function(t,e,n){(function(){n.IS_BLANK=/^\s*$/}).call(this)},{}],65:[function(t,e,n){(function(){var s,o;s={},o=function(t,e){return t.service.root+":"+t.service.token+":"+t.toXML()+":"+e},n.getColumnSummary=function(t,e,n,i){var r;return null!=s[r=o(t,e)]?s[r]:s[r]=t.filterSummary(e,n,i)}}).call(this)},{}],66:[function(r,t,e){(function(i){(function(){var t,e,n;n=i.jQuery,e=t=r("jquery"),r("backbone").$=e,i.jQuery=t,r("bootstrap"),r("typeahead.js"),r("jquery-ui-bundle"),null!=n?i.jQuery=n:delete i.jQuery}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{backbone:235,bootstrap:236,jquery:256,"jquery-ui-bundle":255,"typeahead.js":261}],67:[function(t,e,n){var i=t("underscore"),r=n;function s(t){if(!t)throw new Error("Name is required.");if(t=t.replace(/-/g,"_"),templ=r[t],templ)return templ;throw new Error('No template registered as "'+t+'"')}n.template=function(t,e){return i.template(s(t),e)},n.templateFromParts=function(t,e){var n=t.map(s).join("\n");return i.template(n,e)},r.clear='<div style="clear:both"></div>',n.no_results="<% /* requires: selectList :: [], canUndo :: bool */ %>\n<td colspan=\"<%- selectList.length %>\">\n  <div class=\"alert alert-warning\">\n    <% if (canUndo) { %>\n      <button class=\"pull-right btn btn-large btn-default btn-undo\">\n        <%= Icons.icon('Undo') %>\n        <%- Messages.getText('Undo') %>\n      </button>\n    <% } %>\n    <strong><%- Messages.getText('table.Empty') %></strong>\n    <p><%- Messages.getText('table.EmptyWhy') %></p>\n  </div>\n</td>\n",n.code_gen_js='<% if (asHTML) { %>\n\x3c!-- The Element we will target --\x3e\n<div id="some-elem"></div>\n\x3c!-- The imtables source --\x3e\n<script src="<%= imtablesJS %>" charset="UTF-8"><\/script>\n<link rel="stylesheet" href="<%= imtablesCSS %>">\n<script>\n<% } %>\n<% if (!asHTML) { %>\n/* Install from npm: npm install imtables\n * This snippet assumes the presence on the page of an element like:\n * <div id="some-elem"></div>\n */\nvar imtables = require(\'imtables\');\n<% } %>\n\nvar selector = \'#some-elem\';\nvar service  = {root: \'<%= service.root %>\'};\nvar query    = <%= JSON.stringify(query, null, 2) %>;\n\nimtables.loadTable(\n  selector, // Can also be an element, or a jQuery object.\n  <%= JSON.stringify(page) %>, // May be null\n  {service: service, query: query} // May be an imjs.Query\n).then(\n  function (table) { console.log(\'Table loaded\', table); },\n  function (error) { console.error(\'Could not load table\', error); }\n);\n<% if (asHTML) { %>\n<\/script>\n<% } %>\n',n.table_subtable_summary="<% if (rows.length) { %>\n  <%= Icons.icon('Table') %>\n<% } else { %>\n  <%= Icons.icon('EmptyTable') %>\n<% } %>\n<%- rows.length %>\n<%- pluralise(contentName, rows.length) %>\n",n.column_manager_path_chooser_buttons="<button class=\"btn btn-default im-rearrange-columns\">\n  <%- Messages.getText('Cancel') %>\n</button>\n<button class=\"btn btn-success im-add-column\"\n  <%= collection.length ? (void 0) : 'disabled' %> >\n  <%- Messages.getText('columns.AddColumn', {num: collection.length}) %>\n</button>\n\n",n.too_many_suggestions="<span class=\"alert alert-info\">\n  {{{ icons.icon('Info') }}}\n  {{ messages.getText('conbuilder.TooManySuggestions') }}\n  There are {{ extra }} values we could not include.\n</span>\n",n.export_destination_radios='<label><%- Messages.getText(\'export.param.Destination\') %></label>\n<% _.each(destinations, function (d) { %>\n    <div class="radio im-dest-<%- d %>">\n        <label>\n            <input type="radio"\n                    name="dest"\n                    <%= (d === dest) ? \'checked\' : void 0 %>>\n            <%- Messages.getText(d) %>\n        </label>\n    </div>\n<% }); %>\n\n',n.active_constraint='<div class="im-con-overview">\n  <% if (data.con.editable != null && data.con.editable === false) { %>\n    <a title="<%- data.messages.getText(\'conbuilder.NotEditable\') %>">\n        <%= data.icons.icon(\'Lock\') %>\n    </a>\n  <% } else { %>\n    <a class="im-remove-constraint"\n        title="<%- data.messages.getText(\'conbuilder.Remove\') %>"\n        >\n        <%= data.icons.icon(\'RemoveConstraint\') %>\n    </a>\n    <a class="im-edit" title="<%- data.messages.getText(\'conbuilder.EditCon\') %>">\n        <%= data.icons.icon(\'Edit\') %>\n    </a>\n  <% } %>\n</div>\n\n<% /* We use the :empty selector on this element - hence it must be on one line */ %>\n<div class="im-constraint-editor"></div>\n',n.export_json_options="<h3><%- Messages.getText('export.category.Options') %></h3>\n\n<div class=\"radio\">\n    <label>\n        <input type=\"radio\"\n               name=\"rows\"\n               <%= (jsonFormat === 'rows') ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.json.Rows') %>\n        <pre><%- Messages.getText('export.json.RowsExample') %></pre>\n    </label>\n</div>\n\n<div class=\"radio\">\n    <label>\n        <input type=\"radio\"\n               name=\"objects\"\n               <%= (jsonFormat === 'objects') ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.json.Objects') %>\n        <pre><%- Messages.getText('export.json.ObjExample') %></pre>\n    </label>\n</div>\n\n<% if ((size || start) && jsonFormat === 'objects') { %>\n    <div class=\"alert alert-warning\">\n        <h4><%- Messages.get('Warning') %></h4>\n        <p><%- Messages.get('export.json.ObjWarning') %></p>\n    </div>\n<% } %>\n\n",n.progress_bar='<% /* requires: doneness (float: 0 <= i <= 1) */ %>\n<% if (doneness != null && doneness >= 0) { %>\n    <div class="progress">\n        <div class="progress-bar progress-bar-striped active"\n             role="progressbar"\n             aria-valuenow="<%- doneness %>"\n             aria-valuemin="0"\n             aria-valuemax="1"\n             style="width: <%- 100 * doneness %>%;">\n            <% if (doneness < 1) { %>\n              <span class="sr-only">\n                <%- Math.round(100 * doneness) %>% <%- Messages.getText(\'Complete\') %>\n              </span>\n            <% } %>\n        </div>\n    </div>\n<% } %>\n',n.export_row_controls='<h4 class="im-title"></h4>\n\n<div class="form-group">\n    <label class="size-label"></label>\n    <input name="size"\n           step="1"\n           type="range"\n           min="1"\n           max="<%= max %>"\n           value="<%= size || max %>">\n</div>\n\n<div class="form-group">\n    <label class="start-label"></label>\n    <input name="start"\n           step="1"\n           type="range"\n           min="0"\n           max="<%= max - 1 %>"\n           value="<%= start %>">\n</div>\n\n<div class="form-group im-reset">\n</div>\n',n.count_summary="<% if (size && count) { %>\n  <% var msg = (size == 0 ? '.ShowingAll' : '.ShowingRange'); %>\n  <% ['xs', 'sm', 'md', 'lg'].forEach(function (pageSize) { %>\n    <span class=\"visible-<%= pageSize %>-inline\">\n      <%- Messages.getText('table.' + pageSize + msg, page) %>\n    </span>\n  <% }); %>\n<% } %>\n",n.active_progress_bar='<div class="progress progress-info progress-striped active">\n  <div class="bar" style="width: 100%"></div>\n</div>\n',n.type_value_controls="<label class=\"span4\">\n    <%- messages.getText('conbuilder.IsA') %>\n</label>\n<% if (subclasses.length == 1) { %>\n  <select disabled class=\"form-control\">\n      <option><%- subclasses[0].text %></option>\n  </select>\n<% } else { %>\n  <%= select(subclasses, isSelected, 'form-control im-value-type') %>\n<% } %>\n  \n",n.list_dialogue_button_node='<a href="#">\n    <strong>\n        <%- displayName || path %>\n    </strong>\n    <% if (state.count) { %>\n        (<%- numToString(state.count) %>\n        <%- pluralise((typeName || type), state.count) %>)\n    <% } %>\n</a>\n',n.only_one_item="<div class=\"alert alert-info\">\n    <%= Icons.icon('Info') %>\n    <%= Messages.getText('summary.OnlyOne', {names: state, item: items[0]}) %>\n</div>\n\n",n.export_rows_reset_button="<button type=\"button\"\n        <%= (isAll) ? 'disabled' : void 0 %>\n        class=\"btn btn-default btn-reset\">\n        <%- Messages.getText('export.ResetRowSelection') %>\n</button>\n\n<% if (tablePage) { %>\n    <button type=\"button\"\n            <%= (tablePage.start === start && tablePage.size === size) ? 'disabled' : void 0 %>\n            class=\"btn btn-default im-set-table-page\">\n            <%- Messages.getText('export.SetTablePage') %>\n    </button>\n<% } %>\n        \n",n.download_popover='<% /* requires: formats, query, path */ %>\n<ul role="menu" class="im-export-summary">\n    <% _.each(formats, function (icon, param) { %>\n      <li role="presentation">\n        <a role="menuitem"\n            href="<%= query.getExportURI(param) %>&summaryPath=<%= path %>">\n            <%= Icons.icon(icon) %>\n            <%- icon.toUpperCase() %>\n        </a>\n      </li>\n    <% }); %>\n</ul>\n',n.logic_manager_body='<div class="form-group">\n  <label class="form-label">\n    <%- Messages.getText(\'logic.LogicLabel\') %>\n    <input type="text"\n          class="im-logic form-control"\n          placeholder="<%- state.defaultLogic %>"\n          value="<%- logic %>">\n  </label>\n</div>\n<div class="form-group">\n  <button class="pull-right btn btn-primary <%- (state.disabled) ? \'disabled\' : null %>"\n          type="submit">\n    <%- Messages.getText(\'logic.ApplyLogic\') %>\n  </button>\n</div>\n',n.new_filter_dialogue='<div class="modal-body">\n</div>\n<div class="modal-footer">\n    <button class="disabled btn btn-primary pull-right im-add-constraint">\n        <%- Messages.getText(\'constraints.AddFilter\') %>\n    </button>\n    <button class="btn im-close pull-left">\n        <%- Messages.getText(\'Cancel\') %>\n        Cancel\n    </button>\n</div>\n',n.input_with_button='<input type="text" class="form-control"\n       value="<%- value %>"\n       placeholder="<%- Messages.getText(placeholder) %>">\n<span class="input-group-btn">\n  <button class="btn btn-default" type="button">\n    <%- Messages.getText(button) %>\n  </button>\n</span>\n\n',n.modal_error='<% /* Renders an alert box at various levels, with appropriate icons and messages */ %>\n<% if (error) { %>\n    <div class="pull-left alert <%- errorAlert(error) %>">\n        <% if (!error.cannotDismiss) { %>\n            <button type="button" class="dismiss">\n                <span aria-hidden="true">&times;</span>\n                <span class="sr-only">Close</span>\n            </button>\n        <% } %>\n        <%= Icons.icon(errorIcon(error)) %>\n        <strong><%- Messages.getText(\'ErrorTitle\', error) %></strong>\n        <% if (error.key != null) { %>\n            <%- Messages.getText(error.key) %>\n        <% } else { %>\n            <%- error.message || error %>\n        <% } %>\n    </div>\n<% } %>\n',n.facet_item='<dd>\n    <a href=#>\n        <b class="im-facet-count pull-right">\n            (<%- count %>)\n        </b>\n        <%- item %>\n    </a>\n</dd>\n',n.table_cell='<% if (state.minimised) { %>\n  &hellip;\n<% } else if (entity.id == null) { %>\n  <% if (value != null && formattedValue != null) { %>\n    <span class="im-displayed-value"><%= value %></span>\n  <% } else if (entity.isNULL) { %>\n    <span class="im-null-entity">\n      <%- Messages.getText(\'table.cell.NullEntity\', {type: entity[\'class\']}) %>\n    </span>\n  <% } else { %>\n    <%= NULL_VALUE %>\n  <% } %>\n<% } else { %>\n  <input\n    class="im-list-chooser"\n    type="checkbox"\n    <% if (input.checked) { %>checked<% } %>\n    <% if (input.disabled) { %>disabled<% } %>\n    style="display:<%- input.display %>">\n\n  <a class="im-cell-link" target="<%- target %>" href="<%= url %>">\n\n    <% if (isForeign) { %>\n      <% if (icon) { %>\n        <img src="<%= icon %>" class="im-external-link"></img>\n      <% } else { %>\n        <%= Icons.icon(\'ExternalLink\') %>\n      <% } %>\n    <% } %>\n\n    <% if (value != null && formattedValue != null) { %>\n      <span class="im-displayed-value"><%= formattedValue %></span>\n    <% } else { %>\n      <%= NULL_VALUE %>\n    <% } %>\n\n  </a>\n\n  <% if (value != null && field === \'url\' && rawValue != url) { %>\n    <a class="im-cell-link external" href="<%= rawValue %>">\n      <%= Icons.icon(\'ExternalLink\') %>\n      <%- Messages.getText(\'table.cell.Link\') %>\n    </a>\n  <% } %>\n<% } %>\n',n.column_manager_path_remover='<% /* requires: removeTitle */ %>\n<span class="pull-right im-remove-view"\n      title="<%- Messages.getText(removeTitle) %>">\n    <%= Icons.icon(\'Remove\') %>\n</span>\n\n',n.export_column_control="<span class=\"badge\"><%- item.getType() %></span>\n<span class=\"im-active-state\">\n    <% if (active) { %>\n        <%= Icons.icon('Check') %>\n    <% } else { %>\n        <%= Icons.icon('UnCheck') %>\n    <% } %>\n</span>\n<%- name %>\n",n.undo_history='<button class="btn btn-default im-undo">\n  <%= Icons.icon(\'Undo\') %>\n  <span class="visible-lg-inline">\n    <%- Messages.getText(\'Undo\') %>\n  </span>\n</button>\n\n<button class="btn btn-default dropdown-toggle"\n        data-toggle="dropdown">\n  <span class="caret"></span>\n</button>\n\n<ul class="dropdown-menu im-state-list">\n    <li>\n      <button\n          title="<%- Messages.getText(\'undo.ToggleTrivialTitle\', state) %>"\n          class="btn btn-xs btn-default im-toggle-trivial <%= state.hideTrivial ? \'active\' : void 0 %>">\n        <%- Messages.getText(\'undo.ToggleTrivial\', state) %>\n      </button>\n    </li>\n</ul>\n',n.error_message="<% if (error) { %>\n    <div class=\"alert alert-<%= error.level || 'danger' %>\">\n        <%= icons.icon('Error') %>\n        <span class=\"im-conbuilder-error\">\n            <%- error.message || error %>\n        </span>\n    </div>\n<% } %>\n\n",n.boolean_value_controls="<button class=\"btn btn-default im-true {{ (value === true) ? ' active' : void 0 }}\">\n  True\n</button>\n<button class=\"btn btn-default im-false {{ (value === false) ? ' active' : void 0 }}\">\n  False\n</button>\n",n.facet_title="<%= Icons.icon(state.open ? 'Expanded' : 'Collapsed') %>\n<span class=\"im-facet-title\"><%- pathName %></span>\n&nbsp;\n<span class=\"im-facet-count\"><%- Messages.getText('Number', {n: got} %></span>\n",n.join_manager_body="<ul class=\"list-group\"></ul>\n\n<div class=\"alert alert-info\">\n  <%= Icons.icon('Info') %>\n  <strong class=\"im-clickable\">\n    <%- Messages.getText('joins.ExplanationTitle') %>\n  </strong>\n  <p class=\"<%= (!state.explaining) ? 'im-latent' : void 0 %>\">\n    <%- Messages.getText('joins.Explanation') %>\n  </p>\n</div>\n",n.summary_no_results="<div class=\"alert alert-warning\">\n    <%= Icons.icon('Warning') %>\n    <%- Messages.getText('summary.NoResults', {path: pathName}) %>\n</div>\n\n",n.add_value_control='<div class="im-table-height-wrapper">\n    <table class="table table-condensed"></table>\n</div>\n<div class="input-group">\n    <input type="text" class="im-new-multi-value form-control">\n    <span class="input-group-btn">\n        <button class="btn btn-primary im-add" type="button">\n            <span class="im-long"><%- messages.getText(\'multivalue.AddValue\') %></span>\n            <span class="im-short"><%- messages.getText(\'multivalue.AddValueShort\') %></span>\n        </button>\n    </span>\n</div>\n',n.table_throbber='<tr class="im-table-throbber">\n  <td colspan="<%= colcount %>">\n    <h2><%- Messages.getText(\'table.RequestingData\') %></h2>\n    <div class="progress progress-info progress-striped active">\n      <div class="bar" style="width: 100%"></div>\n    </div>\n  </td>\n</tr>\n',n.cell_preview_reference="<tr>\n    <td class=\"im-field-name\"><%- _.rest(parts).join(' ') %></td>\n    <td class=\"im-field-value <%- field.toLowerCase() %>\">\n        <%- values.join(', ') %>\n    </td>\n</tr>\n",n.code_gen_button_main="<%= Icons.icon('CodeFile') %>\n<span class=\"hidden-sm hidden-xs\">\n  <%- Messages.getText('codegen.GenerateCodeIn', {lang: lang}) %>\n</span>\n<span class=\"visible-sm-inline im-current-lang\">\n    <%- Messages.getText('codegen.Lang', {lang: lang}) %>\n</span>\n\n",n.export_compression_controls="<h4><%- Messages.getText('export.category.Compression', state) %></h4>\n\n<div class=\"checkbox im-compress\">\n    <label>\n        <input type=\"checkbox\" <%= compress ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.UseCompression') %>\n    </label>\n</div>\n\n<fieldset <%= compress ? void 0 : 'disabled' %>>\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"gzip\"\n                <%= (compression === 'gzip') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.UseGZIP') %>\n        </label>\n    </div>\n\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"zip\"\n                <%= (compression === 'zip') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.UseZIP') %>\n        </label>\n    </div>\n</fieldset>\n\n",n.export_fasta_options='<h3><%- Messages.getText(\'export.category.Options\') %></h3>\n\n<div class="form-group">\n    <label><%- Messages.getText(\'FastaExtension\') %></label>\n    <input type="text"\n           value="<%- fastaExtension %>"\n           placeholder="5kbp"\n           class="form-control im-fasta-ext">\n</div>\n',n.facet_row='<% /* requires: selected, symbol, item, count, percent, opacity, share */ %>\n<td class="im-selector-col">\n  <span><%- symbol %></span>\n  <div class="checkbox"></div>\n</td>\n\n<td class="im-item-col">\n  <% if (item != null) { %>\n    <%- item %>\n  <% } else { %>\n    <span class=null-value>&nbsp;</span>\n  <% } %>\n</td>\n\n<td class="im-count-col">\n  <% if (max > 1) { %>\n    <div class="im-facet-bar"\n         style="width:<%- percent %>%;background:<%- Messages.getText(\'summary.FacetBar\', {opacity: opacity}) %>">\n    </div>\n  <% } %>\n  <span class="im-count"><%- numToString(count) %></span>\n</td>\n\n<% if (share != null) { %>\n    <td class="im-percent-col"><i><%- share.toFixed() %>%</i></td>\n<% } %>\n',n.list_tags_apology="<% if (!hasTags) { %>\n  <span>\n    <%- Messages.getText('lists.NoTags') %>\n  </span>\n<% } %>\n",n.slider='<div class="im-slider">\n    <% _.each(markers, function(marker) { %>\n        <span class="im-slider-marker"><%- marker.value %></span>\n    <% }); %>\n</div>\n',n.classy_popover='<div class="popover <%- classes %>" role="tooltip">\n  <div class="arrow"></div>\n  <h3 class="popover-title"></h3>\n  <div class="popover-content"></div>\n</div>\n',n.column_manager_order_direction="<% /* requires: direction, isNumeric */ %>\n<span class=\"im-change-direction\"\n  title=\"<%- Messages.getText('columns.ChangeDirection') %>\">\n  <span class=\"sr-only\">\n    <%- Messages.getText('columns.CurrentDirection', {\n      dir: direction, numeric: isNumeric\n    }) %>\n  </span>\n  <%= Icons.icon('Sort' + (isNumeric ? 'Numeric' : 'String') + direction) %>\n</span>\n",n.export_destination_options='<div class="form-group im-param-name">\n    <label><%- Messages.getText(\'export.param.Name\') %></label>\n    <div class="input-group">\n      <input type="text"\n             value="<%- filename %>"\n             class="form-control"\n             placeholder="<%- Messages.getText(\'export.param.Name\') %>"\n             aria-label="<%- Messages.getText(\'export.param.Name\') %>">\n      <div class="input-group-btn">\n        <button type="button"\n                class="btn btn-default dropdown-toggle"\n                data-toggle="dropdown"\n                aria-expanded="false">\n          .<%- format %>\n          <span class="caret"></span>\n        </button>\n        <ul class="dropdown-menu dropdown-menu-right" role="menu">\n          <% _.chain(formats).groupBy(\'group\').each(function (fmts, grp) { %>\n            <% if (this.i++) { %><li class="divider"></li><% } %>\n            <% _.each(fmts, function (fmt) { %>\n                <li>\n                    <a href="#"\n                       class="im-fmt-<%- fmt.id %>">\n                      <%= Icons.icon(fmt.icon) %>\n                      <%- Messages.getText(fmt.name) %>\n                    </a>\n                </li>\n            <% }); %>\n          <% }, {i: 0}); %>\n        </ul>\n      </div>\n    </div>\n</div>\n\n<% if (format && format.desc) { %>\n  <div class="alert alert-info">\n    <%- Messages.getText(format.desc) %>\n  </div>\n<% } %>\n\n<div class="row">\n    <div class="col-sm-6 im-param-dest">\n    </div>\n    <div class="col-sm-6 im-dest-opts">\n    </div>\n</div>\n',n.large_table_disuader='<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <h3>\n            <%= size %> rows - are you sure?\n            </h3>\n        </div>\n\n        <div class="modal-body">\n\n            <p><%= Messages.getText(\'largetable.appeal\', {size: size}) %></p>\n\n            <ul>\n                <li>\n                    <p>\n                        If you want to see all the data, you can page \n                        <span class="label label-info">\n                            <%= Icons.icon(\'GoBack\') %>\n                            backwards\n                        </span>\n                        and \n                        <span class="label label-info">\n                            forwards\n                            <%= Icons.icon(\'GoForward\') %>\n                        </span>\n                        through the results.\n                    </p>\n                    <div class="btn-group">\n                        <a class="btn btn-default im-alternative-action page-backwards" href="#">\n                            <%= Icons.icon(\'GoBack\') %>\n                            go one page back\n                        </a>\n                        <a class="btn btn-default im-alternative-action page-forwards" href="#">\n                            go one page forward\n                            <%= Icons.icon(\'GoForward\') %>\n                        </a>\n                    </div>\n                </li>\n\n                <li>\n                    <p>\n                        If you are looking for something specific, you can use the\n                        <span class="label label-info">filtering tools</span>\n                        to narrow down the result set. Then you \n                        might be able to fit the items you are interested in in a\n                        single page.\n                    </p>\n                    <button class="btn btn-default im-alternative-action add-filter-dialogue">\n                        <%= Icons.icon(\'Filter\') %>\n                        Add a new filter.\n                    </button>\n                </li>\n\n                <li>\n                    <p>\n                        If you want to get and save the results, we suggest\n                        <span class="label label-info">downloading</span>\n                        the results in a format that suits you. \n                    <p>\n                    <button class="btn btn-default im-alternative-action download-menu">\n                        <%= Icons.icon(\'Export\') %>\n                        Open the download menu.\n                    </buttn>\n                </li>\n\n            </ul>\n        </div>\n\n        <div class="modal-footer">\n            <button class="btn btn-primary pull-right">\n                <%- Messages.getText(\'largetable.ok\', {size: size}) %>\n            </button>\n            <button class="btn pull-left close">\n                <%- Messages.getText(\'largetable.abort\') %>\n            </button>\n        </div>\n    </div>\n</div>\n',n.modal_dialogue_opener='<button class="btn btn-default im-open-dialogue">\n  <%= Icons.icon(labels.ICON) %>\n  <span class="im-hidden-sm hidden-sm hidden-xs">\n    <%- Messages.getText(labels.LONG, state) %>\n  </span>\n  <span class="im-visible-sm-inline visible-sm-inline">\n    <%- Messages.getText(labels.SHORT, state) %>\n  <span>\n</button>\n',n.select_with_label='<label><%- Messages.getText(label) %></label>\n\n<% if (options.length) { %>\n    <select class="form-control">\n        <% _.each(options, function (option) { %>\n            <option selected="<%= selected(option) ? \'selected\' : void 0 %>"\n                    value="<%- option.name %>">\n                <%- Messages.getText(optionLabel, option) %>\n            </option>\n        <% }) %>\n    </select>\n    <% if (helpMessage) { %>\n        <span style="display:<%= hasProblem ? \'block\' : \'none\' %>"\n              class="help-block">\n                <%- Messages.getText(helpMessage) %>\n        </span>\n    <% } %>\n<% } else { %>\n    <span class="help-block">\n        <%- Messages.getText(noOptionsMessage, {model: model}) %>\n    </span>\n<% } %>\n\n',n.list_dialogue_body='<div class="im-list-name"></div>\n\n<div class="row">\n  <div class="col-sm-12 im-more-options">\n    <h4>\n      <%= Icons.icon(\'Options\') %>\n      <span class="msg"><%- Messages.getText(\'lists.ShowExtraOptions\', state) %></span>\n    </h4>\n  </div>\n</div>\n\n<div class="im-optional-attributes" style="<%- state.minimised ? \'display:none\' : void 0 %>">\n  <div class="im-list-desc"></div>\n\n  <div class="well im-tags">\n    <div class="row im-active-tags">\n    </div>\n    <div class="row">\n      <div class="col-sm-6 im-apology">\n      </div>\n      <div class="col-sm-6">\n        <div class="im-next-tag">\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',n.undo_history_step='<% if (!state.current) { %>\n  <button class="btn btn-default btn-small im-state-revert"\n      title="<%- Messages.getText(\'undo.RevertToState\') %>">\n      <%= Icons.icon(\'Undo\') %>\n  </button>\n<% } %>\n\n<h4>\n    <%- Messages.getText(\'undo.StepTitle\', title) %>\n</h4>\n\n<% if (state.current) { %>\n  <span class="help-block"><%- Messages.getText(\'undo.IsCurrentState\') %></span>\n<% } %>\n<div style="clear:both"></div>\n\n<span class="im-revision" title="<%- Messages.getText(\'undo.RevisionTitle\', {v: revision}) %>">\n  <%- Messages.getText(\'undo.Revision\', {v: revision}) %>\n</span>\n\n<div class="im-step-count">\n  <span><%- Messages.getText(\'undo.StepCount\', {count: count}) %></span>\n  <% if (diff) { %>\n    <span class="label im-label-<%= (diff > 0 ) ? \'pos\' : \'neg\' %>">\n      <% if (diff > 0) { %>+<% } %><%- numToString(diff) %>\n    </span>\n  <% } %>\n</div>\n\n<div class="im-step-details"></div>\n\n<div style="clear:both"></div>\n',n.code_gen_body='<div class="row">\n  <div class="col-sm-2">\n    <% /* requires lang :: string, options :: {Extra :: {}, Langs :: [string]} */ %>\n    <div class="btn-group language-selector">\n      <button type="button"\n              data-toggle="dropdown"\n              aria-expanded="false"\n              class="btn btn-default dropdown-toggle">\n        <span class="im-current-lang">\n          <%- Messages.getText(\'codegen.Lang\', {lang: lang}) %>\n        </span>\n        <span class="caret"></span>\n      </button>\n      <ul class="dropdown-menu im-code-gen-langs" role="menu">\n        <% _.each(options.Langs, function (l) { %>\n            <li data-lang="<%- l %>"\n                class="<%= (l === lang) ? \'active\' : void 0 %>">\n              <a href="#"><%- Messages.getText(\'codegen.Lang\', {lang: l}) %></a>\n            </li>\n        <% }); %>\n      </ul>\n    </div>\n    <div class="im-show-boilerplate"></div>\n    <div class="im-highlight-syntax"></div>\n    <div class="im-extra-options"></div>\n  </div>\n  <div class="col-sm-10">\n    <pre class="im-generated-code"><%- generatedCode %></pre>\n  </div>\n</div>\n',n.active_constraints='<% /* requires: constraints.length */ %>\n<div class="well im-current-constraints">\n    <p class="well-help">\n      <% if (constraints.length) { %>\n        <%- Messages.getText(\'constraints.EditOrRemove\') %>\n      <% } else { %>\n        <%- Messages.getText(\'constraints.None\') %>\n      <% } %>\n    </p>\n\n    <ul class="im-active-constraints">\n    </ul>\n</div>\n',n.checkbox="<label>\n    <input type=\"checkbox\" \n           <%= checked ? 'checked' : void 0 %>\n           >\n    <%- label %>\n</label>\n",n.modal_footer='<button type="button" class="btn btn-cancel">\n    <%- dismissAction %>\n</button>\n<% if (exportLink != null) { %>\n    <a class="btn btn-primary"\n        <%= (error) ? \'disabled\' : void 0 %>\n        href="<%- exportLink %>">\n        <%= Icons.icon(primaryIcon) %>\n        <%- primaryAction %>\n    </a>\n<% } else { %>\n    <% /* We need the wrapper to deal with the fact that tooltips do not\n        * work on disabled buttons. */ %>\n    <div class="im-tooltip-wrapper"\n        <% if (disabled && disabledReason) { %>\n          title="<%- Messages.getText(disabledReason)  %>"\n        <% } %>>\n        <button type="button"\n                <%= (error || disabled) ? \'disabled\' : void 0 %>\n                class="btn btn-primary">\n            <%= Icons.icon(primaryIcon) %>\n            <%- primaryAction %>\n        </button>\n    </div>\n<% } %>\n',n.cell_preview_error='<div class="alert alert-error">\n    <h4>Error</h4>\n    <p>Sorry. We could not fetch the preview due to an error:</p>\n    <code><%- message %></code>\n</div>\n',n.column_manager_path_name='<% /* requires parts */ %>\n<span class="im-path-name">\n    <% _.each(parts, function (part) { %>\n        <span class="im-name-part"><%- part %></span>\n    <% }); %>\n</span>\n\n',n.value_control_row='<td>\n  <input type="checkbox" {{ (selected) ? \'checked\' : void 0 }}>\n</td>\n<td class="im-multi-value">\n  {{# if (editing) { }}\n    <div class="input-group">\n      <input type="text" value="{{ value }}" class="form-control">\n      <span class="input-group-btn">\n        <button class="btn btn-success im-save"\n                title="{{ messages.getText(\'multivalue.SaveValue\') }}"\n                type="button">\n            {{{ icons.icon(\'OK\') }}}\n            <span class="im-long">{{ messages.getText(\'multivalue.SaveValue\') }}</span>\n        </button>\n        <button class="btn btn-danger im-cancel"\n                title="{{ messages.getText(\'Cancel\') }}"\n                type="button">\n            {{{ icons.icon(\'Cancel\') }}}\n            <span class="im-long">{{ messages.getText(\'Cancel\') }}</span>\n        </button>\n      </span>\n    </div>\n  {{# } else { }}\n    <a class="im-edit pull-right">{{{ icons.icon(\'Edit\') }}}</a>\n    {{ value }}\n  {{# } }}\n</td>\n',n.attribute_value_controls='<div>\n    <input class="form-control im-constraint-value im-value-options im-con-value im-con-value-attr"\n           type="text"\n           placeholder="<%- state.valuePlaceholder %>"\n           value="<%- con.value %>">\n</div>\n',n.extra_value_controls='<label class="im-value-options">\n    <%- messages.getText(\'conbuilder.ExtraLabel\') %>\n    <input type="text" class="im-extra-value form-control"\n            placeholder="<%- state.extraPlaceholder %>"\n            value="<%- con.extraValue %>">\n</label>\n\n',n.column_name_popover='<% _.each(parts, function (part) { %>\n  <span class="im-name-part"><%- part %></span>\n<% }); %>\n',n.list_dialogue_expander="<button class=\"btn btn-default im-expand-dialogue <%= minimised ? 'active' : void 0 %>\">\n  <%- Messages.getText('lists.picker.Collapse') %>\n</button>\n",n.attribute_value_select='<select class="form-control im-con-value-attr">\n    <% _.each(items, function (item) { %>\n    <option <%= (item.item === value) ? \'selected\' : void 0 %> value="<%- item.item %>">\n            <%- item.item %>\n        </option>\n    <% }); %>\n</select>\n',n.export_dialogue='<div class="row">\n    <nav class="col-sm-3 menu">\n    </nav>\n    <div class="col-sm-9 main">\n    </div>\n</div>\n',n.null_value='<span class="im-null-value">&nbsp;</span>\n',n.table_subtables_header="<a title=\"<%- Messages.getText('subtables.RemoveColumn') %>\">\n  <%= Icons.icon('Remove') %>\n</a>\n<% if (displayName && columnName) { %>\n  <%- displayName.replace(columnName, '').replace(/^ > /, '') %>\n<% } %>\n",n.summary_items_controls='<button class="btn btn-default pull-right im-download">\n  <%= Icons.icon(\'Download\') %>\n  <%- Messages.getText(\'summary.DownloadData\') %>\n</button>\n\n<div class="btn-group im-filter-group">\n  <button type="submit"\n        class="btn btn-primary im-filter-in"\n        <%= (anyItemSelected) ? void 0 : \'disabled\' %>>\n    <%- Messages.getText(\'Filter\') %>\n  </button>\n  <button class="btn btn-primary dropdown-toggle" \n          title="<%- Messages.getText(\'summary.SelectFilter\') %>"\n          <%= (anyItemSelected) ? void 0 : \'disabled\' %>>\n    <span class="caret"></span>\n  </button>\n  <ul class="dropdown-menu">\n    <li>\n      <a href="#" class="im-filter-in">\n        <%- Messages.getText(\'summary.Include\') %>\n      </a>\n    </li>\n    <li>\n      <a href="#" class="im-filter-out">\n        <%- Messages.getText(\'summary.Exclude\') %>\n      </a>\n    </li>\n  </ul>\n</div>\n\n<div class="btn-group">\n  <button class="btn btn-default btn-cancel"\n          <%= (anyItemSelected) ? void 0 : \'disabled\' %>\n          title="<%- Messages.getText(\'summary.Reset\') %>">\n    <%= Icons.icon(\'Undo\') %>\n  </button>\n  <% if (!(/boolean/i).test(type)) { %>\n    <button class="btn btn-default btn-toggle-selection"\n            title="<%- Messages.getText(\'summary.Toggle\') %>">\n        <%= Icons.icon(\'Toggle\') %>\n    </button>\n  <% } %>\n</div>\n\n',n.list_dialogue_button='<button class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n  <%= Icons.icon(\'Lists\') %>\n  <span class="hidden-xxs">\n    <%- Messages.getText(\'lists.SaveAsList\') %>\n  </span>\n  <span class="caret"></span>\n</button>\n\n<ul class="dropdown-menu dropdown-menu-right" role="menu">\n    <li class="divider"></li>\n    <li>\n        <a class="im-pick-items" href="#">\n            <%- Messages.getText(\'lists.StartPicking\') %>\n        </a>\n    </li>\n    <li class="divider"></li>\n    <li>\n        <div class="btn-group btn-group-justified" role="group">\n            <a role="button" class="<%- createBtnClasses %>">\n                <%- Messages.getText(\'lists.Create\') %>\n            </a>\n            <a role="button" class="<%- appendBtnClasses %>">\n                <%- Messages.getText(\'lists.Append\') %>\n            </a>\n        </div>\n    </li>\n</ul>\n',n.list_tag="<%- id %>\n<span class=\"im-remove\" title=\"<%- Messages.getText('lists.RemoveTag') %>\">\n    <%= Icons.icon('Remove') %>\n</span>\n",n.export_dialogue_footer='<% if (linkToFile) { %>\n    <div class="pull-left alert alert-info">\n        <%- Messages.getText(\'export.cloud.FileLocation\', {cloud: dest}) %>\n        <a href="<%= linkToFile %>" target="_blank"><%- linkToFile %></a>\n    </div>\n<% } %>\n\n<button type="button" class="btn btn-cancel">\n    <%- dismissAction %>\n</button>\n\n<% if (dest === \'download\') { %>\n    <a class="btn btn-primary"\n        href="<%- exportURI %>">\n        <%= Icons.icon(primaryIcon) %>\n        <%- primaryAction %>\n    </a>\n<% } else { %>\n    <button type="button"\n            <%= (error || doneness != null) ? \'disabled\' : void 0 %>\n            class="btn btn-primary">\n        <%= Icons.icon(primaryIcon) %>\n        <%- primaryAction %>\n    </button>\n<% } %>\n\n',n.summary_selected_count="<% if (state.selectedCount) { %>\n    <div class=\"alert alert-info im-selected-count\">\n        <strong>\n            <%- Messages.getText('summary.SelectedCount', state) %>\n        </strong>\n    </div>\n<% } %>\n",n.column_manager_position_controls="<div class=\"im-position-controls\">\n    <% if (index > 0) { %>\n        <%= Icons.iconWithProps('ASC', {\n            className: 'im-move-up',\n            title: Messages.getText('columns.MoveUp')\n        }) %>\n    <% } %>\n    <% if (!isLast) { %>\n        <%= Icons.iconWithProps('DESC', {\n            className: 'im-move-down',\n            title: Messages.getText('columns.MoveDown')\n        }) %>\n    <% } %>\n</div>\n\n",n.column_manager_sort_order_editor='<% /* requires: collection, available */ %>\n<h4>\n  <%- Messages.getText(\'columns.CurrentSortOrder\', {\n    oes: collection\n  }) %>\n</h4>\n\n<span class="help-block">\n  <%- Messages.getText(\'columns.CurrentSortOrderHelp\') %>\n</span>\n\n<div class="well im-current-sort-order">\n\n  <div class="row">\n    <div class="col-md-6">\n        <% if (collection.length) { %>\n          <ul class="list-group im-active-oes im-connected-list"></ul>\n        <% } else { %>\n          <div class="im-empty-collection">\n            <%- Messages.getText(\'columns.NoSortOrder\') %>\n          </div>\n        <% } %>\n    </div>\n\n    <div class="col-md-6">\n        <% if (available) { %>\n          <div class="im-rubbish-bin">\n            <ul class="list-group im-removed im-available-oes im-connected-list">\n            </ul>\n          </div>\n        <% } %>\n    </div>\n  </div>\n</div>\n',n.summary_stats='<table class="table">\n    <thead>\n        <tr>\n            <th><%- Messages.getText(\'summary.Max\') %></th>\n            <th><%- Messages.getText(\'summary.Min\') %></th>\n            <th><%- Messages.getText(\'summary.Average\') %></th>\n            <th><%- Messages.getText(\'summary.StdDev\') %></th>\n        </tr>\n        <tr>\n            <td><%- Messages.getText(\'Number\', {n: max}) %></td>\n            <td><%- Messages.getText(\'Number\', {n: min}) %></td>\n            <td><%- Messages.getText(\'Number\', {n: average}) %></td>\n            <td><%- Messages.getText(\'Number\', {n: stdev}) %></td>\n        </tr>\n    </thead>\n</table>\n\n<div class="row im-range-controls">\n    <div class="col-sm-4 im-range-from">\n        <input type="text"\n               class="form-control im-range-min input im-range-val"\n               value="<%- min %>">\n    </div>\n    <div class="col-sm-1 im-ellipsis">\n        <span>...</span>\n    </div>\n    <div class="col-sm-4 im-range-to">\n        <input type="text"\n               class="form-control im-range-max input im-range-val"\n               value="<%- max %>">\n    </div>\n    <div class="col-sm-3 im-range-buttons">\n        <div class="btn-group pull-right">\n            <button class="btn btn-primary disabled">Apply</button>\n            <button class="btn btn-cancel disabled">Reset</button>\n        </div>\n    </div>\n</div>\n\n<div class="slider"></div>\n\n',n.table_error="<div class=\"alert alert-error alert-warning\">\n\n  <h2><%= Icons.icon('Bug') %><%- Messages.getText('error.Oops') %></h2>\n\n  <p>\n    <i><%- Messages.getText(error.key || 'error.' + domain + '.Heading') %></i>\n  </p>\n\n  <p><%- Messages.getText('error.' + domain + '.Body') %></p>\n\n  <a class=\"btn btn-primary pull-right\" href=\"mailto:<%= mailto %>\">\n    <%= Icons.icon('Mail') %>\n    <%- Messages.getText('error.EmailHelp') %>\n  </a>\n\n  <button class=\"btn btn-default im-show-query\">\n    <%= Icons.icon('xml') %>\n    <%- Messages.getText('error.ShowQuery') %>\n  </button>\n  <% if (error.message) { %>\n    <button class=\"btn btn-default im-show-error\">\n      <%= Icons.icon('Bug') %>\n      <%- Messages.getText('error.ShowError') %>\n    </button>\n  <% } %>\n\n  <pre class=\"query-xml well im-latent\"><%- indent(query) %></pre>\n\n  <% if (error.message) { %>\n    <pre class=\"error-message well im-latent\"><%- error.message %></pre>\n  <% } %>\n\n</div>\n",n.export_add_column_control='<div class="row">\n    <div class="col-sm-1 im-help"\n         title="<%- Messages.getText(\'export.help.AdditionalCols\') %>">\n        <%= Icons.icon(\'Help\', \'lg\') %>\n    </div>\n    <div class="col-sm-11 form-group">\n        <input type="text" class="form-control">\n    </div>\n</div>\n',n.undo_history_step_section="<div class=\"im-section-summary\">\n  <% if (collection.length) { %>\n    <%= Icons.icon(state.open ? 'ExpandedSection' : 'CollapsedSection') %>\n  <% } %>\n  <%- Messages.getText(summaryLabel, {n: count}) %>\n</div>\n<% if (collection.length) { %>\n  <div class=\"<%- collectionClasses %>\">\n    <% _.each(collection, function (e) { %>\n      <span class=\"label label-<%= e.added ? 'success' : (e.removed ? 'danger' : 'default') %>\">\n        <%- labelContent(e) %>\n      </span>\n    <% }); %>\n  </div>\n<% } %>\n",n.page_sizer='<% /* Expects size, sizes */ %>\n<% if (sizes.length) { %>\n    <label>\n        <span class="hidden-tablet">Rows per page:</span>\n    </label>\n    <select class="form-control" title="Rows per page">\n        <% sizes.forEach(function (s) { %>\n            <option value="<%= s[0] %>" <%= (s[0] === size) && \'selected\' %>>\n            <%= s[1] || s[0] %>\n            </option>\n        <% }); %>\n    </select>\n<% } %>\n',n.loop_value_controls="<% if (candidateLoops.length) { %>\n    <%= select(candidateLoops, isSelected, 'form-control im-value-options im-con-value') %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLoops') %>\n<% } %>\n",n.select='<select class="<%- data.classes %>">\n  <% _.each(data.options, function (opt) { %>\n    <option value="<%- data.key(opt) %>"\n      <%- data.selectedTest(opt) ? \'selected\' : void 0 %> >\n      <% if (data.contentHandler) { %>\n        <%- data.contentHandler(opt) %>\n      <% } else { %>\n        <%- opt.text %>\n      <% } %>\n    </option>\n  <% }); %>\n</select>\n',n.list_value_controls="<% if (suitableLists.length) { %>\n    <%= select(suitableLists, isSelected, 'span7 im-value-options im-con-value im-con-value-list form-control', formatList, getOptionValue) %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLists') %>\n<% } %>\n",n.export_destination_galaxy_options='<div class="form-group">\n    <label><%- Messages.getText(\'GalaxyURILabel\') %></label>\n    <input type="url"\n           class="form-control im-galaxy-uri-param"\n           value="<%- Galaxy.Current || Galaxy.Main %>">\n</div>\n<div class="checkbox im-save-galaxy">\n    <label>\n        <input type="checkbox" <%= (Galaxy.Save) ? \'checked\' : void 0 %>>\n        <%- Messages.getText(\'SaveGalaxyURL\') %></label>\n    </label>\n</div>\n',n.formatted_sorting="<a> <% /* requires Icons, direction and name */ %>\n    <%= Icons.icon(direction || 'unsorted') %>\n    <span class=\"im-sort-path\"><%- name %></span>\n</a>\n",n.cell_preview_items='<colgroup>\n  <col class="im-item-field"/>\n  <col class="im-item-value"/>\n</colgroup>\n<tbody></tbody>\n',n.modal_base='<div class="modal-dialog <%- modalSize %>">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close">\n                <span aria-hidden="true">&times;</span>\n                <span class="sr-only">Close</span>\n            </button>\n            <h4 class="modal-title"><%- title %></h4>\n        </div>\n        <div class="modal-body">\n            <%= body %>\n        </div>\n    </div>\n</div>\n',n.summary_heading='<% /* requires:\n    *  numeric, available, got, uniqueValues\n    *  state.typeName, state.endName\n    *  filtered \n    */ %>\n<h3>\n  <% if (numeric) { %>\n    <%- Messages.getText(\'summary.NumericDistribution\', {n: available}) %>\n    <span class="im-type-name"><%- state.typeName %></span>\n    <span class="im-attr-name"><%- pluralise(state.endName, got) %></span>\n  <% } else { %> \n    <span class="im-item-got">\n      <%- Messages.getText(\'summary.Got\', {available: available, got: got}) %>\n    </span>\n    <span class="im-item-available">\n      <%- Messages.getText(\'Number\', {n: available}) %>\n    </span>\n    <span class="im-type-name"><%- state.typeName %></span>\n    <span class="im-attr-name"><%- pluralise(state.endName, got) %></span>\n    <span class="im-item-total">\n      <%- Messages.getText(\'summary.Total\', {\n            filtered: filtered,\n            total: uniqueValues\n          }) %>\n    </span>\n  <% } %> \n</h3>\n',n.export_format_controls='<h4 class="im-title"></h4>\n\n<% _.each(formats, function (formatDef) { %>\n    <div class="radio">\n        <label>\n            <input type="radio"\n                   name="format"\n                   value="<%= formatDef.id %>"\n                   <%= (formatDef.id === format) ? \'checked\' : void 0 %>>\n            <%= Icons.icon(formatDef.icon) %>\n            <%= Messages.getText(formatDef.desc) %>\n        </label>\n    </div>\n<% }); %>\n',n.constraint_summary="<% if (code) { %>\n  <li><span class=\"text-muted\"><strong><%- code %>:</strong></span></li>\n<% } %>\n<% _.each(labels, function (label) { %>\n  <li>        \n    <span class=\"label label-<%- label.type %>\">\n      <% if (_.include(['error', 'warning'], label.type)) { %>\n        <%= Icons.icon('Error') %>\n        <%- Messages.getText('consummary.' + label.content) %>\n      <% } else if (label.type === 'path') { %>\n        <% _.each(label.content.split(' > '), function (part) { %>\n          <span title=\"<%- label.content %>\" class=\"im-name-part\"><%- part %></span>\n        <% }); %>\n      <% } else { %>\n        <% if (label.icon) { %><%= Icons.icon(label.icon) %><% } %>\n        <%- label.content %>\n      <% } %>\n    </span>\n  </li>\n<% }); %>\n",n.column_manager_tabs='<ul class="nav nav-tabs">\n    <li role="presentation" class="<%- classes.view %>">\n      <a href="#">\n        <%- Messages.getText(\'columns.ViewTabTitle\') %>\n      </a>\n    </li>\n    <li role="presentation" class="<%- classes.sortorder %>">\n      <a href="#">\n        <%- Messages.getText(\'columns.SortOrderTabTitle\') %>\n      </a>\n    </li>\n</ul>\n',n.reset_button="<button type=\"button\"\n        <%= (isAll) ? 'disabled' : void 0 %>\n        class=\"btn btn-default btn-reset\">\n    <%- Messages.getText('Reset') %>\n</button>\n",n.constraint_adder='<div class="im-constraint-adder-options"></div>\n<div class="im-path-finder"><div>\n<div class="im-new-constraint"></div>\n',n.constraint_adder_options='<% if (showTree) { %>\n    <div class="col-sm-5">\n        <div class="input-group">\n            <span class="input-group-addon">find</span>\n            <input type="text"\n                value="<%- filter %>"\n                class="im-tree-filter form-control" placeholder="path">\n            <span class="input-group-btn">\n                <button class="btn btn-default im-clear-filter" type="button">\n                    <%- Messages.getText(\'Clear\') %>\n                </button>\n            </span>\n        </div>\n    </div>\n<% } %>\n<div class="col-sm-7">\n    <div class="btn-group">\n        <% if (!showTree) { %>\n            <button type="button" class="btn btn-default btn-chooser im-choose">\n                <%= Icons.icon(\'Tree\') %>\n                <span><%- Messages.getText(\'constraints.BrowseForColumn\') %></span>\n            </button>\n        <% } else { %>\n            <button <%= anyNodeChosen ? void 0 : \'disabled\' %>\n                    class="btn btn-primary im-approve"\n                    type="button" >\n                <%- Messages.getText(\'constraints.Choose\') %>\n                <% _.each(chosen, function (path, i) { %>\n                    <%- path %>\n                    <% if (i + 2 === chosen.length) { %>\n                        <%- Messages.get(\'and\') %>\n                    <% } else if (i + 2 < chosen.length) { %>\n                        <%- Messages.get(\'comma\') %>\n                    <% } %>\n                <% }); %>\n            </button>\n        <% } %>\n    </div>\n    <div class="form-group">\n        <label class="im-tree-option">\n            <%- Messages.getText(\'columns.AllowRevRef\') %>\n            <input type="checkbox"\n                    class="im-allow-rev-ref"\n                    <%= allowRevRefs ? \'checked\' : void 0 %> >\n        </label>\n    </div>\n</div>\n',n.constraints_heading="<% /* requires constraints.length */ %>\n<h3>\n  <%- Messages.getText('constraints.Heading', {n: constraints.length}) %>\n</h3>\n",n.row_surrogate="<%= Icons.icon(above ? 'ASC' : 'DESC') %>\n<%- item %>: <%- count %>\n",n.export_preview='<div class="form-group im-export-formats">\n  <label><%- Messages.getText(\'export.param.Format\') %></label>\n  <select class="form-control">\n    <% _.each(formats, function (fmt) { %>\n      <option value="<%- fmt.id %>"\n              <%= (fmt.id === format.id) ? \'selected\' : void 0 %>>\n        <%- Messages.getText(fmt.name) %>\n      </option>\n    <% }); %>\n  </select>\n</div>\n\n<pre class="im-export-preview">\n<%- state.preview %>\n</pre>\n\n<div class="alert alert-info">\n    <strong class="nb">nb</strong>\n    <%- Messages.getText(\'export.preview.Limit\') %>\n</div>\n',n.input_with_label='<label><%- Messages.getText(label) %></label>\n<input class="form-control"\n       placeholder="<%- Messages.getText(placeholder) %>"\n       value="<%- value %>">\n<% if (helpMessage) { %>\n  <span style="display:<%= hasProblem ? \'block\' : \'none\' %>"\n        class="help-block">\n        <%- Messages.getText(helpMessage) %>\n  </span>\n<% } %>\n',n.column_manager_select_list='<div class="im-removal-and-rearrangement">\n  <button class="pull-right btn btn-success im-add-view-path">\n      <%= Icons.icon(\'Add\') %>\n      <%- Messages.getText(\'columns.FindColumnToAdd\') %>\n  </button>\n\n  <h4>\n    <%- Messages.getText(\'columns.ColumnsSelected\', {columns: collection, removed: hasRubbish}) %>\n  </h4>\n\n  <span class="help-block"><%- Messages.getText(\'columns.CurrentViewHelp\') %></span>\n\n  <div class="well im-current-view">\n\n    <div class="row">\n\n      <div class="col-md-6">\n        <ul class="list-group im-active-view im-connected-list">\n        </ul>\n      </div>\n\n      <div class="col-md-6">\n        <div class="im-rubbish-bin">\n            <%= Icons.icon((hasRubbish ? \'RubbishFull\' : \'Rubbish\'), \'lg\') %>\n            <% if (hasRubbish) { %>\n                <ul class="list-group im-removed im-removed-view im-connected-list">\n                </ul>\n            <% } %>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n<div class="im-addition">\n</div>\n\n',n.table_subtable='<span class="im-subtable-summary">\n</span>\n<div class="im-table-wrapper">\n</div>\n',n.export_tab_menu='<% _.each(data.tabs, function (tabDef) { %>\n  <li role="presentation" class="im-tab-<%= tabDef.ident %> <%= data.tab === tabDef.ident ? \'active\' : void 0 %>">\n    <a><%- data.Messages.getText(tabDef.key, data) %></a>\n  </li>\n<% }); %>\n',n.column_manager_path_chooser="<div class=\"btn-group pull-right\">\n</div>\n<h4>\n  <%- Messages.getText('columns.ChooseAPathFrom', {root: state.rootName}) %>\n</h4>\n\n",n.cell_preview_reference_relation='<% _.each(collection, function (relation) { %>\n  <li class="im-relation">\n    <span class="im-name"><%- _.last(relation.parts) %></span>\n    <span class="im-count"><%- numToString(relation.count) %></span>\n  </li>\n<% }); %>\n',n.facet_frequency='<% /* requires: error, initialized */ %>\n<% if (error) { %>\n    <% /* Oh noes - something went wrong. */ %>\n    <div class="alert alert-warning">\n        <%= Icons.icon(\'Error\') %>\n        <strong><%- Messages.getText(\'Error\') %></strong>\n        <% if (error.key) { %>\n            <%- Messages.getText(error.key) %>\n        <% } else { %>\n            <%- error.message || error %>\n        <% } %>\n    </div>\n<% } else if (initialized) { %>\n    <% /* Huzzah - there is data, which will be added here as child views */ %>\n<% } else { %>\n    <% /* Boo - no data. Show an indeterminate progress bar while we wait. */ %>\n    <div class="progress">\n      <div class="progress-bar progress-bar-info progress-bar-striped active"\n           role="progressbar"\n           style="width:100%">\n        <span class="sr-only"><%- Messages.getText(\'Loading\') %>.</span>\n      </div>\n    </div>\n<% } %>\n',n.constraint_editor='<fieldset class="im-constraint-options form-group row">\n  <label class="col-sm-3 path-label"><%- data.con.displayName %></label>\n  <% if (data.con.op) { %>\n    <div class="im-operator col-sm-3">\n        <select class="form-control im-ops">\n        <option selected><%- data.con.op %></option>\n        <% data.otherOperators.forEach(function (op) { %>\n            <option><%- op %></option>\n        <% }); %>\n        </select>\n    </div>\n  <% } %>\n  <div class="col-sm-6 im-value-options im-value-section">\n  </div>\n</fieldset>\n\n<div class="btn-group im-con-buttons">\n  <% data.buttons.forEach(function (b, i) { %>\n  <button class="btn btn-<%= (i === 0) ? \'primary\' : \'default\' %> <%- b.classes %>">\n    <%- data.messages.getText(b.key) %>\n  </button>\n  <% }); %>\n</div>\n',n.summary_items='<% if (!(/boolean/i).test(type)) { %>\n    <div class="input-group im-filter-group">\n    <span class="input-group-btn">\n        <button class="btn btn-default im-clear-value-filter">\n        <%= Icons.icon(\'Refresh\') %>\n        </button>\n    </span>\n    <input type="search" class="form-control im-filter-values"\n        value="<%- filterTerm %>"\n        placeholder="<%- Messages.getText(\'summary.FilterValuesPlaceholder\') %>">\n    </div>\n<% } %>\n\n<div class="im-item-table">\n  <table class="table table-condensed table-striped">\n    <colgroup>\n      <% _.each(colClasses, function (cls) { %>\n        <col class="<%- cls %>">\n      <% }); %>\n    </colgroup>\n    <thead>\n      <tr>\n        <% _.each(colHeaders, function (hdr) { %>\n          <th><%- hdr %></th>\n        <% }); %>\n      </tr>\n    </thead>\n    <tbody class="scrollable">\n    </tbody>\n  </table>\n\n  <% if (hasMore) { %>\n    <div class="im-load-more">\n      <%- Messages.getText(\'summary.MoreItems\') %>\n    </div>\n  <% } %>\n</div>\n\n<div class="im-summary-controls">\n</div>\n',n.code_gen_button='<% /* requires lang :: string, options.Langs :: [string] */ %>\n<div class="btn-group language-selector">\n    <button type="button"\n            class="btn btn-default im-show-code-gen-dialogue">\n    </button>\n    <button type="button"\n            data-toggle="dropdown"\n            aria-expanded="false"\n            class="btn btn-default dropdown-toggle">\n        <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu im-code-gen-langs" role="menu">\n        <% _.each(options.Langs, function (l) { %>\n            <li data-lang="<%- l %>" class="<%= (l === lang) ? \'active\' : void 0 %>">\n                <a href="#"><%- Messages.getText(\'codegen.Lang\', {lang: l}) %></a>\n            </li>\n        <% }); %>\n    </ul>\n</div>\n',n.join_style='<% /* requires innerJoinBtn, outerJoinBtn */ %>\n<div class="btn-group pull-right">\n  <button class="<%- innerJoinBtn %>">\n    <%- Messages.getText(\'joins.Inner\') %>\n  </button>\n  <button class="<%- outerJoinBtn %>">\n    <%- Messages.getText(\'joins.Outer\') %>\n  </button>\n</div>\n',n.export_flat_file_options="<h4><%- Messages.getText('export.category.ColumnHeaders', state) %></h4>\n\n<div class=\"checkbox im-headers\">\n    <label>\n        <input type=\"checkbox\" <%= headers ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.AddHeaders') %>\n    </label>\n</div>\n\n<fieldset <%= headers ? void 0 : 'disabled' %>>\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"hdrs-friendly\"\n                <%= (headerType === 'friendly') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.ff.FriendlyHeaders') %>\n        </label>\n    </div>\n\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"hdrs-path\"\n                <%= (headerType === 'path') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.ff.PathHeaders') %>\n        </label>\n    </div>\n</fieldset>\n\n",n.column_header='<% /* requires the properties of HeaderModel +\n    *  penult, last, headerClasses, colTitleClasses, penultClasses\n    *  and the usual Icons, Messages\n    */ %>\n<div class="<%- headerClasses %>">\n\n<div class="im-th-buttons">\n    \n    <% if (outerJoined && isReference) { %>\n      <a href="#" \n          class="im-subtable-expander im-th-button"\n          title="<%- Messages.getText(\'table.header.ToggleTables\') %>">\n        <%= Icons.icon(\'Table\') %>\n      </a>\n    <% } %>\n\n    <% if (sortable) { %>\n        <span class="im-th-dropdown im-col-sort dropdown">\n            <a class="im-th-button im-col-sort-indicator"\n                title="<%- Messages.getText(\'table.header.SortColumn\', {dir: sortDirection}) %>">\n                <%= Icons.icon(sortDirection || \'unsorted\') %>\n            </a>\n            <div class="dropdown-menu">\n                <div><%- Messages.getText(\'table.header.FailedToInitSortMenu\') %></div>\n            </div>\n        </span>\n    <% } %>\n\n    <a class="im-th-button im-col-remover"\n        title="<%- Messages.getText(\'table.header.RemoveColumn\') %>">\n        <%= Icons.icon(\'headerIconRemove\') %>\n    </a>\n\n    <a class="im-th-button im-col-minumaximiser"\n        title="<%- Messages.getText(\'table.header.ToggleColumn\') %>">\n        <%= Icons.icon(minimised ? \'headerIconReveal\' : \'headerIconHide\') %>\n    </a>\n\n    <span class="dropdown im-filter-summary im-th-dropdown">\n        <a class="im-th-button im-col-filters dropdown-toggle"\n            title="<%- Messages.getText(\'table.header.FilterTitle\', {count: numOfCons}) %>"\n            data-toggle="dropdown" >\n            <%= Icons.icon(\'Filter\') %>\n        </a>\n        <div class="dropdown-menu">\n            <div><%- Messages.getText(\'table.header.FailedToInitFilter\') %></div>\n        </div>\n    </span>\n\n    <span class="dropdown im-summary im-th-dropdown">\n        <a class="im-th-button summary-img dropdown-toggle"\n            title="<%- Messages.getText(\'table.header.ViewSummary\') %>"\n            data-toggle="dropdown" >\n            <%= Icons.icon(\'Summary\') %>\n        </a>\n        <div class="dropdown-menu">\n            <div><%- Messages.getText(\'table.header.FailedToInitSummary\') %></div>\n        </div>\n    </span>\n\n    <% if (isComposed) { %>\n        <a class="im-th-button im-col-composed"\n            title="<%- Messages.getText(\'table.header.Composed\', {replaces: replaces}) %>">\n            <%= Icons.icon(\'Composed\') %>\n        </a>\n    <% } %>\n</div>\n\n<div class="<%- colTitleClasses %>">\n  <div class="<%- penultClasses %>">\n      <%- penult %>\n  </div>\n  <% if (last) { %>\n    <div class="im-title-part im-last">\n        <%- last %>\n    </div>\n  <% } %>\n</div>\n\n</div>\n\n',n.table_building="<h2><%- Messages.getText('table.Building') %></h2>\n<%= IndeterminateProgressBar %>\n",n.export_column_controls='<h4><%- Messages.getText(\'export.heading.Columns\') %></h4>\n\n<ul class="list-group">\n</ul>\n\n<div class="row controls"></div>\n',n.cell_preview_attribute='<tr>\n  <td class="im-field-name"><%- _.last(parts) %></td>\n  <td class="im-field-value <%- field.toLowerCase() %> <%- type %>">\n    <% if (isNumeric) { %>\n      <%- numToString(+value) %>\n    <% } else { %>\n      <%- value %>\n    <% } %>\n    <% if (tooLong) { %>\n      <span class="im-overspill"><%- valueOverspill %></span>\n      <a class="im-too-long">\n        <span class="im-ellipsis">...</span>\n        <%= Icons.icon(\'More\') %>\n      </a>\n    <% } %>\n  </td>\n</tr>\n',n.pagination='<ul class="pagination">\n    <li class="hidden-xs <%= gotoStart || \'im-goto-start\' %>" title="Go to start">\n        <a class="im-pagination-button">&#x21e4;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveBack || \'im-go-back-5\' %>"\n        title="Go back five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x219e;</a>\n    </li>\n    <li class="<%= goOneBack || \'im-go-back-1\' %>"\n        title="Go to previous page">\n        <a class="im-pagination-button">&larr;</a>\n    </li>\n    <li class="im-current-page">\n        <% if (useSelect) { %>\n          <form class="im-page-form form form-inline">\n            <select class="form-control">\n              <% for (i = 0; i < max; i++) { %>\n                <option\n                  <%= selected(i) ? \'selected\' : void 0 %>\n                  value="<%= i * size %>">\n                  page <%= i + 1 %>\n                </option>\n              <% } %>\n            </select>\n          </form>\n        <% } else { %>\n          <a href="#">&hellip;</a>\n          <form class="im-page-form form form-inline"\n                style="display:none;">\n            <div class="control-group">\n                <input type="number"\n                       value="<%= currentPage %>"\n                       max="<%= max %>"\n                       min="<%= min %>"\n                       class="form-control im-page-number">\n            </div>\n          </form>\n        <% } %>\n    </li>\n    <li class="<%= goOneForward || \'im-go-fwd-1\' %>"\n        title="Go to next page">\n        <a class="im-pagination-button">&rarr;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveForward || \'im-go-fwd-5\' %>"\n        title="Go forward five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x21a0;</a>\n    </li>\n    <li class="hidden-xs <%= gotoEnd || \'im-goto-end\' %>"\n        title="Go to last page">\n        <a class="im-pagination-button">&#x21e5;</a>\n    </li>\n</ul>\n',n.column_manager_restore_path='<% /* requires: restoreTitle */ %>\n<span class="pull-right im-restore-view"\n    title="<%- Messages.getText(restoreTitle) %>">\n    <%= Icons.icon(\'Add\') %>\n</span>\n\n'},{underscore:262}],68:[function(t,e,i){(function(){var h,f,n,e;f=t("underscore"),h=t("../options"),n=t("pluralize"),e=f.template('<select class="<%- data.classes %>">\n  <% _.each(data.options, function (opt) { %>\n    <option value="<%- data.key(opt) %>"\n      <%- data.selectedTest(opt) ? \'selected\' : void 0 %> >\n      <% if (data.contentHandler) { %>\n        <%- data.contentHandler(opt) %>\n      <% } else { %>\n        <%- opt.text %>\n      <% } %>\n    </option>\n  <% }); %>\n</select>\n',{variable:"data"}),i.select=function(t){return e({options:t,selectedTest:1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!1},classes:2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",contentHandler:3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,key:4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(t){return null!=t?t.value:void 0}})},i.pluralise=function(t,e){return null!=t?n(t,e):t},i.numToString=function(t){var e,n,i,r,s,o,a,l,u;if(!(null!=t?t.toFixed:void 0))return t;if(l=h.get("NUM_SEPARATOR"),n=h.get("NUM_CHUNK_SIZE"),a=[],s=0,-1<t&&t<1)return String(t);var c=_slicedToArray(t.toFixed(3).split("."),2);for(u=c[0],i=c[1],e=u.split(""),o=e.length,r=f(e).groupBy(function(t,e){return Math.floor((o-(e+1))/n).toFixed()});r[s];)a.unshift(r[s].join("")),s++;return a.join(l)+("000"===i?"":"."+i)},i.errorAlert=function(t){switch(t.level){case"Error":return"alert-danger";case"Warning":return"alert-warning";case"Info":return"alert-info";case"OK":return"alert-success";default:return"alert-danger"}},i.errorIcon=function(t){var e=t.level;return null!=e?e:"Error"}}).call(this)},{"../options":63,pluralize:258,underscore:262}],69:[function(t,e,n){(function(){e.exports={interpolate:/\{\{\{ (.+?) \}\}\}/g,escape:/\{\{ (.+?) \}\}/g,evaluate:/\{\{# (.+?) \}\}/g}}).call(this)},{}],70:[function(o,a,t){(function(){var n,i,t,e,r;i=o("../options");var s=o("es6-promise");t=s.Promise,r={},e=function(t){var e;return null!=r[e=t.root]?r[e]:r[e]=new n(t)},a.exports=function(t){return e(t).getBranding()},n=function(){function n(t){var e=this;_classCallCheck2(this,n),this.key=t.root.replace(/\./g,"_"),this.promise=t.get("branding").then(function(t){return i.set(["brand",e.key],t.properties)})}return _createClass2(n,[{key:"getBranding",value:function(){var e=this;return new t(function(t){return e.promise.then(function(){return t(i.get(["brand",e.key]))},function(){return t(null)})})}}]),n}()}).call(this)},{"../options":63,"es6-promise":238}],71:[function(t,e,n){(function(){var T,S,E,O,P,N,M,D=[].indexOf;S=t("./create-columns"),P=t("./is-key-field"),E=t("./get-replaced-test"),T=t("../formatting"),N=function(e){return function(t){return!e.findWhere({formatter:t})}},M=function(n,i){return function(t){var e;return e=n(t),i(e)?e:null}},O=function(t){var e,n,i,r,s;for(r=[],e=n=0,i=t.length;n<i;e=++n)s=t[e],r.push(s.index=e);return r},e.exports=function(k,x){return k.service.fetchClassKeys().then(function(t){var r,s,e,n,i,o,a,l,u,c,h,f,d,p,g,m,v,y,_,b,w,C;for(u=P(t),w={},e={},i=M(T.getFormatter,N(x)),a=0,h=(s=S(k)).length;a<h;a++)if((r=s[a]).path.isAttribute()&&(n=i(r.path)))for(r.isFormatted=!0,r.formatter=n,v=r.path.getParent(),l=0,f=(_=null!=(y=n.replaces)?y:[]).length;l<f;l++)null==w[C=v+"."+_[l]]&&(w[C]=r),0<=D.call(k.views,C)&&r.replaces.push(k.makePath(C));for(c=0,d=s.length;c<d;c++)for(g=0,p=(b=(r=s[c]).replaces).length;g<p;g++)e[b[g]]=r;return o=E(w,e),m=function(){var t,e,n,i;for(i=[],e=0,t=s.length;e<t;e++)r=s[e],o(r)||(r.isFormatted&&(n=r.path,D.call(r.replaces,n)<0&&r.replaces.push(r.path),(u(r.path)||1<r.replaces.length)&&(r.path=r.path.getParent())),i.push(r));return i}(),O(m),m})}}).call(this)},{"../formatting":13,"./create-columns":78,"./get-replaced-test":85,"./is-key-field":89}],72:[function(t,e,n){(function(){e.exports=function(t,e){var n,i,r,s,o,a,l,u,c,h,f,d,p,g;for(g={},s=0,a=t.length;s<a;s++)if(null!=(null!=(f=(n=t[s]).formatter)?f.replaces:void 0)&&(u=n.model.get("node").toString(),c=(i=n.model.get("column")).toString(),null!=e&&i.isAttribute()&&1<n.formatter.replaces.length&&(r=e.indexOf(e.get(c)),e.remove(c),h=i.getParent(),e.add(h,{at:r}).set({replaces:n.formatter.replaces.map(function(t){return h.append(t)})})),!g[c]))for(o=0,l=(d=n.formatter.replaces.map(function(t){return u+"."+t})).length;o<l;o++)(p=d[o])!==c&&(g[p]=!0,null!=e&&e.remove(p));return g}}).call(this)},{}],73:[function(t,e,n){(function(){var p,g,m=[].indexOf;p=function(t,e,n){var i,r,s,o,a;if(!(r=t.getOuterJoin(e))||r===n)return null;for(s=t.makePath(r),i=s.isCollection()?r:null,s=s.getParent();s&&!s.isRoot();)o=t.getOuterJoin(s),a=void 0,null!=o&&(a=t.makePath(o)),(null!=a?a.isCollection():void 0)&&o!==n&&(i=o),s=null!=a?a.getParent():void 0;return i},g=function(t,e){return p(t,e,null)},e.exports=function(e){var t,n,i,r,s,o,a,l,u,c,h,f,d;for(f=[],r={},s=0,a=(h=e.views).length;s<a;s++)if(!r[d=h[s]])if(c=g(e,d)){for(t=e.views.filter(function(t){return c===g(e,t)}),i={column:c,view:[]},o=0,l=t.length;o<l;o++)n=t[o],u=p(e,n,c),r[n]=i,u?0<=m.call(i.view,u)||i.view.push(u):i.view.push(n);f.push(r[c]=i)}else f.push(r[d]={column:d});return f}}).call(this)},{}],74:[function(t,e,n){(function(){n.bool=function(t){return!!t}}).call(this)},{}],75:[function(t,n,e){(function(){var s,o,e,a,i,l;l=t("underscore"),i=t("../models/object-store"),e=t("../models/nested-table"),s=t("../models/cell"),a=t("../models/null-object"),o=t("../models/fast-path-object"),n.exports=function(){function n(t,e){_classCallCheck2(this,n),this.itemModels=new i(t.root,e)}return _createClass2(n,[{key:"getCreator",value:function(n){var i,r=this;if(!n)throw new Error("No query");return i=function(t){var e;return e=n.makePath(t.column),l.has(t,"rows")?r._make_sub_table_model(t,e,i):r._make_simple_cell_model(t,e)}}},{key:"_make_sub_table_model",value:function(r,t,s){var o;return new e(l.extend({},r,{node:t,column:t,rows:function(){var t,e,n,i;for(i=[],t=0,e=(n=r.rows).length;t<e;t++)o=n[t],i.push(o.map(function(t){return s(t)}));return i}()}))}},{key:"_make_simple_cell_model",value:function(t,e){var n,i,r;return r=e.getParent(),i=e.end.name,n=null!=t.id?this.itemModels.get(t,i):null==t.class?new a(r.getType().name,i):new o(t,i),new s({entity:n,node:r,column:e,field:i,value:t.value})}},{key:"destroy",value:function(){var t;return null!=(t=this.itemModels)&&t.destroy(),delete this.itemModels,this}}]),n}()}).call(this)},{"../models/cell":37,"../models/fast-path-object":43,"../models/nested-table":48,"../models/null-object":49,"../models/object-store":51,underscore:262}],76:[function(t,e,n){(function(){var s;s=t("underscore"),n.createChild=function(t,e){var n,i,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return n=(null!=(i=e.prototype.parameters)?i:[]).concat(e.prototype.optionalParameters),new e(s.extend(s.pick(t,n),r))}}).call(this)},{underscore:262}],77:[function(t,e,r){(function(){var n,i;n={},i=function(t){return t.service.root+":"+t.service.token+":"+t.toXML()},r.count=function(t){var e;return null!=n[e=i(t)]?n[e]:n[e]=t.count()},r.clearCache=function(){return n={}}}).call(this)},{}],78:[function(e,n,t){(function(){var i,t;i=e("./longest-common-prefix"),t=e("./calculate-row-template"),n.exports=function(a){return t(a).map(function(r){var s,t,e,n,o;return e=null!=r.view?(s=i(r.view),t=a.makePath(s),n=function(){var t,e,n,i;for(i=[],t=0,e=(n=r.view).length;t<e;t++)o=n[t],i.push(a.makePath(o));return i}(),function(){var t,e,n,i;for(i=[],t=0,e=(n=a.views).length;t<e;t++)0===(o=n[t]).indexOf(s)&&i.push(a.makePath(o));return i}()):(t=a.makePath(r.column),n=null,[]),{path:t,subview:n,replaces:e}})}}).call(this)},{"./calculate-row-template":73,"./longest-common-prefix":91}],79:[function(t,e,n){(function(){var n;n=t("underscore"),e.exports=function(){function e(t){_classCallCheck2(this,e),this.definitions=t}return _createClass2(e,[{key:"activeClasses",value:function(){var t,e;for(t in e=[],this.definitions)n.result(this.definitions,t)&&e.push(t);return e}},{key:"toString",value:function(){return this.activeClasses().join(" ")}}]),e}()}).call(this)},{underscore:262}],80:[function(t,e,n){(function(){var r,s,o;r=t("./fetch-missing-data"),s=t("./has-fields"),o=function(e,t){return t.then(function(t){return e.set(t)})},e.exports=function(t,e){var n,i;return i=r(t,e),n=s(e),function(t,e){return n(t)||o(t,i(e,t.get("id"))),t.toJSON()}}}).call(this)},{"./fetch-missing-data":82,"./has-fields":87}],81:[function(t,e,i){(function(){var e,n;n=t("underscore"),e=t("backbone"),i.ignore=function(t){return null!=t&&t.preventDefault(),null!=t&&t.stopPropagation(),!1},i.Bus=function(){var t=function(){function t(){_classCallCheck2(this,t)}return _createClass2(t,[{key:"destroy",value:function(){return this.stopListening(),this.off()}}]),t}();return n.extend(t.prototype,e.Events),t}.call(this)}).call(this)},{backbone:235,underscore:262}],82:[function(t,e,n){(function(){var o,a,l,s;o=t("underscore"),a=function(e){return function(t){return t?o.object(o.zip(e,t)):{}}},l=function(i){var r;return o.flatten(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)~(r=i[t]).indexOf(".")&&n.push(s(r));return n}())},s=function(t){var e,n,i,r,s;for(s=[],e=n=1,r=(i=t.split(".")).length;1<=r?n<r:r<n;e=1<=r?++n:--n)s.push(i.slice(0,e).join("."));return s},e.exports=function(i,r){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return function(t,e){var n;return n=t.root+"#"+e,null!=s[n]?s[n]:s[n]=t.rows({select:r,from:i,where:{id:e},joins:l(r)}).then(o.compose(a(r),o.head))}}}).call(this)},{underscore:262}],83:[function(t,e,n){(function(){var a,l=[].indexOf;e.exports=a=function(e,n){var t,i,r,s,o;return o=function(){var t;for(r in t=[],e)null!=(i=e[r])&&l.call(n,r)<0&&t.push(i);return t}(),t=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)null==(s=o[t]).objectId&&n.push(s);return n}(),function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)null!=(s=o[t]).objectId&&n.push(s);return n}().reduce(function(t,e){return t.concat(a(e,n))},t)}}).call(this)},{}],84:[function(n,i,t){(function(){var f,t,d,p,g,m,v,y,_=[].indexOf;d=n("underscore");var e=n("es6-promise");t=e.Promise,v=d.compose(d.uniq,d.flatten),p=function(t){var e;return null!=(null!=(e=t.getType().fields)?e.organism:void 0)},m=function(t){return"Organism"===t.getEndClass().name||p(t)},g=function(t){var e;return"Organism"===t.getEndClass().name&&("name"===(e=t.end.name)||"shortName"===e)},y=function(t){return null!=t&&/\*/.test(t)},f=["=","==","ONE OF"],i.exports=function(h){return new t(function(t,e){var s,n,i,r,o,a,l,u,c;return i=d.compose(t,v),l=function(){return t([])},n=function(){var t,e,n,i,r;for(r=[],t=0,e=(n=h.constraints).length;t<e;t++)i=(s=n[t]).op,0<=_.call(f,i)&&!y(s.value)&&g(h.makePath(s.path))&&r.push(s.value||s.values);return r}(),u=function(){var t,e,n,i;for(i=[],t=0,e=(n=h.constraints).length;t<e;t++)"LOOKUP"===(s=n[t]).op&&null!=s.extraValue&&p(h.makePath(s.path))&&i.push(s.extraValue);return i}(),(r=d.union(n,u)).length?i(r):(a=function(){var t,e,n,i;for(i=[],t=0,e=(n=h.getViewNodes()).length;t<e;t++)o=n[t],m(o)&&(c="Organism"===o.getType().name?o:o.append("organism"),i.push(c.append("shortName")));return i}()).length?h.clone().select(d.uniq(a,String)).orderBy([]).rows().then(i,l):l()})}}).call(this)},{"es6-promise":238,underscore:262}],85:[function(e,n,t){(function(){var s,o,t=e("../formatting");o=t.shouldFormat,s=function(t){return t.isAttribute()&&"id"===t.end.name},n.exports=function(i,r){return function(t){var e,n;if(null==t)throw new Error("no column");return e=t.path,!!(o(e)||e in r)&&(n=i[e],s(e)&&null==n&&(n=i[e.getParent()]),n&&null!=n.formatter&&t!==n)}}}).call(this)},{"../formatting":13}],86:[function(n,i,t){(function(){var t,e=n("es6-promise");t=e.Promise,i.exports=function(a){return new t(function(t,e){var n,i,r,s,o;return o=a.getViewNodes(),t((n=(i=a.model).findCommonType(function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)r=o[t],n.push(r.getType());return n}()))?i.getPathInfo(n).getDisplayName():null!=(s=i.name)?s:"")})}}).call(this)},{"es6-promise":238}],87:[function(t,e,n){(function(){e.exports=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return function(e){return t.every(function(t){return e.has(t)})}}}).call(this)},{}],88:[function(t,e,n){(function(){e.exports=function(t){var e,n,i,r,s,o,a,l;for(i=1,e=[],n=0,o=(l=t.split(/></)).length;n<o;n++)a=l[n],/>$/.test(a)||(a+=">"),/^</.test(a)||(a="<"+a),r=/^<\/\w+\s*>/.test(a),s=!(/\/>$/.test(a)||!r&&/<\/\w+>$/.test(a)||r),r&&i--,e.push(new Array(i).join("  ")+a),s&&i++;return e.join("\n")}}).call(this)},{}],89:[function(t,e,n){(function(){var a=[].indexOf;e.exports=function(o){return function(t){var e,n,i,r,s;return!!t.isAttribute()&&(s=t.getParent().getType().name,e=t.end.name,n=null!=(i=null!=o?o[s]:void 0)?i:[],r=s+"."+e,0<=a.call(n,r))}}}).call(this)},{}],90:[function(e,o,t){(function(s){(function(){var n,i,r;n=e("jquery");var t=e("es6-promise");r=t.Promise,i=e("../options"),o.exports=function(t,e){return s[e]?r.resolve(s[e]):r.resolve(n.ajax({url:i.get(t),cache:!0,dataType:"script"})).then(function(){return s[e]})}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../options":63,"es6-promise":238,jquery:256}],91:[function(t,e,n){(function(){var n,c;n=t("underscore"),c=function(t){return function(e){return n.all(t,function(t){return 0===t.indexOf(e)})}},e.exports=function(t){var e,n,i,r,s,o,a=_toArray(t),l=a[0],u=a.slice(1);if(null==l)throw new Error("Empty list");if(!u.length)return l;for(r=l.split(/\./),o=c(u),s=_slicedToArray(r,1)[0],e=0,n=r.length;e<n;e++)o(i=s+"."+r[e])&&(s=i);return s}}).call(this)},{underscore:262}],92:[function(t,e,n){(function(){n.href=function(t,e,n){return t+"?"+[["subject",e],["body",n]].map(function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1];return n+"="+encodeURIComponent(i)}).join("&")}}).call(this)},{}],93:[function(t,e,n){(function(){e.exports=function(t){return t.map(function(t){return"change:"+t}).join(" ")}}).call(this)},{}],94:[function(t,e,n){(function(){e.exports=function(t,e,n){var i,r,s,o,a;for(o in(r=document.createElement("form")).method="POST",r.style.display="none",r.action=t,r.target=e+(new Date).getTime(),n)(s=document.createElement("input")).type="hidden",s.name=o,s.value=n[o],r.appendChild(s);(i=document.querySelector("body")).appendChild(r),a=window.open("somenonexistantpathtonowhere",e),r.submit(),i.removeChild(r),a.close()}}).call(this)},{}],95:[function(e,n,t){(function(){var t,r;t=e("underscore"),r=function(i){var r;return t.object(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r.split("=").map(decodeURIComponent));return n}())},n.exports=function(t){var e,n,i=_slicedToArray(t.split("?"),2);return e=i[0],n=i[1].split("&"),{URL:e,params:r(n)}}}).call(this)},{underscore:262}],96:[function(t,e,n){(function(){var l,u;l=t("underscore"),u=function(t,e){return 0<=t.toLowerCase().indexOf(e)},e.exports=function(a){return function(t,e){var i,r,n,s,o;return r=null!=(n=null!=t&&null!=(s=t.toLowerCase())?s.split(" "):void 0)?n:[],i=function(t){var e=t.path,n=t.item,i=t.name;return l.all(r,function(t){return null==e&&(e=n),u(e.toString(),t)||u(i,t)})},null!=a.each?e(a.map(function(t){return t.toJSON()}).filter(i)):e(function(){var t,e,n;for(n=[],t=0,e=a.length;t<e;t++)o=a[t],i(o)&&n.push(o);return n}())}}}).call(this)},{underscore:262}],97:[function(e,i,t){(function(){var n,a,u,l;u=e("underscore");var t=e("es6-promise");a=t.Promise,n={},l=function(l){return function(t){var e,n,i,r,s,o;for(o=[],e=0,n=(s=u.zip(l,t)).length;e<n;e++){var a=_slicedToArray(s[e],2);r=a[0],i=a[1],o.push({path:r,name:i})}return o}},i.exports=function(r,s){var t,e,o,i;return(t=r.service.root+":"+r.root+":"+s)in n?n[t]:(i=(i=function(){var t,e,n,i;for(i=[],t=0,e=(n=r.getPossiblePaths(s)).length;t<e;t++)o=n[t],i.push(r.makePath(o));return i}()).filter(function(t){var e;return!("id"===(null!=(e=t.end)?e.name:void 0))}),e=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(o.getDisplayName());return n}(),null!=n[t]?n[t]:n[t]=a.all(e).then(l(i)))}}).call(this)},{"es6-promise":238,underscore:262}],98:[function(t,e,n){(function(){var i;i=function(){function e(t){_classCallCheck2(this,e),this.wrapped=t,this.root=this.wrapped.root,this._foundById={},this._counts={}}return _createClass2(e,[{key:"fetchModel",value:function(){return this.wrapped.fetchModel()}},{key:"findById",value:function(t,e,n){var i,r;return null!=(i=this._foundById)[r=t+":"+e+":"+n]?i[r]:i[r]=this.wrapped.findById(t,e,n)}},{key:"count",value:function(t){var e,n;return null!=(e=this._counts)[n=JSON.stringify(t)]?e[n]:e[n]=this.wrapped.count(t)}},{key:"destroy",value:function(){return this._foundById={},this._counts={},delete this.wrapped}}]),e}(),e.exports=function(){function n(t,e){_classCallCheck2(this,n),this.Preview=e,this.service=new i(t)}return _createClass2(n,[{key:"get",value:function(t){return new this.Preview({service:this.service,model:{types:t.get("classes"),id:t.get("id")}})}},{key:"destroy",value:function(){return this.service.destroy(),delete this.service}}]),n}()}).call(this)},{}],99:[function(t,e,n){(function(){n.fromPairs=function(i){var r;return function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r.map(encodeURIComponent).join("="));return n}().join("&")}}).call(this)},{}],100:[function(r,s,t){(function(){var o,t,e,n;r("jquery");var i=r("es6-promise");t=i.Promise,o=r("../options"),n=r("./load-resource"),e=function(){return n("Destination.Dropbox.Library","Dropbox")},s.exports=function(i,r,s){return e().then(function(n){return new t(function(t,e){return n.appKey=o.get("auth.dropbox"),n.save({files:[{url:i,filename:r}],success:t,progress:s,cancel:e,error:e})})})}}).call(this)},{"../options":63,"./load-resource":90,"es6-promise":238,jquery:256}],101:[function(n,i,t){(function(){var _,b,u,w,c,h,f,d,p,C,t;w=n("underscore");var e=n("es6-promise");u=e.Promise,b=n("../options"),_=n("../messages"),h=n("./get-organisms"),c=n("./branding"),d=n("./get-result-class"),p=n("./open-window-with-post"),C=n("./parse-url"),i.exports=t=function(t,e,n){var i,r,s,o,a,l;return l=null!=(a=(i=b.get("Destination.Galaxy")).Current)?a:i.Main,/tool_runner$/.test(l)||(l+="/tool_runner"),r=c(this.query.service),o=d(this.query),s=h(this.query),u.all([o,s,r]).then(f(t,this.query,this.model.format.ext)).then(w.partial(p,l,"Upload"))},f=function(m,v,y){return function(t){var e,r,n,i,s,o,a,l,u,c,h=_slicedToArray(t,3),f=h[0],d=h[1],p=h[2],g=C(m);return e=g.URL,u=g.params,o=function(){var t,e,n,i;for(i=[],t=0,e=(n=v.constraints).length;t<e;t++)"IN"===(r=n[t]).op&&i.push(r.value);return i}(),i="tsv"===y?"tabular":y,n=window.location.toString().replace(/\?.*$/,""),c=b.get("Destination.Galaxy.Tool"),a=_.getText("export.galaxy.name",{cls:f,orgs:d,branding:p}),s=_.getText("export.galaxy.info",{query:v,lists:o,orgs:d,currentLocation:n}),null!=d&&(l=d.join(", ")),w.extend(u,{tool_id:c,URL:e,name:a,info:s,data_type:i,organism:l,URL_method:"post"})}},t.after=function(){var e;return(e=b.get("Destination.Galaxy")).Current&&e.Save?this.query.service.whoami().then(function(t){if(t.preferences["galaxy-url"]!==e.Current)return t.setPreference("galaxy-url",e.Current)}):u.resolve(null)}}).call(this)},{"../messages":16,"../options":63,"./branding":70,"./get-organisms":84,"./get-result-class":86,"./open-window-with-post":94,"./parse-url":95,"es6-promise":238,underscore:262}],102:[function(a,l,t){(function(){var r,t,s,o,e;a("underscore");var n=a("es6-promise");t=n.Promise,r=a("../options");var i=a("./query-string");s=i.fromPairs,o=function(t,e){var n,i;return n=r.get("Destination.GenomeSpace"),i=s([["uploadUrl",t],["fileName",e]]),n.Upload+"?"+i},e=function(i,r){return new t(function(e,n){var t;return(t=window.open(o(i,r))).setCallbackOnGSUploadComplete=function(t){return e(t)},t.setCallbackOnGSUploadError=function(t){return console.log("GSERR",arguments),n(new Error("Could not save to "+t))},t.addEventListener("unload",function(){return n(new Error("Upload cancelled"))}),t.focus()})},l.exports=e}).call(this)},{"../options":63,"./query-string":99,"es6-promise":238,underscore:262}],103:[function(d,p,t){(function(){var i,t,n,e,r,u,s,o,a,l,c,h;i=d("jquery"),a=d("underscore");var f=d("es6-promise");s=f.Promise,u=d("../options"),c=d("./load-resource"),l=null,n="\r\n--"+(t="-------314159265358979323846")+"\r\n",o={path:"/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'}},h=function(){return null!=l?l:l=c("Destination.Drive.Library","gapi").then(function(t){return new e(t)})},p.exports=function(e,n,i){return h().then(function(t){return i(1),t.upload(e,n)})},r=function(){var t=function(){function e(t){_classCallCheck2(this,e),this.title=t}return _createClass2(e,[{key:"toString",value:function(){return JSON.stringify({title:this.title,mimetype:this.mimetype})}}]),e}();return t.prototype.mimetype="text/plain",t}.call(this),e=function(){function e(t){if(_classCallCheck2(this,e),this.gapi=t,!this.gapi)throw new Error("No api");if(!u.get("auth.drive"))throw new Error("No configuration available for Google Drive");console.log(this.gapi)}return _createClass2(e,[{key:"authorize",value:function(){var l=this;return new s(function(e,n){var t,i,r,s,o,a;r=l.gapi,a=null,o={client_id:u.get("auth.drive"),scope:"https://www.googleapis.com/auth/drive.file",immediate:!1},s=function(){return r.auth.authorize(o,function(t){return null==t?n(new Error("Not authorized")):t.error?n(new Error(t.error)):e()})},t=function(){return clearTimeout(a),n(new Error("timed out"))},(i=function(){var t;return clearTimeout(a),(null!=(t=r.auth)?t.authorize:void 0)?s():a=setTimeout(i,50)})(),setTimeout(t,5e3)})}},{key:"loadClient",value:function(){var n=this;return new s(function(t,e){return n.gapi.client.load("drive","v2",t)})}},{key:"makeRequestBody",value:function(t,e){return n+"Content-Type: application/json\r\n\r\n"+String(t)+n+"Content-Type: text/tab-separated-values\r\n\r\n"+e+"\r\n---------314159265358979323846--"}},{key:"makeRequest",value:function(t){return this.gapi.client.request(a.extend({body:t},o))}},{key:"upload",value:function(t,e){var n=this;return this.authorize().then(function(){return n.loadClient()}).then(function(){return s.resolve(i.get(t))}).then(function(t){return n.makeRequestBody(new r(e),t)}).then(function(t){return n.makeRequest(t)}).then(function(t){return t.result.alternateLink})}}]),e}()}).call(this)},{"../options":63,"./load-resource":90,"es6-promise":238,jquery:256,underscore:262}],104:[function(e,n,t){(function(){var r,s,o,a,t=e("underscore");s=t.compose,o=t.escape,a=e("./ensure-required-data"),r=function(r){return function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return r.apply(void 0,n)}},n.exports=function(t,e,n,i){return{classes:i,target:t,replaces:e,call:r(s(o,n,a(t,e)))}}}).call(this)},{"./ensure-required-data":80,underscore:262}],105:[function(t,e,n){(function(){var s;s={ASC:"DESC",DESC:"ASC",NONE:"ASC"},e.exports=function(t,e){var n,i,r;return n=null!=(r=t.getSortDirection(e))?r:"NONE",i=s[n],t.orderBy([{path:e,direction:i}])}}).call(this)},{}],106:[function(t,e,n){(function(){e.exports=function(t){if(null!=t)return(t=t.replace(/\n\s*\n/g,"\n\n")).replace(/(^\s*|\s*$)/g,"")}}).call(this)},{}],107:[function(e,n,t){(function(){var r,s,o,a,t,l;a=e("underscore"),o=e("../options"),s=e("../messages"),r=e("../icons"),t=e("../templates/mustache-settings"),l=a.template("<span class=\"alert alert-info\">\n  {{{ icons.icon('Info') }}}\n  {{ messages.getText('conbuilder.TooManySuggestions') }}\n  There are {{ extra }} values we could not include.\n</span>\n",t),n.exports=function(){var t=function(){function i(t,e){var n;_classCallCheck2(this,i),this.suggest=this.suggest.bind(this),this.suggestions=t,this.total=e,n=o.get("MaxSuggestions"),this.total>n&&(this.tooMany=l({icons:r,messages:s,extra:total-n}))}return _createClass2(i,[{key:"suggest",value:function(t,e){var r,n,i,s,o;return null==t||""===t?e(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.suggestions.slice(0,10)).length;t<e;t++)o=n[t],i.push(o);return i}.call(this)):(n=null!=(i=null!=t&&null!=(s=t.toLowerCase())?s.split(" "):void 0)?i:[],r=function(t){var e=t.item;return null==e&&(e=""),a.all(n,function(t){return 0<=e.toLowerCase().indexOf(t)})},e(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.suggestions).length;t<e;t++)o=n[t],r(o)&&i.push(o);return i}.call(this)))}}]),i}();return t.prototype.tooMany="<span></span>",t}.call(this)}).call(this)},{"../icons":14,"../messages":16,"../options":63,"../templates/mustache-settings":69,underscore:262}],108:[function(e,t,o){(function(){var n,r,u,c,t,s,i=[].indexOf;t=e("es6-promise").Promise,u=e("../options"),c=e("../models/page"),r={},n=t.resolve(!0),o.getCache=function(t){var e,n,i;return i=t.toXML(),n=t.service.root,null!=r[e=n+":"+i]?r[e]:r[e]=new s(t)},o.onListChange=function(t){var e,n;for(n in r)e=r[n],0<=i.call(listNamesFor(e.query),t)&&e.dropRows();return!1},s=function(){var t=function(){function e(t){_classCallCheck2(this,e),this.query=t.clone()}return _createClass2(e,[{key:"toString",value:function(){var t;return(null!=(t=this.rows)?t.length:void 0)?"ResultCache("+this.offset+" .. "+(this.offset+this.rows.length)+")":"ResultCache(EMPTY)"}},{key:"fetchRows",value:function(t,e){var n,i=this;return n=new c(0<arguments.length&&void 0!==t?t:0,1<arguments.length&&void 0!==e?e:null),this.updateCache(n).then(function(){return i.getRows(n)})}},{key:"updateCache",value:function(t){var e;return this.contains(t)?n:(e=this.getRequestPage(t),this.query.tableRows({start:e.start,size:e.size}).then(this.addRowsToCache(e)))}},{key:"contains",value:function(t){var e,n;return!(null==(e=this.rows)||!e.length)&&(n=this.offset+e.length,!t.all()&&t.start>=this.offset&&t.end()<=n)}},{key:"dropRows",value:function(){return this.rows=null,this.offset=0}},{key:"getRequestPage",value:function(t){var e,n,i,r,s,o,a,l;return e=this.rows,n=u.get("TableResults.CacheFactor"),r=u.get("TableResults.RequestLimit"),o=t.all()?t.size:t.size*n,null==e?new c(t.start,o):(l=this.offset+e.length,a=t.all()||t.start>=this.offset?t.start:Math.max(0,t.start-o),(s=new c(a,o)).isBefore(this.offset)?(i=s.rightGap(this.offset))+s.size>r?this.dropRows():s.size+=i:s.isAfter(l)&&((i=s.leftGap(l))+s.size>r?this.dropRows():(s.size+=i,s.start=l)),s)}},{key:"addRowsToCache",value:function(r){var s=this;return function(t){var e,n,i;if(e=s.rows,n=s.offset,null!=e){if(i=s.offset+e.length,r.start<n){if(r.end()<n)throw new Error("Cannot add "+r+" to "+s+" - non contiguous");e=r.all()||r.end()>i?t.slice():t.concat(e.slice(r.end()-n))}else{if(r.start>i)throw new Error("Cannot add "+r+" to "+s+" - non contiguous");r.all()||i<r.end()?e=e.slice(0,r.start-n).concat(t):console.error("Useless cache add - we already had these rows: "+r)}n=Math.min(n,r.start)}else e=t.slice(),n=r.start;return s.offset=n,s.rows=e,!0}}},{key:"getRows",value:function(t){var e,n=t.start,i=t.size;if(null==this.rows)throw new Error("Cache has not been updated");return(e=this.rows.slice()).splice(0,n-this.offset),null!=i&&0<i&&e.splice(i,e.length),e}}]),e}();return t.prototype.offset=0,t.prototype.rows=null,t}.call(this),o.ResultCache=s}).call(this)},{"../models/page":54,"../options":63,"es6-promise":238}],109:[function(t,e,n){(function(){e.exports=function(e){return e.getDisplayName().then(function(t){return{path:e.toString(),name:t}})}}).call(this)},{}],110:[function(e,l,t){(function(a){(function(){var n,i,r,s,o=[].indexOf,t=e("es6-promise");r=t.Promise,n=e("../cdn"),i={},s=function(t,e){return 0<=o.call(a,e)?r.resolve(a[e]):n.load(t).then(function(){return a[e]},console.error.bind(console))},l.exports=function(t,e,n){return(null!=i[t]?i[t]:i[t]=s(t,e)).then(n)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../cdn":1,"es6-promise":238}],111:[function(t,e,n){e.exports=""},{}],112:[function(g,m,t){(function(){var e,n,i,r,s,o,a,l,u,c,h,f,d,p=[].indexOf;h=g("underscore"),g("jquery"),g("es6-promise").Promise;var t=g("imjs");l=t.Query,a=t.Model,r=g("../core-model"),o=g("../messages"),u=g("../templates"),s=g("../icons"),g("../options"),c=g("../core-view"),i=g("./constraint-summary"),e=g("./constraint-editor"),o.setWithPrefix("conbuilder",{Add:"Add constraint",Update:"Update",Cancel:"Cancel",Remove:"Remove",EditCon:"Edit filter",NotEditable:"This constraint is not editable",ValuePlaceholder:"David*",ExtraPlaceholder:"Wernham-Hogg",ExtraLabel:"in",IsA:"is a",NoValue:"No value selected. Please enter a value.",NoOperator:"No operator selected. Please choose an operator.",BadLoop:"The selected path is not in the query.",NaN:"The value provided is not a number.",Duplicate:"This constraint is already on the query",TooManySuggestions:"We cannot show you all the possible values",NoSuitableLists:"No lists of this type are available",NoSuitableLoops:"No suitable loop paths were found"}),f=function(t,e){var n,i;if(!t&&!e)return!0;if(!t||!e)return!1;var r=_slicedToArray(h.sortBy([t,e],function(t){return t.length}),2);return i=r[0],n=r[1],h.all(n,function(t){return 0<=p.call(i,t)})},d=function(r,s){var t,o,e,n,i,a,l,u;if(!r||!s)return r===s;for(i=!0,t=0,n=(e=h.union.apply(h,[r,s].map(h.keys))).length;t<n;t++){o=e[t];var c=_slicedToArray(function(){var t,e,n,i;for(i=[],t=0,e=(n=[r,s]).length;t<e;t++)u=n[t],i.push(u[o]);return i}(),2);a=c[0],l=c[1],i&&(i=h.isArray(a)?f(a,l):a===l)}return i},n=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,r),_createClass2(t,[{key:"defaults",value:function(){return{code:null}}},{key:"isTypeConstraint",value:function(){return null==this.get("op")}}]),t}(),m.exports=function(){var r,t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,c),_createClass2(t,[{key:"initialize",value:function(){var e;_get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.model.set(this.constraint),this.state.set({editing:!1}),this.listenTo(this.state,"change:editing",this.toggleEditor),this.listenTo(this.model,"change:type",this.setTypeName),this.listenTo(this.model,"change:path",this.setDisplayName),this.listenTo(o,"change",this.reRender),this.listenTo(this.model,"cancel",this.cancelEditing),this.listenTo(this.model,"apply",this.applyChanges);try{this.model.set({path:this.query.makePath(this.constraint.path)})}catch(t){e=t,this.model.set({error:e}),this.state.set({editing:!0})}return this.setTypeName()}},{key:"setDisplayName",value:function(){var n=this;return this.model.get("path").getDisplayName(function(t,e){if(n.model.set({error:t,displayName:e}),null!=t)return n.listenToOnce(n.query,"change:constraints",function(){return n.model.set({path:n.query.getPathInfo(n.constraint.path)}),n.setDisplayName()})})}},{key:"cancelEditing",value:function(){return this.state.set({editing:!1}),this.model.set(h.omit(this.constraint,"path")),this.model.set({error:null})}},{key:"toggleEditing",value:function(){return this.state.get("editing")?this.cancelEditing():this.state.set({editing:!0})}},{key:"setTypeName",value:function(){var e,n,i=this;if(null==(n=this.model.get("type")))return this.model.unset("typeName");try{return this.query.model.makePath(n).getDisplayName(function(t,e){return i.model.set({error:t,typeName:e})})}catch(t){return e=t,this.model.set({error:e,typeName:n})}}},{key:"events",value:function(){return{"click .im-edit":"toggleEditing","click .im-remove-constraint":"removeConstraint"}}},{key:"getLoopProblem",value:function(t){return function(){try{return this.query.getPathInfo(t.value),null}catch(t){return t,"BadLoop"}}.call(this)}},{key:"getValueProblem",value:function(t){var e,n,i;return e=t.path,t.op,null==(i=t.value)||r.test(i)?"NoValue":(n=e.getType(),0<=p.call(a.NUMERIC_TYPES,n)&&h.isNaN(1*i)?"NaN":null)}},{key:"getProblem",value:function(t){var e,n;return null!=t.type?null:!t.op||r.test(t.op)?"NoOperator":!t.path.isReference()||"="!==(e=t.op)&&"!="!==e?(n=t.op,0<=p.call(l.ATTRIBUTE_VALUE_OPS.concat(l.REFERENCE_OPS),n)?this.getValueProblem(t):this.isDuplicate(t)?"Duplicate":null):this.getLoopProblem(t)}},{key:"isDuplicate",value:function(t){return h.any(this.query.constraints,h.partial(d,t))}},{key:"setError",value:function(t){var e;return e=o.get("conbuilder."+t),this.model.set({error:e})}},{key:"applyChanges",value:function(t){var e;return null!=(e=this.getProblem(t))?this.setError(e):(this.state.set({editing:!1}),this.removeConstraint(null,!0),null==t.values||t.values.length?(t.path=t.path.toString(),this.query.addConstraint(t),this.constraint=t,this.model.unset("new")):this.query.trigger("change:constraints"))}},{key:"removeConstraint",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e;if(null!=t&&t.preventDefault(),null!=t&&t.stopPropagation(),this.model.get("new")||this.query.removeConstraint(this.constraint,n),null!=t)return this.remove()}},{key:"getData",value:function(){return{icons:s,messages:o,con:this.model.toJSON()}}},{key:"toggleEditor",value:function(){var t;return this.state.get("editing")&&this.rendered?(t={model:this.model,query:this.query,buttonDelegate:this.buttonDelegate},this.renderChild("editor",new e(t),this.$(".im-constraint-editor"))):this.removeChild("editor")}},{key:"renderSummary",value:function(){var t;return t={model:this.model},this.renderChild("summary",new i(t),this.$(".im-con-overview"))}},{key:"postRender",value:function(){return this.renderSummary(),this.toggleEditor(),this.$("[title]").tooltip()}}]),t}();return t.prototype.Model=n,t.prototype.tagName="div",t.prototype.className="im-constraint row-fluid",t.prototype.parameters=["query","constraint"],t.prototype.optionalParameters=["buttonDelegate"],r=/^\s*$/,t.prototype.template=u.template("active-constraint",{variable:"data"}),t}.call(this)}).call(this)},{"../core-model":2,"../core-view":3,"../icons":14,"../messages":16,"../options":63,"../templates":67,"./constraint-editor":129,"./constraint-summary":130,"es6-promise":238,imjs:247,jquery:256,underscore:262}],113:[function(T,S,t){(function(){var f,e,n,d,i,s,o,a,u,l,c,h,r,p,g,m,v,y,_,b=[].indexOf;f=T("jquery"),p=T("underscore");var t=T("es6-promise");l=t.Promise,s=T("../messages"),r=T("../templates"),e=T("../core-view"),u=T("../options"),a=T("../core/nested-model"),g=T("../utils/branding");var w=T("../patterns");i=w.IS_BLANK,n=T("../mixins/has-typeaheads"),h=T("../utils/suggestion-source");var C=T("imjs"),k=C.Model;d=k.INTEGRAL_TYPES,o=k.NUMERIC_TYPES,c=C.Query,y=r.template("attribute_value_select"),_=function(t){return String(t).replace(/^\s+/,"").replace(/\s+$/,"")},v=function(t){return 1*_(t)};var x=T("../templates/helpers");m=x.numToString,s.set({"constraintvalue.NoValues":"There are no possible values. This query returns no results","constraintvalue.OneValue":"There is only one possible value: <%- value %>. You might want to remove this constraint"}),S.exports=function(){var t=function(){function r(){return _classCallCheck2(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,e),_createClass2(r,[{key:"getData",value:function(){return p.extend(this.getBaseData(),{messages:s,con:this.model.toJSON()})}},{key:"initialize",value:function(t){var e,n=this,i=t.query;if(this.query=i,_get(_getPrototypeOf(r.prototype),"initialize",this).call(this),this.sliders=[],this.branding=new a,this.cast=(e=this.model.get("path").getType(),0<=b.call(o,e)?v:_),this.listenTo(s,"change",this.reRender),this.state.set({valuePlaceholder:s.getText("conbuilder.ValuePlaceholder")}),this.listenTo(this.branding,"change:defaults.value",function(){return this.state.set({valuePlaceholder:this.branding.get("defaults.value")})}),null!=this.query)return this.listenTo(this.query,"change:constraints",this.clearCachedData),this.listenTo(this.query,"change:constraints",this.reRender),g(this.query.service).then(function(t){return n.branding.set(t)})}},{key:"modelEvents",value:function(){return{destroy:function(){return this.stopListening()},"change:value":this.onChangeValue,"change:op":this.onChangeOp}}},{key:"stateEvents",value:function(){return{"change:valuePlaceholder":this.reRender}}},{key:"onChangeOp",value:function(){var t;return t=this.model.get("op"),null!=this.model.get("value")&&0<=b.call(c.MULTIVALUE_OPS,t)&&this.model.set({value:null,values:[this.model.get("value")]}),this.reRender()}},{key:"onChangeValue",value:function(){return this.reRender()}},{key:"removeAllChildren",value:function(){return this.removeTypeAheads(),this.removeSliders(),_get(_getPrototypeOf(r.prototype),"removeAllChildren",this).call(this)}},{key:"removeSliders",value:function(){var t,e;for(t=[];e=this.sliders.pop();)try{e.slider("destroy"),t.push(e.remove())}catch(t){}return t}},{key:"events",value:function(){return{"change .im-con-value-attr":"setAttributeValue"}}},{key:"updateInput",value:function(){var t;return(null!=(t=this.lastTypeahead())?t:this.$(".im-con-value-attr")).val(this.model.get("value"))}},{key:"readAttrValue",value:function(){var e,t;e=(null!=(t=this.lastTypeahead())?t:this.$(".im-con-value-attr")).val();try{return null==e||i.test(e)?null:this.cast(e)}catch(t){return t,this.model.set({error:new Error(e+" might not be a legal value for "+this.path)}),e}}},{key:"setAttributeValue",value:function(){return this.model.set({value:this.readAttrValue()})}},{key:"postRender",value:function(){var e=this;return this.provideSuggestions().then(null,function(t){return e.model.set({error:t})}),this.$(".im-con-value-attr").focus()}},{key:"provideSuggestions",value:function(){var r=this;return this.getSuggestions().then(function(t){var e,n=t.stats,i=t.results;return 0===n.uniqueValues?(e=s.getText("constraintvalue.NoValues"),r.model.set({error:{message:e,level:"warning"}})):1===n.uniqueValues?(e=s.getText("constraintvalue.OneValue",{value:i[0].item}),r.model.set({error:{message:e,level:"warning"}})):null!=n.max?r.handleNumericSummary(n):null!=i[0].item?r.handleSummary(i,n.uniqueValues):void 0})}},{key:"clearCachedData",value:function(){return delete this.__suggestions,this.model.unset("error")}},{key:"getSuggestions",value:function(){var r,s,t,o,a,e=this;return null!=this.__suggestions?this.__suggestions:this.__suggestions=e.model.get("path")?(s=e.query.clone(),a=e.model.get("value"),o=String(e.model.get("path")),t=u.get("MaxSuggestions"),s.constraints=function(){var t,e,n,i;for(i=[],t=0,e=(n=s.constraints).length;t<e;t++)(r=n[t]).path===o&&r.value===a||i.push(r);return i}(),s.summarise(o,t)):l.reject(new Error("no path"))}},{key:"replaceInputWithSelect",value:function(t){var e;return this.model.has("value")?null==(e=this.model.get("value"))||p.any(t,function(t){return t.item===e})||t.push({item:e}):this.model.set({value:t[0].item}),this.$el.html(y({Messages:s,items:t,value:e}))}},{key:"handleSummary",value:function(t,e){var n,i,r,s,o,a,l=this;return("="===(o=this.model.get("op"))||"!="===o)&&t.length<u.get("DropdownMax")?this.replaceInputWithSelect(t):(r=this.$(".im-con-value-attr"),s={minLength:0,highlight:!0},n={name:"summary_suggestions",source:(a=new h(t,e)).suggest,displayKey:"item",templates:{footer:a.tooMany}},this.removeTypeAheads(),i=function(t,e){return l.model.set({value:e.item})},this.activateTypeahead(r,s,n,t[0].item,i,function(){return l.setAttributeValue()}))}},{key:"getMarkers",value:function(n,t,i){var e,r,s,o,a,l,u,c;for(c=t-n,s=function(t){var e;return e=t*c+n,i?Math.round(e):e},r=function(t){return Math.round(100*t)},u=[],a=(l=[o=0,.5,1]).length;o<a;o++)e=l[o],u.push({percent:r(e),value:m(s(e))});return u}},{key:"handleNumericSummary",value:function(t){var e,n,i,r,s,o,a,l,u=t.min,c=t.max,h=t.average;return a=this.model.get("path").getType(),l=(s=0<=b.call(d,a))?1:c-u/100,n=s?function(t){return parseInt(t,10)}:parseFloat,i=this.$el,r=this.$("input"),i.append(this.clearer),o=this.getMarkers(u,c,s),this.removeSliders(),r.off("change.slider"),(e=f(this.makeSlider(o))).appendTo(i).slider({min:u,max:c,value:this.model.has("value")?this.model.get("value"):n(h),step:l,slide:function(t,e){return r.val(e.value).change()}}),r.attr({placeholder:n(h)}),i.append(this.clearer),r.on("change.slider",function(t){return e.slider("value",n(r.val()))}),this.sliders.push(e)}},{key:"remove",value:function(){return _get(_getPrototypeOf(r.prototype),"remove",this).call(this),this.removeTypeAheads()}}]),r}();return t.include(n),t.prototype.className="im-attribute-value-controls",t.prototype.template=r.template("attribute_value_controls"),t.prototype.clearer='<div class="" style="clear:both;">',t.prototype.makeSlider=r.template("slider",{variable:"markers"}),t}.call(this)}).call(this)},{"../core-view":3,"../core/nested-model":8,"../messages":16,"../mixins/has-typeaheads":32,"../options":63,"../patterns":64,"../templates":67,"../templates/helpers":68,"../utils/branding":70,"../utils/suggestion-source":107,"es6-promise":238,imjs:247,jquery:256,underscore:262}],114:[function(t,r,e){(function(){var e,n,i;n=t("underscore"),t("../messages"),e=t("../core-view"),t("../options"),i=t("../templates/mustache-settings"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"modelEvents",value:function(){return{change:this.reRender}}},{key:"getData",value:function(){return n.extend({value:null},_get(_getPrototypeOf(t.prototype),"getData",this).call(this))}},{key:"events",value:function(){return{"click .im-true":"setValueTrue","click .im-false":"setValueFalse"}}},{key:"setValueTrue",value:function(){return this.model.set({value:!0})}},{key:"setValueFalse",value:function(){return this.model.set({value:!1})}}]),t}();return t.prototype.className="im-value-options btn-group",t.prototype.template=n.template("<button class=\"btn btn-default im-true {{ (value === true) ? ' active' : void 0 }}\">\n  True\n</button>\n<button class=\"btn btn-default im-false {{ (value === false) ? ' active' : void 0 }}\">\n  False\n</button>\n",i),t}.call(this)}).call(this)},{"../core-view":3,"../messages":16,"../options":63,"../templates/mustache-settings":69,underscore:262}],115:[function(t,l,e){(function(){var e,n,i,r,s,o,a;a=t("underscore"),n=t("../core-view"),t("../messages"),s=t("../options"),o=t("../templates"),e=t("../models/code-gen"),i=t("./code-gen-dialogue"),t("../messages/code-gen"),r=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"modelEvents",value:function(){return{"change:lang":this.reRender}}}]),t}();return t.prototype.template=o.template("code-gen-button-main"),t}.call(this),l.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"getData",value:function(){return a.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{options:s.get("CodeGen")})}},{key:"renderChildren",value:function(){return this.renderChildAt(".im-show-code-gen-dialogue",new r({model:this.model}))}},{key:"events",value:function(){return{"click .dropdown-menu.im-code-gen-langs li":"chooseLang","click .im-show-code-gen-dialogue":"showDialogue"}}},{key:"chooseLang",value:function(t){var e;return e=this.$(t.target).closest("li").data("lang"),this.model.set({lang:e}),this.showDialogue()}},{key:"showDialogue",value:function(){var t,e;return e=this.tableState.pick("start","size"),t=new i({query:this.query,model:this.model,page:e}),this.renderChild("dialogue",t),t.show()}}]),t}();return t.prototype.parameters=["query","tableState"],t.prototype.Model=e,t.prototype.template=o.template("code-gen-button"),t}.call(this)}).call(this)},{"../core-view":3,"../messages":16,"../messages/code-gen":18,"../models/code-gen":38,"../options":63,"../templates":67,"./code-gen-dialogue":116,underscore:262}],116:[function(C,k,t){(function(w){(function(){var n,e,i,r,s,o,a,l,u,t,c,h,f,d,p,g,m,v,y,_,b=[].indexOf;h=C("underscore"),t=C("es6-promise").Promise,a=C("./modal"),o=C("../messages"),u=C("../options"),c=C("../templates"),r=C("../models/code-gen"),i=C("../core/checkbox"),C("../messages/code-gen"),p=C("../utils/indent-xml"),m=C("../utils/strip-extra-whitespace"),_=C("../utils/with-cdn-resource"),l=/\s*#.*$/gm,e=/\/\*(\*(?!\/)|[^*])*\*\//gm,n={level:"Info",key:"codegen.CannotExportXML"},s={js:"text/javascript;charset=utf8",xml:"application/xml;charset=utf8",html:"text/html;charset=utf8"},y=h.partial(_,"prettify","prettyPrintOne"),v=h.partial(_,"filesaver","saveAs"),f=t.reject("Requirements not met"),g=function(e){var n,i;return h.object(function(){var t;for(n in t=[],e)(i=e[n])&&0!==i.length&&t.push([n,i]);return t}())},d=function(){return!1,0<=b.call(w,!1)?f:v(h.identity)},k.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,a),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.generateCode(),this.setExportLink()}},{key:"modalSize",value:function(){return"lg"}},{key:"title",value:function(){return o.getText("codegen.DialogueTitle",{query:this.query,lang:this.model.get("lang")})}},{key:"primaryIcon",value:function(){return"Download"}},{key:"primaryAction",value:function(){return o.getText("codegen.PrimaryAction")}},{key:"invariants",value:function(){return{hasQuery:"No query"}}},{key:"hasQuery",value:function(){return null!=this.query}},{key:"modelEvents",value:function(){return{change:this.onChangeLang,"change:showBoilerPlate":this.reRenderBody,"change:highlightSyntax":this.reRenderBody}}},{key:"stateEvents",value:function(){return{"change:generatedCode":this.reRenderBody}}},{key:"events",value:function(){return h.extend(_get(_getPrototypeOf(t.prototype),"events",this).call(this),{"click .dropdown-menu.im-code-gen-langs li":"chooseLang"})}},{key:"getBoilerPlateRegex",value:function(){if(!this.model.get("showBoilerPlate"))switch(this.model.get("lang")){case"pl":case"py":case"rb":return l;case"java":case"js":return e;default:return null}}},{key:"act",value:function(){var e,n,t,i;return"js"===(t=this.model.get("lang"))&&this.model.get("extrajs")&&(t="html"),e=new Blob([this.state.get("generatedCode")],{type:s[t]}),n=(null!=(i=this.query.name)?i:"name")+"."+t,v(function(t){return t(e,n)})}},{key:"onChangeLang",value:function(){var t,e=this;return t=this.model.get("lang"),this.$(".im-current-lang").text(o.getText("codegen.Lang",{lang:t})),this.$(".modal-title").text(this.title()),"js"===t||"xml"===t?d().then(function(){return e.state.unset("error")}).then(null,function(){return e.state.set({error:n})}):this.state.unset("error"),this.generateCode(),this.setExportLink()}},{key:"generateCode",value:function(){var t;switch(t=this.model.get("lang")){case"xml":return this.state.set({generatedCode:this.generateXML()});case"js":return this.state.set({generatedCode:this.generateJS()});default:return this.getCodeFromCache(t)}}},{key:"getCodeFromCache",value:function(e){var t,n,i=this;return null==this.cache&&(this.cache={}),null!=(null!=(n=this.cache)?n[e]:void 0)?this.state.set({generatedCode:this.cache[e]}):(t={query:this.query.toXML(),lang:e,date:Date.now()},this.query.service.post("query/code?cachebuster="+Date.now(),t).then(function(t){return i.cache[e]=t.code,i.state.set({generatedCode:t.code})}))}},{key:"generateXML",value:function(){return p(this.query.toXML())}},{key:"generateJS",value:function(){var t,e,n;return n=c.template("code-gen-js"),e=g(this.query.toJSON()),t=u.get("CDN.server")+u.get(["CDN","imtables"]),n({service:this.query.service,query:e,page:this.page,asHTML:this.model.get("extrajs"),imtablesJS:t+"imtables.js",imtablesCSS:t+"main.sandboxed.css"})}},{key:"setExportLink",value:function(){var t;switch(t=this.model.get("lang")){case"xml":case"js":return this.state.set({exportLink:null});default:return this.state.set({exportLink:this.query.getCodeURI(t)})}}},{key:"reRenderBody",value:function(){if(this.rendered)return this.$(".modal-body").html(this.body(this.getData())),this.trigger("rendered",this.rendered)}},{key:"postRender",value:function(){return _get(_getPrototypeOf(t.prototype),"postRender",this).call(this),this.addCheckboxes(),this.highlightCode(),this.setMaxHeight()}},{key:"setMaxHeight",value:function(){var t;return t=Math.max(250,this.$el.closest(".modal").height()-200),this.$(".im-generated-code").css({"max-height":t})}},{key:"addCheckboxes",value:function(){var t;if(this.renderChildAt(".im-show-boilerplate",new i({model:this.model,attr:"showBoilerPlate",label:"codegen.ShowBoilerPlate"})),this.renderChildAt(".im-highlight-syntax",new i({model:this.model,attr:"highlightSyntax",label:"codegen.HighlightSyntax"})),t=u.get(["CodeGen","Extra",this.model.get("lang")]))return this.renderChildAt(".im-extra-options",new i({model:this.model,attr:"extra"+this.model.get("lang"),label:t}))}},{key:"highlightCode",value:function(){var e,n;if(this.model.get("highlightSyntax")){if(this.model.get("lang"),n=this.$(".im-generated-code"),null==(e=this.getCode()))return;return y(function(t){return n.html(t(h.escape(e)))})}}},{key:"getData",value:function(){return h.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{options:u.get("CodeGen"),generatedCode:this.getCode()})}},{key:"getCode",value:function(){var t,e;return t=this.state.get("generatedCode"),(e=this.getBoilerPlateRegex())?m(null!=t?t.replace(e,""):void 0):t}},{key:"toggleShowBoilerPlate",value:function(){return this.model.toggle("showBoilerPlate")}},{key:"toggleHighlightSyntax",value:function(){return this.model.toggle("highlightSyntax")}},{key:"chooseLang",value:function(t){var e;return t.stopPropagation(),e=this.$(t.target).closest("li").data("lang"),this.model.set({lang:e})}}]),t}();return t.prototype.Model=r,t.prototype.parameters=["query"],t.prototype.optionalParameters=["page"],t.prototype.page={start:0,size:u.get("DefaultPageSize")},t.prototype.body=c.template("code_gen_body"),t}.call(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../core/checkbox":4,"../messages":16,"../messages/code-gen":18,"../models/code-gen":38,"../options":63,"../templates":67,"../utils/indent-xml":88,"../utils/strip-extra-whitespace":106,"../utils/with-cdn-resource":110,"./modal":197,"es6-promise":238,underscore:262}],117:[function(t,h,e){(function(){var p,e,n,i,r,s,g,o,a,m,l,u,c;c=t("underscore"),s=t("./modal"),t("../templates"),r=t("../messages"),e=t("../core/collection"),a=t("../models/path"),n=t("./column-manager/tabs"),l=t("./column-manager/select-list"),u=t("./column-manager/sort-order"),p=t("../models/available-columns"),o=t("../models/order-element"),t("../messages/columns"),i=function(){var t=function(){function i(){var t;return _classCallCheck2(this,i),(t=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this))).model=t.model.bind(_assertThisInitialized(t)),t.listenTo(_assertThisInitialized(t),"change:index",function(){var t=this;return c.defer(function(){return t.sort()})}),t}return _inherits(i,e),_createClass2(i,[{key:"add",value:function(){return _get(_getPrototypeOf(i.prototype),"add",this).call(this)}}]),_createClass2(i,[{key:"model",value:function(t){var e,n;return function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,i),e=this.size(),n=new this.modelFactory(t),n.collection=this,n.set({index:e}),n}}]),i}();return t.prototype.comparator="index",t.prototype.modelFactory=e.prototype.model,t}.call(this),m=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,i),t}();return t.prototype.modelFactory=a,t}.call(this),g=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,i),t}();return t.prototype.modelFactory=o,t}.call(this),h.exports=function(){var t=function(){function d(){return _classCallCheck2(this,d),_possibleConstructorReturn(this,_getPrototypeOf(d).apply(this,arguments))}return _inherits(d,s),_createClass2(d,[{key:"modalSize",value:function(){return"lg"}},{key:"className",value:function(){return _get(_getPrototypeOf(d.prototype),"className",this).call(this)+" im-column-manager"}},{key:"title",value:function(){return r.getText("columns.DialogueTitle")}},{key:"primaryAction",value:function(){return r.getText("columns.ApplyChanges")}},{key:"dismissAction",value:function(){return r.getText("Cancel")}},{key:"act",value:function(){var t,e,n;if(!this.state.get("disabled")){var i=this.state.pick("viewChanged","orderChanged");return n=i.viewChanged,e=i.orderChanged,n&&!e?this.query.select(this.getCurrentView()):e&&!n?this.query.orderBy(this.getCurrentSortOrder()):(t={silent:!0,events:[]},this.query.select(this.getCurrentView(),t),this.query.orderBy(this.getCurrentSortOrder(),t),this.query.trigger(t.events.join(" "))),this.resolve("changed")}}},{key:"stateEvents",value:function(){return{"change:currentTab":this.renderTabContent,"change:adding":this.setDisabled}}},{key:"initialize",value:function(){var t,e,n,i,r,s,o,a,l,u,c,h;for(_get(_getPrototypeOf(d.prototype),"initialize",this).call(this),this.selectList=new m,this.rubbishBin=new m,this.sortOrder=new g,this.availableColumns=new p,e=0,r=(l=this.query.views).length;e<r;e++)h=l[e],this.selectList.add(this.query.makePath(h));for(n=0,s=(u=this.query.sortOrder).length;n<s;n++){var f=u[n];a=f.path,t=f.direction,this.sortOrder.add({direction:t,path:this.query.makePath(a)})}for(i=0,o=(c=this.getRelevantPaths()).length;i<o;i++)a=c[i],this.sortOrder.get(a.toString())||this.availableColumns.add(a,{sort:!1});return this.availableColumns.sort(),this.listenTo(this.selectList,"sort add remove",this.setDisabled),this.listenTo(this.sortOrder,"sort add remove",this.setDisabled)}},{key:"getRelevantPaths",value:function(){var e=this;return c.chain(this.query.getQueryNodes()).filter(function(t){return!e.query.isOuterJoined(t)}).map(function(t){var e,n,i,r,s;for(s=[],n=0,i=(r=t.getChildNodes()).length;n<i;n++)(e=r[n]).isAttribute()&&"id"!==e.end.name&&s.push(e);return s}).flatten().value()}},{key:"getCurrentView",value:function(){return this.selectList.pluck("path")}},{key:"getCurrentSortOrder",value:function(){return this.sortOrder.map(function(t){return t.asOrderElement()})}},{key:"setDisabled",value:function(){var t,e;return this.state.get("adding")?this.state.set({disabled:!0}):(e=this.getCurrentView().join(" ")===this.query.views.join(" "),t=this.sortOrder.map(function(t){return t.toOrderString()}).join(" ")===this.query.getSorting(),this.state.set({viewChanged:!e,orderChanged:!t,disabled:e&&t}))}},{key:"initState",value:function(){return this.state.set({disabledReason:"columns.NoChangesToApply",disabled:!0,currentTab:n.TABS[0]})}},{key:"renderTabs",value:function(){return this.renderChild("tabs",new n({state:this.state}),this.$(".modal-body"))}},{key:"renderTabContent",value:function(){var t;if(this.rendered)return t=function(){switch(this.state.get("currentTab")){case"view":return new l({state:this.state,query:this.query,rubbishBin:this.rubbishBin,collection:this.selectList});case"sortorder":return new u({query:this.query,availableColumns:this.availableColumns,collection:this.sortOrder});default:throw new Error("Cannot render "+this.state.get("currentTab"))}}.call(this),this.renderChild("main",t,this.$(".modal-body"))}},{key:"postRender",value:function(){return _get(_getPrototypeOf(d.prototype),"postRender",this).call(this),this.renderTabs(),this.renderTabContent()}},{key:"remove",value:function(){return this.selectList.close(),this.rubbishBin.close(),this.sortOrder.close(),this.availableColumns.close(),_get(_getPrototypeOf(d.prototype),"remove",this).call(this)}}]),d}();return t.prototype.parameters=["query"],t}.call(this)}).call(this)},{"../core/collection":5,"../messages":16,"../messages/columns":19,"../models/available-columns":36,"../models/order-element":53,"../models/path":56,"../templates":67,"./column-manager/select-list":122,"./column-manager/sort-order":124,"./column-manager/tabs":125,"./modal":197,underscore:262}],118:[function(t,i,e){(function(){var e,n;n=t("underscore"),e=t("./unselected-column"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"events",value:function(){return n.extend(_get(_getPrototypeOf(t.prototype),"events",this).call(this),{mousedown:"onMouseDown",dragstart:"onDragStart",dragstop:"onDragStop"})}},{key:"onMouseDown",value:function(){return this.fixAppendTo()}},{key:"fixAppendTo",value:function(){var t;return this.$el.draggable("option","appendTo",this.$el.closest(".well")),t=900<=this.$el.closest(".modal").width(),this.$el.draggable("option","axis",t?null:"y")}},{key:"onDragStart",value:function(){return this.state.set({dragged:this.model.get("path")}),this.$el.addClass("ui-dragging")}},{key:"onDragStop",value:function(){return this.state.unset("dragged"),this.$el.removeClass("ui-dragging")}},{key:"postRender",value:function(){var t,e;return e=900<=this.$el.closest(".modal").width(),t=this.model.collection.indexOf(this.model),this.$el.draggable({axis:e?null:"y",connectToSortable:this.findActives(),helper:"clone",revert:"invalid",opacity:.8,cancel:"i,a,button",zIndex:1e3}),this.$("[title]").tooltip({placement:0===t?"bottom":"top"})}}]),t}();return t.prototype.parameters=["findActives"],t.prototype.restoreTitle="columns.AddColumnToSortOrder",t}.call(this)}).call(this)},{"./unselected-column":126,underscore:262}],119:[function(t,i,e){(function(){var e,n;n=t("../query-dialogue-button"),e=t("../column-manager"),t("../../messages/columns"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),t}();return t.prototype.className="im-column-manager-button",t.prototype.longLabel="columns.ManageColumns",t.prototype.shortLabel="columns.ManageColumnsShort",t.prototype.icon="Columns",t.prototype.Dialogue=e,t}.call(this)}).call(this)},{"../../messages/columns":19,"../column-manager":117,"../query-dialogue-button":206}],120:[function(t,o,e){(function(){var e,n,i,r,s;r=t("underscore"),e=t("./selected-column"),i=t("../../templates"),n=["column-manager-position-controls","column-manager-order-direction","column-manager-path-name","column-manager-path-remover"],s=function(t){return"ASC"===t?"DESC":"ASC"},o.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"modelEvents",value:function(){return r.extend(_get(_getPrototypeOf(t.prototype),"modelEvents",this).call(this),{"change:direction":this.reRender})}},{key:"events",value:function(){return r.extend(_get(_getPrototypeOf(t.prototype),"events",this).call(this),{"click .im-change-direction":"changeDirection"})}},{key:"changeDirection",value:function(){return this.model.swap("direction",s)}}]),t}();return t.prototype.removeTitle="columns.RemoveOrderElement",t.prototype.template=i.templateFromParts(n),t}.call(this)}).call(this)},{"../../templates":67,"./selected-column":123,underscore:262}],121:[function(t,l,e){(function(){var n,e,i,r,s,o,a;e=t("../../core-view"),a=t("../../templates"),r=t("../../options"),o=t("../../models/path-set"),i=t("../../models/open-nodes"),s=t("../path-chooser"),n=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"collectionEvents",value:function(){return{"add remove reset":"reRender"}}},{key:"events",value:function(){return{"click .im-add-column":"addColumn","click .im-rearrange-columns":"cancel"}}},{key:"cancel",value:function(){return this.trigger("done")}},{key:"addColumn",value:function(){var t,e;return e=this.selectList,t=this.collection.paths(),this.cancel(),e.add(t)}}]),t}();return t.prototype.parameters=["collection","selectList"],t.prototype.template=a.template("column-manager-path-chooser-buttons"),t}.call(this),l.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"initialize",value:function(){var r;return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.chosenPaths=new o,this.view=new o(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.collection.pluck("path")).length;t<e;t++)r=n[t],i.push(this.query.makePath(r));return i}.call(this)),this.openNodes=new i(this.query.getViewNodes())}},{key:"initState",value:function(){var e=this;return this.query.makePath(this.query.root).getDisplayName().then(function(t){return e.state.set({rootName:t})})}},{key:"stateEvents",value:function(){return{"change:rootName":"reRender"}}},{key:"postRender",value:function(){return this.renderButtons(),this.openPathChooser()}},{key:"renderButtons",value:function(){var t,e=this;return t=new n({state:this.state,collection:this.chosenPaths,selectList:this.collection}),this.listenTo(t,"done",function(){return e.trigger("done")}),this.renderChildAt(".btn-group",t)}},{key:"openPathChooser",value:function(){var t,e;return t={dontSelectView:!0,multiSelect:r.get("ColumnManager.SelectColumn.Multi")},e=new s({model:t,query:this.query,chosenPaths:this.chosenPaths,openNodes:this.openNodes,view:this.view,trail:[]}),this.renderChild("pathChooser",e),this.setPathChooserHeight()}},{key:"setPathChooserHeight",value:function(){return this.$(".im-path-chooser").css({"max-height":this.$el.closest(".modal").height()-350})}},{key:"remove",value:function(){return this.chosenPaths.close(),this.view.close(),this.openNodes.close(),_get(_getPrototypeOf(t.prototype),"remove",this).call(this)}}]),t}();return t.prototype.parameters=["query","collection"],t.prototype.template=a.template("column-manager-path-chooser"),t}.call(this)}).call(this)},{"../../core-view":3,"../../models/open-nodes":52,"../../models/path-set":55,"../../options":63,"../../templates":67,"../path-chooser":201}],122:[function(t,u,e){(function(){var n,e,i,r,s,o,a,l,c,h;a=t("underscore"),e=t("../../core-view"),s=t("../../templates"),t("../../core/collection"),i=t("../../mixins/handles-dom-resort"),r=t("./selected-column"),o=t("./unselected-column"),n=t("./path-chooser"),c=function(t){return"path_"+t.get("id")},l=function(t){return"expath_"+t.get("id")},h=function(t){return t+1},u.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"getData",value:function(){return a.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{hasRubbish:this.rubbishBin.size()})}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this.rubbishBin,"remove",this.restoreView)}},{key:"initState",value:function(){return this.state.set({adding:!1})}},{key:"collectionEvents",value:function(){return{remove:"moveToBin","add remove":"reRender"}}},{key:"events",value:function(){return{"drop .im-rubbish-bin":"onDragToBin","sortupdate .im-active-view":"onOrderChanged","click .im-add-view-path":"setAddingTrue"}}},{key:"stateEvents",value:function(){return{"change:adding":"onChangeMode"}}},{key:"setAddingTrue",value:function(){return this.state.set({adding:!0})}},{key:"onDragToBin",value:function(t,e){return e.draggable.trigger("binned")}},{key:"moveToBin",value:function(t){return this.rubbishBin.add(this.query.makePath(t.get("path"))),this.reIndexFrom(t.get("index"))}},{key:"reIndexFrom",value:function(t){var e,n,i,r,s,o;for(o=[],e=n=i=t,r=this.collection.size();i<=r?n<=r:r<=n;e=i<=r?++n:--n)o.push(null!=(s=this.collection.at(e))?s.set({index:e}):void 0);return o}},{key:"restoreView",value:function(t){return this.collection.add(this.query.makePath(t.get("path")))}},{key:"onChangeMode",value:function(){if(this.rendered)return this.state.get("adding")?(this.$(".im-removal-and-rearrangement").hide(),this.$(".im-addition").show(),this.renderPathChooser()):(this.$(".im-removal-and-rearrangement").show(),this.$(".im-addition").hide(),this.removeChild("columnChooser"))}},{key:"renderPathChooser",value:function(){var t,e=this;return t=new n({query:this.query,collection:this.collection}),this.listenTo(t,"done",function(){return e.state.set({adding:!1})}),this.renderChild("columnChooser",t,this.$(".im-addition"))}},{key:"onOrderChanged",value:function(t,e){return null!=e.sender?this.restoreFromBin(e.item):this.onDOMResort()}},{key:"getInsertPoint",value:function(t){var e,n,i;return e=t.prev(),n=this.children,null==(i=this.collection.find(function(t){return n[c(t)].el===e[0]}))?0:i.get("index")+1}},{key:"getRestoredModel",value:function(n){var i=this;return this.rubbishBin.find(function(t){var e;return(null!=(e=i.children[l(t)])?e.el:void 0)===n[0]})}},{key:"restoreFromBin",value:function(t){var e,r,s,n,i,o,a,l,u;if(i=this.children,a=this.collection.size(),r=this.getInsertPoint(t),null!=(u=this.getRestoredModel(t))){if(u.destroy(),r!==a){for(l=function(){var t,e,n,i;for(i=[],s=t=e=r,n=a;e<=n?t<n:n<t;s=e<=n?++t:--t)i.push(this.collection.at(s));return i}.call(this),e=this.collection.last(),n=0,o=l.length;n<o;n++)l[n].swap("index",h);return e.set({index:r}),i[c(e)].$el.insertBefore(i[c(l[0])].el)}}else console.error("could not find model for:",t)}},{key:"onDOMResort",value:function(){return this.setChildIndices(c)}},{key:"postRender",value:function(){var e,n,t,i=this;return n=this.$(".im-active-view"),e=this.$(".im-removed-view"),t=900<=this.$el.closest(".modal").width(),this.collection.each(function(t){return t.collection=i.collection}),this.rubbishBin.each(function(t){return t.collection=i.rubbishBin}),this.collection.each(function(t){return i.renderChild(c(t),new r({model:t}),n)}),this.rubbishBin.each(function(t){return i.renderChild(l(t),new o({model:t}),e)}),n.sortable({placeholder:"im-view-list-placeholder",opacity:.6,cancel:"i,a,button",axis:t?null:"y",appendTo:this.el}),this.$(".im-removed-view").sortable({placeholder:"im-view-list-placeholder",connectWith:n,opacity:.6,cancel:"i,a,button",axis:t?null:"y",appendTo:this.el}),this.$(".im-rubbish-bin").droppable({accept:".im-selected-column",activeClass:"im-can-remove-column",hoverClass:"im-will-remove-column"}),this.onChangeMode()}},{key:"removeAllChildren",value:function(){return this.rendered&&(this.$(".im-active-view").sortable("destroy"),this.$(".im-removed-view").sortable("destroy"),this.$(".im-rubbish-bin").droppable("destroy")),_get(_getPrototypeOf(t.prototype),"removeAllChildren",this).call(this)}}]),t}();return t.include(i),t.prototype.parameters=["query","collection","rubbishBin"],t.prototype.className="im-select-list-editor",t.prototype.template=s.template("column-manager-select-list"),t}.call(this)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../mixins/handles-dom-resort":31,"../../templates":67,"./path-chooser":121,"./selected-column":123,"./unselected-column":126,underscore:262}],123:[function(c,h,t){(function(){var n,i,e,r,s,o,a,l,u;o=c("underscore"),i=c("../../core-view"),n=c("../../core/collection"),s=c("../../templates"),e=c("../../models/path");var t=c("../../utils/events");l=t.ignore,a=function(t){return t-1},u=function(t){return t+1},r=["column-manager-path-remover","column-manager-position-controls","column-manager-path-name"],h.exports=function(){var t=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,i),_createClass2(e,[{key:"getData",value:function(){var t;return t=this.model===this.model.collection.last(),o.extend(_get(_getPrototypeOf(e.prototype),"getData",this).call(this),{removeTitle:this.removeTitle,isLast:t,parts:this.parts.pluck("part")})}},{key:"initialize",value:function(){return _get(_getPrototypeOf(e.prototype),"initialize",this).call(this),this.parts=new n,this.listenTo(this.parts,"add remove reset",this.reRender),this.resetParts(),this.listenTo(this.model.collection,"sort",this.onCollectionSorted)}},{key:"modelEvents",value:function(){return{destroy:this.stopListeningTo,"change:parts":this.resetParts}}},{key:"stateEvents",value:function(){return{"change:fullPath":this.setFullPathClass}}},{key:"onCollectionSorted",value:function(){return this.reRender()}},{key:"resetParts",value:function(){var r,s;return this.parts.reset(function(){var t,e,n,i;for(n=this.model.get("parts"),i=[],r=t=0,e=n.length;t<e;r=++t)s=n[r],i.push({part:s,id:r});return i}.call(this))}},{key:"postRender",value:function(){return this.$("[title]").tooltip({container:this.$el})}},{key:"events",value:function(){return{"click .im-remove-view":"removeView","click .im-move-up":"moveUp","click .im-move-down":"moveDown",click:"toggleFullPath",binned:"removeView"}}},{key:"toggleFullPath",value:function(){return this.state.toggle("fullPath")}},{key:"moveDown",value:function(t){return l(t),this.model.collection.at(u(this.model.get("index"))).swap("index",a),this.model.swap("index",u),this.$el.insertAfter(this.$el.next())}},{key:"moveUp",value:function(t){return l(t),this.model.collection.at(a(this.model.get("index"))).swap("index",u),this.model.swap("index",a),this.$el.insertBefore(this.$el.prev())}},{key:"setFullPathClass",value:function(){return this.$el.toggleClass("im-full-path",this.state.get("fullPath"))}},{key:"removeView",value:function(t){return l(t),this.model.collection.remove(this.model),this.model.destroy()}}]),e}();return t.prototype.Model=e,t.prototype.tagName="li",t.prototype.className="list-group-item im-selected-column",t.prototype.template=s.templateFromParts(r),t.prototype.removeTitle="columns.RemoveColumn",t}.call(this)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../models/path":56,"../../templates":67,"../../utils/events":81,underscore:262}],124:[function(t,h,e){(function(c){(function(){var s,e,i,n,r,o,a,l,u;a=t("underscore"),i=t("../../core-view"),e=t("../../core-model"),o=t("../../templates"),n=t("../../mixins/handles-dom-resort"),s=t("./available-path"),r=t("./order-element"),l=function(t){return"active_"+t.get("id")},u=function(t){return"inactive_"+t.get("id")},h.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,i),_createClass2(n,[{key:"getData",value:function(){return a.extend(_get(_getPrototypeOf(n.prototype),"getData",this).call(this),{available:this.availableColumns.size()})}},{key:"collectionEvents",value:function(){return{"add remove":this.reRender,sort:this.resortSortOrder,remove:this.makeAvailable}}},{key:"initialize",value:function(){return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.dragState=new e,this.listenTo(this.availableColumns,"sort add remove",this.resortAvailable),this.listenTo(this.availableColumns,"remove",this.addToSortOrder)}},{key:"currentSortOrder",value:function(){return this.collection.map(function(t){return t.get("path")+" "+t.get("direction")}).join(" ")}},{key:"postRender",value:function(){return this.resortSortOrder(),this.activateSortables(),this.resortAvailable(),this.setAvailableHeight()}},{key:"activateSortables",value:function(){var t,e;return t=this.$(".im-active-oes"),e=900<=this.$el.closest(".modal").width(),this.collection.size()?this.$actives=t.sortable({placeholder:"im-view-list-placeholder",opacity:.6,cancel:"i,a,button",axis:e?null:"y",appendTo:this.el}):this.$droppable=this.$(".im-empty-collection").droppable({accept:".im-selected-column",activeClass:"im-can-add-column",hoverClass:"im-will-add-column"})}},{key:"removeAllChildren",value:function(){var t,e;return null!=(t=this.$actives)&&t.sortable("destroy"),null!=(e=this.$droppable)&&e.droppable("destroy"),this.$droppable=null,this.$actives=null,_get(_getPrototypeOf(n.prototype),"removeAllChildren",this).call(this)}},{key:"events",value:function(){return{"drop .im-empty-collection":"addSortElement","sortupdate .im-active-oes":"onDOMResort"}}},{key:"onDOMResort",value:function(t,e){var n,i,r;return(r=this.dragState.get("dragged"))?(i=this.availableColumns.findWhere({path:r}),n=e.item.prevAll().length,this.addToSortOrder(i,n),this.dragState.unset("dragged")):this.setChildIndices(l)}},{key:"makeAvailable",value:function(t){return this.availableColumns.add(this.query.makePath(t.get("path")))}},{key:"findAvailable",value:function(n){var i=this;return this.availableColumns.find(function(t){var e;return(null!=(e=i.children[u(t)])?e.el:void 0)===n})}},{key:"addSortElement",value:function(t,e){var n,i;return n=e.draggable,i=this.findAvailable(n[0]),this.addToSortOrder(i)}},{key:"addToSortOrder",value:function(t,e){var n,i,r,s,o,a,l;if(o=this.query.makePath(t.get("path")),s={id:String(o),path:o},a=this.collection.size(),t.destroy(),this.collection.add(s),null!=e&&e<a){for(l=this.collection.filter(function(t){return t.get("index")>=e}),n=this.collection.last(),i=0,r=l.length;i<r;i++)l[i].swap("index",function(t){return t+1});return n.set({index:e})}}},{key:"resortAvailable",value:function(){var e,n=this;if(this.rendered)return e=c.document.createDocumentFragment(),this.availableColumns.each(function(t){return n._renderAvailable(t,e)}),this.$(".im-available-oes").html(e)}},{key:"_renderAvailable",value:function(t,e){var n,i,r=this;return n=u(t),i=new s({model:t,findActives:function(){return r.$actives},state:this.dragState}),this.renderChild(n,i,e)}},{key:"resortSortOrder",value:function(){var e,n=this;if(this.rendered)return e=c.document.createDocumentFragment(),this.collection.each(function(t){return n.renderChild(l(t),new r({model:t}),e)}),this.$(".im-active-oes").html(e)}},{key:"setAvailableHeight",value:function(){return this.$(".im-rubbish-bin").css({"max-height":Math.max(200,this.$el.closest(".modal").height()-450)})}},{key:"remove",value:function(){return this.dragState.destroy(),_get(_getPrototypeOf(n.prototype),"remove",this).call(this)}}]),n}();return t.include(n),t.prototype.parameters=["collection","query","availableColumns"],t.prototype.className="im-sort-order-editor",t.prototype.template=o.template("column-manager-sort-order-editor"),t}.call(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core-model":2,"../../core-view":3,"../../mixins/handles-dom-resort":31,"../../templates":67,"./available-path":118,"./order-element":120,underscore:262}],125:[function(t,s,e){(function(){var i,e,n,r,a;r=t("underscore"),e=t("../../core-view"),n=t("../../templates"),i=t("../../utils/css-class-set"),a=function(t,e){var n;return(n={active:function(){return e.get("currentTab")===t}})["im-"+t+"-tab"]=!0,new i(n)},s.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"getData",value:function(){return r.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{classes:this.classSets})}},{key:"initState",value:function(){return this.state.set({currentTab:t.TABS[0]})}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.initClassSets()}},{key:"stateEvents",value:function(){return{"change:currentTab":this.reRender}}},{key:"events",value:function(){return{"click .im-view-tab":"selectViewTab","click .im-sortorder-tab":"selectSortOrderTab"}}},{key:"selectViewTab",value:function(){return this.state.set({currentTab:"view"})}},{key:"selectSortOrderTab",value:function(){return this.state.set({currentTab:"sortorder"})}},{key:"initClassSets",value:function(){var t,e,n,i,r,s,o=this;for(this.classSets={},i=[],t=0,e=(n=["view","sortorder"]).length;t<e;t++)r=n[t],i.push((s=r,o.classSets[s]=a(s,o.state)));return i}}]),t}();return t.TABS=["view","sortorder"],t.prototype.template=n.template("column-manager-tabs"),t.prototype.className="im-column-manager-tabs",t}.call(this)}).call(this)},{"../../core-view":3,"../../templates":67,"../../utils/css-class-set":79,underscore:262}],126:[function(t,s,e){(function(){var e,n,i,r;r=t("underscore"),e=t("./selected-column"),i=t("../../templates"),n=["column-manager-path-name","column-manager-restore-path"],s.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"events",value:function(){return{"click .im-restore-view":"removeView",click:"toggleFullPath"}}},{key:"getData",value:function(){return r.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{restoreTitle:this.restoreTitle})}}]),t}();return t.prototype.template=i.templateFromParts(n),t.prototype.restoreTitle="columns.RestoreColumn",t}.call(this)}).call(this)},{"../../templates":67,"./selected-column":123,underscore:262}],127:[function(d,p,t){(function(){var e,n,i,s,r,o,a,l,u,c,h=[].splice;a=d("underscore");var t=d("es6-promise");s=t.Promise,o=d("../core-view"),i=d("../options"),r=d("../templates"),e=d("../mixins/has-typeaheads");var f=d("../patterns");n=f.IS_BLANK,u=d("../utils/path-suggester"),l=d("../utils/path-suggestions"),c=function(t){var e,n,i;return 3<(e=t.split(" > ")).length?(n=_toArray(e).slice(0),"..."+(i=_slicedToArray(h.call(n,-3),3))[0]+" > "+i[1]+" > "+i[2]):t},p.exports=function(){var t=function(){function r(){return _classCallCheck2(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,o),_createClass2(r,[{key:"initialize",value:function(t){var e=t.query,n=t.openNodes,i=t.chosenPaths;return this.query=e,this.openNodes=n,this.chosenPaths=i,_get(_getPrototypeOf(r.prototype),"initialize",this).call(this),this.state.set({chosen:[]}),this.listenTo(this.openNodes,"add remove reset",this.reRender),this.listenTo(this.chosenPaths,"add remove reset",this.reRender),this.listenTo(this.chosenPaths,"add remove reset",this.setChosen),this.setChosen(),this.generatePathSuggestions()}},{key:"modelEvents",value:function(){return{destroy:this.stopListeningTo,"change:showTree change:allowRevRefs":this.reRender}}},{key:"stateEvents",value:function(){return{"change:chosen change:suggestions":this.reRender}}},{key:"pathAcceptable",value:function(t){var e;return"id"!==(null!=(e=t.end)?e.name:void 0)&&(!!this.model.get("canSelectReferences")||t.isAttribute())}},{key:"generatePathSuggestions",value:function(){var t,e=this;return t=i.get("SuggestionDepth"),l(this.query,t).then(function(t){return e.state.set({suggestions:t.filter(function(t){return e.pathAcceptable(t.path)})})})}},{key:"getData",value:function(){var t,e;return e=this.openNodes.size(),t=this.chosenPaths.size(),a.extend({anyNodesOpen:e,anyNodeChosen:t},this.state.toJSON(),_get(_getPrototypeOf(r.prototype),"getData",this).call(this))}},{key:"render",value:function(){return _get(_getPrototypeOf(r.prototype),"render",this).call(this),this.state.has("suggestions")&&this.installTypeahead(),this}},{key:"installTypeahead",value:function(){var t,e,n,i,r=this;return this.removeTypeAheads(),e=this.$(".im-tree-filter"),i=this.state.get("suggestions"),n={minLength:3,highlight:!0},t={name:"path_suggestions",source:u(i),displayKey:"name"},this.activateTypeahead(e,n,t,i[0].name,function(t,e){var n;return n=e.path,r.openNodes.add(n),r.model.get("multiSelect")?r.chosenPaths.add(n):r.chosenPaths.reset([n])})}},{key:"events",value:function(){return{"click .im-collapser":"collapseBranches","change .im-allow-rev-ref":"toggleReverseRefs","change .im-tree-filter":"setFilter","click .im-choose":"toggleShowTree","click .im-approve":"triggerApproval","click .im-clear-filter":"clearFilter"}}},{key:"triggerApproval",value:function(){return this.model.trigger("approved")}},{key:"remove",value:function(){return this.removeTypeAheads(),_get(_getPrototypeOf(r.prototype),"remove",this).call(this)}},{key:"clearFilter",value:function(){return this.model.set({filter:null}),this.reRender()}},{key:"setFilter",value:function(t){var e;return e=t.target.value,this.model.set({filter:n.test(e)?null:e})}},{key:"collapseBranches",value:function(){return this.openNodes.reset()}},{key:"toggleShowTree",value:function(){return this.model.toggle("showTree")}},{key:"toggleReverseRefs",value:function(){return this.model.toggle("allowRevRefs")}},{key:"setConstraint",value:function(){return this.model.trigger("approved")}},{key:"setChosen",value:function(){var i,r,e=this;return r=this.chosenPaths.toJSON(),s.all(function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(i.getDisplayName());return n}()).then(function(t){var e,n,i,r;for(r=[],e=0,n=t.length;e<n;e++)i=t[e],r.push(c(i));return r}).then(function(t){return e.state.set({chosen:t})},function(t){return console.error(t)})}}]),r}();return t.include(e),t.prototype.className="row",t.prototype.template=r.template("constraint_adder_options"),t}.call(this)}).call(this)},{"../core-view":3,"../mixins/has-typeaheads":32,"../options":63,"../patterns":64,"../templates":67,"../utils/path-suggester":96,"../utils/path-suggestions":97,"es6-promise":238,underscore:262}],128:[function(c,h,t){(function(){var e,n,i,t,r,s,o,a,l,u;c("underscore"),t=c("../messages"),l=c("../templates"),u=c("../core-view"),i=c("../core-model"),a=c("../models/path-set"),s=c("../models/open-nodes"),n=c("./constraint-adder-options"),r=c("./new-constraint"),o=c("./path-chooser"),t.set({"constraints.BrowseForColumn":"Browse for Column","constraints.AddANewFilter":"Add a new filter","constraints.Choose":"Choose","constraints.Filter":"Filter","columns.CollapseAll":"Collapse columns","columns.AllowRevRef":"Allow reverse references"}),e=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,i),_createClass2(t,[{key:"defaults",value:function(){return{filter:null,showTree:!0,allowRevRefs:!1,canSelectReferences:!0,multiSelect:!1}}}]),t}(),h.exports=function(){var t=function(){function i(){var t;return _classCallCheck2(this,i),(t=_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))).showTree=t.showTree.bind(_assertThisInitialized(t)),t}return _inherits(i,u),_createClass2(i,[{key:"initialize",value:function(t){var r,e=t.query,n=t.buttonDelegate;return this.query=e,this.buttonDelegate=n,_get(_getPrototypeOf(i.prototype),"initialize",this).call(this),this.model.set({root:this.query.getPathInfo(this.query.root)}),this.chosenPaths=new a,this.view=new a(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.views).length;t<e;t++)r=n[t],i.push(this.query.makePath(r));return i}.call(this)),this.openNodes=new s(this.query.getViewNodes()),this.listenTo(this.query,"change:constraints",this.remove)}},{key:"modelEvents",value:function(){return{approved:this.handleApproval,"change:showTree":this.toggleTree,"change:constraint":this.onChangeConstraint}}},{key:"getTreeRoot",value:function(){return this.model.get("root")}},{key:"handleApproval",value:function(){var t,e,n,i;return null!=(t=_slicedToArray(this.chosenPaths.toJSON(),1)[0])?(n=this.model.get("constraint"),i=t.toString(),(null!=n?n.path:void 0)!==i?(e={path:i},this.model.set({constraint:e}),this.query.trigger("editing-constraint",e)):this.onChangeConstraint()):(console.debug("nothing chosen"),this.model.unset("constraint"))}},{key:"renderConstraintEditor",value:function(){var t,e;return t=this.model.get("constraint"),e=new r({buttonDelegate:this.buttonDelegate,query:this.query,constraint:t}),this.renderChild("con",e,this.$(".im-new-constraint")),this.listenTo(e,"remove",function(){return this.model.set({showTree:!0})})}},{key:"onChangeConstraint",value:function(){if(this.rendered)return this.model.get("constraint")?(this.model.set({showTree:!1}),this.renderConstraintEditor()):this.removeChild("con")}},{key:"toggleTree",value:function(){return this.model.get("showTree")?this.showTree():this.hideTree()}},{key:"hideTree",value:function(){return this.trigger("resetting:tree"),this.$(".im-path-finder").removeClass("open"),this.removeChild("tree")}},{key:"showTree",value:function(t){var e;return function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,i),this.trigger("showing:tree"),this.removeChild("con"),e=new o({model:this.model,query:this.query,chosenPaths:this.chosenPaths,openNodes:this.openNodes,view:this.view,trail:[]}),this.$(".im-path-finder").addClass("open"),this.renderChild("tree",e,this.$(".im-path-finder"))}},{key:"renderOptions",value:function(){var t;return t={model:this.model,openNodes:this.openNodes,chosenPaths:this.chosenPaths,query:this.query},this.renderChild("opts",new n(t),this.$(".im-constraint-adder-options"))}},{key:"postRender",value:function(){return this.renderOptions(),this.toggleTree()}}]),i}();return t.prototype.tagName="div",t.prototype.className="im-constraint-adder row-fluid",t.prototype.Model=e,t.prototype.template=l.template("constraint_adder"),t}.call(this)}).call(this)},{"../core-model":2,"../core-view":3,"../messages":16,"../models/open-nodes":52,"../models/path-set":55,"../templates":67,"./constraint-adder-options":127,"./new-constraint":199,"./path-chooser":201,underscore:262}],129:[function(E,O,t){(function(){var i,r,e,s,o,a,l,u,c,h,f,d,p,g,t,m,v,y,_,n,b,w,C,k=[].indexOf;w=E("underscore"),g=E("../messages"),u=E("../icons"),a=E("../core-view"),b=E("./type-value-controls"),e=E("./attribute-value-controls"),m=E("./multi-value-controls"),o=E("./boolean-value-controls"),f=E("./lookup-value-controls"),d=E("./loop-value-controls"),h=E("./list-value-controls"),l=E("./error-message");var x=E("imjs");y=x.Query,t=x.Model;var T=y;_=T.REFERENCE_OPS,c=T.LIST_OPS,p=T.MULTIVALUE_OPS,v=T.NULL_OPS,i=T.ATTRIBUTE_OPS,r=T.ATTRIBUTE_VALUE_OPS;var S=t;S.NUMERIC_TYPES,s=S.BOOLEAN_TYPES,r.concat(v),n=w.template('<fieldset class="im-constraint-options form-group row">\n  <label class="col-sm-3 path-label"><%- data.con.displayName %></label>\n  <% if (data.con.op) { %>\n    <div class="im-operator col-sm-3">\n        <select class="form-control im-ops">\n        <option selected><%- data.con.op %></option>\n        <% data.otherOperators.forEach(function (op) { %>\n            <option><%- op %></option>\n        <% }); %>\n        </select>\n    </div>\n  <% } %>\n  <div class="col-sm-6 im-value-options im-value-section">\n  </div>\n</fieldset>\n\n<div class="btn-group im-con-buttons">\n  <% data.buttons.forEach(function (b, i) { %>\n  <button class="btn btn-<%= (i === 0) ? \'primary\' : \'default\' %> <%- b.classes %>">\n    <%- data.messages.getText(b.key) %>\n  </button>\n  <% }); %>\n</div>\n',{variable:"data"}),C=function(t){var e,n;if(!(null!=(e=t.path)?e.isReference:void 0))throw new Error("No path or wrong type");return e.isRoot()&&_.concat(y.RANGE_OPS),e.isReference()?_.concat(y.RANGE_OPS).concat(t.new?["ISA"]:[]):(n=e.getType(),0<=k.call(s,n)?["=","!="].concat(v):i)},O.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,a),_createClass2(n,[{key:"initialize",value:function(){return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.path=this.model.get("path")}},{key:"invariants",value:function(){return{modelHasPath:"No path found on model"}}},{key:"modelHasPath",value:function(){return this.model.get("path")}},{key:"getType",value:function(){return this.model.get("path").getType()}},{key:"modelEvents",value:function(){return{"change:op change:displayName":this.reRender,destroy:this.stopListening}}},{key:"events",value:function(){return{submit:function(t){return t.preventDefault(),t.stopPropagation()},"click .btn-cancel":"cancelEditing","click .btn-primary":"applyChanges","change .im-ops":"setOperator"}}},{key:"delegateButtonEvents",value:function(){var t=this;return this.buttonDelegate.off("click.constraint-editor"),this.buttonDelegate.on("click.constraint-editor",".btn-cancel",function(){return t.cancelEditing()}),this.buttonDelegate.on("click.constraint-editor",".btn-primary",function(){return t.applyChanges()})}},{key:"setOperator",value:function(){return this.model.set({op:this.$(".im-ops").val()})}},{key:"cancelEditing",value:function(){return this.model.trigger("cancel")}},{key:"applyChanges",value:function(t){return null!=t&&t.preventDefault(),null!=t&&t.stopPropagation(),this.model.trigger("apply",this.getConstraint())}},{key:"getConstraint",value:function(){var t,e,n;return e=(t=this.model.pick(["path","op","value","values","code","type"])).op,0<=k.call(p.concat(v),e)&&delete t.value,n=t.op,0<=k.call(r.concat(v),n)&&delete t.values,"ISA"===t.op&&delete t.op,t}},{key:"getValueControls",value:function(){return null==this.path?null:this.isNullConstraint()?null:this.isTypeConstraint()?new b({model:this.model,query:this.query}):this.isMultiValueConstraint()?new m({model:this.model,query:this.query}):this.isListConstraint()?new h({model:this.model,query:this.query}):this.isBooleanConstraint()?new o({model:this.model,query:this.query}):this.isLoopConstraint()?new d({model:this.model,query:this.query}):this.isLookupConstraint()?new f({model:this.model,query:this.query}):this.isRangeConstraint()?new m({model:this.model,query:this.query}):this.path.isAttribute()?new e({model:this.model,query:this.query}):(this.model.set({error:new Error("cannot handle this constaint type")}),null)}},{key:"isNullConstraint",value:function(){var t;return t=this.model.get("op"),0<=k.call(v,t)}},{key:"isLoopConstraint",value:function(){var t;return this.path.isClass()&&("="===(t=this.model.get("op"))||"!="===t)}},{key:"isTypeConstraint",value:function(){return this.path.isReference()&&(!this.model.get("op")||"ISA"===this.model.get("op"))}},{key:"isBooleanConstraint",value:function(){var t,e;return t=this.path.getType(),0<=k.call(s,t)&&(e=this.model.get("op"),!(0<=k.call(v,e)))}},{key:"isMultiValueConstraint",value:function(){var t;return this.path.isAttribute()&&(t=this.model.get("op"),0<=k.call(p,t))}},{key:"isListConstraint",value:function(){var t;return this.path.isClass()&&(t=this.model.get("op"),0<=k.call(c,t))}},{key:"isLookupConstraint",value:function(){var t;return this.path.isClass()&&(t=this.model.get("op"),0<=k.call(y.TERNARY_OPS,t))}},{key:"isRangeConstraint",value:function(){var t;return this.path.isReference()&&(t=this.model.get("op"),0<=k.call(y.RANGE_OPS,t))}},{key:"getOtherOperators",value:function(){return w.without(C(this.model.pick("new","path")),this.model.get("op"))}},{key:"buttons",value:function(){var t;return null!=this.buttonDelegate?[]:(t=[{key:"conbuilder.Update",classes:"im-update"},{key:"conbuilder.Cancel",classes:"btn-cancel"}],this.model.get("new")?(t[0].key="conbuilder.Add",t[1].classes="im-remove-constraint"):t.push({key:"conbuilder.Remove",classes:"btn btn-default im-remove-constraint"}),t)}},{key:"getData",value:function(){var t,e,n,i,r,s;return e=this.buttons(),r=g,i=u,s=this.getOtherOperators(),n=this.model.toJSON(),_defineProperty2(t={buttons:e,icons:i,messages:r},"icons",i),_defineProperty2(t,"otherOperators",s),_defineProperty2(t,"con",n),t}},{key:"render",value:function(){return _get(_getPrototypeOf(n.prototype),"render",this).call(this),this.renderChild("valuecontrols",this.getValueControls(),this.$(".im-value-options")),this.renderChild("error",new l({model:this.model})),null!=this.buttonDelegate&&this.delegateButtonEvents(),this}},{key:"remove",value:function(){var t,e=this;return null!=(t=this.buttonDelegate)&&t.off("click.constraint-editor"),this.$el.slideUp({always:function(){return _get(_getPrototypeOf(n.prototype),"remove",e).call(e)}})}}]),n}();return t.prototype.tagName="div",t.prototype.className="form",t.prototype.parameters=["query","model"],t.prototype.optionalParameters=["buttonDelegate"],t.prototype.template=n,t}.call(this)}).call(this)},{"../core-view":3,"../icons":14,"../messages":16,"./attribute-value-controls":113,"./boolean-value-controls":114,"./error-message":137,"./list-value-controls":193,"./lookup-value-controls":194,"./loop-value-controls":195,"./multi-value-controls":198,"./type-value-controls":228,imjs:247,underscore:262}],130:[function(c,h,t){(function(){var e,s,n,o,i,r,a=[].indexOf,l=[].splice;r=c("underscore"),n=c("../messages"),i=c("../templates"),e=c("../core-view");var t=c("../patterns");s=t.IS_BLANK;var u=c("imjs");o=u.Query,u.Model,n.set({"consummary.IsA":"is a","consummary.NoValue":"no value"}),h.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(n,"change",this.reRender)}},{key:"getData",value:function(){return r.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{labels:this.getSummary()})}},{key:"getTitleOp",value:function(){return this.model.get("op")||n.getText("consummary.IsA")}},{key:"modelEvents",value:function(){return{change:this.reRender}}},{key:"events",value:function(){return{"click .label-path":function(){return this.state.toggle("showFullPath")}}}},{key:"stateEvents",value:function(){return{"change:showFullPath":this.toggleFullPath}}},{key:"toggleFullPath",value:function(){return this.$(".label-path").toggleClass("im-show-full-path",!!this.state.get("showFullPath"))}},{key:"postRender",value:function(){return this.toggleFullPath()}},{key:"getTitleVal",value:function(){var t,e,n,i,r;return this.model.has("values")&&(n=this.model.get("op"),0<=a.call(o.MULTIVALUE_OPS.concat(o.RANGE_OPS),n))?(r=this.model.get("values"))?1===r.length?r[0]:0===r.length?"[ ]":5<r.length?r.length+" values":(t=_toArray(r).slice(0),e=_slicedToArray(l.call(t,-1),1)[0],t.join(", ")+" and "+e):void 0:this.model.has("value")?this.model.get("value"):null!=(i=this.model.get("typeName"))?i:this.model.get("type")}},{key:"isLookup",value:function(){return"LOOKUP"===this.model.get("op")}},{key:"getPathLabel",value:function(){var t,e,n,i,r=this.model.toJSON();return i=r.title,t=r.displayName,e=r.path,{content:String(null!=(n=null!=i?i:t)?n:e),type:"path"}}},{key:"getSummary",value:function(){var t,e,n,i,r;return(t=[]).push(this.getPathLabel()),(n=this.getTitleOp())&&t.push({content:n,type:"op"}),i=this.model.get("op"),a.call(o.NULL_OPS,i)<0&&(null==(r=this.getTitleVal())||s.test(r)?(e=this.model.get("new")?"warning":"error",t.push({content:"NoValue",type:e})):t.push({content:r,type:"value"}),this.isLookup()&&this.model.has("extraValue")&&t.push({content:this.model.get("extraValue"),type:"extra",icon:"ExtraValue"})),t}}]),t}();return t.prototype.tagName="ol",t.prototype.className="constraint-summary breadcrumb",t.prototype.template=i.template("constraint-summary"),t}.call(this)}).call(this)},{"../core-view":3,"../messages":16,"../patterns":64,"../templates":67,imjs:247,underscore:262}],131:[function(t,s,e){(function(){var o,e,i,n,r;r=t("underscore"),i=t("../core-view"),n=t("../templates"),e=t("./constraint-adder"),o=t("./active-constraint"),t("../messages/constraints"),s.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,i),_createClass2(n,[{key:"initialize",value:function(t){var e=t.query;return this.query=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.listenTo(this.query,"change:constraints",this.reRender)}},{key:"getData",value:function(){return r.extend(_get(_getPrototypeOf(n.prototype),"getData",this).call(this),{constraints:this.getConstraints()})}},{key:"events",value:function(){return{click:function(t){return null!=t?t.stopPropagation():void 0}}}},{key:"postRender",value:function(){var t,e,n,i,r,s;for(e=this.$(".im-active-constraints"),n=i=0,r=(s=this.getConstraints()).length;i<r;n=++i)t=s[n],this.renderChild("con_"+n,new o({query:this.query,constraint:t}),e);return this.renderChild("conAdder",this.getConAdder())}},{key:"getConstraints",value:function(){return this.query.constraints.slice()}},{key:"getConAdder",value:function(){return new e({query:this.query})}}]),n}();return t.prototype.className="im-constraints",t.prototype.template=n.templateFromParts(["constraints-heading","active-constraints"]),t}.call(this)}).call(this)},{"../core-view":3,"../messages/constraints":21,"../templates":67,"./active-constraint":112,"./constraint-adder":128,underscore:262}],132:[function(t,s,e){(function(){var e,n,i,r;r=t("underscore"),e=t("../../core-view"),n=t("../../messages"),i=t("../../models/path"),t("../../messages/constraints"),s.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"template",value:function(t){return r.escape(n.getText("constraints.AddConFor",t))}},{key:"getData",value:function(){return r.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{hideType:this.hideType})}},{key:"modelEvents",value:function(){return{change:this.reRender}}},{key:"events",value:function(){return{click:function(){return this.trigger("chosen",this.model.get("path"))}}}}]),t}();return t.prototype.Model=i,t.prototype.tagName="button",t.prototype.className="btn btn-primary im-add-constraint",t.prototype.optionalParameters=["hideType"],t.prototype.hideType=!1,t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/constraints":21,"../../models/path":56,underscore:262}],133:[function(t,r,e){(function(){var h,e,n,f,d,p,o,i;i=t("underscore"),n=t("../../core-view"),p=t("../../models/path"),t("../../templates"),t("../../messages"),e=t("../constraint-adder"),h=t("./column-adder-button"),t("../../messages/constraints"),f=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"initState",value:function(){return this.state.set({open:!1})}},{key:"stateEvents",value:function(){return{"change:open":this.toggleOpen}}},{key:"toggleOpen",value:function(){return this.$el.toggleClass("open",this.state.get("open"))}},{key:"postRender",value:function(){var t,e,n,i,r,s;for(this.toggleOpen(),this.renderChild("main",this.main),this.renderChild("toggle",new o({state:this.state})),(s=document.createElement("ul")).className="dropdown-menu",t=e=0,i=(r=this.options).length;e<i;t=++e)n=r[t],this.renderChild(t,n,s);return this.$el.append(s)}}]),t}();return t.prototype.className="btn-group",t.prototype.parameters=["main","options"],t.prototype.ICONS="NONE",t}.call(this),o=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"events",value:function(){return{click:function(){return this.state.toggle("open")}}}}]),t}();return t.prototype.tagName="button",t.prototype.className="btn btn-primary dropdown-toggle",t.prototype.ICONS="NONE",t.prototype.template=i.template('<span class="caret"></span>\n<span class="sr-only"><%- Messages.getText(\'constraints.OtherPaths\') %></span>'),t}.call(this),d=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,h),_createClass2(t,[{key:"template",value:function(){return"<a>"+_get(_getPrototypeOf(t.prototype),"template",this).call(this)+"</a>"}}]),t}();return t.prototype.tagName="li",t.prototype.className="",t}.call(this),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"onChosen",value:function(t){return this.model.set({constraint:{path:t}})}},{key:"renderOptions",value:function(){}},{key:"showTree",value:function(){var t,e,n,i,r,s,o,a,l,u,c=_toArray(this.paths);for(o=c[0],l=c.slice(1),r=new h({hideType:!0,model:new p(o)}),s=function(){var t,e,n;for(n=[],t=0,e=l.length;t<e;t++)a=l[t],n.push(new d({hideType:!0,model:new p(a)}));return n}(),e=new f({main:r,options:s}),n=0,i=(u=[r].concat(_toConsumableArray(s))).length;n<i;n++)t=u[n],this.listenTo(t,"chosen",this.onChosen);return this.renderChild("tree",e,this.$(".im-constraint-adder-options"))}}]),t}();return t.prototype.parameters=["query","paths"],t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/constraints":21,"../../models/path":56,"../../templates":67,"../constraint-adder":128,"./column-adder-button":132,underscore:262}],134:[function(t,e,n){(function(){var n,i,r;t("underscore"),t("../../core-view"),r=t("../../models/path"),t("../../templates"),t("../../messages"),i=t("../constraint-adder"),n=t("./column-adder-button"),t("../../messages/constraints"),e.exports=function(){var t=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,i),_createClass2(e,[{key:"initialize",value:function(){var t;return _get(_getPrototypeOf(e.prototype),"initialize",this).call(this),t={path:this.path},this.model.set({constraint:t})}},{key:"events",value:function(){return{"click .im-add-constraint":this.act}}},{key:"act",value:function(){return this.hideTree(),this.renderConstraintEditor()}},{key:"renderOptions",value:function(){}},{key:"showTree",value:function(){var t;return t=new r(this.query.makePath(this.path)),new n({model:t}),this.renderChild("tree",new n({model:t}),this.$(".im-constraint-adder-options"))}}]),e}();return t.prototype.parameters=["query","path"],t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/constraints":21,"../../models/path":56,"../../templates":67,"../constraint-adder":128,"./column-adder-button":132,underscore:262}],135:[function(t,n,e){(function(){var s,e,o;e=t("../constraints"),o=t("./single-column-adder"),s=t("./composed-column-adder"),n.exports=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"getConAdder",value:function(){var t,e,n,i;if(this.shouldShowAdder()){var r=this.model.attributes;return i=r.replaces,t=r.isComposed,e=r.outerJoined,n=this.model.pathInfo(),t&&1<i.length?new s({query:this.query,paths:i}):e?new s({query:this.query,paths:[n].concat(i)}):new o({query:this.query,path:n})}}},{key:"shouldShowAdder",value:function(){var t,e,n,i=this.model.attributes;return e=i.numeric,t=i.isComposed,n=i.outerJoined,e||t||n||!this.getConstraints().length}},{key:"getConstraints",value:function(){var t,e,n,i,r,s;for(s=this.model.get("path"),r=[],e=0,n=(i=this.query.constraints).length;e<n;e++)(t=i[e]).path.match(s)&&r.push(t);return r}}]),t}()}).call(this)},{"../constraints":131,"./composed-column-adder":133,"./single-column-adder":134}],136:[function(h,f,t){(function(){var i,e,r,s,o,a,l,n,u,c;c=h("underscore"),r=h("../core-view"),s=h("../models/history"),n=h("../models/table"),a=h("../models/selected-objects");var t=h("../utils/events");i=t.Bus,e=h("../utils/children"),u=h("../core/type-assertions"),l=h("./table"),o=h("./query-tools"),f.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,r),_createClass2(n,[{key:"initialize",value:function(t){var e=t.query;if(!u.Query.test(e)&&null==e)throw new Error("Bad arguments to Dashboard - {query :: imjs.Query} is required");if(_get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.history=new s,this.bus=new i,this.history.setInitialState(e),this.selectedObjects=new a(e.service),null!=this.consumerContainer&&c.isString(this.consumerContainer)&&(this.consumerContainer=document.querySelector(this.consumerContainer),!this.consumerContainer))return console.log("consumerContainer provided as selector - but no matching element was found")}},{key:"renderChildren",value:function(){return this.renderQueryTools(),this.renderTable()}},{key:"renderTable",value:function(){var t;return t=e.createChild(this,l),this.renderChild("table",t)}},{key:"renderQueryTools",value:function(){var t;return t=e.createChild(this,o,{tableState:this.model}),this.renderChild("tools",t)}},{key:"remove",value:function(){return this.bus.destroy(),this.history.close(),_get(_getPrototypeOf(n.prototype),"remove",this).call(this)}}]),n}();return t.prototype.tagName="div",t.prototype.className="imtables-dashboard container-fluid",t.prototype.Model=n,t.prototype.optionalParameters=["consumerContainer","consumerBtnClass"],t}.call(this)}).call(this)},{"../core-view":3,"../core/type-assertions":10,"../models/history":45,"../models/selected-objects":58,"../models/table":61,"../utils/children":76,"../utils/events":81,"./query-tools":208,"./table":209,underscore:262}],137:[function(t,r,e){(function(){var e,n,i;t("underscore"),t("fs"),e=t("../core-view"),n=t("../icons"),i=t("../templates"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"modelEvents",value:function(){return{"change:error":this.reRender}}},{key:"getData",value:function(){return{icons:n,error:this.model.get("error")}}},{key:"logError",value:function(){var t;if(t=this.model.get("error"))return console.error(t,t.stack)}}]),t}();return t.prototype.className="im-error-message",t.prototype.template=i.template("error-message"),t}.call(this)}).call(this)},{"../core-view":3,"../icons":14,"../templates":67,fs:263,underscore:262}],138:[function(t,P,e){(function(){function n(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}var i,r,s,e,o,a,l,u,c,h,f,d,p,g,m,v,y,_,b,w,C,k,x,T,S,E,O;k=t("underscore"),t("jquery"),m=t("../core-model"),g=t("./modal"),t("./constraint-adder"),p=t("../messages"),w=t("../templates"),v=t("../options"),c=t("../models/export-formats"),b=t("../mixins/runs-query"),d=t("./export-dialogue/tab-menu"),u=t("./export-dialogue/format-controls"),_=t("./export-dialogue/row-controls"),i=t("./export-dialogue/column-controls"),r=t("./export-dialogue/compression-controls"),l=t("./export-dialogue/flat-file-options"),f=t("./export-dialogue/json-options"),a=t("./export-dialogue/fasta-options"),s=t("./export-dialogue/destination-options"),y=t("./export-dialogue/preview"),t("../utils/open-window-with-post"),T=t("../utils/send-to-dropbox"),O=t("../utils/send-to-google-drive"),S=t("../utils/send-to-galaxy"),E=t("../utils/send-to-genomespace"),h={doneness:null,tab:"dest",dest:"download",linkToFile:null},o=["progress_bar","modal_error","export_dialogue_footer"],C=function(){function e(t){_classCallCheck2(this,e),this.key="export.error."+t,this.message=p.get(this.key)}return e.prototype.cannotDismiss=!0,e}.call(this),e=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,m),_createClass2(t,[{key:"defaults",value:function(){return{filename:"results",format:c.getFormat("tab"),tablePage:null,start:0,columns:[],size:null,max:null,compress:!1,compression:"gzip",headers:!1,jsonFormat:"rows",fastaExtension:null,headerType:"friendly"}}}]),t}(),x=function(e){return function(t){return t.isa(e)}},P.exports=function(){var t=function(){function e(){var t;return _classCallCheck2(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).onUploadComplete=t.onUploadComplete.bind(_assertThisInitialized(t)),t.onUploadProgress=t.onUploadProgress.bind(_assertThisInitialized(t)),t.onUploadError=t.onUploadError.bind(_assertThisInitialized(t)),t}return _inherits(e,g),_createClass2(e,[{key:"className",value:function(){return"im-export-dialogue "+_get(_getPrototypeOf(e.prototype),"className",this).call(this)}},{key:"initialize",value:function(){return _get(_getPrototypeOf(e.prototype),"initialize",this).call(this),this.model.has("format")&&!this.model.get("format").ext&&this.model.set({format:c.getFormat(this.model.get("format"))}),this.state.set(h),this.listenTo(this.state,"change:tab",this.renderMain),this.listenTo(this.model,"change",this.updateState),this.listenTo(this.model,"change:columns",this.setMax),this.listenTo(this.model,"change:format",this.onChangeFormat),this.categoriseQuery(),this.model.set({columns:this.query.views}),null!=this.query.name&&this.model.set({filename:this.query.name.replace(/\s+/g,"_")}),this.updateState(),this.setMax(),this.readUserPreferences()}},{key:"onChangeFormat",value:function(){var d=this;return k.defer(function(){var t,e,n,i,r,s,o,a,l,u,c,h,f;if(n=d.model.get("format"),t=d.model.get("columns"),null!=(c=n.needs)?c.length:void 0){for(l=t.slice(),o=[],i=0,r=(h=d.query.views).length;i<r;i++)f=h[i],u=d.query.makePath(f).getParent(),k.any(n.needs,function(t){return u.isa(t)})&&o.push(u.append("id").toString());return a=k.uniq(o),d.model.set({nodecolumns:a}),e=(s=n.maxColumns)?k.first(a,s):a.slice(),d.model.set({columns:e}),d.model.once("change:format",function(){return d.model.set({columns:l}),d.model.unset("nodecolumns")})}})}},{key:"readUserPreferences",value:function(){return this.query.service.whoami().then(function(t){var e;if(t.hasPreferences)return(e=t.preferences["galaxy-url"])?v.set("Destination.Galaxy.Current",e):void 0})}},{key:"setMax",value:function(){var e=this;return this.getEstimatedSize().then(function(t){return e.model.set({max:t})})}},{key:"categoriseQuery",value:function(){var t,e,n,i;for(n in i=this.query.getViewNodes(),t={},e=this.query.model.classes)e[n],t[n]=k.any(i,x(n));return this.model.set({has:t})}},{key:"title",value:function(){return p.getText("ExportTitle",{name:this.query.name})}},{key:"primaryAction",value:function(){return p.getText(this.state.get("dest"))}},{key:"primaryIcon",value:function(){return this.state.get("dest")}},{key:"updateState",value:function(){var t,e,n,i,r,s,o,a,l=this.model.toJSON();return n=l.compress,i=l.compression,a=l.start,l.size,o=l.max,s=l.format,e=l.columns,t=k.isEqual(e,this.query.views)?p.get("All"):e.length,this.getRowCount(),r=0===e.length?new C("NoColumnsSelected"):o<=a?new C("OffsetOutOfBounds"):null,this.state.set(this.model.pick("headers","headerType","jsonFormat","fastaExtension")),this.state.set({error:r,format:s,max:o,exportURI:this.getExportURI(),rowCount:this.getRowCount(),compression:n?i:null,columns:t})}},{key:"getRowCount",value:function(){var t,e,n,i=this.model.pick("start","size","max");return n=i.start,e=i.size,t=i.max,null==n&&(n=0),t-=null!=n?n:0,e=null!=e&&0<e?e:t,Math.min(t,e)}},{key:"getMain",value:function(){switch(this.state.get("tab")){case"format":return u;case"columns":return i;case"compression":return r;case"column-headers":return l;case"opts-json":return f;case"opts-fasta":return a;case"dest":return s;case"rows":return _;case"preview":return y;default:return u}}},{key:"onUploadComplete",value:function(t){return n(this,e),this.state.set({doneness:null,linkToFile:t})}},{key:"onUploadProgress",value:function(t){return n(this,e),this.state.set({doneness:t})}},{key:"onUploadError",value:function(t){return n(this,e),this.state.set({doneness:null,error:t}),console.error(t)}},{key:"act",value:function(){var t,e,n,i,r,s,o,a,l,u,c=this;if(this.onUploadProgress(0),e=this.getExporter(),r=this.model,l=this.state,a=this.query,t={model:r.toJSON(),state:l.toJSON(),query:a.clone()},u=this.getExportURI(),i=this.getFileName(),s=this.onUploadProgress,(n=e.call(t,u,i,s)).then(this.onUploadComplete,this.onUploadError),null!=e.after)return o=e.after.bind(t),n.then(o,o).then(null,function(t){return c.state.set({error:t})})}},{key:"getExporter",value:function(){switch(this.state.get("dest")){case"download":return function(){return Promise.resolve(null)};case"Dropbox":return T;case"Drive":return O;case"Galaxy":return S;case"GenomeSpace":return E;default:throw new Error("Cannot export to "+this.state.get("dest"))}}},{key:"events",value:function(){var t;return(t=_get(_getPrototypeOf(e.prototype),"events",this).call(this)).keyup="handleKeyup",t}},{key:"handleKeyup",value:function(t){var e,n;if(!this.$(t.target).is("input"))switch(t.which){case 40:return null!=(e=this.children.menu)?e.next():void 0;case 38:return null!=(n=this.children.menu)?n.prev():void 0}}},{key:"renderMain",value:function(){var t;return t=this.getMain(),this.renderChild("main",new t({model:this.model,query:this.query,state:this.state}),this.$("div.main"))}},{key:"postRender",value:function(){return this.renderChild("menu",new d({model:this.state}),this.$("nav.menu")),this.renderMain(),this.$el.focus(),_get(_getPrototypeOf(e.prototype),"postRender",this).call(this)}}]),e}();return t.include(b),t.prototype.Model=e,t.prototype.parameters=["query"],t.prototype.modalSize="lg",t.prototype.body=w.template("export_dialogue"),t.prototype.footer=w.templateFromParts(o),t}.call(this)}).call(this)},{"../core-model":2,"../messages":16,"../mixins/runs-query":33,"../models/export-formats":42,"../options":63,"../templates":67,"../utils/open-window-with-post":94,"../utils/send-to-dropbox":100,"../utils/send-to-galaxy":101,"../utils/send-to-genomespace":102,"../utils/send-to-google-drive":103,"./constraint-adder":128,"./export-dialogue/column-controls":140,"./export-dialogue/compression-controls":141,"./export-dialogue/destination-options":142,"./export-dialogue/fasta-options":143,"./export-dialogue/flat-file-options":144,"./export-dialogue/format-controls":145,"./export-dialogue/json-options":146,"./export-dialogue/preview":148,"./export-dialogue/row-controls":149,"./export-dialogue/tab-menu":150,"./modal":197,jquery:256,underscore:262}],139:[function(t,r,e){(function(){var n,e,i;t("underscore"),i=t("../query-dialogue-button"),e=t("../export-dialogue"),n=t("../../utils/count-executor"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,i),_createClass2(t,[{key:"initialize",value:function(){var e=this;return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),n.count(this.query).then(function(t){return e.state.set({disabled:0===t})}).then(null,function(t){return e.state.set({disabled:!0,error:t})})}},{key:"initState",value:function(){return this.state.set({name:this.query.name})}},{key:"dialogueOptions",value:function(){var t,e;return t=null!=(e=this.tableState)?e.pick("start","size"):void 0,{query:this.query,model:{tablePage:t}}}}]),t}();return t.prototype.className="im-export-dialogue-button",t.prototype.longLabel="export.ExportQuery",t.prototype.shortLabel="export.Export",t.prototype.icon="Download",t.prototype.optionalParameters=["tableState"],t.prototype.Dialogue=e,t}.call(this)}).call(this)},{"../../utils/count-executor":77,"../export-dialogue":138,"../query-dialogue-button":206,underscore:262}],140:[function(t,h,e){(function(){var e,r,n,i,s,y,o,a,l,_,u,c=[].indexOf;_=t("underscore"),l=t("../../core-view"),y=t("../../models/path-set"),i=t("../label-view"),s=t("../../messages"),a=t("../../templates"),n=t("../../mixins/has-typeaheads"),u=t("../../utils/path-suggester"),function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,i),t}();return t.prototype.template=_.partial(s.getText,"export.category.Columns"),t}.call(this),e=function(){var t=function(){function i(){return _classCallCheck2(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,l),_createClass2(i,[{key:"initialize",value:function(t){var e=t.columns,n=t.query;return this.columns=e,this.query=n,_get(_getPrototypeOf(i.prototype),"initialize",this).call(this),this.initSuggestions()}},{key:"addSuggestion",value:function(t){var n;if(!this.columns.contains(t))return this.suggestions.add(t),n=this.suggestions.get(t),t.getDisplayName(function(t,e){return n.set({error:t,name:e})})}},{key:"initSuggestions",value:function(){var r,t,e,s,n,i;for(this.suggestions=new y,i=[],t=0,e=(n=this.query.getQueryNodes()).length;t<e;t++)s=n[t],i.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=s.getChildNodes()).length;t<e;t++)(r=n[t]).isAttribute()&&(this.columns.contains(r)?i.push(void 0):i.push(this.addSuggestion(r)));return i}.call(this));return i}},{key:"postRender",value:function(){var t,e,n,i=this;return e=this.$("input"),n={minLength:1,highlight:!0},t={name:"view_suggestions",source:u(this.suggestions),displayKey:"name"},this.activateTypeahead(e,n,t,"Additional paths",function(t,e){var n;return n=e.item,i.columns.add(n,{active:!0})}),this.$(".im-help").tooltip()}}]),i}();return t.include(n),t.prototype.className="col-sm-8",t.prototype.template=a.template("export_add_column_control"),t}.call(this),o=function(){var t=function(){function i(){return _classCallCheck2(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,l),_createClass2(i,[{key:"initialize",value:function(t){var e=t.query,n=t.columns;return this.query=e,this.columns=n,_get(_getPrototypeOf(i.prototype),"initialize",this).call(this),this.setIsAll(),this.listenTo(this.columns,"change:active",this.setIsAll)}},{key:"setIsAll",value:function(){var r,t,e;return e=this.query.views,t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.columns.where({active:!0})).length;t<e;t++)r=n[t],i.push(r.get("item").toString());return i}.call(this),this.model.set({isAll:_.isEqual(e,t)})}},{key:"events",value:function(){return{"click button":"reset"}}},{key:"reset",value:function(){var n;return n=this.query.views,this.columns.each(function(t){var e;return e=t.get("item").toString(),t.set({active:_.any(n,function(t){return t===e})})})}}]),i}();return t.prototype.className="col-sm-4",t.prototype.RERENDER_EVENT="change:isAll",t.prototype.template=a.template("reset_button"),t}.call(this),r=function(){var t=function(){function i(){return _classCallCheck2(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,l),_createClass2(i,[{key:"initialize",value:function(){var t,e,n=this;if(_get(_getPrototypeOf(i.prototype),"initialize",this).call(this),this.model.has("active")||this.model.set({active:!0}),!this.model.has("name"))return this.model.set({name:null}),t=this.model.get("item"),"id"===(null!=(e=this.model.get("item").end)?e.name:void 0)&&(t=t.getParent()),t.getDisplayName(function(t,e){return n.model.set({error:t,name:e})})}},{key:"events",value:function(){var t=this;return{"click .im-active-state":function(){return t.model.toggle("active")}}}}]),i}();return t.prototype.RERENDER_EVENT="change",t.prototype.className="list-group-item",t.prototype.tagName="li",t.prototype.template=a.template("export_column_control"),t}.call(this),h.exports=function(){var t=function(){function v(){return _classCallCheck2(this,v),_possibleConstructorReturn(this,_getPrototypeOf(v).apply(this,arguments))}return _inherits(v,l),_createClass2(v,[{key:"initialize",value:function(t){var e,n,i,r,s,o,a,l,u,c,h,f,d,p,g,m=t.query;if(this.query=m,_get(_getPrototypeOf(v.prototype),"initialize",this).call(this),this.columns=new y,i=this.model.get("format"),e=this.model.get("columns"),!(null!=(d=i.needs)?d.length:void 0))for(r=0,a=(p=this.query.views).length;r<a;r++)g=p[r],f=this.query.makePath(g),this.columns.add(f,{active:_.any(e,function(t){return t===g})});for(s=0,l=e.length;s<l;s++)n=e[s],this.columns.add(this.query.makePath(n),{active:!0});if(h=this.model.get("nodecolumns"))for(o=0,u=h.length;o<u;o++)c=h[o],this.columns.add(this.query.makePath(c),{active:!1});return this.listenTo(this.columns,"add remove reset change:active",this.setColumns),this.listenTo(this.columns,"add remove reset",this.reRender)}},{key:"setColumns",value:function(t){var s,o,e,i,n,a=this;return o=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.columns.where({active:!0})).length;t<e;t++)s=n[t],i.push(s.get("item").toString());return i}.call(this),(e=this.model.get("format").maxColumns)&&null!=t&&o.length>e&&(i=t.get("item").toString(),n=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)(s=o[t])!==i&&n.push(s);return n}(),o=[i].concat(_.first(n,e-1)),_.defer(function(){var t,e,n,i,r;for(r=[],t=0,e=(n=a.columns.where({active:!0})).length;t<e;t++)s=n[t],r.push(s.set({active:(i=s.get("item").toString(),0<=c.call(o,i))}));return r})),this.model.set({columns:o})}},{key:"postRender",value:function(){var t,n,i=this;return n=this.$("ul"),t=this.$(".controls"),this.columns.each(function(t,e){return i.renderChild(e,new r({model:t}),n)}),this.renderChild("reset",new o({query:this.query,columns:this.columns}),t),this.renderChild("add",new e({query:this.query,columns:this.columns}),t)}}]),v}();return t.prototype.className="container-fluid",t.prototype.tagName="form",t.prototype.template=a.template("export_column_controls"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../mixins/has-typeaheads":32,"../../models/path-set":55,"../../templates":67,"../../utils/path-suggester":96,"../label-view":179,underscore:262}],141:[function(t,i,e){(function(){var e,n;t("underscore"),e=t("./main"),n=t("../../templates"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"setCompression",value:function(t){var e=this;return function(){return e.model.set({compression:t})}}},{key:"events",value:function(){var t=this;return{"click .im-compress":function(){return t.model.toggle("compress")},"click input[name=gzip]":this.setCompression("gzip"),"click input[name=zip]":this.setCompression("zip")}}}]),t}();return t.prototype.RERENDER_EVENT="change",t.prototype.tagName="form",t.prototype.template=n.template("export_compression_controls"),t}.call(this)}).call(this)},{"../../templates":67,"./main":147,underscore:262}],142:[function(t,l,e){(function(){var e,i,o,s,r,n,a;a=t("underscore"),e=t("../../core-view"),n=t("../../templates"),s=t("../../options"),o=t("../../models/export-formats"),i=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(s,"change:Destination.Galaxy.*",this.reRender)}},{key:"getData",value:function(){return a.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{Galaxy:s.get("Destination.Galaxy")})}},{key:"getTemplate",value:function(){switch(this.model.get("dest")){case"Galaxy":return this.galaxyTemplate;default:return function(){return""}}}},{key:"template",value:function(t){return this.getTemplate()(t)}},{key:"events",value:function(){return{"change .im-galaxy-uri-param":"setGalaxyUri","change .im-save-galaxy input":"toggleSaveGalaxy"}}},{key:"setGalaxyUri",value:function(t){var e=t.target;return s.set("Destination.Galaxy.Current",e.value)}},{key:"toggleSaveGalaxy",value:function(){var t,e;return e="Destination.Galaxy.Save",t=s.get(e),s.set(e,!t)}}]),t}();return t.prototype.RERENDER_EVENT="change:dest",t.prototype.galaxyTemplate=n.template("export_destination_galaxy_options"),t}.call(this),r=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"destinations",value:function(){var t,e,n,i,r;for(r=[],e=0,n=(i=s.get("Destinations")).length;e<n;e++)t=i[e],s.get(["Destination",t,"Enabled"])&&r.push(t);return r}},{key:"getData",value:function(){return a.extend({destinations:this.destinations()},_get(_getPrototypeOf(t.prototype),"getData",this).call(this))}},{key:"setDest",value:function(t){var e=this;return function(){return e.model.set({dest:t})}}},{key:"events",value:function(){var r;return a.object(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.destinations()).length;t<e;t++)r=n[t],i.push(["click .im-dest-"+r,this.setDest(r)]);return i}.call(this))}}]),t}();return t.prototype.RERENDER_EVENT="change:dest",t.prototype.template=n.template("export_destination_radios"),t}.call(this),l.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass2(n,[{key:"getData",value:function(){var t,e;return e=this.model.get("has"),t=o.getFormats(e),a.extend({formats:t},_get(_getPrototypeOf(n.prototype),"getData",this).call(this))}},{key:"postRender",value:function(){return this.renderChildAt(".im-param-dest",new r({model:this.state})),this.renderChildAt(".im-dest-opts",new i({model:this.state}))}},{key:"events",value:function(){var t,e,n,i,r,s;for(t={".change .im-param-name input":"setName"},s=this.model.get("has"),n=0,i=(r=o.getFormats(s)).length;n<i;n++)t["click .im-fmt-"+(e=r[n]).id]=this.setFormat.bind(this,e);return t}},{key:"setName",value:function(t){return this.model.set({filename:t.target.value})}},{key:"setFormat",value:function(t){return this.model.set({format:t})}}]),n}();return t.prototype.RERENDER_EVENT="change:format",t.prototype.template=n.template("export_destination_options"),t}.call(this)}).call(this)},{"../../core-view":3,"../../models/export-formats":42,"../../options":63,"../../templates":67,underscore:262}],143:[function(t,i,e){(function(){var e,n;t("underscore"),n=t("../../core-view"),t("../label-view"),t("../../messages"),e=t("../../templates"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"setFastaExtension",value:function(t){return this.model.set({fastaExtension:t})}},{key:"events",value:function(){var e=this;return{"change .im-fasta-ext":function(t){return e.setFastaExtension(t.target.value)}}}}]),t}();return t.prototype.RERENDER_EVENT="change",t.prototype.tagName="form",t.prototype.template=e.template("export_fasta_options"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../templates":67,"../label-view":179,underscore:262}],144:[function(t,i,e){(function(){var e,n;t("underscore"),n=t("../../core-view"),e=t("../../templates"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"setHeaderType",value:function(t){var e=this;return function(){return e.model.set({headerType:t})}}},{key:"events",value:function(){var t=this;return{"click .im-headers":function(){return t.model.toggle("headers")},"click input[name=hdrs-friendly]":this.setHeaderType("friendly"),"click input[name=hdrs-path]":this.setHeaderType("path")}}}]),t}();return t.prototype.RERENDER_EVENT="change",t.prototype.tagName="form",t.prototype.template=e.template("export_flat_file_options"),t}.call(this)}).call(this)},{"../../core-view":3,"../../templates":67,underscore:262}],145:[function(t,l,e){(function(){var i,e,n,r,s,o,a;a=t("underscore"),o=t("../../core-view"),r=t("../../messages"),s=t("../../templates"),n=t("../label-view"),i=t("../../models/export-formats"),e=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),t}();return t.prototype.template=a.partial(r.getText,"export.category.Format"),t}.call(this),l.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,o),_createClass2(n,[{key:"getData",value:function(){var t,e;return e=this.model.get("has"),t=i.getFormats(e),a.extend({formats:t},_get(_getPrototypeOf(n.prototype),"getData",this).call(this))}},{key:"events",value:function(){return{"change input:radio":"onChangeFormat"}}},{key:"onChangeFormat",value:function(){return this.model.set({format:this.$("input:radio:checked").val()})}},{key:"postRender",value:function(){return this.renderChild("heading",new e({model:this.model}),this.$(".im-title"))}}]),n}();return t.prototype.tagName="form",t.prototype.template=s.template("export_format_controls"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../models/export-formats":42,"../../templates":67,"../label-view":179,underscore:262}],146:[function(t,i,e){(function(){var e,n;t("underscore"),n=t("../../core-view"),t("../label-view"),t("../../messages"),e=t("../../templates"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"setJSONFormat",value:function(t){var e=this;return function(){return e.model.set({jsonFormat:t})}}},{key:"events",value:function(){return{"click input[name=rows]":this.setJSONFormat("rows"),"click input[name=objects]":this.setJSONFormat("objects")}}}]),t}();return t.prototype.RERENDER_EVENT="change",t.prototype.tagName="form",t.prototype.template=e.template("export_json_options"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../templates":67,"../label-view":179,underscore:262}],147:[function(e,n,t){(function(){var t;t=e("../../core-view"),n.exports=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,t),_createClass2(n,[{key:"initialize",value:function(t){var e=t.query;return this.query=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this)}}]),n}()}).call(this)},{"../../core-view":3}],148:[function(t,a,e){(function(){var e,i,r,n,s,o;o=t("underscore"),e=t("../../core-view"),t("../../messages"),s=t("../../templates"),i=t("../../models/export-formats"),n=t("../../mixins/runs-query"),r={compress:null,size:3},a.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass2(n,[{key:"initialize",value:function(t){var e=t.query;return this.query=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.state.set({preview:""}),this.setPreview(),this.listenTo(this.state,"change:preview",this.reRender),this.listenTo(this.model,"change:format",this.setPreview)}},{key:"setPreview",value:function(){var e=this;return"bio"===this.model.get("format").group?this.state.set({preview:"Previews are not supported for bio-informatics formats"}):this.runQuery(r).then(function(t){return o.isString(t)?e.state.set({preview:t}):e.state.set({preview:JSON.stringify(t,null,2)})})}},{key:"getData",value:function(){var t,e;return e=this.model.get("has"),t=i.getFormats(e),o.extend({formats:t},_get(_getPrototypeOf(n.prototype),"getData",this).call(this))}},{key:"events",value:function(){return{"change .im-export-formats select":"setFormat"}}},{key:"setFormat",value:function(t){return this.model.set({format:i.getFormat(t.target.value)})}}]),n}();return t.include(n),t.prototype.template=s.template("export_preview"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../mixins/runs-query":33,"../../models/export-formats":42,"../../templates":67,underscore:262}],149:[function(t,c,e){(function(){var e,n,i,r,s,o,a,l,u;u=t("underscore"),l=t("../../core-view"),n=t("../label-view"),i=t("../../messages"),a=t("../../templates"),o=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"getData",value:function(){return{size:this.model.get("size")||i.getText("rows.All")}}}]),t}();return t.prototype.template=u.partial(i.getText,"export.param.Size"),t}.call(this),r=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),t}();return t.prototype.template=u.partial(i.getText,"export.param.Start"),t}.call(this),e=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),t}();return t.prototype.template=u.partial(i.getText,"export.category.Rows"),t}.call(this),s=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,l),_createClass2(t,[{key:"getData",value:function(){return u.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{isAll:!(this.model.get("start")||this.model.get("size"))})}},{key:"events",value:function(){return{"click .btn-reset":"reset","click .im-set-table-page":"setTablePage"}}},{key:"reset",value:function(){return this.model.set({start:0,size:null})}},{key:"setTablePage",value:function(){return this.model.set(this.model.get("tablePage"))}}]),t}();return t.prototype.RERENDER_EVENT="change",t.prototype.template=a.template("export_rows_reset_button"),t}.call(this),c.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,l),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.model.has("max")||this.model.set({max:null}),this.listenTo(this.model,"change:size",this.updateLabels),this.listenTo(this.model,"change:size change:start",this.updateInputs)}},{key:"events",value:function(){return{"input input[name=size]":"onChangeSize","input input[name=start]":"onChangeStart"}}},{key:"updateInputs",value:function(){var t,e,n,i=this.model.toJSON();return n=i.start,e=i.size,t=i.max,this.$("input[name=size]").val(e||t),this.$("input[name=start]").val(n)}},{key:"onChangeSize",value:function(){var t;return(t=parseInt(this.$("input[name=size]").val(),10))&&t!==this.model.get("max")?this.model.set({size:t}):this.model.set({size:null})}},{key:"onChangeStart",value:function(){return this.model.set({start:parseInt(this.$("input[name=start]").val(),10)})}},{key:"postRender",value:function(){return this.renderChild("heading",new e({model:this.state}),this.$(".im-title")),this.renderChild("size",new o({model:this.model}),this.$(".size-label")),this.renderChild("start",new r({model:this.model}),this.$(".start-label")),this.renderChild("reset",new s({model:this.model}),this.$(".im-reset"))}}]),t}();return t.prototype.RERENDER_EVENT="change:max",t.prototype.tagName="form",t.prototype.template=a.template("export_row_controls"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../templates":67,"../label-view":179,underscore:262}],150:[function(r,l,t){(function(){var n,s,t,e,i,o,a=[].indexOf;o=r("underscore"),i=r("../../core-view"),n=r("../../options"),e=r("../../templates"),s=[new(t=function(){function r(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck2(this,r),this.ident=t,this.formats=n,this.groups=i,this.key="export.category."+e}return _createClass2(r,[{key:"isFor",value:function(t){var e;return this.formats.length?(e=t.ext,0<=a.call(this.formats,e)):null==this.groups||this.groups[t.group]}}]),r}())("dest","Destination"),new t("opts-json","JsonFormat",["json"]),new t("opts-fasta","FastaFormat",["fasta"]),new t("columns","Columns"),new t("rows","Rows",[],{flat:!0,machine:!0}),new t("compression","Compression"),new t("column-headers","ColumnHeaders",["tsv","csv"]),new t("preview","Preview")],l.exports=function(){var t=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,i),_createClass2(e,[{key:"getTabs",value:function(){var t,e,n,i;for(n=[],t=0,e=s.length;t<e;t++)(i=s[t]).isFor(this.model.get("format"))&&n.push(i);return n}},{key:"getData",value:function(){var t;return t=this.getTabs(),o.extend({tabs:t},_get(_getPrototypeOf(e.prototype),"getData",this).call(this))}},{key:"setTab",value:function(t){var e=this;return function(){if(!e.state.get("pinned"))return e.model.set({tab:t})}}},{key:"setPinned",value:function(t){var e=this;return function(){return e.state.get("pinned")===t?e.state.set({pinned:!1}):e.state.set({pinned:t}),e.model.set({tab:t})}}},{key:"next",value:function(){var t,r,e;return e=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getTabs()).length;t<e;t++)r=n[t],i.push(r.ident);return i}.call(this),t=o.indexOf(e,this.model.get("tab"))+1,t===e.length&&(t=0),this.model.set({tab:e[t]})}},{key:"prev",value:function(){var t,e,r,n;return n=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getTabs()).length;t<e;t++)r=n[t],i.push(r.ident);return i}.call(this),e=0===(t=o.indexOf(n,this.model.get("tab")))?n.length-1:t-1,this.model.set({tab:n[e]})}},{key:"events",value:function(){var t,i,r;return i=n.get("Events.ActivateTab"),t=o.object(function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)r=s[t].ident,n.push([i+" .im-tab-"+r,this.setTab(r)]);return n}.call(this)),"mouseenter"===i&&o.extend(t,o.object(function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)r=s[t].ident,n.push(["click .im-tab-"+r,this.setPinned(r)]);return n}.call(this))),t}}]),e}();return t.prototype.tagName="ul",t.prototype.RERENDER_EVENT="change",t.prototype.className="nav nav-pills nav-stacked im-export-tab-menu",t.prototype.template=e.template("export_tab_menu",{variable:"data"}),t}.call(this)}).call(this)},{"../../core-view":3,"../../options":63,"../../templates":67,underscore:262}],151:[function(t,c,e){(function(){var n,i,r,s,o,a,e,l,u;t("../../event"),n=t("../../core-view"),o=t("../../options"),e=t("../../mixins/sets-path-names"),u=t("../../models/summary-items"),s=t("../../models/numeric-range"),l=t("./summary-heading"),i=t("./items"),a=t("./selected-count"),r=t("./visualisation"),c.exports=function(){var t=function(){function e(){var t;return _classCallCheck2(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).Model=t.Model.bind(_assertThisInitialized(t)),t}return _inherits(e,n),_createClass2(e,[{key:"className",value:function(){return"im-facet-view"}},{key:"modelEvents",value:function(){return{"change:min change:max":this.setLimits}}},{key:"stateEvents",value:function(){return{"change:open":this.honourOpenness}}},{key:"Model",value:function(){return function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,e),new u({query:this.query,view:this.view})}},{key:"initialize",value:function(){return _get(_getPrototypeOf(e.prototype),"initialize",this).call(this),this.range=new s,this.setPathNames(),this.setLimits()}},{key:"initState",value:function(){if(!this.state.has("open"))return this.state.set({open:o.get("Facets.Initally.Open")})}},{key:"setLimits",value:function(){if(this.model.get("numeric"))return this.range.setLimits(this.model.pick("min","max"))}},{key:"invariants",value:function(){return{hasQuery:"No query",hasAttrView:"The view is not an attribute: "+this.view,modelIsSummaryItemsModel:"The model is not a summary items model: "+this.model}}},{key:"modelIsSummaryItemsModel",value:function(){return this.model instanceof u}},{key:"hasQuery",value:function(){return null!=this.query}},{key:"hasAttrView",value:function(){var t;return null!=(t=this.view)&&"function"==typeof t.isAttribute?t.isAttribute():void 0}},{key:"postRender",value:function(){return this.renderTitle(),this.renderVisualisation(),this.renderSelectedCount(),this.renderItems(),this.honourOpenness()}},{key:"renderTitle",value:function(){if(!this.noTitle)return this.renderChild("title",new l({model:this.model,state:this.state}))}},{key:"renderVisualisation",value:function(){return this.renderChild("viz",new r({model:this.model,state:this.state,range:this.range}))}},{key:"renderSelectedCount",value:function(){return this.renderChild("count",new a({model:this.model,range:this.range}))}},{key:"renderItems",value:function(){return this.renderChild("facet",new i({model:this.model,state:this.state,range:this.range}))}},{key:"honourOpenness",value:function(){var t,e,n;if(e=this.state.get("open"),n=this.state.previous("open"),t=this.$("dd.im-facet"),e?(t.slideDown(),this.trigger("opened",this)):(t.slideUp(),this.trigger("closed",this)),null!=n&&e!==n)return this.trigger("toggled",this)}},{key:"events",value:function(){return{"click .im-summary-heading":"toggle"}}},{key:"toggle",value:function(){return this.state.toggle("open")}},{key:"close",value:function(){return this.state.set({open:!1})}},{key:"open",value:function(){return this.state.set({open:!0})}}]),e}();return t.include(e),t.prototype.parameters=["query","view"],t.prototype.optionalParameters=["noTitle"],t}.call(this)}).call(this)},{"../../core-view":3,"../../event":11,"../../mixins/sets-path-names":34,"../../models/numeric-range":50,"../../models/summary-items":60,"../../options":63,"./items":153,"./selected-count":160,"./summary-heading":161,"./visualisation":166}],152:[function(t,e,n){(function(){var a,n,i,r;i=t("d3-browserify"),t("underscore"),a=t("../../options"),t("../../messages"),n=t("./visualisation-base"),t("../../messages/summary"),t("../../utils/casts").bool,r=function(t,e){return i.scale.linear().domain(t).range(e)},e.exports=function(){var t=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,n),_createClass2(e,[{key:"allCountsAreOne",value:function(){return 1===this.model.get("maxCount")}},{key:"initialize",value:function(){var t=this;return _get(_getPrototypeOf(e.prototype),"initialize",this).call(this),this.listenTo(this.model.items,"add remove change:selected",function(){return t.updateChart()})}},{key:"invariants",value:function(){return{hasItems:"No items, or not the right thing: "+this.model.items}}},{key:"hasItems",value:function(){var t,e;return null!=(null!=(t=this.model)&&null!=(e=t.items)?e.models:void 0)}},{key:"initChart",value:function(){return _get(_getPrototypeOf(e.prototype),"initChart",this).call(this),this.stepWidth=(this.chartWidth-(this.leftMargin+this.rightMargin+1))/this.model.items.size()}},{key:"shouldNotDrawChart",value:function(){return this.allCountsAreOne()}},{key:"getScales",value:function(){var t,e,n,i;return e=[0,this.model.items.size()],t=[0,this.model.get("maxCount")],i=[0,this.chartHeight-this.bottomMargin],n=[this.leftMargin,this.chartWidth-this.rightMargin],{x:r(e,n),y:r(t,i)}}},{key:"selectNodes",value:function(t){return t.selectAll("rect")}},{key:"getChartData",value:function(t){return this.model.items.models.slice()}},{key:"enter",value:function(t,n){return t.append("rect").classed("im-item-bar",!0).classed("squashed",this.stepWidth<4).attr("width",this.stepWidth).attr("y",this.chartHeight).attr("height",0).attr("x",function(t,e){return n.x(e)}).on("click",function(t){return t.toggle("selected")}).on("mouseover",function(t){return t.mousein()}).on("mouseout",function(t){return t.mouseout()})}},{key:"update",value:function(t,e){var n,i,r,s,o=a.get("D3.Transition");return n=o.Duration,i=o.Easing,r=this.chartHeight-this.bottomMargin,s=function(t){return e.y(t.get("count"))},t.classed("selected",function(t){return t.get("selected")}),t.transition().duration(n).ease(i).attr("height",s).attr("y",function(t){return r-s(t)})}},{key:"drawAxes",value:function(t,e){var n;return n=this.chartHeight-this.bottomMargin,t.append("line").classed("x-axis",!0).attr("x1",0).attr("x2",this.chartWidth).attr("y1",n).attr("y2",n)}}]),e}();return t.prototype.className="im-summary-histogram",t.prototype.chartHeight=50,t.prototype.leftMargin=25,t.prototype.rightMargin=25,t.prototype.bottomMargin=.5,t.prototype.stepWidth=0,t}.call(this)}).call(this)},{"../../messages":16,"../../messages/summary":27,"../../options":63,"../../utils/casts":74,"./visualisation-base":165,"d3-browserify":237,underscore:262}],153:[function(t,u,e){(function(){var e,i,r,s,o,a,n,l;l=t("underscore"),e=t("../../core-view"),n=t("../../templates"),a=t("./summary-stats"),o=t("./summary-items"),r=t("./only-one-item"),i=t("./no-results"),s=["error","initialized"],u.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass2(n,[{key:"initialize",value:function(t){var e=t.range;return this.range=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this)}},{key:"invariants",value:function(){return{modelHasRequiredAttrs:"Model only has the following attributes: "+l.keys(this.model.attributes)}}},{key:"modelHasRequiredAttrs",value:function(){return 2===l.intersection(s,l.keys(this.model.attributes)).length}},{key:"modelEvents",value:function(){return{destroy:this.stopListening}}},{key:"postRender",value:function(){if(this.model.get("initialized"))return this.renderChild("items",this.getItems())}},{key:"getItems",value:function(){switch(!1){case!this.model.get("numeric"):return new a({model:this.model,range:this.range});case!(1<this.model.get("uniqueValues")):return new o({model:this.model});case 1!==this.model.get("uniqueValues"):return new r({model:this.model,state:this.state});default:return new i({model:this.state})}}}]),n}();return t.prototype.className="im-facet-items",t.prototype.template=n.template("facet_frequency"),t.prototype.RERENDER_EVENT="change:error change:numeric change:uniqueValues change:initialized",t}.call(this)}).call(this)},{"../../core-view":3,"../../templates":67,"./no-results":154,"./only-one-item":156,"./summary-items":163,"./summary-stats":164,underscore:262}],154:[function(t,i,e){(function(){var e,n;e=t("../../core-view"),n=t("../../templates"),t("../../messages/summary"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"stateEvents",value:function(){return{"change:pathName":this.reRender}}}]),t}();return t.prototype.className="im-no-results",t.prototype.renderRequires=["pathName"],t.prototype.template=n.template("summary_no_results"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages/summary":27,"../../templates":67}],155:[function(t,n,e){(function(){var l,u,c,e,h,a,f,d,p;f=t("d3-browserify"),l=t("jquery"),h=t("underscore"),c=t("../../options"),u=t("../../messages"),t("../../messages/summary"),e=t("./visualisation-base"),p=function(t,e){return f.scale.linear().domain(t).range(e)},a=function(r,s){var o,t=_slicedToArray(function(){var t,e,n,i;for(i=[],e=(n=[t=0,1]).length;t<e;t++)o=n[t],i.push(r(s+o));return i}(),2);return{min:t[0],max:t[1]}},d=function(e,n){return function(t){return t<e?e:n<t?n:t}},n.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass2(n,[{key:"initialize",value:function(t){var e=t.range;return this.range=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.listenTo(this.range,"change reset",this.onChangeRange)}},{key:"invariants",value:function(){return{hasRange:"No range",hasHistogramModel:"Wrong model: "+this.model}}},{key:"hasRange",value:function(){return null!=this.range}},{key:"hasHistogramModel",value:function(){var t;return null!=(null!=(t=this.model)?t.getHistogram:void 0)}},{key:"selectNodes",value:function(t){return t.selectAll("rect")}},{key:"getChartData",value:function(t){var e,n,i,r,s,o;for(null==t&&(t=this.getScales()),o=[],n=i=0,r=(s=this.model.getHistogram()).length;i<r;n=++i)e=s[n],o.push({count:e,bucket:n+1,range:a(t.bucketToVal,n+1)});return o}},{key:"initChart",value:function(){return _get(_getPrototypeOf(n.prototype),"initChart",this).call(this),this.bucketWidth=(this.model.get("max")-this.model.get("min"))/this.model.get("buckets"),this.stepWidth=(this.chartWidth-(this.leftMargin+1))/this.model.get("buckets")}},{key:"getScales",value:function(){var t,e,n,i,r,s,o,a,l,u,c=this.model.pick("min","max");return r=c.min,i=c.max,s=this.model.get("buckets"),n=this.model.getHistogram(),e=[0,f.max(n)],a=[r,i],t=[1,s+1],l=[this.leftMargin,this.chartWidth-this.rightMargin],u=[0,this.chartHeight-this.bottomMargin],o=function(t){return h.compose(d(r,i),p(t,a))},{x:p(t,l),y:p(e,u),valToX:p(a,l),xToVal:o(l),bucketToVal:o(t)}}},{key:"isIntish",value:function(){var t;return"int"===(t=this.model.get("type"))||"Integer"===t||"long"===t||"Long"===t||"short"===t||"Short"===t}},{key:"getRounder",value:function(){return this.isIntish()?Math.round:h.identity}},{key:"enter",value:function(t,n){var e,i,r,s,o,a=this;return null==n&&(n=this.getScales()),i=this.el,o=this.getRounder(),s=this.chartHeight,e=function(t,e){return 0<t.count?a.range.set(t.range):a.range.nullify()},r=function(t){var e=t.range,n=e.min,i=e.max,r=t.count;return u.getText("summary.Bucket",{count:r,range:{min:o(n),max:o(i)}})},t.append("rect").attr("x",function(t,e){return n.x(t.bucket)}).attr("width",function(t){return Math.max(0,n.x(t.bucket+1)-n.x(t.bucket))}).attr("y",s-this.bottomMargin).attr("height",0).classed("im-bucket",!0).classed("im-null-bucket",function(t){return null===t.bucket}).on("click",e).each(function(t){return l(this).tooltip({container:i,title:r(t)})})}},{key:"update",value:function(t,e){var n,i,r,s,o;null==e&&(e=this.getScales()),s=this.chartHeight,r=this.bottomMargin;var a=c.get("D3.Transition");return n=a.Duration,i=a.Easing,o=function(t){return e.y(t.count)},t.transition().duration(n).ease(i).attr("height",o).attr("y",function(t){return s-r-o(t)-.5})}},{key:"drawAxes",value:function(t,e){var n,i,r,s;return null==t&&(t=this.getCanvas()),null==e&&(e=this.getScales()),i=this.chartHeight-this.bottomMargin-.5,r=this.el,c.get("Facets.DrawAverageLine")&&t.append("line").classed("average",!0).attr("x1",e.valToX(this.model.get("average"))).attr("x2",e.valToX(this.model.get("average"))).attr("y1",0).attr("y2",i).each(function(){return l(this).tooltip({container:r,title:u.getText("summary.Average")})}),t.append("line").classed("axis",!0).attr("x1",0).attr("x2",this.chartWidth).attr("y1",i).attr("y2",i),n=t.append("svg:g"),s=e.x.ticks(this.model.get("buckets")),n.selectAll("line").data(s).enter().append("svg:line").classed("tick-line",!0).attr("x1",e.x).attr("x2",e.x).attr("y1",this.chartHeight-.75*this.bottomMargin).attr("y2",this.chartHeight-this.bottomMargin)}},{key:"events",value:function(){var t=this;return{mouseout:function(){return t.__selecting_paths=!1}}}},{key:"drawSelection",value:function(t,e){return null==t||t<=0||e>=this.chartWidth?this.removeSelection():(null==this.selection&&(this.selection=this.getCanvas().append("svg:rect").attr("y",0).attr("height",.9*this.chartHeight).classed("rubberband-selection",!0)),this.selection.attr("x",t).attr("width",e))}},{key:"onChangeRange",value:function(){var t,e,n,i,r;if(this.shouldDrawBox()){n=this.getScales();var s=this.range.toJSON();return e=s.min,t=s.max,i=n.valToX(e),r=n.valToX(t)-i,this.drawSelection(i,r)}return this.removeSelection()}},{key:"removeSelection",value:function(){var t;return null!=(t=this.selection)&&t.remove(),this.selection=null}},{key:"shouldDrawBox",value:function(){return this.range.isNotAll()}},{key:"remove",value:function(){var t;return this.removeSelection(),null!=(t=this.paper)&&t.remove(),_get(_getPrototypeOf(n.prototype),"remove",this).call(this)}}]),n}();return t.prototype.className="im-numeric-distribution",t.prototype.leftMargin=25,t.prototype.bottomMargin=18,t.prototype.rightMargin=14,t.prototype.chartHeight=70,t.prototype.__selecting_paths=!1,t.prototype.selection=null,t}.call(this)}).call(this)},{"../../messages":16,"../../messages/summary":27,"../../options":63,"./visualisation-base":165,"d3-browserify":237,jquery:256,underscore:262}],156:[function(t,i,e){(function(){var e,n;e=t("../../core-view"),n=t("../../templates"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"modelEvents",value:function(){return{change:this.reRender}}},{key:"stateEvents",value:function(){return{change:this.reRender}}}]),t}();return t.prototype.className="im-only-one",t.prototype.template=n.template("only_one_item"),t}.call(this)}).call(this)},{"../../core-view":3,"../../templates":67}],157:[function(t,m,e){(function(){var o,r,s,a,n,e,i,u,l,c,h,f,d,p,g;i=t("underscore"),o=t("jquery"),u=t("d3-browserify"),a=t("../../options"),e=t("./visualisation-base"),s=function(t){return t.data.get("id")},r=u.layout.pie().value(function(t){return t.get("count")}),n={startAngle:0,endAngle:0},h=function(){var t,e;return t=a.get("PieColors"),e=i.isFunction(t)?t:u.scale[t](),function(t){return e(t.data.get("id"))}},d=function(t){var e;return null!=(e=t.get("currentPieCoords"))?e:n},g=function(t){return t.data.get("visible")?1:.25},f=function(t,e,n){return{startAngle:t,endAngle:e,selected:n.get("selected")?1:0}},c=function(l){return function(t){var e,n,i,r,s=t.startAngle,o=t.endAngle,a=t.data;return r=d(i=a),e=f(s,o,i),n=u.interpolateObject(r,e),i.set({currentPieCoords:n(1)}),function(t){return l(n(t))}}},p=function(t){return(t.endAngle+t.startAngle)/2>Math.PI},l=function(e,n,i){return u.svg.arc().startAngle(function(t){return t.startAngle}).endAngle(function(t){return t.endAngle}).innerRadius(function(t){return n+t.selected*i}).outerRadius(function(t){return e+t.selected*i})},m.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this.model.items,"change:selected change:visible",this.update),this.listenTo(a,"change:PieColors",this.onChangePalette),this.onChangePalette()}},{key:"onChangePalette",value:function(){return this.colour=h(),this.update()}},{key:"_drawD3Chart",value:function(){var t,e,n,i,r,s,o;return n=this.chartHeight,o=this.$el.closest(":visible").width(),r=.4*n,i=.1*n,s=.08*n,e=u.select(this.el).append("svg").attr("class","chart").attr("height",n).attr("width",o),this.arc=l(r,i,s),this.arc_group=e.append("svg:g").attr("class","arc").attr("transform","translate("+o/2+","+n/2+")"),t=e.append("svg:g").attr("class","center_group").attr("transform","translate("+o/2+","+n/2+")"),e.append("svg:g").attr("class","label_group").attr("transform","translate("+o/2+","+n/2+")"),t.append("svg:circle").attr("fill","white").attr("r",i),this.update()}},{key:"enter",value:function(t){var e,r,s,n;return r=this.el,n=this.model.items.reduce(function(t,e){return t+e.get("count")},0),s=function(t){return(t.data.get("count")/n*100).toFixed(1)},e=function(t){var e,n,i;return e=o(this),i=t.data.get("item")+": "+s(t)+"%",n=p(t)?"left":"right",e.tooltip({title:i,placement:n,container:r})},t.append("svg:path").attr("class","donut-arc").on("click",function(t){return t.data.toggle("selected")}).on("mouseover",function(t){return t.data.mousein()}).on("mouseout",function(t){return t.data.mouseout()}).each(e)}},{key:"exit",value:function(t){return t.remove()}},{key:"getChartData",value:function(){return this.model.items.models.slice()}},{key:"update",value:function(){var t,e,n;if(null!=this.arc_group){n=this.arc_group.selectAll("path").data(r(this.getChartData()),s),this.exit(n.exit()),this.enter(n.enter());var i=a.get("D3.Transition");return t=i.DurationShort,e=i.Easing,n.attr("fill",this.colour),n.transition().duration(t).ease(e).style("opacity",g).attrTween("d",c(this.arc))}}}]),t}();return t.prototype.chartWidth=120,t.prototype.chartHeight=120,t.prototype.className="im-pie-chart",t}.call(this)}).call(this)},{"../../options":63,"./visualisation-base":165,"d3-browserify":237,jquery:256,underscore:262}],158:[function(t,r,e){(function(){var e,n,i;i=t("underscore"),e=t("../../core-view"),n=t("../../templates"),r.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass2(n,[{key:"initialize",value:function(t){var e=t.above;return this.above=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this)}},{key:"getData",value:function(){return i.extend(_get(_getPrototypeOf(n.prototype),"getData",this).call(this),{above:this.above})}},{key:"postRender",value:function(){return this.$el.addClass(this.above?"above":"below")}},{key:"remove",value:function(){var t=this;return this.$el.fadeOut("fast",function(){return _get(_getPrototypeOf(n.prototype),"remove",t).call(t)})}}]),n}();return t.prototype.className="im-facet-surrogate",t.prototype.template=n.template("row_surrogate"),t}.call(this)}).call(this)},{"../../core-view":3,"../../templates":67,underscore:262}],159:[function(t,r,e){(function(){var e,n,s,i,o,a;o=t("underscore"),n=t("../../core-view"),i=t("../../templates"),e=t("../../core/checkbox"),s=t("./row-surrogate"),t("../../messages/summary"),a=function(t){return!!t},r.exports=function(){var t=function(){function r(){return _classCallCheck2(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,n),_createClass2(r,[{key:"modelEvents",value:function(){return{"change:visible":this.onChangeVisibility,"change:hover":this.onChangeHover,"change:selected":this.onChangeSelected}}},{key:"invariants",value:function(){return{modelHasCollection:"No collection on model"}}},{key:"modelHasCollection",value:function(){var t;return null!=(null!=(t=this.model)?t.collection:void 0)}},{key:"getData",value:function(){var t,e,n,i;return t=this.model.collection.getMaxCount(),e=((i=this.model.get("count")/t)/2+.5).toFixed(),n=(100*i).toFixed(),o.extend(_get(_getPrototypeOf(r.prototype),"getData",this).call(this),{percent:n,opacity:e,max:t})}},{key:"onRenderError",value:function(t){return console.error(t)}},{key:"postRender",value:function(){return this.addCheckbox(),this.onChangeVisibility(),this.onChangeHover(),this.onChangeSelected()}},{key:"addCheckbox",value:function(){return this.renderChildAt(".checkbox",new e({model:this.model,attr:"selected"}))}},{key:"onChangeVisibility",value:function(){return this.$el.toggleClass("im-hidden",!this.model.get("visible"))}},{key:"onChangeHover",value:function(){var t;return t=a(this.model.get("hover")),this.$el.toggleClass("hover",t),t?this.showSurrogateUnlessVisible():this.removeSurrogate()}},{key:"onChangeSelected",value:function(){return this.$el.toggleClass("im-selected",this.model.get("selected"))}},{key:"removeSurrogate",value:function(){return this.removeChild("surrogate")}},{key:"showSurrogateUnlessVisible",value:function(){var t,e,n,i;if(this.removeSurrogate(),!this.isVisible())return e=this.isAbove(),t=(n=new s({model:this.model,above:e})).$el,i=this.getTable(),this.renderChild("surrogate",n,i),e?t.css({top:i.scrollTop()}):t.css({bottom:0-i.scrollTop()})}},{key:"getTable",value:function(){return this.$el.closest(".im-item-table")}},{key:"events",value:function(){return{click:"handleClick"}}},{key:"handleClick",value:function(t){return t.stopPropagation(),this.model.toggle("selected")}},{key:"isBelow",value:function(){var t;return t=this.getTable(),this.$el.offset().top+this.$el.outerHeight()>t.offset().top+t.outerHeight()}},{key:"isAbove",value:function(){var t;return t=this.getTable(),this.$el.offset().top<t.offset().top}},{key:"isVisible",value:function(){return!(this.isAbove()||this.isBelow())}}]),r}();return t.prototype.RERENDER_EVENT="change:count change:item change:symbol change:share",t.prototype.tagName="tr",t.prototype.className="im-facet-row",t.prototype.template=i.template("facet_row"),t}.call(this)}).call(this)},{"../../core-view":3,"../../core/checkbox":4,"../../messages/summary":27,"../../templates":67,"./row-surrogate":158,underscore:262}],160:[function(t,h,e){(function(){var e,n,i,r,a,s,l,o,u,c;i=t("underscore"),e=t("../../core-view"),n=t("../../templates"),t("../../messages/summary"),o=function(n,t){return null==n&&(n=i.identity),i.reduce(t,function(t,e){return t+n(e)},0)},u=i.partial(o,function(t){return t.count}),c=function(t,e,n){return o(i.partial(s,t,e),n)},r=function(t,e,n){var i;return t?(i=t.max-t.min,(t.min<e?Math.min(t.max,n)-e:n-Math.max(t.min,e))/i):0},a=function(e,n){return function(t){return t.min>=e&&t.max<=n}},l=function(e,n){return function(t){return t.min<e&&t.max>e||t.max>n&&t.min<n}},s=function(t,e,n){return n.count*r(n,t,e)},h.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass2(n,[{key:"stateEvents",value:function(){return{"change:selectedCount change:isApprox":this.reRender}}},{key:"initialize",value:function(t){var e=t.range;return this.range=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.listenTo(this.model.items,"change:selected",this.estimateSelectionSize),this.listenTo(this.range,"change",this.estimateSelectionSize)}},{key:"estimateSelectionSize",value:function(){if(this.model.get("initialized"))return this.model.get("numeric")?this.estimateSelectedInRange():this.sumSelectedItems()}},{key:"preRender",value:function(){return this.rendered?this.state.get("selectedCount")?void 0:this.$el.slideUp():this.$el.hide()}},{key:"postRender",value:function(){if(this.state.get("selectedCount"))return this.$el.slideDown()}},{key:"sumSelectedItems",value:function(){var t,e;return e=this.model.items.where({selected:!0}),t=o(function(t){return t.get("count")},e),this.state.set({isApprox:!1,selectedCount:t})}},{key:"estimateSelectedInRange",value:function(){var t,e,n,i,r,s;if(this.range.isAll())return this.state.unset("selectedCount");var o=this.range.toJSON();return r=o.min,i=o.max,e=(n=this.getHistogram()).filter(a(r,i)),s=n.filter(l(r,i)),t=Math.round(u(e)+c(r,i,s)),this.state.set({isApprox:!0,selectedCount:t})}},{key:"getHistogram",value:function(){var t,e,n,i,r,s,o,a;for(t=this.model.getHistogram(),a=(this.model.get("max")-(s=this.model.get("min")))/t.length,o=[],n=i=0,r=t.length;i<r;n=++i)e=t[n],o.push({count:e,min:s+n*a,max:s+a+n*a});return o}}]),n}();return t.prototype.className="im-summary-selected-count",t.prototype.template=n.template("summary-selected-count"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages/summary":27,"../../templates":67,underscore:262}],161:[function(t,r,e){(function(){var e,n,i;i=t("underscore"),e=t("../../core-view"),n=t("../../templates"),t("../../messages/summary"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"modelEvents",value:function(){return{change:this.reRender,destroy:this.stopListening}}},{key:"stateEvents",value:function(){return{change:this.reRender}}},{key:"getData",value:function(){return i.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{filtered:null!=this.model.get("filteredCount")})}}]),t}();return t.prototype.className="im-summary-heading",t.prototype.renderRequires=["numeric","available","got","uniqueValues"],t.prototype.template=n.template("summary_heading"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages/summary":27,"../../templates":67,underscore:262}],162:[function(t,c,e){(function(){var n,i,o,r,s,e,l,a,u;l=t("underscore"),i=t("../../core-view"),e=t("../../templates"),r=t("../../messages"),t("../../messages/summary"),a=function(t){return!!t},u=function(t){var e;return(e={}).multi="ONE OF"===t.multi?"NONE OF":"ONE OF",e.single="=="===t.single?"!=":"==",e.absent="IS NULL"===t.absent?"IS NOT NULL":"IS NULL",e},o=function(t){if(null!=t)return t.preventDefault(),t.stopPropagation()},n={single:"==",multi:"ONE OF",absent:"IS NULL"},s={tab:"tsv",csv:"csv",xml:"xml",json:"json"},c.exports=function(){var t=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,i),_createClass2(e,[{key:"initialize",value:function(){return _get(_getPrototypeOf(e.prototype),"initialize",this).call(this),this.listenTo(this.model.items,"change:selected",this.reRender)}},{key:"invariants",value:function(){return{viewIsAttribute:"No view, or view not Attribute: "+this.view,hasCollection:"No collection"}}},{key:"viewIsAttribute",value:function(){var t,e;return null!=(t=this.model)&&null!=(e=t.view)&&"function"==typeof e.isAttribute?e.isAttribute():void 0}},{key:"hasCollection",value:function(){var t;return null!=(null!=(t=this.model)?t.items:void 0)}},{key:"getData",value:function(){var t;return t=a(this.model.items.findWhere({selected:!0})),l.extend(_get(_getPrototypeOf(e.prototype),"getData",this).call(this),{anyItemSelected:t})}},{key:"postRender",value:function(){return this.activateTooltips(),this.activatePopovers()}},{key:"activateTooltips",value:function(){return this.$btns=this.$(".btn[title]").tooltip({placement:"top",container:this.el})}},{key:"activatePopovers",value:function(){return this.$(".im-download").popover({placement:"top",html:!0,container:this.el,title:r.getText("summary.DownloadFormat"),content:this.getDownloadPopover(),trigger:"manual"})}},{key:"getDownloadPopover",value:function(){return this.downloadPopoverTemplate(l.extend(this.getBaseData(),{query:this.model.query,path:this.model.view.toString(),formats:s}))}},{key:"events",value:function(){return{"click .im-export-summary":"exportSummary",click:"hideTooltips","click .btn-cancel":"unsetSelection","click .btn-toggle-selection":"toggleSelection","click .im-filter-group .dropdown-toggle":"toggleDropdown","click .im-download":"toggleDownloadPopover","click .im-filter-in":l.bind(this.addConstraint,this,n),"click .im-filter-out":l.bind(this.addConstraint,this,u(n))}}},{key:"exportSummary",value:function(t){return t.stopImmediatePropagation(),!0}},{key:"hideTooltips",value:function(){var t;return null!=(t=this.$btns)?t.tooltip("hide"):void 0}},{key:"unsetSelection",value:function(t){return this.changeSelection(function(t){return t.set({selected:!1})})}},{key:"toggleSelection",value:function(t){return this.changeSelection(function(t){if(t.get("visible"))return t.toggle("selected")})}},{key:"toggleDropdown",value:function(){return this.$(".im-filter-group").toggleClass("open")}},{key:"toggleDownloadPopover",value:function(){return this.$(".im-download").popover("toggle")}},{key:"addConstraint",value:function(t,e){var r,n,i,s;return o(e),s=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.model.items.where({selected:!0})).length;t<e;t++)r=n[t],i.push(r.get("item"));return i}.call(this),0===(i=this.model.items.where({selected:!1})).length?this.model.set({error:new Error("All items are selected")}):!l.any(s,function(t){return null==t})&&this.model.hasAll()&&(n=s.length)<10&&n>i.length?this.constrainTo(u(t),function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r.get("item"));return n}()):this.constrainTo(t,s)}},{key:"constrainTo",value:function(t,e){var n,i,r,s,o;if(!(null!=e?e.length:void 0))return this.model.set({error:new Error("No values are selected")});s=this.model.query,r=this.model.view.toString();var a=_slicedToArray(e,1);return o=a[0],i=function(){switch(!1){case!(1<e.length):return{op:t.multi,values:e};case null==o:return{op:t.single,value:String(o)};default:return{op:t.absent}}}(),!/or/.test(s.constraintLogic)&&"ONE OF"===i.op&&(n=l.findWhere(s.constraints,{path:r,op:"ONE OF"}))?(n.values=i.values,s.trigger("change:constraints",s.constraints)):s.addConstraint(l.extend(i,{path:r}))}},{key:"changeSelection",value:function(e){return this.model.items.each(function(t){return l.defer(e,t)})}}]),e}();return t.prototype.RERENDER_EVT="change",t.prototype.template=e.template("summary_items_controls"),t.prototype.downloadPopoverTemplate=e.template("download_popover"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/summary":27,"../../templates":67,underscore:262}],163:[function(t,h,e){(function(){var e,i,r,s,o,n,a,l,u,c;u=t("underscore"),e=t("backbone"),i=t("../../core-view"),l=t("../../templates"),o=t("../../messages"),n=t("../../mixins/sets-path-names"),a=t("./summary-items-controls"),r=t("./row"),t("../../messages/summary"),s=function(t){if(null!=t)return t.preventDefault(),t.stopPropagation()},c=function(t){return"row_"+t.get("id")},h.exports=function(){var t=function(){function n(){var t;return _classCallCheck2(this,n),(t=_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))).filterItems=t.filterItems.bind(_assertThisInitialized(t)),t}return _inherits(n,i),_createClass2(n,[{key:"stateEvents",value:function(){return{"change:error":this.setErrOnModel}}},{key:"setErrOnModel",value:function(){return this.model.set(this.state.pick("error"))}},{key:"initialize",value:function(){return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.listenTo(this.model.items,"add",this.addItem),this.listenTo(this.model.items,"remove",this.removeItem),this.listenTo(this.state,"change:typeName change:endName",this.reRender),this.setPathNames()}},{key:"invariants",value:function(){return{modelHasItems:"expected a SummaryItems model, got: "+this.model,modelCanHasMore:"expected the correct model methods, got: "+this.model}}},{key:"modelHasItems",value:function(){var t;return(null!=(t=this.model)?t.items:void 0)instanceof e.Collection}},{key:"modelCanHasMore",value:function(){var t;return u.isFunction(null!=(t=this.model)?t.hasMore:void 0)}},{key:"getData",value:function(){return u.extend(_get(_getPrototypeOf(n.prototype),"getData",this).call(this),{hasMore:this.model.hasMore(),colClasses:u.result(this,"colClasses"),colHeaders:u.result(this,"colHeaders")})}},{key:"colHeaders",value:function(){return[" ",this.state.has("typeName")?this.state.get("typeName")+" "+this.state.get("endName"):o.getText("summary.Item"),o.getText("summary.Count")]}},{key:"postRender",value:function(){if(this.tbody=this.$(".im-item-table tbody"),!this.tbody.length)throw new Error("Could not find table");return this.addControls(),this.addItems()}},{key:"addControls",value:function(){return this.renderChildAt(".im-summary-controls",new a({model:this.model}))}},{key:"addItems",value:function(t){var n,i=this,r=0<arguments.length&&void 0!==t?t:0;if(this.rendered&&r<this.model.items.length)return n=r+100,u.defer(function(){var e;return e=document.createDocumentFragment(),i.model.items.slice(r,n).forEach(function(t){return i.addItem(t,e)}),i.tbody.append(e),i.addItems(n)})}},{key:"addItem",value:function(t,e){if(this.rendered)return this.renderChild(c(t),new r({model:t}),null!=e?e:this.tbody)}},{key:"removeItem",value:function(t){return this.removeChild(c(t))}},{key:"events",value:function(){return{"click .im-load-more":"loadMoreItems","click .im-clear-value-filter":"clearValueFilter","keyup .im-filter-values":u.throttle(this.filterItems,250,{leading:!1}),submit:s,click:s}}},{key:"loadMoreItems",value:function(){if(!this.model.get("loading"))return this.model.increaseLimit(2)}},{key:"clearValueFilter",value:function(){return this.$(".im-filter-values").val(null),this.model.setFilterTerm(null)}},{key:"filterItems",value:function(t){var e;return function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,n),(e=this.$(".im-filter-values")).val(),this.model.setFilterTerm(e.val())}}]),n}();return t.include(n),t.prototype.tagName="div",t.prototype.className="im-summary-items",t.prototype.template=l.template("summary_items"),t.prototype.colClasses=["im-item-selector","im-item-value","im-item-count"],t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/summary":27,"../../mixins/sets-path-names":34,"../../templates":67,"./row":159,"./summary-items-controls":162,backbone:235,underscore:262}],164:[function(t,r,e){(function(){var e,i,n,l;l=t("underscore"),e=t("../../core-view"),n=t("../../templates"),i={min:0,max:0,average:0,stdev:0},r.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass2(n,[{key:"getData",value:function(){return l.extend({},i,_get(_getPrototypeOf(n.prototype),"getData",this).call(this))}},{key:"initialize",value:function(t){var e=t.range;return this.range=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.listenTo(this.range,"change",this.setSliderValues),this.listenTo(this.range,"change",this.setButtonDisabledness),this.listenTo(this.range,"change:min",this.onChangeMin),this.listenTo(this.range,"change:max",this.onChangeMax),this.listenForChange(this.model,this.initType,"integral","min","max"),this.initType()}},{key:"invariants",value:function(){return{hasRange:"No range"}}},{key:"hasRange",value:function(){return null!=this.range}},{key:"setSliderValues",value:function(){var t,e,n,i=this.range.toJSON();return e=i.min,t=i.max,null!=(n=this.$slider)?n.slider("option","values",[e,t]):void 0}},{key:"onChangeMin",value:function(){var t;if(t=this.range.get("min"),this.$("input.im-range-min").val(t),null!=this.$slider&&this.$slider.slider("values",0)!==t)return this.$slider.slider("values",0,t)}},{key:"onChangeMax",value:function(){var t;if(t=this.range.get("max"),this.$("input.im-range-max").val(t),null!=this.$slider&&this.$slider.slider("values",1)!==t)return this.$slider.slider("values",1,t)}},{key:"setButtonDisabledness",value:function(){var t;return t=this.range.isNotAll(),this.$(".btn").toggleClass("disabled",!t)}},{key:"events",value:function(){return{click:function(t){return t.stopPropagation()},"keyup input.im-range-min":"maybeIncrementMin","keyup input.im-range-max":"maybeIncrementMax","change input.im-range-min":"setRangeMin","change input.im-range-max":"setRangeMax","click .btn-primary":"changeConstraints","click .btn-cancel":"clearRange"}}},{key:"clearRange",value:function(){return this.range.set(this.model.pick("min","max"))}},{key:"maybeIncrementMin",value:function(t){return this.maybeIncrement("min",t)}},{key:"maybeIncrementMax",value:function(t){return this.maybeIncrement("max",t)}},{key:"maybeIncrement",value:function(t,e){var n;switch(n=this.range.get(t),e.keyCode){case 40:n-=this.step;break;case 38:n+=this.step}return this.range.set(t,n)}},{key:"setRangeMin",value:function(){return this.range.set({min:this.parse(this.$(".im-range-min").val())})}},{key:"setRangeMax",value:function(){return this.range.set({max:this.parse(this.$(".im-range-max").val())})}},{key:"changeConstraints",value:function(t){var e,n,i,r,s,o,a;for(t.preventDefault(),t.stopPropagation(),o=this.model.view.toString(),a=this.model.query,n=l.where(a.constraints,{path:o}),s=this.range.nulled?[{path:o,op:"IS NULL"}]:[{path:o,op:">=",value:this.range.get("min")},{path:o,op:"<=",value:this.range.get("max")}],i=0,r=n.length;i<r;i++)e=n[i],a.removeConstraint(e,{silent:!0});return a.addConstraints(s)}},{key:"postRender",value:function(){return this.drawSlider()}},{key:"parse",value:function(e){try{return 1===this.step?parseInt(e,10):parseFloat(e)}catch(t){return t,this.model.set({error:new Error("Could not parse '"+e+"' as a number")}),null}}},{key:"initType",value:function(){var t,e,n,i=this.model.toJSON();return t=i.integral,n=i.min,e=i.max,this.step=t?1:Math.abs((e-n)/100),this.round=t?Math.round:l.identity}},{key:"drawSlider",value:function(){var t,e,i=this,n=this.model.pick("min","max");return t=n.max,e=n.min,this.activateSlider({range:!0,min:e,max:t,values:[e,t],step:this.step,slide:function(t,e){var n;return null!=(n=i.range)?n.set({min:e.values[0],max:e.values[1]}):void 0}})}},{key:"reRender",value:function(){return this.destroySlider(),_get(_getPrototypeOf(n.prototype),"reRender",this).call(this)}},{key:"activateSlider",value:function(t){return this.destroySlider(),this.$slider=this.$(".slider"),this.$slider.slider(t)}},{key:"destroySlider",value:function(){if(null!=this.$slider)return this.$slider.slider("destroy"),this.$slider=null}},{key:"remove",value:function(){return this.destroySlider(),_get(_getPrototypeOf(n.prototype),"remove",this).call(this)}}]),n}();return t.prototype.RERENDER_EVENT="change",t.prototype.className="im-summary-stats",t.prototype.template=n.template("summary_stats"),t}.call(this)}).call(this)},{"../../core-view":3,"../../templates":67,underscore:262}],165:[function(t,r,e){(function(){var e,i,n;n=t("d3-browserify"),i=t("underscore"),e=t("../../core-view"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this.model,"change:loading",this.reRender)}},{key:"postRender",value:function(){if(!this.model.get("loading"))return this.addChart()}},{key:"addChart",value:function(){var n=this;return i.defer(function(){var e;try{return n._drawD3Chart()}catch(t){return e=t,n.model.set({error:e})}})}},{key:"getScales",value:function(){throw new Error("Not implemented")}},{key:"selectNodes",value:function(t){throw new Error("not implemented")}},{key:"getChartData",value:function(t){throw new Error("not implemented")}},{key:"exit",value:function(t){return t.remove()}},{key:"enter",value:function(t,e){throw new Error("not implemented")}},{key:"update",value:function(t,e){throw new Error("not implemented")}},{key:"drawAxes",value:function(t,e){}},{key:"shouldNotDrawChart",value:function(){return!1}},{key:"_drawD3Chart",value:function(){var t,e;if(!this.shouldNotDrawChart())return this.initChart(),e=this.getScales(),t=this.getCanvas(),this.updateChart(t,e),this.drawAxes(t,e)}},{key:"updateChart",value:function(t,e){var n;if(!this.shouldNotDrawChart())return null==t&&(t=this.getCanvas()),null==e&&(e=this.getScales()),n=this.selectNodes(t).data(this.getChartData(e)),this.exit(n.exit()),this.enter(n.enter(),e),this.update(n,e)}},{key:"initChart",value:function(){return this.chartWidth=this.$el.closest(":visible").width()}},{key:"getCanvas",value:function(){return null!=this.paper?this.paper:this.paper=n.select(this.el).append("svg").attr("class","im-summary-chart").attr("width",this.chartWidth).attr("height",this.chartHeight)}}]),t}();return t.prototype.chartHeight=0,t.prototype.chartWidth=0,t}.call(this)}).call(this)},{"../../core-view":3,"d3-browserify":237,underscore:262}],166:[function(t,n,e){(function(){var e,o,a,l,u;l=t("../../options"),e=t("../../core-view"),a=t("./numeric"),u=t("./pie"),o=t("./histogram"),t("./summary-items"),n.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass2(n,[{key:"initialize",value:function(t){var e=t.range;return this.range=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this)}},{key:"postRender",value:function(){if(this.model.get("initialized"))return this.renderChild("vis",this.getVisualization())}},{key:"getVisualization",value:function(t){var e,n,i,r,s=this.model.toJSON();switch(r=s.uniqueValues,i=s.numeric,e=s.canHaveMultipleValues,s.type,n=s.got,!1){case!i:return new a({model:this.model,range:this.range});case 1!==r:return null;case!e:return new o({model:this.model});case!(0<r&&r<=l.get("MAX_PIE_SLICES")):return new u({model:this.model});case!n:return new o({model:this.model});default:return null}}}]),n}();return t.prototype.className="im-facet-vis",t.prototype.RERENDER_EVENT="change:loading change:numeric change:canHaveMultipleValues",t}.call(this)}).call(this)},{"../../core-view":3,"../../options":63,"./histogram":152,"./numeric":155,"./pie":157,"./summary-items":163}],167:[function(t,a,e){(function(){var n,i,r,s,e,o,l,u;u=t("underscore"),r=t("../core-view"),o=t("./modal"),e=t("../messages"),l=t("../templates"),i=t("./constraints"),t("../messages/constraints"),t("../messages/logic"),s=function(){var t=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,r),_createClass2(e,[{key:"initialize",value:function(){var r,t;return _get(_getPrototypeOf(e.prototype),"initialize",this).call(this),t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.constraints).length;t<e;t++)(r=n[t]).code&&i.push(r.code);return i}.call(this),this.model.set({logic:this.query.constraintLogic}),this.state.set({disabled:!0,defaultLogic:t.join(" and ")})}},{key:"events",value:function(){return{"change .im-logic":this.setLogic,submit:this.applyChanges}}},{key:"modelEvents",value:function(){return{"change:logic":this.setDisabled}}},{key:"stateEvents",value:function(){return{"change:disabled":this.reRender}}},{key:"setDisabled",value:function(){var t,e;return e=this.model.get("logic"),t=this.query.constraintLogic,this.state.set({disabled:e===t})}},{key:"setLogic",value:function(t){return this.model.set({logic:t.target.value})}},{key:"applyChanges",value:function(t){var e;if(null!=t&&t.preventDefault(),null!=t&&t.stopPropagation(),!this.state.get("disabled"))return e=this.model.get("logic"),this.query.constraintLogic=e,this.query.trigger("change:logic",e)}}]),e}();return t.prototype.className="form im-evenly-spaced im-constraint-logic",t.prototype.tagName="form",t.prototype.template=l.template("logic-manager-body"),t.prototype.parameters=["query"],t}.call(this),n=function(){var a,t=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,i),_createClass2(e,[{key:"initialize",value:function(){return _get(_getPrototypeOf(e.prototype),"initialize",this).call(this),this.assignCodes()}},{key:"stateEvents",value:function(){return{"change:adding":this.reRender}}},{key:"assignCodes",value:function(){var r,e,n,i,t,s,o;if(!((i=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.constraints).length;t<e;t++)null!=(r=n[t]).op&&i.push(r);return i}.call(this)).length<2)){for(n=a.split(""),o=[],t=0,s=i.length;t<s;t++)null==(r=i[t]).code&&o.push(function(){var t;for(t=[];null==r.code&&(e=n.shift());)u.any(i,function(t){return t.code===e})?t.push(void 0):t.push(r.code=e);return t}());return o}}},{key:"postRender",value:function(){var t;return _get(_getPrototypeOf(e.prototype),"postRender",this).call(this),1<this.getConstraints().length&&this.renderChild("logic",new s({query:this.query})),t=this.state.get("adding")?"slideUp":"slideDown",this.$(".im-current-constraints")[t](400)}},{key:"getConAdder",value:function(){if(this.state.get("adding"))return _get(_getPrototypeOf(e.prototype),"getConAdder",this).call(this)}}]),e}();return t.prototype.template=l.template("active-constraints"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t}.call(this),a.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,o),_createClass2(t,[{key:"modalSize",value:function(){return"lg"}},{key:"className",value:function(){return _get(_getPrototypeOf(t.prototype),"className",this).call(this)+" im-filter-manager"}},{key:"title",value:function(){return e.getText("constraints.Heading",{n:this.query.constraints.length})}},{key:"initState",value:function(){return this.state.set({adding:!1,disabled:!1})}},{key:"act",value:function(){return this.state.set({adding:!0,disabled:!0})}},{key:"dismissAction",value:function(){return e.getText("Cancel")}},{key:"primaryAction",value:function(){return e.getText("constraints.DefineNew")}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this,"shown",this.renderBodyContent),this.listenTo(this.query,"change:constraints",this.onChangeConstraints)}},{key:"onChangeConstraints",value:function(){return this.initState(),this.renderTitle()}},{key:"renderBodyContent",value:function(){var t,e=this;if(this.shown)return t=this.$(".modal-body"),u.defer(function(){return e.renderChild("cons",new n({state:e.state,query:e.query}),t)})}}]),t}();return t.prototype.parameters=["query"],t}.call(this)}).call(this)},{"../core-view":3,"../messages":16,"../messages/constraints":21,"../messages/logic":25,"../templates":67,"./constraints":131,"./modal":197,underscore:262}],168:[function(t,i,e){(function(){var e,n;n=t("../query-dialogue-button"),e=t("../filter-dialogue"),t("../../messages/constraints"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),t}();return t.prototype.className="im-filter-dialogue-button",t.prototype.longLabel="constraints.ManageFilters",t.prototype.shortLabel="constraints.ManageFiltersShort",t.prototype.icon="Filter",t.prototype.Dialogue=e,t}.call(this)}).call(this)},{"../../messages/constraints":21,"../filter-dialogue":167,"../query-dialogue-button":206}],169:[function(t,n,e){(function(){var e,o,i;e=t("../core-view"),t("../templates"),o=t("./formatted/sorting-path"),i=t("../utils/sort-query-by-path"),n.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass2(n,[{key:"initialize",value:function(t){var e=t.query;return this.query=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.setPathNames()}},{key:"modelEvents",value:function(){return{"change:displayName":this.initState,"change:replaces":this.setPathNames}}},{key:"initState",value:function(){return this.state.set({group:this.model.get("displayName")})}},{key:"setPathNames",value:function(){var t,e,n,i,r,s=this;for(r=[],t=0,e=(i=this.getPaths()).length;t<e;t++)n=i[t],r.push(function(t){var e;return e=t.toString(),s.state.has(e)||s.state.set(e,""),t.getDisplayName().then(function(t){return s.state.set(e,t)})}(n));return r}},{key:"getPaths",value:function(){var t;return(t=this.model.get("replaces")).length?t.slice():[this.query.makePath(this.model.get("path"))]}},{key:"preRender",value:function(t){var e,n;if(e=_slicedToArray(n=this.getPaths(),1)[0],1===n.length)return t.cancel(),i(this.query,e)}},{key:"postRender",value:function(){var t,e,n,i,r,s;for(s=[],t=e=0,n=(r=this.getPaths()).length;e<n;t=++e)i=r[t],s.push(this.renderChild(t,new o({model:this.model,state:this.state,query:this.query,path:i})));return s}}]),n}();return t.prototype.className="im-col-sort-menu no-margins",t.prototype.tagName="ul",t}.call(this)}).call(this)},{"../core-view":3,"../templates":67,"../utils/sort-query-by-path":105,"./formatted/sorting-path":170}],170:[function(t,o,e){(function(){var e,r,s,n,i;e=t("../../core-view"),n=t("../../templates"),s=t("../../icons"),i=t("../../utils/sort-query-by-path"),r=/^\s*>\s*/,o.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"stateEvents",value:function(){return{change:this.reRender}}},{key:"getData",value:function(){var t,e,n,i;return e=null!=(i=(n=this.state.toJSON())[this.path])?i.replace(n.group,"").replace(r,""):void 0,t=this.query.getSortDirection(this.path),{Icons:s,name:e,direction:t}}},{key:"events",value:function(){return{click:"sortByPath"}}},{key:"sortByPath",value:function(){return i(this.query,this.path)}}]),t}();return t.prototype.tagName="li",t.prototype.className="im-formatted-path im-subpath",t.prototype.parameters=["query","path"],t.prototype.template=n.template("formatted_sorting"),t}.call(this)}).call(this)},{"../../core-view":3,"../../icons":14,"../../templates":67,"../../utils/sort-query-by-path":105}],171:[function(t,e,n){(function(){n.openDialogue=function(t){return this.renderChild("__dialogue__",t),t.show()},n.getDialogue=function(){var t;return null!=(t=this.children)?t.__dialogue__:void 0}}).call(this)},{}],172:[function(S,E,t){(function(){var u,e,c,n,i,h,r,s,o,f,t,a,d,l,p,g,m,v,y,_,b,w,C,k,x=[].indexOf;y=S("underscore");var T=S("es6-promise");d=T.Promise,v=S("../templates"),n=S("../core-view"),c=S("../core-model"),f=S("../options"),e=S("../core/collection"),t=S("../models/path"),k=S("../core/type-assertions"),C=S("../utils/get-leaves"),o=S("./item-preview/details"),p=S("./item-preview/reference-counts"),i=S("./item-preview/counts-title"),b=function(t,e){return"Could not determine origin of "+t+" from ["+e.join(", ")+"]"},h=function(){function n(t){var e;return _classCallCheck2(this,n),(e=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,t.path))).set(y.omit(t,"path")),e}return _inherits(n,t),n}(),u=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,h),_createClass2(t,[{key:"defaults",value:function(){return y.extend(_get(_getPrototypeOf(t.prototype),"defaults",this).call(this),{fieldType:"ATTR",valueOverspill:null,tooLong:!1,value:null})}}]),t}(),l=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,h),_createClass2(t,[{key:"defaults",value:function(){return y.extend(_get(_getPrototypeOf(t.prototype),"defaults",this).call(this),{fieldType:"REF",values:[]})}}]),t}(),m=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"initialize",value:function(){return this.listenTo(this,"change:displayName",this.sort)}}]),t}();return t.prototype.comparator="displayName",t}.call(this),a=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,c),_createClass2(t,[{key:"defaults",value:function(){return{types:[],id:null,error:null,phase:"FETCHING"}}}]),t}(),r=v.template("cell-preview-error"),s=["class","objectId"],w=function(t,e){return t.concat(e)},_=function(){return function(t,e){return null!=e&&!e.objectId&&x.call(s,t)<0}},g=new k.Structure("ServiceType",{root:k.String,count:k.Function,findById:k.Function,fetchModel:k.Function}),E.exports=function(){var t=function(){function a(){var t;return _classCallCheck2(this,a),(t=_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))).handleItem=t.handleItem.bind(_assertThisInitialized(t)),t}return _inherits(a,n),_createClass2(a,[{key:"initialize",value:function(){return _get(_getPrototypeOf(a.prototype),"initialize",this).call(this),this.fieldDetails=new m,this.referenceFields=new m}},{key:"modelEvents",value:function(){return{"change:phase":this.reRender,"change:error":this.reRender}}},{key:"remove",value:function(){return this.removeAllChildren(),this.fieldDetails.close(),this.referenceFields.close(),delete this.fieldDetails,delete this.referenceFields,_get(_getPrototypeOf(a.prototype),"remove",this).call(this)}},{key:"template",value:function(t){var e=t.phase,n=t.error;switch(e){case"FETCHING":return this.helpers().IndeterminateProgressBar;case"ERROR":return r(n);default:return null}}},{key:"preRender",value:function(){var e;return e=this.model,null==this.fetching&&(this.fetching=this.fetchData()),this.fetching.then(function(){return e.set({phase:"SUCCESS"})},function(t){return console.error(t),e.set({phase:"ERROR",error:t})})}},{key:"postRender",value:function(){var t,e,n,i,r;if("SUCCESS"===this.model.get("phase")){for(i=[],t=0,e=(n=this.model.get("types")).length;t<e;t++)r=n[t],i.push(this.$el.addClass(r));return i}}},{key:"renderChildren",value:function(){var t,e,n;return e=new o({collection:this.fieldDetails}),this.renderChild("details",e),t=new i({collection:this.referenceFields}),this.renderChild("counttitle",t),n=new p({collection:this.referenceFields}),this.renderChild("counts",n),this.$el.append(v.clear)}},{key:"fetchData",value:function(){var i=this;return this.service.fetchModel().then(function(t){var e,n;return i.schema=t,n=i.getAllDetails(),f.get("ItemDetails.ShowReferenceCounts")?(e=i.getRelationCounts(),d.all(n.concat(e))):d.all(n)})}},{key:"getAllDetails",value:function(){var t,e,n,i,r;for(i=[],t=0,e=(n=this.model.get("types")).length;t<e;t++)r=n[t],i.push(this.getDetails(r));return i}},{key:"getDetails",value:function(t){var e,n;return n=this.model.get("id"),e=f.get(["ItemDetails","Fields",this.schema.name,t]),this.service.findById(t,n,e).then(this.handleItem)}},{key:"handleItem",value:function(t){var e,n,r,i,s,o;for(n in function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,a),this.fieldDetails,i=_(),s=function(t,e){return null!=e?e.objectId:void 0},e=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.model.get("types")).length;t<e;t++)r=n[t],i.push(this.schema.classes[r]);return i}.call(this),t)i(n,o=t[n])&&this.handleAttribute(t,e,n,o);for(n in t)s(n,o=t[n])&&this.handleSubObj(t,e,n,o);return null}},{key:"getPathForField",value:function(t,e){var n;if(null==(n=y.find(t,function(t){return null!=t.fields[e]})))throw new Error(b(e,y.pick(t,"name")));return this.schema.makePath(n.name+"."+e)}},{key:"handleSubObj",value:function(t,e,n,i){var r;return r={path:this.getPathForField(e,n),field:n,values:C(i,s)},this.fieldDetails.add(new l(r))}},{key:"handleAttribute",value:function(t,e,n,i){var r,s,o,a,l;return s={path:o=this.getPathForField(e,n),field:n,value:i},(null!=i&&"String"===o.getType()||/Clob/.test(o.getType()))&&(r=f.get("CellCutoff"),l=String(i),i.length>r&&(-1===(a=l.indexOf(" ",.9*r))&&(a=r),s.tooLong=!0,s.valueOverspill=l.substring(a),s.value=l.substring(0,a))),this.fieldDetails.add(new u(s))}},{key:"getRelationCounts",value:function(){var s,o,a,t,e,l,u;return k=this.model.get("types"),e=this.service.root,a=null!=(t=f.get(["ItemDetails","Count",e]))?t:{},function(){var t,e,n;for(n=[],t=0,e=k.length;t<e;t++)u=k[t],o=this.schema.classes[u],n.push(function(){var t,e,n,i,r;for(r=[],t=0,e=(i=null!=(n=a[u])?n:function(){var t;for(s in t=[],o.collections)t.push(s);return t}()).length;t<e;t++)l=i[t],r.push(this.getRelationCount(l,u));return r}.call(this));return n}.call(this).reduce(w,[])}},{key:"getRelationCount",value:function(t,e){var n,i,r,s,o,a,l,u=this;if(r=this.model.get("id"),y.isObject(t))a=t.query,s=t.label,n=a(r),i=function(t){return new c({parts:[s],id:s,displayName:s,count:t})};else{if(!(null!=(l=(o=this.schema.makePath(e+"."+t)).getType())?l.attributes.id:void 0))return d.resolve(!0);n={select:[t+".id"],from:e,where:{id:r}},i=function(t){return new h({path:o,count:t})}}return this.service.count(n).then(i).then(function(t){if(t.get("count"))return u.referenceFields.add(t)})}}]),a}();return t.prototype.Model=a,t.prototype.className="im-cell-preview-inner",t.prototype.parameters=["service"],t.prototype.parameterTypes={service:g},t.prototype.fetching=null,t}.call(this)}).call(this)},{"../core-model":2,"../core-view":3,"../core/collection":5,"../core/type-assertions":10,"../models/path":56,"../options":63,"../templates":67,"../utils/get-leaves":83,"./item-preview/counts-title":173,"./item-preview/details":174,"./item-preview/reference-counts":175,"es6-promise":238,underscore:262}],173:[function(t,r,e){(function(){var e,n,i;i=t("underscore"),e=t("../../core-view"),(n=t("../../messages")).setWithPrefix("preview",{RelatedItemsHeading:"Related Items"}),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"collectionEvents",value:function(){return{"add remove reset":this.setVisibility}}},{key:"setVisibility",value:function(){return this.$el.toggleClass("im-hidden",this.collection.isEmpty())}},{key:"template",value:function(){return i.escape(n.getText("preview.RelatedItemsHeading"))}},{key:"postRender",value:function(){return this.setVisibility()}}]),t}();return t.prototype.tagName="h4",t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,underscore:262}],174:[function(l,u,t){(function(){var e,n,i,r,t,s,o;s=l("underscore"),t=l("../../templates"),n=l("../../core-view");var a=l("../../utils/events");o=a.ignore,i=t.template("cell-preview-items"),r=t.template("cell-preview-reference"),e=t.template("cell-preview-attribute"),u.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"collectionEvents",value:function(){return{sort:this.reRender,add:this.addDetail}}},{key:"events",value:function(){return{"click .im-too-long":this.revealLongField}}},{key:"postRender",value:function(){var e=this;return this.collection.each(function(t){return e.addDetail(t)})}},{key:"addDetail",value:function(t){return this.$el.append(this["render"+t.get("fieldType")](t.toJSON()))}},{key:"renderATTR",value:function(t){return e(s.extend(this.getBaseData(),t))}},{key:"revealLongField",value:function(t){var e,n;return o(t),n=this.$(".im-too-long"),e=this.$(".im-overspill"),n.remove(),e.slideDown(250)}}]),t}();return t.prototype.tagName="table",t.prototype.className="im-item-details table table-condensed table-bordered",t.prototype.template=i,t.prototype.renderREF=r,t}.call(this)}).call(this)},{"../../core-view":3,"../../templates":67,"../../utils/events":81,underscore:262}],175:[function(t,i,e){(function(){var e,n;n=t("../../templates"),e=t("../../core-view"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"collectionEvents",value:function(){return{"add change sort":this.reRender}}}]),t}();return t.prototype.className="im-related-counts",t.prototype.tagName="ul",t.prototype.template=n.template("cell-preview-reference-relation"),t}.call(this)}).call(this)},{"../../core-view":3,"../../templates":67}],176:[function(t,e,n){(function(){var n,i,r,s,o,a;o=t("underscore"),t("../core-view"),r=t("../messages"),s=t("./modal"),n=t("./join-manager/body"),i=t("../models/joins"),t("../messages/joins"),a=function(t,n){return t.length===n.length&&o.all(t,function(t,e){return t===n[e]})},e.exports=function(){var t=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,s),_createClass2(e,[{key:"className",value:function(){return _get(_getPrototypeOf(e.prototype),"className",this).call(this)+" im-join-manager"}},{key:"title",value:function(){return r.getText("joins.Heading")}},{key:"dismissAction",value:function(){return r.getText("Cancel")}},{key:"primaryAction",value:function(){return r.getText("modal.ApplyChanges")}},{key:"initialize",value:function(){return _get(_getPrototypeOf(e.prototype),"initialize",this).call(this),this.joins=i.fromQuery(this.query),this.listenTo(this.joins,"change:style",this.setDisabled)}},{key:"initState",value:function(){return this.state.set({disabled:!0})}},{key:"act",value:function(){var t;if(!this.state.get("disabled"))return t=this.joins.getJoins(),this.query.joins=t,this.query.trigger("change:joins",t),this.resolve(t)}},{key:"setDisabled",value:function(){var t,e,n;return t=o.keys(this.joins.getJoins()),e=function(){var t,e;for(n in e=[],t=this.query.joins)"OUTER"===t[n]&&e.push(n);return e}.call(this),t.sort(),e.sort(),this.state.set({disabled:a(t,e)})}},{key:"postRender",value:function(){var t;return _get(_getPrototypeOf(e.prototype),"postRender",this).call(this),t=this.$(".modal-body"),this.renderChild("cons",new n({collection:this.joins}),t)}}]),e}();return t.prototype.parameters=["query"],t}.call(this)}).call(this)},{"../core-view":3,"../messages":16,"../messages/joins":23,"../models/joins":47,"./join-manager/body":177,"./modal":197,underscore:262}],177:[function(l,u,t){(function(){var e,t,n,i,r,s,o,a;o=l("underscore"),n=l("../../core-view"),s=l("../../templates"),t=l("../../utils/css-class-set"),l("../../messages/joins"),r=["join-style","column-manager-path-name","clear"],e=function(){function i(t,e){var n;return _classCallCheck2(this,i),(n=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this)))({"btn btn-default":!0,active:function(){return e===t.get("style")}}),n}return _inherits(i,t),i}(),a=function(t){switch(t){case"INNER":return"OUTER";case"OUTER":default:return"INNER"}},i=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"modelEvents",value:function(){return{"change:style change:parts":this.reRender}}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.classSets={innerJoinBtn:new e(this.model,"INNER"),outerJoinBtn:new e(this.model,"OUTER")}}},{key:"getData",value:function(){return o.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),this.classSets)}},{key:"events",value:function(){return{"click button":this.onButtonClick}}},{key:"onButtonClick",value:function(t){if(!/active/.test(t.target.className))return this.model.swap("style",a)}}]),t}();return t.prototype.tagName="li",t.prototype.className="list-group-item",t.prototype.template=s.templateFromParts(r),t}.call(this),u.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"initState",value:function(){return this.state.set({explaining:!1})}},{key:"postRender",value:function(){var e=this;return this.$group=this.$(".list-group"),this.collection.each(function(t){return e.addJoin(t)})}},{key:"addJoin",value:function(t){if(this.rendered)return this.renderChild(t.id,new i({model:t}),this.$group)}},{key:"removeJoin",value:function(t){return this.removeChild(t.id)}},{key:"events",value:function(){return{"click .alert-info strong":function(){return this.state.toggle("explaining")}}}},{key:"stateEvents",value:function(){return{"change:explaining":this.onChangeExplaining}}},{key:"collectionEvents",value:function(){return{add:this.addJoin,remove:this.removeJoin,sort:this.reRender}}},{key:"onChangeExplaining",value:function(){if(this.rendered)return this.$(".alert-info p")[this.state.get("explaining")?"slideDown":"slideUp"]()}}]),t}();return t.prototype.template=s.template("join-manager-body"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages/joins":23,"../../templates":67,"../../utils/css-class-set":79,underscore:262}],178:[function(t,i,e){(function(){var e,n;n=t("../query-dialogue-button"),e=t("../join-manager"),t("../../messages/joins"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),t}();return t.prototype.className="im-join-manager-button",t.prototype.longLabel="joins.Manage",t.prototype.shortLabel="joins.ManageShort",t.prototype.icon="Joins",t.prototype.Dialogue=e,t}.call(this)}).call(this)},{"../../messages/joins":23,"../join-manager":176,"../query-dialogue-button":206}],179:[function(t,n,e){(function(){var e;e=t("../core-view"),n.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.prototype.RERENDER_EVENT="change",t.prototype.tagName="span",t}.call(this)}).call(this)},{"../core-view":3}],180:[function(t,i,e){(function(){var e,n;t("es6-promise").Promise,e=t("./base-append-dialogue"),n=t("./from-path-mixin"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.include(n(e)),t}.call(this)}).call(this)},{"./base-append-dialogue":183,"./from-path-mixin":189,"es6-promise":238}],181:[function(t,r,e){(function(){var e,n,i;t("es6-promise").Promise,e=t("./base-append-dialogue"),n=t("../../mixins/floating-dialogue"),i=t("./from-selection-mixin"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.include(n),t.include(i(e)),t}.call(this)}).call(this)},{"../../mixins/floating-dialogue":30,"./base-append-dialogue":183,"./from-selection-mixin":190,"es6-promise":238}],182:[function(t,i,e){(function(){var e,n;t("underscore"),e=t("../../core-view"),t("../../templates"),t("../../messages"),n=t("../../core/select-with-label"),t("../../messages/lists"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"postRender",value:function(){return this.renderListSelector()}},{key:"renderListSelector",value:function(){var t;return t=new n({model:this.model,collection:this.collection,attr:"target",label:"lists.params.Target",optionLabel:"lists.PossibleAppendTarget",helpMessage:"lists.params.help.Target",noOptionsMessage:"lists.append.NoSuitableLists",getProblem:function(t){return!(null!=t?t.length:void 0)}}),this.listenTo(t.state,"change:error",console.error.bind(console)),this.renderChild("list-selector",t)}}]),t}();return t.prototype.parameters=["model","collection"],t}.call(this)}).call(this)},{"../../core-view":3,"../../core/select-with-label":9,"../../messages":16,"../../messages/lists":24,"../../templates":67,underscore:262}],183:[function(y,_,t){(function(){var e,n,i,r,s,o,a,l,u,c,h,f,d,p,g,m,v;p=y("underscore");var t=y("es6-promise");f=t.Promise,r=y("../../core/collection"),s=y("../../core-model"),a=y("../../messages"),i=y("./base-dialogue"),e=y("./append-to-list-body"),n=y("../../models/append-to-list"),l={key:"lists.NoSuitableLists",level:"Warning",cannotDismiss:!0},o={key:"lists.TargetNotCorrectType",level:"Error",cannotDismiss:!0},d={key:"lists.TargetDoesNotExist",level:"Error",cannotDismiss:!0},u={key:"lists.NoTargetSelected",level:"Info",cannotDismiss:!0},m=function(e){return function(t){if(!e.isa(t.type))return f.reject(o)}},g=function(t){return p.where(t,{status:"CURRENT"})},v=function(t){var e,n,i,r,s,o;for(r=[],e=0,n=t.length;e<n;e++){var a=t[e];i=a.name,o=a.type,s=a.size,r.push({name:i,type:o,size:s,id:i})}return r},c=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,s),_createClass2(t,[{key:"defaults",value:function(){return{typeName:null,name:null,size:0}}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.fetchTypeName()}},{key:"fetchTypeName",value:function(){var t,e,n=this;return t=this.collection.service,e=this.get("type"),t.fetchModel().then(function(t){return t.makePath(e)}).then(function(t){return t.getDisplayName()}).then(function(t){return n.set({typeName:t})})}}]),t}(),h=function(){var t=function(){function i(t){var e,n=t.service;return _classCallCheck2(this,i),(e=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this))).service=n,e}return _inherits(i,r),i}();return t.prototype.model=c,t}.call(this),_.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,i),_createClass2(t,[{key:"title",value:function(){return a.getText("lists.AppendToListTitle",this.getData())}},{key:"primaryAction",value:function(){return a.getText("lists.Append")}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this.getPossibleLists(),"remove reset",this.verifyState),this.listenTo(this.getPossibleLists(),"add reset",this.setTargetIfOnlyOne)}},{key:"getPossibleLists",value:function(){return null!=this.possibleLists?this.possibleLists:this.possibleLists=new h({service:this.getService()})}},{key:"processQuery",value:function(t){return t.appendToList(this.model.get("target"))}},{key:"modelEvents",value:function(){return p.extend(_get(_getPrototypeOf(t.prototype),"modelEvents",this).call(this),{"change:target":"onChangeTarget"})}},{key:"initState",value:function(){return _get(_getPrototypeOf(t.prototype),"initState",this).call(this),this.fetchSuitableLists(),this.verifyState()}},{key:"checkThereAreLists",value:function(){if(!this.getPossibleLists().size())return this.state.set({error:l})}},{key:"onChangeTarget",value:function(){return this.setTitle(),this.verifyState()}},{key:"verifyState",value:function(){return this.state.unset("error"),this.checkThereAreLists(),this.verifyTarget(),this.verifyTargetExistsAndIsSuitable()}},{key:"setTargetIfOnlyOne",value:function(){var t;if(1===(t=this.getPossibleLists()).length)return this.model.set({target:t.at(0).get("name")})}},{key:"verifyTarget",value:function(){if(!this.model.get("target"))return this.state.set({error:u})}},{key:"onChangeType",value:function(){return _get(_getPrototypeOf(t.prototype),"onChangeType",this).call(this),this.fetchSuitableLists()}},{key:"getBodyOptions",value:function(){return p.extend(_get(_getPrototypeOf(t.prototype),"getBodyOptions",this).call(this),{collection:this.getPossibleLists()})}},{key:"verifyTargetExistsAndIsSuitable",value:function(){var t,e,n,i=this;if(null!=(n=this.getType())&&null!=(e=this.model.get("target")))return t=n.model.makePath(n.name),this.getService().fetchList(e).then(m(t),function(){return d}).then(null,function(t){return i.state.set({error:t})})}},{key:"fetchSuitableLists",value:function(){var e,t,n=this;return null==(t=this.getType())?this.getPossibleLists().reset():(e=t.model.makePath(t.name),this.getService().fetchLists().then(function(t){return p.filter(t,function(t){return e.isa(t.type)})}).then(g).then(v).then(function(t){return n.getPossibleLists().reset(t)}).then(null,function(t){return n.state.set({error:t})}))}}]),t}();return t.prototype.Body=e,t.prototype.Model=n,t}.call(this)}).call(this)},{"../../core-model":2,"../../core/collection":5,"../../messages":16,"../../models/append-to-list":35,"./append-to-list-body":182,"./base-dialogue":184,"es6-promise":238,underscore:262}],184:[function(t,a,e){(function(){var e,n,i,r,s,o;o=t("underscore"),s=t("../modal"),r=t("../../messages"),n=t("../../models/create-list"),i=t("./body"),t("../../messages/lists"),e=function(){throw new Error("not implemented")},a.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,s),_createClass2(t,[{key:"getService",value:function(){return e}},{key:"className",value:function(){return _get(_getPrototypeOf(t.prototype),"className",this).call(this)+" im-list-dialogue im-create-list"}},{key:"title",value:function(){return r.getText("lists.CreateListTitle",this.getData())}},{key:"primaryAction",value:function(){return r.getText("lists.Create")}},{key:"act",value:function(){var e=this;return this.getQuery().then(function(t){return e.processQuery(t)}).then(this.resolve,function(t){return e.state.set({error:t})})}},{key:"verifyState",value:function(){return this.state.set({error:null})}},{key:"processQuery",value:function(t){return t.saveAsList(this.model.toJSON())}},{key:"modelEvents",value:function(){return{"change:type":"onChangeType"}}},{key:"onChangeType",value:function(){return this.setTypeName()}},{key:"stateEvents",value:function(){return{"change:typeName change:count":"setTitle","change:typeName":"setListName","change:error":function(){return console.log(this.state.get("error"))}}}},{key:"setTitle",value:function(){return this.$(".modal-title").text(this.title())}},{key:"setListName",value:function(){return this.model.set({name:r.getText("lists.DefaultName",this.state.toJSON())})}},{key:"initState",value:function(){var e=this;return this.state.set({existingLists:{},minimised:o.result(this,"initiallyMinimised")}),this.setTypeName(),this.setCount(),this.checkAuth(),this.getService().fetchLists().then(function(t){return o.where(t,{authorized:!0})}).then(function(t){return o.groupBy(t,"name")}).then(function(t){return e.state.set({existingLists:t})})}},{key:"setCount",value:function(){var e=this;return this.fetchCount().then(function(t){return e.state.set({count:t})}).then(null,function(t){return e.state.set({error:t})})}},{key:"setTypeName",value:function(){var t,e=this;return null!=(t=this.getType())?t.getDisplayName().then(function(t){return e.state.set({typeName:t})}).then(null,function(t){return e.state.set({error:t})}):void 0}},{key:"checkAuth",value:function(){var t=this;return this.getService().whoami().then(null,function(){return t.state.set({error:{level:"Error",key:"lists.error.MustBeLoggedIn"}})})}},{key:"getBodyOptions",value:function(){return{model:this.model,state:this.state}}},{key:"postRender",value:function(){return _get(_getPrototypeOf(t.prototype),"postRender",this).call(this),this.renderChild("body",new this.Body(this.getBodyOptions()),this.$(".modal-body"))}}]),t}();return t.prototype.getQuery=e,t.prototype.fetchCount=e,t.prototype.getType=e,t.prototype.Model=n,t.prototype.Body=i,t}.call(this)}).call(this)},{"../../messages":16,"../../messages/lists":24,"../../models/create-list":41,"../modal":197,"./body":185,underscore:262}],185:[function(t,c,e){(function(){var e,n,i,r,s,o,a,l,u;u=t("underscore"),e=t("../../core-view"),l=t("../../templates"),o=t("../../messages"),n=t("../../models/create-list"),r=t("../../core/input-with-label"),i=t("../../core/input-with-button"),s=t("./tag"),a=t("./tags-apology"),t("../../messages/lists"),c.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"getData",value:function(){return u.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this))}},{key:"modelEvents",value:function(){return{"add:tag":"addTag"}}},{key:"stateEvents",value:function(){return{"change:minimised":"toggleOptionalAttributes"}}},{key:"events",value:function(){var t=this;return{"click .im-more-options":function(){return t.state.toggle("minimised")}}}},{key:"postRender",value:function(){return this.renderListNameInput(),this.renderListDescInput(),this.renderTags()}},{key:"renderTags",value:function(){return this.$tags=this.$(".im-active-tags"),this.addTags(),this.renderApology(),this.renderTagAdder()}},{key:"renderTagAdder",value:function(){var t;return t=new i({model:this.model,placeholder:"lists.AddTag",button:"lists.AddTagBtn",sets:"nextTag"}),this.listenTo(t,"act",this.addNextTag),this.renderChildAt(".im-next-tag",t)}},{key:"addTags",value:function(){var e=this;return this.model.tags.each(function(t){return e.addTag(t)})}},{key:"addTag",value:function(t){if(this.rendered)return this.renderChild("tag-"+t.get("id"),new s({model:t}),this.$tags)}},{key:"toggleOptionalAttributes",value:function(){var t,e,n;return n=this.state.toJSON(),t=this.$(".im-optional-attributes"),n.minimised?t.slideUp():t.slideDown(),e=o.getText("lists.ShowExtraOptions",n),this.$(".im-more-options .msg").text(e)}},{key:"renderApology",value:function(){return this.renderChildAt(".im-apology",new a({collection:this.model.tags}))}},{key:"renderListNameInput",value:function(){var e,n=this;return e=new r({model:this.model,attr:"name",label:"lists.params.Name",helpMessage:"lists.params.help.Name",placeholder:"lists.params.NamePlaceholder",getProblem:function(t){return n.validateName(t)}}),this.listenTo(e.state,"change:problem",function(){var t;return t=e.state.get("problem"),this.state.set({disabled:!!t})}),this.renderChildAt(".im-list-name",e)}},{key:"validateName",value:function(t){var e;return!(e=null!=t?t.replace(/(^\s+|\s+$)/g,""):void 0)||this.state.get("existingLists")[e]}},{key:"renderListDescInput",value:function(){return this.renderChildAt(".im-list-desc",new r({model:this.model,attr:"description",label:"lists.params.Desc",placeholder:"lists.params.DescPlaceholder"}))}},{key:"addNextTag",value:function(){return this.model.addTag()}}]),t}();return t.prototype.Model=n,t.prototype.template=l.template("list-dialogue-body"),t.prototype.$tags=null,t}.call(this)}).call(this)},{"../../core-view":3,"../../core/input-with-button":6,"../../core/input-with-label":7,"../../messages":16,"../../messages/lists":24,"../../models/create-list":41,"../../templates":67,"./tag":191,"./tags-apology":192,underscore:262}],186:[function(t,g,e){(function(){var i,s,e,n,r,o,a,l,u,c,h,f,d,p;p=t("underscore"),o=t("../../core-view"),r=t("../../core-model"),n=t("../../core/collection"),d=t("../../templates"),e=t("../../utils/css-class-set"),a=t("../../utils/count-executor"),c=t("../../models/path"),s=t("./append-from-selection"),u=t("./create-from-selection"),i=t("./append-from-path"),l=t("./create-from-path"),t("../../messages/lists"),h=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),t}();return t.prototype.model=c,t}.call(this),f=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,o),_createClass2(t,[{key:"modelEvents",value:function(){return{"change:displayName change:typeName":this.reRender}}},{key:"stateEvents",value:function(){return{"change:count":this.reRender}}},{key:"events",value:function(){return{click:this.openDialogue,"mouseenter a":function(){var t=this;return p.defer(function(){return t.highLight(t.model.get("path"))})},"mouseout a":function(){return this.highLight(null)}}}},{key:"initialize",value:function(){var n=this;return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.query.summarise(this.model.get("id")).then(function(t){var e=t.stats;return n.state.set({count:e.uniqueValues})})}},{key:"openDialogue",value:function(){var t;return t={query:this.query,path:this.model.get("id")},this.showDialogue(t)}}]),t}();return t.prototype.parameters=["query","model","showDialogue","highLight"],t.prototype.tagName="li",t.prototype.Model=c,t.prototype.template=d.template("list-dialogue-button-node"),t}.call(this),g.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,o),_createClass2(t,[{key:"initState",value:function(){return this.state.set({action:"create",authenticated:!1,disabled:!1})}},{key:"stateEvents",value:function(){return{"change:action":this.setActionButtonState,"change:authenticated":this.setVisible,"change:disabled":this.onChangeDisabled}}},{key:"events",value:function(){return{"click .im-create-action":this.setActionIsCreate,"click .im-append-action":this.setActionIsAppend,"click .im-pick-items":this.startPicking}}},{key:"initialize",value:function(){var e=this;return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.initBtnClasses(),this.paths=new h,this.query.getQueryNodes().reverse().forEach(function(t){return e.paths.add(new c(t))}),this.query.service.whoami().then(function(t){return e.state.set({authenticated:!!t})}),a.count(this.query).then(function(t){return e.state.set({disabled:0===t})}).then(null,function(t){return e.state.set({disabled:!0,error:t})})}},{key:"getData",value:function(){return p.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),this.classSets,{paths:this.paths.toJSON()})}},{key:"postRender",value:function(){var i,r,s,o=this;return this.setVisible(),this.onChangeDisabled(),r=this.$(".dropdown-menu"),i=function(t){return o.tableState.set({highlitNode:t})},s=function(t){return o.showPathDialogue(t)},this.paths.each(function(t,e){var n;return n=new f({query:o.query,model:t,showDialogue:s,highLight:i}),o.renderChild("path-"+e,n,r,"prepend")})}},{key:"onChangeDisabled",value:function(){return this.$(".btn").toggleClass("disabled",this.state.get("disabled"))}},{key:"setVisible",value:function(){return this.$el.toggleClass("im-hidden",!this.state.get("authenticated"))}},{key:"setActionIsCreate",value:function(t){return t.stopPropagation(),t.preventDefault(),this.state.set({action:"create"})}},{key:"setActionIsAppend",value:function(t){return t.stopPropagation(),t.preventDefault(),this.state.set({action:"append"})}},{key:"showDialogue",value:function(t,e){var n,i,r,s=this;return i=new t(e),this.renderChild("dialogue",i),n=this.state.get("action"),r=function(e){return function(t){return s.trigger(e+":"+n,t),s.trigger(e,n,t)}},i.show().then(r("success"),r("failure"))}},{key:"showPathDialogue",value:function(t){var e,n;return n=this.state.get("action"),e=function(){switch(n){case"append":return i;case"create":return l;default:throw new Error("Unknown action: "+n)}}(),this.showDialogue(e,t)}},{key:"startPicking",value:function(){var t,e,n,i,r=this;return e=this.state.get("action"),n={collection:this.selected,service:this.query.service},t=function(){switch(e){case"append":return s;case"create":return u;default:throw new Error("Unknown action: "+e)}}(),this.tableState.set({selecting:!0}),i=function(){return r.tableState.set({selecting:!1}),r.selected.reset()},this.showDialogue(t,n).then(i,i)}},{key:"setActionButtonState",value:function(){var t;return t=this.state.get("action"),this.$(".im-create-action").toggleClass("active","create"===t),this.$(".im-append-action").toggleClass("active","append"===t)}},{key:"initBtnClasses",value:function(){var t=this;return this.classSets={},this.classSets.createBtnClasses=new e({"im-create-action":!0,"btn btn-default":!0,active:function(){return"create"===t.state.get("action")}}),this.classSets.appendBtnClasses=new e({"im-append-action":!0,"btn btn-default":!0,active:function(){return"append"===t.state.get("action")}})}}]),t}();return t.prototype.tagName="div",t.prototype.className="btn-group list-dialogue-button",t.prototype.template=d.template("list-dialogue-button"),t.prototype.parameters=["query","selected"],t.prototype.optionalParameters=["tableState"],t.prototype.tableState=new r,t}.call(this)}).call(this)},{"../../core-model":2,"../../core-view":3,"../../core/collection":5,"../../messages/lists":24,"../../models/path":56,"../../templates":67,"../../utils/count-executor":77,"../../utils/css-class-set":79,"./append-from-path":180,"./append-from-selection":181,"./create-from-path":187,"./create-from-selection":188,underscore:262}],187:[function(t,i,e){(function(){var e,n;t("es6-promise").Promise,e=t("./base-dialogue"),n=t("./from-path-mixin"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.include(n(e)),t}.call(this)}).call(this)},{"./base-dialogue":184,"./from-path-mixin":189,"es6-promise":238}],188:[function(t,r,e){(function(){var e,n,i;t("underscore"),t("es6-promise").Promise,e=t("./base-dialogue"),n=t("../../mixins/floating-dialogue"),i=t("./from-selection-mixin"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.include(n),t.include(i(e)),t}.call(this)}).call(this)},{"../../mixins/floating-dialogue":30,"./base-dialogue":184,"./from-selection-mixin":190,"es6-promise":238,underscore:262}],189:[function(n,i,t){(function(){var e,t=n("es6-promise");e=t.Promise,i.exports=function(t){return{parameters:["query","path"],className:function(){return t.prototype.className.call(this)+" im-from-path"},getQuery:function(){return e.resolve(this.query.selectPreservingImpliedConstraints([this.path]))},fetchCount:function(){return this.query.summarise(this.path).then(function(t){return t.stats.uniqueValues})},getType:function(){return this.query.makePath(this.path).getParent().getType()},getService:function(){return this.query.service}}}}).call(this)},{"es6-promise":238}],190:[function(e,s,t){(function(){var n,i,t,r;t=e("../../models/selected-objects"),r=e("../../core/type-assertions"),n={level:"Error",key:"lists.NoCommonType",cannotDismiss:!0},i={level:"Info",key:"lists.NoObjectsSelected",cannotDismiss:!0},s.exports=function(e){return{parameters:["service","collection"],parameterTypes:{collection:r.InstanceOf(t,"SelectedObjects")},className:function(){return e.prototype.className.call(this)+" im-list-picker"},getQuery:function(){return this.service.query({from:this.model.get("type"),select:["id"],where:[{path:this.model.get("type"),op:"IN",ids:this.getIds()}]})},fetchCount:function(){return Promise.resolve(this.collection.size())},getType:function(){var t;if(this.model.get("type"))return null!=(t=this.schema)?t.makePath(this.model.get("type")).getType():void 0},getService:function(){return this.service},collectionEvents:function(){return{"change:commonType change:typeName":this.setType,"add remove":this.setCount}},initiallyMinimised:!0,getIds:function(){return this.collection.map(function(t){return t.get("id")})},onChangeType:function(){return e.prototype.onChangeType.call(this),this.verifyState()},verifyState:function(){var t;return null!=(t=e.prototype.verifyState)&&t.call(this),this.collection.size()?this.model.get("type")?void 0:this.state.set({error:n}):this.state.set({error:i})},setType:function(){return this.model.set({type:this.collection.state.get("commonType")}),this.state.set({typeName:this.collection.state.get("typeName")})}}}}).call(this)},{"../../core/type-assertions":10,"../../models/selected-objects":58}],191:[function(t,i,e){(function(){var e,n;e=t("../../core-view"),n=t("../../templates"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"events",value:function(){return{"click .im-remove":"removeAndDestroy"}}},{key:"postRender",value:function(){return this.activateTooltip()}},{key:"activateTooltip",value:function(){return this.$("[title]").tooltip()}},{key:"removeAndDestroy",value:function(){var t=this;return this.model.collection.remove(this.model),this.model.destroy(),this.$el.fadeOut(400,function(){return t.remove()})}}]),t}();return t.prototype.className="im-list-tag label label-primary",t.prototype.template=n.template("list-tag"),t}.call(this)}).call(this)},{"../../core-view":3,"../../templates":67}],192:[function(t,r,e){(function(){var e,n,i;i=t("underscore"),e=t("../../core-view"),n=t("../../templates"),t("../../messages/lists"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"collectionEvents",value:function(){return{"add remove reset":this.reRender}}},{key:"getData",value:function(){return i.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{hasTags:this.collection.size()})}}]),t}();return t.prototype.template=n.template("list-tags-apology"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages/lists":24,"../../templates":67,underscore:262}],193:[function(n,h,t){(function(){var r,s,e,i,o,a,l,u,c;i=n("underscore");var t=n("es6-promise");s=t.Promise,r=n("../messages"),e=n("../core-view"),r.set({"convalue.BadType":"<%- name %> is of the wrong type (<%- type %>).","convalue.EmptyList":"<%- name %> is empty. This query will always return 0 results","convalue.BadList":'You do not have access to list called "<%- name %>". Choose one from the list.'}),l=n("../templates/helpers"),n("../templates/mustache-settings"),u=i.template("<% if (suitableLists.length) { %>\n    <%= select(suitableLists, isSelected, 'span7 im-value-options im-con-value im-con-value-list form-control', formatList, getOptionValue) %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLists') %>\n<% } %>\n"),a=function(t){return t.name},o=function(t){return t.size?t.name+" ("+t.size+" "+t.typeName+"s)":t.name},c=function(t){return function(e){return t.makePath(e.type).getDisplayName().then(function(t){return i.extend(e,{typeName:t})})}},h.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass2(n,[{key:"initialize",value:function(t){var e=t.query;return this.query=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.initialValue=this.model.get("value"),this.path=this.model.get("path"),this.setSuitableLists(),this.listenTo(this.model,"change",this.reRender),this.listenTo(this.model,"change:value",this.checkCurrentValue),this.checkCurrentValue()}},{key:"checkCurrentValue",value:function(){var t,e,n,i=this;return n=this.model.get("value"),t=function(t){return i.model.set({error:new Error(r.getText("convalue.BadList",{name:n}))}),i.listenToOnce(i.model,"change:value",function(){return i.model.unset("error")})},e=function(t){var e,n=this;if(null!=(e=t.size?this.path.isa(t.type)?void 0:"convalue.BadType":"convalue.EmptyList"))return this.model.set({error:new Error(r.getText(e,t))}),this.listenToOnce(this.model,"change:value",function(){return n.model.unset("error")})},this.query.service.fetchList(n).then(e,t)}},{key:"events",value:function(){return{"change select":"setList"}}},{key:"setList",value:function(){return this.model.set({value:this.$("select").val()})}},{key:"setSuitableLists",value:function(){var t,e,n=this;if(!this.model.has("suitableLists"))return e=function(t){return n.model.set({suitableLists:t})},t=function(t){return n.model.set({error:t})},this.fetchSuitableLists().then(e,t)}},{key:"fetchSuitableLists",value:function(){var e=this;return null!=this.__suitable_lists?this.__suitable_lists:this.__suitable_lists=this.query.service.fetchLists().then(function(i){var r,t;return t=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)(r=i[t]).size&&this.path.isa(r.type)&&n.push(r);return n}.call(e),s.all(t.map(c(e.query.model)))})}},{key:"getSuitableLists",value:function(){var t,e,n;return t={name:this.initialValue},n=this.model.get("suitableLists")||[],null==(e=i.findWhere(n,t))&&(e=t),i.uniq([e].concat(n),!1,"name")}},{key:"template",value:function(t){return t=i.extend({formatList:o,getOptionValue:a,messages:r},l,t),u(t)}},{key:"getData",value:function(){var e;return e=this.model.get("value"),{suitableLists:this.getSuitableLists(),isSelected:function(t){return t.name===e}}}}]),n}();return t.prototype.className="im-list-value-controls",t}.call(this)}).call(this)},{"../core-view":3,"../messages":16,"../templates/helpers":68,"../templates/mustache-settings":69,"es6-promise":238,underscore:262}],194:[function(s,o,t){(function(){var t,n,a,c,i,r;i=s("underscore");var e=s("es6-promise");a=e.Promise,c=s("../utils/suggestion-source"),n=s("../messages"),t=s("./attribute-value-controls"),r=i.template('<label class="im-value-options">\n    <%- messages.getText(\'conbuilder.ExtraLabel\') %>\n    <input type="text" class="im-extra-value form-control"\n            placeholder="<%- state.extraPlaceholder %>"\n            value="<%- con.extraValue %>">\n</label>\n\n'),o.exports=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass2(e,[{key:"initialize",value:function(){return _get(_getPrototypeOf(e.prototype),"initialize",this).call(this),this.state.set({extraPlaceholder:n.get("conbuilder.ExtraPlaceholder")}),this.listenTo(this.branding,"change:defaults.extraValue.path",this.reRender),this.listenTo(this.branding,"change:defaults.extraValue.value",function(){return this.state.set({extraPlaceholder:this.branding.get("defaults.extraValue.value")})}),this.listenTo(this.model,"change",this.reRender)}},{key:"stateEvents",value:function(){return i.extend(_get(_getPrototypeOf(e.prototype),"stateEvents",this).call(this),{"change:extraPlaceholder":this.reRender})}},{key:"template",value:function(t){return _get(_getPrototypeOf(e.prototype),"template",this).call(this)+r(t)}},{key:"events",value:function(){return{"change .im-con-value-attr":"setValue","change .im-extra-value":"setExtraValue"}}},{key:"setExtraValue",value:function(){var t,e;return(t=this.$("input.im-extra-value.tt-input")).length||(t=this.$("input.im-extra-value")),(e=t.val())?this.model.set({extraValue:e}):this.model.unset("extraValue")}},{key:"setValue",value:function(){var t,e;return(t=this.$("input.im-con-value.tt-input")).length||(t=this.$("input.im-con-value")),(e=t.val())?this.model.set({value:e}):this.model.unset("value")}},{key:"setBoth",value:function(){return this.setValue(),this.setExtraValue()}},{key:"suggestExtra",value:function(){var t,e,n,i,r;return e=this.branding.get("defaults.extraValue.path"),r=this.branding.get("defaults.extraValue.extraFor"),null!=e&&this.model.get("path").isa(r)?(i=this.model.get("path")+"."+e,n=null!=this.__extra_suggestions?this.__extra_suggestions:this.__extra_suggestions=this.query.summarise(i),t=this.handleSuggestionSet.bind(this,this.$("input.im-extra-value"),"extraValue"),n.then(function(t){return t.results}).then(t)):a.resolve(!0)}},{key:"suggestValue",value:function(){var e,t,n,s,i,o=this;return s=this.model.get("path"),i=this.query.service,e=s.getEndClass().name,t=i.fetchClassKeys().then(function(t){return t[e]}),null==this.__value_suggestions&&(this.__value_suggestions=t.then(function(i){var r,t;return(null!=i?i.length:void 0)?(t=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(this.query.summarise(s+r.replace(/^[^\.]+/,"")));return n}.call(o),a.all(t).then(function(t){return t.reduce(function(t,e){return t.concat(e.results)},[])})):[]})),n=this.handleSuggestionSet.bind(this,this.$("input.im-con-value-attr"),"value"),this.__value_suggestions.then(n)}},{key:"handleSuggestionSet",value:function(t,n,e){var i,r,s,o,a,l,u=this;if(0!==(l=e.length))return a=new c(e,l),o={minLength:0,highlight:!0},i={name:n+"_suggestions",source:a.suggest,displayKey:"item",templates:{footer:a.tooMany}},r=function(t){return function(t,e){return u.model.set(n,e.item)}},s=e[0].item,this.activateTypeahead(t,o,i,s,r(),function(){return u.setBoth()})}},{key:"provideSuggestions",value:function(){var t,e;return this.removeTypeAheads(),e=this.suggestValue(),t=this.suggestExtra(),a.all([t,e])}},{key:"remove",value:function(){return _get(_getPrototypeOf(e.prototype),"remove",this).call(this),this.branding.destroy()}}]),e}()}).call(this)},{"../messages":16,"../utils/suggestion-source":107,"./attribute-value-controls":113,"es6-promise":238,underscore:262}],195:[function(u,c,t){(function(){var e,i,t,r,s,o,a,l;r=u("underscore");var n=u("es6-promise");i=n.Promise,e=u("../messages"),t=u("../core-view"),s=u("../templates/helpers"),u("../templates/mustache-settings"),a=u("../utils/to-named-path"),o=r.template("<% if (candidateLoops.length) { %>\n    <%= select(candidateLoops, isSelected, 'form-control im-value-options im-con-value') %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLoops') %>\n<% } %>\n"),l=function(t){var e=t.path,n=t.name;return{value:e.toString(),text:n}},c.exports=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,t),_createClass2(n,[{key:"initialize",value:function(t){var e=t.query;return this.query=e,_get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.path=this.model.get("path"),this.type=this.path.getType(),this.setCandidateLoops(),this.listenTo(this.model,"change",this.reRender)}},{key:"events",value:function(){return{"change select":"setLoop"}}},{key:"setLoop",value:function(){return this.model.set({value:this.$("select").val()})}},{key:"setCandidateLoops",value:function(){var e=this;if(!this.model.has("candidateLoops"))return this.getCandidateLoops().then(function(t){return e.model.set({candidateLoops:t})})}},{key:"isSuitable",value:function(t){return(t.isa(this.type)||this.path.isa(t.getType()))&&this.path.toString()!==t.toString()}},{key:"getCandidateLoops",value:function(){var t,r,e=this;return null!=this.__candidate_loops?this.__candidate_loops:this.__candidate_loops=(t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.getQueryNodes()).length;t<e;t++)r=n[t],this.isSuitable(r)&&i.push(r);return i}.call(e),i.all(t.map(a)))}},{key:"template",value:function(t){return o(r.extend({messages:e},s,t))}},{key:"getData",value:function(){var r,e;return e=this.model.get("value"),{candidateLoops:function(){var t,e,n,i;for(i=[],t=0,e=(n=this.model.get("candidateLoops")||[]).length;t<e;t++)r=n[t],i.push(l(r));return i}.call(this),isSelected:function(t){return t.value===e}}}}]),n}()}).call(this)},{"../core-view":3,"../messages":16,"../templates/helpers":68,"../templates/mustache-settings":69,"../utils/to-named-path":109,"es6-promise":238,underscore:262}],196:[function(t,i,e){(function(){var e,n;n=t("underscore"),e=t("../core-view"),t("../templates"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"getData",value:function(){return n.extend({error:null,exportLink:null,disabled:!1,disabledReason:null},this.actionNames,this.actionIcons,_get(_getPrototypeOf(t.prototype),"getData",this).call(this))}},{key:"postRender",value:function(){return this.$("[title]").tooltip()}}]),t}();return t.prototype.tagName="div",t.prototype.className="modal-footer",t.prototype.RERENDER_EVENT="change:error change:exportLink",t.prototype.parameters=["template","actionNames","actionIcons"],t}.call(this)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],197:[function(l,u,t){(function(){var e,n,i,r,s,o,a,t=l("es6-promise");i=t.Promise,o=l("underscore"),s=l("../core-view"),e=l("../messages"),r=l("../templates"),a=r.template("modal_base"),n=l("./modal-footer"),u.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,s),_createClass2(t,[{key:"className",value:function(){return"modal fade"}},{key:"initialize",value:function(){var n=this;return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this._promise=new i(function(t,e){n.resolve=t,n.reject=e}),this.listenTo(this.state,"change",this.renderFooter)}},{key:"resolve",value:function(){throw new Error("resolved before initialisation")}},{key:"reject",value:function(){throw new Error("rejected before initialisation")}},{key:"dismissError",value:function(){var t=this;return this.$(".modal-footer .alert").slideUp(250,function(){return t.state.set({error:null})})}},{key:"events",value:function(){return{"click .modal-footer .alert .dismiss":"dismissError","click .modal-footer .btn-cancel":"hide","click .modal-footer button.btn-primary":"act","hidden.bs.modal":"onHidden","click .close":"hide"}}},{key:"promise",value:function(){return this._promise}},{key:"hide",value:function(){return this.resolve("dismiss")}},{key:"act",value:function(){throw new Error("Not implemented.")}},{key:"primaryIcon",value:function(){return null}},{key:"renderFooter",value:function(){var t,e,n,i;if(this.rendered)return t=o.result(this,"dismissAction"),n=o.result(this,"primaryAction"),i=o.result(this,"primaryIcon"),e={template:this.footer,model:this.state,actionNames:{dismissAction:t,primaryAction:n},actionIcons:{primaryIcon:i}},this.renderChild("footer",new this.Footer(e),this.$(".modal-content"))}},{key:"postRender",value:function(){return this.renderFooter()}},{key:"onHidden",value:function(t){return(null==t||t.target===this.el)&&(this.resolve("dismiss"),this.shown=!1,this.remove())}},{key:"remove",value:function(){return this.reject(new Error("unresolved before removal")),this.shown?this._hideModal():_get(_getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"title",value:function(){return e.getText("modal.DefaultTitle")}},{key:"dismissAction",value:function(){return e.getText("modal.Dismiss")}},{key:"primaryAction",value:function(){return e.getText("modal.OK")}},{key:"modalSize",value:function(){}},{key:"body",value:function(){}},{key:"renderTitle",value:function(){if(this.rendered)return this.$(".modal-title").text(o.result(this,"title"))}},{key:"template",value:function(t){var e,n,i;return i=o.result(this,"title"),e=this.body(t),n="modal-"+o.result(this,"modalSize"),a({title:i,body:e,modalSize:n})}},{key:"show",value:function(){var e,t,n=this;(t=this.promise()).then(function(){return n.remove()},function(){return n.remove()});try{this._showModal(),this.trigger("shown",this.shown=!0)}catch(t){e=t,this.reject(e)}return t}},{key:"_showModal",value:function(){return this.$el.modal().modal("show")}},{key:"_hideModal",value:function(){return this.$el.modal("hide")}}]),t}();return t.prototype.Footer=n,t.prototype.footer=r.templateFromParts(["modal_error","modal_footer"]),t.prototype.shown=!1,t}.call(this)}).call(this)},{"../core-view":3,"../messages":16,"../templates":67,"./modal-footer":196,"es6-promise":238,underscore:262}],198:[function(v,y,t){(function(){var e,i,n,s,r,o,a,l,u,c,h,f,d;h=v("underscore");var t=v("backbone");t.Collection,s=v("../messages"),o=v("../templates"),n=v("../icons"),c=v("../core-view"),r=v("../core-model"),e=v("../core/collection"),v("../options");var p=v("../patterns");i=p.IS_BLANK;var g=v("../utils/events");f=g.ignore,s.setWithPrefix("multivalue",{AddValue:"Add value",AddValueShort:"+",SaveValue:"Save changes"}),d=v("../templates/mustache-settings"),l=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,r),_createClass2(t,[{key:"defaults",value:function(){return{editing:!1,scratch:null,selected:!0}}}]),t}();return t.prototype.idAttribute="value",t}.call(this),u=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.prototype.model=l,t}.call(this),a=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,c),_createClass2(t,[{key:"initialize",value:function(){return this.model.set({editing:!1,scratch:this.model.get("value")}),this.listenTo(this.model,"change:editing change:value change:selected",this.reRender)}},{key:"events",value:function(){return{"click .input-group":function(t){return null!=t?t.stopPropagation():void 0},"click .im-edit":"editValue","keyup input":"updateScratch","change input":"updateScratch","click .im-save":"saveValue","click .im-cancel":"cancelEditing",click:"toggleSelected"}}},{key:"updateScratch",value:function(t){return f(t),this.model.set({scratch:t.target.value})}},{key:"saveValue",value:function(t){return f(t),this.model.set({editing:!1,value:this.model.get("scratch")})}},{key:"cancelEditing",value:function(t){return f(t),this.model.set({editing:!1,scratch:this.model.get("value")})}},{key:"editValue",value:function(t){return f(t),this.model.toggle("editing")}},{key:"toggleSelected",value:function(t){return f(t),this.model.toggle("selected")}},{key:"getData",value:function(){return h.extend({icons:n,messages:s},this.model.toJSON())}}]),t}();return t.prototype.Model=l,t.prototype.tagName="tr",t.prototype.template=o.template("value-control-row",d),t}.call(this),y.exports=function(){var t=function(){function r(){return _classCallCheck2(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,c),_createClass2(r,[{key:"initialize",value:function(){var t,e,n,i;for(_get(_getPrototypeOf(r.prototype),"initialize",this).call(this),this.values=new u,t=0,e=(n=this.model.get("values")||[]).length;t<e;t++)i=n[t],this.values.add({value:i});return this.listenTo(this.values,"change:selected change:value add",this.updateModel),this.listenTo(this.values,"add",this.renderValue),this.listenTo(this.values,"remove",this.removeValue)}},{key:"stateEvents",value:function(){return{"change:value":this.onChangeNewValue}}},{key:"modelEvents",value:function(){return{"change:op":this.onChangeOp,"change:values":this.onChangeValues}}},{key:"onChangeValues",value:function(){var r,s;if(null==this.model.previous("values"))return r=this.model.get("values"),this.values.set(function(){var t,e,n,i;for(i=[],t=0,e=(n=null!=r?r:[]).length;t<e;t++)s=n[t],i.push({value:s});return i}())}},{key:"onChangeOp",value:function(){var t;if(("="===(t=this.model.get("op"))||"!="===t)&&!this.model.has("value"))return this.model.set({values:null,value:this.values.first().get("value")})}},{key:"events",value:function(){return{"keyup .im-new-multi-value":this.updateNewValue,"click .im-add":this.addValue}}},{key:"onChangeNewValue",value:function(){return this.$(".im-new-multi-value").val(this.state.get("value"))}},{key:"updateNewValue",value:function(){return this.state.set({value:this.$(".im-new-multi-value").val()})}},{key:"addValue",value:function(t){var e,n=this;return f(t),null==(e=this.state.get("value"))||i.test(e)?(this.model.set({error:new Error("please enter a value")}),this.listenToOnce(this.state,"change:value",function(){return n.model.unset("error")})):(this.values.add({value:e}),this.state.unset("value"))}},{key:"updateModel",value:function(){var r;return this.model.set({values:function(){var t,e,n,i;for(i=[],t=0,e=(n=this.values.where({selected:!0})).length;t<e;t++)r=n[t],i.push(r.get("value"));return i}.call(this)})}},{key:"getData",value:function(){return{messages:s}}},{key:"postRender",value:function(){return this.$table=this.$("table"),this.renderRows()}},{key:"renderRows",value:function(){var e=this;return this.values.each(function(t){return e.renderValue(t)})}},{key:"removeValue",value:function(){return this.removeChild(m.id)}},{key:"renderValue",value:function(t){return this.renderChild(t.id,new a({model:t}),this.$table)}},{key:"remove",value:function(){return this.values.close(),_get(_getPrototypeOf(r.prototype),"remove",this).call(this)}}]),r}();return t.prototype.className="im-value-options im-multi-value-table",t.prototype.template=o.template("add-value-control"),t}.call(this)}).call(this)},{"../core-model":2,"../core-view":3,"../core/collection":5,"../icons":14,"../messages":16,"../options":63,"../patterns":64,"../templates":67,"../templates/mustache-settings":69,"../utils/events":81,backbone:235,underscore:262}],199:[function(n,i,t){(function(){var e,t;t=n("../messages"),e=n("./active-constraint"),t.set({"conbuilder.Apply":"Apply"}),i.exports=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.model.set({new:!0,op:this.model.get("path").isAttribute()?"=":"LOOKUP"}),this.state.set({editing:!0})}},{key:"render",value:function(){return _get(_getPrototypeOf(t.prototype),"render",this).call(this),this.$el.addClass("im-new"),this}}]),t}()}).call(this)},{"../messages":16,"./active-constraint":112}],200:[function(t,i,e){(function(){var r,e,n,s;s=t("underscore"),n=t("./modal"),r=t("./constraint-adder"),t("../templates"),e=t("../messages"),i.exports=function(){var t=function(){function i(){return _classCallCheck2(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,n),_createClass2(i,[{key:"className",value:function(){return"im-constraint-dialogue "+_get(_getPrototypeOf(i.prototype),"className",this).call(this)}},{key:"initialize",value:function(t){var e=this,n=t.query;return this.query=n,_get(_getPrototypeOf(i.prototype),"initialize",this).call(this),this.listenTo(this.query,"change:constraints",this.resolve),this.listenTo(this.query,"editing-constraint",function(){return e.$(".im-add-constraint").removeClass("disabled")})}},{key:"events",value:function(){var n=this;return s.extend(_get(_getPrototypeOf(i.prototype),"events",this).call(this),{"click .im-add-constraint":"addConstraint",childremoved:function(t,e){if(e instanceof r)return n.hide()}})}},{key:"title",value:function(){return e.getText("constraints.AddNewFilter")}},{key:"primaryAction",value:function(){return e.getText("constraints.AddFilter")}},{key:"postRender",value:function(){var t,e;return e=this.$(".modal-footer"),t=this.$(".modal-body"),this.renderChild("adder",new r({buttonDelegate:e,query:this.query}),t),_get(_getPrototypeOf(i.prototype),"postRender",this).call(this)}}]),i}();return t.prototype.modalSize="lg",t}.call(this)}).call(this)},{"../messages":16,"../templates":67,"./constraint-adder":128,"./modal":197,underscore:262}],201:[function(t,o,e){(function(){var e,n,h,i,r,s,l,u;l=t("underscore"),h=t("../options"),n=t("../core-view"),e=t("./pathtree/attribute"),s=t("./pathtree/root"),i=t("./pathtree/reference"),r=t("./pathtree/reverse-reference"),u=function(t,e){return t.append(e)},o.exports=function(){var t=function(){function a(){var t;return _classCallCheck2(this,a),(t=_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))).createSubFinder=t.createSubFinder.bind(_assertThisInitialized(t)),t}return _inherits(a,n),_createClass2(a,[{key:"initialize",value:function(){var n,i,t,e,r,s,o;for(_get(_getPrototypeOf(a.prototype),"initialize",this).call(this),this.path=l.last(this.trail)||this.model.get("root")||this.query.makePath(this.query.root),this.cd=this.path.getEndClass(),o=u.bind(null,this.path),t=0,e=(s=["attributes","references","collections"]).length;t<e;t++)this[i=s[t]]=function(){var t,e;for(r in e=[],t=this.cd[i])n=t[r],e.push(o(n));return e}.call(this);return this.listenTo(this.model,"change:allowRevRefs",this.render),this.listenTo(this.openNodes,"reset",this.render)}},{key:"getDepth",value:function(){return this.trail.length}},{key:"showRoot",value:function(){return 0===this.getDepth()&&this.model.get("canSelectReferences")}},{key:"events",value:function(){return{scroll:this.onScroll}}},{key:"onScroll",value:function(){var t,e,n=this;if(!this.state.get("ignoreScroll"))return e=this.el.scrollTop,t=this.state.has("scroll")?Math.abs(this.state.get("scroll")-e):0,0!==e||t<50?this.state.set({scroll:e}):l.defer(function(){return n.el.scrollTop=n.state.get("scroll")})}},{key:"startIgnoringScroll",value:function(){return this.state.set({ignoreScroll:!0})}},{key:"startListeningForScroll",value:function(){return this.state.has("scroll")&&(this.el.scrollTop=this.state.get("scroll")),this.state.set({ignoreScroll:!1})}},{key:"preRender",value:function(){return this.startIgnoringScroll()}},{key:"postRender",value:function(){var t,e,n,i,r,s,o,a,l,u,c;for(c=h.get("ShowId"),this.showRoot()&&(u=this.createRoot(),this.renderChild("root",u)),e=0,i=(a=this.attributes).length;e<i;e++)s=a[e],!c&&"id"===s.end.name||(t=this.createAttribute(s),this.renderChild(s.toString(),t));for(n=0,r=(l=this.references.concat(this.collections)).length;n<r;n++)s=l[n],o=this.createReference(s),this.renderChild(s.toString(),o);return this.startListeningForScroll()}},{key:"createRoot",value:function(){return new s({query:this.query,model:this.model,chosenPaths:this.chosenPaths,openNodes:this.openNodes,cd:this.cd})}},{key:"createAttribute",value:function(t){return new e({model:this.model,chosenPaths:this.chosenPaths,view:this.view,query:this.query,trail:this.trail,path:t})}},{key:"createReference",value:function(t){var e,n;return n=this.isLoop(t),e=this.model.get("allowRevRefs"),new(n&&!e?r:i)({model:this.model,chosenPaths:this.chosenPaths,query:this.query,trail:this.trail,path:t,view:this.view,openNodes:this.openNodes,createSubFinder:this.createSubFinder})}},{key:"createSubFinder",value:function(t){return function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,a),new a(l.extend({model:this.model,query:this.query,chosenPaths:this.chosenPaths,view:this.view,openNodes:this.openNodes},t))}},{key:"isLoop",value:function(t){return!(null==t.end.reverseReference||!this.path.isReference()||!this.path.getParent().isa(t.end.referencedType)||this.path.end.name!==t.end.reverseReference)}}]),a}();return t.prototype.parameters=["model","query","chosenPaths","openNodes","view","trail"],t.prototype.tagName="ul",t.prototype.className="im-path-chooser",t}.call(this)}).call(this)},{"../core-view":3,"../options":63,"./pathtree/attribute":202,"./pathtree/reference":203,"./pathtree/reverse-reference":204,"./pathtree/root":205,underscore:262}],202:[function(t,s,e){(function(){var n,i,e,r,l,o,u;r=t("underscore"),e=t("../../core-view"),i=t("../../options"),n=t("../../icons"),o=function(t){return null!=t&&/\w/.test(t)},u=function(t){return null!=t?t.replace(/^.*\s*>/,""):void 0},l=function(t){return"<strong>"+t+"</strong>"},s.exports=function(){var t=function(){function a(){return _classCallCheck2(this,a),_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))}return _inherits(a,e),_createClass2(a,[{key:"events",value:function(){return{"click a":"handleClick"}}},{key:"initialize",value:function(t){var e=this,n=t.chosenPaths,i=t.view,r=t.query,s=t.path,o=t.trail;return this.chosenPaths=n,this.view=i,this.query=r,this.path=s,this.trail=o,_get(_getPrototypeOf(a.prototype),"initialize",this).call(this),this.depth=this.trail.length+1,this.state.set({visible:!0,highlitName:null,name:this.path.toString()}),this.listenTo(this.chosenPaths,"add remove reset",this.handleChoice),this.listenTo(this.state,"change:visible",this.onChangeVisible),this.listenTo(this.state,"change:highlitName",this.render),this.listenTo(this.state,"change:displayName",this.render),this.path.getDisplayName().then(function(t){return e.state.set({displayName:t,name:u(t)})})}},{key:"onChangeVisible",value:function(){return this.$el.toggle(this.state.get("visible"))}},{key:"getFilterPatterns",value:function(){var t,e,n,i,r,s;if(t=this.model.get("filter"),o(t)){for(r=[],e=0,n=(i=t.split(/\s+/)).length;e<n;e++)(s=i[e])&&r.push(new RegExp(s,"i"));return r}return[]}},{key:"handleClick",value:function(t){var e;if(t.stopPropagation(),t.preventDefault(),!(this.model.get("dontSelectView")&&(null!=(e=this.view)?e.contains(this.path):void 0)))return this.chosenPaths.contains(this.path)?this.chosenPaths.remove(this.path):this.choose()}},{key:"choose",value:function(){return this.model.get("multiSelect")?this.chosenPaths.add(this.path):this.chosenPaths.reset([this.path])}},{key:"handleChoice",value:function(){return this.$el.toggleClass("active",this.chosenPaths.contains(this.path))}},{key:"setHighlitName",value:function(t){var e=this;return this.state.has("name")?this.state.set({highlitName:this.getHighlitName(t)}):this.state.once("change:name",function(){return e.state.set({highlitName:e.getHighlitName(t)})})}},{key:"getHighlitName",value:function(t){var e,n,i,r,s,o;for(r=this.state.get("name"),null!=(o=this.path.end)?o.name:void 0,e=r,n=0,i=t.length;n<i;n++)s=t[n],e=e.replace(s,l);return/strong/.test(e)?e:l(e)}},{key:"getDisabled",value:function(){return!1}},{key:"getData",value:function(){var t,e;return e=i.get("ShowId")?this.path+" ("+this.path.getType()+")":"",t=this.state.get("highlitName")?this.state.get("highlitName"):this.state.escape("name"),{icon:n.icon("Attribute"),title:e,name:t}}},{key:"render",value:function(){return _get(_getPrototypeOf(a.prototype),"render",this).call(this),this.$el.toggleClass("disabled",this.getDisabled()),i.get("ShowId")&&this.$("a").tooltip({placement:"bottom"}),this.handleChoice(),null!=this.view&&this.$el.toggleClass("in-view",this.view.contains(this.path)),this}}]),a}();return t.prototype.tagName="li",t.prototype.template=r.template('<a href="#" title="<%- title %>">\n  <%= icon %>\n  <span>\n    <%= name %>\n  </span>\n</a>'),t}.call(this)}).call(this)},{"../../core-view":3,"../../icons":14,"../../options":63,underscore:262}],203:[function(r,s,t){(function(){var t,e,n;e=r("../../icons"),t=r("./attribute");var i=r("../../utils/events");n=i.ignore,s.exports=function(){function i(){return _classCallCheck2(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,t),_createClass2(i,[{key:"initialize",value:function(t){var e=t.openNodes,n=t.createSubFinder;return this.openNodes=e,this.createSubFinder=n,_get(_getPrototypeOf(i.prototype),"initialize",this).call(this),this.state.set({collapsed:!0}),this.listenTo(this.openNodes,"add remove",this.setCollapsed),this.listenTo(this.state,"change:collapsed",this.onChangeCollapsed),this.setCollapsed()}},{key:"setCollapsed",value:function(){var t;return null!=(t=this.state)?t.set({collapsed:!this.openNodes.contains(this.path)}):void 0}},{key:"handleClick",value:function(t){return n(t),this.$(t.target).is("i")||!this.model.get("canSelectReferences")?this.openNodes.togglePresence(this.path):_get(_getPrototypeOf(i.prototype),"handleClick",this).call(this,t)}},{key:"getData",value:function(){var t;return(t=_get(_getPrototypeOf(i.prototype),"getData",this).call(this)).icon=e.icon(this.state.get("collapsed")?"ClosedReference":"OpenReference"),t}},{key:"postRender",value:function(){return this.onChangeCollapsed()}},{key:"onChangeCollapsed",value:function(){var t,e;return this.state.get("collapsed")?this.removeChild("subfinder"):(e=this.trail.concat([this.path]),t=this.createSubFinder({trail:e}),this.renderChild("subfinder",t))}}]),i}()}).call(this)},{"../../icons":14,"../../utils/events":81,"./attribute":202}],204:[function(t,e,n){(function(){var n,i;n=t("../../icons"),i=t("./reference"),e.exports=function(){var t=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,i),_createClass2(e,[{key:"getData",value:function(){var t;return(t=_get(_getPrototypeOf(e.prototype),"getData",this).call(this)).icon+=" "+n.icon("ReverseRef"),t}},{key:"handleClick",value:function(t){return t.preventDefault(),t.stopPropagation(),this.$el.tooltip("hide")}},{key:"render",value:function(){return _get(_getPrototypeOf(e.prototype),"render",this).call(this),this.$el.attr({title:"Refers back to "+this.path.getParent().getParent()}).tooltip(),this}}]),e}();return t.prototype.className="im-reverse-reference",t}.call(this)}).call(this)},{"../../icons":14,"./reference":203}],205:[function(t,i,e){(function(){var e,n,a;a=t("underscore"),n=t("../../icons"),e=t("./attribute"),i.exports=function(){var t=function(){function i(){return _classCallCheck2(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,e),_createClass2(i,[{key:"initialize",value:function(t){var e;return e=t.cd,this.openNodes=t.openNodes,t.trail=[],t.path=t.query.getPathInfo(e.name),_get(_getPrototypeOf(i.prototype),"initialize",this).call(this,t)}},{key:"getData",value:function(){return a.extend(_get(_getPrototypeOf(i.prototype),"getData",this).call(this),{icon:n.icon("RootClass")})}},{key:"handleClick",value:function(t){var r,e,s,o;if(null!=t&&t.preventDefault(),null!=t&&t.stopPropagation(),!this.$(t.target).is("i")&&this.model.get("canSelectReferences"))return _get(_getPrototypeOf(i.prototype),"handleClick",this).call(this,t);if(this.openNodes.size())return this.openNodes.reset([]);var n=this.path.getType();return r=n.collections,o=n.references,e=function(){var t,e,n,i;for(i=[],t=0,e=(n=a.values(o).concat(a.values(r))).length;t<e;t++)s=n[t],i.push(this.path.append(s.name));return i}.call(this),this.openNodes.reset(e)}}]),i}();return t.prototype.className="im-rootclass",t}.call(this)}).call(this)},{"../../icons":14,"./attribute":202,underscore:262}],206:[function(t,i,e){(function(){var e,n,r;r=t("underscore"),e=t("../core-view"),n=t("../templates"),i.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"Dialogue",value:function(){throw new Error("Not implemented")}},{key:"longLabel",value:function(){throw new Error("Not implemented")}},{key:"shortLabel",value:function(){throw new Error("Not implemented")}},{key:"icon",value:function(){throw new Error("Not implemented")}},{key:"labels",value:function(){return{ICON:r.result(this,"icon"),LONG:r.result(this,"longLabel"),SHORT:r.result(this,"shortLabel")}}},{key:"initState",value:function(){return this.state.set({disabled:!1})}},{key:"events",value:function(){return{click:this.onClick}}},{key:"createDialogue",value:function(){return new this.Dialogue(this.dialogueOptions())}},{key:"dialogueOptions",value:function(){return{query:this.query}}},{key:"stateEvents",value:function(){return{"change:disabled":function(){return this.$(".btn.im-open-dialogue").toggleClass("disabled",this.state.get("disabled"))}}}},{key:"onClick",value:function(t){var e,n,i=this;if(!this.state.get("disabled"))return e=this.createDialogue(),this.renderChild("dialogue",e),this.state.set({disabled:!0}),n=function(){return i.removeChild("dialogue"),document.body.classList.remove("modal-open"),r.defer(function(){return i.state.set({disabled:!1})})},e.show().then(n,n)}}]),t}();return t.prototype.template=n.template("modal-dialogue-opener"),t.prototype.parameters=["query"],t}.call(this)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],207:[function(c,h,t){(function(){var e,n,i,r,s,t,o,a,l;n=c("../core-view");var u=a=c("../core/type-assertions");l=u.UnionOf,t=u.Listenable,o=u.Structure,e=c("./column-manager/button"),i=c("./filter-dialogue/button"),s=c("./join-manager/button"),r=l(t,new o("History",{getCurrentQuery:a.Function})),h.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this.history,"changed:current",this.reRender)}},{key:"renderChildren",value:function(){var t;return t=this.history.getCurrentQuery(),this.renderChild("cols",new e({query:t})),this.renderChild("cons",new i({query:t})),this.renderChild("joins",new s({query:t}))}}]),t}();return t.prototype.className="im-query-management",t.prototype.parameters=["history"],t.prototype.parameterTypes={history:r},t}.call(this)}).call(this)},{"../core-view":3,"../core/type-assertions":10,"./column-manager/button":119,"./filter-dialogue/button":168,"./join-manager/button":178}],208:[function(f,d,t){(function(){var n,e,u,i,c,h,r,s,o,a,l;f("underscore"),n=f("jquery"),i=f("../core-view"),f("../templates"),r=f("../options"),s=f("./query-management-tools"),a=f("./undo-history"),h=f("./list-dialogue/button"),u=f("./code-gen-button"),c=f("./export-dialogue/button");var t=f("../utils/events");e=t.Bus,o=["im-query-management","im-history","im-query-consumers"],l=function(t){return'<div class="'+t+' clearfix"></div>'},d.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,i),_createClass2(t,[{key:"template",value:function(){return o.map(l).join("")}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this.history,"changed:current",this.renderQueryConsumers)}},{key:"renderChildren",value:function(){return this.renderManagementTools(),this.renderUndo(),this.renderQueryConsumers()}},{key:"renderManagementTools",value:function(){return this.renderChildAt(".im-query-management",new s({history:this.history}))}},{key:"renderUndo",value:function(){var t;return t=this.$(".im-history"),this.renderChild("undo",new a({collection:this.history}),t)}},{key:"getConsumerContainer",value:function(){var t;return null!=this.consumerContainer?(this.consumerContainer.classList.add(r.get("StylePrefix")),this.consumerContainer.classList.add("im-query-consumers"),this.$(".im-query-management").addClass("im-has-more-space"),this.$(".im-history").addClass("im-has-more-space"),this.consumerContainer):(t=this.$(".im-query-consumers").empty()).length?t:void 0}},{key:"renderQueryConsumers",value:function(){var t,e,n,i,r,s,o,a,l=this;if(t=this.getConsumerContainer()){if(s=this.history.getCurrentQuery(),a=this.selectedObjects,r=new h({query:s,tableState:this.tableState,selected:a}),this.listenTo(r,"all",function(t){for(var e,n,i=arguments.length,r=Array(1<i?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return(e=l.bus).trigger.apply(e,["list-action:"+t].concat(r)),(n=l.bus).trigger.apply(n,["list-action",t].concat(r))}),this.renderChild("save",new c({query:s,tableState:this.tableState}),t),this.renderChild("code",new u({query:s,tableState:this.tableState}),t),this.renderChild("lists",r,t),this.consumerContainer&&this.consumerBtnClass)for(e=0,i=(o=["save","code","lists"]).length;e<i;e++)n=o[e],this.listenTo(this.children[n],"rendered",this.setButtonStyle);return this.setButtonStyle()}}},{key:"setButtonStyle",value:function(){var t,e;if((e=this.consumerContainer)&&(t=this.consumerBtnClass))return n(".btn",e).addClass(t)}}]),t}();return t.prototype.className="im-query-tools",t.prototype.parameters=["tableState","history","selectedObjects"],t.prototype.optionalParameters=["bus","consumerContainer","consumerBtnClass"],t.prototype.bus=new e,t}.call(this)}).call(this)},{"../core-view":3,"../options":63,"../templates":67,"../utils/events":81,"./code-gen-button":115,"./export-dialogue/button":139,"./list-dialogue/button":186,"./query-management-tools":207,"./undo-history":229,jquery:256,underscore:262}],209:[function(t,s,e){(function(){function e(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}var r,n,i,o,a,l,u,c,h,f,d,p,g,m,v,y,_,b,w,C;C=t("underscore"),i=t("../core-view"),u=t("../options"),y=t("../templates"),l=t("../messages"),t("../core/collection"),t("../core-model"),_=t("../core/type-assertions"),g=t("../models/table"),n=t("../models/column-headers"),w=t("../models/uniq-items"),d=t("../models/rows"),p=t("../models/selected-objects"),a=t("../models/history"),r=t("../utils/cell-model-factory"),m=t("../utils/table-results"),f=t("./table/inner"),o=t("./table/error-notice"),h=t("./table/pagination"),c=t("./table/page-sizer"),v=t("./table/summary"),t("../messages/table"),b={message:"Unknown error",key:"error.Unknown"},s.exports=function(){var t=function(){function s(){var t;return _classCallCheck2(this,s),(t=_possibleConstructorReturn(this,_getPrototypeOf(s).apply(this,arguments))).setSelecting=t.setSelecting.bind(_assertThisInitialized(t)),t.unsetSelecting=t.unsetSelecting.bind(_assertThisInitialized(t)),t.canUseFormatter=t.canUseFormatter.bind(_assertThisInitialized(t)),t}return _inherits(s,i),_createClass2(s,[{key:"initialize",value:function(){return _get(_getPrototypeOf(s.prototype),"initialize",this).call(this),null==this.columnHeaders&&(this.columnHeaders=new n),null==this.blacklistedFormatters&&(this.blacklistedFormatters=new w),this.rows=new d,this.listenTo(this.history,"changed:current",this.onChangeQuery),this.listenTo(this.blacklistedFormatters,"reset add remove",this.buildColumnHeaders),this.listenTo(this.columnHeaders,"change:minimised",this.onChangeHeaderMinimised),this.onChangeQuery()}},{key:"onChangeQuery",value:function(){var t,e,n=this,i=this.query=this.history.getCurrentQuery();return e=i.service,t=i.model,null==this.cellModelFactory&&(this.cellModelFactory=new r(e,t)),this.buildColumnHeaders(),this.fetchVersion().then(function(){return n.query.count(function(t,e){return n.model.set({error:t,count:e})}),n.setFreshness()})}},{key:"fetchVersion",value:function(){var e=this;return this.query.service.fetchVersion().then(function(t){return e.model.set({version:t})}).then(null,function(t){return onConnectionError(t)})}},{key:"onConnectionError",value:function(t){var e;return(e=new Error("Could not connect to server")).key="error.ConnectionError",this.model.set({error:e})}},{key:"modelEvents",value:function(){return{"change:freshness change:start change:size":this.fillRows,"change:start change:size":this.overlayTable,"change:fill":this.removeOverlay,"change:freshness":this.resetPhase,"change:phase":this.onChangePhase,"change:error":this.onChangeError,"change:count":this.onChangeCount}}},{key:"onChangePhase",value:function(){return this.removeOverlay(),this.reRender()}},{key:"onChangeCount",value:function(){var t,e,n,i=this.model.pick("start","count","size");if(n=i.start,e=i.size,(t=i.count)<=n)return this.model.set({start:Math.max(0,t-e)})}},{key:"resetPhase",value:function(){return this.model.set({phase:"FETCHING"})}},{key:"onChangeError",value:function(){if(this.model.get("error"))return this.model.set({phase:"ERROR"})}},{key:"remove",value:function(){return this.cellModelFactory.destroy(),delete this.cellModelFactory,_get(_getPrototypeOf(s.prototype),"remove",this).call(this)}},{key:"onChangeHeaderMinimised",value:function(t){var e,n;return n=this.query.makePath(t.get("path")),e=this.model.get("minimisedColumns"),t.get("minimised")?e.add(n):e.remove(n)}},{key:"setSelecting",value:function(){return e(this,s),this.model.set({selecting:!0})}},{key:"unsetSelecting",value:function(){return e(this,s),this.model.set({selecting:!1})}},{key:"canUseFormatter",value:function(t){return e(this,s),null!=t&&!this.blacklistedFormatters.contains(t)}},{key:"setFreshness",value:function(){return this.model.set({freshness:this.query.toXML()})}},{key:"buildColumnHeaders",value:function(){var e,n,i,r=this;return i={silent:!0},n=this.model.get("minimisedColumns"),e=function(t){return n.contains(r.query.makePath(t.get("path")))},this.columnHeaders.setHeaders(this.query,this.blacklistedFormatters),this.columnHeaders.forEach(function(t){return t.set({minimised:e(t)},i)})}},{key:"fillRows",value:function(){var t,e,n,i,r=this,s=this.model.pick("start","size");return n=s.start,e=s.size,i=function(){return r.model.set({phase:"SUCCESS"})},t=function(t){var e=0<arguments.length&&void 0!==t?t:b;return r.model.set({phase:"ERROR",error:e})},m.getCache(this.query).fetchRows(n,e).then(function(t){return r.fillRowsCollection(t)}).then(i,t).then(this.model.filled,this.model.filled)}},{key:"fillRowsCollection",value:function(t){var s,e,n,o=this;return s=this.cellModelFactory.getCreator(this.query),n=this.model.get("start"),e=t.map(function(i,t){var r;return{id:o.query.toXML()+"#"+(n+t),index:n+t,query:o.query.toXML(),cells:function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(s(r));return n}()}}),this.rows.set(e)}},{key:"overlayTable",value:function(){var t,e,n,i=this;if(null!=(e=this.children.inner)?e.rendered:void 0)return n=this.children.inner.$el,this.$el.offset(),n.offset(),this.removeOverlay(),this.overlay=document.createElement("div"),this.overlay.className="im-table-overlay im-hidden",(t=this.make("h1",{},l.getText("table.OverlayText"))).style.top=n.height()/2+"px",this.overlay.appendChild(t),this.el.appendChild(this.overlay),C.delay(function(){var t;return null!=(t=i.overlay)?t.classList.remove("im-hidden"):void 0},100)}},{key:"removeOverlay",value:function(){return null!=this.overlay&&this.el.removeChild(this.overlay),delete this.overlay}},{key:"template",value:function(){switch(this.model.get("phase")){case"FETCHING":return this.renderFetching();case"ERROR":return this.renderError();case"SUCCESS":return this.renderTable();default:throw new Error("Unknown phase: "+this.model.get("phase"))}}},{key:"renderFetching",value:function(){return y.template("table-building")(this.getBaseData())}},{key:"renderError",value:function(){var t;return this.removeChild("error"),this.children.error=t=new o({query:this.query,model:this.model}),t.render().el}},{key:"renderTable",value:function(){var t,e;return t=document.createDocumentFragment(),this.renderWidgets(t),e=new f(C.extend(C.pick(this,f.prototype.parameters),{tableState:this.model})),this.renderChild("inner",e,t),t}},{key:"renderWidgets",value:function(t){var e,n,i,r,s,o;if(null==t&&(t=this.el),(o=C.chain(u.get("TableWidgets")).map(function(t,e){var n=t.enabled;return{name:e,index:t.index,enabled:n}}).where({enabled:!0}).sortBy("index").pluck("name").value()).length){for((r=document.createElement("div")).className="im-table-controls",(e=document.createElement("div")).style.clear="both",n=0,i=o.length;n<i;n++)"place"+(s=o[n])in this&&this["place"+s](r);return r.appendChild(e),t.appendChild(r)}}},{key:"renderWidget",value:function(t,e,n){var i,r=this;return i=new n({model:this.model,getQuery:function(){return r.history.getCurrentQuery()}}),this.renderChild(t,i,e)}},{key:"placePagination",value:function(t){return this.renderWidget("pagination",t,h)}},{key:"placePageSizer",value:function(t){return this.renderWidget("pagesizer",t,c)}},{key:"placeTableSummary",value:function(t){return this.renderWidget("tablesummary",t,v)}}],[{key:"create",value:function(t){var e,n,i=t.query,r=t.model;return _.assertMatch(_.Query,i),null==r&&(r=new g),e=new a,n=new p(i.service),e.setInitialState(i),new s({history:e,model:r,selectedObjects:n})}}]),s}();return t.prototype.Model=g,t.prototype.className="im-table-container",t.prototype.parameters=["history","selectedObjects"],t.prototype.optionalParameters=["model","columnHeaders","blacklistedFormatters"],t.prototype.parameterTypes={history:_.InstanceOf(a,"History"),selectedObjects:_.InstanceOf(p,"SelectedObjects")},t.prototype.cellModelFactory=null,t}.call(this)}).call(this)},{"../core-model":2,"../core-view":3,"../core/collection":5,"../core/type-assertions":10,"../messages":16,"../messages/table":28,"../models/column-headers":39,"../models/history":45,"../models/rows":57,"../models/selected-objects":58,"../models/table":61,"../models/uniq-items":62,"../options":63,"../templates":67,"../utils/cell-model-factory":75,"../utils/table-results":108,"./table/error-notice":214,"./table/inner":217,"./table/page-sizer":220,"./table/pagination":221,"./table/summary":227,underscore:262}],210:[function(t,a,e){(function(){var e,n,r,i,s,o;s=t("underscore"),e=t("../../core-view"),i=t("../../templates"),o=t("../../utils/build-skipset"),t("../../messages/table"),a.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"collectionEvents",value:function(){return{reset:this.reRender,add:this.onRowAdded,remove:this.onRowRemoved}}},{key:"template",value:function(){}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this._skipSets={}}},{key:"renderChildren",value:function(){var e,n=this;return this.collection.isEmpty()?this.handleEmptyTable():(e=document.createDocumentFragment("tbody"),this.collection.forEach(function(t){return n.addRow(t,e)}),this.el.appendChild(e))}},{key:"onRowAdded",value:function(t){return this.removeChild("apology"),this.addRow(t)}},{key:"onRowRemoved",value:function(t){if(this.removeChild(t.id),this.collection.isEmpty())return this.handleEmptyTable()}},{key:"addRow",value:function(t,e){var n,i;return null==e&&(e=this.el),n=this.skipped(t),i=new r({model:t,makeCell:this.makeCell,skipped:n}),this.renderChild(t.id,i,e)}},{key:"handleEmptyTable",value:function(){return this.renderChild("apology",new n({history:this.history}))}},{key:"skipped",value:function(t){var e,n,i,r,s=this;return null!=(e=this._skipSets)[n=t.get("query")]?e[n]:e[n]=(r=t.get("cells").map(s.makeCell),i=o(r),r.forEach(function(t){return t.remove()}),i)}}]),t}();return t.prototype.tagName="tbody",t.prototype.parameters=["makeCell","collection","history"],t}.call(this),r=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"postRender",value:function(){var t,e,n,i,r,s;for(s=[],n=i=0,r=(e=this.model.get("cells").map(this.makeCell)).length;i<r;n=++i)t=e[n],this.skipped[t.model.get("column")]||s.push(this.renderChild(n,t));return s}}]),t}();return t.prototype.tagName="tr",t.prototype.parameters=["makeCell","skipped"],t}.call(this),n=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"events",value:function(){return{"click .btn-undo":function(){return this.history.popState()}}}},{key:"getData",value:function(){return s.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),{selectList:this.history.getCurrentQuery().views,canUndo:1<this.history.length})}}]),t}();return t.prototype.tagName="tr",t.prototype.className="im-empty-apology",t.prototype.template=i.template("no-results"),t.prototype.parameters=["history"],t}.call(this)}).call(this)},{"../../core-view":3,"../../messages/table":28,"../../templates":67,"../../utils/build-skipset":72,underscore:262}],211:[function(t,e,n){(function(){var s,o,a;o=t("../../models/nested-table"),a=t("./subtable"),s=t("./cell"),e.exports=function(e,n){var i,r;return e.root.replace(/\/service\/?$/,""),r=function(t){var e;return null!=(e=n.getFormatter(t.get("node"),t.get("column")))&&n.canUseFormatter(e)?e:null},i=function(t){return t instanceof o?new a({query:n.query,model:t,cellify:i,expandedSubtables:n.expandedSubtables}):new s({model:t,service:e,popovers:n.popoverFactory,selectedObjects:n.selectedObjects,tableState:n.tableState,formatter:r(t)})}}}).call(this)},{"../../models/nested-table":48,"./cell":212,"./subtable":226}],212:[function(g,m,t){(function(p){(function(){var n,e,i,r,s,a,o,l,u,t,c,h,f,d=[].indexOf;u=g("underscore"),n=g("jquery"),i=g("../../core-view"),l=g("../../templates"),a=g("../../options"),s=g("../../messages"),e=g("../../models/cell"),r=g("../../formatting"),s.setWithPrefix("table.cell",{Link:"link",NullEntity:"No <%= type %>",PreviewTitle:function(t){return t.types.join(a.get("DynamicObjects.NameDelimiter"))}}),o=g("../../models/selected-objects"),f=g("../../core/type-assertions"),h=l.template("classy-popover")({classes:"item-preview"}),t=function(t,e){return null!=e&&null!=t.model.findSharedAncestor(t,e)},c=u.memoize(t,function(t,e){return t+"<"+(null!=e?e:"!")}),m.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,i),_createClass2(t,[{key:"id",value:function(){return u.uniqueId("im_table_cell_")}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listen()}},{key:"initState",value:function(){return this.setSelected(),this.setSelectable(),this.setHighlit(),this.setMinimised()}},{key:"getPath",value:function(){return this.model.get("column")}},{key:"getTypes",value:function(){var t,e,n,i,r,s;if(r=this.model.get("node"),null==(e=this.model.get("entity").get("classes")))return[r];for(s=[],n=0,i=e.length;n<i;n++)t=e[n],s.push(r.model.makePath(t));return s}},{key:"listen",value:function(){return this.listenToEntity(),this.listenToSelectedObjects(),this.listenToOptions(),this.listenToTableState()}},{key:"listenToOptions",value:function(){return this.listenTo(a,"change:TableCell.IndicateOffHostLinks",this.reRender),this.listenTo(a,"change:TableCell.ExternalLinkIcons",this.reRender),this.listenTo(a,"change:TableCell.PreviewTrigger",this.onChangeTrigger)}},{key:"listenToTableState",value:function(){var t;return t=this.tableState,this.listenTo(t,"change:selecting",this.setInputDisplay),this.listenTo(t,"change:previewOwner",this.closeOwnPreview),this.listenTo(t,"change:highlitNode",this.setHighlit),this.listenTo(t,"change:minimisedColumns",this.setMinimised)}},{key:"listenToSelectedObjects",value:function(){var t;return t=this.selectedObjects,this.listenTo(t,"add remove reset",this.setSelected),this.listenTo(t,"add remove reset change:commonType change:node",this.setSelectable)}},{key:"modelEvents",value:function(){return{"change:entity":this.onChangeEntity}}},{key:"stateEvents",value:function(){return{"change:highlit change:selected":this.setActiveClass,"change:selectable":this.onChangeSelectable,"change:selected":this.setInputChecked,"change:showPreview":this.onChangeShowPreview,"change:minimised":this.reRender}}},{key:"events",value:function(){var t,e;if(t={"show.bs.popover":this.onShowPreview,"hide.bs.popover":this.onHidePreview,"click a.im-cell-link":this.onClickCellLink},"hover"===(e=a.get("TableCell").PreviewTrigger))t["mouseover .im-cell-link"]=this.showPreview,t["mouseout .im-cell-link"]=this.hidePreview,t.click=this.activateChooser;else{if("click"!==e)throw new Error("Unknown cell preview: "+e);t.click=this.clickTogglePreview}return t}},{key:"onChangeTrigger",value:function(){return this.destroyPreview(),this.initPreview(),this.delegateEvents()}},{key:"onClickCellLink",value:function(t){var e;if(!this.tableState.get("selecting"))return(e=n.Event("view.im.object")).object=this.model.get("entity").toJSON(),this.$el.trigger(e),e.isDefaultPrevented()?t.preventDefault():void 0;t.preventDefault()}},{key:"closeOwnPreview",value:function(){if(this.el.id!==this.tableState.get("previewOwner"))return this.hidePreview(),this._hidePreview()}},{key:"listenToEntity",value:function(){return this.listenTo(this.model.get("entity"),"change",this.updateValue)}},{key:"onShowPreview",value:function(){return this.tableState.set({previewOwner:this.el.id})}},{key:"onHidePreview",value:function(){if(this.el.id===this.tableState.get("previewOwner"))return this.tableState.set({previewOwner:null})}},{key:"toggleSelection",value:function(){var t,e,n,i;if(n=(t=this.model.get("entity")).get("id"),null!=t){if(e=this.selectedObjects.get(n))return this.selectedObjects.remove(e);if(null==(i=this.getMostSuitableIdentity()))throw new Error("None of our identities is a compatible");return this.selectedObjects.add(i)}}},{key:"getMostSuitableIdentity",value:function(){var n,e,r,t,i,s,o;return i=this.model.get("node"),n=i.model.getSubclassesOf(i.getType()),r=this.model.get("entity").get("id"),t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getTypes()).length;t<e;t++)o=n[t],i.push({class:String(o),id:r});return i}.call(this),this.selectedObjects.isEmpty()?u.find(t,function(t){var e;return e=t.class,0<=d.call(n,e)}):(e=i.model.makePath(this.selectedObjects.state.get("commonType")),u.all(t,function(t){return c(e,t.class)}),s=u.sortBy(t,function(t){return i.model.getAncestorsOf(t.class).length}),u.last(s))}},{key:"setSelected",value:function(){return this.state.set({selected:null!=this.selectedObjects.get(this.model.get("entity"))})}},{key:"setSelectable",value:function(){var t,e,n,i;return t=this.selectedObjects.state.get("commonType"),e=this.selectedObjects.state.get("node"),i=this.selectedObjects.size(),n=(null==e||e===String(this.model.get("node")))&&(0===i||this.isCompatibleWith(t)),this.state.set({selectable:n})}},{key:"isCompatibleWith",value:function(e){return this.getTypes().some(function(t){return c(t,e)})}},{key:"setHighlit",value:function(){var t,e;return e=this.model.get("node"),t=this.tableState.get("highlitNode"),this.state.set({highlit:null!=t&&String(e)===String(t)})}},{key:"setMinimised",value:function(){var t,e;return e=this.model.get("column"),t=this.tableState.get("minimisedColumns").contains(e),this.state.set({minimised:t})}},{key:"onChangeEntity",value:function(){var t;return t=this.model.previous("entity"),delete this._has_id,null!=t&&this.stopListening(t),this.listenToEntity()}},{key:"clickTogglePreview",value:function(){return this.activateChooser()||this.state.toggle("showPreview")}},{key:"activateChooser",value:function(){var t;if(this.hasID())return t=this.tableState.get("selecting"),this.state.get("selectable")&&t?this.toggleSelection():void 0}},{key:"hasID",value:function(){return null!=this._has_id?this._has_id:this._has_id=null!=this.model.get("entity").get("id")}},{key:"showPreview",value:function(){return this.state.set({showPreview:!0})}},{key:"hidePreview",value:function(){return this.state.set({showPreview:!1})}},{key:"_showPreview",value:function(){var t,e,n=this;if(this.rendered){if(this.tableState.get("selecting"))return;return e=function(){var t;if(n.state.get("showPreview"))return null!=(t=n.children.popover)?t.render():void 0},"hover"===(t=a.get("TableCell")).PreviewTrigger?u.delay(e,t.HoverDelay):e()}}},{key:"_hidePreview",value:function(){var t,e;if(null!=(t=this.children.popover)?t.rendered:void 0)return null!=(e=this.popoverTarget)?e.popover("hide"):void 0}},{key:"onChangeShowPreview",value:function(){return this.state.get("showPreview")?this._showPreview():this._hidePreview()}},{key:"onChangeSelectable",value:function(){return this.setDisabledCellClass(),this.setInputDisabled()}},{key:"updateValue",value:function(){var t=this;return u.defer(function(){return t.$(".im-displayed-value").html(t.getFormattedValue())})}},{key:"setActiveClass",value:function(){var t,e,n=this.state.pick("highlit","selected");return t=n.highlit,e=n.selected,this.$el.toggleClass("active",t||e)}},{key:"setInputChecked",value:function(){return this.$("input").prop({checked:this.getInputState().checked})}},{key:"setInputDisplay",value:function(){return this.$("input").css({display:this.getInputState().display})}},{key:"setDisabledCellClass",value:function(){return this.$el.toggleClass("im-not-selectable",!this.state.get("selectable"))}},{key:"setInputDisabled",value:function(){return this.$("input").prop({disabled:this.getInputState().disabled})}},{key:"getData",value:function(){var t,e,n,i,r,s,o;for(e in n=(i=a.get("TableCell")).IndicateOffHostLinks?p.location.host:/.*/,(t=this.model.toJSON()).formattedValue=this.getFormattedValue(),t.input=this.getInputState(),t.icon=null,t.url=s=t.entity["report:uri"],t.isForeign=s&&!s.match(n),t.target=t.isForeign?"_blank":"",t.NULL_VALUE=l.null_value,r=i.ExternalLinkIcons)o=r[e],(null!=s?s.match(e):void 0)&&null==t.icon&&(t.icon=o);return u.extend(this.getBaseData(),t)}},{key:"getFormattedValue",value:function(){var t,e,n=this.model.pick("entity","value");return t=n.entity,null!=(e=n.value)?this.formatter.call(null,t,this.service,e):null}},{key:"getInputState",value:function(){var t;t=this.tableState.get("selecting");var e=this.state.pick("selected","selectable");return{checked:e.selected,disabled:!e.selectable,display:t?"inline":"none"}}},{key:"canHavePreview",value:function(){return this.hasID()&&!this.state.get("minimised")}},{key:"postRender",value:function(){return this.setAttrClass(),this.setActiveClass(),this.setMinimisedClass(),this.setDisabledCellClass(),this.setFormatterClasses(),this.initPreview()}},{key:"setAttrClass",value:function(){var t,e,n,i,r;if(a.get("TableCell.AddDataClasses")){for(t=this.model.get("column").getType(),this.$el.addClass("im-type-"+t.toLowerCase()),n=0,i=(r=this.getTypes()).length;n<i;n++)e=r[n],this.$el.addClass(String(e));return this.$el.addClass(this.model.get("column").end.name)}}},{key:"setMinimisedClass",value:function(){return this.$el.toggleClass("im-minimised",this.state.get("minimised"))}},{key:"setFormatterClasses",value:function(){var t,e;if(null!=(t=this.formatter.classes)&&this.$el.addClass(t),null!=(e=this.formatter.target))return this.$el.addClass(e)}},{key:"getPreviewContainer",value:function(){var t,e;for(e=[],t=[".im-query-results",".im-table-container",".panel","table","body"];t.length&&0===e.length;)e=this.$el.closest(t.shift());return e}},{key:"removeAllChildren",value:function(){return this.destroyPreview(),null!=this.children.popover&&(this.stopListeningTo(this.children.popover),this.children.popover.rendered&&this.$el.popover("destroy")),_get(_getPrototypeOf(t.prototype),"removeAllChildren",this).call(this)}},{key:"destroyPreview",value:function(){var t;if(null!=this.children.popover)return this.stopListeningTo(this.children.popover),this.children.popover.rendered&&null!=(t=this.popoverTarget)&&t.popover("destroy"),delete this.popoverTarget,this.removeChild("popover")}},{key:"initPreview",value:function(){var e,n,t,i=this;if(null==this.children.popover&&this.canHavePreview())return e=this.popovers.get(this.model.get("entity")),t=a.get("TableCell.PreviewTrigger"),this.popoverTarget="hover"===t?this.$(".im-cell-link"):this.$el,n=s.getText.bind(s,"table.cell.PreviewTitle"),this.listenToOnce(e,"rendered",function(){var t;return t=i.getPreviewContainer(),i.popoverTarget.popover({trigger:"manual",template:h,placement:"auto left",container:t,html:!0,title:function(){return n({types:i.model.get("typeNames")})},content:e.el})}),this.listenTo(e,"rendered",function(){return i.popoverTarget.popover("show")}),this.children.popover=e}}]),t}();return t.prototype.Model=e,t.prototype.tagName="td",t.prototype.className="im-result-field",t.prototype.formatter=r.defaultFormatter,t.prototype.parameters=["model","service","selectedObjects","tableState","popovers"],t.prototype.optionalParameters=["formatter"],t.prototype.parameterTypes={model:f.InstanceOf(e,"models/cell"),selectedObjects:f.InstanceOf(o,"SelectedObjects"),formatter:f.Callable,tableState:f.Model,service:f.Service,popovers:new f.Structure("HasGet",{get:f.Function})},t.prototype.template=l.template("table-cell"),t.prototype.popoverTarget=null,t}.call(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core-view":3,"../../core/type-assertions":10,"../../formatting":13,"../../messages":16,"../../models/cell":37,"../../models/selected-objects":58,"../../options":63,"../../templates":67,jquery:256,underscore:262}],213:[function(s,o,t){(function(){var t,r,e,n;e=s("underscore"),t=s("../facets/facet-view"),r=s("../../models/path");var i=s("../../utils/events");n=i.ignore,o.exports=function(){function i(t){var e=t.query,n=t.model;if(_classCallCheck2(this,i),!e)throw new Error("No query in call to new DropDownColumnSummary");if(!(n instanceof r))throw new Error("No PathModel in call to new DropDownColumnSummary");return _possibleConstructorReturn(this,_getPrototypeOf(i).call(this,{query:e,view:n.pathInfo()}))}return _inherits(i,t),_createClass2(i,[{key:"className",value:function(){return _get(_getPrototypeOf(i.prototype),"className",this).call(this)+" im-dropdown-summary"}}]),_createClass2(i,[{key:"events",value:function(){return e.extend(_get(_getPrototypeOf(i.prototype),"events",this).call(this),{click:n})}},{key:"postRender",value:function(){return _get(_getPrototypeOf(i.prototype),"postRender",this).call(this),this.$el.addClass(this.className())}}]),i}()}).call(this)},{"../../models/path":56,"../../utils/events":81,"../facets/facet-view":151,underscore:262}],214:[function(s,o,t){(function(d){(function(){var e,a,n,l,u,c,h,i,f,r,t;u=s("underscore"),h=s("imjs"),s("../../options"),e=s("../../core-view"),n=s("../../templates"),a=s("../../messages"),i=s("../../utils/indent-xml"),f=s("../../utils/mailto"),t=s("../../utils/with-cdn-resource"),l=s("../../version"),s("../../messages/error"),r=u.partial(t,"prettify","prettyPrintOne"),c=function(t){return/(Type|Reference)Error/.test(String(t))?"client":"server"},o.exports=function(){var t=function(){function o(){return _classCallCheck2(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,e),_createClass2(o,[{key:"helpers",value:function(){return u.extend(_get(_getPrototypeOf(o.prototype),"helpers",this).call(this),{indent:i})}},{key:"getData",value:function(){var t,e,n,i,r,s;return n=this.model.get("error"),s=new Date,r=a.getText("error.mail.Subject"),t=this.query.service.help,e=c(n),console.error(n),i=f.href(t,r,"We encountered an error running a query from an\nembedded result table.\n\npage:       "+d.location+"\nservice:    "+this.query.service.root+"\nerror:      "+n+"\ndate-stamp: "+s+"\n\n-------------------------------\nIMJS:       "+h.VERSION+"\n-------------------------------\nIMTABLES:   "+l+"\n-------------------------------\nQUERY:      "+this.query.toXML()+"\n-------------------------------\nSTACK:      "+(null!=n?n.stack:void 0)),u.extend(_get(_getPrototypeOf(o.prototype),"getData",this).call(this),{domain:e,mailto:i,query:this.query.toXML()})}},{key:"postRender",value:function(){var e,n;return n=i(this.query.toXML()),e=this.$(".query-xml"),r(function(t){return e.html(t(u.escape(n)))})}},{key:"events",value:function(){return{"click .im-show-query":function(){return this.$(".query-xml").slideToggle(),this.$(".im-show-query").toggleClass("active")},"click .im-show-error":function(){return this.$(".error-message").slideToggle(),this.$(".im-show-error").toggleClass("active")}}}}]),o}();return t.prototype.className="im-error-notice",t.prototype.parameters=["model","query"],t.prototype.template=n.template("table-error"),t}.call(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core-view":3,"../../messages":16,"../../messages/error":22,"../../options":63,"../../templates":67,"../../utils/indent-xml":88,"../../utils/mailto":92,"../../utils/with-cdn-resource":110,"../../version":111,imjs:247,underscore:262}],215:[function(t,n,e){(function(){var o,e,a;a=t("underscore"),e=t("../../core-view"),o=t("./header"),n.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"template",value:function(){}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this.columnHeaders,"add reset sort",this.reRender),this.listenTo(this.columnHeaders,"remove",function(t){return this.removeChild(t.id)}),this}},{key:"renderChildren",value:function(){var t,e,n;return t=document.createDocumentFragment(),n=document.createElement("tr"),t.appendChild(n),e={query:this.history.getCurrentQuery(),expandedSubtables:this.expandedSubtables,blacklistedFormatters:this.blacklistedFormatters},this.columnHeaders.each(this.renderHeader(n,e)),this.$el.html(t)}},{key:"renderHeader",value:function(i,r){var s=this;return function(t,e){var n;return n=new o(a.extend({model:t},r)),s.renderChild(t.id,n,i)}}}]),t}();return t.prototype.tagName="thead",t.prototype.parameters=["history","expandedSubtables","blacklistedFormatters","columnHeaders"],t}.call(this)}).call(this)},{"../../core-view":3,"./header":216,underscore:262}],216:[function(b,w,t){(function(){function u(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}var o,e,n,i,r,s,a,c,h,f,l,d,p,g,m,v,y,_=[].splice;d=b("underscore"),n=b("../../core-view"),e=b("../../core/collection"),l=b("../../templates"),b("../../messages"),c=b("../../options"),o=b("../../utils/css-class-set"),y=b("../../utils/sort-query-by-path"),v=b("../../utils/on-change"),s=b("../../models/header"),r=b("../formatted-sorting"),f=b("../constraints/single-column"),i=b("./column-summary"),h=b("./outer-join-summary");var t=b("../../utils/events");m=t.ignore,b("../../messages/table"),a=function(t,e){return function(){return t.get(e)}},p=function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},g=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},w.exports=function(){var t=function(){function l(){var t;return _classCallCheck2(this,l),(t=_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))).showSummary=t.showSummary.bind(_assertThisInitialized(t)),t.showColumnSummary=t.showColumnSummary.bind(_assertThisInitialized(t)),t.showFilterSummary=t.showFilterSummary.bind(_assertThisInitialized(t)),t.toggleColumnVisibility=t.toggleColumnVisibility.bind(_assertThisInitialized(t)),t}return _inherits(l,n),_createClass2(l,[{key:"initialize",value:function(){return _get(_getPrototypeOf(l.prototype),"initialize",this).call(this),this.listenTo(this.query,"showing:column-summary",this.removeMySummary),this.listenTo(c,"change:icons",this.reRender),this.createClassSets()}},{key:"path",value:function(){return this.model.pathInfo()}},{key:"createClassSets",value:function(){return this.classSets={},this.classSets.headerClasses=new o({"im-column-header":!0,"im-minimised-th":a(this.model,"minimised"),"im-is-composed":a(this.model,"composed"),"im-has-constraint":a(this.model,"numOfCons")}),this.classSets.colTitleClasses=new o({"im-col-title":!0,"im-hidden":a(this.model,"minimised")})}},{key:"removeMySummary",value:function(t){if(!t.equals(this.model.pathInfo()))return this.removeChild("summary"),this.$(".dropdown.open").removeClass("open")}},{key:"onSubtableExpanded",value:function(t){if(t.toString().match(this.model.getView()))return this.model.set({expanded:!0})}},{key:"onSubtableCollapsed",value:function(t){if(t.toString().match(this.model.getView()))return this.model.set({expanded:!1})}},{key:"getData",value:function(){var t,e,n,i,r,s;return e=_toArray(this.model.get("parts")).slice(0),r=(t=_slicedToArray(_.call(e,-2),2))[0],i=t[1],(n=e.length)?"non-root":"root",s=new o({"im-title-part im-parent":!0,"im-root-parent":!n,"im-non-root-parent":n,"im-last":!i}),d.extend({penultClasses:s,last:i,penult:r},this.classSets,_get(_getPrototypeOf(l.prototype),"getData",this).call(this))}},{key:"events",value:function(){return{"click .im-col-sort":"setSortOrder","click .im-col-minumaximiser":"toggleColumnVisibility","click .im-col-filters":"showFilterSummary","click .im-subtable-expander":this.toggleSubTable,"click .im-col-remover":"removeColumn","hidden.bs.dropdown":function(){return this.removeChild("summary")},"shown.bs.dropdown":"onDropdownShown","toggle .im-th-button":"summaryToggled","click .summary-img":this.showColumnSummary,"click .im-col-composed":this.addFormatterToBlacklist}}},{key:"postRender",value:function(){return this.setTitlePopover(),this.announceExpandedState(),this.activateTooltips()}},{key:"activateTooltips",value:function(){return this.$(".im-th-button").tooltip({placement:"top",container:this.el})}},{key:"onDropdownShown",value:function(n){return d.defer(function(){var t,e;if(delete n.target.style.right,(t=n.target.getBoundingClientRect()).left<0)return e=t.left+"px",n.target.style.right=e})}},{key:"addFormatterToBlacklist",value:function(){return this.blacklistedFormatters.add({formatter:this.model.get("formatter")})}},{key:"announceExpandedState",value:function(){if(this.model.get("expanded"))return this.query.trigger("expand:subtables",this.model.get("path"))}},{key:"setTitlePopover",value:function(){var t=this;if(c.get("TableHeader.FullPathPopoverEnabled"))return this.$(".im-col-title").popover({content:function(){return t.namePopoverTemplate(t.getData())},container:this.el,placement:"bottom",html:!0})}},{key:"summaryToggled",value:function(t,e){if(m(t),t.target===t.currentTarget)return e?void 0:this.removeChild("summary")}},{key:"hideTooltips",value:function(){return this.$(".im-th-button").tooltip("hide")}},{key:"removeColumn",value:function(t){var r,s;return m(t),this.hideTooltips(),s=this.model.getView(),this.query.removeFromSelect(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.views).length;t<e;t++)(r=n[t]).match(s)&&i.push(r);return i}.call(this))}},{key:"checkHowFarOver",value:function(t){var e;if(e=this.$el.closest(".im-table-container"),t.offset().left+350>=e.offset().left+e.width())return this.$el.addClass("too-far-over")}},{key:"showSummary",value:function(t,e,n){var i,r,s,o,a;if(u(this,l),m(n),r=this.$(t),s=this.path(),r.hasClass("open"))return this.query.trigger("hiding:column-summary",s),r.removeClass("open"),null!=(o=this.children.summary)&&o.$el.hide(),this.removeChild("summary"),!1;if(this.$(".dropdown.open").removeClass("open"),this.query.trigger("showing:column-summary",s),a=new e({query:this.query,model:this.model}),!(i=this.$(t+" .dropdown-menu")).length)throw new Error(t+" not found");return i.empty(),this.renderChild("summary",a,i),r.addClass("open"),this.onDropdownShown({target:i[0]}),!0}},{key:"ensureDropdownIsWithinTable",value:function(t,e,n){var i,r,s,o,a,l=2<arguments.length&&void 0!==n?n:360;if(r=t.getBoundingClientRect(),null!=(o=this.$el.closest("table")[0])){if(s=g(),i=this.$(e+" .dropdown-menu"),s<=l)return i.addClass("im-fullwidth-dropdown").css({width:s});if(i.css({width:null}),!(l>=g()))return a=o.getBoundingClientRect(),r.left+l>a.right?this.$(e+" .dropdown-menu").addClass("dropdown-menu-right"):void 0}}},{key:"showColumnSummary",value:function(t){var e,n;if(u(this,l),e=this.model.get("isReference")?h:i,this.showSummary(".im-summary",e,t))return n=p(),this.$(".im-item-table").css({"max-height":Math.max(350,n/2)}),this.ensureDropdownIsWithinTable(t.target,".im-summary")}},{key:"showFilterSummary",value:function(t){if(u(this,l),this.showSummary(".im-filter-summary",f,t))return this.ensureDropdownIsWithinTable(t.target,".im-filter-summary",500)}},{key:"toggleColumnVisibility",value:function(t){return u(this,l),m(t),this.model.toggle("minimised")}},{key:"setSortOrder",value:function(t){return m(t),this.model.get("replaces").length?this.showSummary(".im-col-sort",r,t):(y(this.query,this.model.getView()),this.$(".im-col-sort").removeClass("open"))}},{key:"toggleSubTable",value:function(t){return m(t),this.expandedSubtables.toggle(this.model.pathInfo())}}]),l}();return t.prototype.Model=s,t.prototype.tagName="th",t.prototype.className="im-column-th",t.prototype.RERENDER_EVENT=v(["composed","expanded","minimised","numOfCons","outerJoined","parts","path","sortable","sortDirection"]),t.prototype.template=l.template("column-header"),t.prototype.namePopoverTemplate=l.template("column_name_popover"),t.prototype.parameters=["query"],t.prototype.optionalParameters=["blacklistedFormatters","expandedSubtables"],t.prototype.expandedSubtables=new e,t.prototype.blacklistedFormatters=new e,t}.call(this)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../messages":16,"../../messages/table":28,"../../models/header":44,"../../options":63,"../../templates":67,"../../utils/css-class-set":79,"../../utils/events":81,"../../utils/on-change":93,"../../utils/sort-query-by-path":105,"../constraints/single-column":135,"../formatted-sorting":169,"./column-summary":213,"./outer-join-summary":219,underscore:262}],217:[function(t,v,e){(function(){var n,e,i,r,s,o,a,l,u,c,h,f,d,p,g,m;g=t("underscore"),i=t("../../core-view"),d=t("../../templates"),r=t("../../formatting"),o=t("../../models/path-set"),e=t("../../models/column-headers"),a=t("../../utils/popover-factory"),s=t("../../models/history"),f=t("../../models/table"),u=t("../../models/selected-objects"),l=t("../item-preview"),p=t("../../core/type-assertions"),n=t("./cell-factory"),c=t("./body"),h=t("./head"),m=function(n){return function(t,e){return n(e,t)}},v.exports=function(){var t=function(){function e(){var t;return _classCallCheck2(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).canUseFormatter=t.canUseFormatter.bind(_assertThisInitialized(t)),t}return _inherits(e,i),_createClass2(e,[{key:"initialize",value:function(){var t;return _get(_getPrototypeOf(e.prototype),"initialize",this).call(this),t=(this.query=this.history.getCurrentQuery()).service,this.expandedSubtables=new o,this.popoverFactory=new a(t,l),this.cellFactory=n(t,this),this.listenTo(this.blacklistedFormatters,"reset add remove",this.renderBody),this.listenTo(this.history,"changed:current",this.setQuery)}},{key:"setQuery",value:function(){return this.query=this.history.getCurrentQuery()}},{key:"canUseFormatter",value:function(t){return function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}(this,e),null!=t&&!this.blacklistedFormatters.findWhere({formatter:t})}},{key:"renderChildren",value:function(){return this.renderHeaders(),this.renderBody()}},{key:"renderHeaders",value:function(){return this.renderChild("head",new h(g.pick(this,h.prototype.parameters)))}},{key:"renderBody",value:function(){return this.renderChild("body",new c({collection:this.rows,history:this.history,makeCell:this.cellFactory}))}},{key:"remove",value:function(){return this.expandedSubtables.close(),delete this.expandedSubtables,this.popoverFactory.destroy(),delete this.popoverFactory,delete this.cellFactory,_get(_getPrototypeOf(e.prototype),"remove",this).call(this)}}]),e}();return t.prototype.className="im-results-table table table-striped table-bordered",t.prototype.tagName="table",t.prototype.throbber=d.template("table-throbber"),t.prototype.parameters=["history","columnHeaders","rows","tableState","blacklistedFormatters","selectedObjects"],t.prototype.parameterTypes={history:p.InstanceOf(s,"History"),blacklistedFormatters:p.Collection,rows:p.Collection,tableState:p.InstanceOf(f,"TableModel"),columnHeaders:p.InstanceOf(e,"ColumnHeaders"),selectedObjects:p.InstanceOf(u,"SelectedObjects")},t.prototype.getFormatter=m(r.getFormatter),t}.call(this)}).call(this)},{"../../core-view":3,"../../core/type-assertions":10,"../../formatting":13,"../../models/column-headers":39,"../../models/history":45,"../../models/path-set":55,"../../models/selected-objects":58,"../../models/table":61,"../../templates":67,"../../utils/popover-factory":98,"../item-preview":172,"./body":210,"./cell-factory":211,"./head":215,underscore:262}],218:[function(s,o,t){(function(){var n,i,r,e;r=s("underscore"),i=s("../modal");var t=s("../../templates");e=t.large_table_disuader,n={ACCEPT:"accept",CONSTRAIN:"constrain",BACK:"back",FWD:"forward",EXPORT:"export",DISMISS:"dismiss"},o.exports=function(){var t=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,i),_createClass2(e,[{key:"className",value:function(){return"im-page-size-sanity-check fade "+_get(_getPrototypeOf(e.prototype),"className",this).call(this)}},{key:"act",value:function(){return this.resolve("accept")}},{key:"events",value:function(){var t=this;return r.extend(_get(_getPrototypeOf(e.prototype),"events",this).call(this),{"click .btn-primary":function(){return t.resolve(n.ACCEPT)},"click .add-filter-dialogue":function(){return t.resolve(n.CONSTRAIN)},"click .page-backwards":function(){return t.resolve(n.BACK)},"click .page-forwards":function(){return t.resolve(n.FWD)},"click .download-menu":function(){return t.resolve(n.EXPORT)}})}}]),e}();return t.prototype.template=r.template(e),t}.call(this)}).call(this)},{"../../templates":67,"../modal":197,underscore:262}],219:[function(t,u,e){(function(){var e,n,i,s,o,a,r,l;l=t("underscore"),n=t("../../core-view"),r=t("../../templates"),e=t("../../core/collection"),s=t("../../models/path"),i=t("./column-summary"),a=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.prototype.model=s,t}.call(this),o=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"modelEvents",value:function(){return{change:this.reRender}}},{key:"events",value:function(){return{click:this.onClick}}},{key:"onClick",value:function(t){return t.stopPropagation(),t.preventDefault(),this.showPathSummary(this.model)}}]),t}();return t.prototype.parameters=["showPathSummary"],t.prototype.className="im-subpath im-outer-joined-path",t.prototype.tagName="li",t.prototype.template=l.template('<a href="#">'+r.column_manager_path_name+"</a>"),t}.call(this),u.exports=function(){var t=function(){function r(){return _classCallCheck2(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,n),_createClass2(r,[{key:"initialize",value:function(){var t,e,n,i;for(_get(_getPrototypeOf(r.prototype),"initialize",this).call(this),this.subColumns=new a,e=0,n=(i=this.model.get("replaces")).length;e<n;e++)t=i[e],this.subColumns.add(this.query.makePath(t));return this.path=new s(this.query.makePath(this.model.get("path")))}},{key:"getSubpaths",value:function(){return this.subColumns}},{key:"postRender",value:function(){var t,n,i=this;return 1===(t=this.getSubpaths()).length?this.showPathSummary(t.first()):(n=function(t){return i.showPathSummary(t)},this.getSubpaths().each(function(t,e){return i.renderChild(e,new o({model:t,showPathSummary:n}))}))}},{key:"showPathSummary",value:function(t){var e;return this.undelegateEvents(),this.removeAllChildren(),e=new i({query:this.query,model:t}),(this.children.summ=e).setElement(this.el),e.render()}}]),r}();return t.prototype.parameters=["query"],t.prototype.className="im-summary-selector",t.prototype.tagName="ul",t}.call(this)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../models/path":56,"../../templates":67,"./column-summary":213,underscore:262}],220:[function(t,h,e){(function(){var n,i,o,e,r,a,s,l,u,c=[].indexOf;u=t("underscore"),s=t("./paging"),e=t("../has-dialogues"),n=t("../../core-view"),l=t("../../templates"),i=t("../../events"),a=t("../new-filter-dialogue"),o=t("../export-dialogue"),r=t("./large-table-disuader"),h.exports=function(){var t=function(){function e(){return _classCallCheck2(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,n),_createClass2(e,[{key:"initialize",value:function(){var s,t;if(_get(_getPrototypeOf(e.prototype),"initialize",this).call(this),null!=(t=this.model.get("size"))&&c.call(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.sizes).length;t<e;t++){var r=_slicedToArray(n[t],1);s=r[0],i.push(s)}return i}.call(this),t)<0)return this.sizes=[[t,t]].concat(this.sizes)}},{key:"events",value:function(){return{submit:i.suppress,"change select":"changePageSize"}}},{key:"modelEvents",value:function(){return{"change:size":function(t,e){return this.$("select").val(e)},"change:count":this.reRender}}},{key:"changePageSize",value:function(t){var e,n,i,r,s=this;return n=this.$(t.target),r=parseInt(n.val(),10),i=this.model.get("size"),e=function(){return s.model.set({size:r})},this.aboveSizeThreshold(r)?this.whenAcceptable(r).then(function(t){if("accept"===t)return e();switch(n.val(i),t){case"back":return s.goBack(1);case"forward":return s.goForward(1);case"constrain":return s.openDialogue(new a({query:s.getQuery()}));case"export":return s.openDialogue(o({query:s.getQuery()}));default:return console.debug("dismissed dialogue",t)}}).then(null,function(t){return console.error("Error handling dialogues",t)}):e()}},{key:"whenAcceptable",value:function(t){return this.openDialogue(new r({model:{size:t}}))}},{key:"getData",value:function(){var r,t,s,e,n;return r=this.model.get("count"),e=this.model.get("size"),(n=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.sizes).length;t<e;t++)s=n[t],(null==r||s[0]<r)&&i.push(s);return i}.call(this)).length&&r<this.sizes[this.sizes.length-1][0]&&((t=u.find(n,function(t){return t[0]===r}))?t[1]+=t[0]+" (All)":n.push([r,r+" (All)"])),{size:e,sizes:n}}},{key:"aboveSizeThreshold",value:function(t){return!!(t&&t>=this.pageSizeFeasibilityThreshold)||!t&&this.model.get("count")>=this.pageSizeFeasibilityThreshold}}]),e}();return t.include(s),t.include(e),t.prototype.tagName="form",t.prototype.className="im-page-sizer im-table-control form-inline",t.prototype.sizes=[[10],[25],[50],[100],[250]],t.prototype.parameters=["getQuery"],t.prototype.template=l.template("page_sizer"),t.prototype.pageSizeFeasibilityThreshold=250,t}.call(this)}).call(this)},{"../../core-view":3,"../../events":12,"../../templates":67,"../export-dialogue":138,"../has-dialogues":171,"../new-filter-dialogue":200,"./large-table-disuader":218,"./paging":222,underscore:262}],221:[function(t,o,e){(function(){var e,n,i,s,r;i=t("underscore"),n=t("../../core-view"),e=t("./paging"),r=function(t){return t.replace(/\s+/g,"")},s=function(t){return"string"==typeof t?parseInt(r(t),10):t},o.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"modelEvents",value:function(){return{"change:count":this.setVisible}}},{key:"getData",value:function(){var t,e,n,i,r=this.model.toJSON();return i=r.start,n=r.size,t=r.count,{max:e=this.getMaxPage(),min:1,size:n,currentPage:this.getCurrentPage(),gotoStart:0===i?"disabled":void 0,goFiveBack:i<5*n?"disabled":void 0,goOneBack:i<n?"disabled":void 0,gotoEnd:t-n<=i?"disabled":void 0,goFiveForward:t-6*n<=i?"disabled":void 0,goOneForward:t-n<=i?"disabled":void 0,selected:function(t){return i===t*n},useSelect:e<=200}}},{key:"postRender",value:function(){return this.$("li").tooltip({placement:"top"}),this.setVisible()}},{key:"setVisible",value:function(){var t;return t=this.getMaxPage(),this.$el.toggleClass("im-hidden",t<2)}},{key:"events",value:function(){var t=this;return{"submit .im-page-form":"pageFormSubmit","click .im-current-page a":"clickCurrentPage","change .im-page-form select":"goToChosenPage","blur .im-page-form input":"pageFormSubmit","click .im-goto-start":function(){return t.goTo(0)},"click .im-go-back-5":function(){return t.goBack(5)},"click .im-go-back-1":function(){return t.goBack(1)},"click .im-go-fwd-5":function(){return t.goForward(5)},"click .im-go-fwd-1":function(){return t.goForward(1)},"click .im-goto-end":function(){return t.goTo((t.getMaxPage()-1)*t.model.get("size"))}}}},{key:"goToChosenPage",value:function(t){var e;return e=s(this.$(t.target).val()),this.goTo(e)}},{key:"clickCurrentPage",value:function(t){var e;if(e=this.model.get("size"),!(this.model.get("count")<=e))return this.$(t.target).hide(),this.$("form").show().find("input").focus()}},{key:"pageFormSubmit",value:function(t){var e,n,i,r;if(null!=t&&t.stopPropagation(),null!=t&&t.preventDefault(),r=this.$(".im-page-form"),(n=this.$(".im-page-form input")).size())return 1<=(e=s(n[0].value))?(i=Math.min(this.getMaxPage(),e),this.goTo((i-1)*this.model.get("size")),this.$(".im-current-page > a").show(),r.hide()):(r.find(".control-group").addClass("error"),inp.val(null))}}]),t}();return t.include(e),t.prototype.tagName="nav",t.prototype.className="im-table-pagination im-table-control",t.prototype.RERENDER_EVENT="change:start change:count change:size",t.prototype.template=i.template('<ul class="pagination">\n    <li class="hidden-xs <%= gotoStart || \'im-goto-start\' %>" title="Go to start">\n        <a class="im-pagination-button">&#x21e4;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveBack || \'im-go-back-5\' %>"\n        title="Go back five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x219e;</a>\n    </li>\n    <li class="<%= goOneBack || \'im-go-back-1\' %>"\n        title="Go to previous page">\n        <a class="im-pagination-button">&larr;</a>\n    </li>\n    <li class="im-current-page">\n        <% if (useSelect) { %>\n          <form class="im-page-form form form-inline">\n            <select class="form-control">\n              <% for (i = 0; i < max; i++) { %>\n                <option\n                  <%= selected(i) ? \'selected\' : void 0 %>\n                  value="<%= i * size %>">\n                  page <%= i + 1 %>\n                </option>\n              <% } %>\n            </select>\n          </form>\n        <% } else { %>\n          <a href="#">&hellip;</a>\n          <form class="im-page-form form form-inline"\n                style="display:none;">\n            <div class="control-group">\n                <input type="number"\n                       value="<%= currentPage %>"\n                       max="<%= max %>"\n                       min="<%= min %>"\n                       class="form-control im-page-number">\n            </div>\n          </form>\n        <% } %>\n    </li>\n    <li class="<%= goOneForward || \'im-go-fwd-1\' %>"\n        title="Go to next page">\n        <a class="im-pagination-button">&rarr;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveForward || \'im-go-fwd-5\' %>"\n        title="Go forward five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x21a0;</a>\n    </li>\n    <li class="hidden-xs <%= gotoEnd || \'im-goto-end\' %>"\n        title="Go to last page">\n        <a class="im-pagination-button">&#x21e5;</a>\n    </li>\n</ul>\n'),t}.call(this)}).call(this)},{"../../core-view":3,"./paging":222,underscore:262}],222:[function(t,e,n){(function(){n.getCurrentPage=function(){var t,e,n=this.model.toJSON();return e=n.start,t=n.size,Math.floor(e/t)+1},n.getMaxPage=function(){var t,e,n,i=this.model.toJSON();return t=(e=i.count)%(n=i.size)==0?0:1,Math.floor(e/n)+t},n.goTo=function(t){return this.model.set({start:t})},n.goToPage=function(t){return this.model.set({start:(t-1)*this.model.get("size")})},n.goBack=function(t){var e,n,i=this.model.toJSON();return n=i.start,e=i.size,this.goTo(Math.max(0,n-t*e))},n.goForward=function(t){var e,n,i=this.model.toJSON();return n=i.start,e=i.size,this.goTo(Math.min(this.getMaxPage()*e,n+t*e))}}).call(this)},{}],223:[function(t,s,e){(function(){var e,r,n,i;i=t("underscore"),e=t("../../core-view"),n=t("../../templates"),t("../../messages/subtables"),r=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"getData",value:function(){return i.extend(_get(_getPrototypeOf(t.prototype),"getData",this).call(this),this.columnModel.pick("columnName"))}},{key:"modelEvents",value:function(){return{"change:displayName":this.reRender}}},{key:"events",value:function(){return{"click a":this.removeView}}},{key:"removeView",value:function(){var t;return this.query.removeFromSelect(null!=(t=this.model.get("replaces"))?t:this.model.get("path"))}},{key:"postRender",value:function(){return this.$("[title]").tooltip()}},{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.listenTo(this.columnModel,"change:columnName",this.reRender)}},{key:"remove",value:function(){return delete this.columnModel,_get(_getPrototypeOf(t.prototype),"remove",this).call(this)}}]),t}();return t.prototype.tagName="th",t.prototype.parameters=["columnModel","model","query"],t.prototype.template=n.template("table-subtables-header"),t}.call(this),s.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"template",value:function(){return"<tr></tr>"}},{key:"collectionEvents",value:function(){return{"add remove":this.reRender}}},{key:"renderChildren",value:function(){var n,i=this;return n=this.el.querySelector("tr"),this.collection.forEach(function(t,e){return i.renderChild(e,new r({model:t,query:i.query,columnModel:i.columnModel}),n)})}},{key:"remove",value:function(){return delete this.columnModel,_get(_getPrototypeOf(t.prototype),"remove",this).call(this)}}]),t}();return t.prototype.tagName="thead",t.prototype.parameters=["collection","columnModel","query"],t}.call(this)}).call(this)},{"../../core-view":3,"../../messages/subtables":26,"../../templates":67,underscore:262}],224:[function(t,r,e){(function(){var e,n,i;e=t("../../core-view"),n=t("./subtable-header"),i=t("../../utils/build-skipset"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"render",value:function(){var t,e,n,i,r,s;for(this.removeAllChildren(),this.rendered&&(this.el.innerHTML=""),1<this.headers.length&&this.renderHead(),s=document.createElement("tbody"),t=e=0,n=(i=this.rows).length;e<n;t=++e)r=i[t],this.appendRow(r,t,s);return this.el.appendChild(s),this.trigger("rendered",this.rendered=!0),this}},{key:"renderHead",value:function(t){var e;return e=new n({query:this.query,collection:this.headers,columnModel:this.model}),this.renderChild("thead",e,t)}},{key:"buildSkipped",value:function(t){return null!=this._skipped?this._skipped:this._skipped=i(t,this.headers)}},{key:"appendRow",value:function(i,t,e){var r,n,s,o,a,l,u,c,h;for(h=document.createElement("tr"),e.appendChild(h),s=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(this.cellify(r));return n}.call(this),c=this.buildSkipped(s),u=[],o=a=0,l=s.length;a<l;o=++a)c[(n=s[o]).model.get("column")]||u.push(this.renderChild("cell-"+t+"-"+o,n,h));return u}}]),t}();return t.prototype.tagName="table",t.prototype.className="im-subtable table table-condensed table-striped",t.prototype.parameters=["query","headers","model","rows","cellify"],t}.call(this)}).call(this)},{"../../core-view":3,"../../utils/build-skipset":72,"./subtable-header":223}],225:[function(t,r,e){(function(){var e,n,i;e=t("../../core-view"),n=t("../../messages"),i=t("../../templates"),t("../../messages/subtables"),r.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"modelEvents",value:function(){return{"change:contentName":this.reRender}}},{key:"events",value:function(){return{click:this.onClick}}},{key:"onClick",value:function(t){return null!=t&&t.stopPropagation(),this.$el.tooltip("hide"),this.state.toggle("open")}},{key:"postRender",value:function(){return this.$el.tooltip({title:this.model.get("rows").length?n.getText("subtables.OpenHint"):void 0,placement:"auto right"})}}]),t}();return t.prototype.className="im-subtable-summary",t.prototype.tagName="span",t.prototype.template=i.template("table-subtable-summary"),t.prototype.parameters=["model","state"],t}.call(this)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/subtables":26,"../../templates":67}],226:[function(t,f,e){(function(){var e,n,i,r,s,o,a,l,u,c,h;h=t("underscore"),n=t("../../core-view"),r=t("../../options"),e=t("../../core/collection"),u=t("../../templates"),c=t("../../core/type-assertions"),i=t("../../models/nested-table"),o=t("../../models/path"),l=t("./subtable-summary"),a=t("./subtable-inner"),t("../../utils/events").ignore,s=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.prototype.model=o,t}.call(this),f.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,n),_createClass2(t,[{key:"initialize",value:function(){return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.headers=new s,this.listenTo(this.expandedSubtables,"add remove reset",this.onChangeExpandedSubtables),this.buildHeaders()}},{key:"getPath",value:function(){return this.model.get("column")}},{key:"initState",value:function(){var t;return t=r.get("Subtables.Initially.expanded")||this.expandedSubtables.contains(this.getPath()),this.state.set({open:t})}},{key:"stateEvents",value:function(){return{"change:open":this.onChangeOpen}}},{key:"onChangeOpen",value:function(){var t;return t=this.el.querySelector(".im-table-wrapper"),this.state.get("open")?this.renderTable(t)?this.$(t).slideDown():void 0:this.$(t).slideUp()}},{key:"onChangeExpandedSubtables",value:function(){return this.state.set({open:this.expandedSubtables.contains(this.getPath())})}},{key:"renderChildren",value:function(){return this.renderChildAt(".im-subtable-summary",new l({model:this.model,state:this.state})),this.onChangeOpen()}},{key:"renderTable",value:function(t){var e,n;return n=this.model.get("rows"),this.tableRendered||0===n.length?this.tableRendered:(e=new a(h.extend({rows:n},h.pick(this,a.prototype.parameters))),this.renderChild("inner",e,t),this.tableRendered=!0)}},{key:"buildHeaders",value:function(){var i,r,t=_slicedToArray(this.model.get("rows"),1);if(null!=(r=t[0]))return this.headers.set(function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(new o(i.get("column")));return n}())}}]),t}();return t.prototype.tagName="td",t.prototype.className="im-result-subtable",t.prototype.Model=i,t.prototype.parameters=["query","cellify","expandedSubtables"],t.prototype.parameterTypes={query:c.Query,cellify:c.Function,expandedSubtables:c.Collection},t.prototype.template=u.template("table-subtable"),t.prototype.tableRendered=!1,t}.call(this)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../core/type-assertions":10,"../../models/nested-table":48,"../../models/path":56,"../../options":63,"../../templates":67,"../../utils/events":81,"./subtable-inner":224,"./subtable-summary":225,underscore:262}],227:[function(t,i,e){(function(){var e,n,o;o=t("underscore"),e=t("../../core-view"),n=t("../../templates"),t("../../messages/table"),i.exports=function(){var t=function(){function s(){return _classCallCheck2(this,s),_possibleConstructorReturn(this,_getPrototypeOf(s).apply(this,arguments))}return _inherits(s,e),_createClass2(s,[{key:"getData",value:function(){var t,e,n,i,r=e=_get(_getPrototypeOf(s.prototype),"getData",this).call(this);return i=r.start,n=r.size,t=r.count,o.extend(e,{page:{count:t,first:i+1,last:0===n?0:Math.min(i+n,t)}})}}]),s}();return t.prototype.className="im-table-summary hidden-phone",t.prototype.RERENDER_EVENT="change:start change:size change:count",t.prototype.template=n.template("count_summary"),t}.call(this)}).call(this)},{"../../core-view":3,"../../messages/table":28,"../../templates":67,underscore:262}],228:[function(r,s,t){(function(){var u,c,e,n,o,i,h,f=[].indexOf;n=r("underscore");var t=r("es6-promise");c=t.Promise,u=r("../messages"),e=r("../core-view"),u.set({"typeconstraints.BadType":"<%- type %> is not a legal value for this constraint. Choose another from the list.","typeconstraints.OneClass":"<%- name %> is the only legal value this constraint can have. You can always remove it though."}),h=r("../utils/to-named-path"),i=r("../templates/helpers"),o=function(t){return{value:t.path,text:t.name}},s.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"initialize",value:function(){var e=this;return _get(_getPrototypeOf(t.prototype),"initialize",this).call(this),this.model.swap("type",function(t){return null!=t?t:e.model.get("path").getType().name}),this.listenTo(u,"change",this.reRender),this.listenTo(this.state,"change:subclasses",this.reRender),this.setSubclasses()}},{key:"getData",value:function(){var s,e;return e=this.model.get("type"),{select:i.select,messages:u,subclasses:function(){var t,e,n,i,r;for(r=[],t=0,e=(i=null!=(n=this.state.get("subclasses"))?n:[]).length;t<e;t++)s=i[t],r.push(o(s));return r}.call(this),isSelected:function(t){return e===t.value}}}},{key:"events",value:function(){return{"change .im-value-type":"setType"}}},{key:"setType",value:function(){return this.model.set({type:this.$(".im-value-type").val()})}},{key:"setSubclasses",value:function(){var n=this;if(!this.model.has("subclasses"))return this.getPossibleTypes().then(function(t){var e;return 1===t.length&&(e=u.getText("typeconstraints.OneClass",t[0]),n.model.set({error:{message:e,level:"warning"}})),n.state.set({subclasses:t})})}},{key:"getPossibleTypes",value:function(){var r,t,e,s,n,i,o,a,l=this.model.toJSON();return t=l.path,a=l.type,n=this.query.getSubclasses(),s=this.query.model,delete n[t],r=s.getPathInfo(t.toString(),n).getType(),i=function(){var t,e,n,i;for(i=[],t=0,e=(n=s.getSubclassesOf(r)).length;t<e;t++)(o=n[t])!==r.name&&i.push(o);return i}(),e=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(s.makePath(o));return n}().map(h),f.call(i,a)<0&&(this.model.set({error:new Error(u.getText("typeconstraints.BadType",this.model.toJSON()))}),e.push(c.resolve({path:a,name:this.model.get("typeName")}))),c.all(e)}}]),t}();return t.prototype.parameters=["query","model"],t.prototype.template=n.template("<label class=\"span4\">\n    <%- messages.getText('conbuilder.IsA') %>\n</label>\n<% if (subclasses.length == 1) { %>\n  <select disabled class=\"form-control\">\n      <option><%- subclasses[0].text %></option>\n  </select>\n<% } else { %>\n  <%= select(subclasses, isSelected, 'form-control im-value-type') %>\n<% } %>\n  \n"),t}.call(this)}).call(this)},{"../core-view":3,"../messages":16,"../templates/helpers":68,"../utils/to-named-path":109,"es6-promise":238,underscore:262}],229:[function(t,l,e){(function(){var e,n,i,p,r,s,o,a,g;o=t("underscore"),e=t("../core-view"),s=t("../templates"),i=t("../messages"),p=t("../options"),r=t("./undo-history/step"),a=function(t){return"state-"+t.get("revision")},t("../messages/undo"),n=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"template",value:function(){return o.escape(i.getText("undo.MoreSteps",{more:this.more})+" ...")}},{key:"attributes",value:function(){return{title:i.getText("undo.ShowAllStates",{n:this.more})}}},{key:"postRender",value:function(){return this.$el.tooltip({placement:"right"})}},{key:"events",value:function(){return{click:function(t){return t.preventDefault(),t.stopPropagation(),this.state.toggle("showAll")}}}}]),t}();return t.prototype.parameters=["more"],t.prototype.tagName="li",t.prototype.className="im-step im-ellipsis",t}.call(this),g=function(t,e,n){var i;return i=n[e-1],0===e||e===n.length-1||t.get("count")!==i.get("count")},l.exports=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"events",value:function(){return{"click .btn.im-undo":"revertToPreviousState","click .im-toggle-trivial":"toggleTrivial"}}},{key:"initState",value:function(){return this.state.set({showAll:!1,hideTrivial:!1})}},{key:"stateEvents",value:function(){return{"change:showAll":this.reRender,"change:hideTrivial":this.reRender}}},{key:"collectionEvents",value:function(){return{remove:this.removeStep,"add remove":this.reRender,"change:count":this.reRenderIfHidingTrivial}}},{key:"toggleTrivial",value:function(t){return t.preventDefault(),t.stopPropagation(),this.state.toggle("hideTrivial")}},{key:"revertToPreviousState",value:function(){return this.collection.popState()}},{key:"reRenderIfHidingTrivial",value:function(){if(this.state.get("hideTrivial"))return this.reRender()}},{key:"postRender",value:function(){return this.$(".im-toggle-trivial").tooltip({placement:"right"}),this.$list=this.$(".im-state-list"),this.renderStates(),this.$el.toggleClass("im-has-history",1<this.collection.size()),this.$el.toggleClass("im-hidden",this.collection.size()<=1)}},{key:"renderStates",value:function(){var t,i,e,n,r,s,o,a,l,u,c,h,f,d=this.state.toJSON();for(h=d.showAll,e=d.hideTrivial,t=this.collection,o=e?t.filter(g):t.models.slice(),f=o.length,i=p.get("UndoHistory.ShowAllStatesCutOff"),c=[],r=0,s=(a=h||f<=i?function(){for(var t=[],e=l=f-1;l<=0?e<=0:0<=e;l<=0?e++:e--)t.push(e);return t}.apply(this):function(){for(var t=[],e=u=f-1,n=f-(i-1);u<=n?e<=n:n<=e;u<=n?e++:e--)t.push(e);return t}.apply(this).concat([-1,0])).length;r<s;r++)-1===(n=a[r])?c.push(this.renderEllipsis(f-i)):c.push(this.renderState(o[n]));return c}},{key:"renderEllipsis",value:function(t){return this.renderChild("...",new n({more:t,state:this.state}),this.$list)}},{key:"renderState",value:function(t){return this.renderChild(a(t),new r({model:t}),this.$list)}},{key:"removeStep",value:function(t){return this.removeChild(a(t))}}]),t}();return t.prototype.parameters=["collection"],t.prototype.className="btn-group im-undo-history",t.prototype.template=s.template("undo-history"),t}.call(this)}).call(this)},{"../core-view":3,"../messages":16,"../messages/undo":29,"../options":63,"../templates":67,"./undo-history/step":231,underscore:262}],230:[function(t,s,e){(function(){var e,i,n,r;r=t("underscore"),i=t("../../core-view"),n=t("../../templates"),e=t("../../utils/css-class-set"),s.exports=function(){var t=function(){function n(){return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,i),_createClass2(n,[{key:"labelContent",value:function(){throw new Error("NOT IMPLEMENTED")}},{key:"summaryLabel",value:function(){return thow(new Error("NOT IMPLEMENTED"))}},{key:"initState",value:function(){return this.state.set({open:!1})}},{key:"initialize",value:function(){var t=this;return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.collectionClasses=new e({"well well-sm":!0,"im-hidden":function(){return!t.state.get("open")}})}},{key:"getData",value:function(){var t,e;return e=r.result(this,"summaryLabel"),t=this.collection.where({removed:!1}).length,r.extend(_get(_getPrototypeOf(n.prototype),"getData",this).call(this),{count:t,summaryLabel:e,labelContent:this.labelContent,collectionClasses:this.collectionClasses})}},{key:"events",value:function(){return{"click .im-section-summary":"toggleOpen"}}},{key:"stateEvents",value:function(){return{"change:open":this.reRender}}},{key:"collectionEvents",value:function(){return{change:this.reRender}}},{key:"toggleOpen",value:function(t){return t.stopPropagation(),t.preventDefault(),this.state.toggle("open")}}]),n}();return t.prototype.template=n.template("undo-history-step-section"),t}.call(this)}).call(this)},{"../../core-view":3,"../../templates":67,"../../utils/css-class-set":79,underscore:262}],231:[function(w,C,t){(function(){var e,s,n,i,o,r,a,l,t,u,c,h,f,d,p,g,m,v,y,_,b=[].indexOf;g=w("underscore"),o=w("../../core-view"),e=w("../../core/collection"),d=w("../../templates"),r=w("../../messages"),t=w("../../models/path"),n=w("../../models/constraint"),l=w("../../models/order-element"),u=w("./query-property-section"),w("../../messages/undo"),w("../../messages/constraints"),_=function(e){return function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass2(t,[{key:"defaults",value:function(){return g.extend(_get(_getPrototypeOf(t.prototype),"defaults",this).call(this),{added:!1,removed:!1})}}]),t}()},a=function(){function n(t){var e=t.path;return _classCallCheck2(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,e))}return _inherits(n,t),n}(),p=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.prototype.model=_(a),t}.call(this),s=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.prototype.model=_(n),t}.call(this),h=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}();return t.prototype.model=_(l),t}.call(this),v=function(n){return function(t){var e;return t=g.isString(t)?{path:t}:t,e={path:n.makePath(t.path)},t.type&&(e.type=n.model.makePath(t.type)),g.extend(e,g.omit(t,"path","type"))}},C.exports=function(){var t=function(){function r(){return _classCallCheck2(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,o),_createClass2(r,[{key:"getData",value:function(){return g.extend(_get(_getPrototypeOf(r.prototype),"getData",this).call(this),{diff:this.getCountDiff()})}},{key:"getCountDiff",value:function(){return this.state.has("prevCount")?this.model.get("count")-this.state.get("prevCount"):null}},{key:"initialize",value:function(){var t,e,n,i;if(_get(_getPrototypeOf(r.prototype),"initialize",this).call(this),e=this.model.get("query"),this.initPrevCount(),t=v(e),this.listenTo(this.model.collection,"add remove",this.setCurrent),this.views=new p(e.views.map(t)),this.constraints=new s(e.constraints.map(t)),this.sortOrder=new h(e.sortOrder.map(t)),"Added"===(n=(i=this.model.get("title")).verb)||"Removed"===n||"Changed"===n)switch(i.label){case"column":return this.diffView();case"sort order element":return this.diffSortOrder();case"filter":return this.diffConstraints();case"Initial":return null;default:return console.error("Cannot diff",i.label)}}},{key:"initPrevCount",value:function(){var t,e=this;if(t=this.getPrevModel())return this.state.set({prevCount:t.get("count")}),this.listenTo(t,"change:count",function(){return e.state.set({prevCount:t.get("count")})})}},{key:"getPrevModel",value:function(){var t;return 0===(t=this.model.collection.indexOf(this.model))?null:this.model.collection.at(t-1)}},{key:"diff",value:function(t,e,n){var i,r,s,o,a,l,u,c,h,f,d,p,g;for(h=this.getPrevModel(),i=this.model.get("query"),f=h.get("query"),s=o=0,l=(d=i[t]).length;o<l;s=++o)n(r=d[s],f)&&e.at(s).set({added:!0});for(c=v(f),g=[],s=a=0,u=(p=f[t]).length;a<u;s=++a)n(r=p[s],i)&&g.push(e.add(c(r),{at:s}).set({removed:!0}));return g}},{key:"diffView",value:function(){return this.diff("views",this.views,function(t,e){var n=e.views;return b.call(n,t)<0})}},{key:"diffSortOrder",value:function(){return this.diff("sortOrder",this.sortOrder,function(t,e){return!g.findWhere(e.sortOrder,t)})}},{key:"diffConstraints",value:function(){return this.diff("constraints",this.constraints,function(t,e){return!g.findWhere(e.constraints,t)})}},{key:"initState",value:function(){return this.setCurrent()}},{key:"setCurrent",value:function(){var t,e,n;if(null!=(e=this.model)?e.collection:void 0)return t=this.model.collection.indexOf(this.model),n=this.model.collection.size(),this.state.set({current:t===n-1})}},{key:"stateEvents",value:function(){return{change:this.reRender}}},{key:"modelEvents",value:function(){return{change:this.reRender}}},{key:"events",value:function(){return{"click .btn.im-state-revert":"revertToState",click:function(t){return t.preventDefault(),t.stopPropagation()}}}},{key:"revertToState",value:function(){return this.model.collection.revertTo(this.model)}},{key:"postRender",value:function(){var t;if(this.$details=this.$(".im-step-details"),this.$el.toggleClass("im-current-state",this.state.get("current")),this.$(".btn[title]").tooltip({placement:"right"}),this.state.get("current"))return this.renderAllSections();switch((t=this.model.get("title")).label){case"column":return this.renderViews();case"filter":return this.renderConstraints();case"sort order element":return this.renderSortOrder();case"Initial":return null;default:return console.error("Cannot render",t.label)}}},{key:"renderAllSections",value:function(){return this.renderViews(),this.renderConstraints(),this.renderSortOrder()}},{key:"renderViews",value:function(){return this.renderChild("views",new c({collection:this.views}),this.$details)}},{key:"renderSortOrder",value:function(){return this.renderChild("so",new f({collection:this.sortOrder}),this.$details)}},{key:"renderConstraints",value:function(){return this.renderChild("cons",new i({collection:this.constraints}),this.$details)}}]),r}();return t.prototype.className="im-step",t.prototype.tagName="li",t.prototype.template=d.template("undo-history-step"),t}.call(this),c=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,u),_createClass2(t,[{key:"labelContent",value:function(t){return t.displayName}}]),t}();return t.prototype.summaryLabel="undo.ViewCount",t}.call(this),f=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,u),_createClass2(t,[{key:"labelContent",value:function(t){return t.displayName+" "+t.direction}}]),t}();return t.prototype.summaryLabel="undo.OrderElemCount",t}.call(this),y=function(t){return r.getText("constraints.NoOfValues",{n:t.values.length})},m=function(t){return r.getText("constraints.NoOfIds",{n:t.ids.length})},i=function(){var t=function(){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,u),_createClass2(t,[{key:"labelContent",value:function(t){return function(){switch(t.CONSTRAINT_TYPE){case"MULTI_VALUE":return[t.displayName,t.op,t.values.length,y(t)];case"TYPE":return[t.displayName,r.getText("constraints.ISA"),t.typeName];case"IDS":return[t.displayName,t.op,m(t)];case"LOOKUP":return[t.displayName,t.op,t.value,r.getText("constraints.LookupIn"),t.extraValue];default:return[t.displayName,t.op,t.value]}}().join(" ")}}]),t}();return t.prototype.summaryLabel="undo.ConstraintCount",t}.call(this)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../messages":16,"../../messages/constraints":21,"../../messages/undo":29,"../../models/constraint":40,"../../models/order-element":53,"../../models/path":56,"../../templates":67,"./query-property-section":230,underscore:262}],232:[function(n,r,s){(function(t,e){var i=n("jsonparse"),f=n("through");function d(t,e){return"string"==typeof t?e==t:t&&"function"==typeof t.exec?t.exec(e):"boolean"==typeof t?t:"function"==typeof t&&t(e)}s.parse=function(l,u){var n=new i,c=f(function(t){"string"==typeof t&&(t=new e(t)),n.write(t)},function(t){t&&c.write(t),c.queue(null)});"string"==typeof l&&(l=l.split(".").map(function(t){return"*"===t||(""===t?{recurse:!0}:t)}));var h=0;return l&&l.length||(l=null),n.onValue=function(t){if(this.root||(c.root=t),l){for(var e=0,n=0;e<l.length;){var i,r=l[e];if(n++,r&&!r.recurse){if(!(i=n===this.stack.length?this:this.stack[n]))return;if(!d(r,i.key))return;e++}else{var s=l[++e];if(!s)return;for(;;){if(!(i=n===this.stack.length?this:this.stack[n]))return;if(d(s,i.key)){e++;break}n++}}}if(n===this.stack.length){h++;var o=this.stack.slice(1).map(function(t){return t.key}).concat([this.key]),a=this.value[this.key];null!=a&&null!=(a=u?u(a,o):a)&&c.queue(a),delete this.value[this.key]}}},n._onToken=n.onToken,n.onToken=function(t,e){n._onToken(t,e),0===this.stack.length&&c.root&&(l||c.queue(c.root),c.emit("root",c.root,h),h=0,c.root=null)},n.onError=function(t){c.emit("error",t)},c},s.stringify=function(n,i,e,r){r=r||0,!1===n?(i="\n",e=n=""):null==n&&(n="[\n",i="\n,\n",e="\n]\n");var s,o=!0,a=!1;return s=f(function(t){a=!0;var e=JSON.stringify(t,null,r);o?(o=!1,s.queue(n+e)):s.queue(i+e)},function(t){a||s.queue(n),s.queue(e),s.queue(null)})},s.stringifyObject=function(n,i,e,r){r=r||0,!1===n?(i="\n",e=n=""):null==n&&(n="{\n",i="\n,\n",e="\n}\n");var s=!0,o=!1;return stream=f(function(t){o=!0;var e=JSON.stringify(t[0])+":"+JSON.stringify(t[1],null,r);s?(s=!1,this.queue(n+e)):this.queue(i+e)},function(t){o||this.queue(n),this.queue(e),this.queue(null)}),stream},r.parent||"browser"===t.title||t.stdin.pipe(s.parse(t.argv[2])).pipe(s.stringify("[",",\n","]\n",2)).pipe(t.stdout)}).call(this,n("_process"),n("buffer").Buffer)},{_process:275,buffer:266,jsonparse:257,through:260}],233:[function(t,a,u){!function(){var o=Array.prototype.forEach,n=Object.prototype.hasOwnProperty,r=Array.prototype.slice,i=0;var e,h={keys:Object.keys||function(t){if("object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++i+"";return t?t+e:e},has:function(t,e){return n.call(t,e)},each:function(t,e,n){if(null!=t)if(o&&t.forEach===o)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var s in t)this.has(t,s)&&e.call(n,t[s],s,t)},once:function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments),t=null),e}}};e={on:function(t,e,n){return f(this,"on",t,[e,n])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this})),this},once:function(t,e,n){if(!f(this,"once",t,[e,n])||!e)return this;var i=this,r=h.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,s,o,a,l,u,c;if(!this._events||!f(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=0,l=(o=t?[t]:h.keys(this._events)).length;a<l;a++)if(t=o[a],s=this._events[t]){if(this._events[t]=i=[],e||n)for(u=0,c=s.length;u<c;u++)r=s[u],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!f(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&s(n,e),i&&s(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;for(var s in"object"===(void 0===e?"undefined":_typeof(e))&&(n=this),t&&((i={})[t._listenerId]=t),i)i[s].off(e,n,this),r&&delete this._listeners[s];return this}};var l=/\s+/,f=function(t,e,n,i){if(!n)return!0;if("object"===(void 0===n?"undefined":_typeof(n))){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var s=n.split(l),o=0,a=s.length;o<a;o++)t[e].apply(t,[s[o]].concat(i));return!1}return!0},s=function(t,e){var n,i=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}};h.each({listenTo:"on",listenToOnce:"once"},function(i,t){e[t]=function(t,e,n){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=h.uniqueId("l"))]=t,"object"===(void 0===e?"undefined":_typeof(e))&&(n=this),t[i](e,n,this),this}}),e.bind=e.on,e.unbind=e.off,e.mixin=function(e){return h.each(["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"],function(t){e[t]=this[t]},this),e},void 0!==u?(void 0!==a&&a.exports&&(u=a.exports=e),u.BackboneEvents=e):this.BackboneEvents=e}()},{}],234:[function(t,e,n){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":233}],235:[function(s,t,o){(function(r){!function(t){var e="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"==(void 0===r?"undefined":_typeof(r))&&r.global===r&&r;if(void 0!==o){var n,i=s("underscore");try{n=s("jquery")}catch(t){}t(e,o,i,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,l,w,e){var n=t.Backbone,o=Array.prototype.slice;l.VERSION="1.4.0",l.$=e,l.noConflict=function(){return t.Backbone=n,this},l.emulateHTTP=!1,l.emulateJSON=!1;function a(t,e,n,i,r){var s,o=0;if(n&&"object"===(void 0===n?"undefined":_typeof(n))){void 0!==i&&"context"in r&&void 0===r.context&&(r.context=i);for(s=w.keys(n);o<s.length;o++)e=a(t,e,s[o],n[s[o]],r)}else if(n&&c.test(n))for(s=n.split(c);o<s.length;o++)e=t(e,s[o],i,r);else e=t(e,n,i,r);return e}var u,i=l.Events={},c=/\s+/;i.on=function(t,e,n){this._events=a(r,this._events||{},t,e,{context:n,ctx:this,listening:u}),u&&(((this._listeners||(this._listeners={}))[u.id]=u).interop=!1);return this},i.listenTo=function(t,e,n){if(!t)return this;var i=t._listenId||(t._listenId=w.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),s=u=r[i];s||(this._listenId||(this._listenId=w.uniqueId("l")),s=u=r[i]=new g(this,t));var o=h(t,e,n,this);if(u=void 0,o)throw o;return s.interop&&s.on(e,n),this};var r=function(t,e,n,i){if(n){var r=t[e]||(t[e]=[]),s=i.context,o=i.ctx,a=i.listening;a&&a.count++,r.push({callback:n,context:s,ctx:s||o,listening:a})}return t},h=function(t,e,n,i){try{t.on(e,n,i)}catch(t){return t}};i.off=function(t,e,n){return this._events&&(this._events=a(s,this._events,t,e,{context:n,listeners:this._listeners})),this},i.stopListening=function(t,e,n){var i=this._listeningTo;if(!i)return this;for(var r=t?[t._listenId]:w.keys(i),s=0;s<r.length;s++){var o=i[r[s]];if(!o)break;o.obj.off(e,n,this),o.interop&&o.off(e,n)}return w.isEmpty(i)&&(this._listeningTo=void 0),this};var s=function(t,e,n,i){if(t){var r,s=i.context,o=i.listeners,a=0;if(e||s||n){for(r=e?[e]:w.keys(t);a<r.length;a++){var l=t[e=r[a]];if(!l)break;for(var u=[],c=0;c<l.length;c++){var h=l[c];if(n&&n!==h.callback&&n!==h.callback._callback||s&&s!==h.context)u.push(h);else{var f=h.listening;f&&f.off(e,n)}}u.length?t[e]=u:delete t[e]}return t}for(r=w.keys(o);a<r.length;a++)o[r[a]].cleanup()}};i.once=function(t,e,n){var i=a(f,{},t,e,this.off.bind(this));return"string"==typeof t&&null==n&&(e=void 0),this.on(i,e,n)},i.listenToOnce=function(t,e,n){var i=a(f,{},e,n,this.stopListening.bind(this,t));return this.listenTo(t,i)};var f=function(t,e,n,i){if(n){var r=t[e]=w.once(function(){i(e,r),n.apply(this,arguments)});r._callback=n}return t};i.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return a(d,this._events,t,void 0,n),this};var d=function(t,e,n,i){if(t){var r=t[e],s=t.all;r&&s&&(s=s.slice()),r&&p(r,i),s&&p(s,[e].concat(i))}return t},p=function(t,e){var n,i=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}},g=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};g.prototype.on=i.on,g.prototype.off=function(t,e){(this.interop?(this._events=a(s,this._events,t,e,{context:void 0,listeners:void 0}),this._events):(this.count--,0!==this.count))||this.cleanup()},g.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},i.bind=i.on,i.unbind=i.off,w.extend(l,i);var m=l.Model=function(t,e){var n=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=w.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var i=w.result(this,"defaults");n=w.defaults(w.extend({},i,n),i),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};w.extend(m.prototype,i,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return w.clone(this.attributes)},sync:function(){return l.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return w.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!w.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var i;if("object"===(void 0===t?"undefined":_typeof(t))?(i=t,n=e):(i={})[t]=e,n||(n={}),!this._validate(i,n))return!1;var r=n.unset,s=n.silent,o=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=w.clone(this.attributes),this.changed={});var l=this.attributes,u=this.changed,c=this._previousAttributes;for(var h in i)e=i[h],w.isEqual(l[h],e)||o.push(h),w.isEqual(c[h],e)?delete u[h]:u[h]=e,r?delete l[h]:l[h]=e;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!s){o.length&&(this._pending=n);for(var f=0;f<o.length;f++)this.trigger("change:"+o[f],this,l[o[f]],n)}if(a)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,w.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,w.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!w.isEmpty(this.changed):w.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&w.clone(this.changed);var e,n=this._changing?this._previousAttributes:this.attributes,i={};for(var r in t){var s=t[r];w.isEqual(n[r],s)||(i[r]=s,e=!0)}return!!e&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return w.clone(this._previousAttributes)},fetch:function(n){n=w.extend({parse:!0},n);var i=this,r=n.success;return n.success=function(t){var e=n.parse?i.parse(t,n):t;if(!i.set(e,n))return!1;r&&r.call(n.context,i,t,n),i.trigger("sync",i,t,n)},$(this,n),this.sync("read",this,n)},save:function(t,e,n){var i;null==t||"object"===(void 0===t?"undefined":_typeof(t))?(i=t,n=e):(i={})[t]=e;var r=(n=w.extend({validate:!0,parse:!0},n)).wait;if(i&&!r){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;var s=this,o=n.success,a=this.attributes;n.success=function(t){s.attributes=a;var e=n.parse?s.parse(t,n):t;if(r&&(e=w.extend({},i,e)),e&&!s.set(e,n))return!1;o&&o.call(n.context,s,t,n),s.trigger("sync",s,t,n)},$(this,n),i&&r&&(this.attributes=w.extend({},a,i));var l=this.isNew()?"create":n.patch?"patch":"update";"patch"!=l||n.attrs||(n.attrs=i);var u=this.sync(l,this,n);return this.attributes=a,u},destroy:function(e){e=e?w.clone(e):{};function n(){i.stopListening(),i.trigger("destroy",i,i.collection,e)}var i=this,r=e.success,s=e.wait,t=!(e.success=function(t){s&&n(),r&&r.call(e.context,i,t,e),i.isNew()||i.trigger("sync",i,t,e)});return this.isNew()?w.defer(e.success):($(this,e),t=this.sync("delete",this,e)),s||n(),t},url:function(){var t=w.result(this,"urlRoot")||w.result(this.collection,"url")||U();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},w.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=w.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,w.extend(e,{validationError:n})),!1)}});function C(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,r=Array(t.length-n),s=e.length;for(i=0;i<r.length;i++)r[i]=t[i+n];for(i=0;i<s;i++)t[i+n]=e[i];for(i=0;i<r.length;i++)t[i+s+n]=r[i]}var v=l.Collection=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,w.extend({silent:!0},e))},k={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};w.extend(v.prototype,i,{model:m,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return l.sync.apply(this,arguments)},add:function(t,e){return this.set(t,w.extend({merge:!1},e,y))},remove:function(t,e){e=w.extend({},e);var n=!w.isArray(t);t=n?[t]:t.slice();var i=this._removeModels(t,e);return!e.silent&&i.length&&(e.changes={added:[],merged:[],removed:i},this.trigger("update",this,e)),n?i[0]:i},set:function(t,e){if(null!=t){(e=w.extend({},k,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!w.isArray(t);t=n?[t]:t.slice();var i=e.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var r,s,o=[],a=[],l=[],u=[],c={},h=e.add,f=e.merge,d=e.remove,p=!1,g=this.comparator&&null==i&&!1!==e.sort,m=w.isString(this.comparator)?this.comparator:null;for(s=0;s<t.length;s++){r=t[s];var v=this.get(r);if(v){if(f&&r!==v){var y=this._isModel(r)?r.attributes:r;e.parse&&(y=v.parse(y,e)),v.set(y,e),l.push(v),g&&!p&&(p=v.hasChanged(m))}c[v.cid]||(c[v.cid]=!0,o.push(v)),t[s]=v}else h&&(r=t[s]=this._prepareModel(r,e))&&(a.push(r),this._addReference(r,e),c[r.cid]=!0,o.push(r))}if(d){for(s=0;s<this.length;s++)c[(r=this.models[s]).cid]||u.push(r);u.length&&this._removeModels(u,e)}var _=!1,b=!g&&h&&d;if(o.length&&b?(_=this.length!==o.length||w.some(this.models,function(t,e){return t!==o[e]}),this.models.length=0,C(this.models,o,0),this.length=this.models.length):a.length&&(g&&(p=!0),C(this.models,a,null==i?this.length:i),this.length=this.models.length),p&&this.sort({silent:!0}),!e.silent){for(s=0;s<a.length;s++)null!=i&&(e.index=i+s),(r=a[s]).trigger("add",r,this,e);(p||_)&&this.trigger("sort",this,e),(a.length||u.length||l.length)&&(e.changes={added:a,removed:u,merged:l},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?w.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,w.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,w.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,w.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return w.isFunction(e)&&(e=e.bind(this)),1===n||w.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(n){var i=(n=w.extend({parse:!0},n)).success,r=this;return n.success=function(t){var e=n.reset?"reset":"set";r[e](t,n),i&&i.call(n.context,r,t,n),r.trigger("sync",r,t,n)},$(this,n),this.sync("read",this,n)},create:function(t,e){var i=(e=e?w.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;i||this.add(t,e);var r=this,s=e.success;return e.success=function(t,e,n){i&&r.add(t,n),s&&s.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},values:function(){return new b(this,x)},keys:function(){return new b(this,T)},entries:function(){return new b(this,S)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;var n=new(((e=e?w.clone(e):{}).collection=this).model)(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.get(t[i]);if(r){var s=this.indexOf(r);this.models.splice(s,1),this.length--,delete this._byId[r.cid];var o=this.modelId(r.attributes);null!=o&&delete this._byId[o],e.silent||(e.index=s,r.trigger("remove",r,this,e)),n.push(r),this._removeReference(r,e)}}return n},_isModel:function(t){return t instanceof m},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.modelId(e.previousAttributes()),s=this.modelId(e.attributes);r!==s&&(null!=r&&delete this._byId[r],null!=s&&(this._byId[s]=e))}}this.trigger.apply(this,arguments)}});var _="function"==typeof Symbol&&Symbol.iterator;_&&(v.prototype[_]=v.prototype.values);var b=function(t,e){this._collection=t,this._kind=e,this._index=0},x=1,T=2,S=3;_&&(b.prototype[_]=function(){return this}),b.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===x)t=e;else{var n=this._collection.modelId(e.attributes);t=this._kind===T?n:[n,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var E=l.View=function(t){this.cid=w.uniqueId("view"),this.preinitialize.apply(this,arguments),w.extend(this,w.pick(t,P)),this._ensureElement(),this.initialize.apply(this,arguments)},O=/^(\S+)\s*(.*)$/,P=["model","collection","el","id","attributes","className","tagName","events"];w.extend(E.prototype,i,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof l.$?t:l.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=w.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(w.isFunction(n)||(n=this[n]),n){var i=e.match(O);this.delegate(i[1],i[2],n.bind(this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(w.result(this,"el"));else{var t=w.extend({},w.result(this,"attributes"));this.id&&(t.id=w.result(this,"id")),this.className&&(t.class=w.result(this,"className")),this.setElement(this._createElement(w.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});function N(n,i,t,r){w.each(t,function(t,e){i[e]&&(n.prototype[e]=function(i,t,r,s){switch(t){case 1:return function(){return i[r](this[s])};case 2:return function(t){return i[r](this[s],t)};case 3:return function(t,e){return i[r](this[s],M(t,this),e)};case 4:return function(t,e,n){return i[r](this[s],M(t,this),e,n)};default:return function(){var t=o.call(arguments);return t.unshift(this[s]),i[r].apply(i,t)}}}(i,t,e,r))})}var M=function(e,t){return w.isFunction(e)?e:w.isObject(e)&&!t._isModel(e)?D(e):w.isString(e)?function(t){return t.get(e)}:e},D=function(t){var e=w.matches(t);return function(t){return e(t.attributes)}};w.each([[v,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[m,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(t){var n=t[0],e=t[1],i=t[2];n.mixin=function(t){var e=w.reduce(w.functions(t),function(t,e){return t[e]=0,t},{});N(n,t,e,i)},N(n,w,e,i)}),l.sync=function(t,e,i){var n=A[t];w.defaults(i||(i={}),{emulateHTTP:l.emulateHTTP,emulateJSON:l.emulateJSON});var r={type:n,dataType:"json"};if(i.url||(r.url=w.result(e,"url")||U()),null!=i.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(i.attrs||e.toJSON(i))),i.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),i.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){r.type="POST",i.emulateJSON&&(r.data._method=n);var s=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",n),s)return s.apply(this,arguments)}}"GET"===r.type||i.emulateJSON||(r.processData=!1);var o=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,o&&o.call(i.context,t,e,n)};var a=i.xhr=l.ajax(w.extend(r,i));return e.trigger("request",e,a,i),a};var A={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};l.ajax=function(){return l.$.ajax.apply(l.$,arguments)};var I=l.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},R=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,q=/\*\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g;w.extend(I.prototype,i,{preinitialize:function(){},initialize:function(){},route:function(n,i,r){w.isRegExp(n)||(n=this._routeToRegExp(n)),w.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var s=this;return l.history.route(n,function(t){var e=s._extractParameters(n,t);!1!==s.execute(r,e,i)&&(s.trigger.apply(s,["route:"+i].concat(e)),s.trigger("route",i,e),l.history.trigger("route",s,i,e))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,e){return l.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=w.result(this,"routes");for(var t,e=w.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(j,"\\$&").replace(R,"(?:$1)?").replace(L,function(t,e){return e?t:"([^/?]+)"}).replace(q,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return w.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var z=l.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,H=/^\/+|\/+$/g,B=/#.*$/;z.started=!1,w.extend(z.prototype,i,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(F,"")},start:function(t){if(z.started)throw new Error("Backbone.history has already been started");if(z.started=!0,this.options=w.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(H,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,i=n.insertBefore(this.iframe,n.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),z.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),w.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(t,e){if(!z.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;t=t.replace(B,"");var r=this.decodeFragment(t);if(this.fragment!==r){if(this.fragment=r,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;e.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),l.history=new z;m.extend=v.extend=I.extend=E.extend=z.extend=function(t,e){var n,i=this;return n=t&&w.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},w.extend(n,i,e),n.prototype=w.create(i.prototype,t),(n.prototype.constructor=n).__super__=i.prototype,n};var U=function(){throw new Error('A "url" property or function must be specified')},$=function(e,n){var i=n.error;n.error=function(t){i&&i.call(n.context,e,t,n),e.trigger("error",e,t,n)}};return l})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:256,underscore:262}],236:[function(t,e,n){var i,r;i=this,r=function(t,p,h){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function l(r){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},e=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),e.forEach(function(t){var e,n,i;e=r,i=s[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i})}return r}p=p&&p.hasOwnProperty("default")?p.default:p,h=h&&h.hasOwnProperty("default")?h.default:h;var e="transitionend";function n(t){var e=this,n=!1;return p(this).one(g.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||g.triggerTransitionEnd(e)},t),this}var g={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var n=t.getAttribute("href");e=n&&"#"!==n?n.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=p(t).css("transition-duration"),n=p(t).css("transition-delay"),i=parseFloat(e),r=parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(e)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){p(t).trigger(e)},supportsTransitionEnd:function(){return Boolean(e)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i],s=e[i],o=s&&g.isElement(s)?"element":(a=s,{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(r).test(o))throw new Error(t.toUpperCase()+': Option "'+i+'" provided type "'+o+'" but expected type "'+r+'".')}var a},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"!=typeof t.getRootNode)return t instanceof ShadowRoot?t:t.parentNode?g.findShadowRoot(t.parentNode):null;var e=t.getRootNode();return e instanceof ShadowRoot?e:null}};p.fn.emulateTransitionEnd=n,p.event.special[g.TRANSITION_END]={bindType:e,delegateType:e,handle:function(t){if(p(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var r="alert",s="bs.alert",a="."+s,u=p.fn[r],c={CLOSE:"close"+a,CLOSED:"closed"+a,CLICK_DATA_API:"click"+a+".data-api"},f="alert",d="fade",m="show",v=function(){function i(t){this._element=t}var t=i.prototype;return t.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){p.removeData(this._element,s),this._element=null},t._getRootElement=function(t){var e=g.getSelectorFromElement(t),n=!1;return e&&(n=document.querySelector(e)),n||(n=p(t).closest("."+f)[0]),n},t._triggerCloseEvent=function(t){var e=p.Event(c.CLOSE);return p(t).trigger(e),e},t._removeElement=function(e){var n=this;if(p(e).removeClass(m),p(e).hasClass(d)){var t=g.getTransitionDurationFromElement(e);p(e).one(g.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(t)}else this._destroyElement(e)},t._destroyElement=function(t){p(t).detach().trigger(c.CLOSED).remove()},i._jQueryInterface=function(n){return this.each(function(){var t=p(this),e=t.data(s);e||(e=new i(this),t.data(s,e)),"close"===n&&e[n](this)})},i._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},o(i,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),i}();p(document).on(c.CLICK_DATA_API,'[data-dismiss="alert"]',v._handleDismiss(new v)),p.fn[r]=v._jQueryInterface,p.fn[r].Constructor=v,p.fn[r].noConflict=function(){return p.fn[r]=u,v._jQueryInterface};var y="button",_="bs.button",b="."+_,w=".data-api",C=p.fn[y],k="active",x="btn",T="focus",S='[data-toggle^="button"]',E='[data-toggle="buttons"]',O='input:not([type="hidden"])',P=".active",N=".btn",M={CLICK_DATA_API:"click"+b+w,FOCUS_BLUR_DATA_API:"focus"+b+w+" blur"+b+w},D=function(){function n(t){this._element=t}var t=n.prototype;return t.toggle=function(){var t=!0,e=!0,n=p(this._element).closest(E)[0];if(n){var i=this._element.querySelector(O);if(i){if("radio"===i.type)if(i.checked&&this._element.classList.contains(k))t=!1;else{var r=n.querySelector(P);r&&p(r).removeClass(k)}if(t){if(i.hasAttribute("disabled")||n.hasAttribute("disabled")||i.classList.contains("disabled")||n.classList.contains("disabled"))return;i.checked=!this._element.classList.contains(k),p(i).trigger("change")}i.focus(),e=!1}}e&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(k)),t&&p(this._element).toggleClass(k)},t.dispose=function(){p.removeData(this._element,_),this._element=null},n._jQueryInterface=function(e){return this.each(function(){var t=p(this).data(_);t||(t=new n(this),p(this).data(_,t)),"toggle"===e&&t[e]()})},o(n,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),n}();p(document).on(M.CLICK_DATA_API,S,function(t){t.preventDefault();var e=t.target;p(e).hasClass(x)||(e=p(e).closest(N)),D._jQueryInterface.call(p(e),"toggle")}).on(M.FOCUS_BLUR_DATA_API,S,function(t){var e=p(t.target).closest(N)[0];p(e).toggleClass(T,/^focus(in)?$/.test(t.type))}),p.fn[y]=D._jQueryInterface,p.fn[y].Constructor=D,p.fn[y].noConflict=function(){return p.fn[y]=C,D._jQueryInterface};var A="carousel",I="bs.carousel",R="."+I,L=p.fn[A],q={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},j={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},z="next",F="prev",H="left",B="right",U={SLIDE:"slide"+R,SLID:"slid"+R,KEYDOWN:"keydown"+R,MOUSEENTER:"mouseenter"+R,MOUSELEAVE:"mouseleave"+R,TOUCHSTART:"touchstart"+R,TOUCHMOVE:"touchmove"+R,TOUCHEND:"touchend"+R,POINTERDOWN:"pointerdown"+R,POINTERUP:"pointerup"+R,DRAG_START:"dragstart"+R,LOAD_DATA_API:"load"+R+".data-api",CLICK_DATA_API:"click"+R+".data-api"},$="carousel",W="active",V="slide",Y="carousel-item-right",K="carousel-item-left",G="carousel-item-next",Q="carousel-item-prev",J="pointer-event",X=".active",Z=".active.carousel-item",tt=".carousel-item",et=".carousel-item img",nt=".carousel-item-next, .carousel-item-prev",it=".carousel-indicators",rt="[data-slide], [data-slide-to]",st='[data-ride="carousel"]',ot={TOUCH:"touch",PEN:"pen"},at=function(){function s(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(it),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var t=s.prototype;return t.next=function(){this._isSliding||this._slide(z)},t.nextWhenVisible=function(){!document.hidden&&p(this._element).is(":visible")&&"hidden"!==p(this._element).css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide(F)},t.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(nt)&&(g.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(t){var e=this;this._activeElement=this._element.querySelector(Z);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)p(this._element).one(U.SLID,function(){return e.to(t)});else{if(n===t)return this.pause(),void this.cycle();var i=n<t?z:F;this._slide(i,this._items[t])}},t.dispose=function(){p(this._element).off(R),p.removeData(this._element,I),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(t){return t=l({},q,t),g.typeCheckConfig(A,t,j),t},t._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;0<e&&this.prev(),e<0&&this.next()}},t._addEventListeners=function(){var e=this;this._config.keyboard&&p(this._element).on(U.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&p(this._element).on(U.MOUSEENTER,function(t){return e.pause(t)}).on(U.MOUSELEAVE,function(t){return e.cycle(t)}),this._config.touch&&this._addTouchEventListeners()},t._addTouchEventListeners=function(){var e=this;if(this._touchSupported){var n=function(t){e._pointerEvent&&ot[t.originalEvent.pointerType.toUpperCase()]?e.touchStartX=t.originalEvent.clientX:e._pointerEvent||(e.touchStartX=t.originalEvent.touches[0].clientX)},i=function(t){e._pointerEvent&&ot[t.originalEvent.pointerType.toUpperCase()]&&(e.touchDeltaX=t.originalEvent.clientX-e.touchStartX),e._handleSwipe(),"hover"===e._config.pause&&(e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},500+e._config.interval))};p(this._element.querySelectorAll(et)).on(U.DRAG_START,function(t){return t.preventDefault()}),this._pointerEvent?(p(this._element).on(U.POINTERDOWN,function(t){return n(t)}),p(this._element).on(U.POINTERUP,function(t){return i(t)}),this._element.classList.add(J)):(p(this._element).on(U.TOUCHSTART,function(t){return n(t)}),p(this._element).on(U.TOUCHMOVE,function(t){return function(t){t.originalEvent.touches&&1<t.originalEvent.touches.length?e.touchDeltaX=0:e.touchDeltaX=t.originalEvent.touches[0].clientX-e.touchStartX}(t)}),p(this._element).on(U.TOUCHEND,function(t){return i(t)}))}},t._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},t._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(tt)):[],this._items.indexOf(t)},t._getItemByDirection=function(t,e){var n=t===z,i=t===F,r=this._getItemIndex(e),s=this._items.length-1;if((i&&0===r||n&&r===s)&&!this._config.wrap)return e;var o=(r+(t===F?-1:1))%this._items.length;return-1==o?this._items[this._items.length-1]:this._items[o]},t._triggerSlideEvent=function(t,e){var n=this._getItemIndex(t),i=this._getItemIndex(this._element.querySelector(Z)),r=p.Event(U.SLIDE,{relatedTarget:t,direction:e,from:i,to:n});return p(this._element).trigger(r),r},t._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var e=[].slice.call(this._indicatorsElement.querySelectorAll(X));p(e).removeClass(W);var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&p(n).addClass(W)}},t._slide=function(t,e){var n,i,r,s=this,o=this._element.querySelector(Z),a=this._getItemIndex(o),l=e||o&&this._getItemByDirection(t,o),u=this._getItemIndex(l),c=Boolean(this._interval);if(r=t===z?(n=K,i=G,H):(n=Y,i=Q,B),l&&p(l).hasClass(W))this._isSliding=!1;else if(!this._triggerSlideEvent(l,r).isDefaultPrevented()&&o&&l){this._isSliding=!0,c&&this.pause(),this._setActiveIndicatorElement(l);var h=p.Event(U.SLID,{relatedTarget:l,direction:r,from:a,to:u});if(p(this._element).hasClass(V)){p(l).addClass(i),g.reflow(l),p(o).addClass(n),p(l).addClass(n);var f=parseInt(l.getAttribute("data-interval"),10);f?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=f):this._config.interval=this._config.defaultInterval||this._config.interval;var d=g.getTransitionDurationFromElement(o);p(o).one(g.TRANSITION_END,function(){p(l).removeClass(n+" "+i).addClass(W),p(o).removeClass(W+" "+i+" "+n),s._isSliding=!1,setTimeout(function(){return p(s._element).trigger(h)},0)}).emulateTransitionEnd(d)}else p(o).removeClass(W),p(l).addClass(W),this._isSliding=!1,p(this._element).trigger(h);c&&this.cycle()}},s._jQueryInterface=function(i){return this.each(function(){var t=p(this).data(I),e=l({},q,p(this).data());"object"===(void 0===i?"undefined":_typeof(i))&&(e=l({},e,i));var n="string"==typeof i?i:e.slide;if(t||(t=new s(this,e),p(this).data(I,t)),"number"==typeof i)t.to(i);else if("string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}else e.interval&&e.ride&&(t.pause(),t.cycle())})},s._dataApiClickHandler=function(t){var e=g.getSelectorFromElement(this);if(e){var n=p(e)[0];if(n&&p(n).hasClass($)){var i=l({},p(n).data(),p(this).data()),r=this.getAttribute("data-slide-to");r&&(i.interval=!1),s._jQueryInterface.call(p(n),i),r&&p(n).data(I).to(r),t.preventDefault()}}},o(s,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return q}}]),s}();p(document).on(U.CLICK_DATA_API,rt,at._dataApiClickHandler),p(window).on(U.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(st)),e=0,n=t.length;e<n;e++){var i=p(t[e]);at._jQueryInterface.call(i,i.data())}}),p.fn[A]=at._jQueryInterface,p.fn[A].Constructor=at,p.fn[A].noConflict=function(){return p.fn[A]=L,at._jQueryInterface};var lt="collapse",ut="bs.collapse",ct="."+ut,ht=p.fn[lt],ft={toggle:!0,parent:""},dt={toggle:"boolean",parent:"(string|element)"},pt={SHOW:"show"+ct,SHOWN:"shown"+ct,HIDE:"hide"+ct,HIDDEN:"hidden"+ct,CLICK_DATA_API:"click"+ct+".data-api"},gt="show",mt="collapse",vt="collapsing",yt="collapsed",_t="width",bt="height",wt=".show, .collapsing",Ct='[data-toggle="collapse"]',kt=function(){function a(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(Ct)),i=0,r=n.length;i<r;i++){var s=n[i],o=g.getSelectorFromElement(s),a=[].slice.call(document.querySelectorAll(o)).filter(function(t){return t===e});null!==o&&0<a.length&&(this._selector=o,this._triggerArray.push(s))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=a.prototype;return t.toggle=function(){p(this._element).hasClass(gt)?this.hide():this.show()},t.show=function(){var t,e,n=this;if(!this._isTransitioning&&!p(this._element).hasClass(gt)&&(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(wt)).filter(function(t){return"string"==typeof n._config.parent?t.getAttribute("data-parent")===n._config.parent:t.classList.contains(mt)})).length&&(t=null),!(t&&(e=p(t).not(this._selector).data(ut))&&e._isTransitioning))){var i=p.Event(pt.SHOW);if(p(this._element).trigger(i),!i.isDefaultPrevented()){t&&(a._jQueryInterface.call(p(t).not(this._selector),"hide"),e||p(t).data(ut,null));var r=this._getDimension();p(this._element).removeClass(mt).addClass(vt),this._element.style[r]=0,this._triggerArray.length&&p(this._triggerArray).removeClass(yt).attr("aria-expanded",!0),this.setTransitioning(!0);var s="scroll"+(r[0].toUpperCase()+r.slice(1)),o=g.getTransitionDurationFromElement(this._element);p(this._element).one(g.TRANSITION_END,function(){p(n._element).removeClass(vt).addClass(mt).addClass(gt),n._element.style[r]="",n.setTransitioning(!1),p(n._element).trigger(pt.SHOWN)}).emulateTransitionEnd(o),this._element.style[r]=this._element[s]+"px"}}},t.hide=function(){var t=this;if(!this._isTransitioning&&p(this._element).hasClass(gt)){var e=p.Event(pt.HIDE);if(p(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",g.reflow(this._element),p(this._element).addClass(vt).removeClass(mt).removeClass(gt);var i=this._triggerArray.length;if(0<i)for(var r=0;r<i;r++){var s=this._triggerArray[r],o=g.getSelectorFromElement(s);if(null!==o)p([].slice.call(document.querySelectorAll(o))).hasClass(gt)||p(s).addClass(yt).attr("aria-expanded",!1)}this.setTransitioning(!0);this._element.style[n]="";var a=g.getTransitionDurationFromElement(this._element);p(this._element).one(g.TRANSITION_END,function(){t.setTransitioning(!1),p(t._element).removeClass(vt).addClass(mt).trigger(pt.HIDDEN)}).emulateTransitionEnd(a)}}},t.setTransitioning=function(t){this._isTransitioning=t},t.dispose=function(){p.removeData(this._element,ut),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(t){return(t=l({},ft,t)).toggle=Boolean(t.toggle),g.typeCheckConfig(lt,t,dt),t},t._getDimension=function(){return p(this._element).hasClass(_t)?_t:bt},t._getParent=function(){var t,n=this;g.isElement(this._config.parent)?(t=this._config.parent,void 0!==this._config.parent.jquery&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent);var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',i=[].slice.call(t.querySelectorAll(e));return p(i).each(function(t,e){n._addAriaAndCollapsedClass(a._getTargetFromElement(e),[e])}),t},t._addAriaAndCollapsedClass=function(t,e){var n=p(t).hasClass(gt);e.length&&p(e).toggleClass(yt,!n).attr("aria-expanded",n)},a._getTargetFromElement=function(t){var e=g.getSelectorFromElement(t);return e?document.querySelector(e):null},a._jQueryInterface=function(i){return this.each(function(){var t=p(this),e=t.data(ut),n=l({},ft,t.data(),"object"===(void 0===i?"undefined":_typeof(i))&&i?i:{});if(!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||(e=new a(this,n),t.data(ut,e)),"string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i]()}})},o(a,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return ft}}]),a}();p(document).on(pt.CLICK_DATA_API,Ct,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=p(this),e=g.getSelectorFromElement(this),i=[].slice.call(document.querySelectorAll(e));p(i).each(function(){var t=p(this),e=t.data(ut)?"toggle":n.data();kt._jQueryInterface.call(t,e)})}),p.fn[lt]=kt._jQueryInterface,p.fn[lt].Constructor=kt,p.fn[lt].noConflict=function(){return p.fn[lt]=ht,kt._jQueryInterface};var xt="dropdown",Tt="bs.dropdown",St="."+Tt,Et=".data-api",Ot=p.fn[xt],Pt=new RegExp("38|40|27"),Nt={HIDE:"hide"+St,HIDDEN:"hidden"+St,SHOW:"show"+St,SHOWN:"shown"+St,CLICK:"click"+St,CLICK_DATA_API:"click"+St+Et,KEYDOWN_DATA_API:"keydown"+St+Et,KEYUP_DATA_API:"keyup"+St+Et},Mt="disabled",Dt="show",At="dropup",It="dropright",Rt="dropleft",Lt="dropdown-menu-right",qt="position-static",jt='[data-toggle="dropdown"]',zt=".dropdown form",Ft=".dropdown-menu",Ht=".navbar-nav",Bt=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Ut="top-start",$t="top-end",Wt="bottom-start",Vt="bottom-end",Yt="right-start",Kt="left-start",Gt={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},Qt={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},Jt=function(){function u(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=u.prototype;return t.toggle=function(){if(!this._element.disabled&&!p(this._element).hasClass(Mt)){var t=u._getParentFromElement(this._element),e=p(this._menu).hasClass(Dt);if(u._clearMenus(),!e){var n={relatedTarget:this._element},i=p.Event(Nt.SHOW,n);if(p(t).trigger(i),!i.isDefaultPrevented()){if(!this._inNavbar){if(void 0===h)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var r=this._element;"parent"===this._config.reference?r=t:g.isElement(this._config.reference)&&(r=this._config.reference,void 0!==this._config.reference.jquery&&(r=this._config.reference[0])),"scrollParent"!==this._config.boundary&&p(t).addClass(qt),this._popper=new h(r,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===p(t).closest(Ht).length&&p(document.body).children().on("mouseover",null,p.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),p(this._menu).toggleClass(Dt),p(t).toggleClass(Dt).trigger(p.Event(Nt.SHOWN,n))}}}},t.show=function(){if(!(this._element.disabled||p(this._element).hasClass(Mt)||p(this._menu).hasClass(Dt))){var t={relatedTarget:this._element},e=p.Event(Nt.SHOW,t),n=u._getParentFromElement(this._element);p(n).trigger(e),e.isDefaultPrevented()||(p(this._menu).toggleClass(Dt),p(n).toggleClass(Dt).trigger(p.Event(Nt.SHOWN,t)))}},t.hide=function(){if(!this._element.disabled&&!p(this._element).hasClass(Mt)&&p(this._menu).hasClass(Dt)){var t={relatedTarget:this._element},e=p.Event(Nt.HIDE,t),n=u._getParentFromElement(this._element);p(n).trigger(e),e.isDefaultPrevented()||(p(this._menu).toggleClass(Dt),p(n).toggleClass(Dt).trigger(p.Event(Nt.HIDDEN,t)))}},t.dispose=function(){p.removeData(this._element,Tt),p(this._element).off(St),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;p(this._element).on(Nt.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},t._getConfig=function(t){return t=l({},this.constructor.Default,p(this._element).data(),t),g.typeCheckConfig(xt,t,this.constructor.DefaultType),t},t._getMenuElement=function(){if(!this._menu){var t=u._getParentFromElement(this._element);t&&(this._menu=t.querySelector(Ft))}return this._menu},t._getPlacement=function(){var t=p(this._element.parentNode),e=Wt;return t.hasClass(At)?(e=Ut,p(this._menu).hasClass(Lt)&&(e=$t)):t.hasClass(It)?e=Yt:t.hasClass(Rt)?e=Kt:p(this._menu).hasClass(Lt)&&(e=Vt),e},t._detectNavbar=function(){return 0<p(this._element).closest(".navbar").length},t._getOffset=function(){var e=this,t={};return"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e._config.offset(t.offsets,e._element)||{}),t}:t.offset=this._config.offset,t},t._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),t},u._jQueryInterface=function(n){return this.each(function(){var t=p(this).data(Tt),e="object"===(void 0===n?"undefined":_typeof(n))?n:null;if(t||(t=new u(this,e),p(this).data(Tt,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},u._clearMenus=function(t){if(!t||3!==t.which&&("keyup"!==t.type||9===t.which))for(var e=[].slice.call(document.querySelectorAll(jt)),n=0,i=e.length;n<i;n++){var r=u._getParentFromElement(e[n]),s=p(e[n]).data(Tt),o={relatedTarget:e[n]};if(t&&"click"===t.type&&(o.clickEvent=t),s){var a=s._menu;if(p(r).hasClass(Dt)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&9===t.which)&&p.contains(r,t.target))){var l=p.Event(Nt.HIDE,o);p(r).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&p(document.body).children().off("mouseover",null,p.noop),e[n].setAttribute("aria-expanded","false"),p(a).removeClass(Dt),p(r).removeClass(Dt).trigger(p.Event(Nt.HIDDEN,o)))}}}},u._getParentFromElement=function(t){var e,n=g.getSelectorFromElement(t);return n&&(e=document.querySelector(n)),e||t.parentNode},u._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(32===t.which||27!==t.which&&(40!==t.which&&38!==t.which||p(t.target).closest(Ft).length)):Pt.test(t.which))&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!p(this).hasClass(Mt))){var e=u._getParentFromElement(this),n=p(e).hasClass(Dt);if(n&&(!n||27!==t.which&&32!==t.which)){var i=[].slice.call(e.querySelectorAll(Bt));if(0!==i.length){var r=i.indexOf(t.target);38===t.which&&0<r&&r--,40===t.which&&r<i.length-1&&r++,r<0&&(r=0),i[r].focus()}}else{if(27===t.which){var s=e.querySelector(jt);p(s).trigger("focus")}p(this).trigger("click")}}},o(u,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Gt}},{key:"DefaultType",get:function(){return Qt}}]),u}();p(document).on(Nt.KEYDOWN_DATA_API,jt,Jt._dataApiKeydownHandler).on(Nt.KEYDOWN_DATA_API,Ft,Jt._dataApiKeydownHandler).on(Nt.CLICK_DATA_API+" "+Nt.KEYUP_DATA_API,Jt._clearMenus).on(Nt.CLICK_DATA_API,jt,function(t){t.preventDefault(),t.stopPropagation(),Jt._jQueryInterface.call(p(this),"toggle")}).on(Nt.CLICK_DATA_API,zt,function(t){t.stopPropagation()}),p.fn[xt]=Jt._jQueryInterface,p.fn[xt].Constructor=Jt,p.fn[xt].noConflict=function(){return p.fn[xt]=Ot,Jt._jQueryInterface};var Xt="modal",Zt="bs.modal",te="."+Zt,ee=p.fn[Xt],ne={backdrop:!0,keyboard:!0,focus:!0,show:!0},ie={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},re={HIDE:"hide"+te,HIDDEN:"hidden"+te,SHOW:"show"+te,SHOWN:"shown"+te,FOCUSIN:"focusin"+te,RESIZE:"resize"+te,CLICK_DISMISS:"click.dismiss"+te,KEYDOWN_DISMISS:"keydown.dismiss"+te,MOUSEUP_DISMISS:"mouseup.dismiss"+te,MOUSEDOWN_DISMISS:"mousedown.dismiss"+te,CLICK_DATA_API:"click"+te+".data-api"},se="modal-dialog-scrollable",oe="modal-scrollbar-measure",ae="modal-backdrop",le="modal-open",ue="fade",ce="show",he=".modal-dialog",fe=".modal-body",de='[data-toggle="modal"]',pe='[data-dismiss="modal"]',ge=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",me=".sticky-top",ve=function(){function r(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(he),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var t=r.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e=this;if(!this._isShown&&!this._isTransitioning){p(this._element).hasClass(ue)&&(this._isTransitioning=!0);var n=p.Event(re.SHOW,{relatedTarget:t});p(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),p(this._element).on(re.CLICK_DISMISS,pe,function(t){return e.hide(t)}),p(this._dialog).on(re.MOUSEDOWN_DISMISS,function(){p(e._element).one(re.MOUSEUP_DISMISS,function(t){p(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return e._showElement(t)}))}},t.hide=function(t){var e=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var n=p.Event(re.HIDE);if(p(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var i=p(this._element).hasClass(ue);if(i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),p(document).off(re.FOCUSIN),p(this._element).removeClass(ce),p(this._element).off(re.CLICK_DISMISS),p(this._dialog).off(re.MOUSEDOWN_DISMISS),i){var r=g.getTransitionDurationFromElement(this._element);p(this._element).one(g.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(r)}else this._hideModal()}}},t.dispose=function(){[window,this._element,this._dialog].forEach(function(t){return p(t).off(te)}),p(document).off(re.FOCUSIN),p.removeData(this._element,Zt),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=l({},ne,t),g.typeCheckConfig(Xt,t,ie),t},t._showElement=function(t){var e=this,n=p(this._element).hasClass(ue);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),p(this._dialog).hasClass(se)?this._dialog.querySelector(fe).scrollTop=0:this._element.scrollTop=0,n&&g.reflow(this._element),p(this._element).addClass(ce),this._config.focus&&this._enforceFocus();function i(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,p(e._element).trigger(r)}var r=p.Event(re.SHOWN,{relatedTarget:t});if(n){var s=g.getTransitionDurationFromElement(this._dialog);p(this._dialog).one(g.TRANSITION_END,i).emulateTransitionEnd(s)}else i()},t._enforceFocus=function(){var e=this;p(document).off(re.FOCUSIN).on(re.FOCUSIN,function(t){document!==t.target&&e._element!==t.target&&0===p(e._element).has(t.target).length&&e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?p(this._element).on(re.KEYDOWN_DISMISS,function(t){27===t.which&&(t.preventDefault(),e.hide())}):this._isShown||p(this._element).off(re.KEYDOWN_DISMISS)},t._setResizeEvent=function(){var e=this;this._isShown?p(window).on(re.RESIZE,function(t){return e.handleUpdate(t)}):p(window).off(re.RESIZE)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){p(document.body).removeClass(le),t._resetAdjustments(),t._resetScrollbar(),p(t._element).trigger(re.HIDDEN)})},t._removeBackdrop=function(){this._backdrop&&(p(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e=this,n=p(this._element).hasClass(ue)?ue:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=ae,n&&this._backdrop.classList.add(n),p(this._backdrop).appendTo(document.body),p(this._element).on(re.CLICK_DISMISS,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._element.focus():e.hide())}),n&&g.reflow(this._backdrop),p(this._backdrop).addClass(ce),!t)return;if(!n)return void t();var i=g.getTransitionDurationFromElement(this._backdrop);p(this._backdrop).one(g.TRANSITION_END,t).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){p(this._backdrop).removeClass(ce);var r=function(){e._removeBackdrop(),t&&t()};if(p(this._element).hasClass(ue)){var s=g.getTransitionDurationFromElement(this._backdrop);p(this._backdrop).one(g.TRANSITION_END,r).emulateTransitionEnd(s)}else r()}else t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var r=this;if(this._isBodyOverflowing){var t=[].slice.call(document.querySelectorAll(ge)),e=[].slice.call(document.querySelectorAll(me));p(t).each(function(t,e){var n=e.style.paddingRight,i=p(e).css("padding-right");p(e).data("padding-right",n).css("padding-right",parseFloat(i)+r._scrollbarWidth+"px")}),p(e).each(function(t,e){var n=e.style.marginRight,i=p(e).css("margin-right");p(e).data("margin-right",n).css("margin-right",parseFloat(i)-r._scrollbarWidth+"px")});var n=document.body.style.paddingRight,i=p(document.body).css("padding-right");p(document.body).data("padding-right",n).css("padding-right",parseFloat(i)+this._scrollbarWidth+"px")}p(document.body).addClass(le)},t._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(ge));p(t).each(function(t,e){var n=p(e).data("padding-right");p(e).removeData("padding-right"),e.style.paddingRight=n||""});var e=[].slice.call(document.querySelectorAll(""+me));p(e).each(function(t,e){var n=p(e).data("margin-right");void 0!==n&&p(e).css("margin-right",n).removeData("margin-right")});var n=p(document.body).data("padding-right");p(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className=oe,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},r._jQueryInterface=function(n,i){return this.each(function(){var t=p(this).data(Zt),e=l({},ne,p(this).data(),"object"===(void 0===n?"undefined":_typeof(n))&&n?n:{});if(t||(t=new r(this,e),p(this).data(Zt,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n](i)}else e.show&&t.show(i)})},o(r,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return ne}}]),r}();p(document).on(re.CLICK_DATA_API,de,function(t){var e,n=this,i=g.getSelectorFromElement(this);i&&(e=document.querySelector(i));var r=p(e).data(Zt)?"toggle":l({},p(e).data(),p(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var s=p(e).one(re.SHOW,function(t){t.isDefaultPrevented()||s.one(re.HIDDEN,function(){p(n).is(":visible")&&n.focus()})});ve._jQueryInterface.call(p(e),r,this)}),p.fn[Xt]=ve._jQueryInterface,p.fn[Xt].Constructor=ve,p.fn[Xt].noConflict=function(){return p.fn[Xt]=ee,ve._jQueryInterface};var ye=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],_e={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},be=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,we=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function Ce(t,o,e){if(0===t.length)return t;if(e&&"function"==typeof e)return e(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),a=Object.keys(o),l=[].slice.call(n.body.querySelectorAll("*")),i=function(t,e){var n=l[t],i=n.nodeName.toLowerCase();if(-1===a.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var r=[].slice.call(n.attributes),s=[].concat(o["*"]||[],o[i]||[]);r.forEach(function(t){!function(t,e){var n=t.nodeName.toLowerCase();if(-1!==e.indexOf(n))return-1===ye.indexOf(n)||Boolean(t.nodeValue.match(be)||t.nodeValue.match(we));for(var i=e.filter(function(t){return t instanceof RegExp}),r=0,s=i.length;r<s;r++)if(n.match(i[r]))return!0;return!1}(t,s)&&n.removeAttribute(t.nodeName)})},r=0,s=l.length;r<s;r++)i(r);return n.body.innerHTML}var ke="tooltip",xe="bs.tooltip",Te="."+xe,Se=p.fn[ke],Ee="bs-tooltip",Oe=new RegExp("(^|\\s)"+Ee+"\\S+","g"),Pe=["sanitize","whiteList","sanitizeFn"],Ne={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},Me={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},De={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:_e},Ae="show",Ie="out",Re={HIDE:"hide"+Te,HIDDEN:"hidden"+Te,SHOW:"show"+Te,SHOWN:"shown"+Te,INSERTED:"inserted"+Te,CLICK:"click"+Te,FOCUSIN:"focusin"+Te,FOCUSOUT:"focusout"+Te,MOUSEENTER:"mouseenter"+Te,MOUSELEAVE:"mouseleave"+Te},Le="fade",qe="show",je=".tooltip-inner",ze=".arrow",Fe="hover",He="focus",Be="click",Ue="manual",$e=function(){function i(t,e){if(void 0===h)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=i.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,n=p(t.currentTarget).data(e);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),p(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(p(this.getTipElement()).hasClass(qe))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),p.removeData(this.element,this.constructor.DATA_KEY),p(this.element).off(this.constructor.EVENT_KEY),p(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&p(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===p(this.element).css("display"))throw new Error("Please use show on visible elements");var t=p.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){p(this.element).trigger(t);var n=g.findShadowRoot(this.element),i=p.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!i)return;var r=this.getTipElement(),s=g.getUID(this.constructor.NAME);r.setAttribute("id",s),this.element.setAttribute("aria-describedby",s),this.setContent(),this.config.animation&&p(r).addClass(Le);var o="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,a=this._getAttachment(o);this.addAttachmentClass(a);var l=this._getContainer();p(r).data(this.constructor.DATA_KEY,this),p.contains(this.element.ownerDocument.documentElement,this.tip)||p(r).appendTo(l),p(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new h(this.element,r,{placement:a,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:ze},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}}),p(r).addClass(qe),"ontouchstart"in document.documentElement&&p(document.body).children().on("mouseover",null,p.noop);var u=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,p(e.element).trigger(e.constructor.Event.SHOWN),t===Ie&&e._leave(null,e)};if(p(this.tip).hasClass(Le)){var c=g.getTransitionDurationFromElement(this.tip);p(this.tip).one(g.TRANSITION_END,u).emulateTransitionEnd(c)}else u()}},t.hide=function(t){function e(){n._hoverState!==Ae&&i.parentNode&&i.parentNode.removeChild(i),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),p(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),t&&t()}var n=this,i=this.getTipElement(),r=p.Event(this.constructor.Event.HIDE);if(p(this.element).trigger(r),!r.isDefaultPrevented()){if(p(i).removeClass(qe),"ontouchstart"in document.documentElement&&p(document.body).children().off("mouseover",null,p.noop),this._activeTrigger[Be]=!1,this._activeTrigger[He]=!1,this._activeTrigger[Fe]=!1,p(this.tip).hasClass(Le)){var s=g.getTransitionDurationFromElement(i);p(i).one(g.TRANSITION_END,e).emulateTransitionEnd(s)}else e();this._hoverState=""}},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(t){p(this.getTipElement()).addClass(Ee+"-"+t)},t.getTipElement=function(){return this.tip=this.tip||p(this.config.template)[0],this.tip},t.setContent=function(){var t=this.getTipElement();this.setElementContent(p(t.querySelectorAll(je)),this.getTitle()),p(t).removeClass(Le+" "+qe)},t.setElementContent=function(t,e){"object"!==(void 0===e?"undefined":_typeof(e))||!e.nodeType&&!e.jquery?this.config.html?(this.config.sanitize&&(e=Ce(e,this.config.whiteList,this.config.sanitizeFn)),t.html(e)):t.text(e):this.config.html?p(e).parent().is(t)||t.empty().append(e):t.text(p(e).text())},t.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},t._getOffset=function(){var e=this,t={};return"function"==typeof this.config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e.config.offset(t.offsets,e.element)||{}),t}:t.offset=this.config.offset,t},t._getContainer=function(){return!1===this.config.container?document.body:g.isElement(this.config.container)?p(this.config.container):p(document).find(this.config.container)},t._getAttachment=function(t){return Me[t.toUpperCase()]},t._setListeners=function(){var i=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)p(i.element).on(i.constructor.Event.CLICK,i.config.selector,function(t){return i.toggle(t)});else if(t!==Ue){var e=t===Fe?i.constructor.Event.MOUSEENTER:i.constructor.Event.FOCUSIN,n=t===Fe?i.constructor.Event.MOUSELEAVE:i.constructor.Event.FOCUSOUT;p(i.element).on(e,i.config.selector,function(t){return i._enter(t)}).on(n,i.config.selector,function(t){return i._leave(t)})}}),p(this.element).closest(".modal").on("hide.bs.modal",function(){i.element&&i.hide()}),this.config.selector?this.config=l({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var t=_typeof(this.element.getAttribute("data-original-title"));!this.element.getAttribute("title")&&"string"===t||(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(t,e){var n=this.constructor.DATA_KEY;(e=e||p(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),p(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?He:Fe]=!0),p(e.getTipElement()).hasClass(qe)||e._hoverState===Ae?e._hoverState=Ae:(clearTimeout(e._timeout),e._hoverState=Ae,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===Ae&&e.show()},e.config.delay.show):e.show())},t._leave=function(t,e){var n=this.constructor.DATA_KEY;(e=e||p(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),p(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?He:Fe]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=Ie,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){e._hoverState===Ie&&e.hide()},e.config.delay.hide):e.hide())},t._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},t._getConfig=function(t){var e=p(this.element).data();return Object.keys(e).forEach(function(t){-1!==Pe.indexOf(t)&&delete e[t]}),"number"==typeof(t=l({},this.constructor.Default,e,"object"===(void 0===t?"undefined":_typeof(t))&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),g.typeCheckConfig(ke,t,this.constructor.DefaultType),t.sanitize&&(t.template=Ce(t.template,t.whiteList,t.sanitizeFn)),t},t._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},t._cleanTipClass=function(){var t=p(this.getTipElement()),e=t.attr("class").match(Oe);null!==e&&e.length&&t.removeClass(e.join(""))},t._handlePopperPlacementChange=function(t){var e=t.instance;this.tip=e.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},t._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(p(t).removeClass(Le),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},i._jQueryInterface=function(n){return this.each(function(){var t=p(this).data(xe),e="object"===(void 0===n?"undefined":_typeof(n))&&n;if((t||!/dispose|hide/.test(n))&&(t||(t=new i(this,e),p(this).data(xe,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},o(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return De}},{key:"NAME",get:function(){return ke}},{key:"DATA_KEY",get:function(){return xe}},{key:"Event",get:function(){return Re}},{key:"EVENT_KEY",get:function(){return Te}},{key:"DefaultType",get:function(){return Ne}}]),i}();p.fn[ke]=$e._jQueryInterface,p.fn[ke].Constructor=$e,p.fn[ke].noConflict=function(){return p.fn[ke]=Se,$e._jQueryInterface};var We="popover",Ve="bs.popover",Ye="."+Ve,Ke=p.fn[We],Ge="bs-popover",Qe=new RegExp("(^|\\s)"+Ge+"\\S+","g"),Je=l({},$e.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Xe=l({},$e.DefaultType,{content:"(string|element|function)"}),Ze="fade",tn="show",en=".popover-header",nn=".popover-body",rn={HIDE:"hide"+Ye,HIDDEN:"hidden"+Ye,SHOW:"show"+Ye,SHOWN:"shown"+Ye,INSERTED:"inserted"+Ye,CLICK:"click"+Ye,FOCUSIN:"focusin"+Ye,FOCUSOUT:"focusout"+Ye,MOUSEENTER:"mouseenter"+Ye,MOUSELEAVE:"mouseleave"+Ye},sn=function(t){function i(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(i,t);var e=i.prototype;return e.isWithContent=function(){return this.getTitle()||this._getContent()},e.addAttachmentClass=function(t){p(this.getTipElement()).addClass(Ge+"-"+t)},e.getTipElement=function(){return this.tip=this.tip||p(this.config.template)[0],this.tip},e.setContent=function(){var t=p(this.getTipElement());this.setElementContent(t.find(en),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(nn),e),t.removeClass(Ze+" "+tn)},e._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},e._cleanTipClass=function(){var t=p(this.getTipElement()),e=t.attr("class").match(Qe);null!==e&&0<e.length&&t.removeClass(e.join(""))},i._jQueryInterface=function(n){return this.each(function(){var t=p(this).data(Ve),e="object"===(void 0===n?"undefined":_typeof(n))?n:null;if((t||!/dispose|hide/.test(n))&&(t||(t=new i(this,e),p(this).data(Ve,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},o(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Je}},{key:"NAME",get:function(){return We}},{key:"DATA_KEY",get:function(){return Ve}},{key:"Event",get:function(){return rn}},{key:"EVENT_KEY",get:function(){return Ye}},{key:"DefaultType",get:function(){return Xe}}]),i}($e);p.fn[We]=sn._jQueryInterface,p.fn[We].Constructor=sn,p.fn[We].noConflict=function(){return p.fn[We]=Ke,sn._jQueryInterface};var on="scrollspy",an="bs.scrollspy",ln="."+an,un=p.fn[on],cn={offset:10,method:"auto",target:""},hn={offset:"number",method:"string",target:"(string|element)"},fn={ACTIVATE:"activate"+ln,SCROLL:"scroll"+ln,LOAD_DATA_API:"load"+ln+".data-api"},dn="dropdown-item",pn="active",gn='[data-spy="scroll"]',mn=".nav, .list-group",vn=".nav-link",yn=".nav-item",_n=".list-group-item",bn=".dropdown",wn=".dropdown-item",Cn=".dropdown-toggle",kn="offset",xn="position",Tn=function(){function i(t,e){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+vn+","+this._config.target+" "+_n+","+this._config.target+" "+wn,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,p(this._scrollElement).on(fn.SCROLL,function(t){return n._process(t)}),this.refresh(),this._process()}var t=i.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?kn:xn,r="auto"===this._config.method?t:this._config.method,s=r===xn?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var e,n=g.getSelectorFromElement(t);if(n&&(e=document.querySelector(n)),e){var i=e.getBoundingClientRect();if(i.width||i.height)return[p(e)[r]().top+s,n]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},t.dispose=function(){p.removeData(this._element,an),p(this._scrollElement).off(ln),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(t){if("string"!=typeof(t=l({},cn,"object"===(void 0===t?"undefined":_typeof(t))&&t?t:{})).target){var e=p(t.target).attr("id");e||(e=g.getUID(on),p(t.target).attr("id",e)),t.target="#"+e}return g.typeCheckConfig(on,t,hn),t},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var r=this._offsets.length;r--;){this._activeTarget!==this._targets[r]&&t>=this._offsets[r]&&(void 0===this._offsets[r+1]||t<this._offsets[r+1])&&this._activate(this._targets[r])}}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",").map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'}),n=p([].slice.call(document.querySelectorAll(t.join(","))));n.hasClass(dn)?(n.closest(bn).find(Cn).addClass(pn),n.addClass(pn)):(n.addClass(pn),n.parents(mn).prev(vn+", "+_n).addClass(pn),n.parents(mn).prev(yn).children(vn).addClass(pn)),p(this._scrollElement).trigger(fn.ACTIVATE,{relatedTarget:e})},t._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains(pn)}).forEach(function(t){return t.classList.remove(pn)})},i._jQueryInterface=function(n){return this.each(function(){var t=p(this).data(an),e="object"===(void 0===n?"undefined":_typeof(n))&&n;if(t||(t=new i(this,e),p(this).data(an,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},o(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return cn}}]),i}();p(window).on(fn.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(gn)),e=t.length;e--;){var n=p(t[e]);Tn._jQueryInterface.call(n,n.data())}}),p.fn[on]=Tn._jQueryInterface,p.fn[on].Constructor=Tn,p.fn[on].noConflict=function(){return p.fn[on]=un,Tn._jQueryInterface};var Sn="bs.tab",En="."+Sn,On=p.fn.tab,Pn={HIDE:"hide"+En,HIDDEN:"hidden"+En,SHOW:"show"+En,SHOWN:"shown"+En,CLICK_DATA_API:"click.bs.tab.data-api"},Nn="dropdown-menu",Mn="active",Dn="disabled",An="fade",In="show",Rn=".dropdown",Ln=".nav, .list-group",qn=".active",jn="> li > .active",zn='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',Fn=".dropdown-toggle",Hn="> .dropdown-menu .active",Bn=function(){function i(t){this._element=t}var t=i.prototype;return t.show=function(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&p(this._element).hasClass(Mn)||p(this._element).hasClass(Dn))){var t,i,e=p(this._element).closest(Ln)[0],r=g.getSelectorFromElement(this._element);if(e){var s="UL"===e.nodeName||"OL"===e.nodeName?jn:qn;i=(i=p.makeArray(p(e).find(s)))[i.length-1]}var o=p.Event(Pn.HIDE,{relatedTarget:this._element}),a=p.Event(Pn.SHOW,{relatedTarget:i});if(i&&p(i).trigger(o),p(this._element).trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){r&&(t=document.querySelector(r)),this._activate(this._element,e);var l=function(){var t=p.Event(Pn.HIDDEN,{relatedTarget:n._element}),e=p.Event(Pn.SHOWN,{relatedTarget:i});p(i).trigger(t),p(n._element).trigger(e)};t?this._activate(t,t.parentNode,l):l()}}},t.dispose=function(){p.removeData(this._element,Sn),this._element=null},t._activate=function(t,e,n){function i(){return r._transitionComplete(t,s,n)}var r=this,s=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?p(e).children(qn):p(e).find(jn))[0],o=n&&s&&p(s).hasClass(An);if(s&&o){var a=g.getTransitionDurationFromElement(s);p(s).removeClass(In).one(g.TRANSITION_END,i).emulateTransitionEnd(a)}else i()},t._transitionComplete=function(t,e,n){if(e){p(e).removeClass(Mn);var i=p(e.parentNode).find(Hn)[0];i&&p(i).removeClass(Mn),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}if(p(t).addClass(Mn),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),g.reflow(t),t.classList.contains(An)&&t.classList.add(In),t.parentNode&&p(t.parentNode).hasClass(Nn)){var r=p(t).closest(Rn)[0];if(r){var s=[].slice.call(r.querySelectorAll(Fn));p(s).addClass(Mn)}t.setAttribute("aria-expanded",!0)}n&&n()},i._jQueryInterface=function(n){return this.each(function(){var t=p(this),e=t.data(Sn);if(e||(e=new i(this),t.data(Sn,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},o(i,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),i}();p(document).on(Pn.CLICK_DATA_API,zn,function(t){t.preventDefault(),Bn._jQueryInterface.call(p(this),"show")}),p.fn.tab=Bn._jQueryInterface,p.fn.tab.Constructor=Bn,p.fn.tab.noConflict=function(){return p.fn.tab=On,Bn._jQueryInterface};var Un="toast",$n="bs.toast",Wn="."+$n,Vn=p.fn[Un],Yn={CLICK_DISMISS:"click.dismiss"+Wn,HIDE:"hide"+Wn,HIDDEN:"hidden"+Wn,SHOW:"show"+Wn,SHOWN:"shown"+Wn},Kn="fade",Gn="hide",Qn="show",Jn="showing",Xn={animation:"boolean",autohide:"boolean",delay:"number"},Zn={animation:!0,autohide:!0,delay:500},ti='[data-dismiss="toast"]',ei=function(){function r(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var t=r.prototype;return t.show=function(){var t=this;p(this._element).trigger(Yn.SHOW),this._config.animation&&this._element.classList.add(Kn);function e(){t._element.classList.remove(Jn),t._element.classList.add(Qn),p(t._element).trigger(Yn.SHOWN),t._config.autohide&&t.hide()}if(this._element.classList.remove(Gn),this._element.classList.add(Jn),this._config.animation){var n=g.getTransitionDurationFromElement(this._element);p(this._element).one(g.TRANSITION_END,e).emulateTransitionEnd(n)}else e()},t.hide=function(t){var e=this;this._element.classList.contains(Qn)&&(p(this._element).trigger(Yn.HIDE),t?this._close():this._timeout=setTimeout(function(){e._close()},this._config.delay))},t.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(Qn)&&this._element.classList.remove(Qn),p(this._element).off(Yn.CLICK_DISMISS),p.removeData(this._element,$n),this._element=null,this._config=null},t._getConfig=function(t){return t=l({},Zn,p(this._element).data(),"object"===(void 0===t?"undefined":_typeof(t))&&t?t:{}),g.typeCheckConfig(Un,t,this.constructor.DefaultType),t},t._setListeners=function(){var t=this;p(this._element).on(Yn.CLICK_DISMISS,ti,function(){return t.hide(!0)})},t._close=function(){function t(){e._element.classList.add(Gn),p(e._element).trigger(Yn.HIDDEN)}var e=this;if(this._element.classList.remove(Qn),this._config.animation){var n=g.getTransitionDurationFromElement(this._element);p(this._element).one(g.TRANSITION_END,t).emulateTransitionEnd(n)}else t()},r._jQueryInterface=function(i){return this.each(function(){var t=p(this),e=t.data($n),n="object"===(void 0===i?"undefined":_typeof(i))&&i;if(e||(e=new r(this,n),t.data($n,e)),"string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i](this)}})},o(r,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"DefaultType",get:function(){return Xn}},{key:"Default",get:function(){return Zn}}]),r}();p.fn[Un]=ei._jQueryInterface,p.fn[Un].Constructor=ei,p.fn[Un].noConflict=function(){return p.fn[Un]=Vn,ei._jQueryInterface},function(){if(void 0===p)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=p.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),t.Util=g,t.Alert=v,t.Button=D,t.Carousel=at,t.Collapse=kt,t.Dropdown=Jt,t.Modal=ve,t.Popover=sn,t.Scrollspy=Tn,t.Tab=Bn,t.Toast=ei,t.Tooltip=$e,Object.defineProperty(t,"__esModule",{value:!0})},"object"===(void 0===n?"undefined":_typeof(n))&&void 0!==e?r(n,t("jquery"),t("popper.js")):r((i=i||self).bootstrap={},i.jQuery,i.Popper)},{jquery:256,"popper.js":259}],237:[function(t,e,n){e.exports=function(){var A={version:"3.4.11"};Date.now||(Date.now=function(){return+new Date});var r=[].slice,h=function(t){return r.call(t)},i=document,a=i.documentElement,I=window;try{h(a.childNodes)[0].nodeType}catch(t){h=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{i.createElement("div").style.setProperty("opacity",0,"")}catch(t){var e=I.Element.prototype,n=e.setAttribute,s=e.setAttributeNS,o=I.CSSStyleDeclaration.prototype,l=o.setProperty;e.setAttribute=function(t,e){n.call(this,t,e+"")},e.setAttributeNS=function(t,e,n){s.call(this,t,e,n+"")},o.setProperty=function(t,e,n){l.call(this,t,e+"",n)}}function u(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function c(t){return null!=t&&!isNaN(t)}function t(s){return{left:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;s(t[r],e)<0?n=1+r:i=r}return n},right:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;0<s(t[r],e)?i=r:n=1+r}return n}}}A.ascending=u,A.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},A.min=function(t,e){var n,i,r=-1,s=t.length;if(1===arguments.length){for(;++r<s&&!(null!=(n=t[r])&&n<=n);)n=void 0;for(;++r<s;)null!=(i=t[r])&&i<n&&(n=i)}else{for(;++r<s&&!(null!=(n=e.call(t,t[r],r))&&n<=n);)n=void 0;for(;++r<s;)null!=(i=e.call(t,t[r],r))&&i<n&&(n=i)}return n},A.max=function(t,e){var n,i,r=-1,s=t.length;if(1===arguments.length){for(;++r<s&&!(null!=(n=t[r])&&n<=n);)n=void 0;for(;++r<s;)null!=(i=t[r])&&n<i&&(n=i)}else{for(;++r<s&&!(null!=(n=e.call(t,t[r],r))&&n<=n);)n=void 0;for(;++r<s;)null!=(i=e.call(t,t[r],r))&&n<i&&(n=i)}return n},A.extent=function(t,e){var n,i,r,s=-1,o=t.length;if(1===arguments.length){for(;++s<o&&!(null!=(n=r=t[s])&&n<=n);)n=r=void 0;for(;++s<o;)null!=(i=t[s])&&(i<n&&(n=i),r<i&&(r=i))}else{for(;++s<o&&!(null!=(n=r=e.call(t,t[s],s))&&n<=n);)n=void 0;for(;++s<o;)null!=(i=e.call(t,t[s],s))&&(i<n&&(n=i),r<i&&(r=i))}return[n,r]},A.sum=function(t,e){var n,i=0,r=t.length,s=-1;if(1===arguments.length)for(;++s<r;)isNaN(n=+t[s])||(i+=n);else for(;++s<r;)isNaN(n=+e.call(t,t[s],s))||(i+=n);return i},A.mean=function(t,e){var n,i=0,r=t.length,s=-1,o=r;if(1===arguments.length)for(;++s<r;)c(n=t[s])?i+=n:--o;else for(;++s<r;)c(n=e.call(t,t[s],s))?i+=n:--o;return o?i/o:void 0},A.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],s=n-i;return s?r+s*(t[i]-r):r},A.median=function(t,e){return 1<arguments.length&&(t=t.map(e)),(t=t.filter(c)).length?A.quantile(t.sort(u),.5):void 0};var f=t(u);function d(t){return t.length}A.bisectLeft=f.left,A.bisect=A.bisectRight=f.right,A.bisector=function(n){return t(1===n.length?function(t,e){return u(n(t),e)}:n)},A.shuffle=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t},A.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},A.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(n<0?0:n);e<n;)r[e]=[i,i=t[++e]];return r},A.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=A.min(arguments,d),n=new Array(e);++t<e;)for(var i,r=-1,s=n[t]=new Array(i);++r<i;)s[r]=arguments[r][t];return n},A.transpose=function(t){return A.zip.apply(A,t)},A.keys=function(t){var e=[];for(var n in t)e.push(n);return e},A.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},A.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},A.merge=function(t){for(var e,n,i,r=t.length,s=-1,o=0;++s<r;)o+=t[s].length;for(n=new Array(o);0<=--r;)for(e=(i=t[r]).length;0<=--e;)n[--o]=i[e];return n};var R=Math.abs;function p(e,n){try{for(var t in n)Object.defineProperty(e.prototype,t,{value:n[t],enumerable:!1})}catch(t){e.prototype=n}}function _(){}A.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,r=[],s=function(t){var e=1;for(;t*e%1;)e*=10;return e}(R(n)),o=-1;if(t*=s,e*=s,(n*=s)<0)for(;(i=t+n*++o)>e;)r.push(i/s);else for(;(i=t+n*++o)<e;)r.push(i/s);return r},A.map=function(t){var n=new _;if(t instanceof _)t.forEach(function(t,e){n.set(t,e)});else for(var e in t)n.set(e,t[e]);return n},p(_,{has:v,get:function(t){return this[g+t]},set:function(t,e){return this[g+t]=e},remove:function(t){return(t=g+t)in this&&delete this[t]},keys:y,values:function(){var n=[];return this.forEach(function(t,e){n.push(e)}),n},entries:function(){var n=[];return this.forEach(function(t,e){n.push({key:t,value:e})}),n},size:b,empty:w,forEach:function(t){for(var e in this)e.charCodeAt(0)===m&&t.call(this,e.substring(1),this[e])}});var g="\0",m=g.charCodeAt(0);function v(t){return g+t in this}function y(){var e=[];return this.forEach(function(t){e.push(t)}),e}function b(){var t=0;for(var e in this)e.charCodeAt(0)===m&&++t;return t}function w(){for(var t in this)if(t.charCodeAt(0)===m)return!1;return!0}function C(){}function k(e,n,i){return function(){var t=i.apply(n,arguments);return t===n?e:t}}function x(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var n=0,i=T.length;n<i;++n){var r=T[n]+e;if(r in t)return r}}A.nest=function(){var h,f,d={},p=[],e=[];function g(n,t,i){if(i>=p.length)return f?f.call(d,t):h?t.sort(h):t;for(var e,r,s,o,a=-1,l=t.length,u=p[i++],c=new _;++a<l;)(o=c.get(e=u(r=t[a])))?o.push(r):c.set(e,[r]);return s=n?(r=n(),function(t,e){r.set(t,g(n,e,i))}):(r={},function(t,e){r[t]=g(n,e,i)}),c.forEach(s),r}return d.map=function(t,e){return g(e,t,0)},d.entries=function(t){return function n(t,i){if(i>=p.length)return t;var r=[],s=e[i++];return t.forEach(function(t,e){r.push({key:t,values:n(e,i)})}),s?r.sort(function(t,e){return s(t.key,e.key)}):r}(g(A.map,t,0),0)},d.key=function(t){return p.push(t),d},d.sortKeys=function(t){return e[p.length-1]=t,d},d.sortValues=function(t){return h=t,d},d.rollup=function(t){return f=t,d},d},A.set=function(t){var e=new C;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},p(C,{has:v,add:function(t){return this[g+t]=!0,t},remove:function(t){return(t=g+t)in this&&delete this[t]},values:y,size:b,empty:w,forEach:function(t){for(var e in this)e.charCodeAt(0)===m&&t.call(this,e.substring(1))}}),A.behavior={},A.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=k(t,e,e[n]);return t};var T=["webkit","ms","moz","Moz","o","O"];function S(){}function E(){}function O(r){var s=[],o=new _;function t(){for(var t,e=s,n=-1,i=e.length;++n<i;)(t=e[n].on)&&t.apply(this,arguments);return r}return t.on=function(t,e){var n,i=o.get(t);return arguments.length<2?i&&i.on:(i&&(i.on=null,s=s.slice(0,n=s.indexOf(i)).concat(s.slice(n+1)),o.remove(t)),e&&s.push(o.set(t,{on:e})),r)},t}function L(){A.event.preventDefault()}function P(){for(var t,e=A.event;t=e.sourceEvent;)e=t;return e}function q(r){for(var s=new E,t=0,e=arguments.length;++t<e;)s[arguments[t]]=O(s);return s.of=function(n,i){return function(t){try{var e=t.sourceEvent=A.event;t.target=r,A.event=t,s[t.type].apply(n,i)}finally{A.event=e}}},s}A.dispatch=function(){for(var t=new E,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=O(t);return t},E.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(0<=n&&(i=t.substring(n+1),t=t.substring(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},A.event=null,A.requote=function(t){return t.replace(N,"\\$&")};var N=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,M={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function D(t){return M(t,B),t}var j=function(t,e){return e.querySelector(t)},z=function(t,e){return e.querySelectorAll(t)},F=a.matches||a[x(a,"matchesSelector")],H=function(t,e){return F.call(t,e)};"function"==typeof Sizzle&&(j=function(t,e){return Sizzle(t,e)[0]||null},z=Sizzle,H=Sizzle.matchesSelector),A.selection=function(){return at};var B=A.selection.prototype=[];function U(t){return"function"==typeof t?t:function(){return j(t,this)}}function $(t){return"function"==typeof t?t:function(){return z(t,this)}}B.select=function(t){var e,n,i,r,s=[];t=U(t);for(var o=-1,a=this.length;++o<a;){s.push(e=[]),e.parentNode=(i=this[o]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return D(s)},B.selectAll=function(t){var e,n,i=[];t=$(t);for(var r=-1,s=this.length;++r<s;)for(var o=this[r],a=-1,l=o.length;++a<l;)(n=o[a])&&(i.push(e=h(t.call(n,n.__data__,a,r))),e.parentNode=n);return D(i)};var W={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function V(e,n){return e=A.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function Y(t){return t.trim().replace(/\s+/g," ")}function K(t){return new RegExp("(?:^|\\s+)"+A.requote(t)+"(?:\\s+|$)","g")}function G(t){return(t+"").trim().split(/^|\s+/)}function Q(n,i){var r=(n=G(n).map(J)).length;return"function"==typeof i?function(){for(var t=-1,e=i.apply(this,arguments);++t<r;)n[t](this,e)}:function(){for(var t=-1;++t<r;)n[t](this,i)}}function J(i){var r=K(i);return function(t,e){if(n=t.classList)return e?n.add(i):n.remove(i);var n=t.getAttribute("class")||"";e?(r.lastIndex=0,r.test(n)||t.setAttribute("class",Y(n+" "+i))):t.setAttribute("class",Y(n.replace(r," ")))}}function X(e,n,i){return null==n?function(){this.style.removeProperty(e)}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}:function(){this.style.setProperty(e,n,i)}}function Z(e,n){return null==n?function(){delete this[e]}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}:function(){this[e]=n}}function tt(t){return"function"==typeof t?t:(t=A.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function et(t){return{__data__:t}}function nt(t){return function(){return H(this,t)}}function it(t,e){for(var n=0,i=t.length;n<i;n++)for(var r,s=t[n],o=0,a=s.length;o<a;o++)(r=s[o])&&e(r,o,n);return t}function rt(t){return M(t,st),t}A.ns={prefix:W,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&(n=t.substring(0,e),t=t.substring(e+1)),W.hasOwnProperty(n)?{space:W[n],local:t}:t}},B.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=A.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(V(e,t[e]));return this}return this.each(V(t,e))},B.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=G(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!K(t[r]).test(e))return!1;return!0}for(e in t)this.each(Q(e,t[e]));return this}return this.each(Q(t,e))},B.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(X(n,t[n],e));return this}if(i<2)return I.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(X(t,e,n))},B.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(Z(e,t[e]));return this}return this.each(Z(t,e))},B.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},B.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},B.append=function(t){return t=tt(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},B.insert=function(t,e){return t=tt(t),e=U(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},B.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},B.data=function(t,g){var e,n,i=-1,r=this.length;if(!arguments.length){for(t=new Array(r=(e=this[0]).length);++i<r;)(n=e[i])&&(t[i]=n.__data__);return t}function s(t,e){var n,i,r,s=t.length,o=e.length,a=Math.min(s,o),l=new Array(o),u=new Array(o),c=new Array(s);if(g){var h,f=new _,d=new _,p=[];for(n=-1;++n<s;)h=g.call(i=t[n],i.__data__,n),f.has(h)?c[n]=i:f.set(h,i),p.push(h);for(n=-1;++n<o;)h=g.call(e,r=e[n],n),(i=f.get(h))?(l[n]=i).__data__=r:d.has(h)||(u[n]=et(r)),d.set(h,r),f.remove(h);for(n=-1;++n<s;)f.has(p[n])&&(c[n]=t[n])}else{for(n=-1;++n<a;)i=t[n],r=e[n],i?(i.__data__=r,l[n]=i):u[n]=et(r);for(;n<o;++n)u[n]=et(e[n]);for(;n<s;++n)c[n]=t[n]}u.update=l,u.parentNode=l.parentNode=c.parentNode=t.parentNode,m.push(u),v.push(l),y.push(c)}var m=rt([]),v=D([]),y=D([]);if("function"==typeof t)for(;++i<r;)s(e=this[i],t.call(e,e.parentNode.__data__,i));else for(;++i<r;)s(e=this[i],t);return v.enter=function(){return m},v.exit=function(){return y},v},B.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},B.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=nt(t));for(var s=0,o=this.length;s<o;s++){r.push(e=[]),e.parentNode=(n=this[s]).parentNode;for(var a=0,l=n.length;a<l;a++)(i=n[a])&&t.call(i,i.__data__,a,s)&&e.push(i)}return D(r)},B.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,s=i[r];0<=--r;)(n=i[r])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},B.sort=function(t){t=function(n){arguments.length||(n=u);return function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},B.each=function(i){return it(this,function(t,e,n){i.call(t,t.__data__,e,n)})},B.call=function(t){var e=h(arguments);return t.apply(e[0]=this,e),this},B.empty=function(){return!this.node()},B.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,r=n.length;i<r;i++){var s=n[i];if(s)return s}return null},B.size=function(){var t=0;return this.each(function(){++t}),t};var st=[];function ot(){var t=this.__transition__;t&&++t.active}A.selection.enter=rt,(A.selection.enter.prototype=st).append=B.append,st.empty=B.empty,st.node=B.node,st.call=B.call,st.size=B.size,st.select=function(t){for(var e,n,i,r,s,o=[],a=-1,l=this.length;++a<l;){i=(r=this[a]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(s=r[u])?(e.push(i[u]=n=t.call(r.parentNode,s.__data__,u,a)),n.__data__=s.__data__):e.push(null)}return D(o)},st.insert=function(t,e){return arguments.length<2&&(e=function(o){var a,l;return function(t,e,n){var i,r=o[n].update,s=r.length;for(n!=l&&(l=n,a=0),a<=e&&(a=e+1);!(i=r[a])&&++a<s;);return i}}(this)),B.insert.call(this,t,e)},B.transition=function(){for(var t,e,n=Ta||++Oa,i=[],r=Sa||{time:Date.now(),ease:xs,delay:0,duration:250},s=-1,o=this.length;++s<o;){i.push(t=[]);for(var a=this[s],l=-1,u=a.length;++l<u;)(e=a[l])&&Ma(e,l,n,r),t.push(e)}return xa(i,n)},B.interrupt=function(){return this.each(ot)},A.select=function(t){var e=["string"==typeof t?j(t,i):t];return e.parentNode=a,D([e])},A.selectAll=function(t){var e=h("string"==typeof t?z(t,i):t);return e.parentNode=a,D([e])};var at=A.select(a);function lt(r,e,n){var i="__on"+r,t=r.indexOf("."),s=ct;0<t&&(r=r.substring(0,t));var o=ut.get(r);function a(){var t=this[i];t&&(this.removeEventListener(r,t,t.$),delete this[i])}return o&&(r=o,s=ht),t?e?function(){var t=s(e,h(arguments));a.call(this),this.addEventListener(r,this[i]=t,t.$=n),t._=e}:a:e?S:function(){var t,e=new RegExp("^__on([^.]+)"+A.requote(r)+"$");for(var n in this)if(t=n.match(e)){var i=this[n];this.removeEventListener(t[1],i,i.$),delete this[n]}}}B.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(lt(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(lt(t,e,n))};var ut=A.map({mouseenter:"mouseover",mouseleave:"mouseout"});function ct(n,i){return function(t){var e=A.event;A.event=t,i[0]=this.__data__;try{n.apply(this,i)}finally{A.event=e}}}function ht(t,e){var n=ct(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}ut.forEach(function(t){"on"+t in i&&ut.remove(t)});var ft="onselectstart"in i?null:x(a.style,"userSelect"),dt=0;function pt(){var n=".dragsuppress-"+ ++dt,i="click"+n,r=A.select(I).on("touchmove"+n,L).on("dragstart"+n,L).on("selectstart"+n,L);if(ft){var s=a.style,o=s[ft];s[ft]="none"}return function(t){if(r.on(n,null),ft&&(s[ft]=o),t){var e=function(){r.on(i,null)};r.on(i,function(){L(),e()},!0),setTimeout(e,0)}}}A.mouse=function(t){return mt(t,P())};var gt=/WebKit/.test(I.navigator.userAgent)?-1:0;function mt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(gt<0&&(I.scrollX||I.scrollY)){var r=(n=A.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();gt=!(r.f||r.e),n.remove()}return gt?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function vt(){return A.event.changedTouches[0].identifier}function yt(){return A.event.target}function _t(){return I}A.touches=function(n,t){return arguments.length<2&&(t=P().touches),t?h(t).map(function(t){var e=mt(n,t);return e.identifier=t.identifier,e}):[]},A.behavior.drag=function(){var g=q(n,"drag","dragstart","dragend"),m=null,t=i(S,A.mouse,_t,"mousemove","mouseup"),e=i(vt,A.touch,yt,"touchmove","touchend");function n(){this.on("mousedown.drag",t).on("touchstart.drag",e)}function i(c,h,f,d,p){return function(){var i,t=A.event.target,r=this.parentNode,s=g.of(this,arguments),o=0,a=c(),e=".drag"+(null==a?"":"-"+a),n=A.select(f()).on(d+e,function(){var t,e,n=h(r,a);if(!n)return;t=n[0]-u[0],e=n[1]-u[1],o|=t|e,s({type:"drag",x:(u=n)[0]+i[0],y:n[1]+i[1],dx:t,dy:e})}).on(p+e,function(){if(!h(r,a))return;n.on(d+e,null).on(p+e,null),l(o&&A.event.target===t),s({type:"dragend"})}),l=pt(),u=h(r,a);i=m?[(i=m.apply(this,arguments)).x-u[0],i.y-u[1]]:[0,0],s({type:"dragstart"})}}return n.origin=function(t){return arguments.length?(m=t,n):m},A.rebind(n,g,"on")};var bt=Math.PI,wt=2*bt,Ct=bt/2,kt=1e-6,xt=kt*kt,Tt=bt/180,St=180/bt;function Et(t){return 0<t?1:t<0?-1:0}function Ot(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Pt(t){return 1<t?0:t<-1?bt:Math.acos(t)}function Nt(t){return 1<t?Ct:t<-1?-Ct:Math.asin(t)}function Mt(t){return((t=Math.exp(t))+1/t)/2}function Dt(t){return(t=Math.sin(t/2))*t}var At=Math.SQRT2;A.interpolateZoom=function(t,e){var r=t[0],s=t[1],o=t[2],n=e[0],i=e[1],a=e[2],l=n-r,u=i-s,c=l*l+u*u,h=Math.sqrt(c),f=(a*a-o*o+4*c)/(2*o*2*h),d=(a*a-o*o-4*c)/(2*a*2*h),p=Math.log(Math.sqrt(f*f+1)-f),g=Math.log(Math.sqrt(d*d+1)-d)-p,m=(g||Math.log(a/o))/At;function v(t){var e=t*m;if(g){var n=Mt(p),i=o/(2*h)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(At*e+p)-function(t){return((t=Math.exp(t))-1/t)/2}(p));return[r+i*l,s+i*u,o*n/Mt(At*e+p)]}return[r+t*l,s+t*u,o*Math.exp(At*e)]}return v.duration=1e3*m,v},A.behavior.zoom=function(){var e,n,i,r,b,s,o,a,l,w={x:0,y:0,k:1},u=[960,500],c=Rt,C="mousedown.zoom",h="mousemove.zoom",f="mouseup.zoom",k="touchstart.zoom",x=q(d,"zoomstart","zoom","zoomend");function d(t){t.on(C,M).on(Lt+".zoom",g).on("dblclick.zoom",m).on(k,D)}function T(t){return[(t[0]-w.x)/w.k,(t[1]-w.y)/w.k]}function S(t){w.k=Math.max(c[0],Math.min(c[1],t))}function E(t,e){e=function(t){return[t[0]*w.k+w.x,t[1]*w.k+w.y]}(e),w.x+=t[0]-e[0],w.y+=t[1]-e[1]}function p(){o&&o.domain(s.range().map(function(t){return(t-w.x)/w.k}).map(s.invert)),l&&l.domain(a.range().map(function(t){return(t-w.y)/w.k}).map(a.invert))}function O(t){t({type:"zoomstart"})}function P(t){p(),t({type:"zoom",scale:w.k,translate:[w.x,w.y]})}function N(t){t({type:"zoomend"})}function M(){var t=this,e=A.event.target,n=x.of(t,arguments),i=0,r=A.select(I).on(h,function(){i=1,E(A.mouse(t),s),P(n)}).on(f,function(){r.on(h,null).on(f,null),o(i&&A.event.target===e),N(n)}),s=T(A.mouse(t)),o=pt();ot.call(t),O(n)}function D(){var u,c=this,h=x.of(c,arguments),f={},d=0,r=".zoom-"+A.event.changedTouches[0].identifier,p="touchmove"+r,g="touchend"+r,m=[],s=A.select(c).on(C,null).on(k,t),o=pt();function v(){var t=A.touches(c);return u=w.k,t.forEach(function(t){t.identifier in f&&(f[t.identifier]=T(t))}),t}function t(){var t=A.event.target;A.select(t).on(p,y).on(g,_),m.push(t);for(var e=A.event.changedTouches,n=0,i=e.length;n<i;++n)f[e[n].identifier]=null;var r=v(),s=Date.now();if(1===r.length){if(s-b<500){var o=r[0],a=f[o.identifier];S(2*w.k),E(o,a),L(),P(h)}b=s}else if(1<r.length){o=r[0];var l=r[1],u=o[0]-l[0],c=o[1]-l[1];d=u*u+c*c}}function y(){for(var t,e,n,i,r=A.touches(c),s=0,o=r.length;s<o;++s,i=null)if(n=r[s],i=f[n.identifier]){if(e)break;t=n,e=i}if(i){var a=(a=n[0]-t[0])*a+(a=n[1]-t[1])*a,l=d&&Math.sqrt(a/d);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],S(l*u)}b=null,E(t,e),P(h)}function _(){if(A.event.touches.length){for(var t=A.event.changedTouches,e=0,n=t.length;e<n;++e)delete f[t[e].identifier];for(var i in f)return void v()}A.selectAll(m).on(r,null),s.on(C,M).on(k,D),o(),N(h)}ot.call(c),t(),O(h)}function g(){var t=x.of(this,arguments);r?clearTimeout(r):(e=T(n=i||A.mouse(this)),ot.call(this),O(t)),r=setTimeout(function(){r=null,N(t)},50),L(),S(Math.pow(2,.002*It())*w.k),E(n,e),P(t)}function m(){var t=x.of(this,arguments),e=A.mouse(this),n=T(e),i=Math.log(w.k)/Math.LN2;O(t),S(Math.pow(2,A.event.shiftKey?Math.ceil(i)-1:Math.floor(i)+1)),E(e,n),P(t),N(t)}return d.event=function(t){t.each(function(){var a=x.of(this,arguments),e=w;Ta?A.select(this).transition().each("start.zoom",function(){w=this.__chart__||{x:0,y:0,k:1},O(a)}).tween("zoom:zoom",function(){var i=u[0],t=u[1],r=i/2,s=t/2,o=A.interpolateZoom([(r-w.x)/w.k,(s-w.y)/w.k,i/w.k],[(r-e.x)/e.k,(s-e.y)/e.k,i/e.k]);return function(t){var e=o(t),n=i/e[2];this.__chart__=w={x:r-e[0]*n,y:s-e[1]*n,k:n},P(a)}}).each("end.zoom",function(){N(a)}):(this.__chart__=w,O(a),P(a),N(a))})},d.translate=function(t){return arguments.length?(w={x:+t[0],y:+t[1],k:w.k},p(),d):[w.x,w.y]},d.scale=function(t){return arguments.length?(w={x:w.x,y:w.y,k:+t},p(),d):w.k},d.scaleExtent=function(t){return arguments.length?(c=null==t?Rt:[+t[0],+t[1]],d):c},d.center=function(t){return arguments.length?(i=t&&[+t[0],+t[1]],d):i},d.size=function(t){return arguments.length?(u=t&&[+t[0],+t[1]],d):u},d.x=function(t){return arguments.length?(s=(o=t).copy(),w={x:0,y:0,k:1},d):o},d.y=function(t){return arguments.length?(a=(l=t).copy(),w={x:0,y:0,k:1},d):l},A.rebind(d,x,"on")};var It,Rt=[0,1/0],Lt="onwheel"in i?(It=function(){return-A.event.deltaY*(A.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(It=function(){return A.event.wheelDelta},"mousewheel"):(It=function(){return-A.event.detail},"MozMousePixelScroll");function qt(){}function jt(t,e,n){return this instanceof jt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof jt?new jt(t.h,t.s,t.l):oe(""+t,ae,jt):new jt(t,e,n)}(A.color=qt).prototype.toString=function(){return this.rgb()+""};var zt=(A.hsl=jt).prototype=new qt;function Ft(t,e,n){var i,r;function s(t){return Math.round(255*function(t){return 360<t?t-=360:t<0&&(t+=360),t<60?i+(r-i)*t/60:t<180?r:t<240?i+(r-i)*(240-t)/60:i}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:1<e?1:e,i=2*(n=n<0?0:1<n?1:n)-(r=n<=.5?n*(1+e):n+e-n*e),new ee(s(t+120),s(t),s(t-120))}function Ht(t,e,n){return this instanceof Ht?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Ht?new Ht(t.h,t.c,t.l):Jt(t instanceof $t?t.l:(t=le((t=A.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Ht(t,e,n)}zt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new jt(this.h,this.s,this.l/t)},zt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new jt(this.h,this.s,t*this.l)},zt.rgb=function(){return Ft(this.h,this.s,this.l)};var Bt=(A.hcl=Ht).prototype=new qt;function Ut(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new $t(n,Math.cos(t*=Tt)*e,Math.sin(t)*e)}function $t(t,e,n){return this instanceof $t?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof $t?new $t(t.l,t.a,t.b):t instanceof Ht?Ut(t.l,t.c,t.h):le((t=ee(t)).r,t.g,t.b):new $t(t,e,n)}Bt.brighter=function(t){return new Ht(this.h,this.c,Math.min(100,this.l+Wt*(arguments.length?t:1)))},Bt.darker=function(t){return new Ht(this.h,this.c,Math.max(0,this.l-Wt*(arguments.length?t:1)))},Bt.rgb=function(){return Ut(this.h,this.c,this.l).rgb()},A.lab=$t;var Wt=18,Vt=.95047,Yt=1,Kt=1.08883,Gt=$t.prototype=new qt;function Qt(t,e,n){var i=(t+16)/116,r=i+e/500,s=i-n/200;return new ee(te(3.2404542*(r=Xt(r)*Vt)-1.5371385*(i=Xt(i)*Yt)-.4985314*(s=Xt(s)*Kt)),te(-.969266*r+1.8760108*i+.041556*s),te(.0556434*r-.2040259*i+1.0572252*s))}function Jt(t,e,n){return 0<t?new Ht(Math.atan2(n,e)*St,Math.sqrt(e*e+n*n),t):new Ht(NaN,NaN,t)}function Xt(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function Zt(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function te(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ee(t,e,n){return this instanceof ee?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ee?new ee(t.r,t.g,t.b):oe(""+t,ee,Ft):new ee(t,e,n)}function ne(t){return new ee(t>>16,t>>8&255,255&t)}function ie(t){return ne(t)+""}Gt.brighter=function(t){return new $t(Math.min(100,this.l+Wt*(arguments.length?t:1)),this.a,this.b)},Gt.darker=function(t){return new $t(Math.max(0,this.l-Wt*(arguments.length?t:1)),this.a,this.b)},Gt.rgb=function(){return Qt(this.l,this.a,this.b)};var re=(A.rgb=ee).prototype=new qt;function se(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function oe(t,e,n){var i,r,s,o=0,a=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(ce(r[0]),ce(r[1]),ce(r[2]))}return(s=he.get(t))?e(s.r,s.g,s.b):(null==t||"#"!==t.charAt(0)||isNaN(s=parseInt(t.substring(1),16))||(4===t.length?(o=(3840&s)>>4,o|=o>>4,a=240&s,a|=a>>4,l=15&s,l|=l<<4):7===t.length&&(o=(16711680&s)>>16,a=(65280&s)>>8,l=255&s)),e(o,a,l))}function ae(t,e,n){var i,r,s=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),a=o-s,l=(o+s)/2;return a?(r=l<.5?a/(o+s):a/(2-o-s),i=t==o?(e-n)/a+(e<n?6:0):e==o?(n-t)/a+2:(t-e)/a+4,i*=60):(i=NaN,r=0<l&&l<1?0:i),new jt(i,r,l)}function le(t,e,n){var i=Zt((.4124564*(t=ue(t))+.3575761*(e=ue(e))+.1804375*(n=ue(n)))/Vt),r=Zt((.2126729*t+.7151522*e+.072175*n)/Yt);return $t(116*r-16,500*(i-r),200*(r-Zt((.0193339*t+.119192*e+.9503041*n)/Kt)))}function ue(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ce(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}re.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b;return e||n||i?(e&&e<30&&(e=30),n&&n<30&&(n=30),i&&i<30&&(i=30),new ee(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new ee(30,30,30)},re.darker=function(t){return new ee((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},re.hsl=function(){return ae(this.r,this.g,this.b)},re.toString=function(){return"#"+se(this.r)+se(this.g)+se(this.b)};var he=A.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function fe(t){return"function"==typeof t?t:function(){return t}}function de(t){return t}function pe(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),ge(t,e,i,n)}}function ge(r,s,n,t){var o={},a=A.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;function e(){var t,e=u.status;if(!e&&u.responseText||200<=e&&e<300||304===e){try{t=n.call(o,u)}catch(t){return void a.error.call(o,t)}a.load.call(o,t)}else a.error.call(o,u)}return!I.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(r)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=e:u.onreadystatechange=function(){3<u.readyState&&e()},u.onprogress=function(t){var e=A.event;A.event=t;try{a.progress.call(o,u)}finally{A.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(s=null==t?null:t+"",o):s},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(h(arguments)))}}),o.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),u.open(t,r,!0),null==s||"accept"in l||(l.accept=s+",*/*"),u.setRequestHeader)for(var i in l)u.setRequestHeader(i,l[i]);return null!=s&&u.overrideMimeType&&u.overrideMimeType(s),null!=c&&(u.responseType=c),null!=n&&o.on("error",n).on("load",function(t){n(null,t)}),a.beforesend.call(o,u),u.send(null==e?null:e),o},o.abort=function(){return u.abort(),o},A.rebind(o,a,"on"),null==t?o:o.get(function(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}(t))}he.forEach(function(t,e){he.set(t,ne(e))}),A.functor=fe,A.xhr=pe(de),A.dsv=function(r,s){var e=new RegExp('["'+r+"\n]"),f=r.charCodeAt(0);function o(t,e,n){arguments.length<3&&(n=e,e=null);var i=ge(t,s,null==e?a:l(e),n);return i.row=function(t){return arguments.length?i.response(null==(e=t)?a:l(t)):e},i}function a(t){return o.parse(t.responseText)}function l(e){return function(t){return o.parse(t.responseText,e)}}function n(t){return t.map(u).join(r)}function u(t){return e.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return o.parse=function(t,i){var r;return o.parseRows(t,function(t,e){if(r)return r(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=i?function(t,e){return i(n(t),e)}:n})},o.parseRows=function(r,t){var e,s,o={},a={},n=[],l=r.length,u=0,i=0;function c(){if(l<=u)return a;if(s)return s=!1,o;var t=u;if(34===r.charCodeAt(t)){for(var e=t;e++<l;)if(34===r.charCodeAt(e)){if(34!==r.charCodeAt(e+1))break;++e}return u=e+2,13===(n=r.charCodeAt(e+1))?(s=!0,10===r.charCodeAt(e+2)&&++u):10===n&&(s=!0),r.substring(t+1,e).replace(/""/g,'"')}for(;u<l;){var n,i=1;if(10===(n=r.charCodeAt(u++)))s=!0;else if(13===n)s=!0,10===r.charCodeAt(u)&&(++u,++i);else if(n!==f)continue;return r.substring(t,u-i)}return r.substring(t)}for(;(e=c())!==a;){for(var h=[];e!==o&&e!==a;)h.push(e),e=c();t&&!(h=t(h,i++))||n.push(h)}return n},o.format=function(t){if(Array.isArray(t[0]))return o.formatRows(t);var n=new C,i=[];return t.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(u).join(r)].concat(t.map(function(e){return i.map(function(t){return u(e[t])}).join(r)})).join("\n")},o.formatRows=function(t){return t.map(n).join("\n")},o},A.csv=A.dsv(",","text/csv"),A.tsv=A.dsv("\t","text/tab-separated-values"),A.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=P().changedTouches),e)for(var i,r=0,s=e.length;r<s;++r)if((i=e[r]).identifier===n)return mt(t,i)};var me,ve,ye,_e,be,we=I[x(I,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Ce(){var t=ke(),e=xe()-t;24<e?(isFinite(e)&&(clearTimeout(_e),_e=setTimeout(Ce,e)),ye=0):(ye=1,we(Ce))}function ke(){var t=Date.now();for(be=me;be;)t>=be.t&&(be.f=be.c(t-be.t)),be=be.n;return t}function xe(){for(var t,e=me,n=1/0;e;)e=e.f?t?t.n=e.n:me=e.n:(e.t<n&&(n=e.t),(t=e).n);return ve=t,n}function Te(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}A.timer=function(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var r={c:t,t:n+e,f:!1,n:null};ve?ve.n=r:me=r,ve=r,ye||(_e=clearTimeout(_e),ye=1,we(Ce))},A.timer.flush=function(){ke(),xe()},A.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Se=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*R(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}});A.formatPrefix=function(t,e){var n=0;return t&&(t<0&&(t*=-1),e&&(t=A.round(t,Te(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Se[8+n/3]};var Ee=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Oe=A.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=A.round(t,Te(t,e))).toFixed(Math.max(0,Math.min(20,Te(t*(1+1e-15),e))))}});function Pe(t){return t+""}var Ne=A.time={},Me=Date;function De(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}De.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ae.setUTCDate.apply(this._,arguments)},setDay:function(){Ae.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ae.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ae.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ae.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ae.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ae.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ae.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ae.setTime.apply(this._,arguments)}};var Ae=Date.prototype;function Ie(i,s,o){function t(t){var e=i(t),n=r(e,1);return t-e<n-t?e:n}function a(t){return s(t=i(new Me(t-1)),1),t}function r(t,e){return s(t=new Me(+t),e),t}function l(t,e,n){var i=a(t),r=[];if(1<n)for(;i<e;)o(i)%n||r.push(new Date(+i)),s(i,1);else for(;i<e;)r.push(new Date(+i)),s(i,1);return r}(i.floor=i).round=t,i.ceil=a,i.offset=r,i.range=l;var e=i.utc=Re(i);return(e.floor=e).round=Re(t),e.ceil=Re(a),e.offset=Re(r),e.range=function(t,e,n){try{var i=new(Me=De);return i._=t,l(i,e,n)}finally{Me=Date}},i}function Re(i){return function(t,e){try{var n=new(Me=De);return n._=t,i(n,e)._}finally{Me=Date}}}Ne.year=Ie(function(t){return(t=Ne.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Ne.years=Ne.year.range,Ne.years.utc=Ne.year.utc.range,Ne.day=Ie(function(t){var e=new Me(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Ne.days=Ne.day.range,Ne.days.utc=Ne.day.utc.range,Ne.dayOfYear=function(t){var e=Ne.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=Ne[t]=Ie(function(t){return(t=Ne.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=Ne.year(t).getDay();return Math.floor((Ne.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});Ne[t+"s"]=e.range,Ne[t+"s"].utc=e.utc.range,Ne[t+"OfYear"]=function(t){var e=Ne.year(t).getDay();return Math.floor((Ne.dayOfYear(t)+(e+n)%7)/7)}}),Ne.week=Ne.sunday,Ne.weeks=Ne.sunday.range,Ne.weeks.utc=Ne.sunday.utc.range,Ne.weekOfYear=Ne.sundayOfYear;var Le={"-":"",_:" ",0:"0"},qe=/^\s*\d+/,je=/^%/;function ze(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function Fe(t){return new RegExp("^(?:"+t.map(A.requote).join("|")+")","i")}function He(t){for(var e=new _,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Be(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ue(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n));return i?(t.U=+i[0],n+i[0].length):-1}function $e(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n));return i?(t.W=+i[0],n+i[0].length):-1}function We(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Ve(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.y=function(t){return t+(68<t?1900:2e3)}(+i[0]),n+i[0].length):-1}function Ye(t,e,n){return/^[+-]\d{4}$/.test(e=e.substring(n,n+5))?(t.Z=-e,n+5):-1}function Ke(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Ge(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Qe(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function Je(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Xe(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Ze(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function tn(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function en(t){var e=t.getTimezoneOffset(),n=0<e?"-":"+",i=~~(R(e)/60),r=R(e)%60;return n+ze(i,"0",2)+ze(r,"0",2)}function nn(t,e,n){je.lastIndex=0;var i=je.exec(e.substring(n,n+1));return i?n+i[0].length:-1}function rn(i){for(var t=i.length,e=-1;++e<t;)i[e][0]=this(i[e][0]);return function(t){for(var e=0,n=i[e];!n[1](t);)n=i[++e];return n[0](t)}}A.locale=function(t){return{numberFormat:function(t){var C=t.decimal,s=t.thousands,o=t.grouping,i=t.currency,k=o?function(t){for(var e=t.length,n=[],i=0,r=o[0];0<e&&0<r;)n.push(t.substring(e-=r,e+r)),r=o[i=(i+1)%o.length];return n.reverse().join(s)}:de;return function(t){var e=Ee.exec(t),u=e[1]||" ",c=e[2]||">",h=e[3]||"",n=e[4]||"",f=e[5],d=+e[6],p=e[7],g=e[8],m=e[9],v=1,y="",_="",b=!1;switch(g&&(g=+g.substring(1)),(f||"0"===u&&"="===c)&&(f=u="0",c="=",p&&(d-=Math.floor((d-1)/4))),m){case"n":p=!0,m="g";break;case"%":v=100,_="%",m="f";break;case"p":v=100,_="%",m="r";break;case"b":case"o":case"x":case"X":"#"===n&&(y="0"+m.toLowerCase());case"c":case"d":b=!0,g=0;break;case"s":v=-1,m="r"}"$"===n&&(y=i[0],_=i[1]),"r"!=m||g||(m="g"),null!=g&&("g"==m?g=Math.max(1,Math.min(21,g)):"e"!=m&&"f"!=m||(g=Math.max(0,Math.min(20,g)))),m=Oe.get(m)||Pe;var w=f&&p;return function(t){var e=_;if(b&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):h;if(v<0){var i=A.formatPrefix(t,g);t=i.scale(t),e=i.symbol+_}else t*=v;var r=(t=m(t,g)).lastIndexOf("."),s=r<0?t:t.substring(0,r),o=r<0?"":C+t.substring(r+1);!f&&p&&(s=k(s));var a=y.length+s.length+o.length+(w?0:n.length),l=a<d?new Array(a=d-a+1).join(u):"";return w&&(s=k(l+s)),n+=y,t=s+o,("<"===c?n+t+l:">"===c?l+n+t:"^"===c?l.substring(0,a>>=1)+n+t+l.substring(a):n+(w?t:l+t))+e}}}(t),timeFormat:function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths;function u(a){var l=a.length;function t(t){for(var e,n,i,r=[],s=-1,o=0;++s<l;)37===a.charCodeAt(s)&&(r.push(a.substring(o,s)),null!=(n=Le[e=a.charAt(++s)])&&(e=a.charAt(++s)),(i=b[e])&&(e=i(t,null==n?"e"===e?" ":"0":n)),r.push(e),o=s+1);return r.push(a.substring(o,s)),r.join("")}return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(e,a,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var n=null!=e.Z&&Me!==De,i=new(n?De:Me);return"j"in e?i.setFullYear(e.y,0,e.j):"w"in e&&("W"in e||"U"in e)?(i.setFullYear(e.y,0,1),i.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(i.getDay()+5)%7:e.w+7*e.U-(i.getDay()+6)%7)):i.setFullYear(e.y,e.m,e.d),i.setHours(e.H+Math.floor(e.Z/100),e.M+e.Z%100,e.S,e.L),n?i._:i},t.toString=function(){return a},t}function c(t,e,n,i){for(var r,s,o,a=0,l=e.length,u=n.length;a<l;){if(u<=i)return-1;if(37===(r=e.charCodeAt(a++))){if(o=e.charAt(a++),!(s=w[o in Le?e.charAt(a++):o])||(i=s(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}u.multi=(u.utc=function(t){var n=u(t);function e(t){try{var e=new(Me=De);return e._=t,n(e)}finally{Me=Date}}return e.parse=function(t){try{Me=De;var e=n.parse(t);return e&&e._}finally{Me=Date}},e.toString=n.toString,e}).multi=rn;var h=A.map(),f=Fe(s),d=He(s),p=Fe(o),g=He(o),m=Fe(a),v=He(a),y=Fe(l),_=He(l);r.forEach(function(t,e){h.set(t.toLowerCase(),e)});var b={a:function(t){return o[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:u(e),d:function(t,e){return ze(t.getDate(),e,2)},e:function(t,e){return ze(t.getDate(),e,2)},H:function(t,e){return ze(t.getHours(),e,2)},I:function(t,e){return ze(t.getHours()%12||12,e,2)},j:function(t,e){return ze(1+Ne.dayOfYear(t),e,3)},L:function(t,e){return ze(t.getMilliseconds(),e,3)},m:function(t,e){return ze(t.getMonth()+1,e,2)},M:function(t,e){return ze(t.getMinutes(),e,2)},p:function(t){return r[+(12<=t.getHours())]},S:function(t,e){return ze(t.getSeconds(),e,2)},U:function(t,e){return ze(Ne.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return ze(Ne.mondayOfYear(t),e,2)},x:u(n),X:u(i),y:function(t,e){return ze(t.getFullYear()%100,e,2)},Y:function(t,e){return ze(t.getFullYear()%1e4,e,4)},Z:en,"%":function(){return"%"}},w={a:function(t,e,n){p.lastIndex=0;var i=p.exec(e.substring(n));return i?(t.w=g.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){f.lastIndex=0;var i=f.exec(e.substring(n));return i?(t.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){y.lastIndex=0;var i=y.exec(e.substring(n));return i?(t.m=_.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){m.lastIndex=0;var i=m.exec(e.substring(n));return i?(t.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,n){return c(t,b.c.toString(),e,n)},d:Ge,e:Ge,H:Je,I:Je,j:Qe,L:tn,m:Ke,M:Xe,p:function(t,e,n){var i=h.get(e.substring(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:Ze,U:Ue,w:Be,W:$e,x:function(t,e,n){return c(t,b.x.toString(),e,n)},X:function(t,e,n){return c(t,b.X.toString(),e,n)},y:Ve,Y:We,Z:Ye,"%":nn};return u}(t)}};var sn=A.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function on(){}A.format=sn.numberFormat,A.geo={},on.prototype={s:0,t:0,add:function(t){ln(t,this.t,an),ln(an.s,this.s,this),this.s?this.t+=an.t:this.s=an.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var an=new on;function ln(t,e,n){var i=n.s=t+e,r=i-t,s=i-r;n.t=t-s+(e-r)}function un(t,e){t&&hn.hasOwnProperty(t.type)&&hn[t.type](t,e)}A.geo.stream=function(t,e){t&&cn.hasOwnProperty(t.type)?cn[t.type](t,e):un(t,e)};var cn={Feature:function(t,e){un(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)un(n[i].geometry,e)}},hn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){fn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)fn(n[i],e,0)},Polygon:function(t,e){dn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)dn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)un(n[i],e)}};function fn(t,e,n){var i,r=-1,s=t.length-n;for(e.lineStart();++r<s;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function dn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)fn(t[n],e,1);e.polygonEnd()}A.geo.area=function(t){return pn=0,A.geo.stream(t,zn),pn};var pn,gn,mn,vn,yn,_n,bn,wn,Cn,kn,xn,Tn,Sn,En,On,Pn,Nn,Mn,Dn,An,In,Rn,Ln,qn,jn=new on,zn={sphere:function(){pn+=4*bt},point:S,lineStart:S,lineEnd:S,polygonStart:function(){jn.reset(),zn.lineStart=Fn},polygonEnd:function(){var t=2*jn;pn+=t<0?4*bt+t:t,zn.lineStart=zn.lineEnd=zn.point=S}};function Fn(){var n,i,c,h,f;function r(t,e){e=e*Tt/2+bt/4;var n=(t*=Tt)-c,i=0<=n?1:-1,r=i*n,s=Math.cos(e),o=Math.sin(e),a=f*o,l=h*s+a*Math.cos(r),u=a*i*Math.sin(r);jn.add(Math.atan2(u,l)),c=t,h=s,f=o}zn.point=function(t,e){zn.point=r,c=(n=t)*Tt,h=Math.cos(e=(i=e)*Tt/2+bt/4),f=Math.sin(e)},zn.lineEnd=function(){r(n,i)}}function Hn(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Bn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Un(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function $n(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Wn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Vn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Yn(t){return[Math.atan2(t[1],t[0]),Nt(t[2])]}function Kn(t,e){return R(t[0]-e[0])<kt&&R(t[1]-e[1])<kt}function Gn(t,e){xn.push(Tn=[gn=t,vn=t]),e<mn&&(mn=e),yn<e&&(yn=e)}function Qn(t,e){var n=Hn([t*Tt,e*Tt]);if(Cn){var i=Un(Cn,n),r=Un([i[1],-i[0],0],i);Vn(r),r=Yn(r);var s=t-_n,o=0<s?1:-1,a=r[0]*St*o,l=180<R(s);if(l^(o*_n<a&&a<o*t)){var u=r[1]*St;yn<u&&(yn=u)}else if(l^(o*_n<(a=(a+360)%360-180)&&a<o*t)){(u=-r[1]*St)<mn&&(mn=u)}else e<mn&&(mn=e),yn<e&&(yn=e);l?t<_n?ni(gn,t)>ni(gn,vn)&&(vn=t):ni(t,vn)>ni(gn,vn)&&(gn=t):gn<=vn?(t<gn&&(gn=t),vn<t&&(vn=t)):_n<t?ni(gn,t)>ni(gn,vn)&&(vn=t):ni(t,vn)>ni(gn,vn)&&(gn=t)}else Gn(t,e);Cn=n,_n=t}function Jn(){Sn.point=Qn}function Xn(){Tn[0]=gn,Tn[1]=vn,Sn.point=Gn,Cn=null}function Zn(t,e){if(Cn){var n=t-_n;kn+=180<R(n)?n+(0<n?360:-360):n}else bn=t,wn=e;zn.point(t,e),Qn(t,e)}function ti(){zn.lineStart()}function ei(){Zn(bn,wn),zn.lineEnd(),R(kn)>kt&&(gn=-(vn=180)),Tn[0]=gn,Tn[1]=vn,Cn=null}function ni(t,e){return(e-=t)<0?e+360:e}function ii(t,e){return t[0]-e[0]}function ri(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}A.geo.bounds=(Sn={point:Gn,lineStart:Jn,lineEnd:Xn,polygonStart:function(){Sn.point=Zn,Sn.lineStart=ti,Sn.lineEnd=ei,kn=0,zn.polygonStart()},polygonEnd:function(){zn.polygonEnd(),Sn.point=Gn,Sn.lineStart=Jn,Sn.lineEnd=Xn,jn<0?(gn=-(vn=180),mn=-(yn=90)):kt<kn?yn=90:kn<-kt&&(mn=-90),Tn[0]=gn,Tn[1]=vn}},function(t){if(yn=vn=-(gn=mn=1/0),xn=[],A.geo.stream(t,Sn),r=xn.length){xn.sort(ii);for(var e=1,n=[a=xn[0]];e<r;++e)ri((s=xn[e])[0],a)||ri(s[1],a)?(ni(a[0],s[1])>ni(a[0],a[1])&&(a[1]=s[1]),ni(s[0],a[1])>ni(a[0],a[1])&&(a[0]=s[0])):n.push(a=s);for(var i,r,s,o=-1/0,a=(e=0,n[r=n.length-1]);e<=r;a=s,++e)s=n[e],(i=ni(a[1],s[0]))>o&&(o=i,gn=s[0],vn=a[1])}return xn=Tn=null,gn===1/0||mn===1/0?[[NaN,NaN],[NaN,NaN]]:[[gn,mn],[vn,yn]]}),A.geo.centroid=function(t){En=On=Pn=Nn=Mn=Dn=An=In=Rn=Ln=qn=0,A.geo.stream(t,si);var e=Rn,n=Ln,i=qn,r=e*e+n*n+i*i;return r<xt&&(e=Dn,n=An,i=In,On<kt&&(e=Pn,n=Nn,i=Mn),(r=e*e+n*n+i*i)<xt)?[NaN,NaN]:[Math.atan2(n,e)*St,Nt(i/Math.sqrt(r))*St]};var si={sphere:S,point:oi,lineStart:li,lineEnd:ui,polygonStart:function(){si.lineStart=ci},polygonEnd:function(){si.lineStart=li}};function oi(t,e){t*=Tt;var n=Math.cos(e*=Tt);ai(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ai(t,e,n){Pn+=(t-Pn)/++En,Nn+=(e-Nn)/En,Mn+=(n-Mn)/En}function li(){var a,l,u;function i(t,e){t*=Tt;var n=Math.cos(e*=Tt),i=n*Math.cos(t),r=n*Math.sin(t),s=Math.sin(e),o=Math.atan2(Math.sqrt((o=l*s-u*r)*o+(o=u*i-a*s)*o+(o=a*r-l*i)*o),a*i+l*r+u*s);On+=o,Dn+=o*(a+(a=i)),An+=o*(l+(l=r)),In+=o*(u+(u=s)),ai(a,l,u)}si.point=function(t,e){t*=Tt;var n=Math.cos(e*=Tt);a=n*Math.cos(t),l=n*Math.sin(t),u=Math.sin(e),si.point=i,ai(a,l,u)}}function ui(){si.point=oi}function ci(){var i,r,d,p,g;function s(t,e){t*=Tt;var n=Math.cos(e*=Tt),i=n*Math.cos(t),r=n*Math.sin(t),s=Math.sin(e),o=p*s-g*r,a=g*i-d*s,l=d*r-p*i,u=Math.sqrt(o*o+a*a+l*l),c=d*i+p*r+g*s,h=u&&-Pt(c)/u,f=Math.atan2(u,c);Rn+=h*o,Ln+=h*a,qn+=h*l,On+=f,Dn+=f*(d+(d=i)),An+=f*(p+(p=r)),In+=f*(g+(g=s)),ai(d,p,g)}si.point=function(t,e){i=t,r=e,si.point=s,t*=Tt;var n=Math.cos(e*=Tt);d=n*Math.cos(t),p=n*Math.sin(t),g=Math.sin(e),ai(d,p,g)},si.lineEnd=function(){s(i,r),si.lineEnd=ui,si.point=oi}}function hi(){return!0}function fi(t,e,n,i,a){var l=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(Kn(n,i)){a.lineStart();for(var r=0;r<e;++r)a.point((n=t[r])[0],n[1]);a.lineEnd()}else{var s=new pi(n,t,null,!0),o=new pi(n,null,s,!1);s.o=o,l.push(s),u.push(o),o=new pi(i,null,s=new pi(i,t,null,!1),!0),s.o=o,l.push(s),u.push(o)}}}),u.sort(e),di(l),di(u),l.length){for(var r=0,s=n,o=u.length;r<o;++r)u[r].e=s=!s;for(var c,h,f=l[0];;){for(var d=f,p=!0;d.v;)if((d=d.n)===f)return;c=d.z,a.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(r=0,o=c.length;r<o;++r)a.point((h=c[r])[0],h[1]);else i(d.x,d.n.x,1,a);d=d.n}else{if(p)for(r=(c=d.p.z).length-1;0<=r;--r)a.point((h=c[r])[0],h[1]);else i(d.x,d.p.x,-1,a);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);a.lineEnd()}}}function di(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function pi(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function gi(y,_,b,w){return function(i,o){var a,r=_(o),e=i.invert(w[0],w[1]),n={point:s,lineStart:l,lineEnd:u,polygonStart:function(){n.point=g,n.lineStart=m,n.lineEnd=v,a=[],c=[]},polygonEnd:function(){n.point=s,n.lineStart=l,n.lineEnd=u,a=A.merge(a);var t=function(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],s=0,o=0;jn.reset();for(var a=0,l=e.length;a<l;++a){var u=e[a],c=u.length;if(c)for(var h=u[0],f=h[0],d=h[1]/2+bt/4,p=Math.sin(d),g=Math.cos(d),m=1;;){m===c&&(m=0);var v=(t=u[m])[0],y=t[1]/2+bt/4,_=Math.sin(y),b=Math.cos(y),w=v-f,C=0<=w?1:-1,k=C*w,x=bt<k,T=p*_;if(jn.add(Math.atan2(T*C*Math.sin(k),g*b+T*Math.cos(k))),s+=x?w+C*wt:w,x^n<=f^n<=v){var S=Un(Hn(h),Hn(t));Vn(S);var E=Un(r,S);Vn(E);var O=(x^0<=w?-1:1)*Nt(E[2]);(O<i||i===O&&(S[0]||S[1]))&&(o+=x^0<=w?1:-1)}if(!m++)break;f=v,p=_,g=b,h=t}}return(s<-kt||s<kt&&jn<0)^1&o}(e,c);a.length?(p||(o.polygonStart(),p=!0),fi(a,yi,t,b,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),b(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),a=c=null},sphere:function(){o.polygonStart(),o.lineStart(),b(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function s(t,e){var n=i(t,e);y(t=n[0],e=n[1])&&o.point(t,e)}function t(t,e){var n=i(t,e);r.point(n[0],n[1])}function l(){n.point=t,r.lineStart()}function u(){n.point=s,r.lineEnd()}var c,h,f=vi(),d=_(f),p=!1;function g(t,e){h.push([t,e]);var n=i(t,e);d.point(n[0],n[1])}function m(){d.lineStart(),h=[]}function v(){g(h[0][0],h[0][1]),d.lineEnd();var t,e=d.clean(),n=f.buffer(),i=n.length;if(h.pop(),c.push(h),h=null,i)if(1&e){var r,s=-1;if(0<(i=(t=n[0]).length-1)){for(p||(o.polygonStart(),p=!0),o.lineStart();++s<i;)o.point((r=t[s])[0],r[1]);o.lineEnd()}}else 1<i&&2&e&&n.push(n.pop().concat(n.shift())),a.push(n.filter(mi))}return n}}function mi(t){return 1<t.length}function vi(){var n,e=[];return{lineStart:function(){e.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:S,buffer:function(){var t=e;return e=[],n=null,t},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function yi(t,e){return((t=t.x)[0]<0?t[1]-Ct-kt:Ct-t[1])-((e=e.x)[0]<0?e[1]-Ct-kt:Ct-e[1])}var _i=gi(hi,function(r){var s,o=NaN,a=NaN,l=NaN;return{lineStart:function(){r.lineStart(),s=1},point:function(t,e){var n=0<t?bt:-bt,i=R(t-o);R(i-bt)<kt?(r.point(o,a=0<(a+e)/2?Ct:-Ct),r.point(l,a),r.lineEnd(),r.lineStart(),r.point(n,a),r.point(t,a),s=0):l!==n&&bt<=i&&(R(o-l)<kt&&(o-=l*kt),R(t-n)<kt&&(t-=n*kt),a=function(t,e,n,i){var r,s,o=Math.sin(t-n);return R(o)>kt?Math.atan((Math.sin(e)*(s=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*s*o)):(e+i)/2}(o,a,t,e),r.point(l,a),r.lineEnd(),r.lineStart(),r.point(n,a),s=0),r.point(o=t,a=e),l=n},lineEnd:function(){r.lineEnd(),o=a=NaN},clean:function(){return 2-s}}},function(t,e,n,i){var r;if(null==t)r=n*Ct,i.point(-bt,r),i.point(0,r),i.point(bt,r),i.point(bt,0),i.point(bt,-r),i.point(0,-r),i.point(-bt,-r),i.point(-bt,0),i.point(-bt,r);else if(R(t[0]-e[0])>kt){var s=t[0]<e[0]?bt:-bt;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])},[-bt,-bt/2]);function bi(c,h,f,d){return function(t){var e,n=t.a,i=t.b,r=n.x,s=n.y,o=0,a=1,l=i.x-r,u=i.y-s;if(e=c-r,l||!(0<e)){if(e/=l,l<0){if(e<o)return;e<a&&(a=e)}else if(0<l){if(a<e)return;o<e&&(o=e)}if(e=f-r,l||!(e<0)){if(e/=l,l<0){if(a<e)return;o<e&&(o=e)}else if(0<l){if(e<o)return;e<a&&(a=e)}if(e=h-s,u||!(0<e)){if(e/=u,u<0){if(e<o)return;e<a&&(a=e)}else if(0<u){if(a<e)return;o<e&&(o=e)}if(e=d-s,u||!(e<0)){if(e/=u,u<0){if(a<e)return;o<e&&(o=e)}else if(0<u){if(e<o)return;e<a&&(a=e)}return 0<o&&(t.a={x:r+o*l,y:s+o*u}),a<1&&(t.b={x:r+a*l,y:s+a*u}),t}}}}}}var wi=1e9;function Ci(b,w,C,k){return function(r){var i,c,s,o,a,l,u,h,f,d,p,g=r,t=vi(),m=bi(b,w,C,k),e={point:n,lineStart:function(){e.point=_,c&&c.push(s=[]);d=!0,f=!1,u=h=NaN},lineEnd:function(){i&&(_(o,a),l&&f&&t.rejoin(),i.push(t.buffer()));e.point=n,f&&r.lineEnd()},polygonStart:function(){r=t,i=[],c=[],p=!0},polygonEnd:function(){r=g,i=A.merge(i);var t=function(t){for(var e=0,n=c.length,i=t[1],r=0;r<n;++r)for(var s,o=1,a=c[r],l=a.length,u=a[0];o<l;++o)s=a[o],u[1]<=i?s[1]>i&&0<Ot(u,s,t)&&++e:s[1]<=i&&Ot(u,s,t)<0&&--e,u=s;return 0!==e}([b,k]),e=p&&t,n=i.length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),v(null,null,1,r),r.lineEnd()),n&&fi(i,T,t,v,r),r.polygonEnd()),i=c=s=null}};function v(t,e,n,i){var r=0,s=0;if(null==t||(r=x(t,n))!==(s=x(e,n))||S(t,e)<0^0<n)for(;i.point(0===r||3===r?b:C,1<r?k:w),(r=(r+n+4)%4)!==s;);else i.point(e[0],e[1])}function y(t,e){return b<=t&&t<=C&&w<=e&&e<=k}function n(t,e){y(t,e)&&r.point(t,e)}function _(t,e){var n=y(t=Math.max(-wi,Math.min(wi,t)),e=Math.max(-wi,Math.min(wi,e)));if(c&&s.push([t,e]),d)o=t,a=e,d=!1,(l=n)&&(r.lineStart(),r.point(t,e));else if(n&&f)r.point(t,e);else{var i={a:{x:u,y:h},b:{x:t,y:e}};m(i)?(f||(r.lineStart(),r.point(i.a.x,i.a.y)),r.point(i.b.x,i.b.y),n||r.lineEnd(),p=!1):n&&(r.lineStart(),r.point(t,e),p=!1)}u=t,h=e,f=n}return e};function x(t,e){return R(t[0]-b)<kt?0<e?0:3:R(t[0]-C)<kt?0<e?2:1:R(t[1]-w)<kt?0<e?1:0:0<e?3:2}function T(t,e){return S(t.x,e.x)}function S(t,e){var n=x(t,1),i=x(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function ki(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function xi(t){var e=0,n=bt/3,i=Ki(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*bt/180,n=t[1]*bt/180):[e/bt*180,n/bt*180]},r}function Ti(t,e){var n=Math.sin(t),i=(n+Math.sin(e))/2,r=1+n*(2*i-n),s=Math.sqrt(r)/i;function o(t,e){var n=Math.sqrt(r-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),s-n*Math.cos(t)]}return o.invert=function(t,e){var n=s-e;return[Math.atan2(t,n)/i,Nt((r-(t*t+n*n)*i*i)/(2*i))]},o}A.geo.clipExtent=function(){var e,n,i,r,s,o,a,l={stream:(a=function(t){return s&&(s.valid=!1),(s=o(t)).valid=!0,s},t.toString=function(){return a.toString()},t),extent:function(t){return arguments.length?(o=Ci(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),s&&(s.valid=!1,s=null),l):[[e,n],[i,r]]}};function t(t){return a.apply(this,arguments)}return l.extent([[0,0],[960,500]])},(A.geo.conicEqualArea=function(){return xi(Ti)}).raw=Ti,A.geo.albers=function(){return A.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},A.geo.albersUsa=function(){var i,r,s,o,a=A.geo.albers(),l=A.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=A.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){i=[t,e]}};function h(t){var e=t[0],n=t[1];return i=null,r(e,n),i||(s(e,n),i)||o(e,n),i}return h.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(.12<=r&&r<.234&&-.425<=i&&i<-.214?l:.166<=r&&r<.234&&-.214<=i&&i<-.115?u:a).invert(t)},h.stream=function(t){var n=a.stream(t),i=l.stream(t),r=u.stream(t);return{point:function(t,e){n.point(t,e),i.point(t,e),r.point(t,e)},sphere:function(){n.sphere(),i.sphere(),r.sphere()},lineStart:function(){n.lineStart(),i.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),i.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),i.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),i.polygonEnd(),r.polygonEnd()}}},h.precision=function(t){return arguments.length?(a.precision(t),l.precision(t),u.precision(t),h):a.precision()},h.scale=function(t){return arguments.length?(a.scale(t),l.scale(.35*t),u.scale(t),h.translate(a.translate())):a.scale()},h.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),n=+t[0],i=+t[1];return r=a.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(c).point,s=l.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+kt,i+.12*e+kt],[n-.214*e-kt,i+.234*e-kt]]).stream(c).point,o=u.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+kt,i+.166*e+kt],[n-.115*e-kt,i+.234*e-kt]]).stream(c).point,h},h.scale(1070)};var Si,Ei,Oi,Pi,Ni,Mi,Di={point:S,lineStart:S,lineEnd:S,polygonStart:function(){Ei=0,Di.lineStart=Ai},polygonEnd:function(){Di.lineStart=Di.lineEnd=Di.point=S,Si+=R(Ei/2)}};function Ai(){var n,i,r,s;function o(t,e){Ei+=s*t-r*e,r=t,s=e}Di.point=function(t,e){Di.point=o,n=r=t,i=s=e},Di.lineEnd=function(){o(n,i)}}var Ii={point:function(t,e){t<Oi&&(Oi=t);Ni<t&&(Ni=t);e<Pi&&(Pi=e);Mi<e&&(Mi=e)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S};function Ri(){var n=Li(4.5),i=[],r={point:t,lineStart:function(){r.point=e},lineEnd:o,polygonStart:function(){r.lineEnd=a},polygonEnd:function(){r.lineEnd=o,r.point=t},pointRadius:function(t){return n=Li(t),r},result:function(){if(i.length){var t=i.join("");return i=[],t}}};function t(t,e){i.push("M",t,",",e,n)}function e(t,e){i.push("M",t,",",e),r.point=s}function s(t,e){i.push("L",t,",",e)}function o(){r.point=t}function a(){i.push("Z")}return r}function Li(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var qi,ji={point:zi,lineStart:Fi,lineEnd:Hi,polygonStart:function(){ji.lineStart=Bi},polygonEnd:function(){ji.point=zi,ji.lineStart=Fi,ji.lineEnd=Hi}};function zi(t,e){Pn+=t,Nn+=e,++Mn}function Fi(){var s,o;function n(t,e){var n=t-s,i=e-o,r=Math.sqrt(n*n+i*i);Dn+=r*(s+t)/2,An+=r*(o+e)/2,In+=r,zi(s=t,o=e)}ji.point=function(t,e){ji.point=n,zi(s=t,o=e)}}function Hi(){ji.point=zi}function Bi(){var n,i,s,o;function r(t,e){var n=t-s,i=e-o,r=Math.sqrt(n*n+i*i);Dn+=r*(s+t)/2,An+=r*(o+e)/2,In+=r,Rn+=(r=o*t-s*e)*(s+t),Ln+=r*(o+e),qn+=3*r,zi(s=t,o=e)}ji.point=function(t,e){ji.point=r,zi(n=s=t,i=o=e)},ji.lineEnd=function(){r(n,i)}}function Ui(n){var i=4.5,r={point:t,lineStart:function(){r.point=e},lineEnd:o,polygonStart:function(){r.lineEnd=a},polygonEnd:function(){r.lineEnd=o,r.point=t},pointRadius:function(t){return i=t,r},result:S};function t(t,e){n.moveTo(t,e),n.arc(t,e,i,0,wt)}function e(t,e){n.moveTo(t,e),r.point=s}function s(t,e){n.lineTo(t,e)}function o(){r.point=t}function a(){n.closePath()}return r}function $i(P){var N=.5,M=Math.cos(30*Tt),w=16;function e(t){return(w?function(r){var n,i,s,o,a,l,u,c,h,f,d,p,g={point:t,lineStart:e,lineEnd:v,polygonStart:function(){r.polygonStart(),g.lineStart=y},polygonEnd:function(){r.polygonEnd(),g.lineStart=e}};function t(t,e){t=P(t,e),r.point(t[0],t[1])}function e(){c=NaN,g.point=m,r.lineStart()}function m(t,e){var n=Hn([t,e]),i=P(t,e);D(c,h,u,f,d,p,c=i[0],h=i[1],u=t,f=n[0],d=n[1],p=n[2],w,r),r.point(c,h)}function v(){g.point=t,r.lineEnd()}function y(){e(),g.point=_,g.lineEnd=b}function _(t,e){m(n=t,e),i=c,s=h,o=f,a=d,l=p,g.point=m}function b(){D(c,h,u,f,d,p,i,s,n,o,a,l,w,r),(g.lineEnd=v)()}return g}:function(n){return Vi(n,function(t,e){t=P(t,e),n.point(t[0],t[1])})})(t)}function D(t,e,n,i,r,s,o,a,l,u,c,h,f,d){var p=o-t,g=a-e,m=p*p+g*g;if(4*N<m&&f--){var v=i+u,y=r+c,_=s+h,b=Math.sqrt(v*v+y*y+_*_),w=Math.asin(_/=b),C=R(R(_)-1)<kt||R(n-l)<kt?(n+l)/2:Math.atan2(y,v),k=P(C,w),x=k[0],T=k[1],S=x-t,E=T-e,O=g*S-p*E;(N<O*O/m||.3<R((p*S+g*E)/m-.5)||i*u+r*c+s*h<M)&&(D(t,e,n,i,r,s,x,T,C,v/=b,y/=b,_,f,d),d.point(x,T),D(x,T,C,v,y,_,o,a,l,u,c,h,f,d))}}return e.precision=function(t){return arguments.length?(w=0<(N=t*t)&&16,e):Math.sqrt(N)},e}function Wi(t){this.stream=t}function Vi(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Yi(t){return Ki(function(){return t})()}function Ki(t){var n,e,i,r,s,o,a=$i(function(t,e){return[(t=n(t,e))[0]*l+r,s-t[1]*l]}),l=150,u=480,c=250,h=0,f=0,d=0,p=0,g=0,m=_i,v=de,y=null,_=null;function b(t){return[(t=i(t[0]*Tt,t[1]*Tt))[0]*l+r,s-t[1]*l]}function w(t){return(t=i.invert((t[0]-r)/l,(s-t[1])/l))&&[t[0]*St,t[1]*St]}function C(){i=ki(e=Xi(d,p,g),n);var t=n(h,f);return r=u-t[0]*l,s=c+t[1]*l,k()}function k(){return o&&(o.valid=!1,o=null),b}return b.stream=function(t){return o&&(o.valid=!1),(o=Gi(m(e,a(v(t))))).valid=!0,o},b.clipAngle=function(t){return arguments.length?(m=null==t?(y=t,_i):function(r){var S=Math.cos(r),d=0<S,p=R(S)>kt;return gi(g,function(a){var l,u,c,h,f;return{lineStart:function(){h=c=!1,f=1},point:function(t,e){var n,i=[t,e],r=g(t,e),s=d?r?0:v(t,e):r?v(t+(t<0?bt:-bt),e):0;if(!l&&(h=c=r)&&a.lineStart(),r!==c&&(n=m(l,i),(Kn(l,n)||Kn(i,n))&&(i[0]+=kt,i[1]+=kt,r=g(i[0],i[1]))),r!==c)f=0,r?(a.lineStart(),n=m(i,l),a.point(n[0],n[1])):(n=m(l,i),a.point(n[0],n[1]),a.lineEnd()),l=n;else if(p&&l&&d^r){var o;s&u||!(o=m(i,l,!0))||(f=0,d?(a.lineStart(),a.point(o[0][0],o[0][1]),a.point(o[1][0],o[1][1]),a.lineEnd()):(a.point(o[1][0],o[1][1]),a.lineEnd(),a.lineStart(),a.point(o[0][0],o[0][1])))}!r||l&&Kn(l,i)||a.point(i[0],i[1]),l=i,c=r,u=s},lineEnd:function(){c&&a.lineEnd(),l=null},clean:function(){return f|(h&&c)<<1}}},nr(r,6*Tt),d?[0,-r]:[-bt,r-bt]);function g(t,e){return Math.cos(t)*Math.cos(e)>S}function m(t,e,n){var i=[1,0,0],r=Un(Hn(t),Hn(e)),s=Bn(r,r),o=r[0],a=s-o*o;if(!a)return!n&&t;var l=S*s/a,u=-S*o/a,c=Un(i,r),h=Wn(i,l);$n(h,Wn(r,u));var f=c,d=Bn(h,f),p=Bn(f,f),g=d*d-p*(Bn(h,h)-1);if(!(g<0)){var m=Math.sqrt(g),v=Wn(f,(-d-m)/p);if($n(v,h),v=Yn(v),!n)return v;var y,_=t[0],b=e[0],w=t[1],C=e[1];b<_&&(y=_,_=b,b=y);var k=b-_,x=R(k-bt)<kt;if(!x&&C<w&&(y=w,w=C,C=y),x||k<kt?x?0<w+C^v[1]<(R(v[0]-_)<kt?w:C):w<=v[1]&&v[1]<=C:bt<k^(_<=v[0]&&v[0]<=b)){var T=Wn(f,(-d+m)/p);return $n(T,h),[v,Yn(T)]}}}function v(t,e){var n=d?r:bt-r,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}}((y=+t)*Tt),k()):y},b.clipExtent=function(t){return arguments.length?(v=(_=t)?Ci(t[0][0],t[0][1],t[1][0],t[1][1]):de,k()):_},b.scale=function(t){return arguments.length?(l=+t,C()):l},b.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],C()):[u,c]},b.center=function(t){return arguments.length?(h=t[0]%360*Tt,f=t[1]%360*Tt,C()):[h*St,f*St]},b.rotate=function(t){return arguments.length?(d=t[0]%360*Tt,p=t[1]%360*Tt,g=2<t.length?t[2]%360*Tt:0,C()):[d*St,p*St,g*St]},A.rebind(b,a,"precision"),function(){return n=t.apply(this,arguments),b.invert=n.invert&&w,C()}}function Gi(n){return Vi(n,function(t,e){n.point(t*Tt,e*Tt)})}function Qi(t,e){return[t,e]}function Ji(t,e){return[bt<t?t-wt:t<-bt?t+wt:t,e]}function Xi(t,e,n){return t?e||n?ki(tr(t),er(e,n)):tr(t):e||n?er(e,n):Ji}function Zi(n){return function(t,e){return[bt<(t+=n)?t-wt:t<-bt?t+wt:t,e]}}function tr(t){var e=Zi(t);return e.invert=Zi(-t),e}function er(t,e){var a=Math.cos(t),l=Math.sin(t),u=Math.cos(e),c=Math.sin(e);function n(t,e){var n=Math.cos(e),i=Math.cos(t)*n,r=Math.sin(t)*n,s=Math.sin(e),o=s*a+i*l;return[Math.atan2(r*u-o*c,i*a-s*l),Nt(o*u+r*c)]}return n.invert=function(t,e){var n=Math.cos(e),i=Math.cos(t)*n,r=Math.sin(t)*n,s=Math.sin(e),o=s*u-r*c;return[Math.atan2(r*u+s*c,i*a+o*l),Nt(o*a-i*l)]},n}function nr(a,l){var u=Math.cos(a),c=Math.sin(a);return function(t,e,n,i){var r=n*l;null!=t?(t=ir(u,t),e=ir(u,e),(0<n?t<e:e<t)&&(t+=n*wt)):(t=a+n*wt,e=a-.5*r);for(var s,o=t;0<n?e<o:o<e;o-=r)i.point((s=Yn([u,-c*Math.cos(o),-c*Math.sin(o)]))[0],s[1])}}function ir(t,e){var n=Hn(e);n[0]-=t,Vn(n);var i=Pt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-kt)%(2*Math.PI)}function rr(t,e,n){var i=A.range(t,e-kt,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function sr(t,e,n){var i=A.range(t,e-kt,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function or(t){return t.source}function ar(t){return t.target}A.geo.path=function(){var e,n,i,r,s,o=4.5;function a(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),s&&s.valid||(s=i(r)),A.geo.stream(t,s)),r.result()}function l(){return s=null,a}return a.area=function(t){return Si=0,A.geo.stream(t,i(Di)),Si},a.centroid=function(t){return Pn=Nn=Mn=Dn=An=In=Rn=Ln=qn=0,A.geo.stream(t,i(ji)),qn?[Rn/qn,Ln/qn]:In?[Dn/In,An/In]:Mn?[Pn/Mn,Nn/Mn]:[NaN,NaN]},a.bounds=function(t){return Ni=Mi=-(Oi=Pi=1/0),A.geo.stream(t,i(Ii)),[[Oi,Pi],[Ni,Mi]]},a.projection=function(t){return arguments.length?(i=(e=t)?t.stream||function(n){var e=$i(function(t,e){return n([t*St,e*St])});return function(t){return Gi(e(t))}}(t):de,l()):e},a.context=function(t){return arguments.length?(r=null==(n=t)?new Ri:new Ui(t),"function"!=typeof o&&r.pointRadius(o),l()):n},a.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),a):o},a.projection(A.geo.albersUsa()).context(null)},A.geo.transform=function(i){return{stream:(e=function(t){var e=new Wi(t);for(var n in i)e[n]=i[n];return e},t.toString=function(){return e.toString()},t)};function t(t){return e.apply(this,arguments)}var e},Wi.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},A.geo.projection=Yi,A.geo.projectionMutator=Ki,(A.geo.equirectangular=function(){return Yi(Qi)}).raw=Qi.invert=Qi,A.geo.rotation=function(e){function t(t){return(t=e(t[0]*Tt,t[1]*Tt))[0]*=St,t[1]*=St,t}return e=Xi(e[0]%360*Tt,e[1]*Tt,2<e.length?e[2]*Tt:0),t.invert=function(t){return(t=e.invert(t[0]*Tt,t[1]*Tt))[0]*=St,t[1]*=St,t},t},Ji.invert=Qi,A.geo.circle=function(){var e,r,s=[0,0],n=6;function i(){var t="function"==typeof s?s.apply(this,arguments):s,n=Xi(-t[0]*Tt,-t[1]*Tt,0).invert,i=[];return r(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=St,t[1]*=St}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(s=t,i):s},i.angle=function(t){return arguments.length?(r=nr((e=+t)*Tt,n*Tt),i):e},i.precision=function(t){return arguments.length?(r=nr(e*Tt,(n=+t)*Tt),i):n},i.angle(90)},A.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Tt,r=t[1]*Tt,s=e[1]*Tt,o=Math.sin(i),a=Math.cos(i),l=Math.sin(r),u=Math.cos(r),c=Math.sin(s),h=Math.cos(s);return Math.atan2(Math.sqrt((n=h*o)*n+(n=u*c-l*h*a)*n),l*c+u*h*a)},A.geo.graticule=function(){var e,n,i,r,s,o,a,l,u,c,h,f,d=10,p=d,g=90,m=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:t()}}function t(){return A.range(Math.ceil(r/g)*g,i,g).map(h).concat(A.range(Math.ceil(l/m)*m,a,m).map(f)).concat(A.range(Math.ceil(n/d)*d,e,d).filter(function(t){return R(t%g)>kt}).map(u)).concat(A.range(Math.ceil(o/p)*p,s,p).filter(function(t){return R(t%m)>kt}).map(c))}return y.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(f(a).slice(1),h(i).reverse().slice(1),f(l).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.majorExtent(t).minorExtent(t):y.minorExtent()},y.majorExtent=function(t){return arguments.length?(r=+t[0][0],i=+t[1][0],l=+t[0][1],a=+t[1][1],i<r&&(t=r,r=i,i=t),a<l&&(t=l,l=a,a=t),y.precision(v)):[[r,l],[i,a]]},y.minorExtent=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],o=+t[0][1],s=+t[1][1],e<n&&(t=n,n=e,e=t),s<o&&(t=o,o=s,s=t),y.precision(v)):[[n,o],[e,s]]},y.step=function(t){return arguments.length?y.majorStep(t).minorStep(t):y.minorStep()},y.majorStep=function(t){return arguments.length?(g=+t[0],m=+t[1],y):[g,m]},y.minorStep=function(t){return arguments.length?(d=+t[0],p=+t[1],y):[d,p]},y.precision=function(t){return arguments.length?(v=+t,u=rr(o,s,90),c=sr(n,e,v),h=rr(l,a,90),f=sr(r,i,v),y):v},y.majorExtent([[-180,-90+kt],[180,90-kt]]).minorExtent([[-180,-80-kt],[180,80+kt]])},A.geo.greatArc=function(){var e,n,i=or,r=ar;function s(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}return s.distance=function(){return A.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},s.source=function(t){return arguments.length?(e="function"==typeof(i=t)?null:t,s):i},s.target=function(t){return arguments.length?(n="function"==typeof(r=t)?null:t,s):r},s.precision=function(){return arguments.length?s:0},s},A.geo.interpolate=function(t,e){return function(t,e,n,i){var r=Math.cos(e),o=Math.sin(e),s=Math.cos(i),a=Math.sin(i),l=r*Math.cos(t),u=r*Math.sin(t),c=s*Math.cos(n),h=s*Math.sin(n),f=2*Math.asin(Math.sqrt(Dt(i-e)+r*s*Dt(n-t))),d=1/Math.sin(f),p=f?function(t){var e=Math.sin(t*=f)*d,n=Math.sin(f-t)*d,i=n*l+e*c,r=n*u+e*h,s=n*o+e*a;return[Math.atan2(r,i)*St,Math.atan2(s,Math.sqrt(i*i+r*r))*St]}:function(){return[t*St,e*St]};return p.distance=f,p}(t[0]*Tt,t[1]*Tt,e[0]*Tt,e[1]*Tt)},A.geo.length=function(t){return qi=0,A.geo.stream(t,lr),qi};var lr={sphere:S,point:S,lineStart:function(){var o,a,l;function n(t,e){var n=Math.sin(e*=Tt),i=Math.cos(e),r=R((t*=Tt)-o),s=Math.cos(r);qi+=Math.atan2(Math.sqrt((r=i*Math.sin(r))*r+(r=l*n-a*i*s)*r),a*n+l*i*s),o=t,a=n,l=i}lr.point=function(t,e){o=t*Tt,a=Math.sin(e*=Tt),l=Math.cos(e),lr.point=n},lr.lineEnd=function(){lr.point=lr.lineEnd=S}},lineEnd:S,polygonStart:S,polygonEnd:S};function ur(s,o){function t(t,e){var n=Math.cos(t),i=Math.cos(e),r=s(n*i);return[r*i*Math.sin(t),r*Math.sin(e)]}return t.invert=function(t,e){var n=Math.sqrt(t*t+e*e),i=o(n),r=Math.sin(i),s=Math.cos(i);return[Math.atan2(t*r,n*s),Math.asin(n&&e*r/n)]},t}var cr=ur(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(A.geo.azimuthalEqualArea=function(){return Yi(cr)}).raw=cr;var hr=ur(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},de);function fr(t,e){function i(t){return Math.tan(bt/4+t/2)}var n=Math.cos(t),r=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(i(e)/i(t)),s=n*Math.pow(i(t),r)/r;if(!r)return gr;function o(t,e){0<s?e<-Ct+kt&&(e=-Ct+kt):Ct-kt<e&&(e=Ct-kt);var n=s/Math.pow(i(e),r);return[n*Math.sin(r*t),s-n*Math.cos(r*t)]}return o.invert=function(t,e){var n=s-e,i=Et(r)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/r,2*Math.atan(Math.pow(s/i,1/r))-Ct]},o}function dr(t,e){var n=Math.cos(t),i=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),r=n/i+t;if(R(i)<kt)return Qi;function s(t,e){var n=r-e;return[n*Math.sin(i*t),r-n*Math.cos(i*t)]}return s.invert=function(t,e){var n=r-e;return[Math.atan2(t,n)/i,r-Et(i)*Math.sqrt(t*t+n*n)]},s}(A.geo.azimuthalEquidistant=function(){return Yi(hr)}).raw=hr,(A.geo.conicConformal=function(){return xi(fr)}).raw=fr,(A.geo.conicEquidistant=function(){return xi(dr)}).raw=dr;var pr=ur(function(t){return 1/t},Math.atan);function gr(t,e){return[t,Math.log(Math.tan(bt/4+e/2))]}function mr(t){var r,s=Yi(t),o=s.scale,a=s.translate,l=s.clipExtent;return s.scale=function(){var t=o.apply(s,arguments);return t===s?r?s.clipExtent(null):s:t},s.translate=function(){var t=a.apply(s,arguments);return t===s?r?s.clipExtent(null):s:t},s.clipExtent=function(t){var e=l.apply(s,arguments);if(e===s){if(r=null==t){var n=bt*o(),i=a();l([[i[0]-n,i[1]-n],[i[0]+n,i[1]+n]])}}else r&&(e=null);return e},s.clipExtent(null)}(A.geo.gnomonic=function(){return Yi(pr)}).raw=pr,gr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ct]},(A.geo.mercator=function(){return mr(gr)}).raw=gr;var vr=ur(function(){return 1},Math.asin);(A.geo.orthographic=function(){return Yi(vr)}).raw=vr;var yr=ur(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function _r(t,e){return[Math.log(Math.tan(bt/4+e/2)),-t]}function br(t){return t[0]}function wr(t){return t[1]}function Cr(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;r++){for(;1<i&&Ot(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function kr(t,e){return t[0]-e[0]||t[1]-e[1]}(A.geo.stereographic=function(){return Yi(yr)}).raw=yr,_r.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ct]},(A.geo.transverseMercator=function(){var t=mr(_r),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=_r,A.geom={},A.geom.hull=function(t){var f=br,d=wr;if(arguments.length)return e(t);function e(t){if(t.length<3)return[];var e,n=fe(f),i=fe(d),r=t.length,s=[],o=[];for(e=0;e<r;e++)s.push([+n.call(this,t[e],e),+i.call(this,t[e],e),e]);for(s.sort(kr),e=0;e<r;e++)o.push([s[e][0],-s[e][1]]);var a=Cr(s),l=Cr(o),u=l[0]===a[0],c=l[l.length-1]===a[a.length-1],h=[];for(e=a.length-1;0<=e;--e)h.push(t[s[a[e]][2]]);for(e=+u;e<l.length-c;++e)h.push(t[s[l[e]][2]]);return h}return e.x=function(t){return arguments.length?(f=t,e):f},e.y=function(t){return arguments.length?(d=t,e):d},e},A.geom.polygon=function(t){return M(t,xr),t};var xr=A.geom.polygon.prototype=[];function Tr(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Sr(t,e,n,i){var r=t[0],s=n[0],o=e[0]-r,a=i[0]-s,l=t[1],u=n[1],c=e[1]-l,h=i[1]-u,f=(a*(l-u)-h*(r-s))/(h*o-a*c);return[r+f*o,l+f*c]}function Er(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}xr.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},xr.centroid=function(t){var e,n,i=-1,r=this.length,s=0,o=0,a=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=a,a=this[i],n=e[0]*a[1]-a[0]*e[1],s+=(e[0]+a[0])*n,o+=(e[1]+a[1])*n;return[s*t,o*t]},xr.clip=function(t){for(var e,n,i,r,s,o,a=Er(t),l=-1,u=this.length-Er(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,r=this[l],s=e[(i=e.length-a)-1],n=-1;++n<i;)Tr(o=e[n],c,r)?(Tr(s,c,r)||t.push(Sr(s,o,c,r)),t.push(o)):Tr(s,c,r)&&t.push(Sr(s,o,c,r)),s=o;a&&t.push(t[0]),c=r}return t};var Or,Pr,Nr,Mr,Dr,Ar=[],Ir=[];function Rr(){ts(this),this.edge=this.site=this.circle=null}function Lr(t){var e=Ar.pop()||new Rr;return e.site=t,e}function qr(t){Vr(t),Nr.remove(t),Ar.push(t),ts(t)}function jr(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},s=t.P,o=t.N,a=[t];qr(t);for(var l=s;l.circle&&R(n-l.circle.x)<kt&&R(i-l.circle.cy)<kt;)s=l.P,a.unshift(l),qr(l),l=s;a.unshift(l),Vr(l);for(var u=o;u.circle&&R(n-u.circle.x)<kt&&R(i-u.circle.cy)<kt;)o=u.N,a.push(u),qr(u),u=o;a.push(u),Vr(u);var c,h=a.length;for(c=1;c<h;++c)u=a[c],l=a[c-1],Jr(u.edge,l.site,u.site,r);l=a[0],(u=a[h-1]).edge=Gr(l.site,u.site,null,r),Wr(l),Wr(u)}function zr(t){for(var e,n,i,r,s=t.x,o=t.y,a=Nr._;a;)if(i=Fr(a,o)-s,kt<i)a=a.L;else{if(r=s-Hr(a,o),!(kt<r)){-kt<i?(e=a.P,n=a):-kt<r?n=(e=a).N:e=n=a;break}if(!a.R){e=a;break}a=a.R}var l=Lr(t);if(Nr.insert(e,l),e||n){if(e===n)return Vr(e),n=Lr(e.site),Nr.insert(l,n),l.edge=n.edge=Gr(e.site,l.site),Wr(e),void Wr(n);if(n){Vr(e),Vr(n);var u=e.site,c=u.x,h=u.y,f=t.x-c,d=t.y-h,p=n.site,g=p.x-c,m=p.y-h,v=2*(f*m-d*g),y=f*f+d*d,_=g*g+m*m,b={x:(m*y-d*_)/v+c,y:(f*_-g*y)/v+h};Jr(n.edge,u,p,b),l.edge=Gr(u,t,null,b),n.edge=Gr(t,p,null,b),Wr(e),Wr(n)}else l.edge=Gr(e.site,l.site)}}function Fr(t,e){var n=t.site,i=n.x,r=n.y,s=r-e;if(!s)return i;var o=t.P;if(!o)return-1/0;var a=(n=o.site).x,l=n.y,u=l-e;if(!u)return a;var c=a-i,h=1/s-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+r-s/2)))/h+i:(i+a)/2}function Hr(t,e){var n=t.N;if(n)return Fr(n,e);var i=t.site;return i.y===e?i.x:1/0}function Br(t){this.site=t,this.edges=[]}function Ur(t,e){return e.angle-t.angle}function $r(){ts(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wr(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,s=n.site;if(i!==s){var o=r.x,a=r.y,l=i.x-o,u=i.y-a,c=s.x-o,h=2*(l*(m=s.y-a)-u*c);if(!(-xt<=h)){var f=l*l+u*u,d=c*c+m*m,p=(m*f-u*d)/h,g=(l*d-c*f)/h,m=g+a,v=Ir.pop()||new $r;v.arc=t,v.site=r,v.x=p+o,v.y=m+Math.sqrt(p*p+g*g),v.cy=m,t.circle=v;for(var y=null,_=Dr._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}Dr.insert(y,v),y||(Mr=v)}}}}function Vr(t){var e=t.circle;e&&(e.P||(Mr=e.N),Dr.remove(e),Ir.push(e),ts(e),t.circle=null)}function Yr(t,e){var n=t.b;if(n)return!0;var i,r,s=t.a,o=e[0][0],a=e[1][0],l=e[0][1],u=e[1][1],c=t.l,h=t.r,f=c.x,d=c.y,p=h.x,g=h.y,m=(f+p)/2,v=(d+g)/2;if(g===d){if(m<o||a<=m)return;if(p<f){if(s){if(s.y>=u)return}else s={x:m,y:l};n={x:m,y:u}}else{if(s){if(s.y<l)return}else s={x:m,y:u};n={x:m,y:l}}}else if(r=v-(i=(f-p)/(g-d))*m,i<-1||1<i)if(p<f){if(s){if(s.y>=u)return}else s={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else{if(s){if(s.y<l)return}else s={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else if(d<g){if(s){if(s.x>=a)return}else s={x:o,y:i*o+r};n={x:a,y:i*a+r}}else{if(s){if(s.x<o)return}else s={x:a,y:i*a+r};n={x:o,y:i*o+r}}return t.a=s,t.b=n,!0}function Kr(t,e){this.l=t,this.r=e,this.a=this.b=null}function Gr(t,e,n,i){var r=new Kr(t,e);return Or.push(r),n&&Jr(r,t,e,n),i&&Jr(r,e,t,i),Pr[t.i].edges.push(new Xr(r,t,e)),Pr[e.i].edges.push(new Xr(r,e,t)),r}function Qr(t,e,n){var i=new Kr(t,null);return i.a=e,i.b=n,Or.push(i),i}function Jr(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Xr(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function Zr(){this._=null}function ts(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function es(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function ns(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function is(t){for(;t.L;)t=t.L;return t}function rs(t,e){var n,i,r,s=t.sort(ss).pop();for(Or=[],Pr=new Array(t.length),Nr=new Zr,Dr=new Zr;;)if(r=Mr,s&&(!r||s.y<r.y||s.y===r.y&&s.x<r.x))s.x===n&&s.y===i||(Pr[s.i]=new Br(s),zr(s),n=s.x,i=s.y),s=t.pop();else{if(!r)break;jr(r.arc)}e&&(function(t){for(var e,n=Or,i=bi(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)Yr(e=n[r],t)&&i(e)&&!(R(e.a.x-e.b.x)<kt&&R(e.a.y-e.b.y)<kt)||(e.a=e.b=null,n.splice(r,1))}(e),function(t){for(var e,n,i,r,s,o,a,l,u,c,h=t[0][0],f=t[1][0],d=t[0][1],p=t[1][1],g=Pr,m=g.length;m--;)if((s=g[m])&&s.prepare())for(l=(a=s.edges).length,o=0;o<l;)i=(c=a[o].end()).x,r=c.y,e=(u=a[++o%l].start()).x,n=u.y,(R(i-e)>kt||R(r-n)>kt)&&(a.splice(o,0,new Xr(Qr(s.site,c,R(i-h)<kt&&kt<p-r?{x:h,y:R(e-h)<kt?n:p}:R(r-p)<kt&&kt<f-i?{x:R(n-p)<kt?e:f,y:p}:R(i-f)<kt&&kt<r-d?{x:f,y:R(e-f)<kt?n:d}:R(r-d)<kt&&kt<i-h?{x:R(n-d)<kt?e:h,y:d}:null),s.site,null)),++l)}(e));var o={cells:Pr,edges:Or};return Nr=Dr=Or=Pr=null,o}function ss(t,e){return e.y-t.y||e.x-t.x}Br.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Ur),e.length},Xr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Zr.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=is(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(es(this,n),n=(t=n).U),n.C=!1,i.C=!0,ns(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(ns(this,n),n=(t=n).U),n.C=!1,i.C=!0,es(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,s=t.L,o=t.R;if(n=s?o?is(o):s:o,r?r.L===t?r.L=n:r.R=n:this._=n,s&&o?(i=n.C,n.C=t.C,((n.L=s).U=n)!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,(n.R=o).U=n):(n.U=r,t=(r=n).R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,es(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ns(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,es(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,ns(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,es(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,ns(this,r),t=this._;break}e.C=!0,r=(t=r).U}while(!t.C);t&&(t.C=!1)}}},A.geom.voronoi=function(t){var e=br,n=wr,i=e,r=n,c=os;if(t)return s(t);function s(r){var s=new Array(r.length),o=c[0][0],a=c[0][1],l=c[1][0],u=c[1][1];return rs(h(r),c).cells.forEach(function(t,e){var n=t.edges,i=t.site;(s[e]=n.length?n.map(function(t){var e=t.start();return[e.x,e.y]}):i.x>=o&&i.x<=l&&i.y>=a&&i.y<=u?[[o,u],[l,u],[l,a],[o,a]]:[]).point=r[e]}),s}function h(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/kt)*kt,y:Math.round(r(t,e)/kt)*kt,i:e}})}return s.links=function(e){return rs(h(e)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},s.triangles=function(f){var d=[];return rs(h(f)).cells.forEach(function(t,e){for(var n,i,r,s,o=t.site,a=t.edges.sort(Ur),l=-1,u=a.length,c=a[u-1].edge,h=c.l===o?c.r:c.l;++l<u;)c,n=h,h=(c=a[l].edge).l===o?c.r:c.l,e<n.i&&e<h.i&&(r=n,s=h,((i=o).x-s.x)*(r.y-i.y)-(i.x-r.x)*(s.y-i.y)<0)&&d.push([f[e],f[n.i],f[h.i]])}),d},s.x=function(t){return arguments.length?(i=fe(e=t),s):e},s.y=function(t){return arguments.length?(r=fe(n=t),s):n},s.clipExtent=function(t){return arguments.length?(c=null==t?os:t,s):c===os?null:c},s.size=function(t){return arguments.length?s.clipExtent(t&&[[0,0],t]):c===os?null:c&&c[1]},s};var os=[[-1e6,-1e6],[1e6,1e6]];function as(t){return t.x}function ls(t){return t.y}function us(t,e){t=A.rgb(t),e=A.rgb(e);var n=t.r,i=t.g,r=t.b,s=e.r-n,o=e.g-i,a=e.b-r;return function(t){return"#"+se(Math.round(n+s*t))+se(Math.round(i+o*t))+se(Math.round(r+a*t))}}function cs(t,e){var n,i={},r={};for(n in t)n in e?i[n]=gs(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function hs(e,n){return n-=e=+e,function(t){return e+n*t}}function fs(t,i){var e,n,r,s=ds.lastIndex=ps.lastIndex=0,o=-1,a=[],l=[];for(t+="",i+="";(e=ds.exec(t))&&(n=ps.exec(i));)(r=n.index)>s&&(r=i.substring(s,r),a[o]?a[o]+=r:a[++o]=r),(e=e[0])===(n=n[0])?a[o]?a[o]+=n:a[++o]=n:(a[++o]=null,l.push({i:o,x:hs(e,n)})),s=ps.lastIndex;return s<i.length&&(r=i.substring(s),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?(i=l[0].x,function(t){return i(t)+""}):function(){return i}:(i=l.length,function(t){for(var e,n=0;n<i;++n)a[(e=l[n]).i]=e.x(t);return a.join("")})}A.geom.delaunay=function(t){return A.geom.voronoi().triangles(t)},A.geom.quadtree=function(t,_,b,w,C){var k,x=br,T=wr;if(k=arguments.length)return x=as,T=ls,3===k&&(C=b,w=_,b=_=0),e(t);function e(t){var e,n,i,r,s,o,a,l,u,c=fe(x),h=fe(T);if(null!=_)o=_,a=b,l=w,u=C;else if(l=u=-(o=a=1/0),n=[],i=[],s=t.length,k)for(r=0;r<s;++r)(e=t[r]).x<o&&(o=e.x),e.y<a&&(a=e.y),e.x>l&&(l=e.x),e.y>u&&(u=e.y),n.push(e.x),i.push(e.y);else for(r=0;r<s;++r){var f=+c(e=t[r],r),d=+h(e,r);f<o&&(o=f),d<a&&(a=d),l<f&&(l=f),u<d&&(u=d),n.push(f),i.push(d)}var p=l-o,g=u-a;function m(t,e,n,i,r,s,o,a){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(R(l-n)+R(u-i)<.01)v(t,e,n,i,r,s,o,a);else{var c=t.point;t.x=t.y=t.point=null,v(t,c,l,u,r,s,o,a),v(t,e,n,i,r,s,o,a)}else t.x=n,t.y=i,t.point=e}else v(t,e,n,i,r,s,o,a)}function v(t,e,n,i,r,s,o,a){var l=.5*(r+o),u=.5*(s+a),c=l<=n,h=u<=i,f=(h<<1)+c;t.leaf=!1,c?r=l:o=l,h?s=u:a=u,m(t=t.nodes[f]||(t.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,i,r,s,o,a)}g<p?u=a+p:l=o+g;var y={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){m(y,t,+c(t,++r),+h(t,r),o,a,l,u)}};if(y.visit=function(t){!function t(e,n,i,r,s,o){if(!e(n,i,r,s,o)){var a=.5*(i+s),l=.5*(r+o),u=n.nodes;u[0]&&t(e,u[0],i,r,a,l),u[1]&&t(e,u[1],a,r,s,l),u[2]&&t(e,u[2],i,l,a,o),u[3]&&t(e,u[3],a,l,s,o)}}(t,y,o,a,l,u)},r=-1,null==_){for(;++r<s;)m(y,t[r],n[r],i[r],o,a,l,u);--r}else t.forEach(y.add);return n=i=t=e=null,y}return e.x=function(t){return arguments.length?(x=t,e):x},e.y=function(t){return arguments.length?(T=t,e):T},e.extent=function(t){return arguments.length?(null==t?_=b=w=C=null:(_=+t[0][0],b=+t[0][1],w=+t[1][0],C=+t[1][1]),e):null==_?null:[[_,b],[w,C]]},e.size=function(t){return arguments.length?(null==t?_=b=w=C=null:(_=b=0,w=+t[0],C=+t[1]),e):null==_?null:[w-_,C-b]},e},A.interpolateRgb=us,A.interpolateObject=cs,A.interpolateNumber=hs,A.interpolateString=fs;var ds=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ps=new RegExp(ds.source,"g");function gs(t,e){for(var n,i=A.interpolators.length;0<=--i&&!(n=A.interpolators[i](t,e)););return n}function ms(t,e){var n,i=[],r=[],s=t.length,o=e.length,a=Math.min(t.length,e.length);for(n=0;n<a;++n)i.push(gs(t[n],e[n]));for(;n<s;++n)r[n]=t[n];for(;n<o;++n)r[n]=e[n];return function(t){for(n=0;n<a;++n)r[n]=i[n](t);return r}}A.interpolate=gs,A.interpolators=[function(t,e){var n=void 0===e?"undefined":_typeof(e);return("string"===n?he.has(e)||/^(#|rgb\(|hsl\()/.test(e)?us:fs:e instanceof qt?us:Array.isArray(e)?ms:"object"===n&&isNaN(e)?cs:hs)(t,e)}],A.interpolateArray=ms;function vs(){return de}var ys=A.map({linear:vs,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return Cs},cubic:function(){return ks},sin:function(){return Ts},exp:function(){return Ss},circle:function(){return Es},elastic:function(e,n){var i;arguments.length<2&&(n=.45);i=arguments.length?n/wt*Math.asin(1/e):(e=1,n/4);return function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-i)*wt/n)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return Os}}),_s=A.map({in:de,out:bs,"in-out":ws,"out-in":function(t){return ws(bs(t))}});function bs(e){return function(t){return 1-e(1-t)}}function ws(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Cs(t){return t*t}function ks(t){return t*t*t}function xs(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Ts(t){return 1-Math.cos(t*Ct)}function Ss(t){return Math.pow(2,10*(t-1))}function Es(t){return 1-Math.sqrt(1-t*t)}function Os(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ps(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function Ns(t){var e=[t.a,t.b],n=[t.c,t.d],i=Ds(e),r=Ms(e,n),s=Ds(function(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*St,this.translate=[t.e,t.f],this.scale=[i,s],this.skew=s?Math.atan2(r,s)*St:0}function Ms(t,e){return t[0]*e[0]+t[1]*e[1]}function Ds(t){var e=Math.sqrt(Ms(t,t));return e&&(t[0]/=e,t[1]/=e),e}A.ease=function(t){var e=t.indexOf("-"),n=0<=e?t.substring(0,e):t,i=0<=e?t.substring(e+1):"in";return n=ys.get(n)||vs,function(e){return function(t){return t<=0?0:1<=t?1:e(t)}}((i=_s.get(i)||de)(n.apply(null,r.call(arguments,1))))},A.interpolateHcl=function(t,e){t=A.hcl(t),e=A.hcl(e);var n=t.h,i=t.c,r=t.l,s=e.h-n,o=e.c-i,a=e.l-r;isNaN(o)&&(o=0,i=isNaN(i)?e.c:i);isNaN(s)?(s=0,n=isNaN(n)?e.h:n):180<s?s-=360:s<-180&&(s+=360);return function(t){return Ut(n+s*t,i+o*t,r+a*t)+""}},A.interpolateHsl=function(t,e){t=A.hsl(t),e=A.hsl(e);var n=t.h,i=t.s,r=t.l,s=e.h-n,o=e.s-i,a=e.l-r;isNaN(o)&&(o=0,i=isNaN(i)?e.s:i);isNaN(s)?(s=0,n=isNaN(n)?e.h:n):180<s?s-=360:s<-180&&(s+=360);return function(t){return Ft(n+s*t,i+o*t,r+a*t)+""}},A.interpolateLab=function(t,e){t=A.lab(t),e=A.lab(e);var n=t.l,i=t.a,r=t.b,s=e.l-n,o=e.a-i,a=e.b-r;return function(t){return Qt(n+s*t,i+o*t,r+a*t)+""}},A.interpolateRound=Ps,A.transform=function(t){var n=i.createElementNS(A.ns.prefix.svg,"g");return(A.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Ns(e?e.matrix:As)})(t)},Ns.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var As={a:1,b:0,c:0,d:1,e:0,f:0};function Is(t,e){var i,r=[],s=[],n=A.transform(t),o=A.transform(e),a=n.translate,l=o.translate,u=n.rotate,c=o.rotate,h=n.skew,f=o.skew,d=n.scale,p=o.scale;return a[0]!=l[0]||a[1]!=l[1]?(r.push("translate(",null,",",null,")"),s.push({i:1,x:hs(a[0],l[0])},{i:3,x:hs(a[1],l[1])})):l[0]||l[1]?r.push("translate("+l+")"):r.push(""),u!=c?(180<u-c?c+=360:180<c-u&&(u+=360),s.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:hs(u,c)})):c&&r.push(r.pop()+"rotate("+c+")"),h!=f?s.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:hs(h,f)}):f&&r.push(r.pop()+"skewX("+f+")"),d[0]!=p[0]||d[1]!=p[1]?(i=r.push(r.pop()+"scale(",null,",",null,")"),s.push({i:i-4,x:hs(d[0],p[0])},{i:i-2,x:hs(d[1],p[1])})):1==p[0]&&1==p[1]||r.push(r.pop()+"scale("+p+")"),i=s.length,function(t){for(var e,n=-1;++n<i;)r[(e=s[n]).i]=e.x(t);return r.join("")}}function Rs(e,n){return n=n-(e=+e)?1/(n-e):0,function(t){return(t-e)*n}}function Ls(e,n){return n=n-(e=+e)?1/(n-e):0,function(t){return Math.max(0,Math.min(1,(t-e)*n))}}function qs(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;var n=js(t),i=js(e),r=n.pop(),s=i.pop(),o=null;for(;r===s;)o=r,r=n.pop(),s=i.pop();return o}(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var s=r.length;n!==i;)r.splice(s,0,n),n=n.parent;return r}function js(t){for(var e=[],n=t.parent;null!=n;)e.push(t),n=(t=n).parent;return e.push(t),e}function zs(t){t.fixed|=2}function Fs(t){t.fixed&=-7}function Hs(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Bs(t){t.fixed&=-5}A.interpolateTransform=Is,A.layout={},A.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(qs(t[n]));return e}},A.layout.chord=function(){var m,v,y,_,b,w,C,e={},k=0;function t(){var t,e,n,i,r,s={},o=[],a=A.range(_),l=[];for(m=[],v=[],t=0,i=-1;++i<_;){for(e=0,r=-1;++r<_;)e+=y[i][r];o.push(e),l.push(A.range(_)),t+=e}for(b&&a.sort(function(t,e){return b(o[t],o[e])}),w&&l.forEach(function(t,n){t.sort(function(t,e){return w(y[n][t],y[n][e])})}),t=(wt-k*_)/t,e=0,i=-1;++i<_;){for(n=e,r=-1;++r<_;){var u=a[i],c=l[u][r],h=y[u][c],f=e,d=e+=h*t;s[u+"-"+c]={index:u,subindex:c,startAngle:f,endAngle:d,value:h}}v[u]={index:u,startAngle:n,endAngle:e,value:(e-n)/t},e+=k}for(i=-1;++i<_;)for(r=i-1;++r<_;){var p=s[i+"-"+r],g=s[r+"-"+i];(p.value||g.value)&&m.push(p.value<g.value?{source:g,target:p}:{source:p,target:g})}C&&x()}function x(){m.sort(function(t,e){return C((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return e.matrix=function(t){return arguments.length?(_=(y=t)&&y.length,m=v=null,e):y},e.padding=function(t){return arguments.length?(k=t,m=v=null,e):k},e.sortGroups=function(t){return arguments.length?(b=t,m=v=null,e):b},e.sortSubgroups=function(t){return arguments.length?(w=t,m=null,e):w},e.sortChords=function(t){return arguments.length?(C=t,m&&x(),e):C},e.chords=function(){return m||t(),m},e.groups=function(){return v||t(),v},e},A.layout.force=function(){var t,h,f,d,p,s={},g=A.dispatch("start","tick","end"),m=[1,1],v=.9,o=Us,c=$s,y=-30,_=Ws,b=.1,w=.64,C=[],k=[];function x(u){return function(t,e,n,i){if(t.point!==u){var r=t.cx-u.x,s=t.cy-u.y,o=i-e,a=r*r+s*s;if(o*o/w<a){if(a<_){var l=t.charge/a;u.px-=r*l,u.py-=s*l}return!0}if(t.point&&a&&a<_){l=t.pointCharge/a;u.px-=r*l,u.py-=s*l}}return!t.charge}}function e(t){t.px=A.event.x,t.py=A.event.y,s.resume()}return s.tick=function(){if((h*=.99)<.005)return g.end({type:"end",alpha:h=0}),!0;var t,e,n,i,r,s,o,a,l,u=C.length,c=k.length;for(e=0;e<c;++e)i=(n=k[e]).source,(s=(a=(r=n.target).x-i.x)*a+(l=r.y-i.y)*l)&&(a*=s=h*d[e]*((s=Math.sqrt(s))-f[e])/s,l*=s,r.x-=a*(o=i.weight/(r.weight+i.weight)),r.y-=l*o,i.x+=a*(o=1-o),i.y+=l*o);if((o=h*b)&&(a=m[0]/2,l=m[1]/2,e=-1,o))for(;++e<u;)(n=C[e]).x+=(a-n.x)*o,n.y+=(l-n.y)*o;if(y)for(!function t(e,n,i){var r=0,s=0;e.charge=0;if(!e.leaf)for(var o,a=e.nodes,l=a.length,u=-1;++u<l;)null!=(o=a[u])&&(t(o,n,i),e.charge+=o.charge,r+=o.charge*o.cx,s+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*i[e.point.index];e.charge+=e.pointCharge=c,r+=c*e.point.x,s+=c*e.point.y}e.cx=r/e.charge;e.cy=s/e.charge}(t=A.geom.quadtree(C),h,p),e=-1;++e<u;)(n=C[e]).fixed||t.visit(x(n));for(e=-1;++e<u;)(n=C[e]).fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*v,n.y-=(n.py-(n.py=n.y))*v);g.tick({type:"tick",alpha:h})},s.nodes=function(t){return arguments.length?(C=t,s):C},s.links=function(t){return arguments.length?(k=t,s):k},s.size=function(t){return arguments.length?(m=t,s):m},s.linkDistance=function(t){return arguments.length?(o="function"==typeof t?t:+t,s):o},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(c="function"==typeof t?t:+t,s):c},s.friction=function(t){return arguments.length?(v=+t,s):v},s.charge=function(t){return arguments.length?(y="function"==typeof t?t:+t,s):y},s.chargeDistance=function(t){return arguments.length?(_=t*t,s):Math.sqrt(_)},s.gravity=function(t){return arguments.length?(b=+t,s):b},s.theta=function(t){return arguments.length?(w=t*t,s):Math.sqrt(w)},s.alpha=function(t){return arguments.length?(t=+t,h?h=0<t?t:0:0<t&&(g.start({type:"start",alpha:h=t}),A.timer(s.tick)),s):h},s.start=function(){var a,l,t,u=C.length,e=k.length,n=m[0],i=m[1];for(a=0;a<u;++a)(t=C[a]).index=a,t.weight=0;for(a=0;a<e;++a)"number"==typeof(t=k[a]).source&&(t.source=C[t.source]),"number"==typeof t.target&&(t.target=C[t.target]),++t.source.weight,++t.target.weight;for(a=0;a<u;++a)t=C[a],isNaN(t.x)&&(t.x=r("x",n)),isNaN(t.y)&&(t.y=r("y",i)),isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y);if(f=[],"function"==typeof o)for(a=0;a<e;++a)f[a]=+o.call(this,k[a],a);else for(a=0;a<e;++a)f[a]=o;if(d=[],"function"==typeof c)for(a=0;a<e;++a)d[a]=+c.call(this,k[a],a);else for(a=0;a<e;++a)d[a]=c;if(p=[],"function"==typeof y)for(a=0;a<u;++a)p[a]=+y.call(this,C[a],a);else for(a=0;a<u;++a)p[a]=y;function r(t,e){if(!l){for(l=new Array(u),s=0;s<u;++s)l[s]=[];for(s=0;s<o;++s){var n=k[s];l[n.source.index].push(n.target),l[n.target.index].push(n.source)}}for(var i,r=l[a],s=-1,o=r.length;++s<o;)if(!isNaN(i=r[s][t]))return i;return Math.random()*e}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(t||(t=A.behavior.drag().origin(de).on("dragstart.force",zs).on("drag.force",e).on("dragend.force",Fs)),!arguments.length)return t;this.on("mouseover.force",Hs).on("mouseout.force",Bs).call(t)},A.rebind(s,g,"on")};var Us=20,$s=1,Ws=1/0;function Vs(t,e){return A.rebind(t,e,"sort","children","value"),(t.nodes=t).links=Xs,t}function Ys(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;0<=--i;)n.push(r[i])}function Ks(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(s=t.children)&&(r=s.length))for(var r,s,o=-1;++o<r;)n.push(s[o]);for(;null!=(t=i.pop());)e(t)}function Gs(t){return t.children}function Qs(t){return t.value}function Js(t,e){return e.value-t.value}function Xs(t){return A.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}A.layout.hierarchy=function(){var a=Js,l=Gs,u=Qs;function c(t){var e,n=[t],i=[];for(t.depth=0;null!=(e=n.pop());)if(i.push(e),(s=l.call(c,e,e.depth))&&(r=s.length)){for(var r,s,o;0<=--r;)n.push(o=s[r]),o.parent=e,o.depth=e.depth+1;u&&(e.value=0),e.children=s}else u&&(e.value=+u.call(c,e,e.depth)||0),delete e.children;return Ks(t,function(t){var e,n;a&&(e=t.children)&&e.sort(a),u&&(n=t.parent)&&(n.value+=t.value)}),i}return c.sort=function(t){return arguments.length?(a=t,c):a},c.children=function(t){return arguments.length?(l=t,c):l},c.value=function(t){return arguments.length?(u=t,c):u},c.revalue=function(t){return u&&(Ys(t,function(t){t.children&&(t.value=0)}),Ks(t,function(t){var e;t.children||(t.value=+u.call(c,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},c},A.layout.partition=function(){var i=A.layout.hierarchy(),r=[1,1];function e(t,e){var n=i.call(this,t,e);return function t(e,n,i,r){var s=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,s&&(o=s.length)){var o,a,l,u=-1;for(i=e.value?i/e.value:0;++u<o;)t(a=s[u],n,l=a.value*i,r),n+=l}}(n[0],0,r[0],r[1]/function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,s=-1;++s<r;)i=Math.max(i,t(n[s]));return 1+i}(n[0])),n}return e.size=function(t){return arguments.length?(r=t,e):r},Vs(e,i)},A.layout.pie=function(){var a=Number,l=Zs,e=0,u=wt;function c(n){var i=n.map(function(t,e){return+a.call(c,t,e)}),r=+("function"==typeof e?e.apply(this,arguments):e),s=(("function"==typeof u?u.apply(this,arguments):u)-r)/A.sum(i),t=A.range(n.length);null!=l&&t.sort(l===Zs?function(t,e){return i[e]-i[t]}:function(t,e){return l(n[t],n[e])});var o=[];return t.forEach(function(t){var e;o[t]={data:n[t],value:e=i[t],startAngle:r,endAngle:r+=e*s}}),o}return c.value=function(t){return arguments.length?(a=t,c):a},c.sort=function(t){return arguments.length?(l=t,c):l},c.startAngle=function(t){return arguments.length?(e=t,c):e},c.endAngle=function(t){return arguments.length?(u=t,c):u},c};var Zs={};function to(t){return t.x}function eo(t){return t.y}function no(t,e,n){t.y0=e,t.y=n}A.layout.stack=function(){var h=de,f=so,d=oo,p=no,g=to,m=eo;function v(t,e){var n=t.map(function(t,e){return h.call(v,t,e)}),i=n.map(function(t){return t.map(function(t,e){return[g.call(v,t,e),m.call(v,t,e)]})}),r=f.call(v,i,e);n=A.permute(n,r),i=A.permute(i,r);var s,o,a,l=d.call(v,i,e),u=n.length,c=n[0].length;for(o=0;o<c;++o)for(p.call(v,n[0][o],a=l[o],i[0][o][1]),s=1;s<u;++s)p.call(v,n[s][o],a+=i[s-1][o][1],i[s][o][1]);return t}return v.values=function(t){return arguments.length?(h=t,v):h},v.order=function(t){return arguments.length?(f="function"==typeof t?t:io.get(t)||so,v):f},v.offset=function(t){return arguments.length?(d="function"==typeof t?t:ro.get(t)||oo,v):d},v.x=function(t){return arguments.length?(g=t,v):g},v.y=function(t){return arguments.length?(m=t,v):m},v.out=function(t){return arguments.length?(p=t,v):p},v};var io=A.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(ao),s=t.map(lo),o=A.range(i).sort(function(t,e){return r[t]-r[e]}),a=0,l=0,u=[],c=[];for(e=0;e<i;++e)n=o[e],a<l?(a+=s[n],u.push(n)):(l+=s[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return A.range(t.length).reverse()},default:so}),ro=A.map({silhouette:function(t){var e,n,i,r=t.length,s=t[0].length,o=[],a=0,l=[];for(n=0;n<s;++n){for(i=e=0;e<r;e++)i+=t[e][n][1];a<i&&(a=i),o.push(i)}for(n=0;n<s;++n)l[n]=(a-o[n])/2;return l},wiggle:function(t){var e,n,i,r,s,o,a,l,u,c=t.length,h=t[0],f=h.length,d=[];for(d[0]=l=u=0,n=1;n<f;++n){for(r=e=0;e<c;++e)r+=t[e][n][1];for(s=e=0,a=h[n][0]-h[n-1][0];e<c;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*a);i<e;++i)o+=(t[i][n][1]-t[i][n-1][1])/a;s+=o*t[e][n][1]}d[n]=l-=r?s/r*a:0,l<u&&(u=l)}for(n=0;n<f;++n)d[n]-=u;return d},expand:function(t){var e,n,i,r=t.length,s=t[0].length,o=1/r,a=[];for(n=0;n<s;++n){for(i=e=0;e<r;e++)i+=t[e][n][1];if(i)for(e=0;e<r;e++)t[e][n][1]/=i;else for(e=0;e<r;e++)t[e][n][1]=o}for(n=0;n<s;++n)a[n]=0;return a},zero:oo});function so(t){return A.range(t.length)}function oo(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function ao(t){for(var e,n=1,i=0,r=t[0][1],s=t.length;n<s;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function lo(t){return t.reduce(uo,0)}function uo(t,e){return t+e[1]}function co(t,e){return ho(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ho(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,s=[];++n<=e;)s[n]=r*n+i;return s}function fo(t){return[A.min(t),A.max(t)]}function po(t,e){return t.value-e.value}function go(t,e){var n=t._pack_next;(t._pack_next=e)._pack_prev=t,(e._pack_next=n)._pack_prev=e}function mo(t,e){(t._pack_next=e)._pack_prev=t}function vo(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return n*n+i*i<.999*r*r}function yo(t){if((e=t.children)&&(l=e.length)){var e,n,i,r,s,o,a,l,u=1/0,c=-1/0,h=1/0,f=-1/0;if(e.forEach(_o),(n=e[0]).x=-n.r,n.y=0,_(n),1<l&&((i=e[1]).x=i.r,i.y=0,_(i),2<l))for(wo(n,i,r=e[2]),_(r),go(n,r),go(n._pack_prev=r,i),i=n._pack_next,s=3;s<l;s++){wo(n,i,r=e[s]);var d=0,p=1,g=1;for(o=i._pack_next;o!==i;o=o._pack_next,p++)if(vo(o,r)){d=1;break}if(1==d)for(a=n._pack_prev;a!==o._pack_prev&&!vo(a,r);a=a._pack_prev,g++);d?(p<g||p==g&&i.r<n.r?mo(n,i=o):mo(n=a,i),s--):(go(n,r),_(i=r))}var m=(u+c)/2,v=(h+f)/2,y=0;for(s=0;s<l;s++)(r=e[s]).x-=m,r.y-=v,y=Math.max(y,r.r+Math.sqrt(r.x*r.x+r.y*r.y));t.r=y,e.forEach(bo)}function _(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),h=Math.min(t.y-t.r,h),f=Math.max(t.y+t.r,f)}}function _o(t){t._pack_next=t._pack_prev=t}function bo(t){delete t._pack_next,delete t._pack_prev}function wo(t,e,n){var i=t.r+n.r,r=e.x-t.x,s=e.y-t.y;if(i&&(r||s)){var o=e.r+n.r,a=r*r+s*s,l=.5+((i*=i)-(o*=o))/(2*a),u=Math.sqrt(Math.max(0,2*o*(i+a)-(i-=a)*i-o*o))/(2*a);n.x=t.x+l*r+u*s,n.y=t.y+l*s-u*r}else n.x=t.x+i,n.y=t.y}function Co(t,e){return t.parent==e.parent?1:2}function ko(t){var e=t.children;return e.length?e[0]:t.t}function xo(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function To(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function So(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Eo(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],s=t.dy-e[0]-e[2];return r<0&&(n+=r/2,r=0),s<0&&(i+=s/2,s=0),{x:n,y:i,dx:r,dy:s}}function Oo(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Po(t){return t.rangeExtent?t.rangeExtent():Oo(t.range())}function No(t,e,n,i){var r=n(t[0],t[1]),s=i(e[0],e[1]);return function(t){return s(r(t))}}function Mo(t,e){var n,i=0,r=t.length-1,s=t[i],o=t[r];return o<s&&(n=i,i=r,r=n,n=s,s=o,o=n),t[i]=e.floor(s),t[r]=e.ceil(o),t}A.layout.histogram=function(){var h=!0,f=Number,d=fo,p=co;function n(t,e){for(var n,i,r=[],s=t.map(f,this),o=d.call(this,s,e),a=p.call(this,o,s,e),l=(e=-1,s.length),u=a.length-1,c=h?1:1/l;++e<u;)(n=r[e]=[]).dx=a[e+1]-(n.x=a[e]),n.y=0;if(0<u)for(e=-1;++e<l;)(i=s[e])>=o[0]&&i<=o[1]&&((n=r[A.bisect(a,i,1,u)-1]).y+=c,n.push(t[e]));return r}return n.value=function(t){return arguments.length?(f=t,n):f},n.range=function(t){return arguments.length?(d=fe(t),n):d},n.bins=function(e){return arguments.length?(p="number"==typeof e?function(t){return ho(t,e)}:fe(e),n):p},n.frequency=function(t){return arguments.length?(h=!!t,n):h},n},A.layout.pack=function(){var l,u=A.layout.hierarchy().sort(po),c=0,h=[1,1];function e(t,e){var n=u.call(this,t,e),i=n[0],r=h[0],s=h[1],o=null==l?Math.sqrt:"function"==typeof l?l:function(){return l};if(i.x=i.y=0,Ks(i,function(t){t.r=+o(t.value)}),Ks(i,yo),c){var a=c*(l?1:Math.max(2*i.r/r,2*i.r/s))/2;Ks(i,function(t){t.r+=a}),Ks(i,yo),Ks(i,function(t){t.r-=a})}return function t(e,n,i,r){var s=e.children;e.x=n+=r*e.x;e.y=i+=r*e.y;e.r*=r;if(s)for(var o=-1,a=s.length;++o<a;)t(s[o],n,i,r)}(i,r/2,s/2,l?1:1/Math.max(2*i.r/r,2*i.r/s)),n}return e.size=function(t){return arguments.length?(h=t,e):h},e.radius=function(t){return arguments.length?(l=null==t||"function"==typeof t?t:+t,e):l},e.padding=function(t){return arguments.length?(c=+t,e):c},Vs(e,u)},A.layout.tree=function(){var h=A.layout.hierarchy().sort(null).value(null),g=Co,f=[1,1],d=null;function e(t,e){var n=h.call(this,t,e),i=n[0],r=function(t){var e,n={A:null,children:[t]},i=[n];for(;null!=(e=i.pop());)for(var r,s=e.children,o=0,a=s.length;o<a;++o)i.push((s[o]=r={_:s[o],parent:e,children:(r=s[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}(i);if(Ks(r,p),r.parent.m=-r.z,Ys(r,m),d)Ys(i,v);else{var s=i,o=i,a=i;Ys(i,function(t){t.x<s.x&&(s=t),t.x>o.x&&(o=t),t.depth>a.depth&&(a=t)});var l=g(s,o)/2-s.x,u=f[0]/(o.x+g(o,s)/2+l),c=f[1]/(a.depth||1);Ys(i,function(t){t.x=(t.x+l)*u,t.y=t.depth*c})}return n}function p(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){!function(t){var e,n=0,i=0,r=t.children,s=r.length;for(;0<=--s;)(e=r[s]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var r=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+g(t._,i._),t.m=t.z-r):t.z=r}else i&&(t.z=i.z+g(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,r=t,s=t,o=e,a=r.parent.children[0],l=r.m,u=s.m,c=o.m,h=a.m;o=xo(o),r=ko(r),o&&r;)a=ko(a),(s=xo(s)).a=t,0<(i=o.z+c-r.z-l+g(o._,r._))&&(To((d=t,p=n,(f=o).a.parent===d.parent?f.a:p),t,i),l+=i,u+=i),c+=o.m,l+=r.m,h+=a.m,u+=s.m;o&&!xo(s)&&(s.t=o,s.m+=c-u),r&&!ko(a)&&(a.t=r,a.m+=l-h,n=t)}var f,d,p;return n}(t,i,t.parent.A||n[0])}function m(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function v(t){t.x*=f[0],t.y=t.depth*f[1]}return e.separation=function(t){return arguments.length?(g=t,e):g},e.size=function(t){return arguments.length?(d=null==(f=t)?v:null,e):d?null:f},e.nodeSize=function(t){return arguments.length?(d=null==(f=t)?null:v,e):d?f:null},Vs(e,h)},A.layout.cluster=function(){var c=A.layout.hierarchy().sort(null).value(null),h=Co,f=[1,1],d=!1;function e(t,e){var n,i=c.call(this,t,e),r=i[0],s=0;Ks(r,function(t){var e=t.children;e&&e.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(e),t.y=function(t){return 1+A.max(t,function(t){return t.y})}(e)):(t.x=n?s+=h(t,n):0,t.y=0,n=t)});var o=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(r),a=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(r),l=o.x-h(o,a)/2,u=a.x+h(a,o)/2;return Ks(r,d?function(t){t.x=(t.x-r.x)*f[0],t.y=(r.y-t.y)*f[1]}:function(t){t.x=(t.x-l)/(u-l)*f[0],t.y=(1-(r.y?t.y/r.y:1))*f[1]}),i}return e.separation=function(t){return arguments.length?(h=t,e):h},e.size=function(t){return arguments.length?(d=null==(f=t),e):d?null:f},e.nodeSize=function(t){return arguments.length?(d=null!=(f=t),e):d?f:null},Vs(e,c)},A.layout.treemap=function(){var i,r=A.layout.hierarchy(),c=Math.round,s=[1,1],o=null,h=So,a=!1,f="squarify",l=.5*(1+Math.sqrt(5));function d(t,e){for(var n,i,r=-1,s=t.length;++r<s;)i=(n=t[r]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function p(t){var e=t.children;if(e&&e.length){var n,i,r,s=h(t),o=[],a=e.slice(),l=1/0,u="slice"===f?s.dx:"dice"===f?s.dy:"slice-dice"===f?1&t.depth?s.dy:s.dx:Math.min(s.dx,s.dy);for(d(a,s.dx*s.dy/t.value),o.area=0;0<(r=a.length);)o.push(n=a[r-1]),o.area+=n.area,l="squarify"!==f||(i=g(o,u))<=l?(a.pop(),i):(o.area-=o.pop().area,m(o,u,s,!1),u=Math.min(s.dx,s.dy),o.length=o.area=0,1/0);o.length&&(m(o,u,s,!0),o.length=o.area=0),e.forEach(p)}}function u(t){var e=t.children;if(e&&e.length){var n,i=h(t),r=e.slice(),s=[];for(d(r,i.dx*i.dy/t.value),s.area=0;n=r.pop();)s.push(n),s.area+=n.area,null!=n.z&&(m(s,n.z?i.dx:i.dy,i,!r.length),s.length=s.area=0);e.forEach(u)}}function g(t,e){for(var n,i=t.area,r=0,s=1/0,o=-1,a=t.length;++o<a;)(n=t[o].area)&&(n<s&&(s=n),r<n&&(r=n));return e*=e,(i*=i)?Math.max(e*r*l/i,i/(e*s*l)):1/0}function m(t,e,n,i){var r,s=-1,o=t.length,a=n.x,l=n.y,u=e?c(t.area/e):0;if(e==n.dx){for((i||u>n.dy)&&(u=n.dy);++s<o;)(r=t[s]).x=a,r.y=l,r.dy=u,a+=r.dx=Math.min(n.x+n.dx-a,u?c(r.area/u):0);r.z=!0,r.dx+=n.x+n.dx-a,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++s<o;)(r=t[s]).x=a,r.y=l,r.dx=u,l+=r.dy=Math.min(n.y+n.dy-l,u?c(r.area/u):0);r.z=!1,r.dy+=n.y+n.dy-l,n.x+=u,n.dx-=u}}function v(t){var e=i||r(t),n=e[0];return n.x=0,n.y=0,n.dx=s[0],n.dy=s[1],i&&r.revalue(n),d([n],n.dx*n.dy/n.value),(i?u:p)(n),a&&(i=e),e}return v.size=function(t){return arguments.length?(s=t,v):s},v.padding=function(n){if(!arguments.length)return o;function t(t){return Eo(t,n)}var e;return h=null==(o=n)?So:"function"===(e=void 0===n?"undefined":_typeof(n))?function(t){var e=n.call(v,t,t.depth);return null==e?So(t):Eo(t,"number"==typeof e?[e,e,e,e]:e)}:("number"===e&&(n=[n,n,n,n]),t),v},v.round=function(t){return arguments.length?(c=t?Math.round:Number,v):c!=Number},v.sticky=function(t){return arguments.length?(a=t,i=null,v):a},v.ratio=function(t){return arguments.length?(l=t,v):l},v.mode=function(t){return arguments.length?(f=t+"",v):f},Vs(v,r)},A.random={normal:function(i,r){var t=arguments.length;return t<2&&(r=1),t<1&&(i=0),function(){for(var t,e,n;!(n=(t=2*Math.random()-1)*t+(e=2*Math.random()-1)*e)||1<n;);return i+r*t*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var t=A.random.normal.apply(A,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=A.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},A.scale={};var Do={floor:de,ceil:de};function Ao(n,t,e,i){var r=[],s=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)r.push(e(n[o-1],n[o])),s.push(i(t[o-1],t[o]));return function(t){var e=A.bisect(n,t,1,a)-1;return s[e](r[e](t))}}function Io(t,e){return A.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ro(t,e){return Mo(t,function(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Do}(Lo(t,e)[2]))}function Lo(t,e){null==e&&(e=10);var n=Oo(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),s=e/i*r;return s<=.15?r*=10:s<=.35?r*=5:s<=.75&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function qo(t,e){return A.range.apply(A,Lo(t,e))}function jo(t,e,n){var i=Lo(t,e);if(n){var r=Ee.exec(n);if(r.shift(),"s"===r[8]){var s=A.formatPrefix(Math.max(R(i[0]),R(i[1])));return r[7]||(r[7]="."+Fo(s.scale(i[2]))),r[8]="f",n=A.format(r.join("")),function(t){return n(s.scale(t))+s.symbol}}r[7]||(r[7]="."+function(t,e){var n=Fo(e[2]);return t in zo?Math.abs(n-Fo(Math.max(R(e[0]),R(e[1]))))+ +("e"!==t):n-2*("%"===t)}(r[8],i)),n=r.join("")}else n=",."+Fo(i[2])+"f";return A.format(n)}A.scale.linear=function(){return function t(n,i,r,s){var o,a;function e(){var t=2<Math.min(n.length,i.length)?Ao:No,e=s?Ls:Rs;return o=t(n,i,e,r),a=t(i,n,e,gs),l}function l(t){return o(t)}l.invert=function(t){return a(t)};l.domain=function(t){return arguments.length?(n=t.map(Number),e()):n};l.range=function(t){return arguments.length?(i=t,e()):i};l.rangeRound=function(t){return l.range(t).interpolate(Ps)};l.clamp=function(t){return arguments.length?(s=t,e()):s};l.interpolate=function(t){return arguments.length?(r=t,e()):r};l.ticks=function(t){return qo(n,t)};l.tickFormat=function(t,e){return jo(n,t,e)};l.nice=function(t){return Ro(n,t),e()};l.copy=function(){return t(n,i,r,s)};return e()}([0,1],[0,1],gs,!1)};var zo={s:1,g:1,p:1,r:1,e:1};function Fo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}A.scale.log=function(){return function t(e,l,u,c){function h(t){return(u?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(l)}function f(t){return u?Math.pow(l,t):-Math.pow(l,-t)}function s(t){return e(h(t))}s.invert=function(t){return f(e.invert(t))};s.domain=function(t){return arguments.length?(u=0<=t[0],e.domain((c=t.map(Number)).map(h)),s):c};s.base=function(t){return arguments.length?(l=+t,e.domain(c.map(h)),s):l};s.nice=function(){var t=Mo(c.map(h),u?Math:Bo);return e.domain(t),c=t.map(f),s};s.ticks=function(){var t=Oo(c),e=[],n=t[0],i=t[1],r=Math.floor(h(n)),s=Math.ceil(h(i)),o=l%1?2:l;if(isFinite(s-r)){if(u){for(;r<s;r++)for(var a=1;a<o;a++)e.push(f(r)*a);e.push(f(r))}else for(e.push(f(r));r++<s;)for(var a=o-1;0<a;a--)e.push(f(r)*a);for(r=0;e[r]<n;r++);for(s=e.length;e[s-1]>i;s--);e=e.slice(r,s)}return e};s.tickFormat=function(t,e){if(!arguments.length)return Ho;arguments.length<2?e=Ho:"function"!=typeof e&&(e=A.format(e));var n,i=Math.max(.1,t/s.ticks().length),r=u?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/f(r(h(t)+n))<=i?e(t):""}};s.copy=function(){return t(e.copy(),l,u,c)};return Io(s,e)}(A.scale.linear().domain([0,1]),10,!0,[1,10])};var Ho=A.format(".0e"),Bo={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Uo(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}A.scale.pow=function(){return function t(e,n,i){var r=Uo(n),s=Uo(1/n);function o(t){return e(r(t))}o.invert=function(t){return s(e.invert(t))};o.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(r)),o):i};o.ticks=function(t){return qo(i,t)};o.tickFormat=function(t,e){return jo(i,t,e)};o.nice=function(t){return o.domain(Ro(i,t))};o.exponent=function(t){return arguments.length?(r=Uo(n=t),s=Uo(1/n),e.domain(i.map(r)),o):n};o.copy=function(){return t(e.copy(),n,i)};return Io(o,e)}(A.scale.linear(),1,[0,1])},A.scale.sqrt=function(){return A.scale.pow().exponent(.5)},A.scale.ordinal=function(){return function t(l,u){var r,c,h;function f(t){return c[((r.get(t)||("range"===u.t?r.set(t,l.push(t)):NaN))-1)%c.length]}function d(e,n){return A.range(l.length).map(function(t){return e+n*t})}f.domain=function(t){if(!arguments.length)return l;l=[],r=new _;for(var e,n=-1,i=t.length;++n<i;)r.has(e=t[n])||r.set(e,l.push(e));return f[u.t].apply(f,u.a)};f.range=function(t){return arguments.length?(c=t,h=0,u={t:"range",a:arguments},f):c};f.rangePoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],r=(i-n)/(Math.max(1,l.length-1)+e);return c=d(l.length<2?(n+i)/2:n+r*e/2,r),h=0,u={t:"rangePoints",a:arguments},f};f.rangeBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[i-0],s=t[1-i],o=(s-r)/(l.length-e+2*n);return c=d(r+o*n,o),i&&c.reverse(),h=o*(1-e),u={t:"rangeBands",a:arguments},f};f.rangeRoundBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[i-0],s=t[1-i],o=Math.floor((s-r)/(l.length-e+2*n)),a=s-r-(l.length-e)*o;return c=d(r+Math.round(a/2),o),i&&c.reverse(),h=Math.round(o*(1-e)),u={t:"rangeRoundBands",a:arguments},f};f.rangeBand=function(){return h};f.rangeExtent=function(){return Oo(u.a[0])};f.copy=function(){return t(l,u)};return f.domain(l)}([],{t:"range",a:[[]]})},A.scale.category10=function(){return A.scale.ordinal().range($o)},A.scale.category20=function(){return A.scale.ordinal().range(Wo)},A.scale.category20b=function(){return A.scale.ordinal().range(Vo)},A.scale.category20c=function(){return A.scale.ordinal().range(Yo)};var $o=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ie),Wo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ie),Vo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ie),Yo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ie);A.scale.quantile=function(){return function t(n,i){var r;function e(){var t=0,e=i.length;for(r=[];++t<e;)r[t-1]=A.quantile(n,t/e);return s}function s(t){if(!isNaN(t=+t))return i[A.bisect(r,t)]}s.domain=function(t){return arguments.length?(n=t.filter(c).sort(u),e()):n};s.range=function(t){return arguments.length?(i=t,e()):i};s.quantiles=function(){return r};s.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[0<t?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]};s.copy=function(){return t(n,i)};return e()}([],[])},A.scale.quantize=function(){return function t(e,n,i){var r,s;function o(t){return i[Math.max(0,Math.min(s,Math.floor(r*(t-e))))]}function a(){return r=i.length/(n-e),s=i.length-1,o}o.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],a()):[e,n]};o.range=function(t){return arguments.length?(i=t,a()):i};o.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/r+e,t+1/r]};o.copy=function(){return t(e,n,i)};return a()}(0,1,[0,1])},A.scale.threshold=function(){return function t(e,n){function i(t){if(t<=t)return n[A.bisect(e,t)]}i.domain=function(t){return arguments.length?(e=t,i):e};i.range=function(t){return arguments.length?(n=t,i):n};i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]};i.copy=function(){return t(e,n)};return i}([.5],[0,1])},A.scale.identity=function(){return function t(n){function e(t){return+t}e.invert=e;e.domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n};e.ticks=function(t){return qo(n,t)};e.tickFormat=function(t,e){return jo(n,t,e)};e.copy=function(){return t(n)};return e}([0,1])},A.svg={},A.svg.arc=function(){var c=Qo,h=Jo,f=Xo,d=Zo;function e(){var t=c.apply(this,arguments),e=h.apply(this,arguments),n=f.apply(this,arguments)+Ko,i=d.apply(this,arguments)+Ko,r=(i<n&&(r=n,n=i,i=r),i-n),s=r<bt?"0":"1",o=Math.cos(n),a=Math.sin(n),l=Math.cos(i),u=Math.sin(i);return Go<=r?t?"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z":t?"M"+e*o+","+e*a+"A"+e+","+e+" 0 "+s+",1 "+e*l+","+e*u+"L"+t*l+","+t*u+"A"+t+","+t+" 0 "+s+",0 "+t*o+","+t*a+"Z":"M"+e*o+","+e*a+"A"+e+","+e+" 0 "+s+",1 "+e*l+","+e*u+"L0,0Z"}return e.innerRadius=function(t){return arguments.length?(c=fe(t),e):c},e.outerRadius=function(t){return arguments.length?(h=fe(t),e):h},e.startAngle=function(t){return arguments.length?(f=fe(t),e):f},e.endAngle=function(t){return arguments.length?(d=fe(t),e):d},e.centroid=function(){var t=(c.apply(this,arguments)+h.apply(this,arguments))/2,e=(f.apply(this,arguments)+d.apply(this,arguments))/2+Ko;return[Math.cos(e)*t,Math.sin(e)*t]},e};var Ko=-Ct,Go=wt-kt;function Qo(t){return t.innerRadius}function Jo(t){return t.outerRadius}function Xo(t){return t.startAngle}function Zo(t){return t.endAngle}function ta(u){var c=br,h=wr,f=hi,d=na,e=d.key,p=.7;function n(t){var e,n=[],i=[],r=-1,s=t.length,o=fe(c),a=fe(h);function l(){n.push("M",d(u(i),p))}for(;++r<s;)f.call(this,e=t[r],r)?i.push([+o.call(this,e,r),+a.call(this,e,r)]):i.length&&(l(),i=[]);return i.length&&l(),n.length?n.join(""):null}return n.x=function(t){return arguments.length?(c=t,n):c},n.y=function(t){return arguments.length?(h=t,n):h},n.defined=function(t){return arguments.length?(f=t,n):f},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?d=t:(d=ea.get(t)||na).key,n):e},n.tension=function(t){return arguments.length?(p=t,n):p},n}A.svg.line=function(){return ta(de)};var ea=A.map({linear:na,"linear-closed":function(t){return na(t)+"Z"},step:function(t){var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];for(;++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);1<n&&r.push("H",i[0]);return r.join("")},"step-before":ia,"step-after":ra,basis:aa,"basis-open":function(t){if(t.length<4)return na(t);var e,n=[],i=-1,r=t.length,s=[0],o=[0];for(;++i<3;)e=t[i],s.push(e[0]),o.push(e[1]);n.push(la(ha,s)+","+la(ha,o)),--i;for(;++i<r;)e=t[i],s.shift(),s.push(e[0]),o.shift(),o.push(e[1]),fa(n,s,o);return n.join("")},"basis-closed":function(t){var e,n,i=-1,r=t.length,s=r+4,o=[],a=[];for(;++i<4;)n=t[i%r],o.push(n[0]),a.push(n[1]);e=[la(ha,o),",",la(ha,a)],--i;for(;++i<s;)n=t[i%r],o.shift(),o.push(n[0]),a.shift(),a.push(n[1]),fa(e,o,a);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,r,s=t[0][0],o=t[0][1],a=t[n][0]-s,l=t[n][1]-o,u=-1;++u<=n;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(s+r*a),i[1]=e*i[1]+(1-e)*(o+r*l);return aa(t)},cardinal:function(t,e){return t.length<3?na(t):t[0]+sa(t,oa(t,e))},"cardinal-open":function(t,e){return t.length<4?na(t):t[1]+sa(t.slice(1,t.length-1),oa(t,e))},"cardinal-closed":function(t,e){return t.length<3?na(t):t[0]+sa((t.push(t[0]),t),oa([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?na(t):t[0]+sa(t,function(t){var e,n,i,r,s=[],o=function(t){var e=0,n=t.length-1,i=[],r=t[0],s=t[1],o=i[0]=da(r,s);for(;++e<n;)i[e]=(o+(o=da(r=s,s=t[e+1])))/2;return i[e]=o,i}(t),a=-1,l=t.length-1;for(;++a<l;)e=da(t[a],t[a+1]),R(e)<kt?o[a]=o[a+1]=0:(n=o[a]/e,i=o[a+1]/e,9<(r=n*n+i*i)&&(r=3*e/Math.sqrt(r),o[a]=r*n,o[a+1]=r*i));a=-1;for(;++a<=l;)r=(t[Math.min(l,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),s.push([r||0,o[a]*r||0]);return s}(t))}});function na(t){return t.join("L")}function ia(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function ra(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function sa(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return na(t);var n=t.length!=e.length,i="",r=t[0],s=t[1],o=e[0],a=o,l=1;if(n&&(i+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],r=t[1],l=2),1<e.length){a=e[1],s=t[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(s[0]-a[0])+","+(s[1]-a[1])+","+s[0]+","+s[1];for(var u=2;u<e.length;u++,l++)s=t[l],a=e[u],i+="S"+(s[0]-a[0])+","+(s[1]-a[1])+","+s[0]+","+s[1]}if(n){var c=t[l];i+="Q"+(s[0]+2*a[0]/3)+","+(s[1]+2*a[1]/3)+","+c[0]+","+c[1]}return i}function oa(t,e){for(var n,i=[],r=(1-e)/2,s=t[0],o=t[1],a=1,l=t.length;++a<l;)n=s,s=o,o=t[a],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function aa(t){if(t.length<3)return na(t);var e=1,n=t.length,i=t[0],r=i[0],s=i[1],o=[r,r,r,(i=t[1])[0]],a=[s,s,s,i[1]],l=[r,",",s,"L",la(ha,o),",",la(ha,a)];for(t.push(t[n-1]);++e<=n;)i=t[e],o.shift(),o.push(i[0]),a.shift(),a.push(i[1]),fa(l,o,a);return t.pop(),l.push("L",i),l.join("")}function la(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}ea.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var ua=[0,2/3,1/3,0],ca=[0,1/3,2/3,0],ha=[0,1/6,2/3,1/6];function fa(t,e,n){t.push("C",la(ua,e),",",la(ua,n),",",la(ca,e),",",la(ca,n),",",la(ha,e),",",la(ha,n))}function da(t,e){return(e[1]-t[1])/(e[0]-t[0])}function pa(t){for(var e,n,i,r=-1,s=t.length;++r<s;)n=(e=t[r])[0],i=e[1]+Ko,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function ga(p){var g=br,m=br,v=0,y=wr,_=hi,b=na,e=b.key,w=b,C="L",k=.7;function n(t){var e,n,i,r=[],s=[],o=[],a=-1,l=t.length,u=fe(g),c=fe(v),h=g===m?function(){return n}:fe(m),f=v===y?function(){return i}:fe(y);function d(){r.push("M",b(p(o),k),C,w(p(s.reverse()),k),"Z")}for(;++a<l;)_.call(this,e=t[a],a)?(s.push([n=+u.call(this,e,a),i=+c.call(this,e,a)]),o.push([+h.call(this,e,a),+f.call(this,e,a)])):s.length&&(d(),s=[],o=[]);return s.length&&d(),r.length?r.join(""):null}return n.x=function(t){return arguments.length?(g=m=t,n):m},n.x0=function(t){return arguments.length?(g=t,n):g},n.x1=function(t){return arguments.length?(m=t,n):m},n.y=function(t){return arguments.length?(v=y=t,n):y},n.y0=function(t){return arguments.length?(v=t,n):v},n.y1=function(t){return arguments.length?(y=t,n):y},n.defined=function(t){return arguments.length?(_=t,n):_},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?b=t:(b=ea.get(t)||na).key,w=b.reverse||b,C=b.closed?"M":"L",n):e},n.tension=function(t){return arguments.length?(k=t,n):k},n}function ma(t){return t.radius}function va(t){return[t.x,t.y]}function ya(){return 64}function _a(){return"circle"}function ba(t){var e=Math.sqrt(t/bt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}A.svg.line.radial=function(){var t=ta(pa);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(ia.reverse=ra).reverse=ia,A.svg.area=function(){return ga(de)},A.svg.area.radial=function(){var t=ga(pa);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},A.svg.chord=function(){var r=or,s=ar,l=ma,u=Xo,c=Zo;function e(t,e){var n=o(this,r,t,e),i=o(this,s,t,e);return"M"+n.p0+a(n.r,n.p1,n.a1-n.a0)+(function(t,e){return t.a0==e.a0&&t.a1==e.a1}(n,i)?h(n.r,n.p1,n.r,n.p0):h(n.r,n.p1,i.r,i.p0)+a(i.r,i.p1,i.a1-i.a0)+h(i.r,i.p1,n.r,n.p0))+"Z"}function o(t,e,n,i){var r=e.call(t,n,i),s=l.call(t,r,i),o=u.call(t,r,i)+Ko,a=c.call(t,r,i)+Ko;return{r:s,a0:o,a1:a,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(a),s*Math.sin(a)]}}function a(t,e,n){return"A"+t+","+t+" 0 "+ +(bt<n)+",1 "+e}function h(t,e,n,i){return"Q 0,0 "+i}return e.radius=function(t){return arguments.length?(l=fe(t),e):l},e.source=function(t){return arguments.length?(r=fe(t),e):r},e.target=function(t){return arguments.length?(s=fe(t),e):s},e.startAngle=function(t){return arguments.length?(u=fe(t),e):u},e.endAngle=function(t){return arguments.length?(c=fe(t),e):c},e},A.svg.diagonal=function(){var o=or,a=ar,l=va;function e(t,e){var n=o.call(this,t,e),i=a.call(this,t,e),r=(n.y+i.y)/2,s=[n,{x:n.x,y:r},{x:i.x,y:r},i];return"M"+(s=s.map(l))[0]+"C"+s[1]+" "+s[2]+" "+s[3]}return e.source=function(t){return arguments.length?(o=fe(t),e):o},e.target=function(t){return arguments.length?(a=fe(t),e):a},e.projection=function(t){return arguments.length?(l=t,e):l},e},A.svg.diagonal.radial=function(){var t=A.svg.diagonal(),e=va,n=t.projection;return t.projection=function(t){return arguments.length?n(function(i){return function(){var t=i.apply(this,arguments),e=t[0],n=t[1]+Ko;return[e*Math.cos(n),e*Math.sin(n)]}}(e=t)):e},t},A.svg.symbol=function(){var n=_a,i=ya;function e(t,e){return(wa.get(n.call(this,t,e))||ba)(i.call(this,t,e))}return e.type=function(t){return arguments.length?(n=fe(t),e):n},e.size=function(t){return arguments.length?(i=fe(t),e):i},e};var wa=A.map({circle:ba,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ka)),n=e*ka;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ca),n=e*Ca/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ca),n=e*Ca/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});A.svg.symbolTypes=wa.keys();var Ca=Math.sqrt(3),ka=Math.tan(30*Tt);function xa(t,e){return M(t,Ea),t.id=e,t}var Ta,Sa,Ea=[],Oa=0;function Pa(t,i,r,s){var o=t.id;return it(t,"function"==typeof r?function(t,e,n){t.__transition__[o].tween.set(i,s(r.call(t,t.__data__,e,n)))}:(r=s(r),function(t){t.__transition__[o].tween.set(i,r)}))}function Na(t){return null==t&&(t=""),function(){this.textContent=t}}function Ma(c,h,f,t){var d=c.__transition__||(c.__transition__={active:0,count:0}),p=d[f];if(!p){var g=t.time;p=d[f]={tween:new _,time:g,ease:t.ease,delay:t.delay,duration:t.duration},++d.count,A.timer(function(t){var r=c.__data__,s=p.ease,e=p.delay,o=p.duration,n=be,a=[];if(n.t=e+g,e<=t)return i(t-e);function i(t){if(d.active>f)return u();d.active=f,p.event&&p.event.start.call(c,r,h),p.tween.forEach(function(t,e){(e=e.call(c,r,h))&&a.push(e)}),A.timer(function(){return n.c=l(t||1)?hi:l,1},0,g)}function l(t){if(d.active!==f)return u();for(var e=t/o,n=s(e),i=a.length;0<i;)a[--i].call(c,n);return 1<=e?(p.event&&p.event.end.call(c,r,h),u()):void 0}function u(){return--d.count?delete d[f]:delete c.__transition__,1}n.c=i},0,g)}}Ea.call=B.call,Ea.empty=B.empty,Ea.node=B.node,Ea.size=B.size,A.transition=function(t){return arguments.length?Ta?t.transition():t:at.transition()},(A.transition.prototype=Ea).select=function(t){var e,n,i,r=this.id,s=[];t=U(t);for(var o=-1,a=this.length;++o<a;){s.push(e=[]);for(var l=this[o],u=-1,c=l.length;++u<c;)(i=l[u])&&(n=t.call(i,i.__data__,u,o))?("__data__"in i&&(n.__data__=i.__data__),Ma(n,u,r,i.__transition__[r]),e.push(n)):e.push(null)}return xa(s,r)},Ea.selectAll=function(t){var e,n,i,r,s,o=this.id,a=[];t=$(t);for(var l=-1,u=this.length;++l<u;)for(var c=this[l],h=-1,f=c.length;++h<f;)if(i=c[h]){s=i.__transition__[o],n=t.call(i,i.__data__,h,l),a.push(e=[]);for(var d=-1,p=n.length;++d<p;)(r=n[d])&&Ma(r,d,o,s),e.push(r)}return xa(a,o)},Ea.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=nt(t));for(var r=0,s=this.length;r<s;r++){i.push(e=[]);for(var o,a=0,l=(o=this[r]).length;a<l;a++)(n=o[a])&&t.call(n,n.__data__,a,r)&&e.push(n)}return xa(i,this.id)},Ea.tween=function(e,n){var i=this.id;return arguments.length<2?this.node().__transition__[i].tween.get(e):it(this,null==n?function(t){t.__transition__[i].tween.remove(e)}:function(t){t.__transition__[i].tween.set(e,n)})},Ea.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i="transform"==t?Is:gs,r=A.ns.qualify(t);function s(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}return Pa(this,"attr."+t,e,r.local?function(n){return null==n?o:(n+="",function(){var e,t=this.getAttributeNS(r.space,r.local);return t!==n&&(e=i(t,n),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}:function(n){return null==n?s:(n+="",function(){var e,t=this.getAttribute(r);return t!==n&&(e=i(t,n),function(t){this.setAttribute(r,e(t))})})})},Ea.attrTween=function(t,i){var r=A.ns.qualify(t);return this.tween("attr."+t,r.local?function(t,e){var n=i.call(this,t,e,this.getAttributeNS(r.space,r.local));return n&&function(t){this.setAttributeNS(r.space,r.local,n(t))}}:function(t,e){var n=i.call(this,t,e,this.getAttribute(r));return n&&function(t){this.setAttribute(r,n(t))}})},Ea.style=function(i,t,r){var e=arguments.length;if(e<3){if("string"!=typeof i){for(r in e<2&&(t=""),i)this.style(r,i[r],t);return this}r=""}function s(){this.style.removeProperty(i)}return Pa(this,"style."+i,t,function(n){return null==n?s:(n+="",function(){var e,t=I.getComputedStyle(this,null).getPropertyValue(i);return t!==n&&(e=gs(t,n),function(t){this.style.setProperty(i,e(t),r)})})})},Ea.styleTween=function(i,r,s){return arguments.length<3&&(s=""),this.tween("style."+i,function(t,e){var n=r.call(this,t,e,I.getComputedStyle(this,null).getPropertyValue(i));return n&&function(t){this.style.setProperty(i,n(t),s)}})},Ea.text=function(t){return Pa(this,"text",t,Na)},Ea.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},Ea.ease=function(e){var n=this.id;return arguments.length<1?this.node().__transition__[n].ease:("function"!=typeof e&&(e=A.ease.apply(A,arguments)),it(this,function(t){t.__transition__[n].ease=e}))},Ea.delay=function(i){var r=this.id;return arguments.length<1?this.node().__transition__[r].delay:it(this,"function"==typeof i?function(t,e,n){t.__transition__[r].delay=+i.call(t,t.__data__,e,n)}:(i=+i,function(t){t.__transition__[r].delay=i}))},Ea.duration=function(i){var r=this.id;return arguments.length<1?this.node().__transition__[r].duration:it(this,"function"==typeof i?function(t,e,n){t.__transition__[r].duration=Math.max(1,i.call(t,t.__data__,e,n))}:(i=Math.max(1,i),function(t){t.__transition__[r].duration=i}))},Ea.each=function(i,n){var r=this.id;if(arguments.length<2){var t=Sa,e=Ta;Ta=r,it(this,function(t,e,n){Sa=t.__transition__[r],i.call(t,t.__data__,e,n)}),Sa=t,Ta=e}else it(this,function(t){var e=t.__transition__[r];(e.event||(e.event=A.dispatch("start","end"))).on(i,n)});return this},Ea.transition=function(){for(var t,e,n,i=this.id,r=++Oa,s=[],o=0,a=this.length;o<a;o++){s.push(t=[]);for(var l,u=0,c=(l=this[o]).length;u<c;u++)(e=l[u])&&((n=Object.create(e.__transition__[i])).delay+=n.duration,Ma(e,u,r,n)),t.push(e)}return xa(s,r)},A.svg.axis=function(){var b,w=A.scale.linear(),C=Da,k=6,x=6,T=3,S=[10],E=null;function n(t){t.each(function(){var t,e=A.select(this),n=this.__chart__||w,i=this.__chart__=w.copy(),r=null==E?i.ticks?i.ticks.apply(i,S):i.domain():E,s=null==b?i.tickFormat?i.tickFormat.apply(i,S):de:b,o=e.selectAll(".tick").data(r,i),a=o.enter().insert("g",".domain").attr("class","tick").style("opacity",kt),l=A.transition(o.exit()).style("opacity",kt).remove(),u=A.transition(o.order()).style("opacity",1),c=Po(i),h=e.selectAll(".domain").data([0]),f=(h.enter().append("path").attr("class","domain"),A.transition(h));a.append("line"),a.append("text");var d=a.select("line"),p=u.select("line"),g=o.select("text").text(s),m=a.select("text"),v=u.select("text");switch(C){case"bottom":t=Ia,d.attr("y2",k),m.attr("y",Math.max(k,0)+T),p.attr("x2",0).attr("y2",k),v.attr("x",0).attr("y",Math.max(k,0)+T),g.attr("dy",".71em").style("text-anchor","middle"),f.attr("d","M"+c[0]+","+x+"V0H"+c[1]+"V"+x);break;case"top":t=Ia,d.attr("y2",-k),m.attr("y",-(Math.max(k,0)+T)),p.attr("x2",0).attr("y2",-k),v.attr("x",0).attr("y",-(Math.max(k,0)+T)),g.attr("dy","0em").style("text-anchor","middle"),f.attr("d","M"+c[0]+","+-x+"V0H"+c[1]+"V"+-x);break;case"left":t=Ra,d.attr("x2",-k),m.attr("x",-(Math.max(k,0)+T)),p.attr("x2",-k).attr("y2",0),v.attr("x",-(Math.max(k,0)+T)).attr("y",0),g.attr("dy",".32em").style("text-anchor","end"),f.attr("d","M"+-x+","+c[0]+"H0V"+c[1]+"H"+-x);break;case"right":t=Ra,d.attr("x2",k),m.attr("x",Math.max(k,0)+T),p.attr("x2",k).attr("y2",0),v.attr("x",Math.max(k,0)+T).attr("y",0),g.attr("dy",".32em").style("text-anchor","start"),f.attr("d","M"+x+","+c[0]+"H0V"+c[1]+"H"+x)}if(i.rangeBand){var y=i,_=y.rangeBand()/2;n=i=function(t){return y(t)+_}}else n.rangeBand?n=i:l.call(t,i);a.call(t,n),u.call(t,i)})}return n.scale=function(t){return arguments.length?(w=t,n):w},n.orient=function(t){return arguments.length?(C=t in Aa?t+"":Da,n):C},n.ticks=function(){return arguments.length?(S=arguments,n):S},n.tickValues=function(t){return arguments.length?(E=t,n):E},n.tickFormat=function(t){return arguments.length?(b=t,n):b},n.tickSize=function(t){var e=arguments.length;return e?(k=+t,x=+arguments[e-1],n):k},n.innerTickSize=function(t){return arguments.length?(k=+t,n):k},n.outerTickSize=function(t){return arguments.length?(x=+t,n):x},n.tickPadding=function(t){return arguments.length?(T=+t,n):T},n.tickSubdivide=function(){return arguments.length&&n},n};var Da="bottom",Aa={top:1,right:1,bottom:1,left:1};function Ia(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Ra(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}A.svg.brush=function(){var y,_,b=q(E,"brushstart","brush","brushend"),w=null,C=null,k=[0,0],x=[0,0],T=!0,S=!0,o=qa[0];function E(t){t.each(function(){var t=A.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(o,de);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return La[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",E.empty()?"none":null);var i,r=A.transition(t),s=A.transition(e);w&&(i=Po(w),s.attr("x",i[0]).attr("width",i[1]-i[0]),P(r)),C&&(i=Po(C),s.attr("y",i[0]).attr("height",i[1]-i[0]),N(r)),O(r)})}function O(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+k[+/e$/.test(t)]+","+x[+/^s/.test(t)]+")"})}function P(t){t.select(".extent").attr("x",k[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function N(t){t.select(".extent").attr("y",x[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",x[1]-x[0])}function a(){var h,n,i=this,t=A.select(A.event.target),r=b.of(i,arguments),s=A.select(i),e=t.datum(),o=!/^(n|s)$/.test(e)&&w,a=!/^(e|w)$/.test(e)&&C,f=t.classed("extent"),l=pt(),d=A.mouse(i),u=A.select(I).on("keydown.brush",function(){32==A.event.keyCode&&(f||(h=null,d[0]-=k[1],d[1]-=x[1],f=2),L())}).on("keyup.brush",function(){32==A.event.keyCode&&2==f&&(d[0]+=k[1],d[1]+=x[1],f=0,L())});if(A.event.changedTouches?u.on("touchmove.brush",g).on("touchend.brush",v):u.on("mousemove.brush",g).on("mouseup.brush",v),s.interrupt().selectAll("*").interrupt(),f)d[0]=k[0]-d[0],d[1]=x[0]-d[1];else if(e){var c=+/w$/.test(e),p=+/^n/.test(e);n=[k[1-c]-d[0],x[1-p]-d[1]],d[0]=k[c],d[1]=x[p]}else A.event.altKey&&(h=d.slice());function g(){var t=A.mouse(i),e=!1;n&&(t[0]+=n[0],t[1]+=n[1]),f||(A.event.altKey?(h||(h=[(k[0]+k[1])/2,(x[0]+x[1])/2]),d[0]=k[+(t[0]<h[0])],d[1]=x[+(t[1]<h[1])]):h=null),o&&m(t,w,0)&&(P(s),e=!0),a&&m(t,C,1)&&(N(s),e=!0),e&&(O(s),r({type:"brush",mode:f?"move":"resize"}))}function m(t,e,n){var i,r,s=Po(e),o=s[0],a=s[1],l=d[n],u=n?x:k,c=u[1]-u[0];if(f&&(o-=l,a-=c+l),i=(n?S:T)?Math.max(o,Math.min(a,t[n])):t[n],f?r=(i+=l)+c:(h&&(l=Math.max(o,Math.min(a,2*h[n]-i))),l<i?(r=i,i=l):r=l),u[0]!=i||u[1]!=r)return n?_=null:y=null,u[0]=i,u[1]=r,!0}function v(){g(),s.style("pointer-events","all").selectAll(".resize").style("display",E.empty()?"none":null),A.select("body").style("cursor",null),u.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),l(),r({type:"brushend"})}s.style("pointer-events","none").selectAll(".resize").style("display",null),A.select("body").style("cursor",t.style("cursor")),r({type:"brushstart"}),g()}return E.event=function(t){t.each(function(){var i=b.of(this,arguments),r={x:k,y:x,i:y,j:_},t=this.__chart__||r;this.__chart__=r,Ta?A.select(this).transition().each("start.brush",function(){y=t.i,_=t.j,k=t.x,x=t.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=ms(k,r.x),n=ms(x,r.y);return y=_=null,function(t){k=r.x=e(t),x=r.y=n(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=r.i,_=r.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},E.x=function(t){return arguments.length?(o=qa[!(w=t)<<1|!C],E):w},E.y=function(t){return arguments.length?(o=qa[!w<<1|!(C=t)],E):C},E.clamp=function(t){return arguments.length?(w&&C?(T=!!t[0],S=!!t[1]):w?T=!!t:C&&(S=!!t),E):w&&C?[T,S]:w?T:C?S:null},E.extent=function(t){var e,n,i,r,s;return arguments.length?(w&&(e=t[0],n=t[1],C&&(e=e[0],n=n[0]),y=[e,n],w.invert&&(e=w(e),n=w(n)),n<e&&(s=e,e=n,n=s),e==k[0]&&n==k[1]||(k=[e,n])),C&&(i=t[0],r=t[1],w&&(i=i[1],r=r[1]),_=[i,r],C.invert&&(i=C(i),r=C(r)),r<i&&(s=i,i=r,r=s),i==x[0]&&r==x[1]||(x=[i,r])),E):(w&&(y?(e=y[0],n=y[1]):(e=k[0],n=k[1],w.invert&&(e=w.invert(e),n=w.invert(n)),n<e&&(s=e,e=n,n=s))),C&&(_?(i=_[0],r=_[1]):(i=x[0],r=x[1],C.invert&&(i=C.invert(i),r=C.invert(r)),r<i&&(s=i,i=r,r=s))),w&&C?[[e,i],[n,r]]:w?[e,n]:C&&[i,r])},E.clear=function(){return E.empty()||(k=[0,0],x=[0,0],y=_=null),E},E.empty=function(){return!!w&&k[0]==k[1]||!!C&&x[0]==x[1]},A.rebind(E,b,"on")};var La={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},qa=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],ja=Ne.format=sn.timeFormat,za=ja.utc,Fa=za("%Y-%m-%dT%H:%M:%S.%LZ");function Ha(t){return t.toISOString()}function Ba(e,r,t){function o(t){return e(t)}function a(t,e){var n=(t[1]-t[0])/e,i=A.bisect($a,n);return i==$a.length?[r.year,Lo(t.map(function(t){return t/31536e6}),e)[2]]:i?r[n/$a[i-1]<$a[i]/n?i-1:i]:[Ya,Lo(t,e)[2]]}return o.invert=function(t){return Ua(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain(t),o):e.domain().map(Ua)},o.nice=function(e,n){var t=o.domain(),i=Oo(t),r=null==e?a(i,10):"number"==typeof e&&a(i,e);function s(t){return!isNaN(t)&&!e.range(t,Ua(+t+1),n).length}return r&&(e=r[0],n=r[1]),o.domain(Mo(t,1<n?{floor:function(t){for(;s(t=e.floor(t));)t=Ua(t-1);return t},ceil:function(t){for(;s(t=e.ceil(t));)t=Ua(+t+1);return t}}:e))},o.ticks=function(t,e){var n=Oo(o.domain()),i=null==t?a(n,10):"number"==typeof t?a(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],Ua(+n[1]+1),e<1?1:e)},o.tickFormat=function(){return t},o.copy=function(){return Ba(e.copy(),r,t)},Io(o,e)}function Ua(t){return new Date(t)}ja.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ha:Fa,Ha.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ha.toString=Fa.toString,Ne.second=Ie(function(t){return new Me(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Ne.seconds=Ne.second.range,Ne.seconds.utc=Ne.second.utc.range,Ne.minute=Ie(function(t){return new Me(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Ne.minutes=Ne.minute.range,Ne.minutes.utc=Ne.minute.utc.range,Ne.hour=Ie(function(t){var e=t.getTimezoneOffset()/60;return new Me(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Ne.hours=Ne.hour.range,Ne.hours.utc=Ne.hour.utc.range,Ne.month=Ie(function(t){return(t=Ne.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Ne.months=Ne.month.range,Ne.months.utc=Ne.month.utc.range;var $a=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Wa=[[Ne.second,1],[Ne.second,5],[Ne.second,15],[Ne.second,30],[Ne.minute,1],[Ne.minute,5],[Ne.minute,15],[Ne.minute,30],[Ne.hour,1],[Ne.hour,3],[Ne.hour,6],[Ne.hour,12],[Ne.day,1],[Ne.day,2],[Ne.week,1],[Ne.month,1],[Ne.month,3],[Ne.year,1]],Va=ja.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",hi]]),Ya={range:function(t,e,n){return A.range(Math.ceil(t/n)*n,+e,n).map(Ua)},floor:de,ceil:de};Wa.year=Ne.year,Ne.scale=function(){return Ba(A.scale.linear(),Wa,Va)};var Ka=Wa.map(function(t){return[t[0].utc,t[1]]}),Ga=za.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",hi]]);function Qa(t){return JSON.parse(t.responseText)}function Ja(t){var e=i.createRange();return e.selectNode(i.body),e.createContextualFragment(t.responseText)}return Ka.year=Ne.year.utc,Ne.scale.utc=function(){return Ba(A.scale.linear(),Ka,Ga)},A.text=pe(function(t){return t.responseText}),A.json=function(t,e){return ge(t,"application/json",Qa,e)},A.html=function(t,e){return ge(t,"text/html",Ja,e)},A.xml=pe(function(t){return t.responseXML}),A}()},{}],238:[function($,n,i){(function(B,U){var t,e;t=this,e=function(){function u(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,e=void 0,r=void 0,o=function(t,e){f[i]=t,f[i+1]=e,2===(i+=2)&&(r?r(d):y())};var t="undefined"!=typeof window?window:void 0,s=t||{},a=s.MutationObserver||s.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==B&&"[object process]"==={}.toString.call(B),c="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(d,1)}}var f=new Array(1e3);function d(){for(var t=0;t<i;t+=2){(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0}i=0}var p,g,m,v,y=void 0;function _(t,e){var n=this,i=new this.constructor(C);void 0===i[w]&&q(i);var r=n._state;if(r){var s=arguments[r-1];o(function(){return R(r,i,s,n._result)})}else A(n,i,t,e);return i}function b(t){if(t&&"object"===(void 0===t?"undefined":_typeof(t))&&t.constructor===this)return t;var e=new this(C);return P(e,t),e}y=l?function(){return B.nextTick(d)}:a?(g=0,m=new a(d),v=document.createTextNode(""),m.observe(v,{characterData:!0}),function(){v.data=g=++g%2}):c?((p=new MessageChannel).port1.onmessage=d,function(){return p.port2.postMessage(0)}):void 0===t&&"function"==typeof $?function(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(d)}:h()}catch(t){return h()}}():h();var w=Math.random().toString(36).substring(2);function C(){}var k=void 0,x=1,T=2,S={error:null};function E(t){try{return t.then}catch(t){return S.error=t,S}}function O(t,e,n){e.constructor===t.constructor&&n===_&&e.constructor.resolve===b?function(e,t){t._state===x?M(e,t._result):t._state===T?D(e,t._result):A(t,void 0,function(t){return P(e,t)},function(t){return D(e,t)})}(t,e):n===S?(D(t,S.error),S.error=null):void 0===n?M(t,e):u(n)?function(t,i,r){o(function(e){var n=!1,t=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(r,i,function(t){n||(n=!0,i!==t?P(e,t):M(e,t))},function(t){n||(n=!0,D(e,t))},e._label);!n&&t&&(n=!0,D(e,t))},t)}(t,e,n):M(t,e)}function P(t,e){t===e?D(t,new TypeError("You cannot resolve a promise with itself")):!function(t){var e=void 0===t?"undefined":_typeof(t);return null!==t&&("object"===e||"function"===e)}(e)?M(t,e):O(t,e,E(e))}function N(t){t._onerror&&t._onerror(t._result),I(t)}function M(t,e){t._state===k&&(t._result=e,t._state=x,0!==t._subscribers.length&&o(I,t))}function D(t,e){t._state===k&&(t._state=T,t._result=e,o(N,t))}function A(t,e,n,i){var r=t._subscribers,s=r.length;t._onerror=null,r[s]=e,r[s+x]=n,r[s+T]=i,0===s&&t._state&&o(I,t)}function I(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,s=t._result,o=0;o<e.length;o+=3)i=e[o],r=e[o+n],i?R(n,i,r,s):r(s);t._subscribers.length=0}}function R(t,e,n,i){var r=u(n),s=void 0,o=void 0,a=void 0,l=void 0;if(r){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(n,i))===S?(l=!0,o=s.error,s.error=null):a=!0,e===s)return void D(e,new TypeError("A promises callback cannot return that same promise."))}else s=i,a=!0;e._state!==k||(r&&a?P(e,s):l?D(e,o):t===x?M(e,s):t===T&&D(e,s))}var L=0;function q(t){t[w]=L++,t._state=void 0,t._result=void 0,t._subscribers=[]}var j=(z.prototype._enumerate=function(t){for(var e=0;this._state===k&&e<t.length;e++)this._eachEntry(t[e],e)},z.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===b){var r=E(e);if(r===_&&e._state!==k)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===F){var s=new n(C);O(s,e,r),this._willSettleAt(s,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},z.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===k&&(this._remaining--,t===T?D(i,n):this._result[e]=n),0===this._remaining&&M(i,this._result)},z.prototype._willSettleAt=function(t,e){var n=this;A(t,void 0,function(t){return n._settledAt(x,e,t)},function(t){return n._settledAt(T,e,t)})},z);function z(t,e){this._instanceConstructor=t,this.promise=new t(C),this.promise[w]||q(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&M(this.promise,this._result))):D(this.promise,new Error("Array Methods must be provided an Array"))}var F=(H.prototype.catch=function(t){return this.then(null,t)},H.prototype.finally=function(e){var n=this.constructor;return u(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},H);function H(t){this[w]=L++,this._result=this._state=void 0,this._subscribers=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof H?function(e,t){try{t(function(t){P(e,t)},function(t){D(e,t)})}catch(t){D(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return F.prototype.then=_,F.all=function(t){return new j(this,t).promise},F.race=function(r){var s=this;return n(r)?new s(function(t,e){for(var n=r.length,i=0;i<n;i++)s.resolve(r[i]).then(t,e)}):new s(function(t,e){return e(new TypeError("You must pass an array to race."))})},F.resolve=b,F.reject=function(t){var e=new this(C);return D(e,t),e},F._setScheduler=function(t){r=t},F._setAsap=function(t){o=t},F._asap=o,F.polyfill=function(){var t=void 0;if(void 0!==U)t=U;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=F},F.Promise=F},"object"===(void 0===i?"undefined":_typeof(i))&&void 0!==n?n.exports=e():t.ES6Promise=e()}).call(this,$("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:275}],239:[function(t,e,n){(function(){n.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],240:[function(n,t,i){(function(){var u,s,c,h,t,f,d,p,g,m,v,y,_,b,w,e;c=n("url"),s=n("JSONStream"),m=n("http"),u=n("./constants").ACCEPT_HEADER,t=n("./version").VERSION,e=w=n("./util"),p=e.error,d=e.defer,v=e.merge,e.invoke,h="node-http/imjs-"+t,i.supports=function(){return!0},b=function(t,i,r){return function(t){var e,n;return null==t.pipe?r(new Error("response is not a stream")):(t.on("error",r),null!=t.statusCode&&200!==t.statusCode?((e=s.parse("error")).pause(),t.pipe(e),r([t.statusCode,e])):((n=s.parse("results.*")).pause(),t.pipe(n),i(n)))}},g=function(t,e,n,i){return"Could not parse response to "+t.type+" "+t.url+': "'+e+'" ('+i+": "+n+")"},f=function(l,u,c){return function(o){var a;return a="",o.on("data",function(t){return a+=t}),o.on("error",c),o.on("end",function(){var t,e,n,i,r,s;if(null!=(null!=o?o.headers:void 0)&&(t=o.headers["content-type"]),"application/json"!==t&&!/json/.test(l.dataType)&&!/json/.test(l.data.format))return(i=a.match(/\[ERROR\] (\d+)([\s\S]*)/))?c(new Error(i[2])):(200<=(s=o.statusCode)&&s<400?u:c)(a);if(""===a&&200===o.statusCode)return u();try{return(n=(r=JSON.parse(a)).error)?c(new Error(n)):u(r)}catch(t){return e=t,400<=o.statusCode?c(new Error(o.statusCode)):c(new Error(g(l,a,e,o.statusCode)))}})}},i.iterReq=function(c,h,f){return function(t,e,n,i,r){var s,o,a,l,u;return null==e&&(e={}),null==n&&(n=function(){}),null==i&&(i=function(){}),null==r&&(r=function(){}),w.isFunction(e)&&(e=(u=[{},e,n,i])[0],n=u[1],i=u[2],r=u[3]),l=v({format:f},e,{query:t.toXML()}),s=function(t){return t.on("data",n),t.on("error",i),t.on("end",r),setTimeout(function(){if(null!=t.resume)return t.resume()},3),t},a=function(t){var e,n;return n=t[0],(e=t[1]).on("data",i),e.on("error",i),e.on("end",r),null!=e.resume&&e.resume(),p(n)},(o=this.makeRequest(c,h,l,null,!0)).then(s,a),o}},_=function(t,e,n){var i;return i=setTimeout(function(){return e("Request timed out.")},t),n.then(function(){return cancelTimeout(i)})},y=function(t){var e,n,i,r,s,o,a,l;if(!t.url)throw new Error("No url provided in "+JSON.stringify(t));if("string"==typeof t.data){if(i=t.data,"GET"===(o=t.type)||"DELETE"===o)throw new Error("Invalid request. "+t.type+" requests must not have bodies")}else i=w.querystring(t.data);if((n=c.parse(t.url,!0)).withCredentials=!1,n.method=t.type||"GET",null!=t.port&&(n.port=t.port),n.headers={"User-Agent":h,Accept:u[t.dataType]},("GET"===(a=n.method)||"DELETE"===a)&&(null!=i?i.length:void 0)?(r=/\?/.test(n.path)?"&":"?",n.path+=r+i,i=null):(n.headers["Content-Type"]=(t.contentType||"application/x-www-form-urlencoded")+"; charset=UTF-8",n.headers["Content-Length"]=i.length),null!=t.headers)for(e in l=t.headers)s=l[e],n.headers[e]=s;return null!=t.auth&&(n.auth=t.auth),[n,i]},i.doReq=function(e,t){var n,i,r,s,o,a,l,u,c,h;r=(c=d()).promise,a=c.resolve,s=c.reject,r.then(null,e.error);try{h=y(e),u=h[0],i=h[1],n=(t?b:f)(e,a,s),(o=m.request(u,n)).on("error",function(t){return s(new Error("Error: "+u.method+" "+e.url+": "+t))}),null!=i&&o.write(i),o.end(),0<(l=e.timeout)&&_(l,s,r)}catch(t){s(t)}return r}}).call(this)},{"./constants":239,"./util":251,"./version":252,JSONStream:232,http:295,url:301}],241:[function(x,t,T){(function(){function n(t,e){return function(){return t.apply(e,arguments)}}var i,r,s,t,h,o,e,a,l,u,c,f,d,p,g,m,v,y,_={}.hasOwnProperty,b=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function w(t){var e,n;for(e in t)_.call(t,e)&&(n=t[e],this[e]=n)}function C(t){var e,n;for(e in t)_.call(t,e)&&(n=t[e],this[e]=n)}function k(t,e){this.uid=t,this.service=e,this.del=n(this.del,this),this.fetchResults=n(this.fetchResults,this),this.fetchErrorMessage=n(this.fetchErrorMessage,this),this.fetchStatus=n(this.fetchStatus,this)}a=x("./util"),c=T,f=a.uniqBy,o=a.difference,h=a.defer,d=a.withCB,u=a.id,l=a.get,e=a.fold,t=a.concatMap,w.prototype.getStats=function(t){return null!=t?this.stats[t]:this.stats},p=t(l("matches")),w.prototype.getMatches=function(t){var e;return"MATCH"===t?this.matches[t]:null!=(e=p(this.matches[t]))?e:[]},w.prototype.getMatchIds=function(t){return null!=t?this.getMatches(t).map(l("id")):this.allMatchIds()},w.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},w.prototype.allMatchIds=function(){var n;return e((n=this,function(t,e){return t.concat(n.getMatchIds(e))}))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},i=w,y=f(u),g=t(u),m=function(n){var i,r;return g(function(){var t,e;for(i in e=[],t=n.identifiers)r=t[i],e.push(r);return e}())},v=function(t,e){return null==e||0<=b.call(m(t),e)},C.prototype.getStats=function(t){switch(t){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},C.prototype.getIdentifierStats=function(){var t,e,n;return e=(n=function(i){var r,s;return y(g(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)s=i[t],n.push(function(){var t;for(r in t=[],null!=s?s.identifiers:void 0)t.push(r);return t}());return n}()))})(this.getMatches("MATCH")),t=n(this.getMatches()),{matches:e.length,all:t.length,issues:o(t,e).length}},C.prototype.getObjectStats=function(){var e;return{matches:this.goodMatchIds().length,all:this.allMatchIds().length,issues:function(){var t;for(u in t=[],this)_.call(this,u)&&(e=this[u],b.call(m(e),"MATCH")<0&&t.push(u));return t}.call(this).length}},C.prototype.getMatches=function(t){var e,n;for(u in n=[],this)_.call(this,u)&&(e=this[u],v(e,t)&&n.push(e));return n},C.prototype.getMatchIds=function(t){var e,n;for(u in n=[],this)_.call(this,u)&&(e=this[u],v(e,t)&&n.push(u));return n},C.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},C.prototype.allMatchIds=function(){return this.getMatchIds()},s=C,k.prototype.fetchStatus=function(t){return d(t,this.service.get("ids/"+this.uid+"/status").then(l("status")))},k.prototype.fetchErrorMessage=function(t){return d(t,this.service.get("ids/"+this.uid+"/status").then(l("message")))},k.prototype.fetchResults=function(t){var n;return n=this.service.get("ids/"+this.uid+"/result").then(l("results")),this.service.fetchVersion().then(function(e){return n.then(function(t){return 16<=e?new i(t):new s(t)})})},k.prototype.del=function(t){return d(t,this.service.makeRequest("DELETE","ids/"+this.uid))},k.prototype.decay=50,k.prototype.poll=function(t,e,n){var i,r,s,o,a,l,u,c;return s=(u=h()).promise,a=u.resolve,o=u.reject,s.then(t,e),r=null!=n?n:function(){},(l=this.fetchStatus()).then(null,o),i=this.decay,this.decay=Math.min(6e4,1.25*i),l.then((c=this,function(t){switch(r(t),t){case"SUCCESS":return c.fetchResults().then(a,o);case"ERROR":return c.fetchErrorMessage().then(o,o);default:return setTimeout(function(){return c.poll(a,o,r)},i)}})),s},(r=k).prototype.wait=r.prototype.poll,r.create=function(e){return function(t){return new r(t,e)}},c.IDResolutionJob=r,c.CategoryResults=i,c.IdResults=s}).call(this)},{"./util":251}],242:[function(g,t,m){(function(){function r(t,e){return function(){return t.apply(e,arguments)}}var t,e,c,s,n,h,o,i,f,d,a,l={}.hasOwnProperty,p=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function u(t,e){var n,i;for(n in this.service=e,this._updateTags=r(this._updateTags,this),this.hasTag=r(this.hasTag,this),t)l.call(t,n)&&(i=t[n],this[n]=i);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(o).map(s)}f=g("./util"),n=m,i=f.merge,d=f.withCB,c=f.get,h=f.invoke,f.REQUIRES_VERSION,f.set,e=f.dejoin,o=function(t){return"__folder__"===t.substr(0,t.indexOf(":"))},s=function(t){return t.substr(t.indexOf(":")+1)},u.prototype.hasTag=function(t){return 0<=p.call(this.tags,t)},u.prototype.query=function(t){return null==t&&(t=["*"]),this.service.query({select:t,from:this.type,where:[[this.type,"IN",this.name]]})},u.prototype.del=function(t){return this.service.makeRequest("DELETE","lists",{name:this.name},t)},a=function(t){return t.tags},u.prototype._updateTags=function(t,e){if(null==t)return this.tags=e.slice(),this.folders=this.tags.filter(o).map(s)},u.prototype.fetchTags=function(t){return d(this._updateTags,t,this.service.makeRequest("GET","list/tags",{name:this.name}).then(a))},u.prototype.addTags=function(t,e){var n;return n={name:this.name,tags:t},d(this._updateTags,e,this.service.makeRequest("POST","list/tags",n).then(a))},u.prototype.removeTags=function(t,e){var n;return n={name:this.name,tags:t},d(this._updateTags,e,this.service.makeRequest("DELETE","list/tags",n).then(a))},u.prototype.contents=function(t){return d(t,this.query().then(e).then(h("records")))},u.prototype.rename=function(t,e){var n,i;return n=this.service.post("lists/rename",{oldname:this.name,newname:t}).then(c("listName")).then((i=this,function(t){return i.name=t})).then(this.service.fetchList),d(e,n)},u.prototype.copy=function(t,e){var n,i,r,s,o,a,l,u;return null==t&&(t={}),null==e&&(e=function(){}),1===arguments.length&&f.isFunction(t)&&(t=(o=[{},t])[0],e=o[1]),"string"==typeof t&&(t={name:t}),i=n=null!=(a=t.name)?a:this.name+"_copy",s=this.tags.concat(null!=(l=t.tags)?l:[]),r=this.query(["id"]),d(e,this.service.fetchLists().then(h("map",c("name"))).then((u=this,function(t){var e;for(e=1;0<=p.call(t,i);)i=n+"-"+e++;return r.then(h("saveAsList",{name:i,tags:s,description:u.description}))})))},u.prototype.enrichment=function(t,e){return this.service.enrichment(i({list:this.name},t),e)},u.prototype.shareWithUser=function(t,e){return d(e,this.service.post("lists/shares",{list:this.name,with:t}))},u.prototype.inviteUserToShare=function(t,e,n){return null==e&&(e=!0),null==n&&(n=function(){}),d(n,this.service.post("lists/invitations",{list:this.name,to:t,notify:!!e}))},t=u,n.List=t}).call(this)},{"./util":251}],243:[function(h,t,f){(function(){function r(t,e){return function(){return t.apply(e,arguments)}}var s,e,n,o,a,t,l,i,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function c(t){var e,n,i;this.name=t.name,e=t.classes,this.findCommonType=r(this.findCommonType,this),this.findSharedAncestor=r(this.findSharedAncestor,this),this.getAncestorsOf=r(this.getAncestorsOf,this),this.getSubclassesOf=r(this.getSubclassesOf,this),this.getPathInfo=r(this.getPathInfo,this),n=l((i=this,function(t,e){return[t,new o(e,i)]})),this.classes=n(e),this.classes["java.lang.Object"]=s}o=h("./table").Table,n=h("./path").PathInfo,(i=h("./util")).flatten,a=i.find,i.error,l=i.omap,t=f,s=new o({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),c.prototype.getPathInfo=function(t,e){return n.parse(this,t,e)},c.prototype.getSubclassesOf=function(t){var e,n,i,r,s,o;if(null==(n=t&&t.name?t:this.classes[t]))throw new Error(t+" is not a table");for(r in i=[n.name],s=this.classes)e=s[r],o=n.name,0<=u.call(e.parents(),o)&&(i=i.concat(this.getSubclassesOf(e)));return i},c.prototype.getAncestorsOf=function(t){var e,n,i,r;if(null==(e=t&&t.name?t:this.classes[t]))throw new Error(t+" is not a table");return(n=e.parents()).filter((r=this,function(t){return r.classes[t]})).reduce((i=this,function(t,e){return t.concat(i.getAncestorsOf(e))}),n)},c.prototype.findSharedAncestor=function(t,e){var n,i;return null===e||null===t?null:t===e?t:(n=this.getAncestorsOf(t),0<=u.call(n,e)?e:(i=this.getAncestorsOf(e),0<=u.call(i,t)?t:a(n,function(t){return 0<=u.call(i,t)})))},c.prototype.findCommonType=function(t){return null==t&&(t=[]),t.reduce(this.findSharedAncestor)},(e=c).prototype.makePath=e.prototype.getPathInfo,e.prototype.findCommonTypeOfMultipleClasses=e.prototype.findCommonType,e.load=function(t){try{return new e(t)}catch(t){throw new Error("Error loading model: "+t)}},e.INTEGRAL_TYPES=["int","Integer","long","Long"],e.FRACTIONAL_TYPES=["double","Double","float","Float"],e.NUMERIC_TYPES=e.INTEGRAL_TYPES.concat(e.FRACTIONAL_TYPES),e.BOOLEAN_TYPES=["boolean","Boolean"],t.Model=e}).call(this)},{"./path":244,"./table":249,"./util":251}],244:[function(y,t,_){(function(){function i(t,e){return function(){return t.apply(e,arguments)}}var o,f,d,t,a,l,u,c,e,p,h,g,n,m,r=[].slice,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function v(t){var e,n;this.root=t.root,this.model=t.model,this.descriptors=t.descriptors,this.subclasses=t.subclasses,this.displayName=t.displayName,this.ident=t.ident,this.allDescriptors=i(this.allDescriptors,this),this.getChildNodes=i(this.getChildNodes,this),this.getDisplayName=i(this.getDisplayName,this),this.isa=i(this.isa,this),this.append=i(this.append,this),this.getParent=i(this.getParent,this),this.getEndClass=i(this.getEndClass,this),this.containsCollection=i(this.containsCollection,this),this.isCollection=i(this.isCollection,this),this.isReverseReference=i(this.isReverseReference,this),this.isReference=i(this.isReference,this),this.isClass=i(this.isClass,this),this.isAttribute=i(this.isAttribute,this),this.isRoot=i(this.isRoot,this),n=this.descriptors,this.mid=2<=n.length?r.call(n,0,e=n.length-1):(e=0,[]),this.end=n[e++],null==this.ident&&(this.ident=p(this.model,this,this.subclasses))}e=_,n=y("./util"),m=n.withCB,a=n.concatMap,c=n.get,t=n.any,h=n.set,l=n.copy,g=n.success,u=n.error,o={},f={},p=function(t,e,n){var i,r,s;return(null!=t?t.name:void 0)+"|"+(null!=t&&null!=(s=t.service)?s.root:void 0)+"|"+e+":"+function(){var t;for(i in t=[],n)r=n[i],t.push(i+"="+r);return t}()},v.prototype.isRoot=function(){return 0===this.descriptors.length},v.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},v.prototype.isClass=function(){return this.isRoot()||this.isReference()},v.prototype.isReference=function(){var t;return null!=(null!=(t=this.end)?t.referencedType:void 0)},v.prototype.isReverseReference=function(){var t,e,n,i,r;return!!(this.isReference()&&0<this.mid.length)&&(i=(r=this.end).reverseReference,n=r.referencedType,t=(e=this.getParent()).getParent(),null!=n&&t.isa(n)&&e.end.name===i)},v.prototype.isCollection=function(){var t,e;return null!=(t=null!=(e=this.end)?e.isCollection:void 0)&&t},v.prototype.containsCollection=function(){return t(this.descriptors,function(t){return t.isCollection})},v.prototype.getEndClass=function(){var t;return this.model.classes[this.subclasses[this.toString()]||(null!=(t=this.end)?t.referencedType:void 0)]||this.root},v.prototype.getParent=function(){if(this.isRoot())throw new Error("Root paths do not have parents");return new v({root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses})},v.prototype.append=function(t){var e;if(this.isAttribute())throw new Error(this+" is an attribute.");if(null==(e="string"==typeof t?this.getType().fields[t]:t))throw new Error(t+" is not a field of "+this.getType());return new v({root:this.root,model:this.model,descriptors:this.descriptors.concat([e]),subclasses:this.subclasses})},v.prototype.isa=function(t){var e,n;return null!=t&&(this.isAttribute()?this.getType()===t:(e=t.name?t.name:""+t)===(n=this.getType()).name||0<=s.call(this.model.getAncestorsOf(n),e))},v.prototype.getDisplayName=function(t){var e,n,i,r,s;return(n=this.displayName)?g(n):(null==this.namePromise&&(this.namePromise=(e=o[this.ident])?g(e):this.isRoot()&&this.root.displayName?g(this.root.displayName):null==this.model.service?u("No service"):(r="model"+a(function(t){return"/"+t.name})(this.allDescriptors()),i=h({format:"json"})(l(this.subclasses)),this.model.service.get(r,i).then(c("display")).then((s=this,function(t){var e;return null!=o[e=s.ident]?o[e]:o[e]=t})))),m(t,this.namePromise))},v.prototype.getChildNodes=function(){var t,e,n,i,r;for(e in r=[],i=(null!=(n=this.getEndClass())?n.fields:void 0)||{})t=i[e],r.push(this.append(t));return r},v.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},v.prototype.toString=function(){return this.allDescriptors().map(c("name")).join(".")},v.prototype.equals=function(t){return this===t||this.ident&&(null!=t?t.ident:void 0)===this.ident},v.prototype.getType=function(){var t,e;return(null!=(t=this.end)&&null!=(e=t.type)?e.replace(/java\.lang\./,""):void 0)||this.getEndClass()},(d=v).prototype.toPathString=d.prototype.toString,d.parse=function(r,s,o){var t,a,e,l,n,u,c,h,i;return null==o&&(o={}),n=p(r,s,o),(t=f[n])?t:(h=(s+"").split("."),i=a=r.classes[h.shift()],u=i.name,e=function(){var t,e,n,i;for(i=[],t=0,e=h.length;t<e;t++){if(c=h[t],!(l=(null!=a?a.fields[c]:void 0)||(null!=(n=a=r.classes[o[u]])?n.fields[c]:void 0)))throw new Error("Could not find "+c+" in "+a+" when parsing "+s);u+="."+c,a=r.classes[l.type||l.referencedType],i.push(l)}return i}(),f[n]=new d({root:i,model:r,descriptors:e,subclasses:o,ident:n}))},d.flushCache=function(){return f={},o={}},e.PathInfo=d}).call(this)},{"./util":251}],245:[function(e,n,t){(function(){var t;t=e("es6-promise").Promise,n.exports=t}).call(this)},{"es6-promise":254}],246:[function(ut,t,ct){(function(){function _(t,e){return function(){return t.apply(e,arguments)}}var e,u,t,o,l,a,n,i,r,s,c,h,f,d,p,g,m,v,y,b,w,C,k,x,T,S,E,O,P,N,M,D,A,I,R,L,q,j,z,F,H,B,U,$,W,V,Y,K,G,Q,J,X,Z,tt,et,nt,it,rt,st=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},ot=[].slice,at={}.hasOwnProperty;function lt(t,e,n){var i,r,s,o,a,l,u,c,h,f,d,p,g,m,v,y;for(i=(l=null!=n?n:{}).model,s=l.summaryFields,this.addConstraint=_(this.addConstraint,this),this.expandStar=_(this.expandStar,this),this.adjustPath=_(this.adjustPath,this),this.select=_(this.select,this),null==t&&(t={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=H.copy(null!=(u=null!=(h=t.displayNames)?h:t.aliases)?u:{}),o=0,a=(f=["name","title","comment","description","type"]).length;o<a;o++)null!=t[r=f[o]]&&(this[r]=t[r]);this.service=null!=e?e:{},this.model=null!=(d=null!=i?i:t.model)?d:{},this.summaryFields=null!=(p=null!=s?s:t.summaryFields)?p:{},this.root=null!=(g=t.root)?g:t.from,this.maxRows=null!=(m=null!=(v=t.size)?v:t.limit)?m:t.maxRows,this.start=null!=(y=null!=(c=t.start)?c:t.offset)?y:0,this.select(t.views||t.view||t.select||[]),this.addConstraints(t.constraints||t.where||[]),this.addJoins(t.joins||t.join||[]),this.orderBy(t.sortOrder||t.orderBy||[]),null!=t.constraintLogic&&(this.constraintLogic=t.constraintLogic),this.on("change:views",I,this)}for(t=ut("backbone-events-standalone"),(T=ct).xml=ut("./xml"),H=ut("./util"),a=H.REQUIRES_VERSION,B=H.withCB,O=H.merge,v=H.filter,A=H.partition,y=H.fold,d=H.concatMap,k=H.id,b=H.get,H.invoke,j=H.querystring,w=function(t){var e;if(!(e=null!=(null!=t?t.toLowerCase:void 0)?l.OP_DICT[t.toLowerCase()]:null))throw new Error("Illegal constraint operator: "+t);return e},i=(e=["path","op","code"]).concat(["value","extraValue"]),n=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],o=function(t){return H.compose(t.fetchList,b("listName"))},u=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],g=function(t){return null==t&&(t=""),t.substr(t.indexOf("."))},f=function(t){return null!=t?"<value>"+H.escape(t)+"</value>":"<nullValue/>"},s=function(e,n){var i,r;return function(){var t;for(i in t=[],e)r=e[i],0<=st.call(n,i)&&t.push(i+'="'+H.escape(r)+'" ');return t}().join("")},D=function(t){return"<constraint "+s(t,e)+"/>"},z=function(t){return"<constraint "+s(t,["path","type"])+"/>"},R=function(t){return"<constraint "+s(t,i)+"/>"},N=function(t){return"<constraint "+s(t,e)+">"+d(f)(t.values)+"</constraint>"},x=function(t){return"<constraint "+s(t,e)+'ids="'+t.ids.join(",")+'"/>'},c=function(t){var e;return null!=t.values?N(t):null!=t.ids?x(t):null==t.op?z(t):(e=t.op,0<=st.call(l.NULL_OPS,e)?D(t):R(t))},C=function(t){return t.replace(/^[^\.]+\./,"")},p=function(t){var e,n,i,r,s,o,a,l,u,c,h;return o=t.path,u=t.type,s=t.op,c=t.value,h=t.values,i=t.extraValue,r=t.ids,e=t.code,n=t.editable,l=t.switched,a=t.switchable,r=null!=r?r.slice():void 0,h=null!=h?h.slice():void 0,M({path:o,type:u,op:s,value:c,values:h,extraValue:i,ids:r,code:e,editable:n,switched:l,switchable:a})},h=function(t){var e;return(e=p(t)).path=C(e.path),e},M=function(t){var e;for(e in t)null==t[e]&&delete t[e];return t},m=function(t,e){return"Did not remove a single constraint. original = "+t+", reduced = "+e},E=function(t,e){var n,i,r,s,o,a;if(n={path:t},null===e)n.op="IS NULL";else if(H.isArray(e))n.op="ONE OF",n.values=e;else if("string"===(o=void 0===e?"undefined":_typeof(e))||"number"===o||"boolean"===o)a="function"==typeof e.toUpperCase?e.toUpperCase():void 0,0<=st.call(l.NULL_OPS,a)?n.op=e:(n.op="=",n.value=e);else if(r=function(){var t;for(i in t=[],e)e[i],t.push(i);return t}(),0<=st.call(r,"isa"))H.isArray(e.isa)?(n.op=i,n.values=e.isa):n.type=e.isa;else for(i in 0<=st.call(r,"extraValue")&&(n.extraValue=e.extraValue),e)s=e[i],"extraValue"!==i&&(n.op=i,H.isArray(s)?n.values=s:n.value=s);return n},S=function(t){var e,n,i,r;return n={path:(t=t.slice()).shift()},1===t.length?(r="function"==typeof(e=t[0]).toUpperCase?e.toUpperCase():void 0,0<=st.call(l.NULL_OPS,r)?n.op=e:n.type=e):2<=t.length&&(n.op=t[0],i=t[1],H.isArray(i)?n.values=i:n.value=i,3===t.length&&(n.extraValue=t[2])),n},q=function(i){var r;return function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r.path+" "+r.direction);return n}().join(" ")},L=function(t){var e,i,n,r,s,o,a;if(null==t)return[];for(i=t.split(/\s+/),a=[],s=0,o=(n=function(){var t,e,n;for(n=[],r=t=0,e=i.length/2;0<=e?t<e:e<t;r=0<=e?++t:--t)n.push(2*r);return n}()).length;s<o;s++)e=n[s],a.push([i[e],i[e+1]]);return a},I=function(){var i,r;if(r=this.sortOrder,this.sortOrder=function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],this.isRelevant(i.path)&&n.push(i);return n}.call(this),r.length!==this.sortOrder.length)return this.trigger("change:sortorder change:orderby",this.sortOrder.slice())},lt.JOIN_STYLES=["INNER","OUTER"],lt.BIO_FORMATS=["gff3","fasta","bed"],lt.NULL_OPS=["IS NULL","IS NOT NULL"],lt.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],lt.MULTIVALUE_OPS=["ONE OF","NONE OF"],lt.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],lt.TERNARY_OPS=["LOOKUP"],lt.LOOP_OPS=["=","!="],lt.LIST_OPS=["IN","NOT IN"],lt.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF",in:"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},tt=["name","view","sortOrder","constraintLogic","title","description","comment"],J=["path","type","op","code","value","ids"],nt=function(t,e){var n,i,r,s;for(s=[],i=0,r=e.length;i<r;i++)n=e[i],t.hasAttribute(n)&&s.push([n,t.getAttribute(n)]);return s},X=function(t,e){var n,i,r,s,o;for(o=[],i=0,r=(s=t.getElementsByTagName(e)).length;i<r;i++)n=s[i],o.push(n);return o},rt=function(e){return function(t){return t.getAttribute(e)}},lt.fromXML=function(t){var c,e,r,s,n,h,o;if(e=T.xml.parse(t),!(h=X(e,"query")[0]||X(e,"template")[0]))throw new Error("no query in xml");return s=rt("path"),o=rt("style"),(n=H.pairsToObj(nt(h,tt))).view=n.view.split(/\s+/),n.sortOrder=L(n.sortOrder),n.joins=function(){var t,e,n,i;for(i=[],t=0,e=(n=X(h,"join")).length;t<e;t++)r=n[t],"OUTER"===o(r)&&i.push(s(r));return i}(),n.constraints=function(){var t,e,n,i,r,s,o,a,l,u;for(i=[],t=0,e=(n=X(h,"constraint")).length;t<e;t++)c=n[t],i.push((r=c,u=l=a=o=s=void 0,null!=(s=H.pairsToObj(nt(r,J))).ids&&(s.ids=function(){var t,e,n,i;for(i=[],t=0,e=(n=s.ids.split(",")).length;t<e;t++)u=n[t],i.push(parseInt(u,10));return i}()),(l=X(r,"value")).length&&(s.values=function(){var t,e,n;for(n=[],t=0,e=l.length;t<e;t++)a=l[t],n.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=a.childNodes).length;t<e;t++)o=n[t],i.push(o.data);return i}().join(""));return n}()),s));return i}(),n},lt.prototype.constraints=[],lt.prototype.views=[],lt.prototype.joins={},lt.prototype.constraintLogic="",lt.prototype.sortOrder="",lt.prototype.name=null,lt.prototype.title=null,lt.prototype.comment=null,lt.prototype.description=null,lt.prototype.removeFromSelect=function(s){var i,o,r,a;return null==s&&(s=[]),s=H.stringList(s),i=H.compose(this.expandStar,this.adjustPath),s=H.flatten(function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)r=s[t],n.push(i(r));return n}()),this.sortOrder=function(){var t,e,n,i,r;for(r=[],t=0,e=(n=this.sortOrder).length;t<e;t++)i=(o=n[t]).path,0<=st.call(s,i)||r.push(o);return r}.call(this),this.views=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.views).length;t<e;t++)a=n[t],0<=st.call(s,a)||i.push(a);return i}.call(this),this.trigger("remove:view",s),this.trigger("change:views",this.views),this.trigger("change",this.views)},lt.prototype.removeConstraint=function(i,t){var r,s,o,e;if(null==t&&(t=!1),o=this.constraints,s="string"==typeof i?function(t){return t.code===i}:function(t){var e,n;return t.path===i.path&&t.op===i.op&&t.value===i.value&&t.extraValue===i.extraValue&&i.type===t.type&&(null!=(e=t.values)?e.join("%%"):void 0)===(null!=(n=i.values)?n.join("%%"):void 0)},(e=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)r=o[t],s(r)||n.push(r);return n}()).length!==o.length-1)throw new Error(m(o,e));if(this.constraints=e,!t)return this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",H.find(o,s))},lt.prototype.addToSelect=function(i,t){var e,r,s,o,a,l,n,u;if(null==i&&(i=[]),null==t&&(t={}),i=H.stringList(i),r=H.compose(this.expandStar,this.adjustPath),o=H.flatten(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)a=i[t],n.push(r(a));return n}()),(e=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)s=o[t],0<=st.call(this.views,s)&&n.push(s);return n}.call(this)).length)throw new Error(e+" already in the select list");if((e=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)s=o[t],1<function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)(l=o[t])===s&&n.push(l);return n}().length&&n.push(s);return n}()).length)throw new Error(e+" specified multiple times as arguments to addToSelect");return(n=this.views).push.apply(n,o),t.silent?t.events=(null!=(u=t.events)?u:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",o),this.trigger("change")),this},lt.prototype.select=function(t,e){var n,i;i=this.views.slice();try{this.views=[],this.addToSelect(t,e)}catch(t){n=t,this.views=i,H.error(n)}return this},lt.prototype.adjustPath=function(t){return t=t&&t.name?t.name:""+t,null!=this.root?t.match("^"+this.root)||(t=this.root+"."+t):this.root=t.split(".")[0],t},lt.prototype.getPossiblePaths=function(t,l,e){var u,n,i,r,s,c;return null==t&&(t=3),null==l&&(l=!0),null==e&&(e=null),r="string"==typeof e?function(t){return t[e]()}:e,u=function(e,n){var i,r,s,t,o,a;return o=c.getPathInfo(e),!l&&o.isReverseReference()?[]:o.isAttribute()?[o]:(i=o.getType(),a=d(function(t){return u(e+"."+t.name,n-1)}),t=i&&0<n?a(function(){var t,e;for(s in e=[],t=i.fields)r=t[s],e.push(r);return e}()):[],[o].concat(t))},n=t+"-"+l,null==(c=this)._possiblePaths&&(this._possiblePaths={}),i=(null!=(s=this._possiblePaths)[n]?s[n]:s[n]=u(this.root,t)).slice(),null!=r?i.filter(r):i},lt.prototype.makePath=lt.prototype.getPathInfo=function(t){var e,n,i;return e=this.adjustPath(t),(n=null!=(i=this.model)&&"function"==typeof i.getPathInfo?i.getPathInfo(e,this.getSubclasses()):void 0)&&e in this.displayNames&&(n.displayName=this.displayNames[e]),n},it=function(t){return[t.path,t.type]},et=H.compose(H.pairsToObj,H.map(it),v(b("type"))),lt.prototype.getSubclasses=function(){return et(this.constraints)},lt.prototype.getType=function(t){return this.getPathInfo(t).getType()},lt.prototype.getViewNodes=function(){var r,s,e;return e=this,s=function(t){return e.getPathInfo(t).getParent()},H.uniqBy(String,function(){var t,e,n,i;for(i=[],t=0,e=(n=this.views).length;t<e;t++)r=n[t],i.push(s(r));return i}.call(this))},lt.prototype.isInView=function(t){var e,n,i;if(!(e=this.getPathInfo(t)))throw new Error("Invalid path: "+t);return e.isAttribute()?(i=e.toString(),0<=st.call(this.views,i)):(n=e.toString(),H.any(this.getViewNodes(),function(t){return t.toString()===n}))},lt.prototype.isConstrained=function(t,e){var n,i,r;if(null==e&&(e=!1),!(n=this.getPathInfo(t)))throw new Error("Invalid path: "+t);return i=function(t){return null!=t.op&&t.path===n.toString()},!n.isAttribute()&&e&&(r=this,i=function(t){return null!=t.op&&(t.path===n.toString()||n.equals(r.getPathInfo(t.path).getParent()))}),H.any(this.constraints,i)},lt.prototype.canHaveMultipleValues=function(t){return this.getPathInfo(t).containsCollection()},lt.prototype.getQueryNodes=function(){var r,t,s,e;return e=this.getViewNodes(),t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.constraints).length;t<e;t++)null==(r=n[t]).type&&((s=this.getPathInfo(r.path)).isAttribute()?i.push(s.getParent()):i.push(s));return i}.call(this),H.uniqBy(String,e.concat(t))},lt.prototype.isInQuery=function(t){var r,e,n,i,s,o;if(e=this.getPathInfo(t)){for(n=e.toPathString(),i=0,s=(o=this.views.concat(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.constraints).length;t<e;t++)null==(r=n[t]).type&&i.push(r.path);return i}.call(this))).length;i<s;i++)if(0===(t=o[i]).indexOf(n))return!0;return!1}return!0},lt.prototype.isRelevant=function(t){var e,n,i;return(n=this.getPathInfo(t)).isAttribute()&&(n=n.getParent()),i=n.toString(),e=this.getViewNodes(),H.any(e,function(t){return t.toPathString()===i})},lt.prototype.expandStar=function(t){var e,r,n,s,o,i,a,l;if(/\*$/.test(t))if(a=t.substr(0,t.lastIndexOf(".")),n=function(t){return a+t},r=this.getType(a),/\.\*$/.test(t)){if(r&&this.summaryFields[r.name])return s=H.compose(n,g),function(){var t,e,n,i;for(i=[],t=0,e=(n=this.summaryFields[r.name]).length;t<e;t++)o=n[t],this.hasView(o)||i.push(s(o));return i}.call(this)}else if(/\.\*\*$/.test(t))return l=this.expandStar(a+".*"),e=function(){var t;for(i in t=[],r.attributes)t.push(n("."+i));return t}(),H.uniqBy(k,l.concat(e));return t},lt.prototype.isOuterJoin=function(t){return"OUTER"===this.joins[this.adjustPath(t)]},lt.prototype.hasView=function(t){var e;return this.views&&(e=this.adjustPath(t),0<=st.call(this.views,e))},lt.prototype.count=function(t){if(this.service.count)return this.service.count(this,t);throw new Error("This query has no service with count functionality attached.")},lt.prototype.appendToList=function(n,t){var e,i,r,s;return s=(null!=n?n.name:void 0)?(e=n.name,function(t,e){if(null==t)return n.size=e.size}):(e=String(n),null),r={listName:e,query:this.makeListQuery().toXML()},i=o(this.service),B(s,t,this.service.post("query/append/tolist",r).then(i))},lt.prototype.selectPreservingImpliedConstraints=function(t){var e,n,i,r,s;for(null==t&&(t=[]),(n=this.clone()).select(t),i=0,r=(s=this.getViewNodes()).length;i<r;i++)e=s[i],this.isOuterJoined(e)||n.isInView(e||n.isConstrained(e))||null==e.getEndClass().fields.id||n.addConstraint([e.append("id"),"IS NOT NULL"]);return n},lt.prototype.makeListQuery=function(){var t,e;return 1===(t=this.views.slice()).length&&(null!=(e=t[0])?e.match(/\.id$/):void 0)||(t=["id"]),this.selectPreservingImpliedConstraints(t)},lt.prototype.saveAsList=function(t,e){var n,i;return i=this.makeListQuery(),(n=H.copy(t)).listName=n.listName||n.name,n.query=i.toXML(),t.tags&&(n.tags=t.tags.join(";")),B(e,this.service.post("query/tolist",n).then(o(this.service)))},lt.prototype.summarise=function(t,e,n){return this.filterSummary(t,"",e,n)},lt.prototype.summarize=function(){var t;return t=1<=arguments.length?ot.call(arguments,0):[],this.summarise.apply(this,t)},Z=function(t){var e,n,i,r,s,o,a;for(e=null!=(null!=(o=t.results[0])?o.max:void 0),r=0,s=(a=t.results).length;r<s;r++)(n=a[r]).count=parseInt(n.count,10);return i={uniqueValues:t.uniqueValues,filteredCount:t.filteredCount},e&&(i=O(i,t.results[0])),t.stats=i,t},lt.prototype.filterSummary=function(t,e,n,i){var r,s,o;return null==i&&(i=function(){}),H.isFunction(n)&&(i=(o=[n,null])[0],n=o[1]),t=this.adjustPath(t),s=this.clone(),st.call(s.views,t)<0&&s.views.push(t),r={query:s.toXML(),summaryPath:t,format:"jsonrows"},n&&(r.size=n),e&&(r.filterTerm=e),B(i,this.service.post("query/results",r).then(Z))},lt.prototype.clone=function(t){var e,n,i,r;if(null==(e=new lt(this,this.service))._callbacks&&(e._callbacks={}),t){for(n in r=this._callbacks)at.call(r,n)&&(i=r[n],e._callbacks[n]=i);e.off("change:views",I,this)}return e},lt.prototype.next=function(){var t;return t=this.clone(),this.maxRows&&(t.start=this.start+this.maxRows),t},lt.prototype.previous=function(){var t;return t=this.clone(),this.maxRows?t.start=this.start-this.maxRows:t.start=0,t},lt.prototype.getSortDirection=function(t){var n,e;if(n=this.adjustPath(t),!this.isInQuery(n)&&!this.isRelevant(n))throw new Error(t+" is not in the query");return null!=(e=H.find(this.sortOrder,function(t){var e;return e=t.path,n===e}))?e.direction:void 0},lt.prototype.isOuterJoined=function(t){var e,n;for(e in t=this.adjustPath(t),n=this.joins)if("OUTER"===n[e]&&0===t.indexOf(e))return!0;return!1},lt.prototype.getOuterJoin=function(e){var t,n,i;return e=this.adjustPath(e),t=function(){var t;for(n in t=[],this.joins)t.push(n);return t}.call(this).sort(function(t,e){return e.length-t.length}),H.find(t,(i=this,function(t){return"OUTER"===i.joins[t]&&0===e.indexOf(t)}))},lt.prototype._parse_sort_order=function(t){var e,n,i,r,s;if(null==t)throw new Error("No input");if("string"==typeof t)r={path:t,direction:"ASC"};else if(H.isArray(t))r={path:i=t[0],direction:e=t[1]};else if(null==t.path){for(n in t)i=(s=[n,t[n]])[0],e=s[1];r={path:i,direction:e}}else r={path:i=t.path,direction:e=t.direction};return r.path=this.adjustPath(r.path),null==r.direction&&(r.direction="ASC"),r.direction=r.direction.toUpperCase(),r},lt.prototype.addOrSetSortOrder=function(e){var t;return e=this._parse_sort_order(e),null==(t=this.getSortDirection(e.path))?this.addSortOrder(e):t!==e.direction&&(H.find(this.sortOrder,function(t){return t.path===e.path}).direction=e.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},lt.prototype.addSortOrder=function(t,e){var n;if(n=(null!=e?e:{}).silent,this.sortOrder.push(this._parse_sort_order(t)),!n)return this.trigger("add:sortorder",t),this.trigger("change:sortorder",this.sortOrder),this.trigger("change")},lt.prototype.orderBy=function(t,e){var n,s,i,r,o,a,l,u;for(null==e&&(e={}),r=this.sortOrder.slice(),this.sortOrder=[],a=0,l=t.length;a<l;a++)i=t[a],this.addSortOrder(this._parse_sort_order(i),{silent:!0});return n=function(){var t,e,n,i,r;for(r=[],t=0,e=(n=this.sortOrder).length;t<e;t++)i=n[t],o=i.path,s=i.direction,r.push({path:o,direction:s});return r}.call(this),this.trigger("set:sortorder",n),q(r)!==this.getSorting()&&(e.silent?e.events=(null!=(u=e.events)?u:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",n),this.trigger("change"))),this},lt.prototype.addJoins=function(t){var e,n,i,r,s,o,a;if(H.isArray(t)){for(o=[],r=0,s=t.length;r<s;r++)e=t[r],o.push(this.addJoin(e));return o}for(n in a=[],t)i=t[n],a.push(this.addJoin({path:n,style:i}));return a},lt.prototype.addJoin=function(t){return"string"==typeof t&&(t={path:t,style:"OUTER"}),this.setJoinStyle(t.path,t.style)},lt.prototype.setJoinStyle=function(t,e){if(null==e&&(e="OUTER"),t=this.adjustPath(t),e=e.toUpperCase(),st.call(lt.JOIN_STYLES,e)<0)throw new Error("Invalid join style: "+e);return this.joins[t]!==e&&(this.joins[t]=e,this.trigger("change:joins",{path:t,style:e}),this.trigger("change")),this},lt.prototype.addConstraints=function(t,n){var e,i,r,s,o,a,l;if(null==n&&(n="and"),this.__silent__=!0,i=this.constraintLogic,H.isArray(t))for(o=0,a=t.length;o<a;o++)e=t[o],this.addConstraint(e,n);else for(r in l=this,s=function(t,e){return l.addConstraint(E(t,e),n)},t)s(r,t[r]);return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),i!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},lt.prototype.addConstraint=function(t,e){var i,n,r,s,o,a,l;if(null==e&&(e="and"),"and"!==e&&"or"!==e)throw new Error("Unknown logical conjunction: "+e);return"OFF"===(t=H.isArray(t)?S(t):p(t)).switched||(t.path=this.adjustPath(t.path),null==t.type&&(t.op=w(t.op)),this.constraints.push(t),r="or"===e||0<(null!=(l=this.constraintLogic)?l.length:void 0),s=this.constraints.length,a=this.constraintLogic,r&&(o=2===s?u[0]+" "+e+" "+u[1]:((n=this.constraintLogic)||(n=function(){var t,e,n;for(n=[],i=t=0,e=s-2;0<=e?t<=e:e<=t;i=0<=e?++t:--t)n.push(u[i]);return n}().join(" and ")),"("+n+") "+e+" "+u[s-1]),this.constraintLogic=o),this.__silent__||(this.trigger("add:constraint",t),this.trigger("change:constraints"),a!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change"))),this},lt.prototype.getSorting=function(){return q(this.sortOrder)},lt.prototype.getConstraintXML=function(){var r,t;return(t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.constraints).length;t<e;t++)null!=(r=n[t]).type&&!this.isInQuery(r.path)||i.push(r);return i}.call(this)).length?d(c)(d(k)(A(function(t){return null!=t.type})(t))):""},lt.prototype.getJoinXML=function(){var n,i;return function(){var t,e;for(n in e=[],t=this.joins)i=t[n],this.isInQuery(n)&&"OUTER"===i&&e.push('<join path="'+n+'" style="OUTER"/>');return e}.call(this).join("")},lt.prototype.toXML=function(){var e,n,i;return e={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(e.name=this.name),"<query "+function(){var t;for(n in t=[],e)(i=e[n])&&t.push(n+'="'+i+'"');return t}().join(" ")+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},lt.prototype.toJSON=function(){var r,s,o,a;return M({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var t,e,n,i;for(i=[],t=0,e=(n=this.views).length;t<e;t++)a=n[t],i.push(C(a));return i}.call(this),orderBy:function(){var t,e,n,i,r;for(r=[],t=0,e=(n=this.sortOrder).length;t<e;t++)i=n[t],o=i.path,s=i.direction,r.push({path:C(o),direction:s});return r}.call(this),joins:function(){var t,e;for(o in e=[],t=this.joins)"OUTER"===t[o]&&e.push(C(o));return e}.call(this),where:function(){var t,e,n,i;for(i=[],t=0,e=(n=this.constraints).length;t<e;t++)r=n[t],i.push(h(r));return i}.call(this)})},lt.prototype.fetchCode=function(t,e){var n;return n={query:this.toXML(),lang:t},B(e,this.service.post("query/code",n).then(this.service.VERIFIER).then(b("code")))},lt.prototype.setName=function(t){this.name=t},lt.prototype.save=function(n,i){return a(this.service,16,(r=this,function(){var t,e;return H.isFunction(n)&&(n=(e=[null,n])[0],i=e[1]),null!=n&&r.setName(n),t={type:"PUT",path:"user/queries",data:r.toXML(),contentType:"application/xml",dataType:"json"},B(i,r.service.authorise(t)).then(function(t){return r.service.doReq(t)}).then(function(t){return t.queries})}));var r},lt.prototype.store=function(r,s){return a(this.service,16,(o=this,function(){var t,e,n,i;return H.isFunction(r)&&(r=(i=[null,r])[0],s=i[1]),null!=r&&o.setName(r),n=function(t,e){if(null==t)return o.setName(e)},t=H.compose(b(o.name),b("queries")),e={type:"POST",path:"user/queries",data:o.toXML(),contentType:"application/xml",dataType:"json"},B(s,n,o.service.authorise(e)).then(function(t){return o.service.doReq(t)}).then(t)}));var o},lt.prototype.saveAsTemplate=function(n,i){return a(this.service,16,(r=this,function(){var t,e;if(H.isFunction(n)&&(n=(e=[null,n])[0],i=e[1]),null!=n&&r.setName(n),!r.name)throw new Error("Templates must have a name");return t={type:"POST",path:"templates",data:"<template "+s(r,["name","title","comment"])+">"+r.toXML()+"</template>",contentType:"application/xml",dataType:"json"},B(i,r.service.authorise(t).then(function(t){return r.service.doReq(t)}))}));var r},lt.prototype.getCodeURI=function(t){var e,n;return e={query:this.toXML(),lang:t,format:"text"},null!=(null!=(n=this.service)?n.token:void 0)&&(e.token=this.service.token),this.service.root+"query/code?"+j(e)},lt.prototype.getExportURI=function(t,e){var n,i;return null==t&&(t="tab"),null==e&&(e={}),0<=st.call(lt.BIO_FORMATS,t)?this["get"+t.toUpperCase()+"URI"](e):(n=O(e,{query:this.toXML(),format:t}),null!=(null!=(i=this.service)?i.token:void 0)&&(n.token=this.service.token),this.service.root+"query/results?"+j(n))},lt.prototype.needsAuthentication=function(){return H.any(this.constraints,function(t){var e;return"NOT IN"===(e=t.op)||"IN"===e})},lt.prototype.fetchQID=function(t){return B(t,this.service.post("queries",{query:this.toXML()}).then(b("id")))},Q=function(t){return t.append("primaryIdentifier").toString()},lt.prototype.__bio_req=function(t,r){var s,e;return e=this.makeListQuery(),s=function(e){return H.any(t,function(t){return e.isa(t)})},e.views=H.take(r)(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getViewNodes()).length;t<e;t++)r=n[t],s(r)&&i.push(Q(r));return i}.call(this)),{query:e.toXML(),format:"text"}},lt.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},lt.prototype._bed_req=lt.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},l=lt,F=y(function(t,e){return t.concat(e)}),l.prototype.toString=l.prototype.toXML,l.ATTRIBUTE_OPS=F([l.ATTRIBUTE_VALUE_OPS,l.MULTIVALUE_OPS,l.NULL_OPS]),l.REFERENCE_OPS=F([l.TERNARY_OPS,l.LOOP_OPS,l.LIST_OPS]),r=function(l,u){return function(r,t){var e,n,i,s,o,a;return null==r&&(r={}),null==t&&(t=function(){}),H.isFunction(r)&&(r=(o=[{},r])[0],t=o[1]),a=this,e=function(t){var e;return(e=a.getPathInfo(t)).isAttribute()?e:e.append("id")},null!=(null!=r?r.view:void 0)&&(r.view=function(){var t,e,n,i;for(i=[],t=0,e=(n=r.view).length;t<e;t++)s=n[t],i.push(this.getPathInfo(s).toString());return i}.call(this)),n=null!=r.export?this.selectPreservingImpliedConstraints(r.export.map(e)):this,i=O(n[l](),r),u.call(n,i,t)}},U=function(n){var t,e,i;return e="_"+n+"_req",i=(t="get"+n.toUpperCase())+"URI",l.prototype[t]=r(e,function(t,e){return B(e,this.service.post("query/results/"+n,t))}),l.prototype[i]=r(e,function(t,e){return null!=this.service.token&&(t.token=this.service.token),this.service.root+"query/results/"+n+"?"+j(t)})},W=0,Y=(G=l.BIO_FORMATS).length;W<Y;W++)U(G[W]);for($=function(r){return function(){var t,e,i,n;if(e=arguments[0],t=2<=arguments.length?ot.call(arguments,1):[],this.service[r])return null==e?e={}:H.isFunction(e)&&(e={},t=function(){var t,e,n;for(n=[],t=0,e=arguments.length;t<e;t++)i=arguments[t],n.push(i);return n}.apply(this,arguments)),e=M(O({start:this.start,size:this.maxRows},e)),(n=this.service)[r].apply(n,[this,e].concat(ot.call(t)));throw new Error("Service does not provide '"+r+"'.")}},V=0,K=n.length;V<K;V++)P=n[V],l.prototype[P]=$(P);t.mixin(l.prototype),l.prototype.emit=l.prototype.trigger,l.prototype.bind=l.prototype.on,T.Query=l}).call(this)},{"./util":251,"./xml":253,"backbone-events-standalone":234}],247:[function(ut,t,ct){(function(){function n(t,e){return function(){return t.apply(e,arguments)}}var i,e,r,s,o,a,l,u,h,c,f,d,p,g,m,v,t,y,_,b,w,C,k,x,T,S,E,O,P,N,M,D,A,I,R,L,q,j,z,F,H,B,U,$,W,V,Y,K,G,Q,J,X,Z,tt,et,nt,it,rt,st,ot={}.hasOwnProperty,at=[].slice;for(t=ut("./promise"),d=ut("./model").Model,_=ut("./query").Query,c=ut("./lists").List,O=ut("./user").User,l=ut("./id-resolution-job").IDResolutionJob,V=ut("./version"),W=ut("./util"),q=ut("./http"),$=W.querystring,Y=W.withCB,z=W.map,F=W.merge,R=W.get,B=W.set,j=W.invoke,U=W.success,I=W.error,C=W.REQUIRES_VERSION,A=W.dejoin,P={},e={},b={},f={},T={},M={},"http://","templates","lists",s="list/enrichment",D="listswithobject",u={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},k="lists/subtract",N="user/whoami",(y="query/results")+"/tablerows",v="user/preferences","user/tokens","ids",g={},G=0,J=(Z=["version",w="version/release","classkeys","widgets","model",x="summaryfields","search",m="path/values"]).length;G<J;G++)g[H=Z[G]]=!0;for(i={},Q=0,X=(tt=[N,v,u,k,D,s,"templates","user/tokens"]).length;Q<X;Q++)i[H=tt[Q]]=!0;function lt(t){var e;if(this.root=t.root,this.token=t.token,this.errorHandler=t.errorHandler,this.DEBUG=t.DEBUG,this.help=t.help,e=t.noCache,this.headers=t.headers,this.connectAs=n(this.connectAs,this),this.createList=n(this.createList,this),this.resolveIds=n(this.resolveIds,this),this.templateQuery=n(this.templateQuery,this),this.savedQuery=n(this.savedQuery,this),this.query=n(this.query,this),this.fetchRelease=n(this.fetchRelease,this),this.fetchClassKeys=n(this.fetchClassKeys,this),this.fetchVersion=n(this.fetchVersion,this),this.fetchSummaryFields=n(this.fetchSummaryFields,this),this.fetchModel=n(this.fetchModel,this),this.fetchWidgetMap=n(this.fetchWidgetMap,this),this.fetchWidgets=n(this.fetchWidgets,this),this.complement=n(this.complement,this),this.fetchListsContaining=n(this.fetchListsContaining,this),this.fetchList=n(this.fetchList,this),this.findLists=n(this.findLists,this),this.fetchLists=n(this.fetchLists,this),this.fetchTemplates=n(this.fetchTemplates,this),this.tableRows=n(this.tableRows,this),this.values=n(this.values,this),this.rows=n(this.rows,this),this.records=n(this.records,this),this.table=n(this.table,this),this.pathValues=n(this.pathValues,this),this.fetchUser=n(this.fetchUser,this),this.whoami=n(this.whoami,this),this.findById=n(this.findById,this),this.count=n(this.count,this),this.enrichment=n(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");o.test(this.root)||(this.root="http://"+this.root),a.test(this.root)||(this.root=this.root+"/service/"),this.root=this.root.replace(/ice$/,"ice/"),null==this.headers&&(this.headers=null),null==this.errorHandler&&(this.errorHandler=r),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!e,this.getFormat=function(t){return null==t&&(t="json"),t}}p=function(t,e){return!g[t]&&(!!i[t]||(null==e||!e.needsAuthentication||e.needsAuthentication()))},o=/^https?:\/\//i,a=/service\/?$/i,r=function(t){var e;return(null!=(e=console.error)?e:console.log)(t)},K=function(t,e,n,i,r){var s,o,a,l,u;return a=this.root,l=this.useCache,o=null!=this[t]?this[t]:this[t]=l&&(u=e[a])?U(u):(s={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(F(s,{url:this.root+n})).then(function(t){return e[a]=t[i]})),Y(r,o)},L=function(r){return function(i){return new t(function(t,e){var n;return(n=W.find(i,function(t){return t.name===r}))?t(n):e('List "'+r+'" not found among: '+i.map(R("name")))})}},h=function(t,e){return null==e&&(e="listName"),W.compose(t.fetchList,R(e))},E=function(t){var e,n,i,r,s,o;for(null==t&&(t=[]),o=[],n=0,i=(r=W.isArray(t)?t:[t]).length;n<i;n++)e=r[n],o.push(null!=(s=e.name)?s:e);return o},lt.prototype.doReq=function(){return arguments[0]=this.attachCustomHeaders(arguments[0]),q.doReq.apply(this,arguments)},lt.prototype.post=function(t,e){return this.makeRequest("POST",t,e)},lt.prototype.get=function(t,e){return this.makeRequest("GET",t,e)},lt.prototype.makeRequest=function(t,e,n,i,r){var s,o,a,l,u,c,h,f;return null==t&&(t="GET"),null==e&&(e=""),null==n&&(n={}),null==i&&(i=function(){}),null==r&&(r=!1),W.isArray(i)&&(i=(u=i)[0],o=u[1]),W.isArray(n)&&(n=W.pairsToObj(n)),null==o&&(o=this.errorHandler),n=W.copy(n),s=this.getFormat(n.format),q.supports(t)||(c=[t,q.getMethod(t)],n.method=c[0],t=c[1]),a={data:n,dataType:s,success:i,error:o,path:e,type:t},null!=n.auth&&(a.auth=n.auth,delete a.data.auth),null!=n.headers&&(a.headers=W.copy(n.headers),delete a.data.headers),(l=null!=(h=n.timeout)?h:this.timeout)&&(a.timeout=l,delete n.timeout),this.authorise(a).then((f=this,function(t){return f.doReq(t,r)}))},lt.prototype.authorise=function(r){return this.fetchVersion().then((s=this,function(t){var e,n,i;return null==(e=W.copy(r)).headers&&(e.headers={}),e.url=s.root+e.path,n=[],t<14&&("string"==typeof e.data?n.push(["format",e.dataType]):e.data.format=e.dataType),null!=s.token&&p(r.path,null!=(i=e.data)?i.query:void 0)&&(14<=t?e.headers.Authorization="Token "+s.token:"string"==typeof e.data?n.push(["token",s.token]):e.data.token=s.token),n.length&&(e.url+="?"+$(n)),e}));var s},lt.prototype.attachCustomHeaders=function(t){var e;return null!=this.headers?((e=W.copy(t)).headers=W.merge(e.headers,this.headers),e):t},lt.prototype.enrichment=function(e,n){return C(this,8,(i=this,function(){var t;return t=F({maxp:.05,correction:"Holm-Bonferroni"},e),Y(n,i.get(s,t).then(R("results")))}));var i},lt.prototype.search=function(r,s){return null==r&&(r={}),null==s&&(s=function(){}),C(this,9,(o=this,function(){var t,e,n,i;if(W.isFunction(r)&&(s=(i=[r,{}])[0],r=i[1]),"string"==typeof r)e={q:r};else for(t in e={q:r.q,start:r.start,size:r.size},r)ot.call(r,t)&&(n=r[t],"q"!==t&&"start"!==t&&"size"!==t&&(e["facet_"+t]=n));return Y(s,o.post("search",e))}));var o},lt.prototype.makePath=function(e,n,t){return null==n&&(n={}),null==t&&(t=function(){}),Y(t,this.fetchModel().then(function(t){return t.makePath(e,n)}))},lt.prototype.count=function(e,t){var n,i,r;return null==t&&(t=function(){}),n=e?null!=e.toPathString?(H=e.isClass()?e.append("id"):e,this.pathValues(H,"count")):null!=e.toXML?(i={query:e,format:"jsoncount"},this.post(y,i).then(R("count"))):"string"==typeof e?this.fetchModel().then((r=this,function(t){try{return r.count(t.makePath(e))}catch(t){return r.query({select:[e]}).then(r.count)}})):this.query(e).then(this.count):I("Not enough arguments"),Y(t,n)},lt.prototype.findById=function(t,e,n,i){var r,s;return null==n&&(n=["**"]),null==i&&(i=function(){}),W.isFunction(n)&&(n=(s=[["**"],n])[0],i=s[1]),r=this.query({from:t,select:n,where:{id:e}}).then(A).then(j("records")).then(R(0)),Y(i,r)},lt.prototype.lookup=function(t,e,n,i){var r,s;return W.isFunction(n)&&(n=(s=[null,n])[0],i=s[1]),r=this.query({from:t,select:["**"],where:[[t,"LOOKUP",e,n]]}).then(A).then(j("records")),Y(i,r)},lt.prototype.find=function(t,e,n,i){var r;return W.isFunction(n)&&(n=(r=[null,n])[0],i=r[1]),Y(i,this.lookup(t,e,n).then(function(t){return null==t||0===t.length?I("Nothing found"):1<t.length?I("Multiple items found: "+t.slice(0,3)+"..."):U(t[0])}))},lt.prototype.whoami=function(t){return C(this,9,(e=this,function(){return Y(t,e.get(N).then(R("user")).then(function(t){return new O(e,t)}))}));var e},lt.prototype.fetchUser=function(){var t;return t=1<=arguments.length?at.call(arguments,0):[],this.whoami.apply(this,t)},rt=function(t,e){return{format:t,path:String(e),typeConstraints:JSON.stringify(e.subclasses)}},lt.prototype.pathValues=function(r,s,o){return null==s&&(s={}),C(this,6,(a=this,function(){var n,t,i,e;return"string"==typeof s&&(i=s,s={}),W.isFunction(s)&&(s=(e=[o,s])[0],o=e[1]),"count"!==i&&(i="results"),n="count"===i?"jsoncount":"json",t=function(){var t,e;try{return this.fetchModel().then(j("makePath",r,null!=(t=r.subclasses)?t:s)).then(function(t){return rt(n,t)}).then((e=this,function(t){return e.post(m,t)})).then(R(i))}catch(t){return I(t)}}.call(a),Y(o,t)}));var a},lt.prototype.doPagedRequest=function(t,e,n,i,r){var s,o,a;return null==n&&(n={}),null==r&&(r=function(){}),null!=t.toXML?(W.isFunction(n)&&(r=(o=[n,{}])[0],n=o[1]),s=F(n,{query:t,format:i}),Y(r,this.post(e,s).then(R("results")))):this.query(t).then((a=this,function(t){return a.doPagedRequest(t,e,n,i,r)}))},lt.prototype.table=function(t,e,n){return this.doPagedRequest(t,y,e,"jsontable",n)},lt.prototype.records=function(t,e,n){return this.doPagedRequest(t,y,e,"jsonobjects",n)},lt.prototype.rows=function(t,e,n){return this.doPagedRequest(t,y,e,"json",n)},lt.prototype.values=function(t,e,n){var i,r,s;return W.isFunction(e)&&(n=(r=[e,n])[0],e=r[1]),i=null==t?I("No query term supplied"):null!=t.descriptors||"string"==typeof t?this.pathValues(t,e).then(z(R("value"))):null!=t.toXML?1!==t.views.length?I("Expected one column, got "+t.views.length):this.rows(t,e).then(z(R(0))):this.query(t).then((s=this,function(t){return s.values(t,e)})),Y(n,i)},lt.prototype.tableRows=function(t,e,n){return this.doPagedRequest(t,"query/results/tablerows",e,"json",n)},lt.prototype.fetchTemplates=function(t){return Y(t,this.get("templates").then(R("templates")))},lt.prototype.fetchLists=function(t){return this.findLists("",t)},lt.prototype.findLists=function(n,i){return null==n&&(n=""),null==i&&(i=function(){}),this.fetchVersion().then((s=this,function(t){var e;return Y(i,n&&t<13?I("Finding lists by name on the server requires version 13. This is only "+t):(e=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(new c(e,s));return r},s.get("lists",{name:n}).then(R("lists")).then(e)))}));var s},lt.prototype.fetchList=function(e,n){return this.fetchVersion().then((i=this,function(t){return Y(n,t<13?i.findLists().then(L(e)):i.findLists(e).then(R(0)))}));var i},lt.prototype.fetchListsContaining=function(t,e){var n,s;return n=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(new c(e,s));return r},Y(e,(s=this).get(D,t).then(R("lists")).then(n))},lt.prototype.combineLists=function(t,e,n){var i,r,s,o,a;return r=(a=F({lists:[],tags:[]},e)).name,i=a.lists,o=a.tags,null==(s={name:r,description:a.description}).description&&(s.description=t+" of "+i.join(", ")),s.tags=o.join(";"),s.lists=i.join(";"),Y(n,this.get(u[t],s).then(h(this)))},lt.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(at.call(arguments)))},lt.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(at.call(arguments)))},lt.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(at.call(arguments)))},lt.prototype.complement=function(t,e){var n,i,r,s,o,a,l,u,c;return null==t&&(t={}),null==e&&(e=function(){}),s=t.from,r=t.exclude,a=t.name,i=t.description,c=t.tags,n=function(){return"Relative complement of "+o.join(" and ")+" in "+l.join(" and ")},l=E(s),o=E(r),null==a&&(a=n()),null==i&&(i=n()),null==c&&(c=[]),u={name:a,description:i,tags:c,lists:o,references:l},Y(e,this.post(k,u).then(h(this)))},lt.prototype.fetchWidgets=function(t){return C(this,8,(e=this,function(){return K.call(e,"widgets",M,"widgets","widgets",t)}));var e},st=W.omap(function(t){return[t.name,t]}),lt.prototype.fetchWidgetMap=function(t){return C(this,8,(e=this,function(){return Y(t,null!=e.__wmap__?e.__wmap__:e.__wmap__=e.fetchWidgets().then(st))}));var e},lt.prototype.fetchModel=function(t){var e;return e=K.call(this,"model",f,"model","model").then(d.load).then(B({service:this})),Y(t,e)},lt.prototype.fetchSummaryFields=function(t){return K.call(this,"summaryFields",T,x,"classes",t)},lt.prototype.fetchVersion=function(t){return K.call(this,"version",P,"version","version",t)},lt.prototype.fetchClassKeys=function(t){return K.call(this,"classkeys",e,"classkeys","classes",t)},lt.prototype.fetchRelease=function(t){return K.call(this,"release",b,w,"version",t)},lt.prototype.query=function(i,t){var e,r;return r=this,e=function(t){var e,n;return e=t[0],n=t[1],new _(i,r,{model:e,summaryFields:n})},Y(t,W.parallel(this.fetchModel(),this.fetchSummaryFields()).then(e))},it=function(e,n){return function(t){return t?e.query(t):I("No query found called "+n)}},et=function(t){return t?"string"==typeof t?U():I("Name must be a string"):I("Name not provided")},lt.prototype.savedQuery=function(e,t){return C(this,16,(n=this,function(){return et(e).then(function(){return Y(t,n.get("user/queries",{filter:e}).then(function(t){return t.queries[e]}).then(it(n,e)))})}));var n},lt.prototype.templateQuery=function(t,e){return et(t).then((n=this,function(){return Y(e,n.fetchTemplates().then(R(t)).then(B("type","TEMPLATE")).then(it(n,t)))}));var n},lt.prototype.manageUserPreferences=function(t,e,n){return C(this,11,(i=this,function(){return Y(n,i.makeRequest(t,v,e).then(R("preferences")))}));var i},lt.prototype.resolveIds=function(e,n){return C(this,10,(i=this,function(){var t;return t={type:"POST",url:i.root+"ids",contentType:"application/json",data:JSON.stringify(e),dataType:"json"},Y(n,i.doReq(t).then(R("uid")).then(l.create(i)))}));var i},lt.prototype.resolutionJob=function(t){return l.create(this)(t)},lt.prototype.createList=function(e,t,n){var i,r,s;return null==e&&(e={}),null==t&&(t=""),null==n&&(n=function(){}),s=this,i=function(t){return F(t,{token:s.token,tags:e.tags||[]})},r={data:W.isArray(t)?t.map(function(t){return'"'+t+'"'}).join("\n"):t,dataType:"json",url:this.root+"lists?"+$(i(e)),type:"POST",contentType:"text/plain"},Y(n,this.doReq(r).then(h(this)))},nt=function(t){return t.user.temporaryToken},lt.prototype.connectAs=function(t){return lt.connect(F(this,{token:t,noCache:!this.useCache}))},lt.prototype.register=function(t,e,n){return C(this,9,(i=this,function(){return Y(n,i.post("users",{name:t,password:e}).then(nt).then(i.connectAs))}));var i},lt.prototype.getDeregistrationToken=function(e,n){return null==e&&(e=300),C(this,16,(i=this,function(){var t;return t=null!=i.token?i.post("user/deregistration",{validity:e}).then(R("token")):I("Not registered"),Y(n,t)}));var i},lt.prototype.deregister=function(t,e){return C(this,16,(n=this,function(){return Y(e,n.makeRequest("DELETE","user",{deregistrationToken:t,format:"xml"}))}));var n},lt.prototype.login=function(t,n,i){return C(this,9,(r=this,function(){var e;return e=t+":"+n,Y(i,r.logout().then(function(t){return t.get("user/token",{auth:e})})).then(R("token")).then(r.connectAs)}));var r},lt.prototype.logout=function(t){return Y(t,U(this.connectAs()))},(S=lt).prototype.rowByRow=function(){var e,t,n,i;return n=arguments[0],e=2<=arguments.length?at.call(arguments,1):[],t=q.iterReq("POST",y,"json"),null!=n.toXML?t.apply(this,arguments):this.query(n).then((i=this,function(t){return i.rowByRow.apply(i,[t].concat(at.call(e)))}))},S.prototype.eachRow=S.prototype.rowByRow,S.prototype.recordByRecord=function(){var e,t,n,i;return n=arguments[0],e=2<=arguments.length?at.call(arguments,1):[],t=q.iterReq("POST",y,"jsonobjects"),null!=n.toXML?t.apply(this,arguments):this.query(n).then((i=this,function(t){return i.recordByRecord.apply(i,[t].concat(at.call(e)))}))},S.prototype.eachRecord=S.prototype.recordByRecord,S.prototype.union=S.prototype.merge,S.prototype.difference=S.prototype.diff,S.prototype.symmetricDifference=S.prototype.diff,S.prototype.relativeComplement=S.prototype.complement,S.prototype.subtract=S.prototype.complement,S.flushCaches=function(){return f={},P={},b={},e={},T={},M={}},S.connect=function(t){if(null==(null!=t?t.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(t));return new S(t)},ct.Service=S,ct.Model=d,ct.Query=_,ct.utils=W,ct.VERSION=V.VERSION,ct.imjs=V}).call(this)},{"./http":240,"./id-resolution-job":241,"./lists":242,"./model":243,"./promise":245,"./query":246,"./user":250,"./util":251,"./version":252}],248:[function(t,e,n){(function(t){(function(){n.DOMParser=null!=t.DOMParser?t.DOMParser:function(){throw new Error("DOMParser is not available")}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],249:[function(n,t,i){(function(){var t,l,u;function e(t,e){var n,i,r,s,o,a;for(this.model=e,this.getDisplayName=function(t,e){return function(){return t.apply(e,arguments)}}(this.getDisplayName,this),this.name=t.name,this.tags=t.tags,this.displayName=t.displayName,this.attributes=t.attributes,this.references=t.references,this.collections=t.collections,this.fields={},this.__parents__=null!=(o=t.extends)?o:[],r=0,s=u.length;r<s;r++){if(null==this[n=u[r]])throw new Error("Bad model data: missing "+n);l(this[n],this.fields)}for(i in a=this.collections)a[i].isCollection=!0}l=function(t,e){var n,i,r;for(n in r=[],t)i=t[n],r.push(e[n]=i);return r},t=n("./promise"),u=["attributes","references","collections"],i.Table=(e.prototype.toString=function(){var n;return"[Table name="+this.name+", fields=["+function(){var t,e;for(n in e=[],t=this.fields)t[n],e.push(n);return e}.call(this)+"]]"},e.prototype.parents=function(){var t;return(null!=(t=this.__parents__)?t:[]).slice()},e.prototype.getDisplayName=function(){return new t((n=this,function(t,e){return null!=n.model?t(n.model.makePath(n.name).getDisplayName()):e(new Error("model not set - cannot make path"))}));var n},e)}).call(this)},{"./promise":245}],250:[function(r,t,c){(function(){function n(t,e){return function(){return t.apply(e,arguments)}}var s,i,o,a,l,u,t;function e(t,e){this.service=t,this.username=e.username,this.preferences=e.preferences,this.refresh=n(this.refresh,this),this.clearPreferences=n(this.clearPreferences,this),this.clearPreference=n(this.clearPreference,this),this.setPreferences=n(this.setPreferences,this),this.setPreference=n(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}t=r("./util"),u=t.withCB,a=t.get,l=t.isFunction,s=t.any,o=t.error,i=function(e,t,n,i){return e.service.manageUserPreferences(n,t,i).then(function(t){return e.preferences=t})},c.User=(e.prototype.setPreference=function(t,e,n){var i,r;if(l(e)&&(e=(r=[null,e])[0],n=r[1]),"string"==typeof t)(i={})[t]=e;else{if(null!=e)return u(n,o("Incorrect arguments to setPreference"));i=t}return this.setPreferences(i,n)},e.prototype.setPreferences=function(t,e){return i(this,t,"POST",e)},e.prototype.clearPreference=function(t,e){return i(this,{key:t},"DELETE",e)},e.prototype.clearPreferences=function(t){return i(this,{},"DELETE",t)},e.prototype.refresh=function(t){return i(this,{},"GET",t)},e.prototype.createToken=function(t,e,n){var i,r;return null==t&&(t="day"),null==n&&s([t,e],l)&&(l(t)?(t=(i=[null,null,t])[0],e=i[1],n=i[2]):l(e)&&(e=(r=[null,e])[0],n=r[1])),u(n,this.service.post("user/tokens",{type:t,message:e}).then(a("token")))},e.prototype.fetchCurrentTokens=function(t){return u(t,this.service.get("user/tokens").then(a("tokens")))},e.prototype.revokeAllTokens=function(t){return u(t,this.service.makeRequest("DELETE","user/tokens"))},e.prototype.revokeToken=function(t,e){return u(e,this.service.makeRequest("DELETE","user/tokens/"+t))},e)}).call(this)},{"./util":251}],251:[function(k,t,x){(function(){var e,i,n,l,s,a,r,u,c,o,h,f,d,p,g,m,v,y,_,t,b=[].slice,w=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},C={}.hasOwnProperty;e=k("./promise"),(v=x).defer=function(){var n;return(n={}).promise=new e(function(t,e){return n.resolve=t,n.reject=e}),n},s=function(t){return encodeURIComponent(String(t))},m=function(i){var r;return function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r.map(s).join("="));return n}().join("&")},v.querystring=function(t){var i,r,s,e,o,a;if(!t)return"";if(d(t))s=t.slice();else for(i in s=[],t)a=t[i],d(a)?(e=function(){var t,e,n;for(n=[],t=0,e=a.length;t<e;t++)o=a[t],n.push([i,o]);return n}(),s=s.concat(e)):s.push([i,a]);return m(function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)null!=(r=s[t])[1]&&n.push(r);return n}())},v.curry=l=function(t){var e,n;return n=t,e=2<=arguments.length?b.call(arguments,1):[],function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],n.apply(null,e.concat(t))}},v.error=r=function(n){return new e(function(t,e){return e(new Error(n))})},v.success=y=function(n){return new e(function(t,e){return t(n)})},v.parallel=function(){var t;return 1===(t=1<=arguments.length?b.call(arguments,0):[]).length&&!t[0].then&&t[0].length?e.all(t[0]):e.all(t)},v.withCB=function(){var t,e,n,i,r,s,o,a;for(e=2<=arguments.length?b.call(arguments,0,s=arguments.length-1):(s=0,[]),r=arguments[s++],o=0,a=e.length;o<a;o++)null!=(t=e[o])&&(i=l(t,null),n=t,r.then(i,n));return r},v.fold=c=function(s){return function(t,e){var n,i,r;if(1===arguments.length&&(t=(null!=(e=(null!=t?t.slice():void 0)||t)?e.shift():void 0)||{}),null==e)throw new Error("xs is null");if(null!=e.reduce)return e.reduce(s,t);for(n in i=t,e)r=e[n],i=null!=i?s(i,n,r):{k:r};return i}},v.take=function(e){return function(t){return null!=e?t.slice(0,+(e-1)+1||9e9):t.slice()}},v.filter=function(s){return function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],s(e)&&r.push(e);return r}},v.uniqBy=function(t,e){var n,i,r,s,o,a;if(1===arguments.length)return l(v.uniqBy,t);if(i=[],r=[],null==e)return r;for(o=0,a=e.length;o<a;o++)n=t(s=e[o]),w.call(i,n)<0&&(i.push(n),r.push(s));return r},v.find=function(t,e){var n,i,r;if(1===arguments.length)return e=t,function(t){return v.find(t,e)};for(i=0,r=t.length;i<r;i++)if(n=t[i],e(n))return n;return null},d=null!=(t=Array.isArray)?t:function(t){return null!=(null!=t?t.splice:void 0)&&null!=(null!=t?t.push:void 0)&&null!=(null!=t?t.pop:void 0)&&null!=(null!=t?t.slice:void 0)},v.isArray=d,v.isFunction="function"!=typeof/./?function(t){return"function"==typeof t}:function(t){return null!=t&&null!=t.call&&null!=t.apply&&"[object Function]"===t.toString()},a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},v.escape=function(t){var e,n,i,r,s,o;if(null==t)return"";for(i=[],n=s=0,o=(r=String(t).replace(/[&<>"']/g,function(t){return a[t]})).length;0<=o?s<=o:o<=s;n=0<=o?++s:--s)256<(e=r.charCodeAt(n))?i.push("&#"+e+";"):i.push(r.charAt(n));return i.join("")},v.omap=function(o){var e;return e=c(function(t,e,n){var i,r,s;return i=(s=o(e,n))[0],r=s[1],d(r)&&(r=r.slice()),t[i]=r,t}),function(t){return e({},t)}},v.copy=v.omap(function(t,e){return[t,e]}),v.partition=function(r){return function(t){return c(function(t,e){var n,i;return i=t[0],n=t[1],r(e)?[i.concat([e]),n]:[i,n.concat([e])]})([[],[]],t)}},v.merge=function(t,e){return extend(extend({},t),e)},v.extend=function(t,e){var n,i,r;for(n in r=[],e)i=e[n],r.push(t[n]=i);return r},v.id=o=function(t){return t},v.concatMap=function(o){return function(t){var e,n,i,r,s;for(n=void 0,r=0,s=t.length;r<s;r++)i=t[r],e=o(i),n=void 0===n?e:"number"==typeof n?n+e:null!=n.concat?n.concat(e):p(n,e);return n}},v.map=function(t){return h("map",t)},n=c(function(e,n){return function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],e(n.apply(null,t))}}),v.compose=function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],n(t)},v.flatMap=v.concatMap,v.difference=function(t,e){var n,i,r,s;for(s=[],i=0,r=t.length;i<r;i++)n=t[i],w.call(e,n)<0&&s.push(n);return s},v.stringList=function(t){return"string"==typeof t?[t]:t},v.flatten=u=function(){var t,e,n,i,r,s,o,a,l;for(t=[],r=0,o=(n=1<=arguments.length?b.call(arguments,0):[]).length;r<o;r++)if(e=n[r],d(e))for(s=0,a=(l=u.apply(null,e)).length;s<a;s++)i=l[s],t.push(i);else t.push(e);return t},v.sum=v.concatMap(o),v.merge=p=function(){var t,e,n,i,r,s,o;for(e={},s=0,o=(i=1<=arguments.length?b.call(arguments,0):[]).length;s<o;s++)for(t in n=i[s])C.call(n,t)&&(r=n[t],e[t]=r);return e},v.any=function(t,e){var n,i;for(null==e&&(e=o),n=0,i=t.length;n<i;n++)if(e(t[n]))return!0;return!1},v.invoke=h=function(t){var e,n;return n=t,e=2<=arguments.length?b.call(arguments,1):[],f(n,e)},v.invokeWith=f=function(e,n,i){return null==n&&(n=[]),null==i&&(i=null),function(t){if(null==t)throw new Error('Cannot call method "'+e+'" of null');if(t[e])return t[e].apply(i||t,n);throw new Error('Cannot call undefined method "'+e+" of "+t)}},v.get=function(e){return function(t){return t[e]}},v.set=function(i,r){return function(t){var e,n;if(2===arguments.length)t[i]=r;else for(e in i)C.call(i,e)&&(n=i[e],t[e]=n);return t}},i=function(t,e){return"This service requires a service at version "+t+" or above. This one is at "+e},v.REQUIRES_VERSION=function(t,e,n){return t.fetchVersion().then(function(t){return e<=t?n():r(i(e,t))})},v.dejoin=function(t){var e,n,i,r;for(n=0,i=(r=t.views).length;n<i;n++)2<(e=r[n].split(".")).length&&t.addJoin(e.slice(1,-1).join("."));return t},_=c(function(t,e){return t.then(e)}),v.sequence=function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],_(y(),t)},g=c(function(t,e){var n,i;if(n=e[0],i=e[1],null!=t[n])throw new Error("Duplicate key: "+n);return t[n]=i,t}),v.pairsToObj=function(t){return g({},t)}}).call(this)},{"./promise":245}],252:[function(t,e,n){(function(){n.VERSION="3.16.0"}).call(this)},{}],253:[function(t,e,r){(function(){var n,i;n=t("xmldom").DOMParser,i=function(t){return 0===(t=(t=t.replace(/^\s*/g,"")).replace(/\s$/g,"")).length?t:">"!==t[t.length-1]?t+">":t},r.parse=function(t){var e;if("string"!=typeof t)throw new Error("Expected a string - got "+t);if(!(t=i(t)))throw new Error("Expected content - got empty string");if(!(e=function(){try{return(new n).parseFromString(t,"text/xml")}catch(t){}}())||!e.documentElement||e.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return e}}).call(this)},{xmldom:248}],254:[function(K,G,t){(function(V,Y){(function(){function u(t){return"function"==typeof t}var e,n,o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,a=function(t,e){_[i]=t,_[i+1]=e,2===(i+=2)&&(n?n(b):f())};var t="undefined"!=typeof window?window:void 0,r=t||{},s=r.MutationObserver||r.WebKitMutationObserver,l=void 0!==V&&"[object process]"==={}.toString.call(V),c="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){return function(){setTimeout(b,1)}}var f,d,p,g,m,v,y,_=new Array(1e3);function b(){for(var t=0;t<i;t+=2){(0,_[t])(_[t+1]),_[t]=void 0,_[t+1]=void 0}i=0}function w(){}f=l?(v=V.nextTick,y=V.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(y)&&"0"===y[1]&&"10"===y[2]&&(v=setImmediate),function(){v(b)}):s?(p=0,g=new s(b),m=document.createTextNode(""),g.observe(m,{characterData:!0}),function(){m.data=p=++p%2}):c?((d=new MessageChannel).port1.onmessage=b,function(){d.port2.postMessage(0)}):void 0===t&&"function"==typeof K?function(){try{var t=K("vertx");return e=t.runOnLoop||t.runOnContext,function(){e(b)}}catch(t){return h()}}():h();var C=void 0,k=1,x=2,T=new A;function S(t,e){if(e.constructor===t.constructor)!function(e,t){t._state===k?P(e,t._result):t._state===x?N(e,t._result):M(t,void 0,function(t){E(e,t)},function(t){N(e,t)})}(t,e);else{var n=function(t){try{return t.then}catch(t){return T.error=t,T}}(e);n===T?N(t,T.error):void 0===n?P(t,e):u(n)?function(t,i,r){a(function(e){var n=!1,t=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(r,i,function(t){n||(n=!0,i!==t?E(e,t):P(e,t))},function(t){n||(n=!0,N(e,t))},e._label);!n&&t&&(n=!0,N(e,t))},t)}(t,e,n):P(t,e)}}function E(t,e){t===e?N(t,new TypeError("You cannot resolve a promise with itself")):!function(t){return"function"==typeof t||"object"===(void 0===t?"undefined":_typeof(t))&&null!==t}(e)?P(t,e):S(t,e)}function O(t){t._onerror&&t._onerror(t._result),D(t)}function P(t,e){t._state===C&&(t._result=e,t._state=k,0!==t._subscribers.length&&a(D,t))}function N(t,e){t._state===C&&(t._state=x,t._result=e,a(O,t))}function M(t,e,n,i){var r=t._subscribers,s=r.length;t._onerror=null,r[s]=e,r[s+k]=n,r[s+x]=i,0===s&&t._state&&a(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,r,s=t._result,o=0;o<e.length;o+=3)i=e[o],r=e[o+n],i?R(n,i,r,s):r(s);t._subscribers.length=0}}function A(){this.error=null}var I=new A;function R(t,e,n,i){var r,s,o,a,l=u(n);if(l){if((r=function(t,e){try{return t(e)}catch(t){return I.error=t,I}}(n,i))===I?(a=!0,s=r.error,r=null):o=!0,e===r)return void N(e,new TypeError("A promises callback cannot return that same promise."))}else r=i,o=!0;e._state!==C||(l&&o?E(e,r):a?N(e,s):t===k?P(e,r):t===x&&N(e,r))}function L(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(w),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?P(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&P(n.promise,n._result))):N(n.promise,n._validationError())}L.prototype._validateInput=function(t){return o(t)},L.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},L.prototype._init=function(){this._result=new Array(this.length)};var q=L;L.prototype._enumerate=function(){for(var t=this.length,e=this.promise,n=this._input,i=0;e._state===C&&i<t;i++)this._eachEntry(n[i],i)},L.prototype._eachEntry=function(t,e){var n=this._instanceConstructor;!function(t){return"object"===(void 0===t?"undefined":_typeof(t))&&null!==t}(t)?(this._remaining--,this._result[e]=t):t.constructor===n&&t._state!==C?(t._onerror=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(n.resolve(t),e)},L.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===C&&(this._remaining--,t===x?N(i,n):this._result[e]=n),0===this._remaining&&P(i,this._result)},L.prototype._willSettleAt=function(t,e){var n=this;M(t,void 0,function(t){n._settledAt(k,e,t)},function(t){n._settledAt(x,e,t)})};function j(t){var e=new this(w);if(!o(t))return N(e,new TypeError("You must pass an array to race.")),e;var n=t.length;function i(t){E(e,t)}function r(t){N(e,t)}for(var s=0;e._state===C&&s<n;s++)M(this.resolve(t[s]),void 0,i,r);return e}function z(t){if(t&&"object"===(void 0===t?"undefined":_typeof(t))&&t.constructor===this)return t;var e=new this(w);return E(e,t),e}function F(t){var e=new this(w);return N(e,t),e}var H=0;var B=U;function U(t){this._id=H++,this._state=void 0,this._result=void 0,this._subscribers=[],w!==t&&(u(t)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof U||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(e,t){try{t(function(t){E(e,t)},function(t){N(e,t)})}catch(t){N(e,t)}}(this,t))}U.all=function(t){return new q(this,t).promise},U.race=j,U.resolve=z,U.reject=F,U._setScheduler=function(t){n=t},U._setAsap=function(t){a=t},U._asap=a,U.prototype={constructor:U,then:function(t,e){var n=this._state;if(n===k&&!t||n===x&&!e)return this;var i=new this.constructor(w),r=this._result;if(n){var s=arguments[n-1];a(function(){R(n,i,s,r)})}else M(this,i,t,e);return i},catch:function(t){return this.then(null,t)}};var $=function(){var t;if(void 0!==Y)t=Y;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=B)},W={Promise:B,polyfill:$};void 0!==G&&G.exports?G.exports=W:void 0!==this&&(this.ES6Promise=W),$()}).call(this)}).call(this,K("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:275}],255:[function(t,e,n){(function(k){k.ui=k.ui||{};k.ui.version="1.12.1";var r,n=0,a=Array.prototype.slice;k.cleanData=(r=k.cleanData,function(t){var e,n,i;for(i=0;null!=(n=t[i]);i++)try{(e=k._data(n,"events"))&&e.remove&&k(n).triggerHandler("remove")}catch(t){}r(t)}),k.widget=function(t,n,e){var i,r,s,o={},a=t.split(".")[0],l=a+"-"+(t=t.split(".")[1]);return e||(e=n,n=k.Widget),k.isArray(e)&&(e=k.extend.apply(null,[{}].concat(e))),k.expr.pseudos[l.toLowerCase()]=function(t){return!!k.data(t,l)},k[a]=k[a]||{},i=k[a][t],r=k[a][t]=function(t,e){if(!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},k.extend(r,i,{version:e.version,_proto:k.extend({},e),_childConstructors:[]}),(s=new n).options=k.widget.extend({},s.options),k.each(e,function(e,i){function r(){return n.prototype[e].apply(this,arguments)}function s(t){return n.prototype[e].apply(this,t)}k.isFunction(i)?o[e]=function(){var t,e=this._super,n=this._superApply;return this._super=r,this._superApply=s,t=i.apply(this,arguments),this._super=e,this._superApply=n,t}:o[e]=i}),r.prototype=k.widget.extend(s,{widgetEventPrefix:i&&s.widgetEventPrefix||t},o,{constructor:r,namespace:a,widgetName:t,widgetFullName:l}),i?(k.each(i._childConstructors,function(t,e){var n=e.prototype;k.widget(n.namespace+"."+n.widgetName,r,e._proto)}),delete i._childConstructors):n._childConstructors.push(r),k.widget.bridge(t,r),r},k.widget.extend=function(t){for(var e,n,i=a.call(arguments,1),r=0,s=i.length;r<s;r++)for(e in i[r])n=i[r][e],i[r].hasOwnProperty(e)&&void 0!==n&&(k.isPlainObject(n)?t[e]=k.isPlainObject(t[e])?k.widget.extend({},t[e],n):k.widget.extend({},n):t[e]=n);return t},k.widget.bridge=function(s,e){var o=e.prototype.widgetFullName||s;k.fn[s]=function(n){var t="string"==typeof n,i=a.call(arguments,1),r=this;return t?this.length||"instance"!==n?this.each(function(){var t,e=k.data(this,o);return"instance"===n?(r=e,!1):e?k.isFunction(e[n])&&"_"!==n.charAt(0)?(t=e[n].apply(e,i))!==e&&void 0!==t?(r=t&&t.jquery?r.pushStack(t.get()):t,!1):void 0:k.error("no such method '"+n+"' for "+s+" widget instance"):k.error("cannot call methods on "+s+" prior to initialization; attempted to call method '"+n+"'")}):r=void 0:(i.length&&(n=k.widget.extend.apply(null,[n].concat(i))),this.each(function(){var t=k.data(this,o);t?(t.option(n||{}),t._init&&t._init()):k.data(this,o,new e(n,this))})),r}},k.Widget=function(){},k.Widget._childConstructors=[],k.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=k(e||this.defaultElement||this)[0],this.element=k(e),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=k(),this.hoverable=k(),this.focusable=k(),this.classesElementLookup={},e!==this&&(k.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=k(e.style?e.ownerDocument:e.document||e),this.window=k(this.document[0].defaultView||this.document[0].parentWindow)),this.options=k.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:k.noop,_create:k.noop,_init:k.noop,destroy:function(){var n=this;this._destroy(),k.each(this.classesElementLookup,function(t,e){n._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:k.noop,widget:function(){return this.element},option:function(t,e){var n,i,r,s=t;if(0===arguments.length)return k.widget.extend({},this.options);if("string"==typeof t)if(s={},t=(n=t.split(".")).shift(),n.length){for(i=s[t]=k.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)i[n[r]]=i[n[r]]||{},i=i[n[r]];if(t=n.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=e}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,n,i;for(e in t)i=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&i&&i.length&&(n=k(i.get()),this._removeClass(i,e),n.addClass(this._classes({element:n,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(r){var s=[],o=this;function t(t,e){var n,i;for(i=0;i<t.length;i++)n=o.classesElementLookup[t[i]]||k(),n=r.add?k(k.uniqueSort(n.get().concat(r.element.get()))):k(n.not(r.element).get()),o.classesElementLookup[t[i]]=n,s.push(t[i]),e&&r.classes[t[i]]&&s.push(r.classes[t[i]])}return r=k.extend({element:this.element,classes:this.options.classes||{}},r),this._on(r.element,{remove:"_untrackClassesElement"}),r.keys&&t(r.keys.match(/\S+/g)||[],!0),r.extra&&t(r.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(n){var i=this;k.each(i.classesElementLookup,function(t,e){-1!==k.inArray(n.target,e)&&(i.classesElementLookup[t]=k(e.not(n.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof t||null===t,s={extra:r?e:n,keys:r?t:e,element:r?this.element:t,add:i};return s.element.toggleClass(this._classes(s),i),this},_on:function(o,a,t){var l,u=this;"boolean"!=typeof o&&(t=a,a=o,o=!1),t?(a=l=k(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,l=this.widget()),k.each(t,function(t,e){function n(){if(o||!0!==u.options.disabled&&!k(this).hasClass("ui-state-disabled"))return("string"==typeof e?u[e]:e).apply(u,arguments)}"string"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||k.guid++);var i=t.match(/^([\w:-]*)\s*(.*)$/),r=i[1]+u.eventNamespace,s=i[2];s?l.on(r,s,n):a.on(r,n)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=k(this.bindings.not(t).get()),this.focusable=k(this.focusable.not(t).get()),this.hoverable=k(this.hoverable.not(t).get())},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(k(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(k(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(k(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(k(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,n){var i,r,s=this.options[t];if(n=n||{},(e=k.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],r=e.originalEvent)for(i in r)i in e||(e[i]=r[i]);return this.element.trigger(e,n),!(k.isFunction(s)&&!1===s.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},k.each({show:"fadeIn",hide:"fadeOut"},function(s,o){k.Widget.prototype["_"+s]=function(e,t,n){var i;"string"==typeof t&&(t={effect:t});var r=t?!0===t||"number"==typeof t?o:t.effect||o:s;"number"==typeof(t=t||{})&&(t={duration:t}),i=!k.isEmptyObject(t),t.complete=n,t.delay&&e.delay(t.delay),i&&k.effects&&k.effects.effect[r]?e[s](t):r!==s&&e[r]?e[r](t.duration,t.easing,n):e.queue(function(t){k(this)[s](),n&&n.call(e[0]),t()})}});var s,C,x,i,o,l,u,c,e;k.widget;function T(t,e,n){return[parseFloat(t[0])*(c.test(t[0])?e/100:1),parseFloat(t[1])*(c.test(t[1])?n/100:1)]}function S(t,e){return parseInt(k.css(t,e),10)||0}C=Math.max,x=Math.abs,i=/left|center|right/,o=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,c=/%$/,e=k.fn.position,k.position={scrollbarWidth:function(){if(void 0!==s)return s;var t,e,n=k("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];return k("body").append(n),t=i.offsetWidth,n.css("overflow","scroll"),t===(e=i.offsetWidth)&&(e=n[0].clientWidth),n.remove(),s=t-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?k.position.scrollbarWidth():0,height:i?k.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=k(t||window),n=k.isWindow(e[0]),i=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:n,isDocument:i,offset:n||i?{left:0,top:0}:k(t).offset(),scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}},k.fn.position=function(h){if(!h||!h.of)return e.apply(this,arguments);h=k.extend({},h);var f,d,p,g,m,t,v=k(h.of),y=k.position.getWithinInfo(h.within),_=k.position.getScrollInfo(y),b=(h.collision||"flip").split(" "),w={};return t=function(t){var e=t[0];return 9===e.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:k.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}(v),v[0].preventDefault&&(h.at="left top"),d=t.width,p=t.height,g=t.offset,m=k.extend({},g),k.each(["my","at"],function(){var t,e,n=(h[this]||"").split(" ");1===n.length&&(n=i.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]),n[0]=i.test(n[0])?n[0]:"center",n[1]=o.test(n[1])?n[1]:"center",t=l.exec(n[0]),e=l.exec(n[1]),w[this]=[t?t[0]:0,e?e[0]:0],h[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===h.at[0]?m.left+=d:"center"===h.at[0]&&(m.left+=d/2),"bottom"===h.at[1]?m.top+=p:"center"===h.at[1]&&(m.top+=p/2),f=T(w.at,d,p),m.left+=f[0],m.top+=f[1],this.each(function(){var n,t,o=k(this),a=o.outerWidth(),l=o.outerHeight(),e=S(this,"marginLeft"),i=S(this,"marginTop"),r=a+e+S(this,"marginRight")+_.width,s=l+i+S(this,"marginBottom")+_.height,u=k.extend({},m),c=T(w.my,o.outerWidth(),o.outerHeight());"right"===h.my[0]?u.left-=a:"center"===h.my[0]&&(u.left-=a/2),"bottom"===h.my[1]?u.top-=l:"center"===h.my[1]&&(u.top-=l/2),u.left+=c[0],u.top+=c[1],n={marginLeft:e,marginTop:i},k.each(["left","top"],function(t,e){k.ui.position[b[t]]&&k.ui.position[b[t]][e](u,{targetWidth:d,targetHeight:p,elemWidth:a,elemHeight:l,collisionPosition:n,collisionWidth:r,collisionHeight:s,offset:[f[0]+c[0],f[1]+c[1]],my:h.my,at:h.at,within:y,elem:o})}),h.using&&(t=function(t){var e=g.left-u.left,n=e+d-a,i=g.top-u.top,r=i+p-l,s={target:{element:v,left:g.left,top:g.top,width:d,height:p},element:{element:o,left:u.left,top:u.top,width:a,height:l},horizontal:n<0?"left":0<e?"right":"center",vertical:r<0?"top":0<i?"bottom":"middle"};d<a&&x(e+n)<d&&(s.horizontal="center"),p<l&&x(i+r)<p&&(s.vertical="middle"),C(x(e),x(n))>C(x(i),x(r))?s.important="horizontal":s.important="vertical",h.using.call(this,t,s)}),o.offset(k.extend(u,{using:t}))})},k.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,o=t.left-e.collisionPosition.marginLeft,a=r-o,l=o+e.collisionWidth-s-r;e.collisionWidth>s?0<a&&l<=0?(n=t.left+a+e.collisionWidth-s-r,t.left+=a-n):t.left=0<l&&a<=0?r:l<a?r+s-e.collisionWidth:r:0<a?t.left+=a:0<l?t.left-=l:t.left=C(t.left-o,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,s=e.within.height,o=t.top-e.collisionPosition.marginTop,a=r-o,l=o+e.collisionHeight-s-r;e.collisionHeight>s?0<a&&l<=0?(n=t.top+a+e.collisionHeight-s-r,t.top+=a-n):t.top=0<l&&a<=0?r:l<a?r+s-e.collisionHeight:r:0<a?t.top+=a:0<l?t.top-=l:t.top=C(t.top-o,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,s=r.offset.left+r.scrollLeft,o=r.width,a=r.isWindow?r.scrollLeft:r.offset.left,l=t.left-e.collisionPosition.marginLeft,u=l-a,c=l+e.collisionWidth-o-a,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,d=-2*e.offset[0];u<0?((n=t.left+h+f+d+e.collisionWidth-o-s)<0||n<x(u))&&(t.left+=h+f+d):0<c&&(0<(i=t.left-e.collisionPosition.marginLeft+h+f+d-a)||x(i)<c)&&(t.left+=h+f+d)},top:function(t,e){var n,i,r=e.within,s=r.offset.top+r.scrollTop,o=r.height,a=r.isWindow?r.scrollTop:r.offset.top,l=t.top-e.collisionPosition.marginTop,u=l-a,c=l+e.collisionHeight-o-a,h="top"===e.my[1],f=h?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];u<0?((i=t.top+f+d+p+e.collisionHeight-o-s)<0||i<x(u))&&(t.top+=f+d+p):0<c&&(0<(n=t.top-e.collisionPosition.marginTop+f+d+p-a)||x(n)<c)&&(t.top+=f+d+p)}},flipfit:{left:function(){k.ui.position.flip.left.apply(this,arguments),k.ui.position.fit.left.apply(this,arguments)},top:function(){k.ui.position.flip.top.apply(this,arguments),k.ui.position.fit.top.apply(this,arguments)}}};var t;k.ui.position,k.extend(k.expr.pseudos,{data:k.expr.createPseudo?k.expr.createPseudo(function(e){return function(t){return!!k.data(t,e)}}):function(t,e,n){return!!k.data(t,n[3])}}),k.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});k.ui.focusable=function(t,e){var n,i,r,s,o,a=t.nodeName.toLowerCase();return"area"===a?(i=(n=t.parentNode).name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&(0<(r=k("img[usemap='#"+i+"']")).length&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(a)?(s=!t.disabled)&&(o=k(t).closest("fieldset")[0])&&(s=!o.disabled):s="a"===a&&t.href||e,s&&k(t).is(":visible")&&function(t){var e=t.css("visibility");for(;"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}(k(t)))},k.extend(k.expr.pseudos,{focusable:function(t){return k.ui.focusable(t,null!=k.attr(t,"tabindex"))}});k.ui.focusable,k.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):k(this[0].form)},k.ui.formResetMixin={_formResetHandler:function(){var e=k(this);setTimeout(function(){var t=e.data("ui-form-reset-instances");k.each(t,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(k.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};"1.7"===k.fn.jquery.substring(0,3)&&(k.each(["Width","Height"],function(t,n){var r="Width"===n?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),s={innerWidth:k.fn.innerWidth,innerHeight:k.fn.innerHeight,outerWidth:k.fn.outerWidth,outerHeight:k.fn.outerHeight};function o(t,e,n,i){return k.each(r,function(){e-=parseFloat(k.css(t,"padding"+this))||0,n&&(e-=parseFloat(k.css(t,"border"+this+"Width"))||0),i&&(e-=parseFloat(k.css(t,"margin"+this))||0)}),e}k.fn["inner"+n]=function(t){return void 0===t?s["inner"+n].call(this):this.each(function(){k(this).css(i,o(this,t)+"px")})},k.fn["outer"+n]=function(t,e){return"number"!=typeof t?s["outer"+n].call(this,t):this.each(function(){k(this).css(i,o(this,t,!0,e)+"px")})}}),k.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))});k.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},k.ui.escapeSelector=(h=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(h,"\\$1")}),k.fn.labels=function(){var t,e,n,i,r;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),(n=this.attr("id"))&&(r=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),e="label[for='"+k.ui.escapeSelector(n)+"']",i=i.add(r.find(e).addBack(e))),this.pushStack(i))},k.fn.scrollParent=function(t){var e=this.css("position"),n="absolute"===e,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=k(this);return(!n||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&r.length?r:k(this[0].ownerDocument||document)},k.extend(k.expr.pseudos,{tabbable:function(t){var e=k.attr(t,"tabindex"),n=null!=e;return(!n||0<=e)&&k.ui.focusable(t,n)}}),k.fn.extend({uniqueId:(f=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++f)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&k(this).removeAttr("id")})}}),k.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var h,f,d=!1;k(document).on("mouseup",function(){d=!1});k.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(t){if(!0===k.data(t.target,e.widgetName+".preventClickEvent"))return k.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,n=1===t.which,i=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&k(t.target).closest(this.options.cancel).length;return!(n&&!i&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===k.data(t.target,this.widgetName+".preventClickEvent")&&k.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0))}},_mouseMove:function(t){if(this._mouseMoved){if(k.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&k.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,d=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),k.ui.plugin={add:function(t,e,n){var i,r=k.ui[t].prototype;for(i in n)r.plugins[i]=r.plugins[i]||[],r.plugins[i].push([e,n[i]])},call:function(t,e,n,i){var r,s=t.plugins[e];if(s&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;r<s.length;r++)t.options[s[r][0]]&&s[r][1].apply(t.element,n)}},k.ui.safeActiveElement=function(e){var n;try{n=e.activeElement}catch(t){n=e.body}return n||(n=e.body),n.nodeName||(n=e.body),n},k.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&k(t).trigger("blur")};k.widget("ui.draggable",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||0<k(t.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=k(this);return k("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=k.ui.safeActiveElement(this.document[0]);k(t.target).closest(e).length||k.ui.safeBlur(e)},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),k.ui.ddmanager&&(k.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===k(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),k.ui.ddmanager&&!e.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),k.ui.ddmanager&&k.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!e){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new k.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",k.ui.ddmanager&&k.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,n=!1;return k.ui.ddmanager&&!this.options.dropBehaviour&&(n=k.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||k.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?k(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),k.ui.ddmanager&&k.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),k.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new k.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!k(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var e=this.options,n=k.isFunction(e.helper),i=n?k(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),n&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),k.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&k.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options,r=this.document[0];this.relativeContainer=null,i.containment?"window"!==i.containment?"document"!==i.containment?i.containment.constructor!==Array?("parent"===i.containment&&(i.containment=this.helper[0].parentNode),(n=(e=k(i.containment))[0])&&(t=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e)):this.containment=i.containment:this.containment=[0,0,k(r).width()-this.helperProportions.width-this.margins.left,(k(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[k(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,k(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,k(window).scrollLeft()+k(window).width()-this.helperProportions.width-this.margins.left,k(window).scrollTop()+(k(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,r,s,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,u=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(n=this.relativeContainer?(i=this.relativeContainer.offset(),[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-o.grid[1]:r+o.grid[1]:r,s=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,e,n){return n=n||this._uiHash(),k.ui.plugin.call(this,t,[e,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),k.Widget.prototype._trigger.call(this,t,e,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),k.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,n){var i=k.extend({},t,{item:n.element});n.sortables=[],k(n.options.connectToSortable).each(function(){var t=k(this).sortable("instance");t&&!t.options.disabled&&(n.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,i))})},stop:function(e,t,n){var i=k.extend({},t,{item:n.element});n.cancelHelperRemoval=!1,k.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,i))})},drag:function(n,i,r){k.each(r.sortables,function(){var t=!1,e=this;e.positionAbs=r.positionAbs,e.helperProportions=r.helperProportions,e.offset.click=r.offset.click,e._intersectsWith(e.containerCache)&&(t=!0,k.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==e&&this._intersectsWith(this.containerCache)&&k.contains(e.element[0],this.element[0])&&(t=!1),t})),t?(e.isOver||(e.isOver=1,r._parent=i.helper.parent(),e.currentItem=i.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return i.helper[0]},n.target=e.currentItem[0],e._mouseCapture(n,!0),e._mouseStart(n,!0,!0),e.offset.click.top=r.offset.click.top,e.offset.click.left=r.offset.click.left,e.offset.parent.left-=r.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=r.offset.parent.top-e.offset.parent.top,r._trigger("toSortable",n),r.dropped=e.element,k.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,e.fromOutside=r),e.currentItem&&(e._mouseDrag(n),i.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",n,e._uiHash(e)),e._mouseStop(n,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),i.helper.appendTo(r._parent),r._refreshOffsets(n),i.position=r._generatePosition(n,!0),r._trigger("fromSortable",n),r.dropped=!1,k.each(r.sortables,function(){this.refreshPositions()}))})}}),k.ui.plugin.add("draggable","cursor",{start:function(t,e,n){var i=k("body"),r=n.options;i.css("cursor")&&(r._cursor=i.css("cursor")),i.css("cursor",r.cursor)},stop:function(t,e,n){var i=n.options;i._cursor&&k("body").css("cursor",i._cursor)}}),k.ui.plugin.add("draggable","opacity",{start:function(t,e,n){var i=k(e.helper),r=n.options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,e,n){var i=n.options;i._opacity&&k(e.helper).css("opacity",i._opacity)}}),k.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,e,n){var i=n.options,r=!1,s=n.scrollParentNotHidden[0],o=n.document[0];s!==o&&"HTML"!==s.tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+s.offsetHeight-t.pageY<i.scrollSensitivity?s.scrollTop=r=s.scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+s.offsetWidth-t.pageX<i.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-k(o).scrollTop()<i.scrollSensitivity?r=k(o).scrollTop(k(o).scrollTop()-i.scrollSpeed):k(window).height()-(t.pageY-k(o).scrollTop())<i.scrollSensitivity&&(r=k(o).scrollTop(k(o).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-k(o).scrollLeft()<i.scrollSensitivity?r=k(o).scrollLeft(k(o).scrollLeft()-i.scrollSpeed):k(window).width()-(t.pageX-k(o).scrollLeft())<i.scrollSensitivity&&(r=k(o).scrollLeft(k(o).scrollLeft()+i.scrollSpeed)))),!1!==r&&k.ui.ddmanager&&!i.dropBehaviour&&k.ui.ddmanager.prepareOffsets(n,t)}}),k.ui.plugin.add("draggable","snap",{start:function(t,e,n){var i=n.options;n.snapElements=[],k(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=k(this),e=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e,n){var i,r,s,o,a,l,u,c,h,f,d=n.options,p=d.snapTolerance,g=e.offset.left,m=g+n.helperProportions.width,v=e.offset.top,y=v+n.helperProportions.height;for(h=n.snapElements.length-1;0<=h;h--)l=(a=n.snapElements[h].left-n.margins.left)+n.snapElements[h].width,c=(u=n.snapElements[h].top-n.margins.top)+n.snapElements[h].height,m<a-p||l+p<g||y<u-p||c+p<v||!k.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,k.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==d.snapMode&&(i=Math.abs(u-y)<=p,r=Math.abs(c-v)<=p,s=Math.abs(a-m)<=p,o=Math.abs(l-g)<=p,i&&(e.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),r&&(e.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),s&&(e.position.left=n._convertPositionTo("relative",{top:0,left:a-n.helperProportions.width}).left),o&&(e.position.left=n._convertPositionTo("relative",{top:0,left:l}).left)),f=i||r||s||o,"outer"!==d.snapMode&&(i=Math.abs(u-v)<=p,r=Math.abs(c-y)<=p,s=Math.abs(a-g)<=p,o=Math.abs(l-m)<=p,i&&(e.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),r&&(e.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),s&&(e.position.left=n._convertPositionTo("relative",{top:0,left:a}).left),o&&(e.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(i||r||s||o||f)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,k.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=i||r||s||o||f)}}),k.ui.plugin.add("draggable","stack",{start:function(t,e,n){var i,r=n.options,s=k.makeArray(k(r.stack)).sort(function(t,e){return(parseInt(k(t).css("zIndex"),10)||0)-(parseInt(k(e).css("zIndex"),10)||0)});s.length&&(i=parseInt(k(s[0]).css("zIndex"),10)||0,k(s).each(function(t){k(this).css("zIndex",i+t)}),this.css("zIndex",i+s.length))}}),k.ui.plugin.add("draggable","zIndex",{start:function(t,e,n){var i=k(e.helper),r=n.options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,e,n){var i=n.options;i._zIndex&&k(e.helper).css("zIndex",i._zIndex)}});k.ui.draggable;k.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,n=e.accept;this.isover=!1,this.isout=!0,this.accept=k.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){k.ui.ddmanager.droppables[t]=k.ui.ddmanager.droppables[t]||[],k.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=k.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,e){if("accept"===t)this.accept=k.isFunction(e)?e:function(t){return t.is(e)};else if("scope"===t){var n=k.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(e)}this._super(t,e)},_activate:function(t){var e=k.ui.ddmanager.current;this._addActiveClass(),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=k.ui.ddmanager.current;this._removeActiveClass(),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=k.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=k.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(e)))},_drop:function(e,t){var n=t||k.ui.ddmanager.current,i=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=k(this).droppable("instance");if(t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&p(n,k.extend(t,{offset:t.element.offset()}),t.options.tolerance,e))return!(i=!0)}),!i&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var p=k.ui.intersect=function(t,e,n,i){if(!e.offset)return!1;var r=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,o=r+t.helperProportions.width,a=s+t.helperProportions.height,l=e.offset.left,u=e.offset.top,c=l+e.proportions().width,h=u+e.proportions().height;switch(n){case"fit":return l<=r&&o<=c&&u<=s&&a<=h;case"intersect":return l<r+t.helperProportions.width/2&&o-t.helperProportions.width/2<c&&u<s+t.helperProportions.height/2&&a-t.helperProportions.height/2<h;case"pointer":return g(i.pageY,u,e.proportions().height)&&g(i.pageX,l,e.proportions().width);case"touch":return(u<=s&&s<=h||u<=a&&a<=h||s<u&&h<a)&&(l<=r&&r<=c||l<=o&&o<=c||r<l&&c<o);default:return!1}};function g(t,e,n){return e<=t&&t<e+n}!(k.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var n,i,r=k.ui.ddmanager.droppables[t.options.scope]||[],s=e?e.type:null,o=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<r.length;n++)if(!(r[n].options.disabled||t&&!r[n].accept.call(r[n].element[0],t.currentItem||t.element))){for(i=0;i<o.length;i++)if(o[i]===r[n].element[0]){r[n].proportions().height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===s&&r[n]._activate.call(r[n],e),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(t,e){var n=!1;return k.each((k.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&p(t,this,this.options.tolerance,e)&&(n=this._drop.call(this,e)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),n},dragStart:function(t,e){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||k.ui.ddmanager.prepareOffsets(t,e)})},drag:function(s,o){s.options.refreshPositions&&k.ui.ddmanager.prepareOffsets(s,o),k.each(k.ui.ddmanager.droppables[s.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,e,n,i=p(s,this,this.options.tolerance,o),r=!i&&this.isover?"isout":i&&!this.isover?"isover":null;r&&(this.options.greedy&&(e=this.options.scope,(n=this.element.parents(":data(ui-droppable)").filter(function(){return k(this).droppable("instance").options.scope===e})).length&&((t=k(n[0]).droppable("instance")).greedyChild="isover"===r)),t&&"isover"===r&&(t.isover=!1,t.isout=!0,t._out.call(t,o)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,o),t&&"isout"===r&&(t.isout=!1,t.isover=!0,t._over.call(t,o)))}})},dragStop:function(t,e){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||k.ui.ddmanager.prepareOffsets(t,e)}})!==k.uiBackCompat&&k.widget("ui.droppable",k.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});k.ui.droppable;k.widget("ui.resizable",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(t,e){if("hidden"===k(t).css("overflow"))return!1;var n,i=e&&"left"===e?"scrollLeft":"scrollTop";return 0<t[i]||(t[i]=1,n=0<t[i],t[i]=0,n)},_create:function(){var t,e=this.options,n=this;this._addClass("ui-resizable"),k.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(k("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),e.autoHide&&k(this.element).on("mouseenter",function(){e.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){e.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();function t(t){k(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()}var e;return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,e,n,i,r,s=this.options,o=this;if(this.handles=s.handles||(k(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=k(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},e=0;e<n.length;e++)i="ui-resizable-"+(t=k.trim(n[e])),r=k("<div>"),this._addClass(r,"ui-resizable-handle "+i),r.css({zIndex:s.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(r);this._renderAxis=function(t){var e,n,i,r;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=k(this.handles[e]),this._on(this.handles[e],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=k(this.handles[e],this.element),r=/sw|ne|nw|se|n|s/.test(e)?n.outerHeight():n.outerWidth(),i=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(i,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){o.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=r&&r[1]?r[1]:"se")}),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var e,n,i=!1;for(e in this.handles)(n=k(this.handles[e])[0])!==t.target&&!k.contains(n,t.target)||(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var e,n,i,r=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(e+=k(r.containment).scrollLeft()||0,n+=k(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:e,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=k(".ui-resizable-"+this.axis).css("cursor"),k("body").css("cursor","auto"===i?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e,n,i=this.originalMousePosition,r=this.axis,s=t.pageX-i.left||0,o=t.pageY-i.top||0,a=this._change[r];return this._updatePrevProperties(),a&&(e=a.apply(this,[t,s,o]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(e=this._updateRatio(e,t)),e=this._respectSize(e,t),this._updateCache(e),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),k.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges())),!1},_mouseStop:function(t){this.resizing=!1;var e,n,i,r,s,o,a,l=this.options,u=this;return this._helper&&(i=(n=(e=this._proportionallyResizeElements).length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:u.sizeDiff.height,r=n?0:u.sizeDiff.width,s={width:u.helper.width()-r,height:u.helper.height()-i},o=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,a=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(k.extend(s,{top:a,left:o})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),k("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,n,i,r,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||t)&&(e=s.minHeight*this.aspectRatio,i=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,e>s.minWidth&&(s.minWidth=e),i>s.minHeight&&(s.minHeight=i),n<s.maxWidth&&(s.maxWidth=n),r<s.maxHeight&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,i=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===i&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===i&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,i=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,s=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,u=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return s&&(t.width=e.minWidth),o&&(t.height=e.minHeight),i&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),s&&u&&(t.left=a-e.minWidth),i&&u&&(t.left=a-e.maxWidth),o&&c&&(t.top=l-e.minHeight),r&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,n=[],i=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],r=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)n[e]=parseFloat(i[e])||0,n[e]+=parseFloat(r[e])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,n=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||k("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize;return{left:this.originalPosition.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(t,e,n){return k.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,n]))},sw:function(t,e,n){return k.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,n]))},ne:function(t,e,n){return k.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,n]))},nw:function(t,e,n){return k.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,n]))}},_propagate:function(t,e){k.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),k.ui.plugin.add("resizable","animate",{stop:function(e){var n=k(this).resizable("instance"),t=n.options,i=n._proportionallyResizeElements,r=i.length&&/textarea/i.test(i[0].nodeName),s=r&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,o=r?0:n.sizeDiff.width,a={width:n.size.width-o,height:n.size.height-s},l=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(k.extend(a,u&&l?{top:u,left:l}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};i&&i.length&&k(i[0]).css({width:t.width,height:t.height}),n._updateCache(t),n._propagate("resize",e)}})}}),k.ui.plugin.add("resizable","containment",{start:function(){var n,i,t,e,r,s,o,a=k(this).resizable("instance"),l=a.options,u=a.element,c=l.containment,h=c instanceof k?c.get(0):/parent/.test(c)?u.parent().get(0):c;h&&(a.containerElement=k(h),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:k(document),left:0,top:0,width:k(document).width(),height:k(document).height()||document.body.parentNode.scrollHeight}):(n=k(h),i=[],k(["Top","Right","Left","Bottom"]).each(function(t,e){i[t]=a._num(n.css("padding"+e))}),a.containerOffset=n.offset(),a.containerPosition=n.position(),a.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},t=a.containerOffset,e=a.containerSize.height,r=a.containerSize.width,s=a._hasScroll(h,"left")?h.scrollWidth:r,o=a._hasScroll(h)?h.scrollHeight:e,a.parentData={element:h,left:t.left,top:t.top,width:s,height:o}))},resize:function(t){var e,n,i,r,s=k(this).resizable("instance"),o=s.options,a=s.containerOffset,l=s.position,u=s._aspectRatio||t.shiftKey,c={top:0,left:0},h=s.containerElement,f=!0;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),l.left<(s._helper?a.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-a.left:s.position.left-c.left),u&&(s.size.height=s.size.width/s.aspectRatio,f=!1),s.position.left=o.helper?a.left:0),l.top<(s._helper?a.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-a.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio,f=!1),s.position.top=s._helper?a.top:0),i=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),i&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),e=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-c.left:s.offset.left-a.left)),n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-c.top:s.offset.top-a.top)),e+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-e,u&&(s.size.height=s.size.width/s.aspectRatio,f=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,u&&(s.size.width=s.size.height*s.aspectRatio,f=!1)),f||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var t=k(this).resizable("instance"),e=t.options,n=t.containerOffset,i=t.containerPosition,r=t.containerElement,s=k(t.helper),o=s.offset(),a=s.outerWidth()-t.sizeDiff.width,l=s.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(r.css("position"))&&k(this).css({left:o.left-i.left-n.left,width:a,height:l}),t._helper&&!e.animate&&/static/.test(r.css("position"))&&k(this).css({left:o.left-i.left-n.left,width:a,height:l})}}),k.ui.plugin.add("resizable","alsoResize",{start:function(){var t=k(this).resizable("instance").options;k(t.alsoResize).each(function(){var t=k(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var e=k(this).resizable("instance"),i=e.options,r=e.originalSize,s=e.originalPosition,o={height:e.size.height-r.height||0,width:e.size.width-r.width||0,top:e.position.top-s.top||0,left:e.position.left-s.left||0};k(i.alsoResize).each(function(){var t=k(this),i=k(this).data("ui-resizable-alsoresize"),r={},e=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];k.each(e,function(t,e){var n=(i[e]||0)+(o[e]||0);n&&0<=n&&(r[e]=n||null)}),t.css(r)})},stop:function(){k(this).removeData("ui-resizable-alsoresize")}}),k.ui.plugin.add("resizable","ghost",{start:function(){var t=k(this).resizable("instance"),e=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==k.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=k(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=k(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),k.ui.plugin.add("resizable","grid",{resize:function(){var t,e=k(this).resizable("instance"),n=e.options,i=e.size,r=e.originalSize,s=e.originalPosition,o=e.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=a[0]||1,u=a[1]||1,c=Math.round((i.width-r.width)/l)*l,h=Math.round((i.height-r.height)/u)*u,f=r.width+c,d=r.height+h,p=n.maxWidth&&n.maxWidth<f,g=n.maxHeight&&n.maxHeight<d,m=n.minWidth&&n.minWidth>f,v=n.minHeight&&n.minHeight>d;n.grid=a,m&&(f+=l),v&&(d+=u),p&&(f-=l),g&&(d-=u),/^(se|s|e)$/.test(o)?(e.size.width=f,e.size.height=d):/^(ne)$/.test(o)?(e.size.width=f,e.size.height=d,e.position.top=s.top-h):/^(sw)$/.test(o)?(e.size.width=f,e.size.height=d,e.position.left=s.left-c):((d-u<=0||f-l<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),0<d-u?(e.size.height=d,e.position.top=s.top-h):(d=u-t.height,e.size.height=d,e.position.top=s.top+r.height-d),0<f-l?(e.size.width=f,e.position.left=s.left-c):(f=l-t.width,e.size.width=f,e.position.left=s.left+r.width-f))}});k.ui.resizable,k.widget("ui.selectable",k.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var i=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){i.elementPos=k(i.element[0]).offset(),i.selectees=k(i.options.filter,i.element[0]),i._addClass(i.selectees,"ui-selectee"),i.selectees.each(function(){var t=k(this),e=t.offset(),n={left:e.left-i.elementPos.left,top:e.top-i.elementPos.top};k.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=k("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(n){var i=this,t=this.options;this.opos=[n.pageX,n.pageY],this.elementPos=k(this.element[0]).offset(),this.options.disabled||(this.selectees=k(t.filter,this.element[0]),this._trigger("start",n),k(t.appendTo).append(this.helper),this.helper.css({left:n.pageX,top:n.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=k.data(this,"selectable-item");t.startselected=!0,n.metaKey||n.ctrlKey||(i._removeClass(t.$element,"ui-selected"),t.selected=!1,i._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element}))}),k(n.target).parents().addBack().each(function(){var t,e=k.data(this,"selectable-item");if(e)return t=!n.metaKey&&!n.ctrlKey||!e.$element.hasClass("ui-selected"),i._removeClass(e.$element,t?"ui-unselecting":"ui-selected")._addClass(e.$element,t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?i._trigger("selecting",n,{selecting:e.element}):i._trigger("unselecting",n,{unselecting:e.element}),!1}))},_mouseDrag:function(i){if(this.dragged=!0,!this.options.disabled){var t,r=this,s=this.options,o=this.opos[0],a=this.opos[1],l=i.pageX,u=i.pageY;return l<o&&(t=l,l=o,o=t),u<a&&(t=u,u=a,a=t),this.helper.css({left:o,top:a,width:l-o,height:u-a}),this.selectees.each(function(){var t=k.data(this,"selectable-item"),e=!1,n={};t&&t.element!==r.element[0]&&(n.left=t.left+r.elementPos.left,n.right=t.right+r.elementPos.left,n.top=t.top+r.elementPos.top,n.bottom=t.bottom+r.elementPos.top,"touch"===s.tolerance?e=!(n.left>l||n.right<o||n.top>u||n.bottom<a):"fit"===s.tolerance&&(e=n.left>o&&n.right<l&&n.top>a&&n.bottom<u),e?(t.selected&&(r._removeClass(t.$element,"ui-selected"),t.selected=!1),t.unselecting&&(r._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1),t.selecting||(r._addClass(t.$element,"ui-selecting"),t.selecting=!0,r._trigger("selecting",i,{selecting:t.element}))):(t.selecting&&((i.metaKey||i.ctrlKey)&&t.startselected?(r._removeClass(t.$element,"ui-selecting"),t.selecting=!1,r._addClass(t.$element,"ui-selected"),t.selected=!0):(r._removeClass(t.$element,"ui-selecting"),t.selecting=!1,t.startselected&&(r._addClass(t.$element,"ui-unselecting"),t.unselecting=!0),r._trigger("unselecting",i,{unselecting:t.element}))),t.selected&&(i.metaKey||i.ctrlKey||t.startselected||(r._removeClass(t.$element,"ui-selected"),t.selected=!1,r._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,r._trigger("unselecting",i,{unselecting:t.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,k(".ui-unselecting",this.element[0]).each(function(){var t=k.data(this,"selectable-item");n._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1,t.startselected=!1,n._trigger("unselected",e,{unselected:t.element})}),k(".ui-selecting",this.element[0]).each(function(){var t=k.data(this,"selectable-item");n._removeClass(t.$element,"ui-selecting")._addClass(t.$element,"ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,n._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),k.widget("ui.sortable",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return e<=t&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),k.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var n=null,i=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),k(t.target).parents().each(function(){if(k.data(this,r.widgetName+"-item")===r)return n=k(this),!1}),k.data(t.target,r.widgetName+"-item")===r&&(n=k(t.target)),!!n&&(!(this.options.handle&&!e&&(k(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,n){var i,r,s=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},k.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=k("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(i=this.containers.length-1;0<=i;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return k.ui.ddmanager&&(k.ui.ddmanager.current=this),k.ui.ddmanager&&!s.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,n,i,r,s=this.options,o=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-this.document.scrollTop()<s.scrollSensitivity?o=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<s.scrollSensitivity&&(o=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),t.pageX-this.document.scrollLeft()<s.scrollSensitivity?o=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(o=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),!1!==o&&k.ui.ddmanager&&!s.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(i=(n=this.items[e]).item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===i||k.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&k.contains(this.element[0],i))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),k.ui.ddmanager&&k.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(k.ui.ddmanager&&!this.options.dropBehaviour&&k.ui.ddmanager.drop(this,t),this.options.revert){var n=this,i=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,k(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new k.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),k.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?k(this.domPosition.prev).after(this.currentItem):k(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},k(t).each(function(){var t=(k(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&n.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e.each(function(){n.push(k(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,s=t.left,o=s+t.width,a=t.top,l=a+t.height,u=this.offset.click.top,c=this.offset.click.left,h="x"===this.options.axis||a<i+u&&i+u<l,f="y"===this.options.axis||s<e+c&&e+c<o,d=h&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?d:s<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!(!i||!r)&&(e=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var e,n,i,r,s=[],o=[],a=this._connectWith();if(a&&t)for(e=a.length-1;0<=e;e--)for(n=(i=k(a[e],this.document[0])).length-1;0<=n;n--)(r=k.data(i[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&o.push([k.isFunction(r.options.items)?r.options.items.call(r.element):k(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);function l(){s.push(this)}for(o.push([k.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):k(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),e=o.length-1;0<=e;e--)o[e][0].each(l);return k(s)},_removeCurrentsFromItems:function(){var n=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=k.grep(this.items,function(t){for(var e=0;e<n.length;e++)if(n[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,n,i,r,s,o,a,l,u=this.items,c=[[k.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):k(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(e=h.length-1;0<=e;e--)for(n=(i=k(h[e],this.document[0])).length-1;0<=n;n--)(r=k.data(i[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(c.push([k.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):k(r.options.items,r.element),r]),this.containers.push(r));for(e=c.length-1;0<=e;e--)for(s=c[e][1],n=0,l=(o=c[e][0]).length;n<l;n++)(a=k(o[n])).data(this.widgetName+"-item",s),u.push({item:a,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,n,i,r;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(n=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?k(this.options.toleranceElement,n.item):n.item,t||(n.width=i.outerWidth(),n.height=i.outerHeight()),r=i.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)r=this.containers[e].element.offset(),this.containers[e].containerCache.left=r.left,this.containers[e].containerCache.top=r.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(n){var i,r=(n=n||this).options;r.placeholder&&r.placeholder.constructor!==String||(i=r.placeholder,r.placeholder={element:function(){var t=n.currentItem[0].nodeName.toLowerCase(),e=k("<"+t+">",n.document[0]);return n._addClass(e,"ui-sortable-placeholder",i||n.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===t?n._createTrPlaceholder(n.currentItem.find("tr").eq(0),k("<tr>",n.document[0]).appendTo(e)):"tr"===t?n._createTrPlaceholder(n.currentItem,e):"img"===t&&e.attr("src",n.currentItem.attr("src")),i||e.css("visibility","hidden"),e},update:function(t,e){i&&!r.forcePlaceholderSize||(e.height()||e.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=k(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_createTrPlaceholder:function(t,e){var n=this;t.children().each(function(){k("<td>&#160;</td>",n.document[0]).attr("colspan",k(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,n,i,r,s,o,a,l,u,c,h=null,f=null;for(e=this.containers.length-1;0<=e;e--)if(!k.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(h&&k.contains(this.containers[e].element[0],h.element[0]))continue;h=this.containers[e],f=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(i=1e4,r=null,s=(u=h.floating||this._isFloating(this.currentItem))?"left":"top",o=u?"width":"height",c=u?"pageX":"pageY",n=this.items.length-1;0<=n;n--)k.contains(this.containers[f].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(a=this.items[n].item.offset()[s],l=!1,t[c]-a>this.items[n][o]/2&&(l=!0),Math.abs(t[c]-a)<i&&(i=Math.abs(t[c]-a),r=this.items[n],this.direction=l?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[f].element,!0),this._trigger("change",t,this._uiHash()),this.containers[f]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var e=this.options,n=k.isFunction(e.helper)?k(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||k("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!e.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!e.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),k.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&k.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=k(i.containment)[0],e=k(i.containment).offset(),n="hidden"!==k(t).css("overflow"),this.containment=[e.left+(parseInt(k(t).css("borderLeftWidth"),10)||0)+(parseInt(k(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(k(t).css("borderTopWidth"),10)||0)+(parseInt(k(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(k(t).css("borderLeftWidth"),10)||0)-(parseInt(k(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(k(t).css("borderTopWidth"),10)||0)-(parseInt(k(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop())*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())*n}},_generatePosition:function(t){var e,n,i=this.options,r=t.pageX,s=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),i.grid&&(e=this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1],s=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-i.grid[1]:e+i.grid[1]:e,n=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:o.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:o.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function r(e,n,i){return function(t){i._trigger(e,t,n._uiHash(n))}}for(this.fromOutside&&!e&&i.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||i.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(i.push(function(t){this._trigger("remove",t,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;0<=n;n--)e||i.push(r("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(r("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===k.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||k([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}}),k.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=k(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():k()}},_createIcons:function(){var t,e,n=this.options.icons;n&&(t=k("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+n.header),t.prependTo(this.headers),e=this.active.children(".ui-accordion-header-icon"),this._removeClass(e,n.header)._addClass(e,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons())):this._activate(e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var e=k.ui.keyCode,n=this.headers.length,i=this.headers.index(t.target),r=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:r=this.headers[(i+1)%n];break;case e.LEFT:case e.UP:r=this.headers[(i-1+n)%n];break;case e.SPACE:case e.ENTER:this._eventHandler(t);break;case e.HOME:r=this.headers[0];break;case e.END:r=this.headers[n-1]}r&&(k(t.target).attr("tabIndex",-1),k(r).attr("tabIndex",0),k(r).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===k.ui.keyCode.UP&&t.ctrlKey&&k(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=k()):!1===t.active?this._activate(0):this.active.length&&!k.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=k()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var n,t=this.options,e=t.heightStyle,i=this.element.parent();this.active=this._findActive(t.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var t=k(this),e=t.uniqueId().attr("id"),n=t.next(),i=n.uniqueId().attr("id");t.attr("aria-controls",i),n.attr("aria-labelledby",e)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(t.event),"fill"===e?(n=i.height(),this.element.siblings(":visible").each(function(){var t=k(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(n-=t.outerHeight(!0))}),this.headers.each(function(){n-=k(this).outerHeight(!0)}),this.headers.next().each(function(){k(this).height(Math.max(0,n-k(this).innerHeight()+k(this).height()))}).css("overflow","auto")):"auto"===e&&(n=0,this.headers.next().each(function(){var t=k(this).is(":visible");t||k(this).show(),n=Math.max(n,k(this).css("height","").height()),t||k(this).hide()}).height(n))},_activate:function(t){var e=this._findActive(t)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:k.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):k()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&k.each(t.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var e,n,i=this.options,r=this.active,s=k(t.currentTarget),o=s[0]===r[0],a=o&&i.collapsible,l=a?k():s.next(),u=r.next(),c={oldHeader:r,oldPanel:u,newHeader:a?k():s,newPanel:l};t.preventDefault(),o&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!a&&this.headers.index(s),this.active=o?k():s,this._toggle(c),this._removeClass(r,"ui-accordion-header-active","ui-state-active"),i.icons&&(e=r.children(".ui-accordion-header-icon"),this._removeClass(e,null,i.icons.activeHeader)._addClass(e,null,i.icons.header)),o||(this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active"),i.icons&&(n=s.children(".ui-accordion-header-icon"),this._removeClass(n,null,i.icons.header)._addClass(n,null,i.icons.activeHeader)),this._addClass(s.next(),"ui-accordion-content-active")))},_toggle:function(t){var e=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=e,this.prevHide=n,this.options.animate?this._animate(e,n,t):(n.hide(),e.show(),this._toggleComplete(t)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),e.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):e.length&&this.headers.filter(function(){return 0===parseInt(k(this).attr("tabIndex"),10)}).attr("tabIndex",-1),e.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,n,e){function i(){a._toggleComplete(e)}var r,s,o,a=this,l=0,u=t.css("box-sizing"),c=t.length&&(!n.length||t.index()<n.index()),h=this.options.animate||{},f=c&&h.down||h;return"number"==typeof f&&(o=f),"string"==typeof f&&(s=f),s=s||f.easing||h.easing,o=o||f.duration||h.duration,n.length?t.length?(r=t.show().outerHeight(),n.animate(this.hideProps,{duration:o,easing:s,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:o,easing:s,complete:i,step:function(t,e){e.now=Math.round(t),"height"!==e.prop?"content-box"===u&&(l+=e.now):"content"!==a.options.heightStyle&&(e.now=Math.round(r-n.outerHeight()-l),l=0)}})):n.animate(this.hideProps,o,s,i):t.animate(this.showProps,o,s,i)},_toggleComplete:function(t){var e=t.oldPanel,n=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(n,"ui-accordion-header-active")._addClass(n,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),k.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(t){var e=k(t.target),n=k(k.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var e=k(t.target).closest(".ui-menu-item"),n=k(t.currentTarget);e[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(t){this._delay(function(){k.contains(this.element[0],k.ui.safeActiveElement(this.document[0]))||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each(function(){var t=k(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var e,n,i,r,s=!0;switch(t.keyCode){case k.ui.keyCode.PAGE_UP:this.previousPage(t);break;case k.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case k.ui.keyCode.HOME:this._move("first","first",t);break;case k.ui.keyCode.END:this._move("last","last",t);break;case k.ui.keyCode.UP:this.previous(t);break;case k.ui.keyCode.DOWN:this.next(t);break;case k.ui.keyCode.LEFT:this.collapse(t);break;case k.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case k.ui.keyCode.ENTER:case k.ui.keyCode.SPACE:this._activate(t);break;case k.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,n=this.previousFilter||"",r=!1,i=96<=t.keyCode&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),i===n?r=!0:i=n+i,e=this._filterMenuItems(i),(e=r&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(i=String.fromCharCode(t.keyCode),e=this._filterMenuItems(i)),e.length?(this.focus(t,e),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}s&&t.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var t,e,n,i,r=this,s=this.options.icons.submenu,o=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),e=o.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=k(this),e=t.prev(),n=k("<span>").data("ui-menu-submenu-caret",!0);r._addClass(n,"ui-menu-icon","ui-icon "+s),e.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",e.attr("id"))}),this._addClass(e,"ui-menu","ui-widget ui-widget-content ui-front"),(t=o.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=k(this);r._isDivider(t)&&r._addClass(t,"ui-menu-divider","ui-widget-content")}),i=(n=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(i,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!k.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var n,i,r;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(r,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(n=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,n,i,r,s,o;this._hasScroll()&&(e=parseFloat(k.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(k.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-n,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),o=t.outerHeight(),i<0?this.activeMenu.scrollTop(r+i):s<i+o&&this.activeMenu.scrollTop(r+i-s+o))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=k.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var t=n?this.element:k(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this._removeClass(t.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=t},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!k(t.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[e]()),this.focus(n,i)},nextPage:function(t){var e,n,i;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=k(this)).offset().top-n-i<0}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var e,n,i;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=k(this)).offset().top-n+i}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||k(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)},_filterMenuItems:function(t){var e=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(k.trim(k(this).children(".ui-menu-item-wrapper").text()))})}});k.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var n,i,r,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,s="input"===t;this.isMultiLine=e||!s&&this._isContentEditable(this.element),this.valueMethod=this.element[e||s?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))i=r=n=!0;else{i=r=n=!1;var e=k.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:n=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:n=!0,this._move("nextPage",t);break;case e.UP:n=!0,this._keyEvent("previous",t);break;case e.DOWN:n=!0,this._keyEvent("next",t);break;case e.ENTER:this.menu.active&&(n=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(t),t.preventDefault());break;default:i=!0,this._searchTimeout(t)}}},keypress:function(t){if(n)return n=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||t.preventDefault());if(!i){var e=k.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){if(r)return r=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=k("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==k.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,e){var n,i;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){k(t.target).trigger(t.originalEvent)});i=e.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),(n=e.item.attr("aria-label")||i.value)&&k.trim(n).length&&(this.liveRegion.children().hide(),k("<div>").text(n).appendTo(this.liveRegion))},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==k.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=k("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var e=this.menu.element[0];return t.target===this.element[0]||t.target===e||k.contains(e,t.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?k(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var n,i,r=this;k.isArray(this.options.source)?(n=this.options.source,this.source=function(t,e){e(k.ui.autocomplete.filter(n,t.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,e){r.xhr&&r.xhr.abort(),r.xhr=k.ajax({url:i,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(i){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),e=this.menu.element.is(":visible"),n=i.altKey||i.ctrlKey||i.metaKey||i.shiftKey;t&&(!t||e||n)||(this.selectedItem=null,this.search(null,i))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return k.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:k.map(t,function(t){return"string"==typeof t?{label:t,value:t}:k.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(k.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(n,t){var i=this;k.each(t,function(t,e){i._renderItemData(n,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return k("<li>").append(k("<div>").text(e.label)).appendTo(t)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),k.extend(k.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var n=new RegExp(k.ui.autocomplete.escapeRegex(e),"i");return k.grep(t,function(t){return n.test(t.label||t.value||t)})}}),k.widget("ui.autocomplete",k.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),k("<div>").text(e).appendTo(this.liveRegion))}});k.ui.autocomplete;var m=/ui-corner-([a-z]){2,6}/g;k.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var o=this,a=[];k.each(this.options.items,function(r,t){var e,s={};if(t)return"controlgroupLabel"===r?((e=o.element.find(t)).each(function(){var t=k(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),o._addClass(e,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(e.get()))):void(k.fn[r]&&(s=o["_"+r+"Options"]?o["_"+r+"Options"]("middle"):{classes:{}},o.element.find(t).each(function(){var t=k(this),e=t[r]("instance"),n=k.widget.extend({},s);if("button"!==r||!t.parent(".ui-spinner").length){e||(e=t[r]()[r]("instance")),e&&(n.classes=o._resolveClassesValues(n.classes,e)),t[r](n);var i=t[r]("widget");k.data(i[0],"ui-controlgroup-data",e||t[r]("instance")),a.push(i[0])}})))}),this.childWidgets=k(k.uniqueSort(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var t=k(this).data("ui-controlgroup-data");t&&t[e]&&t[e]()})},_updateCornerClass:function(t,e){var n=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,n)},_buildSimpleOptions:function(t,e){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[e]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[t],i},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(n,i){var r={};return k.each(n,function(t){var e=i.options.classes[t]||"";e=k.trim(e.replace(m,"")),r[t]=(e+" "+n[t]).replace(/\s+/g," ")}),r},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"!==t?this.refresh():this._callChildMethod(e?"disable":"enable")},refresh:function(){var r,s=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),r=this.childWidgets,this.options.onlyVisible&&(r=r.filter(":visible")),r.length&&(k.each(["first","last"],function(t,e){var n=r[e]().data("ui-controlgroup-data");if(n&&s["_"+n.widgetName+"Options"]){var i=s["_"+n.widgetName+"Options"](1===r.length?"only":e);i.classes=s._resolveClassesValues(i.classes,n),n.element[n.widgetName](i)}else s._updateCornerClass(r[e](),e)}),this._callChildMethod("refresh"))}});k.widget("ui.checkboxradio",[k.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,e,n=this,i=this._super()||{};return this._readType(),e=this.element.labels(),this.label=k(e[e.length-1]),this.label.length||k.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){n.originalLabel+=3===this.nodeType?k(this).text():this.outerHTML}),this.originalLabel&&(i.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(i.disabled=t),i},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||k.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,e="input[name='"+k.ui.escapeSelector(t)+"']";return t?(this.form.length?k(this.form[0].elements).filter(e):k(e).filter(function(){return 0===k(this).form().length})).not(this.element):k([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=k(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(t){var e="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=k("<span>"),this.iconSpace=k("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(e+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):e+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",e),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]);var v;k.ui.checkboxradio;k.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===k.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,e){var n="iconPosition"!==t,i=n?this.options.iconPosition:e,r="top"===i||"bottom"===i;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=k("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,e),this._attachIcon(i),r?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=k("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(i))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,n=void 0===t.icon?this.options.icon:t.icon;e||n||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),(this.element[0].disabled=e)&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==k.uiBackCompat&&(k.widget("ui.button",k.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),k.fn.button=(v=k.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?v.apply(this,arguments):(k.ui.checkboxradio||k.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),k.fn.buttonset=function(){return k.ui.controlgroup||k.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"===_typeof(arguments[0])&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});var y;k.ui.button;function _(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},k.extend(this._defaults,this.regional[""]),this.regional.en=k.extend(!0,{},this.regional[""]),this.regional["en-US"]=k.extend(!0,{},this.regional.en),this.dpDiv=b(k("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function b(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",e,function(){k(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&k(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",e,w)}function w(){k.datepicker._isDisabledDatepicker(y.inline?y.dpDiv.parent()[0]:y.input[0])||(k(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),k(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&k(this).addClass("ui-datepicker-next-hover"))}function E(t,e){for(var n in k.extend(t,e),e)null==e[n]&&(t[n]=e[n]);return t}k.extend(k.ui,{datepicker:{version:"1.12.1"}}),k.extend(_.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return E(this._defaults,t||{}),this},_attachDatepicker:function(t,e){var n,i,r;i="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(r=this._newInst(k(t),i)).settings=k.extend({},e||{}),"input"===n?this._connectDatepicker(t,r):i&&this._inlineDatepicker(t,r)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?b(k("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,e){var n=k(t);e.append=k([]),e.trigger=k([]),n.hasClass(this.markerClassName)||(this._attachments(n,e),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(e),k.data(t,"datepicker",e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var n,i,r,s=this._get(e,"appendText"),o=this._get(e,"isRTL");e.append&&e.append.remove(),s&&(e.append=k("<span class='"+this._appendClass+"'>"+s+"</span>"),t[o?"before":"after"](e.append)),t.off("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),"focus"!==(n=this._get(e,"showOn"))&&"both"!==n||t.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(i=this._get(e,"buttonText"),r=this._get(e,"buttonImage"),e.trigger=k(this._get(e,"buttonImageOnly")?k("<img/>").addClass(this._triggerClass).attr({src:r,alt:i,title:i}):k("<button type='button'></button>").addClass(this._triggerClass).html(r?k("<img/>").attr({src:r,alt:i,title:i}):i)),t[o?"before":"after"](e.trigger),e.trigger.on("click",function(){return k.datepicker._datepickerShowing&&k.datepicker._lastInput===t[0]?k.datepicker._hideDatepicker():(k.datepicker._datepickerShowing&&k.datepicker._lastInput!==t[0]&&k.datepicker._hideDatepicker(),k.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,r,s=new Date(2009,11,20),o=this._get(t,"dateFormat");o.match(/[DM]/)&&(e=function(t){for(r=i=n=0;r<t.length;r++)t[r].length>n&&(n=t[r].length,i=r);return i},s.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),t.input.attr("size",this._formatDate(t,s).length)}},_inlineDatepicker:function(t,e){var n=k(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(e.dpDiv),k.data(t,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,n,i,r){var s,o,a,l,u,c=this._dialogInst;return c||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=k("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),k("body").append(this._dialogInput),(c=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},k.data(this._dialogInput[0],"datepicker",c)),E(c.settings,i||{}),e=e&&e.constructor===Date?this._formatDate(c,e):e,this._dialogInput.val(e),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(o=document.documentElement.clientWidth,a=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[o/2-100+l,a/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),k.blockUI&&k.blockUI(this.dpDiv),k.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var e,n=k(t),i=k.data(t,"datepicker");n.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),k.removeData(t,"datepicker"),"input"===e?(i.append.remove(),i.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==e&&"span"!==e||n.removeClass(this.markerClassName).empty(),y===i&&(y=null))},_enableDatepicker:function(e){var t,n,i=k(e),r=k.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=k.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var t,n,i=k(e),r=k.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=k.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(t){try{return k.data(t,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,n){var i,r,s,o,a=this._getInst(t);if(2===arguments.length&&"string"==typeof e)return"defaults"===e?k.extend({},k.datepicker._defaults):a?"all"===e?k.extend({},a.settings):this._get(a,e):null;i=e||{},"string"==typeof e&&((i={})[e]=n),a&&(this._curInst===a&&this._hideDatepicker(),r=this._getDateDatepicker(t,!0),s=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max"),E(a.settings,i),null!==s&&void 0!==i.dateFormat&&void 0===i.minDate&&(a.settings.minDate=this._formatDate(a,s)),null!==o&&void 0!==i.dateFormat&&void 0===i.maxDate&&(a.settings.maxDate=this._formatDate(a,o)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(k(t),a),this._autoSize(a),this._setDate(a,r),this._updateAlternate(a),this._updateDatepicker(a))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(t){var e,n,i,r=k.datepicker._getInst(t.target),s=!0,o=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,k.datepicker._datepickerShowing)switch(t.keyCode){case 9:k.datepicker._hideDatepicker(),s=!1;break;case 13:return(i=k("td."+k.datepicker._dayOverClass+":not(."+k.datepicker._currentClass+")",r.dpDiv))[0]&&k.datepicker._selectDay(t.target,r.selectedMonth,r.selectedYear,i[0]),(e=k.datepicker._get(r,"onSelect"))?(n=k.datepicker._formatDate(r),e.apply(r.input?r.input[0]:null,[n,r])):k.datepicker._hideDatepicker(),!1;case 27:k.datepicker._hideDatepicker();break;case 33:k.datepicker._adjustDate(t.target,t.ctrlKey?-k.datepicker._get(r,"stepBigMonths"):-k.datepicker._get(r,"stepMonths"),"M");break;case 34:k.datepicker._adjustDate(t.target,t.ctrlKey?+k.datepicker._get(r,"stepBigMonths"):+k.datepicker._get(r,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&k.datepicker._clearDate(t.target),s=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&k.datepicker._gotoToday(t.target),s=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,o?1:-1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&k.datepicker._adjustDate(t.target,t.ctrlKey?-k.datepicker._get(r,"stepBigMonths"):-k.datepicker._get(r,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,-7,"D"),s=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,o?-1:1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&k.datepicker._adjustDate(t.target,t.ctrlKey?+k.datepicker._get(r,"stepBigMonths"):+k.datepicker._get(r,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,7,"D"),s=t.ctrlKey||t.metaKey;break;default:s=!1}else 36===t.keyCode&&t.ctrlKey?k.datepicker._showDatepicker(this):s=!1;s&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,n,i=k.datepicker._getInst(t.target);if(k.datepicker._get(i,"constrainInput"))return e=k.datepicker._possibleChars(k.datepicker._get(i,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!e||-1<e.indexOf(n)},_doKeyUp:function(t){var e=k.datepicker._getInst(t.target);if(e.input.val()!==e.lastVal)try{k.datepicker.parseDate(k.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,k.datepicker._getFormatConfig(e))&&(k.datepicker._setDateFromField(e),k.datepicker._updateAlternate(e),k.datepicker._updateDatepicker(e))}catch(t){}return!0},_showDatepicker:function(t){var e,n,i,r,s,o,a;"input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=k("input",t.parentNode)[0]),k.datepicker._isDisabledDatepicker(t)||k.datepicker._lastInput===t||(e=k.datepicker._getInst(t),k.datepicker._curInst&&k.datepicker._curInst!==e&&(k.datepicker._curInst.dpDiv.stop(!0,!0),e&&k.datepicker._datepickerShowing&&k.datepicker._hideDatepicker(k.datepicker._curInst.input[0])),!1!==(i=(n=k.datepicker._get(e,"beforeShow"))?n.apply(t,[t,e]):{})&&(E(e.settings,i),e.lastVal=null,k.datepicker._lastInput=t,k.datepicker._setDateFromField(e),k.datepicker._inDialog&&(t.value=""),k.datepicker._pos||(k.datepicker._pos=k.datepicker._findPos(t),k.datepicker._pos[1]+=t.offsetHeight),r=!1,k(t).parents().each(function(){return!(r|="fixed"===k(this).css("position"))}),s={left:k.datepicker._pos[0],top:k.datepicker._pos[1]},k.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),k.datepicker._updateDatepicker(e),s=k.datepicker._checkOffset(e,s,r),e.dpDiv.css({position:k.datepicker._inDialog&&k.blockUI?"static":r?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),e.inline||(o=k.datepicker._get(e,"showAnim"),a=k.datepicker._get(e,"duration"),e.dpDiv.css("z-index",function(t){for(var e,n;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(t.css("zIndex"),10),!isNaN(n)&&0!==n))return n;t=t.parent()}return 0}(k(t))+1),k.datepicker._datepickerShowing=!0,k.effects&&k.effects.effect[o]?e.dpDiv.show(o,k.datepicker._get(e,"showOptions"),a):e.dpDiv[o||"show"](o?a:null),k.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),k.datepicker._curInst=e)))},_updateDatepicker:function(t){this.maxRows=4,(y=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var e,n=this._getNumberOfMonths(t),i=n[1],r=t.dpDiv.find("."+this._dayOverClass+" a");0<r.length&&w.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<i&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",17*i+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===k.datepicker._curInst&&k.datepicker._datepickerShowing&&k.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(t,e,n){var i=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(n?0:k(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:k(document).scrollTop());return e.left-=this._get(t,"isRTL")?i-s:0,e.left-=n&&e.left===t.input.offset().left?k(document).scrollLeft():0,e.top-=n&&e.top===t.input.offset().top+o?k(document).scrollTop():0,e.left-=Math.min(e.left,e.left+i>a&&i<a?Math.abs(e.left+i-a):0),e.top-=Math.min(e.top,e.top+r>l&&r<l?Math.abs(r+o):0),e},_findPos:function(t){for(var e,n=this._getInst(t),i=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||k.expr.pseudos.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return[(e=k(t).offset()).left,e.top]},_hideDatepicker:function(t){var e,n,i,r,s=this._curInst;!s||t&&s!==k.data(t,"datepicker")||this._datepickerShowing&&(e=this._get(s,"showAnim"),n=this._get(s,"duration"),i=function(){k.datepicker._tidyDialog(s)},k.effects&&(k.effects.effect[e]||k.effects[e])?s.dpDiv.hide(e,k.datepicker._get(s,"showOptions"),n,i):s.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?n:null,i),e||i(),this._datepickerShowing=!1,(r=this._get(s,"onClose"))&&r.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),k.blockUI&&(k.unblockUI(),k("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(k.datepicker._curInst){var e=k(t.target),n=k.datepicker._getInst(e[0]);(e[0].id===k.datepicker._mainDivId||0!==e.parents("#"+k.datepicker._mainDivId).length||e.hasClass(k.datepicker.markerClassName)||e.closest("."+k.datepicker._triggerClass).length||!k.datepicker._datepickerShowing||k.datepicker._inDialog&&k.blockUI)&&(!e.hasClass(k.datepicker.markerClassName)||k.datepicker._curInst===n)||k.datepicker._hideDatepicker()}},_adjustDate:function(t,e,n){var i=k(t),r=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(r,e+("M"===n?this._get(r,"showCurrentAtPos"):0),n),this._updateDatepicker(r))},_gotoToday:function(t){var e,n=k(t),i=this._getInst(n[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(e=new Date,i.selectedDay=e.getDate(),i.drawMonth=i.selectedMonth=e.getMonth(),i.drawYear=i.selectedYear=e.getFullYear()),this._notifyChange(i),this._adjustDate(n)},_selectMonthYear:function(t,e,n){var i=k(t),r=this._getInst(i[0]);r["selected"+("M"===n?"Month":"Year")]=r["draw"+("M"===n?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(i)},_selectDay:function(t,e,n,i){var r,s=k(t);k(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||((r=this._getInst(s[0])).selectedDay=r.currentDay=k("a",i).html(),r.selectedMonth=r.currentMonth=e,r.selectedYear=r.currentYear=n,this._selectDate(t,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(t){var e=k(t);this._selectDate(e,"")},_selectDate:function(t,e){var n,i=k(t),r=this._getInst(i[0]);e=null!=e?e:this._formatDate(r),r.input&&r.input.val(e),this._updateAlternate(r),(n=this._get(r,"onSelect"))?n.apply(r.input?r.input[0]:null,[e,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!==_typeof(r.input[0])&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var e,n,i,r=this._get(t,"altField");r&&(e=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),i=this.formatDate(e,n,this._getFormatConfig(t)),k(r).val(i))},noWeekends:function(t){var e=t.getDay();return[0<e&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(n,s,t){if(null==n||null==s)throw"Invalid arguments";if(""===(s="object"===(void 0===s?"undefined":_typeof(s))?s.toString():s+""))return null;function o(t){var e=a+1<n.length&&n.charAt(a+1)===t;return e&&a++,e}function e(t){var e=o(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,i=new RegExp("^\\d{"+("y"===t?n:1)+","+n+"}"),r=s.substring(h).match(i);if(!r)throw"Missing number at position "+h;return h+=r[0].length,parseInt(r[0],10)}function i(t,e,n){var i=-1,r=k.map(o(t)?n:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(k.each(r,function(t,e){var n=e[1];if(s.substr(h,n.length).toLowerCase()===n.toLowerCase())return i=e[0],h+=n.length,!1}),-1!==i)return i+1;throw"Unknown name at position "+h}function r(){if(s.charAt(h)!==n.charAt(a))throw"Unexpected literal at position "+h;h++}var a,l,u,c,h=0,f=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof f?f:(new Date).getFullYear()%100+parseInt(f,10),p=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,g=(t?t.dayNames:null)||this._defaults.dayNames,m=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,v=(t?t.monthNames:null)||this._defaults.monthNames,y=-1,_=-1,b=-1,w=-1,C=!1;for(a=0;a<n.length;a++)if(C)"'"!==n.charAt(a)||o("'")?r():C=!1;else switch(n.charAt(a)){case"d":b=e("d");break;case"D":i("D",p,g);break;case"o":w=e("o");break;case"m":_=e("m");break;case"M":_=i("M",m,v);break;case"y":y=e("y");break;case"@":y=(c=new Date(e("@"))).getFullYear(),_=c.getMonth()+1,b=c.getDate();break;case"!":y=(c=new Date((e("!")-this._ticksTo1970)/1e4)).getFullYear(),_=c.getMonth()+1,b=c.getDate();break;case"'":o("'")?r():C=!0;break;default:r()}if(h<s.length&&(u=s.substr(h),!/^\s+/.test(u)))throw"Extra/unparsed characters found in date: "+u;if(-1===y?y=(new Date).getFullYear():y<100&&(y+=(new Date).getFullYear()-(new Date).getFullYear()%100+(y<=d?0:-100)),-1<w)for(_=1,b=w;;){if(b<=(l=this._getDaysInMonth(y,_-1)))break;_++,b-=l}if((c=this._daylightSavingAdjust(new Date(y,_-1,b))).getFullYear()!==y||c.getMonth()+1!==_||c.getDate()!==b)throw"Invalid date";return c},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(n,t,e){if(!t)return"";function r(t){var e=o+1<n.length&&n.charAt(o+1)===t;return e&&o++,e}function i(t,e,n){var i=""+e;if(r(t))for(;i.length<n;)i="0"+i;return i}function s(t,e,n,i){return r(t)?i[e]:n[e]}var o,a=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,l=(e?e.dayNames:null)||this._defaults.dayNames,u=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,c=(e?e.monthNames:null)||this._defaults.monthNames,h="",f=!1;if(t)for(o=0;o<n.length;o++)if(f)"'"!==n.charAt(o)||r("'")?h+=n.charAt(o):f=!1;else switch(n.charAt(o)){case"d":h+=i("d",t.getDate(),2);break;case"D":h+=s("D",t.getDay(),a,l);break;case"o":h+=i("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=i("m",t.getMonth()+1,2);break;case"M":h+=s("M",t.getMonth(),u,c);break;case"y":h+=r("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":r("'")?h+="'":f=!0;break;default:h+=n.charAt(o)}return h},_possibleChars:function(n){function t(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e}var i,e="",r=!1;for(i=0;i<n.length;i++)if(r)"'"!==n.charAt(i)||t("'")?e+=n.charAt(i):r=!1;else switch(n.charAt(i)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":t("'")?e+="'":r=!0;break;default:e+=n.charAt(i)}return e},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),s=r,o=this._getFormatConfig(t);try{s=this.parseDate(n,i,o)||r}catch(t){i=e?"":i}t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),t.currentDay=i?s.getDate():0,t.currentMonth=i?s.getMonth():0,t.currentYear=i?s.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(a,t,e){var n,i,r=null==t||""===t?e:"string"==typeof t?function(t){try{return k.datepicker.parseDate(k.datepicker._get(a,"dateFormat"),t,k.datepicker._getFormatConfig(a))}catch(t){}for(var e=(t.toLowerCase().match(/^c/)?k.datepicker._getDate(a):null)||new Date,n=e.getFullYear(),i=e.getMonth(),r=e.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,o=s.exec(t);o;){switch(o[2]||"d"){case"d":case"D":r+=parseInt(o[1],10);break;case"w":case"W":r+=7*parseInt(o[1],10);break;case"m":case"M":i+=parseInt(o[1],10),r=Math.min(r,k.datepicker._getDaysInMonth(n,i));break;case"y":case"Y":n+=parseInt(o[1],10),r=Math.min(r,k.datepicker._getDaysInMonth(n,i))}o=s.exec(t)}return new Date(n,i,r)}(t):"number"==typeof t?isNaN(t)?e:(n=t,(i=new Date).setDate(i.getDate()+n),i):new Date(t.getTime());return(r=r&&"Invalid Date"===r.toString()?e:r)&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,r=t.selectedMonth,s=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),r===t.selectedMonth&&s===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){k.datepicker._adjustDate(n,-e,"M")},next:function(){k.datepicker._adjustDate(n,+e,"M")},hide:function(){k.datepicker._hideDatepicker()},today:function(){k.datepicker._gotoToday(n)},selectDay:function(){return k.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return k.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return k.datepicker._selectMonthYear(n,this,"Y"),!1}};k(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,r,s,o,a,l,u,c,h,f,d,p,g,m,v,y,_,b,w,C,k,x,T,S,E,O,P,N,M,D,A,I,R,L,q,j,z,F=new Date,H=this._daylightSavingAdjust(new Date(F.getFullYear(),F.getMonth(),F.getDate())),B=this._get(t,"isRTL"),U=this._get(t,"showButtonPanel"),$=this._get(t,"hideIfNoPrevNext"),W=this._get(t,"navigationAsDateFormat"),V=this._getNumberOfMonths(t),Y=this._get(t,"showCurrentAtPos"),K=this._get(t,"stepMonths"),G=1!==V[0]||1!==V[1],Q=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),X=this._getMinMaxDate(t,"max"),Z=t.drawMonth-Y,tt=t.drawYear;if(Z<0&&(Z+=12,tt--),X)for(e=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-V[0]*V[1]+1,X.getDate())),e=J&&e<J?J:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)--Z<0&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,n=this._get(t,"prevText"),n=W?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,Z-K,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>":$?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>",r=this._get(t,"nextText"),r=W?this.formatDate(r,this._daylightSavingAdjust(new Date(tt,Z+K,1)),this._getFormatConfig(t)):r,s=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+r+"</span></a>":$?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+r+"</span></a>",o=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?Q:H,o=W?this.formatDate(o,a,this._getFormatConfig(t)):o,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",u=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(B?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,h=this._get(t,"showWeek"),f=this._get(t,"dayNames"),d=this._get(t,"dayNamesMin"),p=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),_=this._getDefaultDate(t),b="",C=0;C<V[0];C++){for(k="",this.maxRows=4,x=0;x<V[1];x++){if(T=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),S=" ui-corner-all",E="",G){if(E+="<div class='ui-datepicker-group",1<V[1])switch(x){case 0:E+=" ui-datepicker-group-first",S=" ui-corner-"+(B?"right":"left");break;case V[1]-1:E+=" ui-datepicker-group-last",S=" ui-corner-"+(B?"left":"right");break;default:E+=" ui-datepicker-group-middle",S=""}E+="'>"}for(E+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===C?B?s:i:"")+(/all|right/.test(S)&&0===C?B?i:s:"")+this._generateMonthYearHeader(t,Z,tt,J,X,0<C||0<x,p,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",O=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;w<7;w++)O+="<th scope='col'"+(5<=(w+c+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+f[P=(w+c)%7]+"'>"+d[P]+"</span></th>";for(E+=O+"</tr></thead><tbody>",N=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,N)),M=(this._getFirstDayOfMonth(tt,Z)-c+7)%7,D=Math.ceil((M+N)/7),A=G&&this.maxRows>D?this.maxRows:D,this.maxRows=A,I=this._daylightSavingAdjust(new Date(tt,Z,1-M)),R=0;R<A;R++){for(E+="<tr>",L=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(I)+"</td>":"",w=0;w<7;w++)q=m?m.apply(t.input?t.input[0]:null,[I]):[!0,""],z=(j=I.getMonth()!==Z)&&!y||!q[0]||J&&I<J||X&&X<I,L+="<td class='"+(5<=(w+c+6)%7?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(I.getTime()===T.getTime()&&Z===t.selectedMonth&&t._keyEvent||_.getTime()===I.getTime()&&_.getTime()===T.getTime()?" "+this._dayOverClass:"")+(z?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+q[1]+(I.getTime()===Q.getTime()?" "+this._currentClass:"")+(I.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!q[2]?"":" title='"+q[2].replace(/'/g,"&#39;")+"'")+(z?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":z?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===H.getTime()?" ui-state-highlight":"")+(I.getTime()===Q.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);E+=L+"</tr>"}11<++Z&&(Z=0,tt++),k+=E+="</tbody></table>"+(G?"</div>"+(0<V[0]&&x===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}b+=k}return b+=u,t._keyEvent=!1,b},_generateMonthYearHeader:function(t,e,n,i,r,s,o,a){var l,u,c,h,f,d,p,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",b="";if(s||!m)b+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(l=i&&i.getFullYear()===n,u=r&&r.getFullYear()===n,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=i.getMonth())&&(!u||c<=r.getMonth())&&(b+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+a[c]+"</option>");b+="</select>"}if(y||(_+=b+(!s&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",s||!v)_+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(h=this._get(t,"yearRange").split(":"),f=(new Date).getFullYear(),p=(d=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?f+parseInt(t,10):parseInt(t,10);return isNaN(e)?f:e})(h[0]),g=Math.max(p,d(h[1]||"")),p=i?Math.max(p,i.getFullYear()):p,g=r?Math.min(g,r.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=g;p++)t.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",_+=t.yearshtml,t.yearshtml=null}return _+=this._get(t,"yearSuffix"),y&&(_+=(!s&&m&&v?"":"&#xa0;")+b),_+="</div>"},_adjustInstDate:function(t,e,n){var i=t.selectedYear+("Y"===n?e:0),r=t.selectedMonth+("M"===n?e:0),s=Math.min(t.selectedDay,this._getDaysInMonth(i,r))+("D"===n?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,r,s)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),r=n&&e<n?n:e;return i&&i<r?i:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var r=this._getNumberOfMonths(t),s=this._daylightSavingAdjust(new Date(n,i+(e<0?e:r[0]*r[1]),1));return e<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(t,s)},_isInRange:function(t,e){var n,i,r=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),o=null,a=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),o=parseInt(n[0],10),a=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=i),n[1].match(/[+\-].*/)&&(a+=i)),(!r||e.getTime()>=r.getTime())&&(!s||e.getTime()<=s.getTime())&&(!o||e.getFullYear()>=o)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"===(void 0===e?"undefined":_typeof(e))?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),k.fn.datepicker=function(t){if(!this.length)return this;k.datepicker.initialized||(k(document).on("mousedown",k.datepicker._checkExternalClick),k.datepicker.initialized=!0),0===k("#"+k.datepicker._mainDivId).length&&k("body").append(k.datepicker.dpDiv);var e=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?k.datepicker["_"+t+"Datepicker"].apply(k.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?k.datepicker["_"+t+"Datepicker"].apply(k.datepicker,[this].concat(e)):k.datepicker._attachDatepicker(this,t)}):k.datepicker["_"+t+"Datepicker"].apply(k.datepicker,[this[0]].concat(e))},k.datepicker=new _,k.datepicker.initialized=!1,k.datepicker.uuid=(new Date).getTime(),k.datepicker.version="1.12.1";k.datepicker;k.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=k(this).css(t).offset().top;e<0&&k(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&k.fn.draggable&&this._makeDraggable(),this.options.resizable&&k.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?k(t):this.document.find(t||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:k.noop,enable:k.noop,close:function(t){var e=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||k.ui.safeBlur(k.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var n=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+k(this).css("z-index")}).get(),r=Math.max.apply(null,i);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),n=!0),n&&!e&&this._trigger("focus",t),n},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=k(k.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(t){function e(){var t=k.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||k.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),e.call(this),this._delay(e)},_createWrapper:function(){this.uiDialog=k("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===k.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===k.ui.keyCode.TAB&&!t.isDefaultPrevented()){var e=this.uiDialog.find(":tabbable"),n=e.filter(":first"),i=e.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){i.trigger("focus")}),t.preventDefault()):(this._delay(function(){n.trigger("focus")}),t.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=k("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){k(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=k("<button type='button'></button>").button({label:k("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),t=k("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=k("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=k("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var r=this,t=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),k.isEmptyObject(t)||k.isArray(t)&&!t.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(k.each(t,function(t,e){var n,i;e=k.isFunction(e)?{click:e,text:t}:e,e=k.extend({type:"button"},e),n=e.click,i={icon:e.icon,iconPosition:e.iconPosition,showLabel:e.showLabel,icons:e.icons,text:e.text},delete e.click,delete e.icon,delete e.iconPosition,delete e.showLabel,delete e.icons,"boolean"==typeof e.text&&delete e.text,k("<button></button>",e).button(i).appendTo(r.uiButtonSet).on("click",function(){n.apply(r.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var r=this,s=this.options;function o(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){r._addClass(k(this),"ui-dialog-dragging"),r._blockFrames(),r._trigger("dragStart",t,o(e))},drag:function(t,e){r._trigger("drag",t,o(e))},stop:function(t,e){var n=e.offset.left-r.document.scrollLeft(),i=e.offset.top-r.document.scrollTop();s.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=i?"+":"")+i,of:r.window},r._removeClass(k(this),"ui-dialog-dragging"),r._unblockFrames(),r._trigger("dragStop",t,o(e))}})},_makeResizable:function(){var s=this,o=this.options,t=o.resizable,e=this.uiDialog.css("position"),n="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";function a(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:this._minHeight(),handles:n,start:function(t,e){s._addClass(k(this),"ui-dialog-resizing"),s._blockFrames(),s._trigger("resizeStart",t,a(e))},resize:function(t,e){s._trigger("resize",t,a(e))},stop:function(t,e){var n=s.uiDialog.offset(),i=n.left-s.document.scrollLeft(),r=n.top-s.document.scrollTop();o.height=s.uiDialog.height(),o.width=s.uiDialog.width(),o.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=r?"+":"")+r,of:s.window},s._removeClass(k(this),"ui-dialog-resizing"),s._unblockFrames(),s._trigger("resizeStop",t,a(e))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=k(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=k.inArray(this,t);-1!==e&&t.splice(e,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,r={};k.each(t,function(t,e){n._setOption(t,e),t in n.sizeRelatedOptions&&(i=!0),t in n.resizableRelatedOptions&&(r[t]=e)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,e){var n,i,r=this.uiDialog;"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:k("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((n=r.is(":data(ui-draggable)"))&&!e&&r.draggable("destroy"),!n&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((i=r.is(":data(ui-resizable)"))&&!e&&r.resizable("destroy"),i&&"string"==typeof e&&r.resizable("option","handles",e),i||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=k(this);return k("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!k(t.target).closest(".ui-dialog").length||!!k(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=k("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==k.uiBackCompat&&k.widget("ui.dialog",k.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}});k.ui.dialog,k.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=k("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(e.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=k("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),k.widget("ui.selectmenu",[k.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=k()},_drawButton:function(){var t,e=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=k("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=k("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(n).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){e._rendered||e._refreshMenu()})},_drawMenu:function(){var i=this;this.menu=k("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=k("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,e){t.preventDefault(),i._setSelection(),i._select(e.item.data("ui-selectmenu-item"),t)},focus:function(t,e){var n=e.item.data("ui-selectmenu-item");null!=i.focusIndex&&n.index!==i.focusIndex&&(i._trigger("focus",t,{item:n}),i.isOpen||i._select(n,t)),i.focusIndex=n.index,i.button.attr("aria-activedescendant",i.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(k.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var e=k("<span>");return this._setText(e,t.label),this._addClass(e,"ui-selectmenu-text"),e},_renderMenu:function(i,t){var r=this,s="";k.each(t,function(t,e){var n;e.optgroup!==s&&(n=k("<li>",{text:e.optgroup}),r._addClass(n,"ui-selectmenu-optgroup","ui-menu-divider"+(e.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),n.appendTo(i),s=e.optgroup),r._renderItemData(i,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(t,e){var n=k("<li>"),i=k("<div>",{title:e.element.attr("title")});return e.disabled&&this._addClass(n,null,"ui-state-disabled"),this._setText(i,e.label),n.append(i).appendTo(t)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var n,i,r=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex).parent("li"):(n=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),r+=":not(.ui-state-disabled)"),(i="first"===t||"last"===t?n["first"===t?"prevAll":"nextAll"](r).eq(-1):n[t+"All"](r).eq(0)).length&&this.menuInstance.focus(e,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(k(t.target).closest(".ui-selectmenu-menu, #"+k.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection()).rangeCount&&(this.range=t.getRangeAt(0)):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(t){var e=!0;switch(t.keyCode){case k.ui.keyCode.TAB:case k.ui.keyCode.ESCAPE:this.close(t),e=!1;break;case k.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case k.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case k.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case k.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case k.ui.keyCode.LEFT:this._move("prev",t);break;case k.ui.keyCode.RIGHT:this._move("next",t);break;case k.ui.keyCode.HOME:case k.ui.keyCode.PAGE_UP:this._move("first",t);break;case k.ui.keyCode.END:case k.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),e=!1}e&&t.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==n&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var n=this.button.find("span.ui-icon");this._removeClass(n,null,this.options.icons.button)._addClass(n,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?k(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;!1!==t?(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(t){var n=this,i=[];t.each(function(t,e){i.push(n._parseOption(k(e),t))}),this.items=i},_parseOption:function(t,e){var n=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),k.widget("ui.slider",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e,n=this.options,i=this.element.find(".ui-slider-handle"),r=[];for(e=n.values&&n.values.length||1,i.length>e&&(i.slice(e).remove(),i=i.slice(0,e)),t=i.length;t<e;t++)r.push("<span tabindex='0'></span>");this.handles=i.add(k(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){k(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:k.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=k("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var e,n,i,r,s,o,a,l=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(n-l.values(t));(e<i||i===e&&(t===l._lastChangedValue||l.values(t)===u.min))&&(i=e,r=k(this),s=t)}),!1!==this._start(t,s)&&(this._mouseSliding=!0,this._handleIndex=s,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),o=r.offset(),a=!k(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:t.pageX-o.left-r.width()/2,top:t.pageY-o.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,n),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,r;return 1<(n=("horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),i=this._valueMax()-this._valueMin(),r=this._valueMin()+n*i,this._trimAlignValue(r)},_uiHash:function(t,e,n){var i={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(i.value=void 0!==e?e:this.values(t),i.values=n||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,n){var i,r=this.value(),s=this.values();this._hasMultipleValues()&&(i=this.values(e?0:1),r=this.values(e),2===this.options.values.length&&!0===this.options.range&&(n=0===e?Math.min(i,n):Math.max(i,n)),s[e]=n),n!==r&&!1!==this._trigger("slide",t,this._uiHash(e,n,s))&&(this._hasMultipleValues()?this.values(e,n):this.value(n))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var n,i,r;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!k.isArray(t))return this._hasMultipleValues()?this._values(t):this.value();for(n=this.options.values,i=t,r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(i[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,e){var n,i=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),k.isArray(this.options.values)&&(i=this.options.values.length),this._super(t,e),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(e),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=i-1;0<=n;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=0<n?e:-e),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step;(t=Math.round((t-e)/n)*n+e)>this.options.max&&(t-=n),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,n,t,i,r,s=this.options.range,o=this.options,a=this,l=!this._animateOff&&o.animate,u={};this._hasMultipleValues()?this.handles.each(function(t){n=(a.values(t)-a._valueMin())/(a._valueMax()-a._valueMin())*100,u["horizontal"===a.orientation?"left":"bottom"]=n+"%",k(this).stop(1,1)[l?"animate":"css"](u,o.animate),!0===a.options.range&&("horizontal"===a.orientation?(0===t&&a.range.stop(1,1)[l?"animate":"css"]({left:n+"%"},o.animate),1===t&&a.range[l?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:o.animate})):(0===t&&a.range.stop(1,1)[l?"animate":"css"]({bottom:n+"%"},o.animate),1===t&&a.range[l?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:o.animate}))),e=n}):(t=this.value(),i=this._valueMin(),r=this._valueMax(),n=r!==i?(t-i)/(r-i)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[l?"animate":"css"](u,o.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:n+"%"},o.animate),"max"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-n+"%"},o.animate),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:n+"%"},o.animate),"max"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-n+"%"},o.animate))},_handleEvents:{keydown:function(t){var e,n,i,r=k(t.target).data("ui-slider-handle-index");switch(t.keyCode){case k.ui.keyCode.HOME:case k.ui.keyCode.END:case k.ui.keyCode.PAGE_UP:case k.ui.keyCode.PAGE_DOWN:case k.ui.keyCode.UP:case k.ui.keyCode.RIGHT:case k.ui.keyCode.DOWN:case k.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(k(t.target),null,"ui-state-active"),!1===this._start(t,r)))return}switch(i=this.options.step,e=n=this._hasMultipleValues()?this.values(r):this.value(),t.keyCode){case k.ui.keyCode.HOME:n=this._valueMin();break;case k.ui.keyCode.END:n=this._valueMax();break;case k.ui.keyCode.PAGE_UP:n=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case k.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);break;case k.ui.keyCode.UP:case k.ui.keyCode.RIGHT:if(e===this._valueMax())return;n=this._trimAlignValue(e+i);break;case k.ui.keyCode.DOWN:case k.ui.keyCode.LEFT:if(e===this._valueMin())return;n=this._trimAlignValue(e-i)}this._slide(t,r,n)},keyup:function(t){var e=k(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),this._removeClass(k(t.target),null,"ui-state-active"))}}});function O(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}k.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var i=this._super(),r=this.element;return k.each(["min","max","step"],function(t,e){var n=r.attr(e);null!=n&&n.length&&(i[e]=n)}),i},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((0<e?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(t){var e;function n(){this.element[0]===k.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=e,this._delay(function(){this.previous=e}))}e=this.element[0]===k.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),!1!==this._start(t)&&this._repeat(null,k(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(k(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,k(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var e=this.options,n=k.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,e.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-e.page,t),!0}return!1},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(t,e,n){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,n)},t),this._spin(e*this.options.step,n)},_spin:function(t,e){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:n})||(this._value(n),this.counter++)},_increment:function(t){var e=this.options.incremental;return e?k.isFunction(e)?e(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_adjustValue:function(t){var e,n,i=this.options;return n=t-(e=null!==i.min?i.min:0),t=e+(n=Math.round(n/i.step)*i.step),t=parseFloat(t.toFixed(this._precision())),null!==i.max&&t>i.max?i.max:null!==i.min&&t<i.min?i.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var n,i,r;if("culture"===t||"numberFormat"===t)return n=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(n));"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,e.up),r=this.buttons.last().find(".ui-icon"),this._removeClass(r,null,this.options.icons.down),this._addClass(r,null,e.down)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:O(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var n;""!==t&&null!==(n=this._parse(t))&&(e||(n=this._adjustValue(n)),t=this._format(n)),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:O(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:O(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:O(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:O(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());O(this._value).call(this,t)},widget:function(){return this.uiSpinner}}),!1!==k.uiBackCompat&&k.widget("ui.spinner",k.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});var P;k.ui.spinner;k.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(P=/#.*$/,function(t){var e,n;e=t.href.replace(P,""),n=location.href.replace(P,"");try{e=decodeURIComponent(e)}catch(t){}try{n=decodeURIComponent(n)}catch(t){}return 1<t.hash.length&&e===n}),_create:function(){var e=this,t=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,t.collapsible),this._processTabs(),t.active=this._initialActive(),k.isArray(t.disabled)&&(t.disabled=k.unique(t.disabled.concat(k.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(t.active):this.active=k(),this._refresh(),this.active.length&&this.load(t.active)},_initialActive:function(){var n=this.options.active,t=this.options.collapsible,i=location.hash.substring(1);return null===n&&(i&&this.tabs.each(function(t,e){if(k(e).attr("aria-controls")===i)return n=t,!1}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==n&&-1!==n||(n=!!this.tabs.length&&0)),!1!==n&&-1===(n=this.tabs.index(this.tabs.eq(n)))&&(n=!t&&0),!t&&!1===n&&this.anchors.length&&(n=0),n},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):k()}},_tabKeydown:function(t){var e=k(k.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(e),i=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case k.ui.keyCode.RIGHT:case k.ui.keyCode.DOWN:n++;break;case k.ui.keyCode.UP:case k.ui.keyCode.LEFT:i=!1,n--;break;case k.ui.keyCode.END:n=this.anchors.length-1;break;case k.ui.keyCode.HOME:n=0;break;case k.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case k.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,i),t.ctrlKey||t.metaKey||(e.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===k.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===k.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===k.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,e){var n=this.tabs.length-1;for(;-1!==k.inArray((n<t&&(t=0),t<0&&(t=n),t),this.options.disabled);)t=e?t+1:t-1;return t},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){"active"!==t?(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._activate(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,e=this.tablist.children(":has(a[href])");t.disabled=k.map(e.filter(".ui-state-disabled"),function(t){return e.index(t)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!k.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=k()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=k()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var l=this,t=this.tabs,e=this.anchors,n=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){k(this).is(".ui-state-disabled")&&t.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){k(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return k("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=k(),this.anchors.each(function(t,e){var n,i,r,s=k(e).uniqueId().attr("id"),o=k(e).closest("li"),a=o.attr("aria-controls");l._isLocal(e)?(r=(n=e.hash).substring(1),i=l.element.find(l._sanitizeSelector(n))):(n="#"+(r=o.attr("aria-controls")||k({}).uniqueId()[0].id),(i=l.element.find(n)).length||(i=l._createPanel(r)).insertAfter(l.panels[t-1]||l.tablist),i.attr("aria-live","polite")),i.length&&(l.panels=l.panels.add(i)),a&&o.data("ui-tabs-aria-controls",a),o.attr({"aria-controls":r,"aria-labelledby":s}),i.attr("aria-labelledby",s)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),t&&(this._off(t.not(this.tabs)),this._off(e.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return k("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var e,n,i;for(k.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),i=0;n=this.tabs[i];i++)e=k(n),!0===t||-1!==k.inArray(i,t)?(e.attr("aria-disabled","true"),this._addClass(e,null,"ui-state-disabled")):(e.removeAttr("aria-disabled"),this._removeClass(e,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var n={};t&&k.each(t.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,e=this.element.parent();"fill"===t?(n=e.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=k(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=k(this).outerHeight(!0)}),this.panels.each(function(){k(this).height(Math.max(0,n-k(this).innerHeight()+k(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,k(this).height("").height())}).height(n))},_eventHandler:function(t){var e=this.options,n=this.active,i=k(t.currentTarget).closest("li"),r=i[0]===n[0],s=r&&e.collapsible,o=s?k():this._getPanelForTab(i),a=n.length?this._getPanelForTab(n):k(),l={oldTab:n,oldPanel:a,newTab:s?k():i,newPanel:o};t.preventDefault(),i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||r&&!e.collapsible||!1===this._trigger("beforeActivate",t,l)||(e.active=!s&&this.tabs.index(i),this.active=r?k():i,this.xhr&&this.xhr.abort(),a.length||o.length||k.error("jQuery UI Tabs: Mismatching fragment identifier."),o.length&&this.load(this.tabs.index(i),t),this._toggle(t,l))},_toggle:function(t,e){var n=this,i=e.newPanel,r=e.oldPanel;function s(){n.running=!1,n._trigger("activate",t,e)}function o(){n._addClass(e.newTab.closest("li"),"ui-tabs-active","ui-state-active"),i.length&&n.options.show?n._show(i,n.options.show,s):(i.show(),s())}this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){n._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),o()}):(this._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r.hide(),o()),r.attr("aria-hidden","true"),e.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&r.length?e.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return 0===k(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false"),e.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var e,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),e=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:k.noop}))},_findActive:function(t){return!1===t?k():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+k.ui.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){k.data(this,"ui-tabs-destroy")?k(this).remove():k(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var t=k(this),e=t.data("ui-tabs-aria-controls");e?t.attr("aria-controls",e).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var t=this.options.disabled;!1!==t&&(t=void 0!==n&&(n=this._getIndex(n),k.isArray(t)?k.map(t,function(t){return t!==n?t:null}):k.map(this.tabs,function(t,e){return e!==n?e:null})),this._setOptionDisabled(t))},disable:function(t){var e=this.options.disabled;if(!0!==e){if(void 0===t)e=!0;else{if(t=this._getIndex(t),-1!==k.inArray(t,e))return;e=k.isArray(e)?k.merge([t],e).sort():[t]}this._setOptionDisabled(e)}},load:function(t,i){t=this._getIndex(t);function r(t,e){"abort"===e&&s.panels.stop(!1,!0),s._removeClass(n,"ui-tabs-loading"),o.removeAttr("aria-busy"),t===s.xhr&&delete s.xhr}var s=this,n=this.tabs.eq(t),e=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),a={tab:n,panel:o};this._isLocal(e[0])||(this.xhr=k.ajax(this._ajaxSettings(e,i,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(n,"ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(t,e,n){setTimeout(function(){o.html(t),s._trigger("load",i,a),r(n,e)},1)}).fail(function(t,e){setTimeout(function(){r(t,e)},1)})))},_ajaxSettings:function(t,n,i){var r=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,e){return r._trigger("beforeLoad",n,k.extend({jqXHR:t,ajaxSettings:e},i))}}},_getPanelForTab:function(t){var e=k(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+e))}}),!1!==k.uiBackCompat&&k.widget("ui.tabs",k.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}});k.ui.tabs;k.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=k(this).attr("title")||"";return k("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,e){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(e),t.data("ui-tooltip-id",e).attr("aria-describedby",k.trim(n.join(" ")))},_removeDescribedBy:function(t){var e=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),i=k.inArray(e,n);-1!==i&&n.splice(i,1),t.removeData("ui-tooltip-id"),(n=k.trim(n.join(" ")))?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=k("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=k([])},_setOption:function(t,e){var n=this;this._super(t,e),"content"===t&&k.each(this.tooltips,function(t,e){n._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var i=this;k.each(this.tooltips,function(t,e){var n=k.Event("blur");n.target=n.currentTarget=e.element[0],i.close(n,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=k(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=k(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=k([])},open:function(t){var n=this,e=k(t?t.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&e.parents().each(function(){var t,e=k(this);e.data("ui-tooltip-open")&&((t=k.Event("blur")).target=t.currentTarget=this,n.close(t,!0)),e.attr("title")&&(e.uniqueId(),n.parents[this.id]={element:this,title:e.attr("title")},e.attr("title",""))}),this._registerCloseHandlers(t,e),this._updateContent(e,t))},_updateContent:function(e,n){var t,i=this.options.content,r=this,s=n?n.type:null;if("string"==typeof i||i.nodeType||i.jquery)return this._open(n,e,i);(t=i.call(e[0],function(t){r._delay(function(){e.data("ui-tooltip-open")&&(n&&(n.type=s),this._open(n,e,t))})}))&&this._open(n,e,t)},_open:function(t,e,n){var i,r,s,o,a=k.extend({},this.options.position);function l(t){a.of=t,r.is(":hidden")||r.position(a)}n&&((i=this._find(e))?i.tooltip.find(".ui-tooltip-content").html(n):(e.is("[title]")&&(t&&"mouseover"===t.type?e.attr("title",""):e.removeAttr("title")),i=this._tooltip(e),r=i.tooltip,this._addDescribedBy(e,r.attr("id")),r.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),(o=k("<div>").html(r.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),o.removeAttr("id").find("[id]").removeAttr("id"),o.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:l}),l(t)):r.position(k.extend({of:e},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval(function(){r.is(":visible")&&(l(a.of),clearInterval(s))},k.fx.interval)),this._trigger("open",t,{tooltip:r})))},_registerCloseHandlers:function(t,n){var e={keyup:function(t){if(t.keyCode===k.ui.keyCode.ESCAPE){var e=k.Event(t);e.currentTarget=n[0],this.close(e,!0)}}};n[0]!==this.element[0]&&(e.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(e.mouseleave="close"),t&&"focusin"!==t.type||(e.focusout="close"),this._on(!0,n,e)},close:function(t){var e,n=this,i=k(t?t.currentTarget:this.element),r=this._find(i);r?(e=r.tooltip,r.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),r.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){n._removeTooltip(k(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&k.each(this.parents,function(t,e){k(e.element).attr("title",e.title),delete n.parents[t]}),r.closing=!0,this._trigger("close",t,{tooltip:e}),r.hiding||(r.closing=!1))):i.removeData("ui-tooltip-open")},_tooltip:function(t){var e=k("<div>").attr("role","tooltip"),n=k("<div>").appendTo(e),i=e.uniqueId().attr("id");return this._addClass(n,"ui-tooltip-content"),this._addClass(e,"ui-tooltip","ui-widget ui-widget-content"),e.appendTo(this._appendTo(t)),this.tooltips[i]={element:t,tooltip:e}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),e},_destroy:function(){var r=this;k.each(this.tooltips,function(t,e){var n=k.Event("blur"),i=e.element;n.target=n.currentTarget=i[0],r.close(n,!0),k("#"+t).remove(),i.data("ui-tooltip-title")&&(i.attr("title")||i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==k.uiBackCompat&&k.widget("ui.tooltip",k.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}});k.ui.tooltip;var N,M,D,A,I,R,L,q,j,z,F,H,B,U,$,W,V,Y,K,G,Q,J="ui-effects-",X="ui-effects-style",Z="ui-effects-animated",tt=k;function et(t,e,n){var i=q[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:t<0?0:i.max<t?i.max:t)}function nt(o){var a=R(),l=a._rgba=[];return o=o.toLowerCase(),F(I,function(t,e){var n,i=e.re.exec(o),r=i&&e.parse(i),s=e.space||"rgba";if(r)return n=a[s](r),a[L[s].cache]=n[L[s].cache],l=a._rgba=n._rgba,!1}),l.length?("0,0,0,0"===l.join()&&N.extend(l,D.transparent),a):D[o]}function it(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function rt(t){var e,n,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)"string"==typeof i[e=i[n]]&&(r[k.camelCase(e)]=i[e]);else for(e in i)"string"==typeof i[e]&&(r[e]=i[e]);return r}function st(t,e,n,i){return k.isPlainObject(t)&&(t=(e=t).effect),t={effect:t},null==e&&(e={}),k.isFunction(e)&&(i=e,n=null,e={}),"number"!=typeof e&&!k.fx.speeds[e]||(i=n,n=e,e={}),k.isFunction(n)&&(i=n,n=null),e&&k.extend(t,e),n=n||e.duration,t.duration=k.fx.off?0:"number"==typeof n?n:n in k.fx.speeds?k.fx.speeds[n]:k.fx.speeds._default,t.complete=i||e.complete,t}function ot(t){return!(t&&"number"!=typeof t&&!k.fx.speeds[t])||("string"==typeof t&&!k.effects.effect[t]||(!!k.isFunction(t)||"object"===(void 0===t?"undefined":_typeof(t))&&!t.effect))}function at(t,e){var n=e.outerWidth(),i=e.outerHeight(),r=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,n,i,0];return{top:parseFloat(r[1])||0,right:"auto"===r[2]?n:parseFloat(r[2]),bottom:"auto"===r[3]?i:parseFloat(r[3]),left:parseFloat(r[4])||0}}k.effects={effect:{}},A=/^([\-+])=\s*(\d+\.?\d*)/,I=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],R=(N=tt).Color=function(t,e,n,i){return new N.Color.fn.parse(t,e,n,i)},L={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},q={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},j=R.support={},z=N("<p>")[0],F=N.each,z.style.cssText="background-color:rgba(1,1,1,.5)",j.rgba=-1<z.style.backgroundColor.indexOf("rgba"),F(L,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),R.fn=N.extend(R.prototype,{parse:function(r,t,e,n){if(r===M)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=N(r).css(t),t=M);var s=this,i=N.type(r),o=this._rgba=[];return t!==M&&(r=[r,t,e,n],i="array"),"string"===i?this.parse(nt(r)||D._default):"array"===i?(F(L.rgba.props,function(t,e){o[e.idx]=et(r[e.idx],e)}),this):"object"===i?(F(L,r instanceof R?function(t,e){r[e.cache]&&(s[e.cache]=r[e.cache].slice())}:function(t,n){var i=n.cache;F(n.props,function(t,e){if(!s[i]&&n.to){if("alpha"===t||null==r[t])return;s[i]=n.to(s._rgba)}s[i][e.idx]=et(r[t],e,!0)}),s[i]&&N.inArray(null,s[i].slice(0,3))<0&&(s[i][3]=1,n.from&&(s._rgba=n.from(s[i])))}),this):void 0},is:function(t){var r=R(t),s=!0,o=this;return F(L,function(t,e){var n,i=r[e.cache];return i&&(n=o[e.cache]||e.to&&e.to(o._rgba)||[],F(e.props,function(t,e){if(null!=i[e.idx])return s=i[e.idx]===n[e.idx]})),s}),s},_space:function(){var n=[],i=this;return F(L,function(t,e){i[e.cache]&&n.push(t)}),n.pop()},transition:function(t,o){var a=R(t),e=a._space(),n=L[e],i=0===this.alpha()?R("transparent"):this,l=i[n.cache]||n.to(i._rgba),u=l.slice();return a=a[n.cache],F(n.props,function(t,e){var n=e.idx,i=l[n],r=a[n],s=q[e.type]||{};null!==r&&(null===i?u[n]=r:(s.mod&&(r-i>s.mod/2?i+=s.mod:i-r>s.mod/2&&(i-=s.mod)),u[n]=et((r-i)*o+i,e)))}),this[e](u)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),n=e.pop(),i=R(t)._rgba;return R(N.map(e,function(t,e){return(1-n)*i[e]+n*t}))},toRgbaString:function(){var t="rgba(",e=N.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=N.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),n=e.pop();return t&&e.push(~~(255*n)),"#"+N.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),R.fn.parse.prototype=R.fn,L.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,r=t[1]/255,s=t[2]/255,o=t[3],a=Math.max(i,r,s),l=Math.min(i,r,s),u=a-l,c=a+l,h=.5*c;return e=l===a?0:i===a?60*(r-s)/u+360:r===a?60*(s-i)/u+120:60*(i-r)/u+240,n=0==u?0:h<=.5?u/c:u/(2-c),[Math.round(e)%360,n,h,null==o?1:o]},L.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],r=t[3],s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;return[Math.round(255*it(o,s,e+1/3)),Math.round(255*it(o,s,e)),Math.round(255*it(o,s,e-1/3)),r]},F(L,function(l,t){var n=t.props,o=t.cache,a=t.to,u=t.from;R.fn[l]=function(t){if(a&&!this[o]&&(this[o]=a(this._rgba)),t===M)return this[o].slice();var e,i=N.type(t),r="array"===i||"object"===i?t:arguments,s=this[o].slice();return F(n,function(t,e){var n=r["object"===i?t:e.idx];null==n&&(n=s[e.idx]),s[e.idx]=et(n,e)}),u?((e=R(u(s)))[o]=s,e):R(s)},F(n,function(o,a){R.fn[o]||(R.fn[o]=function(t){var e,n=N.type(t),i="alpha"===o?this._hsla?"hsla":"rgba":l,r=this[i](),s=r[a.idx];return"undefined"===n?s:("function"===n&&(t=t.call(this,s),n=N.type(t)),null==t&&a.empty?this:("string"===n&&(e=A.exec(t))&&(t=s+parseFloat(e[2])*("+"===e[1]?1:-1)),r[a.idx]=t,this[i](r)))})})}),R.hook=function(t){var e=t.split(" ");F(e,function(t,s){N.cssHooks[s]={set:function(t,e){var n,i,r="";if("transparent"!==e&&("string"!==N.type(e)||(n=nt(e)))){if(e=R(n||e),!j.rgba&&1!==e._rgba[3]){for(i="backgroundColor"===s?t.parentNode:t;(""===r||"transparent"===r)&&i&&i.style;)try{r=N.css(i,"backgroundColor"),i=i.parentNode}catch(t){}e=e.blend(r&&"transparent"!==r?r:"_default")}e=e.toRgbaString()}try{t.style[s]=e}catch(t){}}},N.fx.step[s]=function(t){t.colorInit||(t.start=R(t.elem,s),t.end=R(t.end),t.colorInit=!0),N.cssHooks[s].set(t.elem,t.start.transition(t.end,t.pos))}})},R.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),N.cssHooks.borderColor={expand:function(n){var i={};return F(["Top","Right","Bottom","Left"],function(t,e){i["border"+e+"Color"]=n}),i}},D=N.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},$=["add","remove","toggle"],W={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},k.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){k.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(tt.style(t.elem,e,t.end),t.setAttr=!0)}}),k.fn.addBack||(k.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),k.effects.animateClass=function(r,t,e,n){var s=k.speed(t,e,n);return this.queue(function(){var t,n=k(this),e=n.attr("class")||"",i=s.children?n.find("*").addBack():n;i=i.map(function(){return{el:k(this),start:rt(this)}}),(t=function(){k.each($,function(t,e){r[e]&&n[e+"Class"](r[e])})})(),i=i.map(function(){return this.end=rt(this.el[0]),this.diff=function(t,e){var n,i,r={};for(n in e)i=e[n],t[n]!==i&&(W[n]||!k.fx.step[n]&&isNaN(parseFloat(i))||(r[n]=i));return r}(this.start,this.end),this}),n.attr("class",e),i=i.map(function(){var t=this,e=k.Deferred(),n=k.extend({},s,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,n),e.promise()}),k.when.apply(k,i.get()).done(function(){t(),k.each(arguments,function(){var e=this.el;k.each(this.diff,function(t){e.css(t,"")})}),s.complete.call(n[0])})})},k.fn.extend({addClass:(U=k.fn.addClass,function(t,e,n,i){return e?k.effects.animateClass.call(this,{add:t},e,n,i):U.apply(this,arguments)}),removeClass:(B=k.fn.removeClass,function(t,e,n,i){return 1<arguments.length?k.effects.animateClass.call(this,{remove:t},e,n,i):B.apply(this,arguments)}),toggleClass:(H=k.fn.toggleClass,function(t,e,n,i,r){return"boolean"==typeof e||void 0===e?n?k.effects.animateClass.call(this,e?{add:t}:{remove:t},n,i,r):H.apply(this,arguments):k.effects.animateClass.call(this,{toggle:t},e,n,i)}),switchClass:function(t,e,n,i,r){return k.effects.animateClass.call(this,{add:e,remove:t},n,i,r)}}),k.expr&&k.expr.pseudos&&k.expr.pseudos.animated&&(k.expr.pseudos.animated=(V=k.expr.pseudos.animated,function(t){return!!k(t).data(Z)||V(t)})),!1!==k.uiBackCompat&&k.extend(k.effects,{save:function(t,e){for(var n=0,i=e.length;n<i;n++)null!==e[n]&&t.data(J+e[n],t[0].style[e[n]])},restore:function(t,e){for(var n,i=0,r=e.length;i<r;i++)null!==e[i]&&(n=t.data(J+e[i]),t.css(e[i],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var i={width:n.outerWidth(!0),height:n.outerHeight(!0),float:n.css("float")},t=k("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:n.width(),height:n.height()},r=document.activeElement;try{r.id}catch(t){r=document.body}return n.wrap(t),n[0]!==r&&!k.contains(n[0],r)||k(r).trigger("focus"),t=n.parent(),"static"===n.css("position")?(t.css({position:"relative"}),n.css({position:"relative"})):(k.extend(i,{position:n.css("position"),zIndex:n.css("z-index")}),k.each(["top","left","bottom","right"],function(t,e){i[e]=n.css(e),isNaN(parseInt(i[e],10))&&(i[e]="auto")}),n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(e),t.css(i).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),t[0]!==e&&!k.contains(t[0],e)||k(e).trigger("focus")),t}}),k.extend(k.effects,{version:"1.12.1",define:function(t,e,n){return n||(n=e,e="effect"),k.effects.effect[t]=n,k.effects.effect[t].mode=e,n},scaledDimensions:function(t,e,n){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(e||100)/100:1,r="vertical"!==n?(e||100)/100:1;return{height:t.height()*r,width:t.width()*i,outerHeight:t.outerHeight()*r,outerWidth:t.outerWidth()*i}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var i=t.queue();1<e&&i.splice.apply(i,[1,0].concat(i.splice(e,n))),t.dequeue()},saveStyle:function(t){t.data(X,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(X)||"",t.removeData(X)},mode:function(t,e){var n=t.is(":hidden");return"toggle"===e&&(e=n?"show":"hide"),(n?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createPlaceholder:function(t){var e,n=t.css("position"),i=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",e=k("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(J+"placeholder",e)),t.css({position:n,left:i.left,top:i.top}),e},removePlaceholder:function(t){var e=J+"placeholder",n=t.data(e);n&&(n.remove(),t.removeData(e))},cleanUp:function(t){k.effects.restoreStyle(t),k.effects.removePlaceholder(t)},setTransition:function(i,t,r,s){return s=s||{},k.each(t,function(t,e){var n=i.cssUnit(e);0<n[0]&&(s[e]=n[0]*r+n[1])}),s}}),k.fn.extend({effect:function(){function t(t){var e=k(this),n=k.effects.mode(e,a)||s;e.data(Z,!0),l.push(n),s&&("show"===n||n===s&&"hide"===n)&&e.show(),s&&"none"===n||k.effects.saveStyle(e),k.isFunction(t)&&t()}var i=st.apply(this,arguments),r=k.effects.effect[i.effect],s=r.mode,e=i.queue,n=e||"fx",o=i.complete,a=i.mode,l=[];if(k.fx.off||!r)return a?this[a](i.duration,o):this.each(function(){o&&o.call(this)});function u(t){var e=k(this);function n(){k.isFunction(o)&&o.call(e[0]),k.isFunction(t)&&t()}i.mode=l.shift(),!1===k.uiBackCompat||s?"none"===i.mode?(e[a](),n()):r.call(e[0],i,function(){e.removeData(Z),k.effects.cleanUp(e),"hide"===i.mode&&e.hide(),n()}):(e.is(":hidden")?"hide"===a:"show"===a)?(e[a](),n()):r.call(e[0],i,n)}return!1===e?this.each(t).each(u):this.queue(n,t).queue(n,u)},show:(G=k.fn.show,function(t){if(ot(t))return G.apply(this,arguments);var e=st.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(K=k.fn.hide,function(t){if(ot(t))return K.apply(this,arguments);var e=st.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(Y=k.fn.toggle,function(t){if(ot(t)||"boolean"==typeof t)return Y.apply(this,arguments);var e=st.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(t){var n=this.css(t),i=[];return k.each(["em","px","%","pt"],function(t,e){0<n.indexOf(e)&&(i=[parseFloat(n),e])}),i},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):at(this.css("clip"),this)},transfer:function(t,e){var n=k(this),i=k(t.to),r="fixed"===i.css("position"),s=k("body"),o=r?s.scrollTop():0,a=r?s.scrollLeft():0,l=i.offset(),u={top:l.top-o,left:l.left-a,height:i.innerHeight(),width:i.innerWidth()},c=n.offset(),h=k("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:c.top-o,left:c.left-a,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){h.remove(),k.isFunction(e)&&e()})}}),k.fx.step.clip=function(t){t.clipInit||(t.start=k(t.elem).cssClip(),"string"==typeof t.end&&(t.end=at(t.end,t.elem)),t.clipInit=!0),k(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})},Q={},k.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){Q[t]=function(t){return Math.pow(t,e+2)}}),k.extend(Q,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),k.each(Q,function(t,e){k.easing["easeIn"+t]=e,k.easing["easeOut"+t]=function(t){return 1-e(1-t)},k.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}});k.effects,k.effects.define("blind","hide",function(t,e){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},i=k(this),r=t.direction||"up",s=i.cssClip(),o={clip:k.extend({},s)},a=k.effects.createPlaceholder(i);o.clip[n[r][0]]=o.clip[n[r][1]],"show"===t.mode&&(i.cssClip(o.clip),a&&a.css(k.effects.clipToBox(o)),o.clip=s),a&&a.animate(k.effects.clipToBox(o),t.duration,t.easing),i.animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("bounce",function(t,e){var n,i,r,s=k(this),o=t.mode,a="hide"===o,l="show"===o,u=t.direction||"up",c=t.distance,h=t.times||5,f=2*h+(l||a?1:0),d=t.duration/f,p=t.easing,g="up"===u||"down"===u?"top":"left",m="up"===u||"left"===u,v=0,y=s.queue().length;for(k.effects.createPlaceholder(s),r=s.css(g),c||(c=s["top"==g?"outerHeight":"outerWidth"]()/3),l&&((i={opacity:1})[g]=r,s.css("opacity",0).css(g,m?2*-c:2*c).animate(i,d,p)),a&&(c/=Math.pow(2,h-1)),(i={})[g]=r;v<h;v++)(n={})[g]=(m?"-=":"+=")+c,s.animate(n,d,p).animate(i,d,p),c=a?2*c:c/2;a&&((n={opacity:0})[g]=(m?"-=":"+=")+c,s.animate(n,d,p)),s.queue(e),k.effects.unshift(s,y,1+f)}),k.effects.define("clip","hide",function(t,e){var n,i={},r=k(this),s=t.direction||"vertical",o="both"===s,a=o||"horizontal"===s,l=o||"vertical"===s;n=r.cssClip(),i.clip={top:l?(n.bottom-n.top)/2:n.top,right:a?(n.right-n.left)/2:n.right,bottom:l?(n.bottom-n.top)/2:n.bottom,left:a?(n.right-n.left)/2:n.left},k.effects.createPlaceholder(r),"show"===t.mode&&(r.cssClip(i.clip),i.clip=n),r.animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("drop","hide",function(t,e){var n,i=k(this),r="show"===t.mode,s=t.direction||"left",o="up"===s||"down"===s?"top":"left",a="up"===s||"left"===s?"-=":"+=",l="+="==a?"-=":"+=",u={opacity:0};k.effects.createPlaceholder(i),n=t.distance||i["top"==o?"outerHeight":"outerWidth"](!0)/2,u[o]=a+n,r&&(i.css(u),u[o]=l+n,u.opacity=1),i.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("explode","hide",function(t,e){var n,i,r,s,o,a,l=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=l,c=k(this),h="show"===t.mode,f=c.show().css("visibility","hidden").offset(),d=Math.ceil(c.outerWidth()/u),p=Math.ceil(c.outerHeight()/l),g=[];function m(){g.push(this),g.length===l*u&&(c.css({visibility:"visible"}),k(g).remove(),e())}for(n=0;n<l;n++)for(s=f.top+n*p,a=n-(l-1)/2,i=0;i<u;i++)r=f.left+i*d,o=i-(u-1)/2,c.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-i*d,top:-n*p}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:d,height:p,left:r+(h?o*d:0),top:s+(h?a*p:0),opacity:h?0:1}).animate({left:r+(h?0:o*d),top:s+(h?0:a*p),opacity:h?1:0},t.duration||500,t.easing,m)}),k.effects.define("fade","toggle",function(t,e){var n="show"===t.mode;k(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("fold","hide",function(e,t){var n=k(this),i=e.mode,r="show"===i,s="hide"===i,o=e.size||15,a=/([0-9]+)%/.exec(o),l=!!e.horizFirst?["right","bottom"]:["bottom","right"],u=e.duration/2,c=k.effects.createPlaceholder(n),h=n.cssClip(),f={clip:k.extend({},h)},d={clip:k.extend({},h)},p=[h[l[0]],h[l[1]]],g=n.queue().length;a&&(o=parseInt(a[1],10)/100*p[s?0:1]),f.clip[l[0]]=o,d.clip[l[0]]=o,d.clip[l[1]]=0,r&&(n.cssClip(d.clip),c&&c.css(k.effects.clipToBox(d)),d.clip=h),n.queue(function(t){c&&c.animate(k.effects.clipToBox(f),u,e.easing).animate(k.effects.clipToBox(d),u,e.easing),t()}).animate(f,u,e.easing).animate(d,u,e.easing).queue(t),k.effects.unshift(n,g,4)}),k.effects.define("highlight","show",function(t,e){var n=k(this),i={backgroundColor:n.css("backgroundColor")};"hide"===t.mode&&(i.opacity=0),k.effects.saveStyle(n),n.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("size",function(r,e){var t,s,n,i=k(this),o=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=r.mode,c="effect"!==u,h=r.scale||"both",f=r.origin||["middle","center"],d=i.css("position"),p=i.position(),g=k.effects.scaledDimensions(i),m=r.from||g,v=r.to||k.effects.scaledDimensions(i,0);k.effects.createPlaceholder(i),"show"===u&&(n=m,m=v,v=n),s={from:{y:m.height/g.height,x:m.width/g.width},to:{y:v.height/g.height,x:v.width/g.width}},"box"!==h&&"both"!==h||(s.from.y!==s.to.y&&(m=k.effects.setTransition(i,a,s.from.y,m),v=k.effects.setTransition(i,a,s.to.y,v)),s.from.x!==s.to.x&&(m=k.effects.setTransition(i,l,s.from.x,m),v=k.effects.setTransition(i,l,s.to.x,v))),"content"!==h&&"both"!==h||s.from.y!==s.to.y&&(m=k.effects.setTransition(i,o,s.from.y,m),v=k.effects.setTransition(i,o,s.to.y,v)),f&&(t=k.effects.getBaseline(f,g),m.top=(g.outerHeight-m.outerHeight)*t.y+p.top,m.left=(g.outerWidth-m.outerWidth)*t.x+p.left,v.top=(g.outerHeight-v.outerHeight)*t.y+p.top,v.left=(g.outerWidth-v.outerWidth)*t.x+p.left),i.css(m),"content"!==h&&"both"!==h||(a=a.concat(["marginTop","marginBottom"]).concat(o),l=l.concat(["marginLeft","marginRight"]),i.find("*[width]").each(function(){var t=k(this),e=k.effects.scaledDimensions(t),n={height:e.height*s.from.y,width:e.width*s.from.x,outerHeight:e.outerHeight*s.from.y,outerWidth:e.outerWidth*s.from.x},i={height:e.height*s.to.y,width:e.width*s.to.x,outerHeight:e.height*s.to.y,outerWidth:e.width*s.to.x};s.from.y!==s.to.y&&(n=k.effects.setTransition(t,a,s.from.y,n),i=k.effects.setTransition(t,a,s.to.y,i)),s.from.x!==s.to.x&&(n=k.effects.setTransition(t,l,s.from.x,n),i=k.effects.setTransition(t,l,s.to.x,i)),c&&k.effects.saveStyle(t),t.css(n),t.animate(i,r.duration,r.easing,function(){c&&k.effects.restoreStyle(t)})})),i.animate(v,{queue:!1,duration:r.duration,easing:r.easing,complete:function(){var t=i.offset();0===v.opacity&&i.css("opacity",m.opacity),c||(i.css("position","static"===d?"relative":d).offset(t),k.effects.saveStyle(i)),e()}})}),k.effects.define("scale",function(t,e){var n=k(this),i=t.mode,r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"effect"!==i?0:100),s=k.extend(!0,{from:k.effects.scaledDimensions(n),to:k.effects.scaledDimensions(n,r,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(s.from.opacity=1,s.to.opacity=0),k.effects.effect.size.call(this,s,e)}),k.effects.define("puff","hide",function(t,e){var n=k.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});k.effects.effect.scale.call(this,n,e)}),k.effects.define("pulsate","show",function(t,e){var n=k(this),i=t.mode,r="show"===i,s=r||"hide"===i,o=2*(t.times||5)+(s?1:0),a=t.duration/o,l=0,u=1,c=n.queue().length;for(!r&&n.is(":visible")||(n.css("opacity",0).show(),l=1);u<o;u++)n.animate({opacity:l},a,t.easing),l=1-l;n.animate({opacity:l},a,t.easing),n.queue(e),k.effects.unshift(n,c,1+o)}),k.effects.define("shake",function(t,e){var n=1,i=k(this),r=t.direction||"left",s=t.distance||20,o=t.times||3,a=2*o+1,l=Math.round(t.duration/a),u="up"===r||"down"===r?"top":"left",c="up"===r||"left"===r,h={},f={},d={},p=i.queue().length;for(k.effects.createPlaceholder(i),h[u]=(c?"-=":"+=")+s,f[u]=(c?"+=":"-=")+2*s,d[u]=(c?"-=":"+=")+2*s,i.animate(h,l,t.easing);n<o;n++)i.animate(f,l,t.easing).animate(d,l,t.easing);i.animate(f,l,t.easing).animate(h,l/2,t.easing).queue(e),k.effects.unshift(i,p,1+a)}),k.effects.define("slide","show",function(t,e){var n,i,r=k(this),s={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},o=t.mode,a=t.direction||"left",l="up"===a||"down"===a?"top":"left",u="up"===a||"left"===a,c=t.distance||r["top"==l?"outerHeight":"outerWidth"](!0),h={};k.effects.createPlaceholder(r),n=r.cssClip(),i=r.position()[l],h[l]=(u?-1:1)*c+i,h.clip=r.cssClip(),h.clip[s[a][1]]=h.clip[s[a][0]],"show"===o&&(r.cssClip(h.clip),r.css(l,h[l]),h.clip=n,h[l]=i),r.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:e})});!1!==k.uiBackCompat&&k.effects.define("transfer",function(t,e){k(this).transfer(t,e)})})(jQuery)},{}],256:[function(t,e,n){var i,r;i="undefined"!=typeof window?window:this,r=function(k,t){function g(t){return null!=t&&t===t.window}var e=[],x=k.document,i=Object.getPrototypeOf,a=e.slice,m=e.concat,l=e.push,r=e.indexOf,n={},s=n.toString,v=n.hasOwnProperty,o=v.toString,u=o.call(Object),y={},_=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},c={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var i,r,s=(n=n||x).createElement("script");if(s.text=t,e)for(i in c)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function w(t){return null==t?t+"":"object"===(void 0===t?"undefined":_typeof(t))||"function"==typeof t?n[s.call(t)]||"object":void 0===t?"undefined":_typeof(t)}var T=function t(e,n){return new t.fn.init(e,n)},h=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function f(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!_(t)&&!g(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}T.fn=T.prototype={jquery:"3.4.1",constructor:T,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(n){return this.pushStack(T.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},T.extend=T.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[a]||{},a++),"object"===(void 0===o?"undefined":_typeof(o))||_(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(u&&i&&(T.isPlainObject(i)||(r=Array.isArray(i)))?(n=o[e],s=r&&!Array.isArray(n)?[]:r||T.isPlainObject(n)?n:{},r=!1,o[e]=T.extend(u,s,i)):void 0!==i&&(o[e]=i));return o},T.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==s.call(t))&&(!(e=i(t))||"function"==typeof(n=v.call(e,"constructor")&&e.constructor)&&o.call(n)===u)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){b(t,{nonce:e&&e.nonce})},each:function(t,e){var n,i=0;if(f(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(h,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(f(Object(t))?T.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:r.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,o=!n;r<s;r++)!e(t[r],r)!=o&&i.push(t[r]);return i},map:function(t,e,n){var i,r,s=0,o=[];if(f(t))for(i=t.length;s<i;s++)null!=(r=e(t[s],s,n))&&o.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&o.push(r);return m.apply([],o)},guid:1,support:y}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=e[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var d=function(n){function h(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(65536+i):String.fromCharCode(i>>10|55296,1023&i|56320)}function r(){C()}var t,d,b,s,o,p,f,g,w,l,u,C,k,a,x,m,c,v,y,T="sizzle"+1*new Date,_=n.document,S=0,i=0,E=lt(),O=lt(),P=lt(),N=lt(),M=function(t,e){return t===e&&(u=!0),0},D={}.hasOwnProperty,e=[],A=e.pop,I=e.push,R=e.push,L=e.slice,q=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",H="\\["+z+"*("+F+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+z+"*\\]",B=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+H+")*)|.*)\\)|)",U=new RegExp(z+"+","g"),$=new RegExp("^"+z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+z+"+$","g"),W=new RegExp("^"+z+"*,"+z+"*"),V=new RegExp("^"+z+"*([>+~]|"+z+")"+z+"*"),Y=new RegExp(z+"|>"),K=new RegExp(B),G=new RegExp("^"+F+"$"),Q={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+z+"*(even|odd|(([+-]|)(\\d*)n|)"+z+"*(?:([+-]|)"+z+"*(\\d+)|))"+z+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+z+"*((?:-\\d)?\\d*)"+z+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,tt=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nt=/[+~]/,it=new RegExp("\\\\([\\da-f]{1,6}"+z+"?|("+z+")|.)","ig"),rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,st=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=bt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{R.apply(e=L.call(_.childNodes),_.childNodes),e[_.childNodes.length].nodeType}catch(t){R={apply:e.length?function(t,e){I.apply(t,L.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(e,t,n,i){var r,s,o,a,l,u,c,h=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:_)!==k&&C(t),t=t||k,x)){if(11!==f&&(l=et.exec(e)))if(r=l[1]){if(9===f){if(!(o=t.getElementById(r)))return n;if(o.id===r)return n.push(o),n}else if(h&&(o=h.getElementById(r))&&y(t,o)&&o.id===r)return n.push(o),n}else{if(l[2])return R.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&d.getElementsByClassName&&t.getElementsByClassName)return R.apply(n,t.getElementsByClassName(r)),n}if(d.qsa&&!N[e+" "]&&(!m||!m.test(e))&&(1!==f||"object"!==t.nodeName.toLowerCase())){if(c=e,h=t,1===f&&Y.test(e)){for((a=t.getAttribute("id"))?a=a.replace(rt,st):t.setAttribute("id",a=T),s=(u=p(e)).length;s--;)u[s]="#"+a+" "+_t(u[s]);c=u.join(","),h=nt.test(e)&&vt(t.parentNode)||t}try{return R.apply(n,h.querySelectorAll(c)),n}catch(t){N(e,!0)}finally{a===T&&t.removeAttribute("id")}}}return g(e.replace($,"$1"),t,n,i)}function lt(){var i=[];return function t(e,n){return i.push(e+" ")>b.cacheLength&&delete t[i.shift()],t[e+" "]=n}}function ut(t){return t[T]=!0,t}function ct(t){var e=k.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),i=n.length;i--;)b.attrHandle[n[i]]=e}function ft(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function dt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pt(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function gt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ot(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function mt(o){return ut(function(s){return s=+s,ut(function(t,e){for(var n,i=o([],t.length,s),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in d=at.support={},o=at.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!J.test(e||n&&n.nodeName||"HTML")},C=at.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:_;return i!==k&&9===i.nodeType&&i.documentElement&&(a=(k=i).documentElement,x=!o(k),_!==k&&(n=k.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",r,!1):n.attachEvent&&n.attachEvent("onunload",r)),d.attributes=ct(function(t){return t.className="i",!t.getAttribute("className")}),d.getElementsByTagName=ct(function(t){return t.appendChild(k.createComment("")),!t.getElementsByTagName("*").length}),d.getElementsByClassName=tt.test(k.getElementsByClassName),d.getById=ct(function(t){return a.appendChild(t).id=T,!k.getElementsByName||!k.getElementsByName(T).length}),d.getById?(b.filter.ID=function(t){var e=t.replace(it,h);return function(t){return t.getAttribute("id")===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&x){var n=e.getElementById(t);return n?[n]:[]}}):(b.filter.ID=function(t){var n=t.replace(it,h);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&x){var n,i,r,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(r=e.getElementsByName(t),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),b.find.TAG=d.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):d.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"!==t)return s;for(;n=s[r++];)1===n.nodeType&&i.push(n);return i},b.find.CLASS=d.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&x)return e.getElementsByClassName(t)},c=[],m=[],(d.qsa=tt.test(k.querySelectorAll))&&(ct(function(t){a.appendChild(t).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+z+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+z+"*(?:value|"+j+")"),t.querySelectorAll("[id~="+T+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+T+"+*").length||m.push(".#.+[+~]")}),ct(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=k.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+z+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),a.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(d.matchesSelector=tt.test(v=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ct(function(t){d.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),c.push("!=",B)}),m=m.length&&new RegExp(m.join("|")),c=c.length&&new RegExp(c.join("|")),e=tt.test(a.compareDocumentPosition),y=e||tt.test(a.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},M=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!d.sortDetached&&e.compareDocumentPosition(t)===n?t===k||t.ownerDocument===_&&y(_,t)?-1:e===k||e.ownerDocument===_&&y(_,e)?1:l?q(l,t)-q(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,i=0,r=t.parentNode,s=e.parentNode,o=[t],a=[e];if(!r||!s)return t===k?-1:e===k?1:r?-1:s?1:l?q(l,t)-q(l,e):0;if(r===s)return ft(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;o[i]===a[i];)i++;return i?ft(o[i],a[i]):o[i]===_?-1:a[i]===_?1:0}),k},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if((t.ownerDocument||t)!==k&&C(t),d.matchesSelector&&x&&!N[e+" "]&&(!c||!c.test(e))&&(!m||!m.test(e)))try{var n=v.call(t,e);if(n||d.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){N(e,!0)}return 0<at(e,k,null,[t]).length},at.contains=function(t,e){return(t.ownerDocument||t)!==k&&C(t),y(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!==k&&C(t);var n=b.attrHandle[e.toLowerCase()],i=n&&D.call(b.attrHandle,e.toLowerCase())?n(t,e,!x):void 0;return void 0!==i?i:d.attributes||!x?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},at.escape=function(t){return(t+"").replace(rt,st)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,n=[],i=0,r=0;if(u=!d.detectDuplicates,l=!d.sortStable&&t.slice(0),t.sort(M),u){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return l=null,t},s=at.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=s(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=s(e);return n},(b=at.selectors={cacheLength:50,createPseudo:ut,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(it,h),t[3]=(t[3]||t[4]||t[5]||"").replace(it,h),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&K.test(n)&&(e=p(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(it,h).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|"+z+")"+t+"("+z+"|$)"))&&E(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=at.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&-1<e.indexOf(r):"$="===i?r&&e.slice(-r.length)===r:"~="===i?-1<(" "+e.replace(U," ")+" ").indexOf(r):"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,t,e,g,m){var v="nth"!==p.slice(0,3),y="last"!==p.slice(-4),_="of-type"===t;return 1===g&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var i,r,s,o,a,l,u=v!=y?"nextSibling":"previousSibling",c=t.parentNode,h=_&&t.nodeName.toLowerCase(),f=!n&&!_,d=!1;if(c){if(v){for(;u;){for(o=t;o=o[u];)if(_?o.nodeName.toLowerCase()===h:1===o.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?c.firstChild:c.lastChild],y&&f){for(d=(a=(i=(r=(s=(o=c)[T]||(o[T]={}))[o.uniqueID]||(s[o.uniqueID]={}))[p]||[])[0]===S&&i[1])&&i[2],o=a&&c.childNodes[a];o=++a&&o&&o[u]||(d=a=0)||l.pop();)if(1===o.nodeType&&++d&&o===t){r[p]=[S,a,d];break}}else if(f&&(d=a=(i=(r=(s=(o=t)[T]||(o[T]={}))[o.uniqueID]||(s[o.uniqueID]={}))[p]||[])[0]===S&&i[1]),!1===d)for(;(o=++a&&o&&o[u]||(d=a=0)||l.pop())&&((_?o.nodeName.toLowerCase()!==h:1!==o.nodeType)||!++d||(f&&((r=(s=o[T]||(o[T]={}))[o.uniqueID]||(s[o.uniqueID]={}))[p]=[S,d]),o!==t)););return(d-=m)===g||d%g==0&&0<=d/g}}},PSEUDO:function(t,s){var e,o=b.pseudos[t]||b.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return o[T]?o(s):1<o.length?(e=[t,t,"",s],b.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,e){for(var n,i=o(t,s),r=i.length;r--;)t[n=q(t,i[r])]=!(e[n]=i[r])}):function(t){return o(t,0,e)}):o}},pseudos:{not:ut(function(t){var i=[],r=[],a=f(t.replace($,"$1"));return a[T]?ut(function(t,e,n,i){for(var r,s=a(t,null,i,[]),o=t.length;o--;)(r=s[o])&&(t[o]=!(e[o]=r))}):function(t,e,n){return i[0]=t,a(i,null,n,r),i[0]=null,!r.pop()}}),has:ut(function(e){return function(t){return 0<at(e,t).length}}),contains:ut(function(e){return e=e.replace(it,h),function(t){return-1<(t.textContent||s(t)).indexOf(e)}}),lang:ut(function(n){return G.test(n||"")||at.error("unsupported lang: "+n),n=n.replace(it,h).toLowerCase(),function(t){var e;do{if(e=x?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===a},focus:function(t){return t===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt(function(){return[0]}),last:mt(function(t,e){return[e-1]}),eq:mt(function(t,e,n){return[n<0?n+e:n]}),even:mt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:mt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:mt(function(t,e,n){for(var i=n<0?n+e:e<n?e:n;0<=--i;)t.push(i);return t}),gt:mt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[t]=dt(t);for(t in{submit:!0,reset:!0})b.pseudos[t]=pt(t);function yt(){}function _t(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function bt(a,t,e){var l=t.dir,u=t.next,c=u||l,h=e&&"parentNode"===c,f=i++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||h)return a(t,e,n);return!1}:function(t,e,n){var i,r,s,o=[S,f];if(n){for(;t=t[l];)if((1===t.nodeType||h)&&a(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||h)if(r=(s=t[T]||(t[T]={}))[t.uniqueID]||(s[t.uniqueID]={}),u&&u===t.nodeName.toLowerCase())t=t[l]||t;else{if((i=r[c])&&i[0]===S&&i[1]===f)return o[2]=i[2];if((r[c]=o)[2]=a(t,e,n))return!0}return!1}}function wt(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function Ct(t,e,n,i,r){for(var s,o=[],a=0,l=t.length,u=null!=e;a<l;a++)(s=t[a])&&(n&&!n(s,i,r)||(o.push(s),u&&e.push(a)));return o}function kt(d,p,g,m,v,t){return m&&!m[T]&&(m=kt(m)),v&&!v[T]&&(v=kt(v,t)),ut(function(t,e,n,i){var r,s,o,a=[],l=[],u=e.length,c=t||function(t,e,n){for(var i=0,r=e.length;i<r;i++)at(t,e[i],n);return n}(p||"*",n.nodeType?[n]:n,[]),h=!d||!t&&p?c:Ct(c,a,d,n,i),f=g?v||(t?d:u||m)?[]:e:h;if(g&&g(h,f,n,i),m)for(r=Ct(f,l),m(r,[],n,i),s=r.length;s--;)(o=r[s])&&(f[l[s]]=!(h[l[s]]=o));if(t){if(v||d){if(v){for(r=[],s=f.length;s--;)(o=f[s])&&r.push(h[s]=o);v(null,f=[],r,i)}for(s=f.length;s--;)(o=f[s])&&-1<(r=v?q(t,o):a[s])&&(t[r]=!(e[r]=o))}}else f=Ct(f===e?f.splice(u,f.length):f),v?v(null,e,f,i):R.apply(e,f)})}function xt(t){for(var r,e,n,i=t.length,s=b.relative[t[0].type],o=s||b.relative[" "],a=s?1:0,l=bt(function(t){return t===r},o,!0),u=bt(function(t){return-1<q(r,t)},o,!0),c=[function(t,e,n){var i=!s&&(n||e!==w)||((r=e).nodeType?l(t,e,n):u(t,e,n));return r=null,i}];a<i;a++)if(e=b.relative[t[a].type])c=[bt(wt(c),e)];else{if((e=b.filter[t[a].type].apply(null,t[a].matches))[T]){for(n=++a;n<i&&!b.relative[t[n].type];n++);return kt(1<a&&wt(c),1<a&&_t(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace($,"$1"),e,a<n&&xt(t.slice(a,n)),n<i&&xt(t=t.slice(n)),n<i&&_t(t))}c.push(e)}return wt(c)}return yt.prototype=b.filters=b.pseudos,b.setFilters=new yt,p=at.tokenize=function(t,e){var n,i,r,s,o,a,l,u=O[t+" "];if(u)return e?0:u.slice(0);for(o=t,a=[],l=b.preFilter;o;){for(s in n&&!(i=W.exec(o))||(i&&(o=o.slice(i[0].length)||o),a.push(r=[])),n=!1,(i=V.exec(o))&&(n=i.shift(),r.push({value:n,type:i[0].replace($," ")}),o=o.slice(n.length)),b.filter)!(i=Q[s].exec(o))||l[s]&&!(i=l[s](i))||(n=i.shift(),r.push({value:n,type:s,matches:i}),o=o.slice(n.length));if(!n)break}return e?o.length:o?at.error(t):O(t,a).slice(0)},f=at.compile=function(t,e){var n,i=[],r=[],s=P[t+" "];if(!s){for(e||(e=p(t)),n=e.length;n--;)(s=xt(e[n]))[T]?i.push(s):r.push(s);(s=P(t,function(m,v){function t(t,e,n,i,r){var s,o,a,l=0,u="0",c=t&&[],h=[],f=w,d=t||_&&b.find.TAG("*",r),p=S+=null==f?1:Math.random()||.1,g=d.length;for(r&&(w=e===k||e||r);u!==g&&null!=(s=d[u]);u++){if(_&&s){for(o=0,e||s.ownerDocument===k||(C(s),n=!x);a=m[o++];)if(a(s,e||k,n)){i.push(s);break}r&&(S=p)}y&&((s=!a&&s)&&l--,t&&c.push(s))}if(l+=u,y&&u!==l){for(o=0;a=v[o++];)a(c,h,e,n);if(t){if(0<l)for(;u--;)c[u]||h[u]||(h[u]=A.call(i));h=Ct(h)}R.apply(i,h),r&&!t&&0<h.length&&1<l+v.length&&at.uniqueSort(i)}return r&&(S=p,w=f),c}var y=0<v.length,_=0<m.length;return y?ut(t):t}(r,i))).selector=t}return s},g=at.select=function(t,e,n,i){var r,s,o,a,l,u="function"==typeof t&&t,c=!i&&p(t=u.selector||t);if(n=n||[],1===c.length){if(2<(s=c[0]=c[0].slice(0)).length&&"ID"===(o=s[0]).type&&9===e.nodeType&&x&&b.relative[s[1].type]){if(!(e=(b.find.ID(o.matches[0].replace(it,h),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(r=Q.needsContext.test(t)?0:s.length;r--&&(o=s[r],!b.relative[a=o.type]);)if((l=b.find[a])&&(i=l(o.matches[0].replace(it,h),nt.test(s[0].type)&&vt(e.parentNode)||e))){if(s.splice(r,1),!(t=i.length&&_t(s)))return R.apply(n,i),n;break}}return(u||f(t,c))(i,e,!x,n,!e||nt.test(t)&&vt(e.parentNode)||e),n},d.sortStable=T.split("").sort(M).join("")===T,d.detectDuplicates=!!u,C(),d.sortDetached=ct(function(t){return 1&t.compareDocumentPosition(k.createElement("fieldset"))}),ct(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),d.attributes&&ct(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ct(function(t){return null==t.getAttribute("disabled")})||ht(j,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),at}(k);T.find=d,T.expr=d.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=d.uniqueSort,T.text=d.getText,T.isXMLDoc=d.isXML,T.contains=d.contains,T.escapeSelector=d.escape;function p(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&T(t).is(n))break;i.push(t)}return i}function C(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}var S=T.expr.match.needsContext;function E(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(t,n,i){return _(n)?T.grep(t,function(t,e){return!!n.call(t,e,t)!==i}):n.nodeType?T.grep(t,function(t){return t===n!==i}):"string"!=typeof n?T.grep(t,function(t){return-1<r.call(n,t)!==i}):T.filter(n,t,i)}T.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?T.find.matchesSelector(i,t)?[i]:[]:T.find.matches(t,T.grep(e,function(t){return 1===t.nodeType}))},T.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(T(t).filter(function(){for(e=0;e<i;e++)if(T.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)T.find(t,r[e],n);return 1<i?T.uniqueSort(n):n},filter:function(t){return this.pushStack(P(this,t||[],!1))},not:function(t){return this.pushStack(P(this,t||[],!0))},is:function(t){return!!P(this,"string"==typeof t&&S.test(t)?T(t):t||[],!1).length}});var N,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||N,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):_(t)?void 0!==n.ready?n.ready(t):t(T):T.makeArray(t,this);if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:M.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:x,!0)),O.test(i[1])&&T.isPlainObject(e))for(i in e)_(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=x.getElementById(i[2]))&&(this[0]=r,this.length=1),this}).prototype=T.fn,N=T(x);var D=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(T.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,s=[],o="string"!=typeof t&&T(t);if(!S.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&T.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(1<s.length?T.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?r.call(T(t),this[0]):r.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return p(t,"parentNode")},parentsUntil:function(t,e,n){return p(t,"parentNode",n)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return p(t,"nextSibling")},prevAll:function(t){return p(t,"previousSibling")},nextUntil:function(t,e,n){return p(t,"nextSibling",n)},prevUntil:function(t,e,n){return p(t,"previousSibling",n)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(E(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},function(i,r){T.fn[i]=function(t,e){var n=T.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=T.filter(e,n)),1<this.length&&(A[i]||T.uniqueSort(n),D.test(i)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function L(t){return t}function q(t){throw t}function j(t,e,n,i){var r;try{t&&_(r=t.promise)?r.call(t).done(e).fail(n):t&&_(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}T.Callbacks=function(i){i="string"==typeof i?function(t){var n={};return T.each(t.match(R)||[],function(t,e){n[e]=!0}),n}(i):T.extend({},i);function n(){for(s=s||i.once,e=r=!0;a.length;l=-1)for(t=a.shift();++l<o.length;)!1===o[l].apply(t[0],t[1])&&i.stopOnFalse&&(l=o.length,t=!1);i.memory||(t=!1),r=!1,s&&(o=t?[]:"")}var r,t,e,s,o=[],a=[],l=-1,u={add:function(){return o&&(t&&!r&&(l=o.length-1,a.push(t)),function n(t){T.each(t,function(t,e){_(e)?i.unique&&u.has(e)||o.push(e):e&&e.length&&"string"!==w(e)&&n(e)})}(arguments),t&&!r&&n()),this},remove:function(){return T.each(arguments,function(t,e){for(var n;-1<(n=T.inArray(e,o,n));)o.splice(n,1),n<=l&&l--}),this},has:function(t){return t?-1<T.inArray(t,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return s=a=[],o=t="",this},disabled:function(){return!o},lock:function(){return s=a=[],t||r||(o=t=""),this},locked:function(){return!!s},fireWith:function(t,e){return s||(e=[t,(e=e||[]).slice?e.slice():e],a.push(e),r||n()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!e}};return u},T.extend({Deferred:function(t){var s=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var r=arguments;return T.Deferred(function(i){T.each(s,function(t,e){var n=_(r[e[4]])&&r[e[4]];a[e[1]](function(){var t=n&&n.apply(this,arguments);t&&_(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this,n?[t]:arguments)})}),r=null}).promise()},then:function(e,n,i){var l=0;function u(r,s,o,a){return function(){function t(){var t,e;if(!(r<l)){if((t=o.apply(n,i))===s.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"===(void 0===t?"undefined":_typeof(t))||"function"==typeof t)&&t.then,_(e)?a?e.call(t,u(l,s,L,a),u(l,s,q,a)):(l++,e.call(t,u(l,s,L,a),u(l,s,q,a),u(l,s,L,s.notifyWith))):(o!==L&&(n=void 0,i=[t]),(a||s.resolveWith)(n,i))}}var n=this,i=arguments,e=a?t:function(){try{t()}catch(t){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(t,e.stackTrace),l<=r+1&&(o!==q&&(n=void 0,i=[t]),s.rejectWith(n,i))}};r?e():(T.Deferred.getStackHook&&(e.stackTrace=T.Deferred.getStackHook()),k.setTimeout(e))}}return T.Deferred(function(t){s[0][3].add(u(0,t,_(i)?i:L,t.notifyWith)),s[1][3].add(u(0,t,_(e)?e:L)),s[2][3].add(u(0,t,_(n)?n:q))}).promise()},promise:function(t){return null!=t?T.extend(t,o):o}},a={};return T.each(s,function(t,e){var n=e[2],i=e[5];o[e[1]]=n.add,i&&n.add(function(){r=i},s[3-t][2].disable,s[3-t][3].disable,s[0][2].lock,s[0][3].lock),n.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=n.fireWith}),o.promise(a),t&&t.call(a,a),a},when:function(t){function e(e){return function(t){r[e]=this,s[e]=1<arguments.length?a.call(arguments):t,--n||o.resolveWith(r,s)}}var n=arguments.length,i=n,r=Array(i),s=a.call(arguments),o=T.Deferred();if(n<=1&&(j(t,o.done(e(i)).resolve,o.reject,!n),"pending"===o.state()||_(s[i]&&s[i].then)))return o.then();for(;i--;)j(s[i],e(i),o.reject);return o.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){k.console&&k.console.warn&&t&&z.test(t.name)&&k.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){k.setTimeout(function(){throw t})};var F=T.Deferred();function H(){x.removeEventListener("DOMContentLoaded",H),k.removeEventListener("load",H),T.ready()}T.fn.ready=function(t){return F.then(t).catch(function(t){T.readyException(t)}),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0)!==t&&0<--T.readyWait||F.resolveWith(x,[T])}}),T.ready.then=F.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?k.setTimeout(T.ready):(x.addEventListener("DOMContentLoaded",H),k.addEventListener("load",H));function B(t,e,n,i,r,s,o){var a=0,l=t.length,u=null==n;if("object"===w(n))for(a in r=!0,n)B(t,e,a,n[a],!0,s,o);else if(void 0!==i&&(r=!0,_(i)||(o=!0),u&&(e=o?(e.call(t,i),null):(u=e,function(t,e,n){return u.call(T(t),n)})),e))for(;a<l;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:u?e.call(t):l?e(t[0],n):s}var U=/^-ms-/,$=/-([a-z])/g;function W(t,e){return e.toUpperCase()}function V(t){return t.replace(U,"ms-").replace($,W)}function Y(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function K(){this.expando=T.expando+K.uid++}K.uid=1,K.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Y(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[V(e)]=n;else for(i in e)r[V(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][V(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(V):(e=V(e))in i?[e]:e.match(R)||[]).length;for(;n--;)delete i[e[n]]}void 0!==e&&!T.isEmptyObject(i)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var G=new K,Q=new K,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,X=/[A-Z]/g;function Z(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(X,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:J.test(t)?JSON.parse(t):t)}(n)}catch(t){}Q.set(t,e,n)}else n=void 0;return n}T.extend({hasData:function(t){return Q.hasData(t)||G.hasData(t)},data:function(t,e,n){return Q.access(t,e,n)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,n){return G.access(t,e,n)},_removeData:function(t,e){G.remove(t,e)}}),T.fn.extend({data:function(n,t){var e,i,r,s=this[0],o=s&&s.attributes;if(void 0!==n)return"object"===(void 0===n?"undefined":_typeof(n))?this.each(function(){Q.set(this,n)}):B(this,function(t){var e;if(s&&void 0===t)return void 0!==(e=Q.get(s,n))?e:void 0!==(e=Z(s,n))?e:void 0;this.each(function(){Q.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(r=Q.get(s),1===s.nodeType&&!G.get(s,"hasDataAttrs"))){for(e=o.length;e--;)o[e]&&0===(i=o[e].name).indexOf("data-")&&(i=V(i.slice(5)),Z(s,i,r[i]));G.set(s,"hasDataAttrs",!0)}return r},removeData:function(t){return this.each(function(){Q.remove(this,t)})}}),T.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=G.get(t,e),n&&(!i||Array.isArray(n)?i=G.access(t,e,T.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=T.queue(t,e),i=n.length,r=n.shift(),s=T._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,function(){T.dequeue(t,e)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return G.get(t,n)||G.access(t,n,{empty:T.Callbacks("once memory").add(function(){G.remove(t,[e+"queue",n])})})}}),T.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?T.queue(this[0],e):void 0===n?this:this.each(function(){var t=T.queue(this,e,n);T._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&T.dequeue(this,e)})},dequeue:function(t){return this.each(function(){T.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--r||s.resolveWith(o,[o])}var i,r=1,s=T.Deferred(),o=this,a=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(i=G.get(o[a],t+"queueHooks"))&&i.empty&&(r++,i.empty.add(n));return n(),s.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],it=x.documentElement,rt=function(t){return T.contains(t.ownerDocument,t)},st={composed:!0};it.getRootNode&&(rt=function(t){return T.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});function ot(t,e,n,i){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];for(s in r=n.apply(t,i||[]),e)t.style[s]=o[s];return r}var at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&rt(t)&&"none"===T.css(t,"display")};function lt(t,e,n,i){var r,s,o=20,a=i?function(){return i.cur()}:function(){return T.css(t,e,"")},l=a(),u=n&&n[3]||(T.cssNumber[e]?"":"px"),c=t.nodeType&&(T.cssNumber[e]||"px"!==u&&+l)&&et.exec(T.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;o--;)T.style(t,e,c+u),(1-s)*(1-(s=a()/l||.5))<=0&&(o=0),c/=s;c*=2,T.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}var ut={};function ct(t,e){for(var n,i,r,s,o,a,l,u=[],c=0,h=t.length;c<h;c++)(i=t[c]).style&&(n=i.style.display,e?("none"===n&&(u[c]=G.get(i,"display")||null,u[c]||(i.style.display="")),""===i.style.display&&at(i)&&(u[c]=(l=o=s=void 0,o=(r=i).ownerDocument,a=r.nodeName,(l=ut[a])||(s=o.body.appendChild(o.createElement(a)),l=T.css(s,"display"),s.parentNode.removeChild(s),"none"===l&&(l="block"),ut[a]=l)))):"none"!==n&&(u[c]="none",G.set(i,"display",n)));for(c=0;c<h;c++)null!=u[c]&&(t[c].style.display=u[c]);return t}T.fn.extend({show:function(){return ct(this,!0)},hide:function(){return ct(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){at(this)?T(this).show():T(this).hide()})}});var ht=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,dt=/^$|^module$|\/(?:java|ecma)script/i,pt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function gt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&E(t,e)?T.merge([t],n):n}function mt(t,e){for(var n=0,i=t.length;n<i;n++)G.set(t[n],"globalEval",!e||G.get(e[n],"globalEval"))}pt.optgroup=pt.option,pt.tbody=pt.tfoot=pt.colgroup=pt.caption=pt.thead,pt.th=pt.td;var vt,yt,_t=/<|&#?\w+;/;function bt(t,e,n,i,r){for(var s,o,a,l,u,c,h=e.createDocumentFragment(),f=[],d=0,p=t.length;d<p;d++)if((s=t[d])||0===s)if("object"===w(s))T.merge(f,s.nodeType?[s]:s);else if(_t.test(s)){for(o=o||h.appendChild(e.createElement("div")),a=(ft.exec(s)||["",""])[1].toLowerCase(),l=pt[a]||pt._default,o.innerHTML=l[1]+T.htmlPrefilter(s)+l[2],c=l[0];c--;)o=o.lastChild;T.merge(f,o.childNodes),(o=h.firstChild).textContent=""}else f.push(e.createTextNode(s));for(h.textContent="",d=0;s=f[d++];)if(i&&-1<T.inArray(s,i))r&&r.push(s);else if(u=rt(s),o=gt(h.appendChild(s),"script"),u&&mt(o),n)for(c=0;s=o[c++];)dt.test(s.type||"")&&n.push(s);return h}vt=x.createDocumentFragment().appendChild(x.createElement("div")),(yt=x.createElement("input")).setAttribute("type","radio"),yt.setAttribute("checked","checked"),yt.setAttribute("name","t"),vt.appendChild(yt),y.checkClone=vt.cloneNode(!0).cloneNode(!0).lastChild.checked,vt.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!vt.cloneNode(!0).lastChild.defaultValue;var wt=/^key/,Ct=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,kt=/^([^.]*)(?:\.(.+)|)/;function xt(){return!0}function Tt(){return!1}function St(t,e){return t===function(){try{return x.activeElement}catch(t){}}()==("focus"===e)}function Et(t,e,n,i,r,s){var o,a;if("object"===(void 0===e?"undefined":_typeof(e))){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)Et(t,a,n,i,e[a],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Tt;else if(!r)return t;return 1===s&&(o=r,(r=function(t){return T().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=T.guid++)),t.each(function(){T.event.add(this,e,r,i,n)})}function Ot(t,r,s){s?(G.set(t,r,!1),T.event.add(t,r,{namespace:!1,handler:function(t){var e,n,i=G.get(this,r);if(1&t.isTrigger&&this[r]){if(i.length)(T.event.special[r]||{}).delegateType&&t.stopPropagation();else if(i=a.call(arguments),G.set(this,r,i),e=s(this,r),this[r](),i!==(n=G.get(this,r))||e?G.set(this,r,!1):n={},i!==n)return t.stopImmediatePropagation(),t.preventDefault(),n.value}else i.length&&(G.set(this,r,{value:T.event.trigger(T.extend(i[0],T.Event.prototype),i.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===G.get(t,r)&&T.event.add(t,r,xt)}T.event={global:{},add:function(e,t,n,i,r){var s,o,a,l,u,c,h,f,d,p,g,m=G.get(e);if(m)for(n.handler&&(n=(s=n).handler,r=s.selector),r&&T.find.matchesSelector(it,r),n.guid||(n.guid=T.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(R)||[""]).length;u--;)d=g=(a=kt.exec(t[u])||[])[1],p=(a[2]||"").split(".").sort(),d&&(h=T.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,h=T.event.special[d]||{},c=T.extend({type:d,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&T.expr.match.needsContext.test(r),namespace:p.join(".")},s),(f=l[d])||((f=l[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,p,o)||e.addEventListener&&e.addEventListener(d,o)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),T.event.global[d]=!0)},remove:function(t,e,n,i,r){var s,o,a,l,u,c,h,f,d,p,g,m=G.hasData(t)&&G.get(t);if(m&&(l=m.events)){for(u=(e=(e||"").match(R)||[""]).length;u--;)if(d=g=(a=kt.exec(e[u])||[])[1],p=(a[2]||"").split(".").sort(),d){for(h=T.event.special[d]||{},f=l[d=(i?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=f.length;s--;)c=f[s],!r&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(f.splice(s,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));o&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,p,m.handle)||T.removeEvent(t,d,m.handle),delete l[d])}else for(d in l)T.event.remove(t,d+e[u],n,i,!0);T.isEmptyObject(l)&&G.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,s,o,a=T.event.fix(t),l=new Array(arguments.length),u=(G.get(this,"events")||{})[a.type]||[],c=T.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(o=T.event.handlers.call(this,a,u),e=0;(r=o[e++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==s.namespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,void 0!==(i=((T.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,r,s,o,a=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(s=[],o={},n=0;n<l;n++)void 0===o[r=(i=e[n]).selector+" "]&&(o[r]=i.needsContext?-1<T(r,this).index(u):T.find(r,this,null,[u]).length),o[r]&&s.push(i);s.length&&a.push({elem:u,handlers:s})}return u=this,l<e.length&&a.push({elem:u,handlers:e.slice(l)}),a},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:_(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ht.test(e.type)&&e.click&&E(e,"input")&&Ot(e,"click",xt),!1},trigger:function(t){var e=this||t;return ht.test(e.type)&&e.click&&E(e,"input")&&Ot(e,"click"),!0},_default:function(t){var e=t.target;return ht.test(e.type)&&e.click&&E(e,"input")&&G.get(e,"click")||E(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?xt:Tt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Tt,isPropagationStopped:Tt,isImmediatePropagationStopped:Tt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=xt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=xt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=xt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Ct.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},function(t,e){T.event.special[t]={setup:function(){return Ot(this,t,St),!1},trigger:function(){return Ot(this,t),!0},delegateType:e}}),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){T.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||T.contains(this,n))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=r),e}}}),T.fn.extend({on:function(t,e,n,i){return Et(this,t,e,n,i)},one:function(t,e,n,i){return Et(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,T(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!==(void 0===t?"undefined":_typeof(t)))return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Tt),this.each(function(){T.event.remove(this,t,n,e)});for(r in t)this.off(r,e,t[r]);return this}});var Pt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Nt=/<script|<style|<link/i,Mt=/checked\s*(?:[^=]|=\s*.checked.)/i,Dt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function At(t,e){return E(t,"table")&&E(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Rt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Lt(t,e){var n,i,r,s,o,a,l,u;if(1===e.nodeType){if(G.hasData(t)&&(s=G.access(t),o=G.set(e,s),u=s.events))for(r in delete o.handle,o.events={},u)for(n=0,i=u[r].length;n<i;n++)T.event.add(e,r,u[r][n]);Q.hasData(t)&&(a=Q.access(t),l=T.extend({},a),Q.set(e,l))}}function qt(n,i,r,s){i=m.apply([],i);var t,e,o,a,l,u,c=0,h=n.length,f=h-1,d=i[0],p=_(d);if(p||1<h&&"string"==typeof d&&!y.checkClone&&Mt.test(d))return n.each(function(t){var e=n.eq(t);p&&(i[0]=d.call(this,t,e.html())),qt(e,i,r,s)});if(h&&(e=(t=bt(i,n[0].ownerDocument,!1,n,s)).firstChild,1===t.childNodes.length&&(t=e),e||s)){for(a=(o=T.map(gt(t,"script"),It)).length;c<h;c++)l=t,c!==f&&(l=T.clone(l,!0,!0),a&&T.merge(o,gt(l,"script"))),r.call(n[c],l,c);if(a)for(u=o[o.length-1].ownerDocument,T.map(o,Rt),c=0;c<a;c++)l=o[c],dt.test(l.type||"")&&!G.access(l,"globalEval")&&T.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?T._evalUrl&&!l.noModule&&T._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):b(l.textContent.replace(Dt,""),l,u))}return n}function jt(t,e,n){for(var i,r=e?T.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||T.cleanData(gt(i)),i.parentNode&&(n&&rt(i)&&mt(gt(i,"script")),i.parentNode.removeChild(i));return t}T.extend({htmlPrefilter:function(t){return t.replace(Pt,"<$1></$2>")},clone:function(t,e,n){var i,r,s,o,a,l,u,c=t.cloneNode(!0),h=rt(t);if(!(y.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(o=gt(c),i=0,r=(s=gt(t)).length;i<r;i++)a=s[i],l=o[i],void 0,"input"===(u=l.nodeName.toLowerCase())&&ht.test(a.type)?l.checked=a.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=a.defaultValue);if(e)if(n)for(s=s||gt(t),o=o||gt(c),i=0,r=s.length;i<r;i++)Lt(s[i],o[i]);else Lt(t,c);return 0<(o=gt(c,"script")).length&&mt(o,!h&&gt(t,"script")),c},cleanData:function(t){for(var e,n,i,r=T.event.special,s=0;void 0!==(n=t[s]);s++)if(Y(n)){if(e=n[G.expando]){if(e.events)for(i in e.events)r[i]?T.event.remove(n,i):T.removeEvent(n,i,e.handle);n[G.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),T.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return B(this,function(t){return void 0===t?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return qt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||At(this,t).appendChild(t)})},prepend:function(){return qt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=At(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return qt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return qt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(gt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return T.clone(this,t,e)})},html:function(t){return B(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Nt.test(t)&&!pt[(ft.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(T.cleanData(gt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return qt(this,arguments,function(t){var e=this.parentNode;T.inArray(this,n)<0&&(T.cleanData(gt(this)),e&&e.replaceChild(t,this))},n)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,o){T.fn[t]=function(t){for(var e,n=[],i=T(t),r=i.length-1,s=0;s<=r;s++)e=s===r?this:this.clone(!0),T(i[s])[o](e),l.apply(n,e.get());return this.pushStack(n)}});var zt,Ft,Ht,Bt,Ut,$t,Wt,Vt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Yt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=k),e.getComputedStyle(t)},Kt=new RegExp(nt.join("|"),"i");function Gt(){if(Wt){$t.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Wt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild($t).appendChild(Wt);var t=k.getComputedStyle(Wt);zt="1%"!==t.top,Ut=12===Qt(t.marginLeft),Wt.style.right="60%",Bt=36===Qt(t.right),Ft=36===Qt(t.width),Wt.style.position="absolute",Ht=12===Qt(Wt.offsetWidth/3),it.removeChild($t),Wt=null}}function Qt(t){return Math.round(parseFloat(t))}function Jt(t,e,n){var i,r,s,o,a=t.style;return(n=n||Yt(t))&&(""!==(o=n.getPropertyValue(e)||n[e])||rt(t)||(o=T.style(t,e)),!y.pixelBoxStyles()&&Vt.test(o)&&Kt.test(e)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function Xt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}$t=x.createElement("div"),(Wt=x.createElement("div")).style&&(Wt.style.backgroundClip="content-box",Wt.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===Wt.style.backgroundClip,T.extend(y,{boxSizingReliable:function(){return Gt(),Ft},pixelBoxStyles:function(){return Gt(),Bt},pixelPosition:function(){return Gt(),zt},reliableMarginLeft:function(){return Gt(),Ut},scrollboxSize:function(){return Gt(),Ht}}));var Zt=["Webkit","Moz","ms"],te=x.createElement("div").style,ee={};function ne(t){var e=T.cssProps[t]||ee[t];return e||(t in te?t:ee[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Zt.length;n--;)if((t=Zt[n]+e)in te)return t}(t)||t)}var ie=/^(none|table(?!-c[ea]).+)/,re=/^--/,se={position:"absolute",visibility:"hidden",display:"block"},oe={letterSpacing:"0",fontWeight:"400"};function ae(t,e,n){var i=et.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function le(t,e,n,i,r,s){var o="width"===e?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=T.css(t,n+nt[o],!0,r)),i?("content"===n&&(l-=T.css(t,"padding"+nt[o],!0,r)),"margin"!==n&&(l-=T.css(t,"border"+nt[o]+"Width",!0,r))):(l+=T.css(t,"padding"+nt[o],!0,r),"padding"!==n?l+=T.css(t,"border"+nt[o]+"Width",!0,r):a+=T.css(t,"border"+nt[o]+"Width",!0,r));return!i&&0<=s&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-a-.5))||0),l}function ue(t,e,n){var i=Yt(t),r=(!y.boxSizingReliable()||n)&&"border-box"===T.css(t,"boxSizing",!1,i),s=r,o=Jt(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Vt.test(o)){if(!n)return o;o="auto"}return(!y.boxSizingReliable()&&r||"auto"===o||!parseFloat(o)&&"inline"===T.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===T.css(t,"boxSizing",!1,i),(s=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+le(t,e,n||(r?"border":"content"),s,i,o)+"px"}function ce(t,e,n,i,r){return new ce.prototype.init(t,e,n,i,r)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Jt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=V(e),l=re.test(e),u=t.style;if(l||(e=ne(a)),o=T.cssHooks[e]||T.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:u[e];"string"===(s=void 0===n?"undefined":_typeof(n))&&(r=et.exec(n))&&r[1]&&(n=lt(t,e,r),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=r&&r[3]||(T.cssNumber[a]?"":"px")),y.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,i){var r,s,o,a=V(e);return re.test(e)||(e=ne(a)),(o=T.cssHooks[e]||T.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=Jt(t,e,i)),"normal"===r&&e in oe&&(r=oe[e]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),T.each(["height","width"],function(t,l){T.cssHooks[l]={get:function(t,e,n){if(e)return!ie.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ue(t,l,n):ot(t,se,function(){return ue(t,l,n)})},set:function(t,e,n){var i,r=Yt(t),s=!y.scrollboxSize()&&"absolute"===r.position,o=(s||n)&&"border-box"===T.css(t,"boxSizing",!1,r),a=n?le(t,l,n,o,r):0;return o&&s&&(a-=Math.ceil(t["offset"+l[0].toUpperCase()+l.slice(1)]-parseFloat(r[l])-le(t,l,"border",!1,r)-.5)),a&&(i=et.exec(e))&&"px"!==(i[3]||"px")&&(t.style[l]=e,e=T.css(t,l)),ae(0,e,a)}}}),T.cssHooks.marginLeft=Xt(y.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Jt(t,"marginLeft"))||t.getBoundingClientRect().left-ot(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(r,s){T.cssHooks[r+s]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[r+nt[e]+s]=i[e]||i[e-2]||i[0];return n}},"margin"!==r&&(T.cssHooks[r+s].set=ae)}),T.fn.extend({css:function(t,e){return B(this,function(t,e,n){var i,r,s={},o=0;if(Array.isArray(e)){for(i=Yt(t),r=e.length;o<r;o++)s[e[o]]=T.css(t,e[o],!1,i);return s}return void 0!==n?T.style(t,e,n):T.css(t,e)},t,e,1<arguments.length)}}),((T.Tween=ce).prototype={constructor:ce,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(T.cssNumber[n]?"":"px")},cur:function(){var t=ce.propHooks[this.prop];return t&&t.get?t.get(this):ce.propHooks._default.get(this)},run:function(t){var e,n=ce.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ce.propHooks._default.set(this),this}}).init.prototype=ce.prototype,(ce.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||!T.cssHooks[t.prop]&&null==t.elem.style[ne(t.prop)]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ce.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=ce.prototype.init,T.fx.step={};var he,fe,de,pe,ge=/^(?:toggle|show|hide)$/,me=/queueHooks$/;function ve(){fe&&(!1===x.hidden&&k.requestAnimationFrame?k.requestAnimationFrame(ve):k.setTimeout(ve,T.fx.interval),T.fx.tick())}function ye(){return k.setTimeout(function(){he=void 0}),he=Date.now()}function _e(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=nt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function be(t,e,n){for(var i,r=(we.tweeners[e]||[]).concat(we.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,e,t))return i}function we(s,t,e){var n,o,i=0,r=we.prefilters.length,a=T.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=he||ye(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),i=0,r=u.tweens.length;i<r;i++)u.tweens[i].run(n);return a.notifyWith(s,[u,n,e]),n<1&&r?e:(r||a.notifyWith(s,[u,1,0]),a.resolveWith(s,[u]),!1)},u=a.promise({elem:s,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},e),originalProperties:t,originalOptions:e,startTime:he||ye(),duration:e.duration,tweens:[],createTween:function(t,e){var n=T.Tween(s,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(o)return this;for(o=!0;e<n;e++)u.tweens[e].run(1);return t?(a.notifyWith(s,[u,1,0]),a.resolveWith(s,[u,t])):a.rejectWith(s,[u,t]),this}}),c=u.props;for(!function(t,e){var n,i,r,s,o;for(n in t)if(r=e[i=V(n)],s=t[n],Array.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(o=T.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=r);else e[i]=r}(c,u.opts.specialEasing);i<r;i++)if(n=we.prefilters[i].call(u,s,c,u.opts))return _(n.stop)&&(T._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return T.map(c,be,u),_(u.opts.start)&&u.opts.start.call(s,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),T.fx.timer(T.extend(l,{elem:s,anim:u,queue:u.opts.queue})),u}T.Animation=T.extend(we,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return lt(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){for(var n,i=0,r=(t=_(t)?(e=t,["*"]):t.match(R)).length;i<r;i++)n=t[i],we.tweeners[n]=we.tweeners[n]||[],we.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,s,o,a,l,u,c,h="width"in e||"height"in e,f=this,d={},p=t.style,g=t.nodeType&&at(t),m=G.get(t,"fxshow");for(i in n.queue||(null==(o=T._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,T.queue(t,"fx").length||o.empty.fire()})})),e)if(r=e[i],ge.test(r)){if(delete e[i],s=s||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}d[i]=m&&m[i]||T.style(t,i)}if((l=!T.isEmptyObject(e))||!T.isEmptyObject(d))for(i in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=m&&m.display)&&(u=G.get(t,"display")),"none"===(c=T.css(t,"display"))&&(u?c=u:(ct([t],!0),u=t.style.display||u,c=T.css(t,"display"),ct([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===T.css(t,"float")&&(l||(f.done(function(){p.display=u}),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,d)l||(m?"hidden"in m&&(g=m.hidden):m=G.access(t,"fxshow",{display:u}),s&&(m.hidden=!g),g&&ct([t],!0),f.done(function(){for(i in g||ct([t]),G.remove(t,"fxshow"),d)T.style(t,i,d[i])})),l=be(g?m[i]:0,i,f),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?we.prefilters.unshift(t):we.prefilters.push(t)}}),T.speed=function(t,e,n){var i=t&&"object"===(void 0===t?"undefined":_typeof(t))?T.extend({},t):{complete:n||!n&&e||_(t)&&t,duration:t,easing:n&&e||e&&!_(e)&&e};return T.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in T.fx.speeds?i.duration=T.fx.speeds[i.duration]:i.duration=T.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){_(i.old)&&i.old.call(this),i.queue&&T.dequeue(this,i.queue)},i},T.fn.extend({fadeTo:function(t,e,n,i){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){function r(){var t=we(this,T.extend({},e),o);(s||G.get(this,"finish"))&&t.stop(!0)}var s=T.isEmptyObject(e),o=T.speed(t,n,i);return r.finish=r,s||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(r,t,s){function o(t){var e=t.stop;delete t.stop,e(s)}return"string"!=typeof r&&(s=t,t=r,r=void 0),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=T.timers,i=G.get(this);if(e)i[e]&&i[e].stop&&o(i[e]);else for(e in i)i[e]&&i[e].stop&&me.test(e)&&o(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(s),t=!1,n.splice(e,1));!t&&s||T.dequeue(this,r)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var t,e=G.get(this),n=e[o+"queue"],i=e[o+"queueHooks"],r=T.timers,s=n?n.length:0;for(e.finish=!0,T.queue(this,o,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===o&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),T.each(["toggle","show","hide"],function(t,i){var r=T.fn[i];T.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(_e(i,!0),t,e,n)}}),T.each({slideDown:_e("show"),slideUp:_e("hide"),slideToggle:_e("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){T.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),T.timers=[],T.fx.tick=function(){var t,e=0,n=T.timers;for(he=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||T.fx.stop(),he=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){fe||(fe=!0,ve())},T.fx.stop=function(){fe=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(i,t){return i=T.fx&&T.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=k.setTimeout(t,i);e.stop=function(){k.clearTimeout(n)}})},de=x.createElement("input"),pe=x.createElement("select").appendChild(x.createElement("option")),de.type="checkbox",y.checkOn=""!==de.value,y.optSelected=pe.selected,(de=x.createElement("input")).value="t",de.type="radio",y.radioValue="t"===de.value;var Ce,ke=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return B(this,T.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){T.removeAttr(this,t)})}}),T.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?T.prop(t,e,n):(1===s&&T.isXMLDoc(t)||(r=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?Ce:void 0)),void 0!==n?null===n?void T.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=T.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!y.radioValue&&"radio"===e&&E(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(R);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),Ce={set:function(t,e,n){return!1===e?T.removeAttr(t,n):t.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),function(t,e){var o=ke[e]||T.find.attr;ke[e]=function(t,e,n){var i,r,s=e.toLowerCase();return n||(r=ke[s],ke[s]=i,i=null!=o(t,e,n)?s:null,ke[s]=r),i}});var xe=/^(?:input|select|textarea|button)$/i,Te=/^(?:a|area)$/i;function Se(t){return(t.match(R)||[]).join(" ")}function Ee(t){return t.getAttribute&&t.getAttribute("class")||""}function Oe(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(R)||[]}T.fn.extend({prop:function(t,e){return B(this,T.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[T.propFix[t]||t]})}}),T.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&T.isXMLDoc(t)||(e=T.propFix[e]||e,r=T.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):xe.test(t.nodeName)||Te.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(e){var t,n,i,r,s,o,a,l=0;if(_(e))return this.each(function(t){T(this).addClass(e.call(this,t,Ee(this)))});if((t=Oe(e)).length)for(;n=this[l++];)if(r=Ee(n),i=1===n.nodeType&&" "+Se(r)+" "){for(o=0;s=t[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");r!==(a=Se(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,r,s,o,a,l=0;if(_(e))return this.each(function(t){T(this).removeClass(e.call(this,t,Ee(this)))});if(!arguments.length)return this.attr("class","");if((t=Oe(e)).length)for(;n=this[l++];)if(r=Ee(n),i=1===n.nodeType&&" "+Se(r)+" "){for(o=0;s=t[o++];)for(;-1<i.indexOf(" "+s+" ");)i=i.replace(" "+s+" "," ");r!==(a=Se(i))&&n.setAttribute("class",a)}return this},toggleClass:function(r,e){var s=void 0===r?"undefined":_typeof(r),o="string"===s||Array.isArray(r);return"boolean"==typeof e&&o?e?this.addClass(r):this.removeClass(r):_(r)?this.each(function(t){T(this).toggleClass(r.call(this,t,Ee(this),e),e)}):this.each(function(){var t,e,n,i;if(o)for(e=0,n=T(this),i=Oe(r);t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==r&&"boolean"!==s||((t=Ee(this))&&G.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===r?"":G.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+Se(Ee(n))+" ").indexOf(e))return!0;return!1}});var Pe=/\r/g;T.fn.extend({val:function(n){var i,t,r,e=this[0];return arguments.length?(r=_(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?n.call(this,t,T(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=T.map(e,function(t){return null==t?"":t+""})),(i=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):e?(i=T.valHooks[e.type]||T.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(Pe,""):null==t?"":t:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:Se(T.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,o="select-one"===t.type,a=o?null:[],l=o?s+1:r.length;for(i=s<0?l:o?s:0;i<l;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!E(n.parentNode,"optgroup"))){if(e=T(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,s=T.makeArray(e),o=r.length;o--;)((i=r[o]).selected=-1<T.inArray(T.valHooks.option.get(i),s))&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<T.inArray(T(t).val(),e)}},y.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),y.focusin="onfocusin"in k;function Ne(t){t.stopPropagation()}var Me=/^(?:focusinfocus|focusoutblur)$/;T.extend(T.event,{trigger:function(t,e,n,i){var r,s,o,a,l,u,c,h,f=[n||x],d=v.call(t,"type")?t.type:t,p=v.call(t,"namespace")?t.namespace.split("."):[];if(s=h=o=n=n||x,3!==n.nodeType&&8!==n.nodeType&&!Me.test(d+T.event.triggered)&&(-1<d.indexOf(".")&&(d=(p=d.split(".")).shift(),p.sort()),l=d.indexOf(":")<0&&"on"+d,(t=t[T.expando]?t:new T.Event(d,"object"===(void 0===t?"undefined":_typeof(t))&&t)).isTrigger=i?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:T.makeArray(e,[t]),c=T.event.special[d]||{},i||!c.trigger||!1!==c.trigger.apply(n,e))){if(!i&&!c.noBubble&&!g(n)){for(a=c.delegateType||d,Me.test(a+d)||(s=s.parentNode);s;s=s.parentNode)f.push(s),o=s;o===(n.ownerDocument||x)&&f.push(o.defaultView||o.parentWindow||k)}for(r=0;(s=f[r++])&&!t.isPropagationStopped();)h=s,t.type=1<r?a:c.bindType||d,(u=(G.get(s,"events")||{})[t.type]&&G.get(s,"handle"))&&u.apply(s,e),(u=l&&s[l])&&u.apply&&Y(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(f.pop(),e)||!Y(n)||l&&_(n[d])&&!g(n)&&((o=n[l])&&(n[l]=null),T.event.triggered=d,t.isPropagationStopped()&&h.addEventListener(d,Ne),n[d](),t.isPropagationStopped()&&h.removeEventListener(d,Ne),T.event.triggered=void 0,o&&(n[l]=o)),t.result}},simulate:function(t,e,n){var i=T.extend(new T.Event,n,{type:t,isSimulated:!0});T.event.trigger(i,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each(function(){T.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return T.event.trigger(t,e,n,!0)}}),y.focusin||T.each({focus:"focusin",blur:"focusout"},function(n,i){function r(t){T.event.simulate(i,t.target,T.event.fix(t))}T.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=G.access(t,i);e||t.addEventListener(n,r,!0),G.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=G.access(t,i)-1;e?G.access(t,i,e):(t.removeEventListener(n,r,!0),G.remove(t,i))}}});var De=k.location,Ae=Date.now(),Ie=/\?/;T.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new k.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+t),e};var Re=/\[\]$/,Le=/\r?\n/g,qe=/^(?:submit|button|image|reset|file)$/i,je=/^(?:input|select|textarea|keygen)/i;function ze(n,t,i,r){var e;if(Array.isArray(t))T.each(t,function(t,e){i||Re.test(n)?r(n,e):ze(n+"["+("object"===(void 0===e?"undefined":_typeof(e))&&null!=e?t:"")+"]",e,i,r)});else if(i||"object"!==w(t))r(n,t);else for(e in t)ze(n+"["+e+"]",t[e],i,r)}T.param=function(t,e){function n(t,e){var n=_(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)}var i,r=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,function(){n(this.name,this.value)});else for(i in t)ze(i,t[i],e,n);return r.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&je.test(this.nodeName)&&!qe.test(t)&&(this.checked||!ht.test(t))}).map(function(t,e){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,function(t){return{name:e.name,value:t.replace(Le,"\r\n")}}):{name:e.name,value:n.replace(Le,"\r\n")}}).get()}});var Fe=/%20/g,He=/#.*$/,Be=/([?&])_=[^&]*/,Ue=/^(.*?):[ \t]*([^\r\n]*)$/gm,$e=/^(?:GET|HEAD)$/,We=/^\/\//,Ve={},Ye={},Ke="*/".concat("*"),Ge=x.createElement("a");function Qe(s){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(R)||[];if(_(e))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(s[n]=s[n]||[]).unshift(e)):(s[n]=s[n]||[]).push(e)}}function Je(e,r,s,o){var a={},l=e===Ye;function u(t){var i;return a[t]=!0,T.each(e[t]||[],function(t,e){var n=e(r,s,o);return"string"!=typeof n||l||a[n]?l?!(i=n):void 0:(r.dataTypes.unshift(n),u(n),!1)}),i}return u(r.dataTypes[0])||!a["*"]&&u("*")}function Xe(t,e){var n,i,r=T.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&T.extend(!0,t,i),t}Ge.href=De.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:De.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(De.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ke,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Xe(Xe(t,T.ajaxSettings),e):Xe(T.ajaxSettings,t)},ajaxPrefilter:Qe(Ve),ajaxTransport:Qe(Ye),ajax:function(t,e){"object"===(void 0===t?"undefined":_typeof(t))&&(e=t,t=void 0),e=e||{};var c,h,f,n,d,i,p,g,r,s,m=T.ajaxSetup({},e),v=m.context||m,y=m.context&&(v.nodeType||v.jquery)?T(v):T.event,_=T.Deferred(),b=T.Callbacks("once memory"),w=m.statusCode||{},o={},a={},l="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(p){if(!n)for(n={};e=Ue.exec(f);)n[e[1].toLowerCase()+" "]=(n[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=n[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return p?f:null},setRequestHeader:function(t,e){return null==p&&(t=a[t.toLowerCase()]=a[t.toLowerCase()]||t,o[t]=e),this},overrideMimeType:function(t){return null==p&&(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(p)C.always(t[C.status]);else for(e in t)w[e]=[w[e],t[e]];return this},abort:function(t){var e=t||l;return c&&c.abort(e),u(0,e),this}};if(_.promise(C),m.url=((t||m.url||De.href)+"").replace(We,De.protocol+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(R)||[""],null==m.crossDomain){i=x.createElement("a");try{i.href=m.url,i.href=i.href,m.crossDomain=Ge.protocol+"//"+Ge.host!=i.protocol+"//"+i.host}catch(t){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=T.param(m.data,m.traditional)),Je(Ve,m,e,C),p)return C;for(r in(g=T.event&&m.global)&&0==T.active++&&T.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!$e.test(m.type),h=m.url.replace(He,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Fe,"+")):(s=m.url.slice(h.length),m.data&&(m.processData||"string"==typeof m.data)&&(h+=(Ie.test(h)?"&":"?")+m.data,delete m.data),!1===m.cache&&(h=h.replace(Be,"$1"),s=(Ie.test(h)?"&":"?")+"_="+Ae+++s),m.url=h+s),m.ifModified&&(T.lastModified[h]&&C.setRequestHeader("If-Modified-Since",T.lastModified[h]),T.etag[h]&&C.setRequestHeader("If-None-Match",T.etag[h])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&C.setRequestHeader("Content-Type",m.contentType),C.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ke+"; q=0.01":""):m.accepts["*"]),m.headers)C.setRequestHeader(r,m.headers[r]);if(m.beforeSend&&(!1===m.beforeSend.call(v,C,m)||p))return C.abort();if(l="abort",b.add(m.complete),C.done(m.success),C.fail(m.error),c=Je(Ye,m,e,C)){if(C.readyState=1,g&&y.trigger("ajaxSend",[C,m]),p)return C;m.async&&0<m.timeout&&(d=k.setTimeout(function(){C.abort("timeout")},m.timeout));try{p=!1,c.send(o,u)}catch(t){if(p)throw t;u(-1,t)}}else u(-1,"No Transport");function u(t,e,n,i){var r,s,o,a,l,u=e;p||(p=!0,d&&k.clearTimeout(d),c=void 0,f=i||"",C.readyState=0<t?4:0,r=200<=t&&t<300||304===t,n&&(a=function(t,e,n){for(var i,r,s,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),n[s]}(m,C,n)),a=function(t,e,n,i){var r,s,o,a,l,u={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)u[o.toLowerCase()]=t.converters[o];for(s=c.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=u[l+" "+s]||u["* "+s]))for(r in u)if((a=r.split(" "))[1]===s&&(o=u[l+" "+a[0]]||u["* "+a[0]])){!0===o?o=u[r]:!0!==u[r]&&(s=a[0],c.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(m,a,C,r),r?(m.ifModified&&((l=C.getResponseHeader("Last-Modified"))&&(T.lastModified[h]=l),(l=C.getResponseHeader("etag"))&&(T.etag[h]=l)),204===t||"HEAD"===m.type?u="nocontent":304===t?u="notmodified":(u=a.state,s=a.data,r=!(o=a.error))):(o=u,!t&&u||(u="error",t<0&&(t=0))),C.status=t,C.statusText=(e||u)+"",r?_.resolveWith(v,[s,u,C]):_.rejectWith(v,[C,u,o]),C.statusCode(w),w=void 0,g&&y.trigger(r?"ajaxSuccess":"ajaxError",[C,m,r?s:o]),b.fireWith(v,[C,u]),g&&(y.trigger("ajaxComplete",[C,m]),--T.active||T.event.trigger("ajaxStop")))}return C},getJSON:function(t,e,n){return T.get(t,e,n,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],function(t,r){T[r]=function(t,e,n,i){return _(e)&&(i=i||n,n=e,e=void 0),T.ajax(T.extend({url:t,type:r,dataType:i,data:e,success:n},T.isPlainObject(t)&&t))}}),T._evalUrl=function(t,e){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){T.globalEval(t,e)}})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(_(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return _(n)?this.each(function(t){T(this).wrapInner(n.call(this,t))}):this.each(function(){var t=T(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=_(e);return this.each(function(t){T(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new k.XMLHttpRequest}catch(t){}};var Ze={0:200,1223:204},tn=T.ajaxSettings.xhr();y.cors=!!tn&&"withCredentials"in tn,y.ajax=tn=!!tn,T.ajaxTransport(function(r){var s,o;if(y.cors||tn&&!r.crossDomain)return{send:function(t,e){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);s=function(t){return function(){s&&(s=o=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===t?i.abort():"error"===t?"number"!=typeof i.status?e(0,"error"):e(i.status,i.statusText):e(Ze[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=s(),o=i.onerror=i.ontimeout=s("error"),void 0!==i.onabort?i.onabort=o:i.onreadystatechange=function(){4===i.readyState&&k.setTimeout(function(){s&&o()})},s=s("abort");try{i.send(r.hasContent&&r.data||null)}catch(t){if(s)throw t}},abort:function(){s&&s()}}}),T.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),T.ajaxTransport("script",function(n){var i,r;if(n.crossDomain||n.scriptAttrs)return{send:function(t,e){i=T("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(t){i.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),x.head.appendChild(i[0])},abort:function(){r&&r()}}});var en,nn=[],rn=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=nn.pop()||T.expando+"_"+Ae++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,s,o=!1!==t.jsonp&&(rn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&rn.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=_(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(rn,"$1"+i):!1!==t.jsonp&&(t.url+=(Ie.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||T.error(i+" was not called"),s[0]},t.dataTypes[0]="json",r=k[i],k[i]=function(){s=arguments},n.always(function(){void 0===r?T(k).removeProp(i):k[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,nn.push(i)),s&&_(r)&&r(s[0]),s=r=void 0}),"script"}),y.createHTMLDocument=((en=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),T.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(y.createHTMLDocument?((i=(e=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,e.head.appendChild(i)):e=x),s=!n&&[],(r=O.exec(t))?[e.createElement(r[1])]:(r=bt([t],e,s),s&&s.length&&T(s).remove(),T.merge([],r.childNodes)));var i,r,s},T.fn.load=function(t,e,n){var i,r,s,o=this,a=t.indexOf(" ");return-1<a&&(i=Se(t.slice(a)),t=t.slice(0,a)),_(e)?(n=e,e=void 0):e&&"object"===(void 0===e?"undefined":_typeof(e))&&(r="POST"),0<o.length&&T.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){s=arguments,o.html(i?T("<div>").append(T.parseHTML(t)).find(i):t)}).always(n&&function(t,e){o.each(function(){n.apply(this,s||[t.responseText,e,t])})}),this},T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){T.fn[e]=function(t){return this.on(e,t)}}),T.expr.pseudos.animated=function(e){return T.grep(T.timers,function(t){return e===t.elem}).length},T.offset={setOffset:function(t,e,n){var i,r,s,o,a,l,u=T.css(t,"position"),c=T(t),h={};"static"===u&&(t.style.position="relative"),a=c.offset(),s=T.css(t,"top"),l=T.css(t,"left"),r=("absolute"===u||"fixed"===u)&&-1<(s+l).indexOf("auto")?(o=(i=c.position()).top,i.left):(o=parseFloat(s)||0,parseFloat(l)||0),_(e)&&(e=e.call(t,n,T.extend({},a))),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):c.css(h)}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){T.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===T.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),r.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-T.css(i,"marginTop",!0),left:e.left-r.left-T.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||it})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var s="pageYOffset"===r;T.fn[e]=function(t){return B(this,function(t,e,n){var i;if(g(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===n)return i?i[r]:t[e];i?i.scrollTo(s?i.pageXOffset:n,s?n:i.pageYOffset):t[e]=n},e,t,arguments.length)}}),T.each(["top","left"],function(t,n){T.cssHooks[n]=Xt(y.pixelPosition,function(t,e){if(e)return e=Jt(t,n),Vt.test(e)?T(t).position()[n]+"px":e})}),T.each({Height:"height",Width:"width"},function(o,a){T.each({padding:"inner"+o,content:a,"":"outer"+o},function(i,s){T.fn[s]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),r=i||(!0===t||!0===e?"margin":"border");return B(this,function(t,e,n){var i;return g(t)?0===s.indexOf("outer")?t["inner"+o]:t.document.documentElement["client"+o]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+o],i["scroll"+o],t.body["offset"+o],i["offset"+o],i["client"+o])):void 0===n?T.css(t,e,r):T.style(t,e,n,r)},a,n?t:void 0,n)}})}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){T.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),T.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),T.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),_(t))return i=a.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(a.call(arguments)))}).guid=t.guid=t.guid||T.guid++,r},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=E,T.isFunction=_,T.isWindow=g,T.camelCase=V,T.type=w,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))};var sn=k.jQuery,on=k.$;return T.noConflict=function(t){return k.$===T&&(k.$=on),t&&k.jQuery===T&&(k.jQuery=sn),T},t||(k.jQuery=k.$=T),T},"object"===(void 0===e?"undefined":_typeof(e))&&"object"===_typeof(e.exports)?e.exports=i.document?r(i,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return r(t)}:r(i)},{}],257:[function(t,W,e){(function(o){var s={},a=s.LEFT_BRACE=1,l=s.RIGHT_BRACE=2,u=s.LEFT_BRACKET=3,c=s.RIGHT_BRACKET=4,h=s.COLON=5,f=s.COMMA=6,d=s.TRUE=7,p=s.FALSE=8,g=s.NULL=9,m=s.STRING=10,v=s.NUMBER=11,y=s.START=17,_=s.TRUE1=33,b=s.TRUE2=34,w=s.TRUE3=35,C=s.FALSE1=49,k=s.FALSE2=50,x=s.FALSE3=51,T=s.FALSE4=52,S=s.NULL1=65,E=s.NULL3=66,O=s.NULL2=67,P=s.NUMBER1=81,N=s.NUMBER2=82,M=s.NUMBER3=83,D=s.NUMBER4=84,A=s.NUMBER5=85,I=s.NUMBER6=86,R=s.NUMBER7=87,L=s.NUMBER8=88,q=s.STRING1=97,j=s.STRING2=98,z=s.STRING3=99,F=s.STRING4=100,H=s.STRING5=101,B=s.STRING6=102,n=s.VALUE=113,i=s.KEY=114,r=s.OBJECT=129,U=s.ARRAY=130;function $(t){for(var e=Object.keys(s),n=0,i=e.length;n<i;n++){var r=e[n];if(s[r]===t)return r}return t&&"0x"+t.toString(16)}function t(){this.tState=y,this.value=void 0,this.string=void 0,this.unicode=void 0,this.negative=void 0,this.magnatude=void 0,this.position=void 0,this.exponent=void 0,this.negativeExponent=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=n,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new o(2),3:new o(3),4:new o(4)}}var e=t.prototype;e.charError=function(t,e){this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+$(this.tState)))},e.onError=function(t){throw t},e.write=function(t){var e;"string"==typeof t&&(t=new o(t));for(var n=0,i=t.length;n<i;n++)if(this.tState===y)123===(e=t[n])?this.onToken(a,"{"):125===e?this.onToken(l,"}"):91===e?this.onToken(u,"["):93===e?this.onToken(c,"]"):58===e?this.onToken(h,":"):44===e?this.onToken(f,","):116===e?this.tState=_:102===e?this.tState=C:110===e?this.tState=S:34===e?(this.string="",this.tState=q):45===e?(this.negative=!0,this.tState=P):48===e?(this.magnatude=0,this.tState=N):48<e&&e<64?(this.magnatude=e-48,this.tState=M):32===e||9===e||10===e||13===e||this.charError(t,n);else if(this.tState===q)if(e=t[n],0<this.bytes_remaining){for(var r=0;r<this.bytes_remaining;r++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+r]=t[r];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,n=n+r-1}else if(0===this.bytes_remaining&&128<=e)if(194<=e&&e<=223&&(this.bytes_in_sequence=2),224<=e&&e<=239&&(this.bytes_in_sequence=3),240<=e&&e<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+n>t.length){for(var s=0;s<=t.length-1-n;s++)this.temp_buffs[this.bytes_in_sequence][s]=t[n+s];this.bytes_remaining=n+this.bytes_in_sequence-t.length,n=t.length-1}else this.string+=t.slice(n,n+this.bytes_in_sequence).toString(),n=n+this.bytes_in_sequence-1;else 34===e?(this.tState=y,this.onToken(m,this.string),this.string=void 0):92===e?this.tState=j:32<=e?this.string+=String.fromCharCode(e):this.charError(t,n);else this.tState===j?34===(e=t[n])?(this.string+='"',this.tState=q):92===e?(this.string+="\\",this.tState=q):47===e?(this.string+="/",this.tState=q):98===e?(this.string+="\b",this.tState=q):102===e?(this.string+="\f",this.tState=q):110===e?(this.string+="\n",this.tState=q):114===e?(this.string+="\r",this.tState=q):116===e?(this.string+="\t",this.tState=q):117===e?(this.unicode="",this.tState=z):this.charError(t,n):this.tState===z||this.tState===F||this.tState===H||this.tState===B?48<=(e=t[n])&&e<64||64<e&&e<=70||96<e&&e<=102?(this.unicode+=String.fromCharCode(e),this.tState++==B&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=q)):this.charError(t,n):this.tState===P?48===(e=t[n])?(this.magnatude=0,this.tState=N):48<e&&e<64?(this.magnatude=e-48,this.tState=M):this.charError(t,n):this.tState===N?46===(e=t[n])?(this.position=.1,this.tState=D):101===e||69===e?(this.exponent=0,this.tState=I):(this.tState=y,this.onToken(v,0),this.magnatude=void 0,this.negative=void 0,n--):this.tState===M?46===(e=t[n])?(this.position=.1,this.tState=D):101===e||69===e?(this.exponent=0,this.tState=I):48<=e&&e<64?this.magnatude=10*this.magnatude+e-48:(this.tState=y,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.magnatude),this.magnatude=void 0,n--):this.tState===D?48<=(e=t[n])&&e<64?(this.magnatude+=this.position*(e-48),this.position/=10,this.tState=A):this.charError(t,n):this.tState===A?48<=(e=t[n])&&e<64?(this.magnatude+=this.position*(e-48),this.position/=10):101===e||69===e?(this.exponent=0,this.tState=I):(this.tState=y,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.negative?-this.magnatude:this.magnatude),this.magnatude=void 0,this.position=void 0,n--):this.tState===I?43===(e=t[n])||45===e?(45===e&&(this.negativeExponent=!0),this.tState=R):48<=e&&e<64?(this.exponent=10*this.exponent+(e-48),this.tState=L):this.charError(t,n):this.tState===R?48<=(e=t[n])&&e<64?(this.exponent=10*this.exponent+(e-48),this.tState=L):this.charError(t,n):this.tState===L?48<=(e=t[n])&&e<64?this.exponent=10*this.exponent+(e-48):(this.negativeExponent&&(this.exponent=-this.exponent,this.negativeExponent=void 0),this.magnatude*=Math.pow(10,this.exponent),this.exponent=void 0,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.tState=y,this.onToken(v,this.magnatude),this.magnatude=void 0,n--):this.tState===_?114===t[n]?this.tState=b:this.charError(t,n):this.tState===b?117===t[n]?this.tState=w:this.charError(t,n):this.tState===w?101===t[n]?(this.tState=y,this.onToken(d,!0)):this.charError(t,n):this.tState===C?97===t[n]?this.tState=k:this.charError(t,n):this.tState===k?108===t[n]?this.tState=x:this.charError(t,n):this.tState===x?115===t[n]?this.tState=T:this.charError(t,n):this.tState===T?101===t[n]?(this.tState=y,this.onToken(p,!1)):this.charError(t,n):this.tState===S?117===t[n]?this.tState=E:this.charError(t,n):this.tState===E?108===t[n]?this.tState=O:this.charError(t,n):this.tState===O&&(108===t[n]?(this.tState=y,this.onToken(g,null)):this.charError(t,n))},e.onToken=function(t,e){},e.parseError=function(t,e){this.onError(new Error("Unexpected "+$(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+$(this.state)))},e.onError=function(t){throw t},e.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},e.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=n)},e.emit=function(t){this.mode&&(this.state=f),this.onValue(t)},e.onValue=function(t){},e.onToken=function(t,e){this.state===n?t===m||t===v||t===d||t===p||t===g?(this.value&&(this.value[this.key]=e),this.emit(e)):t===a?(this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=i,this.mode=r):t===u?(this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=U,this.state=n):t===l?this.mode===r?this.pop():this.parseError(t,e):t===c&&this.mode===U?this.pop():this.parseError(t,e):this.state===i?t===m?(this.key=e,this.state=h):t===l?this.pop():this.parseError(t,e):this.state===h?t===h?this.state=n:this.parseError(t,e):this.state===f?t===f?this.mode===U?(this.key++,this.state=n):this.mode===r&&(this.state=i):t===c&&this.mode===U||t===l&&this.mode===r?this.pop():this.parseError(t,e):this.parseError(t,e)},W.exports=t}).call(this,t("buffer").Buffer)},{buffer:266}],258:[function(t,e,n){var i,r;i=this,r=function(){var n=[],i=[],s={},r={},o={};function a(t){return"string"==typeof t?new RegExp("^"+t+"$","i"):t}function l(t,e){return t===e?e:t===t.toLowerCase()?e.toLowerCase():t===t.toUpperCase()?e.toUpperCase():t[0]===t[0].toUpperCase()?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():e.toLowerCase()}function u(i,r){return i.replace(r[0],function(t,e){var n=function(t,n){return t.replace(/\$(\d{1,2})/g,function(t,e){return n[e]||""})}(r[1],arguments);return l(""===t?i[e-1]:t,n)})}function c(t,e,n){if(!t.length||s.hasOwnProperty(t))return e;for(var i=n.length;i--;){var r=n[i];if(r[0].test(e))return u(e,r)}return e}function t(n,i,r){return function(t){var e=t.toLowerCase();return i.hasOwnProperty(e)?l(t,e):n.hasOwnProperty(e)?l(t,n[e]):c(e,t,r)}}function e(n,i,r){return function(t){var e=t.toLowerCase();return!!i.hasOwnProperty(e)||!n.hasOwnProperty(e)&&c(e,e,r)===e}}function h(t,e,n){return(n?e+" ":"")+(1===e?h.singular(t):h.plural(t))}return h.plural=t(o,r,n),h.isPlural=e(o,r,n),h.singular=t(r,o,i),h.isSingular=e(r,o,i),h.addPluralRule=function(t,e){n.push([a(t),e])},h.addSingularRule=function(t,e){i.push([a(t),e])},h.addUncountableRule=function(t){"string"!=typeof t?(h.addPluralRule(t,"$0"),h.addSingularRule(t,"$0")):s[t.toLowerCase()]=!0},h.addIrregularRule=function(t,e){e=e.toLowerCase(),t=t.toLowerCase(),o[t]=e,r[e]=t},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(t){return h.addIrregularRule(t[0],t[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(t){return h.addPluralRule(t[0],t[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(t){return h.addSingularRule(t[0],t[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h},"function"==typeof t&&"object"===(void 0===n?"undefined":_typeof(n))&&"object"===(void 0===e?"undefined":_typeof(e))?e.exports=r():i.pluralize=r()},{}],259:[function(t,n,i){(function(tt){var t,e;t=this,e=function(){for(var t="undefined"!=typeof window&&"undefined"!=typeof document,e=["Edge","Trident","Firefox"],n=0,i=0;i<e.length;i+=1)if(t&&0<=navigator.userAgent.indexOf(e[i])){n=1;break}var s=t&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},n))}};function o(t){return t&&"[object Function]"==={}.toString.call(t)}function b(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function p(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function g(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=b(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/(auto|scroll|overlay)/.test(n+r+i)?t:g(p(t))}var r=t&&!(!window.MSInputMethodContext||!document.documentMode),a=t&&/MSIE 10/.test(navigator.userAgent);function m(t){return 11===t?r:10===t?a:r||a}function _(t){if(!t)return document.documentElement;for(var e=m(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===b(n,"position")?_(n):n:t?t.ownerDocument.documentElement:document.documentElement}function l(t){return null!==t.parentNode?l(t.parentNode):t}function v(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?t:e,r=n?e:t,s=document.createRange();s.setStart(i,0),s.setEnd(r,0);var o=s.commonAncestorContainer;if(t!==o&&e!==o||i.contains(r))return function(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||_(t.firstElementChild)===t)}(o)?o:_(o);var a=l(t);return a.host?v(a.host,e):v(t,l(e).host)}function y(t,e){var n="top"===(1<arguments.length&&void 0!==e?e:"top")?"scrollTop":"scrollLeft",i=t.nodeName;if("BODY"!==i&&"HTML"!==i)return t[n];var r=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||r)[n]}function h(t,e){var n="x"===e?"Left":"Top",i="Left"==n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"],10)+parseFloat(t["border"+i+"Width"],10)}function u(t,e,n,i){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],m(10)?parseInt(n["offset"+t])+parseInt(i["margin"+("Height"===t?"Top":"Left")])+parseInt(i["margin"+("Height"===t?"Bottom":"Right")]):0)}function w(t){var e=t.body,n=t.documentElement,i=m(10)&&getComputedStyle(n);return{height:u("Height",e,n,i),width:u("Width",e,n,i)}}var c=function(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t};function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function x(t){return k({},t,{right:t.left+t.width,bottom:t.top+t.height})}function T(t){var e={};try{if(m(10)){e=t.getBoundingClientRect();var n=y(t,"top"),i=y(t,"left");e.top+=n,e.left+=i,e.bottom+=n,e.right+=i}else e=t.getBoundingClientRect()}catch(t){}var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},s="HTML"===t.nodeName?w(t.ownerDocument):{},o=s.width||t.clientWidth||r.right-r.left,a=s.height||t.clientHeight||r.bottom-r.top,l=t.offsetWidth-o,u=t.offsetHeight-a;if(l||u){var c=b(t);l-=h(c,"x"),u-=h(c,"y"),r.width-=l,r.height-=u}return x(r)}function S(t,e,n){var i=2<arguments.length&&void 0!==n&&n,r=m(10),s="HTML"===e.nodeName,o=T(t),a=T(e),l=g(t),u=b(e),c=parseFloat(u.borderTopWidth,10),h=parseFloat(u.borderLeftWidth,10);i&&s&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var f=x({top:o.top-a.top-c,left:o.left-a.left-h,width:o.width,height:o.height});if(f.marginTop=0,f.marginLeft=0,!r&&s){var d=parseFloat(u.marginTop,10),p=parseFloat(u.marginLeft,10);f.top-=c-d,f.bottom-=c-d,f.left-=h-p,f.right-=h-p,f.marginTop=d,f.marginLeft=p}return(r&&!i?e.contains(l):e===l&&"BODY"!==l.nodeName)&&(f=function(t,e,n){var i=2<arguments.length&&void 0!==n&&n,r=y(e,"top"),s=y(e,"left"),o=i?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=s*o,t.right+=s*o,t}(f,e)),f}function E(t){if(!t||!t.parentElement||m())return document.documentElement;for(var e=t.parentElement;e&&"none"===b(e,"transform");)e=e.parentElement;return e||document.documentElement}function d(t,e,n,i,r){var s=4<arguments.length&&void 0!==r&&r,o={top:0,left:0},a=s?E(t):v(t,e);if("viewport"===i)o=function(t,e){var n=1<arguments.length&&void 0!==e&&e,i=t.ownerDocument.documentElement,r=S(t,i),s=Math.max(i.clientWidth,window.innerWidth||0),o=Math.max(i.clientHeight,window.innerHeight||0),a=n?0:y(i),l=n?0:y(i,"left");return x({top:a-r.top+r.marginTop,left:l-r.left+r.marginLeft,width:s,height:o})}(a,s);else{var l=void 0;"scrollParent"===i?"BODY"===(l=g(p(e))).nodeName&&(l=t.ownerDocument.documentElement):l="window"===i?t.ownerDocument.documentElement:i;var u=S(l,a,s);if("HTML"!==l.nodeName||function t(e){var n=e.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===b(e,"position"))return!0;var i=p(e);return!!i&&t(i)}(a))o=u;else{var c=w(t.ownerDocument),h=c.height,f=c.width;o.top+=u.top-u.marginTop,o.bottom=h+u.top,o.left+=u.left-u.marginLeft,o.right=f+u.left}}var d="number"==typeof(n=n||0);return o.left+=d?n:n.left||0,o.top+=d?n:n.top||0,o.right-=d?n:n.right||0,o.bottom-=d?n:n.bottom||0,o}function O(t,e,i,n,r,s){var o=5<arguments.length&&void 0!==s?s:0;if(-1===t.indexOf("auto"))return t;var a=d(i,n,o,r),l={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},u=Object.keys(l).map(function(t){return k({key:t},l[t],{area:function(t){return t.width*t.height}(l[t])})}).sort(function(t,e){return e.area-t.area}),c=u.filter(function(t){var e=t.width,n=t.height;return e>=i.clientWidth&&n>=i.clientHeight}),h=0<c.length?c[0].key:u[0].key,f=t.split("-")[1];return h+(f?"-"+f:"")}function P(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:null;return S(n,r?E(e):v(e,n),r)}function N(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),i=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+i,height:t.offsetHeight+n}}function M(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function D(t,e,n){n=n.split("-")[0];var i=N(t),r={width:i.width,height:i.height},s=-1!==["right","left"].indexOf(n),o=s?"top":"left",a=s?"left":"top",l=s?"height":"width",u=s?"width":"height";return r[o]=e[o]+e[l]/2-i[l]/2,r[a]=n===a?e[a]-i[u]:e[M(a)],r}function A(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function I(t,n,e){return(void 0===e?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===n});var i=A(t,function(t){return t[e]===n});return t.indexOf(i)}(t,"name",e))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&o(e)&&(n.offsets.popper=x(n.offsets.popper),n.offsets.reference=x(n.offsets.reference),n=e(n,t))}),n}function R(t,n){return t.some(function(t){var e=t.name;return t.enabled&&e===n})}function L(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<e.length;i++){var r=e[i],s=r?""+r+n:t;if(void 0!==document.body.style[s])return s}return null}function q(t){var e=t.ownerDocument;return e?e.defaultView:window}function j(t,e,n,i){n.updateBound=i,q(t).addEventListener("resize",n.updateBound,{passive:!0});var r=g(t);return function t(e,n,i,r){var s="BODY"===e.nodeName,o=s?e.ownerDocument.defaultView:e;o.addEventListener(n,i,{passive:!0}),s||t(g(o.parentNode),n,i,r),r.push(o)}(r,"scroll",n.updateBound,n.scrollParents),n.scrollElement=r,n.eventsEnabled=!0,n}function z(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(t,e){return q(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}(this.reference,this.state))}function F(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function H(n,i){Object.keys(i).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&F(i[t])&&(e="px"),n.style[t]=i[t]+e})}var B=t&&/Firefox/i.test(navigator.userAgent);function U(t,e,n){var i=A(t,function(t){return t.name===e}),r=!!i&&t.some(function(t){return t.name===n&&t.enabled&&t.order<i.order});if(!r){var s="`"+e+"`",o="`"+n+"`";console.warn(o+" modifier is required by "+s+" modifier in order to work, be sure to include it before "+s+"!")}return r}var $=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],W=$.slice(3);function V(t,e){var n=1<arguments.length&&void 0!==e&&e,i=W.indexOf(t),r=W.slice(i+1).concat(W.slice(0,i));return n?r.reverse():r}var Y="flip",K="clockwise",G="counterclockwise";function Q(t,r,s,e){var o=[0,0],a=-1!==["right","left"].indexOf(e),n=t.split(/(\+|\-)/).map(function(t){return t.trim()}),i=n.indexOf(A(n,function(t){return-1!==t.search(/,|\s/)}));n[i]&&-1===n[i].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1!==i?[n.slice(0,i).concat([n[i].split(l)[0]]),[n[i].split(l)[1]].concat(n.slice(i+1))]:[n];return(u=u.map(function(t,e){var n=(1===e?!a:a)?"height":"width",i=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,i=!0,t):i?(t[t.length-1]+=e,i=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,n,i){var r=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),s=+r[1],o=r[2];if(!s)return t;if(0!==o.indexOf("%"))return"vh"!==o&&"vw"!==o?s:("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*s;var a=void 0;switch(o){case"%p":a=n;break;case"%":case"%r":default:a=i}return x(a)[e]/100*s}(t,n,r,s)})})).forEach(function(n,i){n.forEach(function(t,e){F(t)&&(o[i]+=t*("-"===n[e-1]?-1:1))})}),o}var J={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],i=e.split("-")[1];if(i){var r=t.offsets,s=r.reference,o=r.popper,a=-1!==["bottom","top"].indexOf(n),l=a?"left":"top",u=a?"width":"height",c={start:C({},l,s[l]),end:C({},l,s[l]+s[u]-o[u])};t.offsets.popper=k({},o,c[i])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,i=t.placement,r=t.offsets,s=r.popper,o=r.reference,a=i.split("-")[0],l=void 0;return l=F(+n)?[+n,0]:Q(n,s,o,a),"left"===a?(s.top+=l[0],s.left-=l[1]):"right"===a?(s.top+=l[0],s.left+=l[1]):"top"===a?(s.left+=l[0],s.top-=l[1]):"bottom"===a&&(s.left+=l[0],s.top+=l[1]),t.popper=s,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,i){var e=i.boundariesElement||_(t.instance.popper);t.instance.reference===e&&(e=_(e));var n=L("transform"),r=t.instance.popper.style,s=r.top,o=r.left,a=r[n];r.top="",r.left="",r[n]="";var l=d(t.instance.popper,t.instance.reference,i.padding,e,t.positionFixed);r.top=s,r.left=o,r[n]=a,i.boundaries=l;var u=i.priority,c=t.offsets.popper,h={primary:function(t){var e=c[t];return c[t]<l[t]&&!i.escapeWithReference&&(e=Math.max(c[t],l[t])),C({},t,e)},secondary:function(t){var e="right"===t?"left":"top",n=c[e];return c[t]>l[t]&&!i.escapeWithReference&&(n=Math.min(c[e],l[t]-("right"===t?c.width:c.height))),C({},e,n)}};return u.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";c=k({},c,h[e](t))}),t.offsets.popper=c,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,i=e.reference,r=t.placement.split("-")[0],s=Math.floor,o=-1!==["top","bottom"].indexOf(r),a=o?"right":"bottom",l=o?"left":"top",u=o?"width":"height";return n[a]<s(i[l])&&(t.offsets.popper[l]=s(i[l])-n[u]),n[l]>s(i[a])&&(t.offsets.popper[l]=s(i[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!U(t.instance.modifiers,"arrow","keepTogether"))return t;var i=e.element;if("string"==typeof i){if(!(i=t.instance.popper.querySelector(i)))return t}else if(!t.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],s=t.offsets,o=s.popper,a=s.reference,l=-1!==["left","right"].indexOf(r),u=l?"height":"width",c=l?"Top":"Left",h=c.toLowerCase(),f=l?"left":"top",d=l?"bottom":"right",p=N(i)[u];a[d]-p<o[h]&&(t.offsets.popper[h]-=o[h]-(a[d]-p)),a[h]+p>o[d]&&(t.offsets.popper[h]+=a[h]+p-o[d]),t.offsets.popper=x(t.offsets.popper);var g=a[h]+a[u]/2-p/2,m=b(t.instance.popper),v=parseFloat(m["margin"+c],10),y=parseFloat(m["border"+c+"Width"],10),_=g-t.offsets.popper[h]-v-y;return _=Math.max(Math.min(o[u]-p,_),0),t.arrowElement=i,t.offsets.arrow=(C(n={},h,Math.round(_)),C(n,f,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(g,m){if(R(g.instance.modifiers,"inner"))return g;if(g.flipped&&g.placement===g.originalPlacement)return g;var v=d(g.instance.popper,g.instance.reference,m.padding,m.boundariesElement,g.positionFixed),y=g.placement.split("-")[0],_=M(y),b=g.placement.split("-")[1]||"",w=[];switch(m.behavior){case Y:w=[y,_];break;case K:w=V(y);break;case G:w=V(y,!0);break;default:w=m.behavior}return w.forEach(function(t,e){if(y!==t||w.length===e+1)return g;y=g.placement.split("-")[0],_=M(y);var n=g.offsets.popper,i=g.offsets.reference,r=Math.floor,s="left"===y&&r(n.right)>r(i.left)||"right"===y&&r(n.left)<r(i.right)||"top"===y&&r(n.bottom)>r(i.top)||"bottom"===y&&r(n.top)<r(i.bottom),o=r(n.left)<r(v.left),a=r(n.right)>r(v.right),l=r(n.top)<r(v.top),u=r(n.bottom)>r(v.bottom),c="left"===y&&o||"right"===y&&a||"top"===y&&l||"bottom"===y&&u,h=-1!==["top","bottom"].indexOf(y),f=!!m.flipVariations&&(h&&"start"===b&&o||h&&"end"===b&&a||!h&&"start"===b&&l||!h&&"end"===b&&u),d=!!m.flipVariationsByContent&&(h&&"start"===b&&a||h&&"end"===b&&o||!h&&"start"===b&&u||!h&&"end"===b&&l),p=f||d;(s||c||p)&&(g.flipped=!0,(s||c)&&(y=w[e+1]),p&&(b=function(t){return"end"===t?"start":"start"===t?"end":t}(b)),g.placement=y+(b?"-"+b:""),g.offsets.popper=k({},g.offsets.popper,D(g.instance.popper,g.offsets.reference,g.placement)),g=I(g.instance.modifiers,g,"flip"))}),g},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],i=t.offsets,r=i.popper,s=i.reference,o=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return r[o?"left":"top"]=s[n]-(a?r[o?"width":"height"]:0),t.placement=M(e),t.offsets.popper=x(r),t}},hide:{order:800,enabled:!0,fn:function(t){if(!U(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=A(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,i=e.y,r=t.offsets.popper,s=A(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==s&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=void 0!==s?s:e.gpuAcceleration,a=_(t.instance.popper),l=T(a),u={position:r.position},c=function(t,e){function n(t){return t}var i=t.offsets,r=i.popper,s=i.reference,o=Math.round,a=Math.floor,l=o(s.width),u=o(r.width),c=-1!==["left","right"].indexOf(t.placement),h=-1!==t.placement.indexOf("-"),f=e?c||h||l%2==u%2?o:a:n,d=e?o:n;return{left:f(l%2==1&&u%2==1&&!h&&e?r.left-1:r.left),top:d(r.top),bottom:d(r.bottom),right:f(r.right)}}(t,window.devicePixelRatio<2||!B),h="bottom"===n?"top":"bottom",f="right"===i?"left":"right",d=L("transform"),p=void 0,g=void 0;if(g="bottom"==h?"HTML"===a.nodeName?-a.clientHeight+c.bottom:-l.height+c.bottom:c.top,p="right"==f?"HTML"===a.nodeName?-a.clientWidth+c.right:-l.width+c.right:c.left,o&&d)u[d]="translate3d("+p+"px, "+g+"px, 0)",u[h]=0,u[f]=0,u.willChange="transform";else{var m="bottom"==h?-1:1,v="right"==f?-1:1;u[h]=g*m,u[f]=p*v,u.willChange=h+", "+f}var y={"x-placement":t.placement};return t.attributes=k({},y,t.attributes),t.styles=k({},u,t.styles),t.arrowStyles=k({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return H(t.instance.popper,t.styles),function(e,n){Object.keys(n).forEach(function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)})}(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&H(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,i,r){var s=P(r,e,t,n.positionFixed),o=O(n.placement,s,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",o),H(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},X=(c(Z,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=P(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=O(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=D(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=I(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,R(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[L("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=j(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return z.call(this)}}]),Z);function Z(t,e){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Z),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=s(this.update.bind(this)),this.options=k({},Z.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(k({},Z.Defaults.modifiers,i.modifiers)).forEach(function(t){n.options.modifiers[t]=k({},Z.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return k({name:t},n.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&o(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();var r=this.options.eventsEnabled;r&&this.enableEventListeners(),this.state.eventsEnabled=r}return X.Utils=("undefined"!=typeof window?window:tt).PopperUtils,X.placements=$,X.Defaults=J,X},"object"===(void 0===i?"undefined":_typeof(i))&&void 0!==n?n.exports=e():t.Popper=e()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],260:[function(e,n,t){(function(u){var c=e("stream");function t(e,n,t){e=e||function(t){this.queue(t)},n=n||function(){this.queue(null)};var i=!1,r=!1,s=[],o=!1,a=new c;function l(){for(;s.length&&!a.paused;){var t=s.shift();if(null===t)return a.emit("end");a.emit("data",t)}}return a.readable=a.writable=!0,a.paused=!1,a.autoDestroy=!(t&&!1===t.autoDestroy),a.write=function(t){return e.call(this,t),!a.paused},a.queue=a.push=function(t){return o||(null===t&&(o=!0),s.push(t),l()),a},a.on("end",function(){a.readable=!1,!a.writable&&a.autoDestroy&&u.nextTick(function(){a.destroy()})}),a.end=function(t){if(!i)return i=!0,arguments.length&&a.write(t),a.writable=!1,n.call(a),!a.readable&&a.autoDestroy&&a.destroy(),a},a.destroy=function(){if(!r)return i=r=!0,s.length=0,a.writable=a.readable=!1,a.emit("close"),a},a.pause=function(){if(!a.paused)return a.paused=!0,a},a.resume=function(){return a.paused&&(a.paused=!1,a.emit("resume")),l(),a.paused||a.emit("drain"),a},a}n.exports=t,t.through=t}).call(this,e("_process"))},{_process:275,stream:294}],261:[function(t,e,n){var i,r,s;i=this,r=function(o){var a={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:o.isArray,isFunction:o.isFunction,isObject:o.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(t){return t instanceof o},toStr:function(t){return a.isUndefined(t)||null===t?"":t+""},bind:o.proxy,each:function(t,n){o.each(t,function(t,e){return n(e,t)})},map:o.map,filter:o.grep,every:function(n,i){var r=!0;return n?(o.each(n,function(t,e){if(!(r=i.call(null,e,t,n)))return!1}),!!r):r},some:function(n,i){var r=!1;return n?(o.each(n,function(t,e){if(r=i.call(null,e,t,n))return!1}),!!r):r},mixin:o.extend,identity:function(t){return t},clone:function(t){return o.extend(!0,{},t)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(t){return o.isFunction(t)?t:function(){return String(t)}},defer:function(t){setTimeout(t,0)},debounce:function(r,s,o){var a,l;return function(){var t,e,n=this,i=arguments;return t=function(){a=null,o||(l=r.apply(n,i))},e=o&&!a,clearTimeout(a),a=setTimeout(t,s),e&&(l=r.apply(n,i)),l}},throttle:function(n,i){var r,s,o,a,l,u;return l=0,u=function(){l=new Date,o=null,a=n.apply(r,s)},function(){var t=new Date,e=i-(t-l);return r=this,s=arguments,e<=0?(clearTimeout(o),o=null,l=t,a=n.apply(r,s)):o||(o=setTimeout(u,e)),a}},stringify:function(t){return a.isString(t)?t:JSON.stringify(t)},noop:function(){}},t={nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}};function e(t){return(t=a.toStr(t))?t.split(/\s+/):[]}function n(t){return(t=a.toStr(t))?t.split(/\W+/):[]}function i(i){return function(t){return t=a.isArray(t)?t:[].slice.call(arguments,0),function(e){var n=[];return a.each(t,function(t){n=n.concat(i(a.toStr(e[t])))}),n}}}var r=(a.mixin(s.prototype,{set:function(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new u(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val},reset:function(){this.size=0,this.hash={},this.list=new l}}),a.mixin(l.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),s);function s(t){this.maxSize=a.isNumber(t)?t:100,this.reset(),this.maxSize<=0&&(this.set=this.get=o.noop)}function l(){this.head=this.tail=null}function u(t,e){this.key=t,this.val=e,this.prev=this.next=null}var c,h,f,d,p=function(){var s;try{(s=window.localStorage).setItem("~~~","!"),s.removeItem("~~~")}catch(t){s=null}function t(t,e){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+a.escapeRegExChars(this.prefix)),this.ls=e||s,this.ls||this._noop()}return a.mixin(t.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=a.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(t){"QuotaExceededError"===t.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),n(this.ls.getItem(this._prefix(t)))},set:function(t,e,n){return a.isNumber(n)?this._safeSet(this._ttlKey(t),r(i()+n)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),r(e))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=function(t){var e,n,i=[],r=s.length;for(e=0;e<r;e++)(n=s.key(e)).match(t)&&i.push(n.replace(t,""));return i}(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var e=n(this.ls.getItem(this._ttlKey(t)));return!!(a.isNumber(e)&&i()>e)}}),t;function i(){return(new Date).getTime()}function r(t){return JSON.stringify(a.isUndefined(t)?null:t)}function n(t){return o.parseJSON(t)}}(),g=(c=0,h={},f=6,d=new r(10),m.setMaxPendingRequests=function(t){f=t},m.resetCache=function(){d.reset()},a.mixin(m.prototype,{_fingerprint:function(t){return(t=t||{}).url+t.type+o.param(t.data||{})},_get:function(t,e){var n,i,r=this;function s(t){e(null,t),r._cache.set(n,t)}function o(){e(!0)}n=this._fingerprint(t),this.cancelled||n!==this.lastReq||((i=h[n])?i.done(s).fail(o):c<f?(c++,h[n]=this._send(t).done(s).fail(o).always(function(){c--,delete h[n],r.onDeckRequestArgs&&(r._get.apply(r,r.onDeckRequestArgs),r.onDeckRequestArgs=null)})):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(t,e){var n,i;e=e||o.noop,t=a.isString(t)?{url:t}:t||{},i=this._fingerprint(t),this.cancelled=!1,this.lastReq=i,(n=this._cache.get(i))?e(null,n):this._get(t,e)},cancel:function(){this.cancelled=!0}}),m);function m(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=!1===t.cache?new r(0):d}var v,y,_=window.SearchIndex=(v="c",y="i",a.mixin(b.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var s=this;t=a.isArray(t)?t:[t],a.each(t,function(t){var r,e;s.datums[r=s.identify(t)]=t,e=w(s.datumTokenizer(t)),a.each(e,function(t){var e,n,i;for(e=s.trie,n=t.split("");i=n.shift();)(e=e[v][i]||(e[v][i]=C()))[y].push(r)})})},get:function(t){var e=this;return a.map(t,function(t){return e.datums[t]})},search:function(t){var e,s,o=this;return e=w(this.queryTokenizer(t)),a.each(e,function(t){var e,n,i,r;if(s&&0===s.length)return!1;for(e=o.trie,n=t.split("");e&&(i=n.shift());)e=e[v][i];if(!e||0!==n.length)return!(s=[]);r=e[y].slice(0),s=s?function(t,e){var n=0,i=0,r=[];t=t.sort(),e=e.sort();for(var s=t.length,o=e.length;n<s&&i<o;)t[n]<e[i]?n++:(t[n]>e[i]||(r.push(t[n]),n++),i++);return r}(s,r):r}),s?a.map(function(t){for(var e={},n=[],i=0,r=t.length;i<r;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}(s),function(t){return o.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=C()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),b);function b(t){(t=t||{}).datumTokenizer&&t.queryTokenizer||o.error("datumTokenizer and queryTokenizer are both required"),this.identify=t.identify||a.stringify,this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function w(t){return t=a.filter(t,function(t){return!!t}),t=a.map(t,function(t){return t.toLowerCase()})}function C(){var t={};return t[y]=[],t[v]={},t}var k,x=(k={data:"data",protocol:"protocol",thumbprint:"thumbprint"},a.mixin(T.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(k.data,t,this.ttl),this.storage.set(k.protocol,location.protocol,this.ttl),this.storage.set(k.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(k.data),e.protocol=this.storage.get(k.protocol),e.thumbprint=this.storage.get(k.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(e){var t,n=this;e&&(t=this.prepare(this._settings()),this.transport(t).fail(function(){e(!0)}).done(function(t){e(null,n.transform(t))}))},clear:function(){return this.storage.clear(),this}}),T);function T(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new p(t.cacheKey)}var S=(a.mixin(E.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,n){var e,i=this;if(n)return t=t||"",e=this.prepare(t,this._settings()),this.transport.get(e,function(t,e){n(t?[]:i.transform(e))})},cancelLastRequest:function(){this.transport.cancel()}}),E);function E(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new g({cache:t.cache,limiter:t.limiter,transport:t.transport})}var O,P=function(t){var e,n;return e={initialize:!0,identify:a.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},(t=a.mixin(e,t||{})).datumTokenizer||o.error("datumTokenizer is required"),t.queryTokenizer||o.error("queryTokenizer is required"),n=t.sorter,t.sorter=n?function(t){return t.sort(n)}:a.identity,t.local=a.isFunction(t.local)?t.local():t.local,t.prefetch=function(t){var e;return t?(e={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:a.identity,transform:a.identity,transport:null},t=a.isString(t)?{url:t}:t,(t=a.mixin(e,t)).url||o.error("prefetch requires url to be set"),t.transform=t.filter||t.transform,t.cacheKey=t.cacheKey||t.url,t.thumbprint="0.11.1"+t.thumbprint,t.transport=t.transport?N(t.transport):o.ajax,t):null}(t.prefetch),t.remote=function(t){var e;return t?(e={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:a.identity,transport:null},t=a.isString(t)?{url:t}:t,(t=a.mixin(e,t)).url||o.error("remote requires url to be set"),t.transform=t.filter||t.transform,t.prepare=function(t){var e,n,i;return e=t.prepare,n=t.replace,i=t.wildcard,e||(e=n?function(t,e){return e.url=n(e.url,t),e}:t.wildcard?function(t,e){return e.url=e.url.replace(i,encodeURIComponent(t)),e}:function(t,e){return e})}(t),t.limiter=function(t){var e,n,i;return e=t.limiter,n=t.rateLimitBy,i=t.rateLimitWait,e||(e=/^throttle$/i.test(n)?function(e){return function(t){return a.throttle(t,e)}}(i):function(e){return function(t){return a.debounce(t,e)}}(i)),e}(t),t.transport=t.transport?N(t.transport):o.ajax,delete t.replace,delete t.wildcard,delete t.rateLimitBy,delete t.rateLimitWait,t):void 0}(t.remote),t};function N(n){return function(t){var e=o.Deferred();return n(t,function(t){a.defer(function(){e.resolve(t)})},function(t){a.defer(function(){e.reject(t)})}),e}}function M(t){t=P(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new S(t.remote):null,this.prefetch=t.prefetch?new x(t.prefetch):null,this.index=new _({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),!1!==t.initialize&&this.initialize()}return O=window&&window.Bloodhound,M.noConflict=function(){return window&&(window.Bloodhound=O),M},M.tokenizers=t,a.mixin(M.prototype,{__ttAdapter:function(){var i=this;return this.remote?function(t,e,n){return i.search(t,e,n)}:function(t,e){return i.search(t,e)}},_loadPrefetch:function(){var n,t,i=this;return n=o.Deferred(),this.prefetch?(t=this.prefetch.fromCache())?(this.index.bootstrap(t),n.resolve()):this.prefetch.fromNetwork(function(t,e){if(t)return n.reject();i.add(e),i.prefetch.store(i.index.serialize()),n.resolve()}):n.resolve(),n.promise()},_initialize:function(){var t=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(function(){t.add(t.local)}),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=a.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,e,i){var r,s=this;return r=this.sorter(this.index.search(t)),e(this.remote?r.slice():r),this.remote&&r.length<this.sufficient?this.remote.get(t,function(t){var n=[];a.each(t,function(e){a.some(r,function(t){return s.identify(e)===s.identify(t)})||n.push(e)}),i&&i(n)}):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return g.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),M},"object"===(void 0===n?"undefined":_typeof(n))?e.exports=r(t("jquery")):i.Bloodhound=r(jQuery),s=function(p){var i,n,g={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:p.isArray,isFunction:p.isFunction,isObject:p.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(t){return t instanceof p},toStr:function(t){return g.isUndefined(t)||null===t?"":t+""},bind:p.proxy,each:function(t,n){p.each(t,function(t,e){return n(e,t)})},map:p.map,filter:p.grep,every:function(n,i){var r=!0;return n?(p.each(n,function(t,e){if(!(r=i.call(null,e,t,n)))return!1}),!!r):r},some:function(n,i){var r=!1;return n?(p.each(n,function(t,e){if(r=i.call(null,e,t,n))return!1}),!!r):r},mixin:p.extend,identity:function(t){return t},clone:function(t){return p.extend(!0,{},t)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(t){return p.isFunction(t)?t:function(){return String(t)}},defer:function(t){setTimeout(t,0)},debounce:function(r,s,o){var a,l;return function(){var t,e,n=this,i=arguments;return t=function(){a=null,o||(l=r.apply(n,i))},e=o&&!a,clearTimeout(a),a=setTimeout(t,s),e&&(l=r.apply(n,i)),l}},throttle:function(n,i){var r,s,o,a,l,u;return l=0,u=function(){l=new Date,o=null,a=n.apply(r,s)},function(){var t=new Date,e=i-(t-l);return r=this,s=arguments,e<=0?(clearTimeout(o),o=null,l=t,a=n.apply(r,s)):o||(o=setTimeout(u,e)),a}},stringify:function(t){return g.isString(t)?t:JSON.stringify(t)},noop:function(){}},t=(i={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"},function(t){var e,n;return n=g.mixin({},i,t),{css:(e={css:function(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return g.isMsie()&&g.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}(),classes:n,html:function(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}(n),selectors:function(t){var n={};return g.each(t,function(t,e){n[e]="."+t}),n}(n)}).css,html:e.html,classes:e.classes,selectors:e.selectors,mixin:function(t){g.mixin(t,e)}}}),m=(n={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},g.mixin(e.prototype,{_trigger:function(t,e){var n;return n=p.Event("typeahead:"+t),(e=e||[]).unshift(n),this.$el.trigger.apply(this.$el,e),n},before:function(t){var e;return e=[].slice.call(arguments,1),this._trigger("before"+t,e).isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=n[t])&&this._trigger(e,[].slice.call(arguments,1))}}),e);function e(t){t&&t.el||p.error("EventBus initialized without el"),this.$el=p(t.el)}var o,a,r=(o=/\s+/,a=function(){var t;t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)};return t}(),{onSync:function(t,e,n){return s.call(this,"sync",t,e,n)},onAsync:function(t,e,n){return s.call(this,"async",t,e,n)},off:function(t){var e;if(!this._callbacks)return this;for(t=t.split(o);e=t.shift();)delete this._callbacks[e];return this},trigger:function(t){var e,n,i,r,s;if(!this._callbacks)return this;for(t=t.split(o),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=l(n.sync,this,[e].concat(i)),s=l(n.async,this,[e].concat(i)),r()&&a(s);return this}});function s(t,e,n,i){var r;if(!n)return this;for(e=e.split(o),n=i?function(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function l(i,r,s){return function(){for(var t,e=0,n=i.length;!t&&e<n;e+=1)t=!1===i[e].apply(r,s);return!t}}var u,c,h,f=(u=window.document,c={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1},function(r){var s;(r=g.mixin({},c,r)).node&&r.pattern&&(r.pattern=g.isArray(r.pattern)?r.pattern:[r.pattern],s=function(t,e,n){for(var i,r=[],s=0,o=t.length;s<o;s++)r.push(g.escapeRegExChars(t[s]));return i=n?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",e?new RegExp(i):new RegExp(i,"i")}(r.pattern,r.caseSensitive,r.wordsOnly),function t(e,n){for(var i,r=0;r<e.childNodes.length;r++)3===(i=e.childNodes[r]).nodeType?r+=n(i)?1:0:t(i,n)}(r.node,function(t){var e,n,i;return(e=s.exec(t.data))&&(i=u.createElement(r.tagName),r.className&&(i.className=r.className),(n=t.splitText(e.index)).splitText(e[0].length),i.appendChild(n.cloneNode(!0)),t.parentNode.replaceChild(i,n)),!!e}))}),v=(h={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},d.normalizeQuery=function(t){return g.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},g.mixin(d.prototype,r,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=h[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var n;switch(t){case"up":case"down":n=!y(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!y(e);break;default:n=!0}return n},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var n,i;i=!!(n=function(t,e){return d.normalizeQuery(t)===d.normalizeQuery(e)}(t,this.query))&&this.query.length!==t.length,this.query=t,e||n?!e&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,e,n,i,r=this;return t=g.bind(this._onBlur,this),e=g.bind(this._onFocus,this),n=g.bind(this._onKeydown,this),i=g.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",e).on("keydown.tt",n),!g.isMsie()||9<g.isMsie()?this.$input.on("input.tt",i):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){h[t.which||t.keyCode]||g.defer(g.bind(r._onInput,r,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n;n=(t=this.getInputValue())!==(e=this.getHint())&&0===e.indexOf(t),""!==t&&n&&!this.hasOverflow()||this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,e,n;return t=this.$input.val().length,e=this.$input[0].selectionStart,g.isNumber(e)?e===t:!document.selection||((n=document.selection.createRange()).moveStart("character",-t),t===n.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=p("<div>")}}),d);function d(t,e){(t=t||{}).input||p.error("input is missing"),e.mixin(this),this.$hint=p(t.hint),this.$input=p(t.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=function(t){return p('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=g.noop)}function y(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var _,b,w=(_={val:"tt-selectable-display",obj:"tt-selectable-object"},b=g.getIdGenerator(),C.extractData=function(t){var e=p(t);return e.data(_.obj)?{val:e.data(_.val)||"",obj:e.data(_.obj)||null}:null},g.mixin(C.prototype,r,{_overwrite:function(t,e){(e=e||[]).length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){(e=e||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var n;n=this._getSuggestionsFragment(t,e),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var n,i;i=(n=this._getSuggestionsFragment(t,e)).children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,t){var r,s=this;return r=document.createDocumentFragment(),g.each(t,function(t){var e,n;n=s._injectQuery(i,t),e=p(s.templates.suggestion(n)).data(_.obj,t).data(_.val,s.displayFn(t)).addClass(s.classes.suggestion+" "+s.classes.selectable),r.appendChild(e[0])}),this.highlight&&f({className:this.classes.highlight,node:r,pattern:i}),p(r)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=p()},_injectQuery:function(t,e){return g.isObject(e)?g.mixin({_query:t},e):e},update:function(e){var n=this,i=!1,r=!1,s=0;function t(t){r||(r=!0,t=(t||[]).slice(0,n.limit),s=t.length,n._overwrite(e,t),s<n.limit&&n.async&&n.trigger("asyncRequested",e))}this.cancel(),this.cancel=function(){i=!0,n.cancel=p.noop,n.async&&n.trigger("asyncCanceled",e)},this.source(e,t,function(t){t=t||[],!i&&s<n.limit&&(n.cancel=p.noop,s+=t.length,n._append(e,t.slice(0,n.limit-s)),n.async&&n.trigger("asyncReceived",e))}),r||t([])},cancel:p.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=p("<div>")}}),C);function C(t,e){(t=t||{}).templates=t.templates||{},t.templates.notFound=t.templates.notFound||t.templates.empty,t.source||p.error("missing source"),t.node||p.error("missing node"),t.name&&!function(t){return/^[_a-zA-Z0-9-]+$/.test(t)}(t.name)&&p.error("invalid dataset name: "+t.name),e.mixin(this),this.highlight=!!t.highlight,this.name=t.name||b(),this.limit=t.limit||5,this.displayFn=function(e){return e=e||g.stringify,g.isFunction(e)?e:function(t){return t[e]}}(t.display||t.displayKey),this.templates=function(t,e){return{notFound:t.notFound&&g.templatify(t.notFound),pending:t.pending&&g.templatify(t.pending),header:t.header&&g.templatify(t.header),footer:t.footer&&g.templatify(t.footer),suggestion:t.suggestion||function(t){return p("<div>").text(e(t))}}}(t.templates,this.displayFn),this.source=t.source.__ttAdapter?t.source.__ttAdapter():t.source,this.async=g.isUndefined(t.async)?2<this.source.length:!!t.async,this._resetLastSuggestion(),this.$el=p(t.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}var k=(g.mixin(x.prototype,r,{_onSelectableClick:function(t){this.trigger("selectableClicked",p(t.currentTarget))},_onRendered:function(t,e,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return g.every(this.datasets,function(t){return t.isEmpty()})},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,n,i,r;n=(e=t.position().top)+t.outerHeight(!0),i=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),e<0?this.$node.scrollTop(i+e):r<n&&this.$node.scrollTop(i+(n-r))},bind:function(){var t,e=this;return t=g.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),g.each(this.datasets,function(t){t.onSync("asyncRequested",e._propagate,e).onSync("asyncCanceled",e._propagate,e).onSync("asyncReceived",e._propagate,e).onSync("rendered",e._onRendered,e).onSync("cleared",e._onCleared,e)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,n,i;return n=this.getActiveSelectable(),e=this._getSelectables(),-1===(i=(i=((i=(n?e.index(n):-1)+t)+1)%(e.length+1)-1)<-1?e.length-1:i)?null:e.eq(i)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?w.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(e){var t=e!==this.query;return t&&(this.query=e,g.each(this.datasets,function(t){t.update(e)})),t},empty:function(){g.each(this.datasets,function(t){t.clear()}),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt"),this.$node=p("<div>"),g.each(this.datasets,function(t){t.destroy()})}}),x);function x(t,n){var i=this;(t=t||{}).node||p.error("node is required"),n.mixin(this),this.$node=p(t.node),this.query=null,this.datasets=g.map(t.datasets,function(t){var e=i.$node.find(t.node).first();return t.node=e.length?e:p("<div>").appendTo(i.$node),new w(t,n)})}var T,S=(T=k.prototype,g.mixin(E.prototype,k.prototype,{open:function(){return this._allDatasetsEmpty()||this._show(),T.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),T.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),T._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),T._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),T.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),E);function E(){k.apply(this,[].slice.call(arguments,0))}var O,P,N,M=(g.mixin(D.prototype,{_hacks:function(){var r,s;r=this.input.$input||p("<div>"),s=this.menu.$node||p("<div>"),r.on("blur.tt",function(t){var e,n,i;e=document.activeElement,n=s.is(e),i=0<s.has(e).length,g.isMsie()&&(n||i)&&(t.preventDefault(),t.stopImmediatePropagation(),g.defer(function(){r.focus()}))}),s.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,e)},_onAsyncRequested:function(t,e,n){this.eventBus.trigger("asyncrequest",n,e)},_onAsyncCanceled:function(t,e,n){this.eventBus.trigger("asynccancel",n,e)},_onAsyncReceived:function(t,e,n){this.eventBus.trigger("asyncreceive",n,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&e.preventDefault()},_onTabKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&e.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return(t=g.isString(t)?t:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var t,e,n,i,r,s;t=this.menu.getTopSelectable(),e=this.menu.getSelectableData(t),n=this.input.getInputValue(),!e||g.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(i=v.normalizeQuery(n),r=g.escapeRegExChars(i),(s=new RegExp("^(?:"+r+")(.+$)","i").exec(e.val))&&this.input.setHint(n+s[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(g.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return!(!e||this.eventBus.before("select",e.obj)||(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),0))},autocomplete:function(t){var e,n;return e=this.input.getQuery(),!(!(n=this.menu.getSelectableData(t))||e===n.val||this.eventBus.before("autocomplete",n.obj)||(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),0))},moveCursor:function(t){var e,n,i,r;return e=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(t),r=(i=this.menu.getSelectableData(n))?i.obj:null,!(this._minLengthMet()&&this.menu.update(e)||this.eventBus.before("cursorchange",r)||(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),0))},destroy:function(){this.input.destroy(),this.menu.destroy()}}),D);function D(t,e){var n,i,r,s,o,a,l,u,c,h,f;(t=t||{}).input||p.error("missing input"),t.menu||p.error("missing menu"),t.eventBus||p.error("missing event bus"),e.mixin(this),this.eventBus=t.eventBus,this.minLength=g.isNumber(t.minLength)?t.minLength:1,this.input=t.input,this.menu=t.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),n=A(this,"activate","open","_onFocused"),i=A(this,"deactivate","_onBlurred"),r=A(this,"isActive","isOpen","_onEnterKeyed"),s=A(this,"isActive","isOpen","_onTabKeyed"),o=A(this,"isActive","_onEscKeyed"),a=A(this,"isActive","open","_onUpKeyed"),l=A(this,"isActive","open","_onDownKeyed"),u=A(this,"isActive","isOpen","_onLeftKeyed"),c=A(this,"isActive","isOpen","_onRightKeyed"),h=A(this,"_openIfActive","_onQueryChanged"),f=A(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",n,this).onSync("blurred",i,this).onSync("enterKeyed",r,this).onSync("tabKeyed",s,this).onSync("escKeyed",o,this).onSync("upKeyed",a,this).onSync("downKeyed",l,this).onSync("leftKeyed",u,this).onSync("rightKeyed",c,this).onSync("queryChanged",h,this).onSync("whitespaceChanged",f,this).onSync("langDirChanged",this._onLangDirChanged,this)}function A(n){var t=[].slice.call(arguments,1);return function(){var e=[].slice.call(arguments);g.each(t,function(t){return n[t].apply(n,e)})}}function I(t,n){t.each(function(){var t,e=p(this);(t=e.data(P.typeahead))&&n(t,e)})}function R(t){var e;return(e=g.isJQuery(t)||g.isElement(t)?p(t).first():[]).length?e:null}O=p.fn.typeahead,P={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},N={initialize:function(h,f){var d;return f=g.isArray(f)?f:[].slice.call(arguments,1),d=t((h=h||{}).classNames),this.each(function(){var t,e,n,i,r,s,o,a,l,u,c;g.each(f,function(t){t.highlight=!!h.highlight}),t=p(this),e=p(d.html.wrapper),n=R(h.hint),i=R(h.menu),r=!1!==h.hint&&!n,s=!1!==h.menu&&!i,r&&(n=function(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(function(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}(t,d)),s&&(i=p(d.html.menu).css(d.css.menu)),n&&n.val(""),t=function(t,e){t.data(P.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{t.attr("dir")||t.attr("dir","auto")}catch(t){}return t}(t,d),(r||s)&&(e.css(d.css.wrapper),t.css(r?d.css.input:d.css.inputWithNoHint),t.wrap(e).parent().prepend(r?n:null).append(s?i:null)),c=s?S:k,o=new m({el:t}),a=new v({hint:n,input:t},d),l=new c({node:i,datasets:f},d),u=new M({input:a,menu:l,eventBus:o,minLength:h.minLength},d),t.data(P.www,d),t.data(P.typeahead,u)})},isEnabled:function(){var e;return I(this.first(),function(t){e=t.isEnabled()}),e},enable:function(){return I(this,function(t){t.enable()}),this},disable:function(){return I(this,function(t){t.disable()}),this},isActive:function(){var e;return I(this.first(),function(t){e=t.isActive()}),e},activate:function(){return I(this,function(t){t.activate()}),this},deactivate:function(){return I(this,function(t){t.deactivate()}),this},isOpen:function(){var e;return I(this.first(),function(t){e=t.isOpen()}),e},open:function(){return I(this,function(t){t.open()}),this},close:function(){return I(this,function(t){t.close()}),this},select:function(t){var e=!1,n=p(t);return I(this.first(),function(t){e=t.select(n)}),e},autocomplete:function(t){var e=!1,n=p(t);return I(this.first(),function(t){e=t.autocomplete(n)}),e},moveCursor:function(e){var n=!1;return I(this.first(),function(t){n=t.moveCursor(e)}),n},val:function(e){var n;return arguments.length?(I(this,function(t){t.setVal(e)}),this):(I(this.first(),function(t){n=t.getVal()}),n)},destroy:function(){return I(this,function(t,e){!function(n){var t,e;t=n.data(P.www),e=n.parent().filter(t.selectors.wrapper),g.each(n.data(P.attrs),function(t,e){g.isUndefined(t)?n.removeAttr(e):n.attr(e,t)}),n.removeData(P.typeahead).removeData(P.www).removeData(P.attr).removeClass(t.classes.input),e.length&&(n.detach().insertAfter(e),e.remove())}(e),t.destroy()}),this}},p.fn.typeahead=function(t){return N[t]?N[t].apply(this,[].slice.call(arguments,1)):N.initialize.apply(this,arguments)},p.fn.typeahead.noConflict=function(){return p.fn.typeahead=O,this}},"object"===(void 0===n?"undefined":_typeof(n))?e.exports=s(t("jquery")):s(jQuery)},{jquery:256}],262:[function(t,Q,J){(function(G){!function(){function n(){}function h(t){return t instanceof h?t:this instanceof h?void(this._wrapped=t):new h(t)}var t="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"==(void 0===G?"undefined":_typeof(G))&&G.global===G&&G||this||{},e=t._,i=Array.prototype,o=Object.prototype,f="undefined"!=typeof Symbol?Symbol.prototype:null,r=i.push,l=i.slice,d=o.toString,s=o.hasOwnProperty,a=Array.isArray,u=Object.keys,c=Object.create;void 0===J||J.nodeType?t._=h:(void 0!==Q&&!Q.nodeType&&Q.exports&&(J=Q.exports=h),J._=h),h.VERSION="1.9.1";function p(r,s,t){if(void 0===s)return r;switch(null==t?3:t){case 1:return function(t){return r.call(s,t)};case 3:return function(t,e,n){return r.call(s,t,e,n)};case 4:return function(t,e,n,i){return r.call(s,t,e,n,i)}}return function(){return r.apply(s,arguments)}}function g(t,e,n){return h.iteratee!==m?h.iteratee(t,e):null==t?h.identity:h.isFunction(t)?p(t,e,n):h.isObject(t)&&!h.isArray(t)?h.matcher(t):h.property(t)}var m;h.iteratee=m=function(t,e){return g(t,e,1/0)};function v(r,s){return s=null==s?r.length-1:+s,function(){for(var t=Math.max(arguments.length-s,0),e=Array(t),n=0;n<t;n++)e[n]=arguments[n+s];switch(s){case 0:return r.call(this,e);case 1:return r.call(this,arguments[0],e);case 2:return r.call(this,arguments[0],arguments[1],e)}var i=Array(s+1);for(n=0;n<s;n++)i[n]=arguments[n];return i[s]=e,r.apply(this,i)}}function y(t){if(!h.isObject(t))return{};if(c)return c(t);n.prototype=t;var e=new n;return n.prototype=null,e}function _(e){return function(t){return null==t?void 0:t[e]}}function b(t,e){return null!=t&&s.call(t,e)}function w(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0}function C(t){var e=x(t);return"number"==typeof e&&0<=e&&e<=k}var k=Math.pow(2,53)-1,x=_("length");h.each=h.forEach=function(t,e,n){var i,r;if(e=p(e,n),C(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var s=h.keys(t);for(i=0,r=s.length;i<r;i++)e(t[s[i]],s[i],t)}return t},h.map=h.collect=function(t,e,n){e=g(e,n);for(var i=!C(t)&&h.keys(t),r=(i||t).length,s=Array(r),o=0;o<r;o++){var a=i?i[o]:o;s[o]=e(t[a],a,t)}return s};function T(l){return function(t,e,n,i){var r=3<=arguments.length;return function(t,e,n,i){var r=!C(t)&&h.keys(t),s=(r||t).length,o=0<l?0:s-1;for(i||(n=t[r?r[o]:o],o+=l);0<=o&&o<s;o+=l){var a=r?r[o]:o;n=e(n,t[a],a,t)}return n}(t,p(e,i,4),n,r)}}h.reduce=h.foldl=h.inject=T(1),h.reduceRight=h.foldr=T(-1),h.find=h.detect=function(t,e,n){var i=(C(t)?h.findIndex:h.findKey)(t,e,n);if(void 0!==i&&-1!==i)return t[i]},h.filter=h.select=function(t,i,e){var r=[];return i=g(i,e),h.each(t,function(t,e,n){i(t,e,n)&&r.push(t)}),r},h.reject=function(t,e,n){return h.filter(t,h.negate(g(e)),n)},h.every=h.all=function(t,e,n){e=g(e,n);for(var i=!C(t)&&h.keys(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(!e(t[o],o,t))return!1}return!0},h.some=h.any=function(t,e,n){e=g(e,n);for(var i=!C(t)&&h.keys(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(e(t[o],o,t))return!0}return!1},h.contains=h.includes=h.include=function(t,e,n,i){return C(t)||(t=h.values(t)),"number"==typeof n&&!i||(n=0),0<=h.indexOf(t,e,n)},h.invoke=v(function(t,n,i){var r,s;return h.isFunction(n)?s=n:h.isArray(n)&&(r=n.slice(0,-1),n=n[n.length-1]),h.map(t,function(t){var e=s;if(!e){if(r&&r.length&&(t=w(t,r)),null==t)return;e=t[n]}return null==e?e:e.apply(t,i)})}),h.pluck=function(t,e){return h.map(t,h.property(e))},h.where=function(t,e){return h.filter(t,h.matcher(e))},h.findWhere=function(t,e){return h.find(t,h.matcher(e))},h.max=function(t,i,e){var n,r,s=-1/0,o=-1/0;if(null==i||"number"==typeof i&&"object"!=_typeof(t[0])&&null!=t)for(var a=0,l=(t=C(t)?t:h.values(t)).length;a<l;a++)null!=(n=t[a])&&s<n&&(s=n);else i=g(i,e),h.each(t,function(t,e,n){r=i(t,e,n),(o<r||r===-1/0&&s===-1/0)&&(s=t,o=r)});return s},h.min=function(t,i,e){var n,r,s=1/0,o=1/0;if(null==i||"number"==typeof i&&"object"!=_typeof(t[0])&&null!=t)for(var a=0,l=(t=C(t)?t:h.values(t)).length;a<l;a++)null!=(n=t[a])&&n<s&&(s=n);else i=g(i,e),h.each(t,function(t,e,n){((r=i(t,e,n))<o||r===1/0&&s===1/0)&&(s=t,o=r)});return s},h.shuffle=function(t){return h.sample(t,1/0)},h.sample=function(t,e,n){if(null==e||n)return C(t)||(t=h.values(t)),t[h.random(t.length-1)];var i=C(t)?h.clone(t):h.values(t),r=x(i);e=Math.max(Math.min(e,r),0);for(var s=r-1,o=0;o<e;o++){var a=h.random(o,s),l=i[o];i[o]=i[a],i[a]=l}return i.slice(0,e)},h.sortBy=function(t,i,e){var r=0;return i=g(i,e),h.pluck(h.map(t,function(t,e,n){return{value:t,index:r++,criteria:i(t,e,n)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};function S(o,e){return function(i,r,t){var s=e?[[],[]]:{};return r=g(r,t),h.each(i,function(t,e){var n=r(t,e,i);o(s,t,n)}),s}}h.groupBy=S(function(t,e,n){b(t,n)?t[n].push(e):t[n]=[e]}),h.indexBy=S(function(t,e,n){t[n]=e}),h.countBy=S(function(t,e,n){b(t,n)?t[n]++:t[n]=1});var E=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;h.toArray=function(t){return t?h.isArray(t)?l.call(t):h.isString(t)?t.match(E):C(t)?h.map(t,h.identity):h.values(t):[]},h.size=function(t){return null==t?0:C(t)?t.length:h.keys(t).length},h.partition=S(function(t,e,n){t[n?0:1].push(e)},!0),h.first=h.head=h.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:h.initial(t,t.length-e)},h.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},h.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:h.rest(t,Math.max(0,t.length-e))},h.rest=h.tail=h.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},h.compact=function(t){return h.filter(t,Boolean)};function O(t,e,n,i){for(var r=(i=i||[]).length,s=0,o=x(t);s<o;s++){var a=t[s];if(C(a)&&(h.isArray(a)||h.isArguments(a)))if(e)for(var l=0,u=a.length;l<u;)i[r++]=a[l++];else O(a,e,n,i),r=i.length;else n||(i[r++]=a)}return i}h.flatten=function(t,e){return O(t,e,!1)},h.without=v(function(t,e){return h.difference(t,e)}),h.uniq=h.unique=function(t,e,n,i){h.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=g(n,i));for(var r=[],s=[],o=0,a=x(t);o<a;o++){var l=t[o],u=n?n(l,o,t):l;e&&!n?(o&&s===u||r.push(l),s=u):n?h.contains(s,u)||(s.push(u),r.push(l)):h.contains(r,l)||r.push(l)}return r},h.union=v(function(t){return h.uniq(O(t,!0,!0))}),h.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=x(t);i<r;i++){var s=t[i];if(!h.contains(e,s)){var o;for(o=1;o<n&&h.contains(arguments[o],s);o++);o===n&&e.push(s)}}return e},h.difference=v(function(t,e){return e=O(e,!0,!0),h.filter(t,function(t){return!h.contains(e,t)})}),h.zip=v(h.unzip=function(t){for(var e=t&&h.max(t,x).length||0,n=Array(e),i=0;i<e;i++)n[i]=h.pluck(t,i);return n}),h.object=function(t,e){for(var n={},i=0,r=x(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n};function P(s){return function(t,e,n){e=g(e,n);for(var i=x(t),r=0<s?0:i-1;0<=r&&r<i;r+=s)if(e(t[r],r,t))return r;return-1}}h.findIndex=P(1),h.findLastIndex=P(-1);function N(s,o,a){return function(t,e,n){var i=0,r=x(t);if("number"==typeof n)0<s?i=0<=n?n:Math.max(n+r,i):r=0<=n?Math.min(n+1,r):n+r+1;else if(a&&n&&r)return t[n=a(t,e)]===e?n:-1;if(e!=e)return 0<=(n=o(l.call(t,i,r),h.isNaN))?n+i:-1;for(n=0<s?i:r-1;0<=n&&n<r;n+=s)if(t[n]===e)return n;return-1}}h.indexOf=N(1,h.findIndex,h.sortedIndex=function(t,e,n,i){for(var r=(n=g(n,i,1))(e),s=0,o=x(t);s<o;){var a=Math.floor((s+o)/2);n(t[a])<r?s=a+1:o=a}return s}),h.lastIndexOf=N(-1,h.findLastIndex),h.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),s=0;s<i;s++,t+=n)r[s]=t;return r},h.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],i=0,r=t.length;i<r;)n.push(l.call(t,i,i+=e));return n};function M(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var s=y(t.prototype),o=t.apply(s,r);return h.isObject(o)?o:s}h.bind=v(function(e,n,i){if(!h.isFunction(e))throw new TypeError("Bind must be called on a function");var r=v(function(t){return M(e,r,n,this,i.concat(t))});return r}),((h.partial=v(function(s,o){var a=h.partial.placeholder;return function t(){for(var e=0,n=o.length,i=Array(n),r=0;r<n;r++)i[r]=o[r]===a?arguments[e++]:o[r];for(;e<arguments.length;)i.push(arguments[e++]);return M(s,t,this,this,i)}})).placeholder=h).bindAll=v(function(t,e){var n=(e=O(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=h.bind(t[i],t)}}),h.memoize=function(i,r){function s(t){var e=s.cache,n=""+(r?r.apply(this,arguments):t);return b(e,n)||(e[n]=i.apply(this,arguments)),e[n]}return s.cache={},s},h.delay=v(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),h.defer=h.partial(h.delay,h,1),h.throttle=function(n,i,r){var s,o,a,l,u=0;r||(r={});function c(){u=!1===r.leading?0:h.now(),s=null,l=n.apply(o,a),s||(o=a=null)}function t(){var t=h.now();u||!1!==r.leading||(u=t);var e=i-(t-u);return o=this,a=arguments,e<=0||i<e?(s&&(clearTimeout(s),s=null),u=t,l=n.apply(o,a),s||(o=a=null)):s||!1===r.trailing||(s=setTimeout(c,e)),l}return t.cancel=function(){clearTimeout(s),u=0,s=o=a=null},t},h.debounce=function(n,i,r){function s(t,e){o=null,e&&(a=n.apply(t,e))}var o,a,t=v(function(t){if(o&&clearTimeout(o),r){var e=!o;o=setTimeout(s,i),e&&(a=n.apply(this,t))}else o=h.delay(s,i,this,t);return a});return t.cancel=function(){clearTimeout(o),o=null},t},h.wrap=function(t,e){return h.partial(e,t)},h.negate=function(t){return function(){return!t.apply(this,arguments)}},h.compose=function(){var n=arguments,i=n.length-1;return function(){for(var t=i,e=n[i].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},h.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},h.once=h.partial(h.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},2),h.restArguments=v;function D(t,e){var n=I.length,i=t.constructor,r=h.isFunction(i)&&i.prototype||o,s="constructor";for(b(t,s)&&!h.contains(e,s)&&e.push(s);n--;)(s=I[n])in t&&t[s]!==r[s]&&!h.contains(e,s)&&e.push(s)}var A=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];h.keys=function(t){if(!h.isObject(t))return[];if(u)return u(t);var e=[];for(var n in t)b(t,n)&&e.push(n);return A&&D(t,e),e},h.allKeys=function(t){if(!h.isObject(t))return[];var e=[];for(var n in t)e.push(n);return A&&D(t,e),e},h.values=function(t){for(var e=h.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i},h.mapObject=function(t,e,n){e=g(e,n);for(var i=h.keys(t),r=i.length,s={},o=0;o<r;o++){var a=i[o];s[a]=e(t[a],a,t)}return s},h.pairs=function(t){for(var e=h.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i},h.invert=function(t){for(var e={},n=h.keys(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e},h.functions=h.methods=function(t){var e=[];for(var n in t)h.isFunction(t[n])&&e.push(n);return e.sort()};function R(l,u){return function(t){var e=arguments.length;if(u&&(t=Object(t)),e<2||null==t)return t;for(var n=1;n<e;n++)for(var i=arguments[n],r=l(i),s=r.length,o=0;o<s;o++){var a=r[o];u&&void 0!==t[a]||(t[a]=i[a])}return t}}h.extend=R(h.allKeys),h.extendOwn=h.assign=R(h.keys),h.findKey=function(t,e,n){e=g(e,n);for(var i,r=h.keys(t),s=0,o=r.length;s<o;s++)if(e(t[i=r[s]],i,t))return i};function L(t,e,n){return e in n}var q,j;h.pick=v(function(t,e){var n={},i=e[0];if(null==t)return n;h.isFunction(i)?(1<e.length&&(i=p(i,e[1])),e=h.allKeys(t)):(i=L,e=O(e,!1,!1),t=Object(t));for(var r=0,s=e.length;r<s;r++){var o=e[r],a=t[o];i(a,o,t)&&(n[o]=a)}return n}),h.omit=v(function(t,n){var e,i=n[0];return h.isFunction(i)?(i=h.negate(i),1<n.length&&(e=n[1])):(n=h.map(O(n,!1,!1),String),i=function(t,e){return!h.contains(n,e)}),h.pick(t,i,e)}),h.defaults=R(h.allKeys,!0),h.create=function(t,e){var n=y(t);return e&&h.extendOwn(n,e),n},h.clone=function(t){return h.isObject(t)?h.isArray(t)?t.slice():h.extend({},t):t},h.tap=function(t,e){return e(t),t},h.isMatch=function(t,e){var n=h.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),s=0;s<i;s++){var o=n[s];if(e[o]!==r[o]||!(o in r))return!1}return!0},q=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=void 0===t?"undefined":_typeof(t);return("function"===r||"object"===r||"object"==(void 0===e?"undefined":_typeof(e)))&&j(t,e,n,i)},j=function(t,e,n,i){t instanceof h&&(t=t._wrapped),e instanceof h&&(e=e._wrapped);var r=d.call(t);if(r!==d.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return f.valueOf.call(t)===f.valueOf.call(e)}var s="[object Array]"===r;if(!s){if("object"!=(void 0===t?"undefined":_typeof(t))||"object"!=(void 0===e?"undefined":_typeof(e)))return!1;var o=t.constructor,a=e.constructor;if(o!==a&&!(h.isFunction(o)&&o instanceof o&&h.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),s){if((l=t.length)!==e.length)return!1;for(;l--;)if(!q(t[l],e[l],n,i))return!1}else{var u,c=h.keys(t);if(l=c.length,h.keys(e).length!==l)return!1;for(;l--;)if(u=c[l],!b(e,u)||!q(t[u],e[u],n,i))return!1}return n.pop(),i.pop(),!0},h.isEqual=function(t,e){return q(t,e)},h.isEmpty=function(t){return null==t||(C(t)&&(h.isArray(t)||h.isString(t)||h.isArguments(t))?0===t.length:0===h.keys(t).length)},h.isElement=function(t){return!(!t||1!==t.nodeType)},h.isArray=a||function(t){return"[object Array]"===d.call(t)},h.isObject=function(t){var e=void 0===t?"undefined":_typeof(t);return"function"===e||"object"===e&&!!t},h.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){h["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),h.isArguments(arguments)||(h.isArguments=function(t){return b(t,"callee")});var z=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":_typeof(Int8Array))&&"function"!=typeof z&&(h.isFunction=function(t){return"function"==typeof t||!1}),h.isFinite=function(t){return!h.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},h.isNaN=function(t){return h.isNumber(t)&&isNaN(t)},h.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===d.call(t)},h.isNull=function(t){return null===t},h.isUndefined=function(t){return void 0===t},h.has=function(t,e){if(!h.isArray(e))return b(t,e);for(var n=e.length,i=0;i<n;i++){var r=e[i];if(null==t||!s.call(t,r))return!1;t=t[r]}return!!n},h.noConflict=function(){return t._=e,this},h.identity=function(t){return t},h.constant=function(t){return function(){return t}},h.noop=function(){},h.property=function(e){return h.isArray(e)?function(t){return w(t,e)}:_(e)},h.propertyOf=function(e){return null==e?function(){}:function(t){return h.isArray(t)?w(e,t):e[t]}},h.matcher=h.matches=function(e){return e=h.extendOwn({},e),function(t){return h.isMatch(t,e)}},h.times=function(t,e,n){var i=Array(Math.max(0,t));e=p(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i},h.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},h.now=Date.now||function(){return(new Date).getTime()};function F(e){function n(t){return e[t]}var t="(?:"+h.keys(e).join("|")+")",i=RegExp(t),r=RegExp(t,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,n):t}}var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=h.invert(H);h.escape=F(H),h.unescape=F(B),h.result=function(t,e,n){h.isArray(e)||(e=[e]);var i=e.length;if(!i)return h.isFunction(n)?n.call(t):n;for(var r=0;r<i;r++){var s=null==t?void 0:t[e[r]];void 0===s&&(s=n,r=i),t=h.isFunction(s)?s.call(t):s}return t};var U=0;h.uniqueId=function(t){var e=++U+"";return t?t+e:e},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function $(t){return"\\"+V[t]}var W=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\u2028|\u2029/g;h.template=function(s,t,e){!t&&e&&(t=e),t=h.defaults({},t,h.templateSettings);var n,i=RegExp([(t.escape||W).source,(t.interpolate||W).source,(t.evaluate||W).source].join("|")+"|$","g"),o=0,a="__p+='";s.replace(i,function(t,e,n,i,r){return a+=s.slice(o,r).replace(Y,$),o=r+t.length,e?a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(t.variable||"obj","_",a)}catch(t){throw t.source=a,t}function r(t){return n.call(this,t,h)}var l=t.variable||"obj";return r.source="function("+l+"){\n"+a+"}",r},h.chain=function(t){var e=h(t);return e._chain=!0,e};function K(t,e){return t._chain?h(e).chain():e}h.mixin=function(n){return h.each(h.functions(n),function(t){var e=h[t]=n[t];h.prototype[t]=function(){var t=[this._wrapped];return r.apply(t,arguments),K(this,e.apply(h,t))}}),h},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=i[e];h.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],K(this,t)}}),h.each(["concat","join","slice"],function(t){var e=i[t];h.prototype[t]=function(){return K(this,e.apply(this._wrapped,arguments))}}),h.prototype.valueOf=h.prototype.toJSON=h.prototype.value=function(){return this._wrapped},h.prototype.toString=function(){return String(this._wrapped)}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],263:[function(t,e,n){},{}],264:[function(t,e,n){n.byteLength=function(t){return 3*t.length/4-h(t)},n.toByteArray=function(t){var e,n,i,r,s,o=t.length;r=h(t),s=new c(3*o/4-r),n=0<r?o-4:o;var a=0;for(e=0;e<n;e+=4)i=u[t.charCodeAt(e)]<<18|u[t.charCodeAt(e+1)]<<12|u[t.charCodeAt(e+2)]<<6|u[t.charCodeAt(e+3)],s[a++]=i>>16&255,s[a++]=i>>8&255,s[a++]=255&i;2===r?(i=u[t.charCodeAt(e)]<<2|u[t.charCodeAt(e+1)]>>4,s[a++]=255&i):1===r&&(i=u[t.charCodeAt(e)]<<10|u[t.charCodeAt(e+1)]<<4|u[t.charCodeAt(e+2)]>>2,s[a++]=i>>8&255,s[a++]=255&i);return s},n.fromByteArray=function(t){for(var e,n=t.length,i=n%3,r="",s=[],o=0,a=n-i;o<a;o+=16383)s.push(f(t,o,a<o+16383?a:o+16383));1==i?(e=t[n-1],r+=l[e>>2],r+=l[e<<4&63],r+="=="):2==i&&(e=(t[n-2]<<8)+t[n-1],r+=l[e>>10],r+=l[e>>4&63],r+=l[e<<2&63],r+="=");return s.push(r),s.join("")};for(var l=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,s=i.length;r<s;++r)l[r]=i[r],u[i.charCodeAt(r)]=r;function h(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function f(t,e,n){for(var i,r,s=[],o=e;o<n;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(l[(r=i)>>18&63]+l[r>>12&63]+l[r>>6&63]+l[63&r]);return s.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],265:[function(t,e,n){arguments[4][263][0].apply(n,arguments)},{dup:263}],266:[function(t,e,n){var i=t("base64-js"),s=t("ieee754");n.Buffer=h,n.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},n.INSPECT_MAX_BYTES=50;var r=2147483647;function o(t){if(r<t)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=h.prototype,e}function h(t,e,n){if("number"!=typeof t)return a(t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(t)}function a(t,e,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return L(t)?function(t,e,n){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");var i;i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n);return i.__proto__=h.prototype,i}(t,e,n):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!h.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,e),i=o(n),r=i.write(t,e);r!==n&&(i=i.slice(0,r));return i}(t,e):function(t){if(h.isBuffer(t)){var e=0|f(t.length),n=o(e);return 0===n.length||t.copy(n,0,0,e),n}if(t){if(q(t)||"length"in t)return"number"!=typeof t.length||j(t.length)?o(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t){return l(t),o(t<0?0:0|f(t))}function c(t){for(var e=t.length<0?0:0|f(t.length),n=o(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function f(t){if(r<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|t}function d(t,e){if(h.isBuffer(t))return t.length;if(q(t)||L(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return A(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return I(t).length;default:if(i)return A(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function g(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),j(n=+n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=h.from(e,i)),h.isBuffer(e))return 0===e.length?-1:m(t,e,n,i,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,i,r){var s,o=1,a=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a/=o=2,l/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r){var c=-1;for(s=n;s<a;s++)if(u(t,s)===u(e,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*o}else-1!==c&&(s-=s-c),c=-1}else for(a<n+l&&(n=a-l),s=n;0<=s;s--){for(var h=!0,f=0;f<l;f++)if(u(t,s+f)!==u(e,f)){h=!1;break}if(h)return s}return-1}function v(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?r<(i=Number(i))&&(i=r):i=r;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");s/2<i&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(e.substr(2*o,2),16);if(j(a))return o;t[n+o]=a}return o}function y(t,e,n,i){return R(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function _(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function b(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var s,o,a,l,u=t[r],c=null,h=239<u?4:223<u?3:191<u?2:1;if(r+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(s=t[r+1]))&&127<(l=(31&u)<<6|63&s)&&(c=l);break;case 3:s=t[r+1],o=t[r+2],128==(192&s)&&128==(192&o)&&2047<(l=(15&u)<<12|(63&s)<<6|63&o)&&(l<55296||57343<l)&&(c=l);break;case 4:s=t[r+1],o=t[r+2],a=t[r+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&65535<(l=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}return function(t){var e=t.length;if(e<=w)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=w));return n}(i)}n.kMaxLength=r,(h.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(t,e,n){return a(t,e,n)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(t,e,n){return function(t,e,n){return l(t),t<=0?o(t):void 0!==e?"string"==typeof n?o(t).fill(e,n):o(t).fill(e):o(t)}(t,e,n)},h.allocUnsafe=function(t){return u(t)},h.allocUnsafeSlow=function(t){return u(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,s=Math.min(n,i);r<s;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var i=h.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!h.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},h.byteLength=d,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},h.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?b(this,0,t):function(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,n);case"utf8":case"utf-8":return b(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return _(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,n,i,r){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(r<=i&&n<=e)return 0;if(r<=i)return-1;if(n<=e)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(e>>>=0),a=Math.min(s,o),l=this.slice(i,r),u=t.slice(e,n),c=0;c<a;++c)if(l[c]!==u[c]){s=l[c],o=u[c];break}return s<o?-1:o<s?1:0},h.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},h.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},h.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},h.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||r<n)&&(n=r),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s,o,a,l,u,c,h,f,d,p=!1;;)switch(i){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return f=e,d=n,R(A(t,(h=this).length-f),h,f,d);case"ascii":return y(this,t,e,n);case"latin1":case"binary":return y(this,t,e,n);case"base64":return l=this,u=e,c=n,R(I(t),l,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=e,a=n,R(function(t,e){for(var n,i,r,s=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),i=n>>8,r=n%256,s.push(r),s.push(i);return s}(t,(s=this).length-o),s,o,a);default:if(p)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),p=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function C(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function k(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function x(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||i<n)&&(n=i);for(var r="",s=e;s<n;++s)r+=D(t[s]);return r}function T(t,e,n){for(var i=t.slice(e,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}function S(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function E(t,e,n,i,r,s){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<e||e<s)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function O(t,e,n,i){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(t,e,n,i,r){return e=+e,n>>>=0,r||O(t,0,n,4),s.write(t,e,n,i,23,4),n+4}function N(t,e,n,i,r){return e=+e,n>>>=0,r||O(t,0,n,8),s.write(t,e,n,i,52,8),n+8}h.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t);var i=this.subarray(t,e);return i.__proto__=h.prototype,i},h.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i},h.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);for(var i=this[t+--e],r=1;0<e&&(r*=256);)i+=this[t+--e]*r;return i},h.prototype.readUInt8=function(t,e){return t>>>=0,e||S(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||S(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||S(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||S(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||S(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return(r*=128)<=i&&(i-=Math.pow(2,8*e)),i},h.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||S(t,e,this.length);for(var i=e,r=1,s=this[t+--i];0<i&&(r*=256);)s+=this[t+--i]*r;return(r*=128)<=s&&(s-=Math.pow(2,8*e)),s},h.prototype.readInt8=function(t,e){return t>>>=0,e||S(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||S(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(t,e){t>>>=0,e||S(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||S(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||S(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return t>>>=0,e||S(t,4,this.length),s.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||S(t,4,this.length),s.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||S(t,8,this.length),s.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||S(t,8,this.length),s.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||E(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,s=0;for(this[e]=255&t;++s<n&&(r*=256);)this[e+s]=t/r&255;return e+n},h.prototype.writeUIntBE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||E(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,s=1;for(this[e+r]=255&t;0<=--r&&(s*=256);)this[e+r]=t/s&255;return e+n},h.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var r=Math.pow(2,8*n-1);E(this,t,e,n,r-1,-r)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},h.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var r=Math.pow(2,8*n-1);E(this,t,e,n,r-1,-r)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;0<=--s&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},h.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeFloatLE=function(t,e,n){return P(this,t,e,!0,n)},h.prototype.writeFloatBE=function(t,e,n){return P(this,t,e,!1,n)},h.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},h.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},h.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),0<i&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,s=i-n;if(this===t&&n<e&&e<i)for(r=s-1;0<=r;--r)t[r+e]=this[r+n];else if(s<1e3)for(r=0;r<s;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},h.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var o=h.isBuffer(t)?t:new h(t,i),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var M=/[^+/0-9A-Za-z-_]/g;function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function A(t,e){var n;e=e||1/0;for(var i=t.length,r=null,s=[],o=0;o<i;++o){if(55295<(n=t.charCodeAt(o))&&n<57344){if(!r){if(56319<n){-1<(e-=3)&&s.push(239,191,189);continue}if(o+1===i){-1<(e-=3)&&s.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(e-=3)&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(e-=3)&&s.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function I(t){return i.toByteArray(function(t){if((t=t.trim().replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function R(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function L(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function q(t){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(t)}function j(t){return t!=t}},{"base64-js":264,ieee754:270}],267:[function(t,e,n){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],268:[function(t,e,n){(function(t){function e(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSymbol=function(t){return"symbol"===(void 0===t?"undefined":_typeof(t))},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return"[object RegExp]"===e(t)},n.isObject=function(t){return"object"===(void 0===t?"undefined":_typeof(t))&&null!==t},n.isDate=function(t){return"[object Date]"===e(t)},n.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},n.isFunction=function(t){return"function"==typeof t},n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===(void 0===t?"undefined":_typeof(t))||void 0===t},n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":272}],269:[function(t,e,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(t){return"function"==typeof t}function u(t){return"object"===(void 0===t?"undefined":_typeof(t))&&null!==t}function c(t){return void 0===t}((e.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,n,i,r,s,o;if(this._events||(this._events={}),"error"===t&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var a=new Error('Uncaught, unspecified "error" event. ('+e+")");throw a.context=e,a}if(c(n=this._events[t]))return!1;if(l(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),n.apply(this,r)}else if(u(n))for(r=Array.prototype.slice.call(arguments,1),i=(o=n.slice()).length,s=0;s<i;s++)o[s].apply(this,r);return!0},i.prototype.on=i.prototype.addListener=function(t,e){var n;if(!l(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,l(e.listener)?e.listener:e),this._events[t]?u(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,u(this._events[t])&&!this._events[t].warned&&(n=c(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.once=function(t,e){if(!l(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var n,i,r,s;if(!l(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=(n=this._events[t]).length,i=-1,n===e||l(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(u(n)){for(s=r;0<s--;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(l(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?l(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(l(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},{}],270:[function(t,e,n){n.read=function(t,e,n,i,r){var s,o,a=8*r-i-1,l=(1<<a)-1,u=l>>1,c=-7,h=n?r-1:0,f=n?-1:1,d=t[e+h];for(h+=f,s=d&(1<<-c)-1,d>>=-c,c+=a;0<c;s=256*s+t[e+h],h+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=i;0<c;o=256*o+t[e+h],h+=f,c-=8);if(0===s)s=1-u;else{if(s===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),s-=u}return(d?-1:1)*o*Math.pow(2,s-i)},n.write=function(t,e,n,i,r,s){var o,a,l,u=8*s-r-1,c=(1<<u)-1,h=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),2<=(e+=1<=o+h?f/l:f*Math.pow(2,1-h))*l&&(o++,l/=2),c<=o+h?(a=0,o=c):1<=o+h?(a=(e*l-1)*Math.pow(2,r),o+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),o=0));8<=r;t[n+d]=255&a,d+=p,a/=256,r-=8);for(o=o<<r|a,u+=r;0<u;t[n+d]=255&o,d+=p,o/=256,u-=8);t[n+d-p]|=128*g}},{}],271:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],272:[function(t,e,n){function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(i(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],273:[function(t,e,n){var i={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},{}],274:[function(t,e,n){(function(a){!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?e.exports=function(t,e,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var r,s,o=arguments.length;switch(o){case 0:case 1:return a.nextTick(t);case 2:return a.nextTick(function(){t.call(null,e)});case 3:return a.nextTick(function(){t.call(null,e,n)});case 4:return a.nextTick(function(){t.call(null,e,n,i)});default:for(r=new Array(o-1),s=0;s<r.length;)r[s++]=arguments[s];return a.nextTick(function(){t.apply(null,r)})}}:e.exports=a.nextTick}).call(this,t("_process"))},{_process:275}],275:[function(t,e,n){var i,r,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],h=!1,f=-1;function d(){h&&u&&(h=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!h){var t=l(d);h=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new g(t,e)),1!==c.length||h||l(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],276:[function(t,D,A){(function(M){!function(t){var e="object"==(void 0===A?"undefined":_typeof(A))&&A&&!A.nodeType&&A,n="object"==(void 0===D?"undefined":_typeof(D))&&D&&!D.nodeType&&D,i="object"==(void 0===M?"undefined":_typeof(M))&&M;i.global!==i&&i.window!==i&&i.self!==i||(t=i);var r,s,v=2147483647,y=36,_=1,b=26,o=38,a=700,w=72,C=128,k="-",l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=y-_,x=Math.floor,T=String.fromCharCode;function S(t){throw new RangeError(h[t])}function d(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function p(t,e){var n=t.split("@"),i="";return 1<n.length&&(i=n[0]+"@",t=n[1]),i+d((t=t.replace(c,".")).split("."),e).join(".")}function E(t){for(var e,n,i=[],r=0,s=t.length;r<s;)55296<=(e=t.charCodeAt(r++))&&e<=56319&&r<s?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function O(t){return d(t,function(t){var e="";return 65535<t&&(e+=T((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=T(t)}).join("")}function P(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function N(t,e,n){var i=0;for(t=n?x(t/a):t>>1,t+=x(t/e);f*b>>1<t;i+=y)t=x(t/f);return x(i+(f+1)*t/(t+o))}function g(t){var e,n,i,r,s,o,a,l,u,c,h,f=[],d=t.length,p=0,g=C,m=w;for((n=t.lastIndexOf(k))<0&&(n=0),i=0;i<n;++i)128<=t.charCodeAt(i)&&S("not-basic"),f.push(t.charCodeAt(i));for(r=0<n?n+1:0;r<d;){for(s=p,o=1,a=y;d<=r&&S("invalid-input"),h=t.charCodeAt(r++),(y<=(l=h-48<10?h-22:h-65<26?h-65:h-97<26?h-97:y)||l>x((v-p)/o))&&S("overflow"),p+=l*o,!(l<(u=a<=m?_:m+b<=a?b:a-m));a+=y)o>x(v/(c=y-u))&&S("overflow"),o*=c;m=N(p-s,e=f.length+1,0==s),x(p/e)>v-g&&S("overflow"),g+=x(p/e),p%=e,f.splice(p++,0,g)}return O(f)}function m(t){var e,n,i,r,s,o,a,l,u,c,h,f,d,p,g,m=[];for(f=(t=E(t)).length,e=C,s=w,o=n=0;o<f;++o)(h=t[o])<128&&m.push(T(h));for(i=r=m.length,r&&m.push(k);i<f;){for(a=v,o=0;o<f;++o)e<=(h=t[o])&&h<a&&(a=h);for(a-e>x((v-n)/(d=i+1))&&S("overflow"),n+=(a-e)*d,e=a,o=0;o<f;++o)if((h=t[o])<e&&++n>v&&S("overflow"),h==e){for(l=n,u=y;!(l<(c=u<=s?_:s+b<=u?b:u-s));u+=y)g=l-c,p=y-c,m.push(T(P(c+g%p,0))),l=x(g/p);m.push(T(P(l,0))),s=N(n,d,i==r),n=0,++i}++n,++e}return m.join("")}if(r={version:"1.4.1",ucs2:{decode:E,encode:O},decode:g,encode:m,toASCII:function(t){return p(t,function(t){return u.test(t)?"xn--"+m(t):t})},toUnicode:function(t){return p(t,function(t){return l.test(t)?g(t.slice(4).toLowerCase()):t})}},e&&n)if(D.exports==e)n.exports=r;else for(s in r)r.hasOwnProperty(s)&&(e[s]=r[s]);else t.punycode=r}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],277:[function(t,e,n){e.exports=function(t,e,n,i){e=e||"&",n=n||"=";var r={};if("string"!=typeof t||0===t.length)return r;var s=/\+/g;t=t.split(e);var o=1e3;i&&"number"==typeof i.maxKeys&&(o=i.maxKeys);var a,l,u=t.length;0<o&&o<u&&(u=o);for(var c=0;c<u;++c){var h,f,d,p,g=t[c].replace(s,"%20"),m=g.indexOf(n);f=0<=m?(h=g.substr(0,m),g.substr(m+1)):(h=g,""),d=decodeURIComponent(h),p=decodeURIComponent(f),a=r,l=d,Object.prototype.hasOwnProperty.call(a,l)?v(r[d])?r[d].push(p):r[d]=[r[d],p]:r[d]=p}return r};var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],278:[function(t,e,n){function s(t){switch(void 0===t?"undefined":_typeof(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}e.exports=function(n,i,r,t){return i=i||"&",r=r||"=",null===n&&(n=void 0),"object"===(void 0===n?"undefined":_typeof(n))?a(l(n),function(t){var e=encodeURIComponent(s(t))+r;return o(n[t])?a(n[t],function(t){return e+encodeURIComponent(s(t))}).join(i):e+encodeURIComponent(s(n[t]))}).join(i):t?encodeURIComponent(s(t))+r+encodeURIComponent(s(n)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i));return n}var l=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],279:[function(t,e,n){n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":277,"./encode":278}],280:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":281}],281:[function(t,e,n){var i=t("process-nextick-args"),r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=h;var s=t("core-util-is");s.inherits=t("inherits");var o=t("./_stream_readable"),a=t("./_stream_writable");s.inherits(h,o);for(var l=r(a.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);o.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||i(d,this)}function d(t){t.end()}Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),i(e,t)}},{"./_stream_readable":283,"./_stream_writable":285,"core-util-is":268,inherits:271,"process-nextick-args":274}],282:[function(t,e,n){e.exports=s;var i=t("./_stream_transform"),r=t("core-util-is");function s(t){if(!(this instanceof s))return new s(t);i.call(this,t)}r.inherits=t("inherits"),r.inherits(s,i),s.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":284,"core-util-is":268,inherits:271}],283:[function(A,I,t){(function(g,t){var m=A("process-nextick-args");I.exports=f;var r,v=A("isarray");f.ReadableState=h;function y(t,e){return t.listeners(e).length}A("events").EventEmitter;var s=A("./internal/streams/stream"),a=A("safe-buffer").Buffer,l=t.Uint8Array||function(){};var e=A("core-util-is");e.inherits=A("inherits");var n=A("util"),_=void 0;_=n&&n.debuglog?n.debuglog("stream"):function(){};var o,u=A("./internal/streams/BufferList"),i=A("./internal/streams/destroy");e.inherits(f,s);var c=["error","close","destroy","pause","resume"];function h(t,e){r=r||A("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,e instanceof r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(o||(o=A("string_decoder/").StringDecoder),this.decoder=new o(t.encoding),this.encoding=t.encoding)}function f(t){if(r=r||A("./_stream_duplex"),!(this instanceof f))return new f(t);this._readableState=new h(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function d(t,e,n,i,r){var s,o=t._readableState;null===e?(o.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,C(t)}(t,o)):(r||(s=function(t,e){var n;(function(t){return a.isBuffer(t)||t instanceof l})(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(o,e)),s?t.emit("error",s):o.objectMode||e&&0<e.length?("string"==typeof e||o.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=function(t){return a.from(t)}(e)),i?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):p(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(e=o.decoder.write(e),o.objectMode||0!==e.length?p(t,o,e,!1):x(t,o)):p(t,o,e,!1))):i||(o.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(o)}function p(t,e,n,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&C(t)),x(t,e)}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),f.prototype.destroy=i.destroy,f.prototype._undestroy=i.undestroy,f.prototype._destroy=function(t,e){this.push(null),e(t)},f.prototype.push=function(t,e){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=a.from(t,e),e=""),n=!0),d(this,t,e,!1,n)},f.prototype.unshift=function(t){return d(this,t,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(t){return o||(o=A("string_decoder/").StringDecoder),this._readableState.decoder=new o(t),this._readableState.encoding=t,this};var b=8388608;function w(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return b<=t?t=b:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function C(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(_("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?m(k,t):k(t))}function k(t){_("emit readable"),t.emit("readable"),O(t)}function x(t,e){e.readingMore||(e.readingMore=!0,m(T,t,e))}function T(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(_("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function S(t){_("readable nexttick read 0"),t.read(0)}function E(t,e){e.reading||(_("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),O(t),e.flowing&&!e.reading&&t.read(0)}function O(t){var e=t._readableState;for(_("flow",e.flowing);e.flowing&&null!==t.read(););}function P(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var i;t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,i=1,r=n.data;t-=r.length;for(;n=n.next;){var s=n.data,o=t>s.length?s.length:t;if(o===s.length?r+=s:r+=s.slice(0,t),0===(t-=o)){o===s.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=s.slice(o);break}++i}return e.length-=i,r}(t,e):function(t,e){var n=a.allocUnsafe(t),i=e.head,r=1;i.data.copy(n),t-=i.data.length;for(;i=i.next;){var s=i.data,o=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,o),0===(t-=o)){o===s.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i).data=s.slice(o);break}++r}return e.length-=r,n}(t,e);return i}(t,e.buffer,e.decoder),n);var n}function N(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,m(M,e,t))}function M(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function D(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}f.prototype.read=function(t){_("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return _("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?N(this):C(this),null;if(0===(t=w(t,e))&&e.ended)return 0===e.length&&N(this),null;var i,r=e.needReadable;return _("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&_("length less than watermark",r=!0),e.ended||e.reading?_("reading or ended",r=!1):r&&(_("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=w(n,e))),null===(i=0<t?P(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&N(this)),null!==i&&this.emit("data",i),i},f.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(n,t){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=n;break;case 1:r.pipes=[r.pipes,n];break;default:r.pipes.push(n)}r.pipesCount+=1,_("pipe count=%d opts=%j",r.pipesCount,t);var e=(!t||!1!==t.end)&&n!==g.stdout&&n!==g.stderr?o:p;function s(t,e){_("onunpipe"),t===i&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,_("cleanup"),n.removeListener("close",f),n.removeListener("finish",d),n.removeListener("drain",a),n.removeListener("error",h),n.removeListener("unpipe",s),i.removeListener("end",o),i.removeListener("end",p),i.removeListener("data",c),l=!0,!r.awaitDrain||n._writableState&&!n._writableState.needDrain||a())}function o(){_("onend"),n.end()}r.endEmitted?m(e):i.once("end",e),n.on("unpipe",s);var a=function(e){return function(){var t=e._readableState;_("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&y(e,"data")&&(t.flowing=!0,O(e))}}(i);n.on("drain",a);var l=!1;var u=!1;function c(t){_("ondata"),(u=!1)!==n.write(t)||u||((1===r.pipesCount&&r.pipes===n||1<r.pipesCount&&-1!==D(r.pipes,n))&&!l&&(_("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,u=!0),i.pause())}function h(t){_("onerror",t),p(),n.removeListener("error",h),0===y(n,"error")&&n.emit("error",t)}function f(){n.removeListener("finish",d),p()}function d(){_("onfinish"),n.removeListener("close",f),p()}function p(){_("unpipe"),i.unpipe(n)}return i.on("data",c),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?v(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(n,"error",h),n.once("close",f),n.once("finish",d),n.emit("pipe",i),r.flowing||(_("pipe resume"),i.resume()),n},f.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var i=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<r;s++)i[s].emit("unpipe",this,n);return this}var o=D(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},f.prototype.addListener=f.prototype.on=function(t,e){var n=s.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&C(this):m(S,this))}return n},f.prototype.resume=function(){var t=this._readableState;return t.flowing||(_("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,m(E,t,e))}(this,t)),this},f.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(e){var n=this._readableState,i=!1,r=this;for(var t in e.on("end",function(){if(_("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),e.on("data",function(t){_("wrapped data"),n.decoder&&(t=n.decoder.write(t)),n.objectMode&&null==t||(n.objectMode||t&&t.length)&&(r.push(t)||(i=!0,e.pause()))}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var s=0;s<c.length;s++)e.on(c[s],r.emit.bind(r,c[s]));return r._read=function(t){_("wrapped _read",t),i&&(i=!1,e.resume())},r},f._fromList=P}).call(this,A("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":281,"./internal/streams/BufferList":286,"./internal/streams/destroy":287,"./internal/streams/stream":288,_process:275,"core-util-is":268,events:269,inherits:271,isarray:273,"process-nextick-args":274,"safe-buffer":293,"string_decoder/":299,util:265}],284:[function(t,e,n){e.exports=o;var i=t("./_stream_duplex"),r=t("core-util-is");function s(n){this.afterTransform=function(t,e){return function(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("write callback called multiple times"));i.writechunk=null,(i.writecb=null)!=n&&t.push(n);r(e);var s=t._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&t._read(s.highWaterMark)}(n,t,e)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function o(t){if(!(this instanceof o))return new o(t);i.call(this,t),this._transformState=new s(this);var n=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,e){a(n,t,e)}):a(n)})}function a(t,e,n){if(e)return t.emit("error",e);null!=n&&t.push(n);var i=t._writableState,r=t._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=t("inherits"),r.inherits(o,i),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;i.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},{"./_stream_duplex":281,"core-util-is":268,inherits:271}],285:[function(C,k,t){(function(t,e){var o=C("process-nextick-args");function h(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var i=t.entry;t.entry=null;for(;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}k.exports=g;var s,a=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?setImmediate:o;g.WritableState=p;var n=C("core-util-is");n.inherits=C("inherits");var i={deprecate:C("util-deprecate")},r=C("./internal/streams/stream"),c=C("safe-buffer").Buffer,l=e.Uint8Array||function(){};var u,f=C("./internal/streams/destroy");function d(){}function p(t,e){s=s||C("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,e instanceof s&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,r=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,r){--e.pendingcb,n?(o(r,i),o(w,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(r(i),t._writableState.errorEmitted=!0,t.emit("error",i),w(t,e))}(t,n,i,e,r);else{var s=_(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||y(t,n),i?a(v,t,n,s,r):v(t,n,s,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}function g(t){if(s=s||C("./_stream_duplex"),!(u.call(g,this)||this instanceof s))return new g(t);this._writableState=new p(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),r.call(this)}function m(t,e,n,i,r,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,s,e.onwrite),e.sync=!1}function v(t,e,n,i){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),w(t,e)}function y(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=new Array(i),s=e.corkedRequestsFree;s.entry=n;for(var o=0,a=!0;n;)(r[o]=n).isBuf||(a=!1),n=n.next,o+=1;r.allBuffers=a,m(t,e,!0,e.length,r,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new h(e)}else{for(;n;){var l=n.chunk,u=n.encoding,c=n.callback;if(m(t,e,!1,e.objectMode?1:l.length,l,u,c),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function _(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function b(e,n){e._final(function(t){n.pendingcb--,t&&e.emit("error",t),n.prefinished=!0,e.emit("prefinish"),w(e,n)})}function w(t,e){var n=_(e);return n&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o(b,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}n.inherits(g,r),p.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(p.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(t){return!!u.call(this,t)||t&&t._writableState instanceof p}})):u=function(t){return t instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(t,e,n){var i=this._writableState,r=!1,s=function(t){return c.isBuffer(t)||t instanceof l}(t)&&!i.objectMode;return s&&!c.isBuffer(t)&&(t=function(t){return c.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=d),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o(e,n)}(this,n):(s||function(t,e,n,i){var r=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o(i,s),r=!1),r}(this,i,t,n))&&(i.pendingcb++,r=function(t,e,n,i,r,s){if(!n){var o=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,n));return e}(e,i,r);i!==o&&(n=!0,r="buffer",i=o)}var a=e.objectMode?1:i.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else m(t,e,!1,a,i,r,s);return l}(this,i,s,t,e,n)),r},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||y(this,t))},g.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},g.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,e=t=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,n){e.ending=!0,w(t,e),n&&(e.finished?o(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,i,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),g.prototype.destroy=f.destroy,g.prototype._undestroy=f.undestroy,g.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,C("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":281,"./internal/streams/destroy":287,"./internal/streams/stream":288,_process:275,"core-util-is":268,inherits:271,"process-nextick-args":274,"safe-buffer":293,"util-deprecate":303}],286:[function(t,e,n){var a=t("safe-buffer").Buffer;function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.head=null,this.tail=null,this.length=0}e.exports=(i.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},i.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},i.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},i.prototype.concat=function(t){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,r=a.allocUnsafe(t>>>0),s=this.head,o=0;s;)e=s.data,n=r,i=o,e.copy(n,i),o+=s.data.length,s=s.next;return r},i)},{"safe-buffer":293}],287:[function(t,e,n){var s=t("process-nextick-args");function o(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var n=this,i=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;i||r?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||s(o,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(s(o,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":274}],288:[function(t,e,n){e.exports=t("events").EventEmitter},{events:269}],289:[function(t,e,n){e.exports=t("./readable").PassThrough},{"./readable":290}],290:[function(t,e,n){(((n=e.exports=t("./lib/_stream_readable.js")).Stream=n).Readable=n).Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":281,"./lib/_stream_passthrough.js":282,"./lib/_stream_readable.js":283,"./lib/_stream_transform.js":284,"./lib/_stream_writable.js":285}],291:[function(t,e,n){e.exports=t("./readable").Transform},{"./readable":290}],292:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":285}],293:[function(t,e,n){var i=t("buffer"),r=i.Buffer;function s(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(s(i,n),n.Buffer=o),s(r,o),o.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},o.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},{buffer:266}],294:[function(t,e,n){e.exports=i;var c=t("events").EventEmitter;function i(){c.call(this)}t("inherits")(i,c),i.Readable=t("readable-stream/readable.js"),i.Writable=t("readable-stream/writable.js"),i.Duplex=t("readable-stream/duplex.js"),i.Transform=t("readable-stream/transform.js"),i.PassThrough=t("readable-stream/passthrough.js"),(i.Stream=i).prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",r),e._isStdio||t&&!1===t.end||(n.on("end",o),n.on("close",a));var s=!1;function o(){s||(s=!0,e.end())}function a(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(t){if(u(),0===c.listenerCount(this,"error"))throw t}function u(){n.removeListener("data",i),e.removeListener("drain",r),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",l),e.on("error",l),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},{events:269,inherits:271,"readable-stream/duplex.js":280,"readable-stream/passthrough.js":289,"readable-stream/readable.js":290,"readable-stream/transform.js":291,"readable-stream/writable.js":292}],295:[function(e,t,n){(function(l){var u=e("./lib/request"),c=e("xtend"),t=e("builtin-status-codes"),h=e("url"),i=n;i.request=function(t,e){t="string"==typeof t?h.parse(t):c(t);var n=-1===l.location.protocol.search(/^https?:$/)?"http:":"",i=t.protocol||n,r=t.hostname||t.host,s=t.port,o=t.path||"/";r&&-1!==r.indexOf(":")&&(r="["+r+"]"),t.url=(r?i+"//"+r:"")+(s?":"+s:"")+o,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var a=new u(t);return e&&a.on("response",e),a},i.get=function(t,e){var n=i.request(t,e);return n.end(),n},i.Agent=function(){},i.Agent.defaultMaxSockets=4,i.STATUS_CODES=t,i.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":297,"builtin-status-codes":267,url:301,xtend:304}],296:[function(t,e,a){(function(t){a.fetch=o(t.fetch)&&o(t.ReadableStream),a.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),a.blobConstructor=!0}catch(t){}var e;function n(){if(void 0!==e)return e;if(t.XMLHttpRequest){e=new t.XMLHttpRequest;try{e.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){e=null}}else e=null;return e}function i(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var r=void 0!==t.ArrayBuffer,s=r&&o(t.ArrayBuffer.prototype.slice);function o(t){return"function"==typeof t}a.arraybuffer=a.fetch||r&&i("arraybuffer"),a.msstream=!a.fetch&&s&&i("ms-stream"),a.mozchunkedarraybuffer=!a.fetch&&r&&i("moz-chunked-arraybuffer"),a.overrideMimeType=a.fetch||!!n()&&o(n().overrideMimeType),a.vbArray=o(t.VBArray),e=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],297:[function(f,d,t){(function(o,a,l){var u=f("./capability"),t=f("inherits"),e=f("./response"),r=f("readable-stream"),c=f("to-arraybuffer"),n=e.IncomingMessage,h=e.readyStates;var i=d.exports=function(e){var t,n=this;r.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+new l(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){n.setHeader(t,e.headers[t])});var i=!0;if("disable-fetch"===e.mode||"timeout"in e)t=!(i=!1);else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!u.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}n._mode=function(t,e){return u.fetch&&e?"fetch":u.mozchunkedarraybuffer?"moz-chunked-arraybuffer":u.msstream?"ms-stream":u.arraybuffer&&t?"arraybuffer":u.vbArray&&t?"text:vbarray":"text"}(t,i),n.on("finish",function(){n._onFinish()})};t(i,r.Writable),i.prototype.setHeader=function(t,e){var n=t.toLowerCase();-1===s.indexOf(n)&&(this._headers[n]={name:t,value:e})},i.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},i.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},i.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,i=e._headers,n=null;"GET"!==t.method&&"HEAD"!==t.method&&(n=u.blobConstructor?new a.Blob(e._body.map(function(t){return c(t)}),{type:(i["content-type"]||{}).value||""}):l.concat(e._body).toString());var r=[];if(Object.keys(i).forEach(function(t){var e=i[t].name,n=i[t].value;Array.isArray(n)?n.forEach(function(t){r.push([e,t])}):r.push([e,n])}),"fetch"===e._mode)a.fetch(e._opts.url,{method:e._opts.method,headers:r,body:n||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)});else{var s=e._xhr=new a.XMLHttpRequest;try{s.open(e._opts.method,e._opts.url,!0)}catch(t){return void o.nextTick(function(){e.emit("error",t)})}"responseType"in s&&(s.responseType=e._mode.split(":")[0]),"withCredentials"in s&&(s.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in t&&(s.timeout=t.timeout,s.ontimeout=function(){e.emit("timeout")}),r.forEach(function(t){s.setRequestHeader(t[0],t[1])}),e._response=null,s.onreadystatechange=function(){switch(s.readyState){case h.LOADING:case h.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(s.onprogress=function(){e._onXHRProgress()}),s.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{s.send(n)}catch(t){return void o.nextTick(function(){e.emit("error",t)})}}}},i.prototype._onXHRProgress=function(){!function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}}(this._xhr)||this._destroyed||(this._response||this._connect(),this._response._onXHRProgress())},i.prototype._connect=function(){var e=this;e._destroyed||(e._response=new n(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},i.prototype._write=function(t,e,n){this._body.push(t),n()},i.prototype.abort=i.prototype.destroy=function(){this._destroyed=!0,this._response&&(this._response._destroyed=!0),this._xhr&&this._xhr.abort()},i.prototype.end=function(t,e,n){"function"==typeof t&&(n=t,t=void 0),r.Writable.prototype.end.call(this,t,e,n)},i.prototype.flushHeaders=function(){},i.prototype.setTimeout=function(){},i.prototype.setNoDelay=function(){},i.prototype.setSocketKeepAlive=function(){};var s=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,f("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},f("buffer").Buffer)},{"./capability":296,"./response":298,_process:275,buffer:266,inherits:271,"readable-stream":290,"to-arraybuffer":300}],298:[function(n,t,i){(function(a,l,u){var c=n("./capability"),t=n("inherits"),h=n("readable-stream"),f=i.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},e=i.IncomingMessage=function(t,e,n){var i=this;if(h.Readable.call(i),i._mode=n,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",function(){a.nextTick(function(){i.emit("close")})}),"fetch"===n){i._fetchResponse=e,i.url=e.url,i.statusCode=e.status,i.statusMessage=e.statusText,e.headers.forEach(function(t,e){i.headers[e.toLowerCase()]=t,i.rawHeaders.push(e,t)});var r=e.body.getReader();!function e(){r.read().then(function(t){i._destroyed||(t.done?i.push(null):(i.push(new u(t.value)),e()))}).catch(function(t){i.emit("error",t)})}()}else{if(i._xhr=t,i._pos=0,i.url=t.responseURL,i.statusCode=t.status,i.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===i.headers[n]&&(i.headers[n]=[]),i.headers[n].push(e[2])):void 0!==i.headers[n]?i.headers[n]+=", "+e[2]:i.headers[n]=e[2],i.rawHeaders.push(e[1],e[2])}}),i._charset="x-user-defined",!c.overrideMimeType){var s=i.rawHeaders["mime-type"];if(s){var o=s.match(/;\s*charset=([^;])(;|$)/);o&&(i._charset=o[1].toLowerCase())}i._charset||(i._charset="utf-8")}}};t(e,h.Readable),e.prototype._read=function(){},e.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==f.DONE)break;try{n=new l.VBArray(t.responseBody).toArray()}catch(t){}if(null!==n){e.push(new u(n));break}case"text":try{n=t.responseText}catch(t){e._mode="text:vbarray";break}if(n.length>e._pos){var i=n.substr(e._pos);if("x-user-defined"===e._charset){for(var r=new u(i.length),s=0;s<i.length;s++)r[s]=255&i.charCodeAt(s);e.push(r)}else e.push(i,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==f.DONE||!t.response)break;n=t.response,e.push(new u(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==f.LOADING||!n)break;e.push(new u(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==f.LOADING)break;var o=new l.MSStreamReader;o.onprogress=function(){o.result.byteLength>e._pos&&(e.push(new u(new Uint8Array(o.result.slice(e._pos)))),e._pos=o.result.byteLength)},o.onload=function(){e.push(null)},o.readAsArrayBuffer(n)}e._xhr.readyState===f.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,n("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},n("buffer").Buffer)},{"./capability":296,_process:275,buffer:266,inherits:271,"readable-stream":290}],299:[function(t,e,n){var i=t("safe-buffer").Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�".repeat(n);if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�".repeat(n+1);if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�".repeat(n+2)}}(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var n=t.toString("utf16le",e);if(n){var i=n.charCodeAt(n.length-1);if(55296<=i&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0==n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}(n.StringDecoder=s).prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�".repeat(this.lastTotal-this.lastNeed):e},s.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var r=o(e[i]);if(0<=r)return 0<r&&(t.lastNeed=r-1),r;if(--i<n)return 0;if(0<=(r=o(e[i])))return 0<r&&(t.lastNeed=r-2),r;if(--i<n)return 0;if(0<=(r=o(e[i])))return 0<r&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":293}],300:[function(t,e,n){var r=t("buffer").Buffer;e.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,i=0;i<n;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},{buffer:266}],301:[function(t,e,n){var A=t("punycode"),I=t("./util");function E(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=s,n.resolve=function(t,e){return s(t,!1,!0).resolve(e)},n.resolveObject=function(t,e){return t?s(t,!1,!0).resolveObject(e):e},n.format=function(t){I.isString(t)&&(t=s(t));return t instanceof E?t.format():E.prototype.format.call(t)},n.Url=E;var R=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,L=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),q=["'"].concat(r),j=["%","/","?",";","#"].concat(q),z=["/","?","#"],F=/^[+a-z0-9A-Z_-]{0,63}$/,H=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,B={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},$={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},W=t("querystring");function s(t,e,n){if(t&&I.isObject(t)&&t instanceof E)return t;var i=new E;return i.parse(t,e,n),i}E.prototype.parse=function(t,e,n){if(!I.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===t?"undefined":_typeof(t)));var i=t.indexOf("?"),r=-1!==i&&i<t.indexOf("#")?"?":"#",s=t.split(r);s[0]=s[0].replace(/\\/g,"/");var o=t=s.join(r);if(o=o.trim(),!n&&1===t.split("#").length){var a=L.exec(o);if(a)return this.path=o,this.href=o,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?W.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=R.exec(o);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,o=o.substr(l.length)}if(n||l||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===o.substr(0,2);!c||l&&U[l]||(o=o.substr(2),this.slashes=!0)}if(!U[l]&&(c||l&&!$[l])){for(var h,f,d=-1,p=0;p<z.length;p++){-1!==(g=o.indexOf(z[p]))&&(-1===d||g<d)&&(d=g)}-1!==(f=-1===d?o.lastIndexOf("@"):o.lastIndexOf("@",d))&&(h=o.slice(0,f),o=o.slice(f+1),this.auth=decodeURIComponent(h)),d=-1;for(p=0;p<j.length;p++){var g;-1!==(g=o.indexOf(j[p]))&&(-1===d||g<d)&&(d=g)}-1===d&&(d=o.length),this.host=o.slice(0,d),o=o.slice(d),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var v=this.hostname.split(/\./),y=(p=0,v.length);p<y;p++){var _=v[p];if(_&&!_.match(F)){for(var b="",w=0,C=_.length;w<C;w++)127<_.charCodeAt(w)?b+="x":b+=_[w];if(!b.match(F)){var k=v.slice(0,p),x=v.slice(p+1),T=_.match(H);T&&(k.push(T[1]),x.unshift(T[2])),x.length&&(o="/"+x.join(".")+o),this.hostname=k.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=A.toASCII(this.hostname));var S=this.port?":"+this.port:"",E=this.hostname||"";this.host=E+S,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!B[u])for(p=0,y=q.length;p<y;p++){var O=q[p];if(-1!==o.indexOf(O)){var P=encodeURIComponent(O);P===O&&(P=escape(O)),o=o.split(O).join(P)}}var N=o.indexOf("#");-1!==N&&(this.hash=o.substr(N),o=o.slice(0,N));var M=o.indexOf("?");if(-1!==M?(this.search=o.substr(M),this.query=o.substr(M+1),e&&(this.query=W.parse(this.query)),o=o.slice(0,M)):e&&(this.search="",this.query={}),o&&(this.pathname=o),$[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){S=this.pathname||"";var D=this.search||"";this.path=S+D}return this.href=this.format(),this},E.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&I.isObject(this.query)&&Object.keys(this.query).length&&(s=W.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||$[e])&&!1!==r?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),o&&"?"!==o.charAt(0)&&(o="?"+o),e+r+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(o=o.replace("#","%23"))+i},E.prototype.resolve=function(t){return this.resolveObject(s(t,!1,!0)).format()},E.prototype.resolveObject=function(t){if(I.isString(t)){var e=new E;e.parse(t,!1,!0),t=e}for(var n=new E,i=Object.keys(this),r=0;r<i.length;r++){var s=i[r];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];"protocol"!==l&&(n[l]=t[l])}return $[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!$[t.protocol]){for(var u=Object.keys(t),c=0;c<u.length;c++){var h=u[c];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||U[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var d=n.pathname||"",p=n.search||"";n.path=d+p}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),m=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=m||g||n.host&&t.pathname,y=v,_=n.pathname&&n.pathname.split("/")||[],b=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!$[n.protocol]);if(b&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),v=v&&(""===f[0]||""===_[0])),m)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),n.search=t.search,n.query=t.query;else if(!I.isNullOrUndefined(t.search)){if(b)n.hostname=n.host=_.shift(),(T=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift());return n.search=t.search,n.query=t.query,I.isNull(n.pathname)&&I.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var w=_.slice(-1)[0],C=(n.host||t.host||1<_.length)&&("."===w||".."===w)||""===w,k=0,x=_.length;0<=x;x--)"."===(w=_[x])?_.splice(x,1):".."===w?(_.splice(x,1),k++):k&&(_.splice(x,1),k--);if(!v&&!y)for(;k--;)_.unshift("..");!v||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),C&&"/"!==_.join("/").substr(-1)&&_.push("");var T,S=""===_[0]||_[0]&&"/"===_[0].charAt(0);b&&(n.hostname=n.host=S?"":_.length?_.shift():"",(T=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift()));return(v=v||n.host&&_.length)&&!S&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),I.isNull(n.pathname)&&I.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},E.prototype.parseHost=function(){var t=this.host,e=i.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":302,punycode:276,querystring:279}],302:[function(t,e,n){e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===(void 0===t?"undefined":_typeof(t))&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],303:[function(t,e,n){(function(n){function i(t){try{if(!n.localStorage)return!1}catch(t){return!1}var e=n.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}e.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],304:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},{}]},{},[15])(15)});