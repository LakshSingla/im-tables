!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).imtables=t()}}(function(){return function o(s,a,l){function u(n,t){if(!a[n]){if(!s[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(c)return c(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=a[n]={exports:{}};s[n][0].call(r.exports,function(t){var e=s[n][1][t];return u(e||t)},r,r.exports,o,s,a,l)}return a[n].exports}for(var c="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(e,t,n){(function(){var r,t,s,a,o,l,u;a=e("es6-promise").Promise,u=e("underscore"),r=e("jquery"),t={server:"http://cdn.intermine.org",imtables:"/js/intermine/im-tables/2.0.0-beta/",tests:{fontawesome:/font-awesome/,glyphicons:/bootstrap-icons/},resources:{prettify:["/js/google-code-prettify/latest/prettify.js"],d3:"/js/d3/3.0.6/d3.v3.min.js",glyphicons:"/css/bootstrap/2.3.2/css/bootstrap-icons.css",fontawesome:"/css/font-awesome/4.x/css/font-awesome.min.css",filesaver:"/js/filesaver.js/FileSaver.min.js"}},(s=e("./options")).set("CDN",t),o=function(e){var t;return null!=e&&(t=u.asArray(document.querySelectorAll('link[rel="stylesheet"]')),u.any(t,function(t){return e.test(t.href)}))},l=function(i){return function(t,e){var n;return n=new a(function(t){return u.delay(t,50,!0)}),/\.css$/.test(t)?(o(e)||r('<link type="text/css" rel="stylesheet">').appendTo("head").attr({href:i+t}),n):r.ajax({url:i+t,cache:!0,dataType:"script"}).then(function(){return n})}},n.load=function(t){var i,r,o,e,n;return e=s.get("CDN.server"),r=s.get(["CDN","resources",t]),n=s.get(["CDN","tests",t]),o=l(e),r?u.isArray(r)?a.all(function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(o(i));return n}()):o(r,n):a.reject("No resource is configured for "+t)}}).call(this)},{"./options":63,"es6-promise":238,jquery:256,underscore:262}],2:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty,n=[].slice;function a(){return a.__super__.constructor.apply(this,arguments)}t=i("backbone"),e=function(t){return!t},o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(a,t.Model),a.prototype.destroyed=!1,a.prototype.toggle=function(t){return this.swap(t,e)},a.prototype.swap=function(t,e){return this.set(t,e(this.get(t)))},a.prototype.toJSON=function(){return this.destroyed?"DESTROYED":a.__super__.toJSON.apply(this,arguments)},a.prototype.destroy=function(){if(!this.destroyed)return this.stopListening(),this.destroyed=!0,this.trigger("destroy",this,this.collection),this._frozen=[],this.clear(),this.off()},a.prototype._frozen=[],a.prototype._validate=function(t,e){var n,i,r,o,s;for(r=0,o=(s=this._frozen).length;r<o;r++)if((i=s[r])in t&&t[i]!==this.get(i)){if(n=i+" is frozen (trying to set it to "+t[i]+" - is "+this.get(i)+")",!e.merge)throw new Error(n);t[i]=this.get(i)}return a.__super__._validate.apply(this,arguments)},a.prototype.freeze=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this._frozen=this._frozen.concat(t),this},a)}).call(this)},{backbone:235}],3:[function(w,x,t){(function(){var c,t,h,r,p,e,n,i,o,s,a,f,d,m,l,u,_,g,y={}.hasOwnProperty,v=[].slice;function b(){return b.__super__.constructor.apply(this,arguments)}w("./shim"),t=w("backbone"),_=w("underscore"),c=w("jquery"),h=w("./core-model"),n=w("./messages"),i=w("./templates"),p=w("./icons"),r=w("./event"),s=w("./templates/helpers"),u=w("./utils/on-change"),e=i.template("progress-bar")({doneness:1}),a=0,o=function(){return a++},d=function(){return l.call(this,"model")},m=function(){return l.call(this,"state")},f=function(){return l.call(this,"collection")},l=function(t){var e,n,i,r;if(e=_.result(this,t+"Events"),_.size(e)){if(null==this[t])throw new Error("Cannot listen to "+t+" - it is null.");for(n in r=[],e){if(i=e[n],null==(i=_.isFunction(i)?i:this[i]))throw new Error("No handler for "+t+":"+n);r.push(this.listenTo(this[t],n,i))}return r}},x.exports=(function(t,e){for(var n in e)y.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(b,t.View),b.include=function(t){return _.extend(this.prototype,t)},b.prototype.hasOwnModel=!0,b.prototype.parameters=[],b.prototype.optionalParameters=[],b.prototype.parameterTypes={},b.prototype.initState=function(){},b.prototype.initialize=function(t){var e,n,i,r,o,s,a,l,u;for(null==t&&(t={}),this.state=t.state,r=null!=(a=_.result(this,"parameters"))?a:[],n=null!=(l=_.result(this,"optionalParameters"))?l:[],_.extend(this,_.pick.apply(_,[t].concat(v.call(r)))),o=0,s=n.length;o<s;o++)null!=t[i=n[o]]&&(this[i]=t[i]);return this.children={},e=this.Model||h,null!=(null!=(u=this.model)?u.toJSON:void 0)&&(this.hasOwnModel=!1),null==this.model&&(this.model=new e),null==this.model.toJSON&&(this.model=new e(this.model)),null==this.state&&(this.state=new h),null==this.state.toJSON&&(this.state=new h(this.state)),null!=this.RERENDER_EVENT&&this.listenTo(this.model,this.RERENDER_EVENT,this.reRender),this.on("rendering",this.preRender),this.on("rendered",this.postRender),this.assertInvariants(),this.initState(),d.call(this),m.call(this),f.call(this),this.listenTo(p,this.ICONS,function(){if(this.template)return this.reRender()}),this.listenTo(this.model,"destroy",function(){return this.remove()})},b.prototype.ICONS="change",b.prototype.stopListeningTo=function(t){return this.stopListening(t)},b.prototype.renderRequires=[],b.prototype.modelEvents={},b.prototype.stateEvents={},b.prototype.collectionEvents={},b.prototype.listenForChange=function(){var t,e,n;if(t=arguments[0],e=arguments[1],!(null!=(n=3<=arguments.length?v.call(arguments,2):[])?n.length:void 0))throw new Error("No properties listed");return this.listenTo(t,u(n),e)},b.prototype.renderError=function(t){return renderError(this.el)(t)},b.prototype.helpers=function(){return _.extend({IndeterminateProgressBar:e},s)},b.prototype.getBaseData=function(){var t;return s=_.result(this,"helpers"),t=_.result(this,"labels"),_.extend({state:this.state.toJSON(),Messages:n,Icons:p,labels:t},s)},b.prototype.getData=function(){var t,e;return _.extend(this.getBaseData(),this.model.toJSON(),{collection:null!=(t=null!=(e=this.collection)?e.toJSON():void 0)?t:[]})},b.prototype.reRender=function(){return this.rendered&&!this.removed&&this.render(),this},b.prototype.postRender=function(){},b.prototype.preRender=function(){},g=function(e,t){return _.all(t,function(t){return e.has(t)})},b.prototype.onRenderError=function(t){return console.error("RENDER FAILED",this,t),this.state.set({error:t})},b.prototype.render=function(){var e,t,n,i;if(!this.removed){if((null!=(i=_.result(this,"renderRequires"))?i.length:void 0)&&!g(this.model,i))return t=u(i),this.listenToOnce(this.model,t,this.render),this;if(n=new r(this.rendered),this.trigger("rendering",n),n.cancelled)return this;if(this.removeAllChildren(),null!=this.template)try{this.$el.html(this.template(this.getData()))}catch(t){e=t,this.onRenderError(e)}return this.renderChildren(),this.trigger("rendered",this.rendered=!0),this}},b.prototype.renderChildren=function(){},b.prototype.renderChild=function(t,e,n,i){if(null==n&&(n=this.el),null==i&&(i="append"),null==t&&(t=o()),this.removeChild(t),null==(this.children[t]=e))return this;switch(i){case"append":e.$el.appendTo(n);break;case"prepend":e.$el.prependTo(n);break;case"at":e.setElement(n[0]||n);break;default:throw new Error("Unknown position: "+i)}return e.render(),this},b.prototype.renderChildAt=function(t,e,n){return null==n&&(n=this.$(t)),this.renderChild(t,e,n,"at")},b.prototype.removeChild=function(t){var e;return null!=(e=this.children[t])&&e.remove(),delete this.children[t]},b.prototype.removeAllChildren=function(){var t,e,n,i,r;if(null!=this.children){for(r=[],e=0,n=(i=_.keys(this.children)).length;e<n;e++)t=i[e],r.push(this.removeChild(t));return r}},b.prototype.removed=!1,b.prototype.remove=function(){if(!this.removed)return this.stopListening(),this.removed=!0,this.$el.parent().trigger("childremoved",this),this.trigger("remove",this),this.hasOwnModel&&this.model.destroy(),this.removeAllChildren(),this.off(),b.__super__.remove.apply(this,arguments),this},b.prototype.make=function(t,e,n){var i,r,o,s,a,l,u;if(r=document.createElement(t),i=c(r),null!=e)for(o in e)s=e[o],"class"===o||"className"===o?i.addClass(s):i.attr(o,s);if(null!=n)if(_.isArray(n))for(l=0,u=n.length;l<u;l++)a=n[l],i.append(a);else i.append(n);return r},b.prototype.invariants=function(){return{}},b.prototype.assertInvariant=function(t,e){if(!t)throw new Error(e)},b.prototype.assertInvariants=function(){var t,e,n,i,r,o,s,a,l,u,c,h,p,f,d,m,g,y,v;for(s=null!=(f=_.result(this,"parameters"))?f:[],i=null!=(d=_.result(this,"optionalParameters"))?d:[],o=null!=(m=_.result(this,"parameterTypes"))?m:{},u=0,h=s.length;u<h;u++)l=this[r=s[u]],this.assertInvariant(null!=l,"Missing required option: "+r);for(c=0,p=(g=s.concat(i)).length;c<p;c++)null!=(a=o[r=g[c]])&&(l=this[r],t=a.test(l),n=a.message(r),this.assertInvariant(t,n));for(e in v=[],y=this.invariants())n=y[e],v.push(this.assertInvariant(_.result(this,e),n));return v},b)}).call(this)},{"./core-model":2,"./event":11,"./icons":14,"./messages":16,"./shim":66,"./templates":67,"./templates/helpers":68,"./utils/on-change":93,backbone:235,jquery:256,underscore:262}],4:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}t=o("../core-view"),n=o("../templates"),e=o("../messages"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.class="checkbox",i.prototype.template=n.template("checkbox"),i.prototype.getData=function(){return{checked:this.checked(),label:this.label?e.getText(this.label):null}},i.prototype.initialize=function(t){return this.attr=t.attr,this.label=t.label,i.__super__.initialize.apply(this,arguments)},i.prototype.checked=function(){return this.model.get(this.attr)},i.prototype.toggle=function(t){return null!=t&&t.stopPropagation(),this.model.toggle(this.attr)},i.prototype.events=function(){return{click:"toggle"}},i.prototype.modelEvents=function(){var t;return(t={})["change:"+this.attr]=this.setCheckboxState,t},i.prototype.setCheckboxState=function(){return null==this.cb&&(this.cb=this.$("input")[0]),this.cb.checked=this.model.get(this.attr)},i)}).call(this)},{"../core-view":3,"../messages":16,"../templates":67}],5:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}t=i("backbone"),e=i("../core-model"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t.Collection),n.prototype.model=e,n.prototype.close=function(){var t;for(this.trigger("close",this),this.off();t=this.pop();)t.collection===this&&(delete t.collection,t.destroy());return this.reset(),this.stopListening()},n)}).call(this)},{"../core-model":2,backbone:235}],6:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}n=o("underscore"),t=o("../core-view"),e=o("../templates"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.className="input-group",i.prototype.template=e.template("input-with-button"),i.prototype.getData=function(){return n.extend(this.getBaseData(),{value:this.model.get(this.sets),placeholder:this.placeholder,button:this.button})},i.prototype.initialize=function(t){return this.placeholder=t.placeholder,this.button=t.button,this.sets=t.sets,i.__super__.initialize.apply(this,arguments),null!=this.sets?this.sets:this.sets="value"},i.prototype.postRender=function(){return this.$el.addClass(this.className)},i.prototype.modelEvents=function(){var t;return(t={})["change:"+this.sets]=this.setDomValue,t},i.prototype.events=function(){return{"keyup input":"setModelValue","click button":"act"}},i.prototype.setModelValue=function(t){return this.model.set(this.sets,t.target.value)},i.prototype.setDomValue=function(){var t,e;if(e=this.model.get(this.sets),(t=this.$("input")).val()!==e)return t.val(e)},i.prototype.act=function(){return this.trigger("act",this.model.get(this.sets))},i)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],7:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}n=o("underscore"),t=o("../core-view"),e=o("../templates"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.className="form-group",i.prototype.template=e.template("input-with-label"),i.prototype.parameters=function(){return["attr","placeholder","label"]},i.prototype.optionalParameters=function(){return["getProblem","helpMessage"]},i.prototype.getProblem=function(t){return null},i.prototype.helpMessage=null,i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.setValidity()},i.prototype.setValidity=function(){return this.state.set({problem:this.getProblem(this.model.get(this.attr))})},i.prototype.getData=function(){return n.extend(this.getBaseData(),{value:this.model.get(this.attr),label:this.label,placeholder:this.placeholder,helpMessage:this.helpMessage,hasProblem:this.state.get("problem")})},i.prototype.postRender=function(){return this.$el.addClass(this.className),this.onChangeValidity()},i.prototype.events=function(){return{"keyup input":"setModelValue"}},i.prototype.stateEvents=function(){return{"change:problem":this.onChangeValidity}},i.prototype.modelEvents=function(){var t;return(t={})["change:"+this.attr]=this.onChangeValue,t},i.prototype.onChangeValue=function(){return this.setValidity(),this.setDOMValue()},i.prototype.onChangeValidity=function(){var t,e;return e=this.state.get("problem"),t=this.$(".help-block"),e?(this.$el.toggleClass("has-warning","warning"===e.level),this.$el.toggleClass("has-error","warning"!==e.level),null!=e.message&&t.text(Messages.getText(e.message)),t.slideDown()):(this.$el.removeClass("has-warning has-error"),t.slideUp())},i.prototype.setModelValue=function(t){return this.model.set(this.attr,this.$(t.target).val())},i.prototype.setDOMValue=function(){var t,e,n;if(e=(t=this.$("input")).val(),(n=this.model.get(this.attr))!==e)return t.val(n)},i)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],8:[function(e,n,t){(function(){var t,f,d,m,r={}.hasOwnProperty,g=[].slice;function y(){return y.__super__.constructor.apply(this,arguments)}m=e("underscore"),t=e("../core-model"),d=function(t,e){var n;return n=t[e],m.isObject(n)?n:t[e]={}},f=function(t){return m.isObject(t)&&!m.isFunction(t)&&!m.isArray(t)},n.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(y,t),y.prototype._triggerChangeRecursively=function(t,e){var n,i,r,o;for(n in o=[],e)r=e[n],i=t+"."+n,m.isObject(r)?o.push(this._triggerChangeRecursively(i,r)):o.push(this.trigger("change:"+i,this,this.get(i)));return o},y.prototype.get=function(t){var e;return m.isArray(t)?(e=t[0],(2<=t.length?g.call(t,1):[]).reduce(function(t,e){return t&&t[e]},y.__super__.get.call(this,e))):/\w+\.\w+/.test(t)?this.get(t.split(/\./)):y.__super__.get.call(this,t)},y.prototype.pick=function(){var t,e;return t=1<=arguments.length?g.call(arguments,0):[],m.object(m.flatten(t).map((e=this,function(t){return[t,e.get(t)]})))},y.prototype._triggerPathChange=function(t,e){var n,i,r,o,s;for(n=[],this.trigger("change",this,t.join("."),e),s=[],r=0,o=t.length;r<o;r++)i=t[r],n.push(i),s.push(this.trigger("change:"+n.join("."),this,this.get(n)));return s},y.prototype._triggerUnsetPath=function(t,e){var n,i,r;if(m.isObject(e)){for(n in r=[],e)i=e[n],r.push(this._triggerUnsetPath(t.concat([n]),i));return r}return this.trigger("change:"+t.join("."))},y.prototype.set=function(t,e){var n,i,r,o,s,a,l,u,c,h,p;if(null==t)throw new Error("No key");if(!m.isArray(t)){if(m.isString(t))return/\w+\.\w+/.test(t)?this.set(t.split(/\./),e):m.isObject(e)&&!m.isArray(e)?this.set([t],e):y.__super__.set.apply(this,arguments);for(s in p=[],t)c=t[s],p.push(this.set(s,c));return p}if(f(e))for(s in e)c=e[s],this.set(t.concat([s]),c);else if(r=t[0],a=3<=t.length?g.call(t,1,h=t.length-1):(h=1,[]),i=t[h++],!(o=this.get(r))||!m.isFunction(o)&&m.isObject(o)||this.unset(r),u=null!=o?o:{},l=(n=a.reduce(d,u))[i],n[i]=e,y.__super__.set.call(this,r,u),this._triggerPathChange(t,e),null!=l&&null==e)return this._triggerUnsetPath(t,l)},y)}).call(this)},{"../core-model":2,underscore:262}],9:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}n=o("underscore"),e=o("../templates"),t=o("./input-with-label"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.parameters=function(){return["model","collection","attr","label","optionLabel"]},i.prototype.optionalParameters=function(){return["noOptionsMessage"].concat(i.__super__.optionalParameters.apply(this,arguments))},i.prototype.template=e.template("select-with-label"),i.prototype.noOptionsMessage="core.NoOptions",i.prototype.events=function(){return{"change select":"setModelValue"}},i.prototype.collectionEvents=function(){return{"add remove reset change":this.reRender}},i.prototype.getData=function(){var e;return e=this.model.get(this.attr),n.extend(this.getBaseData(),{label:this.label,model:this.model.toJSON(),selected:function(t){return t.name===e},options:this.collection.toJSON(),optionLabel:this.optionLabel,helpMessage:this.helpMessage,noOptionsMessage:this.noOptionsMessage,hasProblem:this.state.get("problem")})},i)}).call(this)},{"../templates":67,"./input-with-label":7,underscore:262}],10:[function(m,t,g){(function(){var t,e,n,i,r,o,s,a,l,u,c,h,p=[].slice;function f(t,e){if(this.type=t,this.name=e,!(this instanceof f))return new f(this.type,this.name)}function d(t,e){this.name=t,this.structure=e,this._msg=null}h=m("underscore"),e=m("backbone"),r=m("../core-model"),i=m("./collection"),g.assertMatch=function(t,e,n){if(null==n&&(n="value"),!t.test(e))throw new Error(t.message(n))},f.prototype.test=function(t){return t instanceof this.type},f.prototype.message=function(t){return t+" is not an instance of "+this.name},s=f,d.prototype.failValidation=function(t){return this._msg=t,!1},d.prototype.test=function(t){var e,n,i,r;if((this._msg=null)==t)return this.failValidation("it is null");if(null==t)return!1;for(n in r=this.structure)if(i=r[n],e=t[n],!i.test(e))return this.failValidation(i.message("."+n));return!0},d.prototype.message=function(t){return t+" failed "+this.name+" validation, because "+this._msg},c=d,g.InstanceOf=s,g.Structure=c,g.Model=new s(e.Model,"Backbone.Model"),g.CoreModel=new s(r,"core-model"),g.CoreCollection=new s(i,"core/collection"),g.Array=l={name:"array",test:h.isArray,message:function(t){return t+" is not an array"}},g.ArrayOf=t=function(n){return{name:"array of "+n.name,test:function(t){return this.passed=l.test(t)&&h.all(t,n.test)},message:function(t){var e;return t+" is not an array of "+(null!=(e=n.name)?e:"the correct type")}}},g.Function={name:"function",test:h.isFunction,message:function(t){return t+" is not a function"}},g.Number={name:"number",test:h.isNumber,message:function(t){return t+" is not a number"}},g.String=u={name:"string",test:h.isString,message:function(t){return t+" is not a string"}},g.Maybe=function(e){return{name:"maybe "+e.name,test:function(t){return null==t||e.test(t)},message:function(t){return e.message(t)}}},g.Callable=n={name:"callable",test:function(t){return null!=t&&h.isFunction(t.call)},message:function(t){return t+" is not callable"}},g.HasProperty=function(e){return{name:"has-property("+e+")",test:function(t){return null!=t&&e in t},message:function(t){return t+"."+e+" not found"}}},g.UnionOf=function(){var t;return t=1<=arguments.length?p.call(arguments,0):[],{name:function(){return"Union of "+t.map(function(t){return t.name}).join(", ")},test:function(e){return h.all(t,(n=this,function(t){return(n._t=t).test(e)}));var n},message:function(t){var e;return null!=(e=this._t)?e.message(t):void 0}}},g.Listenable=new c("Listenable",{on:g.Function,off:g.Function}),g.Service=a=new c("Service",{root:u,query:n,fetchModel:n,fetchLists:n,count:n,whoami:n}),g.DataModel=o=new c("imjs.Model",{name:u,makePath:n,findCommonType:n}),g.Query=new c("Query",{service:a,model:o,rows:n,count:n,toXML:n,root:u,views:t(u)})}).call(this)},{"../core-model":2,"./collection":5,backbone:235,underscore:262}],11:[function(t,e,n){(function(){function t(t,e){this.data=t,this.target=e}e.exports=(t.prototype.cancel=function(){return this.cancelled=!0},t.prototype.preventDefault=function(){return this.cancel()},t.prototype.stopPropagation=function(){},t)}).call(this)},{}],12:[function(t,e,n){(function(){n.suppress=function(t){return null!=t&&t.preventDefault(),null!=t?t.stopPropagation():void 0}}).call(this)},{}],13:[function(a,t,l){(function(){var t,i,e,r,c,h,n,o,s;s=a("underscore"),i=a("./templates"),t=a("./core/nested-model"),o=function(t){return t.isAttribute()?t.getParent().getType():t.getType()},h=function(t){var e;return[(e=o(t)).name].concat(t.model.getAncestorsOf(e))},e=function(t){return!!t},c=new t,l.getFormatter=n=function(t){var e,n,i,r,o,s,a,l,u;if(null==t||t.isRoot())throw new Error("No path or path is root");for(s=t.model,o=null!=(u=c.get([s.name]))?u:{},n=h(t),i=t.end.name,a=0,l=n.length;a<l;a++)if(!0===(r=o[(e=n[a])+"."+i]||o[e+".*"])&&(r=o[e]),null!=r)return r;return null},l.shouldFormat=function(t){if(null==t)throw new Error("no path");return!!t.isAttribute()&&e(n(t))},l.registerFormatter=function(t,e,n,i){if(null==i&&(i=["*"]),null==(null!=t?t.call:void 0))throw new Error("formatter is not a function");return 1===i.length&&"*"!==i[0]?c.set([e,n+"."+i[0]],t):(c.set([e,n],t),r(e,n,i))},l.disableFormatter=function(t,e,n){var i,r,o,s;for(null==n&&(n=["*"]),s=[],r=0,o=n.length;r<o;r++)i=n[r],s.push(c.set([t,e+"."+i],!1));return s},l.list=function(t){var e,n,i;for(e in i=[],n=c.get([t]))n[e]&&i.push(e);return i},l.enableFormatter=r=function(t,e,n){var i,r,o,s;for(null==n&&(n=["*"]),s=[],r=0,o=n.length;r<o;r++)i=n[r],s.push(c.set([t,e+"."+i],!0));return s},l.defaultFormatter=function(t,e,n){return null!=n?s.escape(n):i.null_value},l.reset=function(){return c.clear(),c.trigger("reset")}}).call(this)},{"./core/nested-model":8,"./templates":67,underscore:262}],14:[function(l,u,t){(function(){var i,t,e,n,r,a,o={}.hasOwnProperty;function s(){return s.__super__.constructor.apply(this,arguments)}a=l("underscore"),e=l("./core-model"),n=l("./options"),i={},r=function(t,e){return i[t]=a.extend({},e)},function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(s,e),s.prototype.icon=function(t,e,n){var i,r,o,s;return null==n&&(n={}),i=[],s=function(){var t;for(r in t=[],n)o=n[r],"className"!==r&&t.push(r+'="'+a.escape(o)+'"');return t}(),"className"in n&&i.push(a.escape(n.className)),i.push(this.iconClasses(t)),e&&i.push(this.getSize(e)),'<i class="'+i.join(" ")+'" '+s.join(" ")+"></i>"},s.prototype.iconWithProps=function(t,e){return this.icon(t,null,e)},s.prototype.getSize=function(t){var e;return null!=(e=this.get("size"+t.toUpperCase()))?e:""},s.prototype.iconClasses=function(t){return this.get("Base")+" "+this.get(t)},s.prototype._loadIconSet=function(){var t;if((t=i[this.options.get("icons")])&&(this.clear({silent:!0}),null!=t))return this.set(t)},s.prototype.initialize=function(t){return this.options=null!=t?t:n,this._loadIconSet(),this.listenTo(this.options,"change:icons",this._loadIconSet)},t=s,i.glyphicons={Base:"glyphicon",unsorted:"glyphicon-resize-vertical",ASC:"glyphicon-arrow-up",DESC:"glyphicon-arrow-down",headerIcon:"icon",headerIconRemove:"glyphicon-remove",headerIconHide:"glyphicon-minus",headerIconReveal:"glyphicon-fullscreen",SortStringASC:"glyphicon-sort-by-alphabet",SortStringDESC:"glyphicon-sort-by-alphabet-alt",SortNumericASC:"glyphicon-sort-by-order",SortNumericDESC:"glyphicon-sort-by-order-alt",RootClass:"glyphicon-stop",Yes:"glyphicon-star",No:"glyphicon-star-empty",Table:"glyphicon-list",Script:"glyphicon-console",Export:"glyphicon-cloud-download",Error:"glyphicon-warning-sign",Info:"glyphicon-info-sign",Warning:"glyphicon-warning-sign",Remove:"glyphicon-minus-sign",OK:"glyphicon-ok",Cancel:"glyphicon-remove",Check:"glyphicon-check",UnCheck:"glyphicon-unchecked",CheckUnCheck:"glyphicon-ok-none",Add:"glyphicon-plus-sign",Move:"glyphicon-move",More:"glyphicon-plus-sign",Filter:"glyphicon-filter",Summary:"glyphicon-stats",Undo:"glyphicon-refresh",Refresh:"glyphicon-refresh",Columns:"glyphicon-pause",Collapsed:"glyphicon-chevron-right",Expanded:"glyphicon-chevron-down",CollapsedSection:"glyphicon-triangle-right",ExpandedSection:"glyphicon-triangle-bottom",MoveDown:"glyphicon-chevron-down",GoBack:"glyphicon-chevron-left",GoForward:"glyphicon-chevron-right",MoveUp:"glyphicon-chevron-up",Toggle:"glyphicon-random",ExpandCollapse:"glyphicon-chevron-right icon-chevron-down",Help:"glyphicon-question-sign",ReverseRef:"glyphicon-retweet",Reorder:"glyphicon-menu-hamburger",Edit:"glyphicon-edit",ExtraValue:"glyphicon-map-marker",Tree:"glyphicon-plus",Download:"glyphicon-save-file",download:"glyphicon-cloud-download",Options:"glyphicon-tasks",ClipBoard:"glyphicon-paperclip",Composed:"glyphicon-tags",RemoveConstraint:"glyphicon-remove-sign",Dismiss:"glyphicon-remove-sign",ClosedReference:"glyphicon-expand",OpenReference:"glyphicon-collapse-down",Lock:"glyphicon-lock",Lists:"glyphicon-list-alt",Attribute:"glyphicon-unchecked",ExternalLink:"glyphicon-globe",tsv:"glyphicon-list",csv:"glyphicon-list",xml:"glyphicon-xml",json:"glyphicon-json",fake:"glyphicon-bug",Bug:"glyphicon-bug",Rubbish:"glyphicon-trash",RubbishFull:"glyphicon-trash",Joins:"glyphicon-link",Mail:"glyphicon-envelope"},i.fontawesome={Base:"fa",unsorted:"fa-unsorted",ASC:"fa-sort-up",DESC:"fa-sort-down",SortStringASC:"fa-sort-alpha-asc",SortStringDESC:"fa-sort-alpha-desc",SortNumericASC:"fa-sort-numeric-asc",SortNumericDESC:"fa-sort-numeric-desc",headerIcon:"fa",headerIconRemove:"fa-times",headerIconHide:"fa-ellipsis-h",headerIconReveal:"fa-arrows-h",sizeLG:"fa-2x",Yes:"fa-star",No:"fa-star-o",Table:"fa-list",EmptyTable:"fa-table",Script:"fa-file-code-o",Export:"fa-cloud-download",Remove:"fa-minus-circle",OK:"fa-check",Cancel:"fa-remove",Check:"fa-toggle-on",UnCheck:"fa-toggle-off",CheckUnCheck:"fa-toggle-on fa-toggle-off",Add:"fa-plus",Move:"fa-arrows",More:"fa-plus",Dropbox:"fa-dropbox",Drive:"fa-google",download:"fa-cloud-download",Galaxy:"fa-cloud-upload",GenomeSpace:"fa-cloud-upload",Filter:"fa-filter",Summary:"fa-bar-chart-o",Undo:"fa-undo",Refresh:"fa-refresh",Columns:"fa-columns",Collapsed:"fa-chevron-right",Expanded:"fa-chevron-down",CollapsedSection:"fa-caret-right",ExpandedSection:"fa-caret-down",MoveDown:"fa-chevron-down",GoBack:"fa-chevron-left",GoForward:"fa-chevron-right",MoveUp:"fa-chevron-up",Toggle:"fa-retweet",ExpandCollapse:"fa-chevron-right fa-chevron-down",Help:"fa-question-circle",Tree:"fa-sitemap",ReverseRef:"fa-retweet",Reorder:"fa-reorder",Options:"fa-tasks",Edit:"fa-edit",ExtraValue:"fa-database",Download:"fa-file-archive-o",ClipBoard:"fa-paperclip",Composed:"fa-tags",RemoveConstraint:"fa-times-circle",Dismiss:"fa-times-circle",Error:"fa-warning",Info:"fa-info-circle",Warning:"fa-warning",Lock:"fa-lock",RootClass:"fa-square",Attribute:"fa-tag",ClosedReference:"fa-plus-square",OpenReference:"fa-plus-square-o",CodeFile:"fa-file-code-o",Rubbish:"fa-trash-o",RubbishFull:"fa-trash",Joins:"fa-share-alt",ExternalLink:"fa-globe",Lists:"fa-cloud-upload",tsv:"fa-file-excel-o",csv:"fa-file-excel-o",xml:"fa-code",json:"fa-json",fake:"fa-bug",Bug:"fa-bug",Mail:"fa-envelope"},u.exports=new t,u.exports.Icons=t,u.exports.registerIconSet=r,u.exports.names=function(){var t,e,n;return t=function(){var t;for(e in t=[],i)n=i[e],t.push(a.keys(n));return t}(),a.union.apply(null,t)}}).call(this)},{"./core-model":2,"./options":63,underscore:262}],15:[function(h,t,m){(function(){var e,t,n,p,a,i,l,f,u,c,r,o,s,d;d=h("underscore"),h("./shim"),u=h("imjs").Service.connect,a=h("es6-promise").Promise,s=h("./version"),l=h("./core/type-assertions"),e=h("./views/dashboard"),i=h("./views/table"),p=h("./options"),n=h("./messages"),t=h("./formatting"),o=h("./utils/simple-formatter"),r=function(o){var s;return s=function(t,e,n){var i,r;return l.Query.test(n)?new a(c(o,t,n,e)):(r=n.service,i=n.query,(l.Service.test(r)?r:u(r)).query(i).then(d.partial(s,t,e)))}},c=function(l,u,c,h){return null==h&&(h={}),function(t){var e,n,i,r,o,s,a;for(n=f(u),i="undefined"!=typeof page&&null!==page?d.pick(h,"start","size"):null,h=d.extend(d.omit(h,"start","size"),{model:i,query:c}),(r=l(h)).setElement(n),o=0,s=(a=d.result(r,"className").split(" ")).length;o<s;o++)e=a[o],n.classList.add(e);return n.classList.add(p.get("StylePrefix")),r.render(),t(r)}},f=function(t){var e,n;if(null==t)throw new Error("No target element provided");if(null==(e=d.isString(t)?document.querySelector(t):null!=(n=t[0])?n:t))throw new Error("Target("+t+") not found on page");return e},m.version=s,m.setMessages=n.set.bind(n),m.configure=p.set.bind(p),m.loadTable=r(i.create),m.loadDash=r(function(t){return new e(t)}),m.createFormatter=o,m.formatting=d.omit(t,"getFormatter","shouldFormat","reset")}).call(this)},{"./core/type-assertions":10,"./formatting":13,"./messages":16,"./options":63,"./shim":66,"./utils/simple-formatter":104,"./version":111,"./views/dashboard":136,"./views/table":209,"es6-promise":238,imjs:247,underscore:262}],16:[function(p,f,t){(function(){var t,e,r,n,i,o,s,a,l,u,c={}.hasOwnProperty;function h(){return this.getText=function(t,e){return function(){return t.apply(e,arguments)}}(this.getText,this),h.__super__.constructor.apply(this,arguments)}t=p("backbone"),l=p("underscore"),i=p("./messages/actions"),o=p("./messages/common"),s=(u=p("./templates/helpers")).numToString,a=u.pluralise,e=[o,i],r={formatNumber:s,pluralise:a},function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(h,t.Model),h.prototype.initialize=function(){return this.cache={},this.on("change",(t=this,function(){return t.cache={}}));var t},h.prototype.destroy=function(){var t,e;for(t in this.off(),e=[],this)e.push(delete this[t]);return e},h.prototype.getTemplate=function(t){var e,n;return null!=(e=null!=(n=this.cache[t])?n:this.get(t))&&null==e.call&&(e=l.template(e)),this.cache[t]=e},h.prototype.getText=function(t,e){var n,i;return null==e&&(e={}),null!=(i="function"==typeof(n=this.getTemplate(t))?n(l.extend({Messages:this},r,e)):void 0)?i:"!!!No message for "+t+"!!!"},h.prototype.setWithPrefix=function(t,e){var n,i,r;for(n in r=[],e)i=e[n],r.push(this.set(t+"."+n,i));return r},h.prototype.defaults=function(){return l.extend.apply(null,[{}].concat(e))},n=h,f.exports=new n,f.exports.Messages=n}).call(this)},{"./messages/actions":17,"./messages/common":20,"./templates/helpers":68,backbone:235,underscore:262}],17:[function(t,e,n){(function(){e.exports={"export.Export":"Export","export.ExportQuery":"Export","export.DialogueTitle":"Export","export.category.Format":"<%= format.EXT %> Format","export.category.Columns":"<%= columns %> Columns","export.category.Preview":"Preview","export.preview.Limit":"Preview is limited to at most 3 results.","export.heading.Columns":"Columns","export.category.Rows":"<% if (rowCount === max) { %>\n  All\n<% } else { %>\n  <%= rowCount %> of <%= max %>\n<% } %>\nRows","export.category.Compression":"<% if (compression) { %>\n  <%= compression.toUpperCase() %>\n<% } else { %>\n  No\n<% } %> Compression","export.category.Options":"Options","export.category.JsonFormat":"As <%= (jsonFormat === 'objects') ? 'Objects' : 'Rows' %>","export.category.FastaFormat":"FASTA options","export.category.ColumnHeaders":"<% if (headers) { %>\n  <%= {friendly: 'Formatted', path: 'Raw'}[headerType] %>\n<% } else { %>\n  No\n<% } %>\nColumn Headers","export.category.Destination":"<% if (dest === 'download') { %>\n  Download <%= format.EXT %> file\n<% } else { %>\n  Send <%= format.EXT %> to <%= dest %>\n<% } %>","export.galaxy.name":["<% if (orgs.length === 1) { %><%= orgs[0] %> <% } %>","<%= cls %> data","<% if (branding) { %> from <%= branding.name %><% } %>"].join(""),"export.galaxy.info":"<%= query.root %> data from <%= query.service.root %>.\nUploaded from <%= currentLocation %>.\n<% if (lists.length) { %>source: <%= lists.join(', ') %><% } %>\n<% if (orgs.length)  { %>organisms: <%= orgs.join(', ') %><% } %>","export.format.description.TSV":"A flat file format suitable for spreadsheet programmes","export.format.name.TSV":"Tab separated values.","export.format.description.CSV":"A flat file format, suitable for spreadsheet programmes","export.format.name.CSV":"Comma separated values.","export.format.description.XML":"A text format suitable for machine processing.","export.format.name.XML":"XML","export.format.name.JSON":"JSON","export.format.description.JSON":"A text format suitable for machine processing.","export.format.name.FASTA":"FASTA sequence.","export.format.description.FASTA":"FASTA output for sequence data.","export.format.name.GFF3":"GFF3 features.","export.format.description.GFF3":"GFF3 output for sequence features.","export.format.name.BED":"BED locations.","export.format.description.BED":"BED output for sequence feature locations.","export.format.name.FAKE":"Fake","export.format.description.FAKE":"Fake format for testing. Should only appear if the\nquery has departments in the view.","export.format.name.FAKE_2":"Also Fake","export.format.description.FAKE_2":"Fake format for testing. Should only appear if the\nquery has companies in the view.","export.param.Size":"Size: <%= size %>","export.param.Format":"Format","export.param.Start":"Offset: <%= start %>","export.param.Destination":"Destination","export.param.Name":"File name","export.help.AdditionalCols":"You can add any attributes of objects which are already\nin the query.","rows.All":"No limit","export.cloud.FileLocation":"Upload to <%- cloud %> successful. Your file is available at:","export.UseCompression":"Compress results","export.UseGZIP":"Use GZIP compression (produces a .gzip archive)","export.UseZIP":"Use Zip compression (produces a .zip archive)","export.AddHeaders":"Add column headers","export.json.Rows":"Return results as rows - each row is an Array of JSON values, e.g.:","export.SetTablePage":"Select rows in table","export.ResetRowSelection":"Select all rows","export.json.RowsExample":'["eve", "2R", 5866824, 5868300]',"export.json.ObjExample":'{\n  "class": "Gene",\n  "symbol": "eve",\n  "chromosomeLocation": {\n    "class": "ChromosomeLocation",\n    "start": 5866824,\n    "end": 5868300\n    "locatedOn": {\n      "class": "Chromosome",\n      "primaryIdentifier": "2R"\n    }\n  }\n}',"export.json.Objects":"Return results as objects - each result is a nested graph of\ndata, e.g.:","export.json.ObjWarning":"Please note that it is not recommended to set the size parameters\nwhen requesting object results, since the size of the result\nset, and the position of the offsets will differ when multiple\nrows are replaced by a single object with a collection.","export.ff.FriendlyHeaders":'Human readable headers (eg. "Gene > Organism Name")',"export.ff.PathHeaders":'Raw path headers (eg. "Gene.organism.shortName)',"export.error.NoColumnsSelected":"No columns selected","export.error.OffsetOutOfBounds":"The offset is greater than the total number of results.",ListNameDuplicate:"List names must be unique. This name is already taken",ListNameEmpty:"Lists must have names. Please enter one",ListNameIllegal:"Some characters are not allowed in list names. This name contains the following\nillegal characters: <%- illegals.join(', ') %>. Please remove them.",ExportTitle:"Download results for <%= name || 'query' %>",ConfigureExport:"Configure Export",GetData:"Download Data",ExportHelp:"Download file containing results to your computer",ExportButton:"Download","download-file":"Download File",download:"Download file",Galaxy:"Send to Galaxy",GenomeSpace:"Upload to Genomespace",Drive:"Save to Google Drive",Dropbox:"Save to Dropbox","Destdownload-file":"File",DestGalaxy:"Galaxy",DestGenomespace:"Genomespace",ExportAlt:"Send Data Somewhere Else",ExportLong:'<span class="hidden-tablet">Download</span>\nFile\n<span class="im-only-widescreen">to your Computer</span>',SendToGalaxy:'<span class="hidden-tablet">Send to</span>\nGalaxy\n<span class="im-only-widescreen">for analysis</span>',SendToGenomespace:'<span class="hidden-tablet">Upload to</span>\n<span class="im-only-widescreen">your</span>\nGenomespace\n<span class="im-only-widescreen">account</span>',MyGalaxy:"Send to your Galaxy",ForgetGalaxy:"Clear this galaxy URL",GalaxyHelp:"Start a file upload job within Galaxy",GalaxyURILabel:"Galaxy Location:",GalaxyAlt:"Send to a specific Galaxy",SaveGalaxyURL:"Make this my default Galaxy",WhatIsGalaxy:"What is Galaxy?",WhatIsGalaxyURL:"http://wiki.g2.bx.psu.edu/",GalaxyAuthExplanation:"If you have already logged into Galaxy with this browser, then the data\nwill be sent into your active account. Otherwise it will appear in a \ntemporary anonymous account.",CopyToClipBoard:"Copy to clipboard: <CTL>+C, <ENTER>",IsPrivateData:"This link provides access to data stored in your private lists. In order to do so\nit uses the API access token provided on initialisation. If this is your permanent\nAPI token you should be as careful of this link as you would of the data is provides\naccess to. If this is just a 24 hour access token, then you will need to replace it\nonce it becomes invalid.",LongURI:"The normal URI for this query (which includes the full query XML in the \nparameters) is too long for a GET request. The URI you can see here uses a\nquery-id, which has a limited validity. You should not store this URI for long\nterm use.",SendToOtherGalaxy:"Send",AllRows:"Whole Result Set",SomeRows:"Specific Range",WhichRows:"Rows to Export",RowsHelp:"Export all rows, or define a range of rows to export.",AllColumns:"All Current Columns",SomeColumns:"Choose Columns",CompressResults:"Compress results",NoCompression:"No compression",GZIPCompression:"GZIP",ZIPCompression:"ZIP",Copy:"copy to clip-board",ResultsPermaLink:"Perma-link to results",ResultsPermaLinkText:"Results URI",QueryXML:"Query XML",ResultsPermaLinkTitle:"Get a permanent URL for these results, suitable for your own use",ResultsPermaLinkShareTitle:"Get a permanent URL for these results, suitable for sharing with others",ColumnsHelp:"Export all columns, or choose specific columns to export.",WhichColumns:"Columns to Export",ResetColumns:"Reset Columns.",FirstRow:"From",LastRow:"To",SpreadsheetOptions:"Spreadsheet Options",ColumnHeaders:"Include Column Headers",PossibleColumns:"You can add any attribute from these nodes without changing your results:",ExportedColumns:"Exported Columns (drag to reorder)",ChangeColumns:"You may add any of the columns in the right hand box by clicking on the\nplus sign. You may remove unwanted columns by clicking on the minus signs\nin the left hand box. Note that while adding these columns will not alter your query,\nif you remove all the attributes from an item, then you <b>may change</b> the results\nyou receive.",OuterJoinWarning:"This query has outer-joined collections. This means that the number of rows in \nthe table is likely to be different from the number of rows in the exported results.\n<b>You are strongly discouraged from specifying specific ranges for export</b>. If\nyou do specify a certain range, please check that you did in fact get all the \nresults you wanted.",IncludedFeatures:"Exportable parts of this Query - <strong>choose at least one</strong>:",FastaFeatures:"Features with Sequences in this Query - <strong>select one</strong>:",FastaOptions:"FASTA Specific Options",FastaExtension:"Extension (eg: 100/100bp/5kbp/0.5mbp):",ExtraAttributes:"Columns to include as extra attributes on each exported record:",NoSuitableColumns:"There are no columns of a suitable type for this format.",BEDOptions:"BED Specific Options",Gff3Options:"GFF3 Specific Options",ChrPrefix:'Prefix "chr" to the chromosome identifier as per UCSC convention (eg: chr2)',ConfigureExportHelp:"Configure the export options in these categories","largetable.ok":"Set page size to <%- size %>","largetable.abort":"Cancel","largetable.appeal":"You have requested a very large table size (<%= size %> rows per page). Your\nbrowser may struggle to render such a large table,\nand the page could become unresponsive. In any case,\nwill be very difficult for you to read the whole table\nin the page. We suggest the following alternatives:"}}).call(this)},{}],18:[function(t,e,n){(function(){var n;(n=t("../messages")).setWithPrefix("codegen",{AsHTML:"As HTML page",DialogueTitle:'Generated <%= Messages.getText("codegen.Lang", {lang: lang}) %>\nCode for <%= query.name || "Query" %>',CannotExportXML:"You cannot save the XML as a file directly. Please use your browser's cut\nand paste functionality.",PrimaryAction:"Save",ChooseLang:"Choose Language",ShowBoilerPlate:"Show comments",HighlightSyntax:"Highlight Syntax",GenerateCodeIn:function(t){var e;return e=t.lang,"Generate "+n.getText("codegen.Lang",{lang:e})+"\n"+("xml"!==e?"code":"")},Lang:function(t){var e;switch(e=t.lang){case"py":return"Python";case"pl":return"Perl";case"java":return"Java";case"rb":return"Ruby";case"js":return"JavaScript";case"xml":return"XML";default:throw new Error("Unknown language "+e)}}})}).call(this)},{"../messages":16}],19:[function(t,e,n){(function(){t("../messages").setWithPrefix("columns",{DialogueTitle:"Manage Columns",ApplyChanges:"Apply Changes",FindColumnToAdd:"Add a Column",AddColumn:"<% if (num < 1) { %>\n  No columns chosen\n<% } else { %>\n  Add <%= num %> new <%= pluralise('column', num) %>\n<% } %>",AddColumnToSortOrder:"Sort by this column",NoChangesToApply:"There are no changes to apply.",OrderVerb:"Add / Remove / Re-Arrange",OrderTitle:"Columns",SortVerb:"Configure",SortTitle:"Sort-Order",OnlyColsInView:"Only show columns in the table:",SortingHelpTitle:"What Columns Can I Sort by?",ViewTabTitle:"Selected Columns",SortOrderTabTitle:"Sort Order",CurrentView:"Current Columns",CurrentViewHelp:"Re-arrange or remove columns by dragging, or by using the buttons",CurrentSortOrder:"<% if (oes.length) { %>\n  <%= oes.length %> Order <%= pluralise('Elements', oes.length) %>\n<% } else { %>\n  Not sorted.\n<% } %>",NoSortOrder:"No sort order. Drop columns here to sort the table.",RemoveOrderElement:"Remove this column from the sort-order",CurrentSortOrderHelp:"Re-arrange, add or remove columns. The full set of available\ncolumns is listed below.",ColumnsSelected:'<%= columns.length %> <%= pluralise("Column", columns.length) %>\nSelected<% if (removed) { %>, <%= removed %> Removed<% } %>',ChooseAPathFrom:"Choose a path from <%= root %>",RemoveColumn:"Remove this column",MoveUp:"Move this column up",MoveDown:"Move this column down",ColumnWillBeRemoved:"This column will be removed",RestoreColumn:"Add this column back to the table",ChangeDirection:"Change sort direction",CurrentDirection:"Sorted in\n<%= (dir === 'DESC') ? 'reverse' : void 0 %>\n<%= numeric ? 'numerical' : 'alphabetical' %>\norder.",ManageColumns:"Manage Columns",ManageColumnsShort:"Columns"})}).call(this)},{"../messages":16}],20:[function(t,e,n){(function(){e.exports={All:"All",Reset:"Reset",Export:"Download",Clear:"Clear",Cancel:"Cancel",Complete:"Complete",Error:"Error",Warning:"Warning",Filter:"Filter",Loading:"Loading",Undo:"Undo",and:"and",or:"or",comma:",",Number:"<%= formatNumber(n) %>","modal.DefaultTitle":"Excuse me...","modal.Dismiss":"Close","modal.OK":"OK","modal.ApplyChanges":"Apply Changes","core.NoOptions":"There are no options to select from.",ErrorTitle:function(t){switch(t.level){case"Error":return"Error";case"Warning":return"Warning";case"Info":return"nb";case"Positive":return"Success";default:return"Error"}}}}).call(this)},{}],21:[function(t,e,n){(function(){t("../messages").setWithPrefix("constraints",{Heading:'<%= n %> Active <%= pluralise("Filter", n) %>',AddNewFilter:"Add New Filter",AddFilter:"Add filter",AddNew:"Add Filter",DefineNew:"Define a new filter",EditOrRemove:"edit or remove the currently active filters",None:"No active filters",NoOfValues:'<%= (n === 1) ? "one" : formatNumber(n) %> <%= pluralise("value", n) %>',NoOfIds:'<%= (n === 1) ? "one" : formatNumber(n) %> <%= pluralise("ID", n) %>',ISA:"is a",LookupIn:"in",AddConFor:"Add filter to\n<% if (isAttribute && !hideType) { %><%= typeName %><% } %>\n<%= _.last(parts) %>",ManageFilters:"Manage Filters",ManageFiltersShort:"Filters"})}).call(this)},{"../messages":16}],22:[function(e,t,n){(function(){var t;(t=e("../messages")).setWithPrefix("error",{Oops:"Oops! - Sorry we cannot get that table for you.",EmailHelp:"Send a bug report",ShowQuery:"Show query",ShowError:"Show error",ConnectionError:"Could not connect to server"}),t.setWithPrefix("error.mail",{Subject:"[IMTABLES] - Error running query."}),t.setWithPrefix("error.client",{Heading:"Application error.",Body:"This is due to an unexpected error in the tables\napplication - this is our fault, and we are sorry for the\ninconvenience. Please send us the pre-filled bug report so\nwe can fix this as soon as possible."}),t.setWithPrefix("error.server",{Heading:"Server error - our bad!",Body:"This is most likely related to the query that was just run. If you have\ntwo minutes, please send us an email with details of this query to help us\ndiagnose and fix this bug - we have already pre-filled the bug report,\nyou just need to hit send (and maybe give us some extra details).\nAlternatively, you might be able to fix this query by changing its column, \nfilters or joins; use the tools above to do so."})}).call(this)},{"../messages":16}],23:[function(e,t,n){(function(){var t;(t=e("../messages")).setWithPrefix("joins",{Heading:"Manage Relationships",Manage:function(){return t.getText("joins.Heading")},ManageShort:"Relationships",Inner:"Required",Outer:"Optional",ExplanationTitle:"What does this do?",Explanation:"You can specify the entity relationships within the query here. This\nhas a couple of effects - one is to exclude a class of matched results, the\nother is to change the way the results are presented in the table.\nIf set to required, then an entity which matches the filters\nbut lacks the given relationship will not be returned in the results,\nwhereas if set to optional it will. This also has an effect on the\nway that results are laid out: required collection relationships\nare returned inline, whereas optional collection relationships are\nreturned as nested sub-tables within the main result set."})}).call(this)},{"../messages":16}],24:[function(e,t,n){(function(){var t;(t=e("../messages")).setWithPrefix("lists",{DefaultName:"<%= typeName %> List (<%= new Date() %>)",Create:"Create List",Append:"Add to List",SaveAsList:"Save as List",CreateListTitle:"Create a new List\n<% if (state.count) { %>\n  of <%= formatNumber(state.count) %>\n  <%= pluralise(state.typeName, (state.count || 0)) %>\n<% } %>",AppendToListTitle:"Add\n<% if (state.count) { %>\n  <%= formatNumber(state.count) %>\n  <%= pluralise(state.typeName, (state.count || 0)) %>\n<% } %>\nto\n<%= target || 'a List' %>",NoTags:"No tags",AddTag:"Add a new tag",AddTagBtn:"add",RemoveTag:"Remove this tag",ShowExtraOptions:"<% if (minimised) { %>Show <% } %>Optional attributes",TargetDoesNotExist:"Your target list does not exist.",NoTargetSelected:"Please select a target list.",PossibleAppendTarget:"<%= name %> (<%= formatNumber(size) %> <%= pluralise((typeName || 'item'), size) %>)",NoObjectsSelected:"No objects selected. Choose objects from the table beneath. You can\ndrag this dialog around if it is in the way.",StartPicking:"Pick items from the table",NoCommonType:"There is no common type for these objects."}),t.setWithPrefix("lists.error",{MustBeLoggedIn:"You are not logged in. Anonymous users cannot create lists."}),t.setWithPrefix("lists.params",{Name:"List Name",NamePlaceholder:"List name is required",Desc:"List Description",DescPlaceholder:"Enter a description",Target:"Choose list to append items to"}),t.setWithPrefix("lists.params.help",{Name:"You must provide a unique list name",Target:"You must select a target list"}),t.setWithPrefix("lists.picker",{Expand:"show more options",Collapse:"show fewer options"}),t.setWithPrefix("lists.append",{NoSuitableLists:"No suitable lists were found\n<% if (model.type) { %>\n  for <%- model.type %>.\n<% } else { %>\n  because no items are selected, or they have no common type.\n<% } %>"})}).call(this)},{"../messages":16}],25:[function(e,t,n){(function(){var t;(t=e("../messages")).setWithPrefix("logic",{Heading:"Manage Constraint Logic",Manage:function(){return t.getText("logic.Heading")},ManageShort:"Constraint Logic",LogicLabel:function(){return t.getText("logic.ManageShort")},ApplyLogic:"Change logic"})}).call(this)},{"../messages":16}],26:[function(t,e,n){(function(){t("../messages").setWithPrefix("subtables",{OpenHint:"Click to view/hide rows",RemoveColumn:"Remove this column"})}).call(this)},{"../messages":16}],27:[function(t,e,n){(function(){t("../messages").setWithPrefix("summary",{Got:"<% if (available > got) { %>Showing <%= formatNumber(got) %> of<% } %>",Max:"Maximum",Min:"Minimum",Bucket:"<%= range.min %> to <%= range.max %>: <%= count %> values",Count:"Count",Item:"Item",Average:"Average",StdDev:"Standard Deviation",OnlyOne:"There is only one <%- names.typeName %> <%- names.endName %>:\n<strong><%- item.item %></strong>, which occurs\n<strong>\n  <% if (item.count === 1) { %>\n    once\n  <% } else if (item.count === 2) { %>\n    twice\n  <% } else { %>\n    <%- formatNumber(item.count) %> times\n  <% } %>\n</strong>",NumericDistribution:"Showing distribution of <%= formatNumber(n) %>",FilterValuesPlaceholder:"Filter values",DownloadData:"Download data",DownloadFormat:"As",MoreItems:"Load more items",Include:"Restrict table to matching rows",Exclude:"Exclude matching rows from table",Reset:"Reset selection",Toggle:"Toggle selection",SelectFilter:"Select filter type",FacetBar:"rgba(206, 210, 222, <%= opacity %>)",NoResults:"No results for <%= path %>",SelectedCount:"<%= isApprox ? \"ca. \" : void 0 %><%= formatNumber(selectedCount) %>\n<%= pluralise('Item', selectedCount) %> Selected",Total:"<% if (filtered) { %>(filtered from <%= formatNumber(total) %>)<% } %>"})}).call(this)},{"../messages":16}],28:[function(e,t,n){(function(){var t;(t=e("../messages")).setWithPrefix("table",{Building:"Loading Table ...",OverlayText:"Requesting data...",Empty:"No Results",EmptyWhy:"This query returns no results. You may wish to change its filters"}),t.setWithPrefix("table.lg",{ShowingAll:"Showing all <%= formatNumber(count) %> rows",ShowingRange:'Showing <%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %> <%= pluralise("row", count) %>'}),t.setWithPrefix("table.md",{ShowingAll:"All <%= formatNumber(count) %> rows",ShowingRange:"Showing rows <%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %>"}),t.setWithPrefix("table.sm",{ShowingAll:"All rows",ShowingRange:"Rows <%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %>"}),t.setWithPrefix("table.xs",{ShowingAll:"All rows",ShowingRange:"<%= formatNumber(first) %> to <%= formatNumber(last) %>\nof <%= formatNumber(count) %>"}),t.setWithPrefix("table.header",{FailedToInitSortMenu:"Could not initialise the sorting menu.",FailedToInitFilter:"Could not initialise the filter menu.",FailedToInitSummary:"Could not intitialise the column summary.",ViewSummary:"View column summary",ToggleColumn:"Toggle column visibility",RemoveColumn:"Remove this column",SortColumn:"<% if (dir === 'ASC') { %>\n  Sorted in ascending order.\n<% } else if (dir === 'DESC') { %>\n  Sorted in descending order.\n<% } else { %>\n  Sort this column.\n<% } %>",ToggleTables:"Expand/collapse all sub-tables",Composed:"This column replaces <%= replaces.length %> others. Click here\nto show the individual columns separately.",FilterTitle:"<% if (count > 0) { %>\n  <%= count %> active filters.\n<% } else { %>\n  Filter by values in this column.\n<% } %>"})}).call(this)},{"../messages":16}],29:[function(t,e,n){(function(){t("../messages").setWithPrefix("undo",{StepTitle:"<% if (label === 'Initial') { %>\n  Initial State\n<% } else if (verb === 'Added') { %>\n  <% if (label === 'sort order element') { %>\n    Added <%= formatNumber(number) %> <%= pluralise('column', number) %> to the sort order\n  <% } else if (label === 'column') { %>\n    Selected <%= formatNumber(number) %> <%= pluralise('column', number) %>\n  <% } else { %>\n    Added <%= formatNumber(number) %> <%= pluralise(label, number) %>\n  <% } %>\n<% } else if (verb === 'Removed') { %>\n  <% if (label === 'sort order element') { %>\n    Removed <%= formatNumber(number) %> <%= pluralise('column', number) %> from the sort order\n  <% } else if (label === 'column') { %>\n    Unselected <%= formatNumber(number) %> <%= pluralise('column', number) %>\n  <% } else { %>\n    Removed <%= formatNumber(number) %> <%= pluralise(label, number) %>\n  <% } %>\n<% } else if (verb === 'Changed') { %>\n  <% if (label === 'sort order element') { %>\n    Changed sort order\n  <% } else { %>\n    Changed <%= pluralise(label, 2) %>\n  <% } %>\n<% } else if (verb === 'Rearranged') { %>\n  Rearranged <%= pluralise(label, 2) %>\n<% } else { %>\n  !!!Cannot handle <%= verb %> <%= label %>!!!\n<% } %>",StepCount:'<%= formatNumber(count) %> <%= pluralise("row", count) %>',RevertToState:"Revert to this state",IsCurrentState:"This is the current state",ViewCount:'<%= n %> <%= pluralise("column", n) %> selected',ConstraintCount:"<% if (n) { %>\n  <%= n %> <%= pluralise('filter', n) %>\n<% } else { %>\n  No filters\n<% } %>",OrderElemCount:"<% if (n) { %>\n  Sorted on <%= n %> <%= pluralise('column', n) %>\n<% } else { %>\n  Not sorted\n<% } %>",ShowAllStates:"Show <%= n %> hidden <%= pluralise('state', n) %>",ToggleTrivial:'<%= hideTrivial ? "Hiding" : "Hide" %> minor steps',ToggleTrivialTitle:'<%= hideTrivial ? "Hiding" : "Hide" %> steps that did not change the row count',Revision:"no. <%= v %>",RevisionTitle:"revision <%= v %>",MoreSteps:'<%= more %> more <%= pluralise("step", more) %>'})}).call(this)},{"../messages":16}],30:[function(t,e,r){(function(){var i,n;i=t("jquery"),n=function(t){var e,n;return e=i("body").width(),n=t.width(),t.css({left:(e-n)/2,top:50})},r._showModal=function(){var t,e;return(t=this.$el).modal({show:!1}).addClass("im-floating").draggable({handle:".modal-header"}).show(function(){return n(t),t.animate({opacity:1},{complete:function(){return t.addClass("in")}})}),this.listenToOnce(this,"remove",(e=this,function(){return e.$el.draggable("destroy")}))},r._hideModal=function(){return this.$el.removeClass("in"),this.onHidden()}}).call(this)},{jquery:256}],31:[function(t,e,n){(function(){var p;p=t("underscore"),n.setChildIndices=function(e,n,t){var i,r,o,s,a,l,u,c,h;for(null==n&&(n="top"),null==t&&(t="collection"),o=this.children,i=this[t],l=p.compact(i.map(function(t){return o[e(t)]})),h=[],r=u=0,c=(s=p.sortBy(l,function(t){return t.el.getBoundingClientRect()[n]})).length;u<c;r=++u)a=s[r],h.push(a.model.set({index:r}));return h}}).call(this)},{underscore:262}],32:[function(t,e,n){(function(){var e;e=t("underscore"),n.initTypeaheads=function(){return null!=this._typeaheads?this._typeaheads:this._typeaheads=[]},n.removeTypeAheads=function(){var t,e;if(null!=this._typeaheads){for(e=[];t=this._typeaheads.shift();)t.off("typeahead:select"),t.off("typeahead:selected"),t.off("typeahead:autocompleted"),t.off("typeahead:close"),e.push(t.typeahead("destroy"));return e}},n.lastTypeahead=function(){var t;return e.last(null!=(t=this._typeaheads)?t:[])},n.activateTypeahead=function(t,e,n,i,r,o){return t.attr({placeholder:i}).typeahead(e,n),t.on("typeahead:selected",r),t.on("typeahead:select",r),t.on("typeahead:autocompleted",r),null!=o&&t.on("typeahead:close",o),this.initTypeaheads().push(t),t.focus(),this}}).call(this)},{underscore:262}],33:[function(t,e,i){(function(){var s,n;n=t("underscore"),s={},i.runQuery=function(t){var e,n,i,r,o;return null==t&&(t={}),r=this.getExportParameters(t),i="results:"+this.query.service.root+":"+JSON.stringify(r),e="query/results",(null!=(o=(n=this.model.get("format")).needs)?o.length:void 0)&&(e+="/"+n.id),null!=s[i]?s[i]:s[i]=this.query.service.post(e,r)},i.getEstimatedSize=function(){var t,e;return t="count:"+(e=this.getExportQuery()).service.root+":"+e.toXML(),null!=s[t]?s[t]:s[t]=e.count()},i.getExportQuery=function(){var t,e;return e=this.query.clone(),(null!=(t=this.model.get("columns"))?t.length:void 0)&&e.select(t),e},i.getExportURI=function(t){return this.getExportQuery().getExportURI(this.model.get("format").id,this.getExportParameters(t))},i.getFileName=function(){return this.getBaseName()+"."+this.getFileExtension()},i.getBaseName=function(){return this.model.get("filename")},i.getFileExtension=function(){return this.model.get("format").ext},i.getExportParameters=function(t){var e;return null==t&&(t={}),(e=this.model.pick("start","size","format","filename")).format=e.format.id,e.query=this.getExportQuery().toXML(),this.model.get("compress")&&(e.compress=this.model.get("compression")),this.model.get("headers")&&(e.columnheaders=this.model.get("headerType")),"json"===e.format&&"rows"!==this.model.get("jsonFormat")&&(e.format+=this.model.get("jsonFormat")),"fasta"===e.format&&this.model.get("fastaExtension")&&(e.extension=this.model.get("fastaExtension")),"fasta"!==e.format&&"gff3"!==e.format||(e.view=this.model.get("columns")),n.extend(e,t)}}).call(this)},{underscore:262}],34:[function(t,e,n){(function(){n.setPathNames=function(){var t,e,n,i,r,o,s,a,l,u;return e=null!=(l=this.query)?l:this.model.query,a=null!=(u=this.view)?u:this.model.view,i=e.service,s=a.getParent().getType(),t=a.end,n=this.state,o=(r=function(e){return function(t){return n.set(e,t)}})("error"),a.getDisplayName().then(r("pathName"),o),s.getDisplayName().then(r("typeName"),o),i.get("model/"+s.name+"/"+t.name).then(function(t){return t.name}).then(r("endName"),o)}}).call(this)},{}],35:[function(n,i,t){(function(){var t,r={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}n("underscore"),t=n("../core-model"),i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.defaults=function(){return{target:null,type:null}},e)}).call(this)},{"../core-model":2,underscore:262}],36:[function(a,l,t){(function(){var t,e,n,i,r,o={}.hasOwnProperty;function s(){return s.__super__.constructor.apply(this,arguments)}t=a("../core/collection"),e=a("./path"),n=function(r,o,s){var t,e,a,n;return(t=(n=function(){var t,e,n,i;for(i=[],t=0,e=(n=[o,s]).length;t<e;t++)a=n[t],i.push(r(a));return i}())[0])<(e=n[1])?-1:e<t?1:0},r=function(t){return t.get("parts").length},i=function(t){return t.get("displayName")},l.exports=(function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(s,t),s.prototype.model=e,s.prototype.add=function(t){var e;if((e=s.__super__.add.apply(this,arguments))&&null==e.collection)return e.collection=this},s.prototype.initialize=function(){return s.__super__.initialize.apply(this,arguments),this.on("change:parts change:displayName",(t=this,function(){return t.sort()}));var t},s.prototype.comparator=function(t,e){return n(r,t,e)||n(i,t,e)},s)}).call(this)},{"../core/collection":5,"./path":56}],37:[function(n,i,t){(function(){var t,l,u,e,r={}.hasOwnProperty;function c(){return c.__super__.constructor.apply(this,arguments)}e=n("underscore"),u=n("es6-promise").Promise,l=n("../options"),t=n("../core-model"),i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(c,t),c.prototype.defaults=function(){return{columnName:null,typeName:null,typeNames:[],entity:null,column:null,node:null,field:null,value:null}},c.prototype.initialize=function(){var t,i,e,r,o,n,s,a;return c.__super__.initialize.apply(this,arguments),o=null!=(n=this.get("entity").get("classes"))?n:[this.get("node")],i=(t=this.get("column")).model,t.getDisplayName().then((s=this,function(t){return s.set({columnName:t})})),e=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)r=o[t],n.push(i.makePath(r).getDisplayName());return n}(),u.all(e).then((a=this,function(t){return a.set({typeNames:t,typeName:t.join(l.get("DynamicObjects.NameDelimiter"))})}))},c.prototype.getPath=function(){return this.get("column")},c.prototype.toJSON=function(){return e.extend(c.__super__.toJSON.apply(this,arguments),{column:this.get("column").toString(),node:this.get("node").toString(),entity:this.get("entity").toJSON()})},c)}).call(this)},{"../core-model":2,"../options":63,"es6-promise":238,underscore:262}],38:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}e=i("../options"),t=i("../core-model"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.defaults=function(){return{lang:e.get("CodeGen.Default"),showBoilerPlate:!1,highlightSyntax:!0}},n)}).call(this)},{"../core-model":2,"../options":63}],39:[function(i,o,t){(function(){var t,s,n,r={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}t=i("../core/collection"),s=i("./header"),n=i("../utils/build-headers"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.model=s,e.prototype.comparator="index",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this,"change:index",this.sort)},e.prototype.setHeaders=function(o,t){var e;return n(o,t).then((e=this,function(i){var r;return e.set(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(new s(r,o));return n}())}))},e)}).call(this)},{"../core/collection":5,"../utils/build-headers":71,"./header":44}],40:[function(n,f,t){(function(){var s,a,l,t,u,c,i,r,e,h=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},o={}.hasOwnProperty;function p(t){var e,n;p.__super__.constructor.call(this,t.path),e=t.type,this.unset("id"),this.unset("type"),this.set(r.omit(t,"path","type")),null!=e&&(this.set({type:e.toString()}),e.getDisplayName().then((n=this,function(t){return n.set({typeName:t})}))),this.set({CONSTRAINT_TYPE:i(t)})}r=n("underscore"),e=n("imjs").Query,s=e.LIST_OPS,a=e.LOOP_OPS,c=e.TERNARY_OPS,u=e.RANGE_OPS,l=e.NULL_OPS,t=n("./path"),i=function(t){var e,n,i,r,o;if(t.path.isAttribute())return t.values?"MULTI_VALUE":"ATTR_VALUE";if(t.type)return"TYPE";if(t.ids)return"IDS";if(t.values&&(e=t.op,0<=h.call(u,e)))return"RANGE";if(n=t.op,0<=h.call(c,n))return"LOOKUP";if(i=t.op,0<=h.call(s,i))return"LIST";if(r=t.op,0<=h.call(a,r))return"LOOP";if(o=t.op,0<=h.call(l,o))return t.op;throw new Error("Cannot determine constraint type: "+t.path+" "+t.op)},f.exports=(function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(p,t),p.prototype.defaults=function(){return r.extend(p.__super__.defaults.apply(this,arguments),{value:null,values:[],ids:[],extraValue:null,code:null,CONSTRAINT_TYPE:"ATTR_VALUE"})},p)}).call(this)},{"./path":56,imjs:247,underscore:262}],41:[function(o,l,t){(function(){var t,e,s,a,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}n=o("underscore"),e=o("../core-model"),t=o("../core/collection"),s=/,\s*/,a=function(t){return t.replace(/(^\s+|\s+$)/g,"")},l.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,e),i.prototype.defaults=function(){return{name:null,description:null}},i.prototype.initialize=function(){var r,e,n;return this.tags=new t,this.has("tags")&&this.tags.reset(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.get("tags")).length;t<e;t++)r=n[t],i.push({id:r});return i}.call(this)),this.listenTo(this.tags,"remove",(e=this,function(t){return e.trigger("remove:tag",t),e.trigger("change")})),this.listenTo(this.tags,"add",(n=this,function(t){return n.trigger("add:tag",t),n.trigger("change")}))},i.prototype.toJSON=function(){return n.extend(i.__super__.toJSON.apply(this,arguments),{tags:this.tags.map(function(t){return t.get("id")})})},i.prototype.addTag=function(){var t,e,n,i,r,o;if(null==(e=this.get("nextTag")))throw new Error("No tag to add");for(this.unset("nextTag"),o=[],n=0,i=(r=a(e).split(s)).length;n<i;n++)t=r[n],o.push(this.tags.add({id:t}));return o},i.prototype.destroy=function(){var t;return null!=(t=this.tags)&&t.close(),i.__super__.destroy.apply(this,arguments)},i)}).call(this)},{"../core-model":2,"../core/collection":5,underscore:262}],42:[function(e,t,n){(function(){var r,o,a;function t(t){var e,n,i,r,o,s;this.id=t.id,this.group=t.group,r=t.icon,s=t.needs,this.maxColumns=t.maxColumns,e=(i="tab"===this.id?"tsv":this.id).toUpperCase(),null==r&&(r=i),null==s&&(s=[]),n="export.format.description."+e,o="export.format.name."+e,a.extend(this,{icon:r,desc:n,name:o,needs:s,ext:i,EXT:e})}a=e("underscore"),t.prototype.toString=function(){return this.ext},t.prototype.toJSON=function(){return{id:this.id,group:this.group,icon:this.icon,needs:this.needs,ext:this.ext}},t.prototype.isSuitable=function(e){return 0===this.needs.length||a.any(this.needs,function(t){return e[t]})},o=[new(r=t)({id:"tab",group:"flat"}),new r({id:"csv",group:"flat"}),new r({id:"xml",group:"machine"}),new r({id:"json",group:"machine"}),new r({id:"fasta",group:"bio",icon:"dna",needs:["Protein","SequenceFeature"],maxColumns:1}),new r({id:"gff3",group:"bio",icon:"dna",needs:["SequenceFeature"]}),new r({id:"bed",group:"bio",icon:"dna",needs:["SequenceFeature"]}),new r({id:"fake",group:"fake",icon:"fake",needs:["Department"]}),new r({id:"fake_2",group:"fake",icon:"fake",needs:["Company"]})],n.getFormat=function(t){return a.findWhere(o,{id:t})},n.getFormats=function(t){var e,n,i,r;for(r=[],n=0,i=o.length;n<i;n++)(e=o[n]).isSuitable(t)&&r.push(e);return r},n.registerFormat=function(t){var e,n,i;return n=t.id,e=t.icons,i=t.needs,o.push(new r(n,e,i))}}).call(this)},{underscore:262}],43:[function(e,i,t){(function(){var t,r={}.hasOwnProperty;function n(t,e){n.__super__.constructor.call(this),this.set({id:null,classes:[t.class],"service:base":"","service:url":"","report:uri":null}),this.set(e,t.value)}t=e("../core-model"),i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n)}).call(this)},{"../core-model":2}],44:[function(n,u,t){(function(){var t,e,o,i,s,a,r={}.hasOwnProperty;function l(t,e){var n;if(this.query=e,!(null!=(n=this.query)?n.on:void 0))throw new Error("no query");if(null==t)throw new Error("no options");l.__super__.constructor.call(this,t.path),this.set(a.omit(t,"path")),this.set({id:this.query.toXML()+"-"+this.get("path")}),this.listenTo(this.query,"change:joins",this.setOuterJoined),this.listenTo(this.query,"change:sortorder",this.setSortDirection),this.listenTo(this.query,"change:constraints",this.setConstraintNum),this._update_attrs()}a=n("underscore"),e=n("./path"),t=n("../options"),s=function(t){return null!=t?t.toUpperCase():void 0},o=a.compose(a.first,a.compact,a.map),i=function(t){return null!=t&&null!=t.isReference&&null!=t.isAttribute},u.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(l,e),l.prototype.defaults=function(){return a.extend(l.__super__.defaults.apply(this,arguments),{replaces:[],isFormatted:!1,isComposed:!1,sortable:!0,sortDirection:null,numOfCons:0,minimised:!1,outerJoined:!1,expanded:t.get("Subtables.Initially.Expanded")})},l.prototype._update_attrs=function(){return this.setOuterJoined(),this.setSortDirection(),this.setConstraintNum()},l.prototype.toJSON=function(){return a.extend(l.__super__.toJSON.apply(this,arguments),{replaces:this.get("replaces").map(String)})},l.prototype.getView=function(){var t,e,n,i;return n=(i=this.pick("replaces","isFormatted","path")).replaces,t=i.isFormatted,e=i.path,String(t&&1===n.length?n[0]:e)},l.prototype.validate=function(t,e){var n;if("replaces"in t){if(n=t.replaces,!a.isArray(n))return new Error("replaces must be an array");if(n.length&&!a.all(n,i))return new Error("all elements in replaces must be PathInfo objects")}},l.prototype.setOuterJoined=function(){var t,e,n,i,r;return r=this.getView(),n=this.get("replaces"),e=this.query.isOuterJoined(r),t=this.get("isFormatted")&&1<n.length,i=!e,this.set({outerJoined:e,isComposed:t,sortable:i})},l.prototype.setSortDirection=function(){var t,e,n,i,r;return n=this.get("replaces"),i=this.getView(),r=this,e=function(t){return r.query.getSortDirection(t)},t=s(o(n.concat([i]),e)),this.set({sortDirection:t})},l.prototype.setConstraintNum=function(){var r,t,o;return o=this.getView(),t=a.size(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.constraints).length;t<e;t++)(r=n[t]).path.match(o)&&i.push(r);return i}.call(this)),this.set({numOfCons:t})},l)}).call(this)},{"../options":63,"./path":56,underscore:262}],45:[function(i,o,t){(function(){var t,e,h,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}h=i("underscore"),t=i("../core/collection"),e=i("./step"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.model=e,n.prototype.currentQuery=null,n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.listenTo(this,"remove",this.unwatch),this.listenTo(this,"add",this.watch)},n.prototype.currentStep=0,n.prototype.comparator="revision",n.prototype.getCurrentQuery=function(){return this.currentQuery},n.prototype.setCurrentQuery=function(t){return this.currentQuery=t.get("query").clone()},n.prototype.unwatch=function(t){var e,n;if(null!=(e=null!=(n=null!=t?t.get("query"):void 0)?n:this.getCurrentQuery()))return this.stopListening(e)},n.prototype.watch=function(t){var e;if(this.setCurrentQuery(t),null!=(e=this.getCurrentQuery()))return this.listenTo(e,"change:constraints",this.onChangeConstraints),this.listenTo(e,"change:views",this.onChangeViews),this.listenTo(e,"change:joins",this.onChangeJoins),this.listenTo(e,"change:sortorder",this.onChangeSortOrder),this.listenTo(e,"change:logic",this.onChangeLogic),this.listenTo(e,"undo",this.popState)},n.prototype.onChangeConstraints=function(){return this.onChange("constraints","filter",function(t){return h.map(t,JSON.stringify)})},n.prototype.onChangeViews=function(){return this.onChange("views","column")},n.prototype.onChangeJoins=function(){return this.onChange("joins","join",function(t){return h.map(t,function(t,e){return e+":"+t})})},n.prototype.onChangeSortOrder=function(){return this.onChange("sortOrder","sort order element",function(t){return h.map(t,JSON.stringify)})},n.prototype.onChangeLogic=function(){return this.onChange("constraintLogic","constraint logic element",function(t){var e;return null!=(e=null!=t?t.match(/([A-Z]+)/):void 0)?e:[]})},n.prototype.triggerChangedCurrent=function(){return this.trigger("changed:current",this.last())},n.prototype.onChange=function(t,e,n){var i,r,o,s,a,l,u,c;return null==n&&(n=function(t){return t}),s=this.currentQuery,o=this.last().get("query"),u=n(o[t]),c=n(s[t]),l=u.length,r=c.length,i=Math.abs(l-r),a=function(){switch(!1){case!(l<r):return"Added";case!(r<l):return"Removed";case r!==h.union(u,c).length:return"Rearranged";default:return"Changed"}}(),this.addStep(a,i,e,s)},n.prototype.setInitialState=function(t){return this.size()&&this.reset(),this.addStep(null,null,"Initial",t)},n.prototype.addStep=function(t,e,n,i){var r,o;return o=this.currentQuery,r=i.clone(),this.unwatch(),this.add({query:r,revision:this.currentStep++,title:{verb:t,number:e,label:n}}),null!=o&&o.trigger("replaced:by",r),this.triggerChangedCurrent()},n.prototype.popState=function(){return this.revertToIndex(-2)},n.prototype.revertToIndex=function(t){var e;return t<0&&(t=this.length+t),e=this.at(t),this.revertTo(e)},n.prototype.revertTo=function(t){var e,n;if(!this.contains(t))throw new Error("State not in history");for(n=this.getCurrentQuery(),e=t.get("revision");this.last().get("revision")>e;)this.pop();return this.watch(t),null!=n&&n.trigger("replaced:by",t.get("query")),this.triggerChangedCurrent()},n)}).call(this)},{"../core/collection":5,"./step":59,underscore:262}],46:[function(e,o,t){(function(){var t,n,r={}.hasOwnProperty;function i(t,e,n){i.__super__.constructor.call(this,{classes:null!=e?e.map(String):void 0,id:n}),this.set({"service:base":t}),this.freeze("service:base","id","classes")}n=e("underscore"),t=e("../core-model"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.toJSON=function(){var t,e;return e=this.get("service:url"),t=/^http/.test(e)?e:this.get("service:base")+e,n.extend(i.__super__.toJSON.apply(this,arguments),{"report:uri":t})},i.prototype.merge=function(t,e){return this.set(e,t.value),this.set({"service:url":t.url})},i)}).call(this)},{"../core-model":2,underscore:262}],47:[function(a,l,t){(function(){function t(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,c,h,n,i,r={}.hasOwnProperty;function o(t){var e,n;e=t.path,n=t.style,o.__super__.constructor.call(this,e),null!=n&&this.set({style:n})}function s(){return s.__super__.constructor.apply(this,arguments)}i=a("underscore"),e=a("../core/collection"),n=a("./path"),t(o,n),o.prototype.defaults=function(){return i.extend(o.__super__.defaults.apply(this,arguments),{style:"INNER"})},c=o,l.exports=(t(s,e),s.prototype.model=c,s.prototype.comparator="displayName",s.prototype.initialize=function(){return s.__super__.initialize.apply(this,arguments),this.listenTo(this,"change:displayName",this.sort)},s.prototype.getJoins=function(){return i.object(this.where({style:"OUTER"}).map(function(t){return[t.get("path"),t.get("style")]}))},h=s),h.fromQuery=function(t){var e,n,i,r,o,s,a,l,u;for(i in e=new h,l=t.joins)o=l[i],r=t.makePath(i),e.add(new c({style:o,path:r}));for(s=0,a=(u=t.getQueryNodes()).length;s<a;s++)for(n=u[s];!n.isRoot();)e.add(new c({path:n})),n=n.getParent();return e}}).call(this)},{"../core/collection":5,"./path":56,underscore:262}],48:[function(n,i,t){(function(){var t,o,r={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}o=n("underscore"),t=n("../core-model"),i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.defaults=function(){return{columnName:null,columnTypeName:null,columnName:null,typeName:null,column:null,node:null,fieldName:null,contentName:null,view:[],rows:[]}},e.prototype.initialize=function(){return this.onChangeColumn(),this.listenTo(this,"change:column",this.onChangeColumn)},e.prototype.onChangeColumn=function(){var e,t,n,i,r;return e=this.get("column"),t=this.get("node"),1===(n=this.get("view")).length&&(t=(e=e.model.makePath(n[0],e.subclasses)).isAttribute()?e.getParent():e),t.getType().getDisplayName().then((i=this,function(t){return i.set({columnTypeName:t})})),e.getDisplayName().then((r=this,function(t){return r.set({columnName:t}),e.isAttribute()&&r.set({fieldName:o.last(t.split(" > "))}),r.set({contentName:o.compact([r.get("columnTypeName"),r.get("fieldName")]).join(" ")})}))},e.prototype.getPath=function(){return this.get("column")},e.prototype.toJSON=function(){return o.extend(e.__super__.toJSON.apply(this,arguments),{column:this.get("column").toString(),node:this.get("node").toString(),rows:this.get("rows").map(function(t){return t.map(function(t){return t.toJSON()})})})},e)}).call(this)},{"../core-model":2,underscore:262}],49:[function(e,i,t){(function(){var t,r={}.hasOwnProperty;function n(t,e){n.__super__.constructor.call(this),this.set({id:null,isNULL:!0,classes:[t],"service:base":"","service:url":"","report:uri":null}),e&&this.set(e,null)}t=e("../core-model"),i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n)}).call(this)},{"../core-model":2}],50:[function(e,n,t){(function(){var t,i,r={}.hasOwnProperty;function o(){return o.__super__.constructor.apply(this,arguments)}i=e("underscore"),t=e("backbone"),n.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,t.Model),o.prototype._defaults={},o.prototype.setLimits=function(t){return i.extend(this._defaults,t)},o.prototype.get=function(t){var e;return null!=(e=o.__super__.get.call(this,t))?e:t in this._defaults?this._defaults[t]:null},o.prototype.toJSON=function(){return i.extend({},this._defaults,this.attributes)},o.prototype.nullify=function(){var t,e,n,i,r;for(this.unset("min"),this.unset("max"),this.nulled=!0,r=[],e=0,n=(i=["change:min","change:max","change"]).length;e<n;e++)t=i[e],r.push(this.trigger(t,this));return r},o.prototype.reset=function(){return this.clear(),this.trigger("reset",this)},o.prototype.set=function(t,e){var n;return this.nulled=!1,i.isString(t)&&t in this._defaults?(n="min"===t?"max":"min",o.__super__.set.call(this,t,Math[n](this._defaults[t],e))):o.__super__.set.apply(this,arguments)},o.prototype.isAll=function(){return!this.isNotAll()},o.prototype.isNotAll=function(){var t,e,n;return!this.nulled&&(e=(n=this.toJSON()).min,t=n.max,null!=e&&e!==this._defaults.min||null!=t&&t!==this._defaults.max)},o)}).call(this)},{backbone:235,underscore:262}],51:[function(n,i,t){(function(){var e;function t(t,e){if(this.schema=e,null==t)throw new Error("No root");if(null==this.schema)throw new Error("no schema");this.base=t.replace(/\/service\/?$/,""),this._objects={}}n("underscore"),e=n("./intermine-object"),i.exports=(t.prototype.get=function(t,e){var n,i,r;return(n=null!=(i=this._objects)[r=t.id]?i[r]:i[r]=this._newObject(t)).merge(t,e),n},t.prototype._newObject=function(s){var a,t;return t=function(){var t,e,n,i,r,o;for(o=[],t=0,e=(r=null!=(n=null!=(i=s.class)?i.split(","):void 0)?n:[]).length;t<e;t++)a=r[t],o.push(this.schema.makePath(a));return o}.call(this),new e(this.base,t,s.id)},t.prototype.destroy=function(){var t,e;for(t in e=this._objects)e[t].destroy();return delete this.selectedObjects,delete this._objects},t)}).call(this)},{"./intermine-object":46,underscore:262}],52:[function(e,n,t){(function(){var s,t,a,r={}.hasOwnProperty;function l(){return l.__super__.constructor.apply(this,arguments)}s=e("backbone"),t=e("./uniq-items"),a=function(t,e){if(!(null!=t?t.equals:void 0)||!(null!=e?e.isRoot:void 0))return!1;for(;!t.equals(e);){if(e.isRoot())return!1;e=e.getParent()}return!0},n.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(l,t),l.prototype.contains=function(e){return e instanceof s.Model?l.__super__.contains.call(this,e):this.any(function(t){return a(e,t.get("item"))})},l.prototype.remove=function(e){var t,n,i,r,o;if(null==e)return!1;for(e instanceof s.Model&&l.__super__.remove.call(this,e),o=[],i=0,r=(t=this.filter(function(t){return a(e,t.get("item"))})).length;i<r;i++)n=t[i],o.push(l.__super__.remove.call(this,n));return o},l)}).call(this)},{"./uniq-items":62,backbone:235}],53:[function(e,n,t){(function(){var t,r={}.hasOwnProperty;function i(t){var e,n;n=t.path,e=t.direction,i.__super__.constructor.call(this,n),null==e&&(e="ASC"),this.set({direction:e})}t=e("./path"),n.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.asOrderElement=function(){return this.pick("path","direction")},i.prototype.toOrderString=function(){return this.get("path")+" "+this.get("direction")},i)}).call(this)},{"./path":56}],54:[function(t,e,n){(function(){function t(t,e){if(this.start=t,this.size=null!=e?e:null,!(null!=this.start&&0<=this.start))throw new Error("Start must be >= 0");if(null!=this.size&&this.size<0)throw new Error("Size must be null or Natural")}e.exports=(t.prototype.end=function(){return this.all()?null:this.start+this.size},t.prototype.all=function(){return!this.size},t.prototype.isBefore=function(t){return null!=this.size&&this.end()<t},t.prototype.isAfter=function(t){return t<this.start},t.prototype.leftGap=function(t){return this.isAfter(t)?this.start-t:null},t.prototype.rightGap=function(t){return this.isBefore(t)?t-this.end():null},t.prototype.next=function(){return new t(this.end(),this.size)},t.prototype.prev=function(){return new t(Math.max(0,this.start-this.size),this.size)},t.prototype.toString=function(){return"Page("+this.start+" .. "+this.end()+")"},t)}).call(this)},{}],55:[function(e,o,t){(function(){var n,t,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}t=e("./uniq-items"),n=e("backbone"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.paths=function(){return this.map(function(t){return t.get("item")})},i.prototype.contains=function(e){return this.any(function(t){return e.equals(t.get("item"))})},i.prototype.toggle=function(t){return this.contains(t)?this.remove(t):this.add(t)},i.prototype.remove=function(e){var t;return e instanceof n.Model?i.__super__.remove.apply(this,arguments):null!=(t=this.find(function(t){return e.equals(t.get("item"))}))?i.__super__.remove.call(this,t):void 0},i)}).call(this)},{"./uniq-items":62,backbone:235}],56:[function(i,o,t){(function(){var s,t,a,e,r={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function n(t){n.__super__.constructor.call(this),this.set(this.pathAttributes(t)),this.setDisplayName(t),this.setTypeName(t),this.pathInfo=function(){return t},this.freeze("path","isNumeric","isBoolean","isReference","isAttribute")}t=i("../core-model"),e=i("imjs").Model,a=e.NUMERIC_TYPES,s=e.BOOLEAN_TYPES,o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.defaults=function(){return{path:null,type:null,displayName:null,typeName:null,parts:[],isNumeric:!1,isBoolean:!1,isReference:!1,isAttribute:!0}},n.prototype.setDisplayName=function(t){return t.getDisplayName().then((e=this,function(t){return e.set({displayName:t,parts:t.split(" > ")}),e.freeze("displayName","parts")}));var e},n.prototype.setTypeName=function(t){var e;return(t.isAttribute()?t.getParent():t).getType().getDisplayName().then((e=this,function(t){return e.set({typeName:t})}))},n.prototype.pathAttributes=function(t){var e,n,i,r,o;return i=String(t),e={id:(n=t.isAttribute())?i:i+".id",path:i,type:null!=(o=(r=t.getType()).name)?o:r},n?(e.isNumeric=0<=l.call(a,r),e.isBoolean=0<=l.call(s,r)):(e.isReference=!0,e.isAttribute=!1),e},n)}).call(this)},{"../core-model":2,imjs:247}],57:[function(l,u,t){(function(){function t(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,o,r={}.hasOwnProperty;function s(){return s.__super__.constructor.apply(this,arguments)}function a(){return a.__super__.constructor.apply(this,arguments)}o=l("underscore"),n=l("../core-model"),e=l("../core/collection"),t(s,n),s.prototype.defaults=function(){return{index:null,query:null,cells:[]}},s.prototype.toJSON=function(){var r;return o.extend(s.__super__.toJSON.apply(this,arguments),{cells:function(){var t,e,n,i;for(i=[],t=0,e=(n=this.get("cells")).length;t<e;t++)r=n[t],i.push(r.toJSON());return i}.call(this)})},i=s,u.exports=(t(a,e),a.prototype.model=i,a.prototype.comparator="index",a)}).call(this)},{"../core-model":2,"../core/collection":5,underscore:262}],58:[function(l,u,t){(function(){function t(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,r,o={}.hasOwnProperty;function s(){return s.__super__.constructor.apply(this,arguments)}function a(t){var e;a.__super__.constructor.call(this),r.assertMatch(r.Service,t,"service"),this.state=new n({node:null,commonType:null,typeName:null}),this.listenTo(this.state,"change:commonType",this.onChangeType),this.listenTo(this.state,"change:node",this.onChangeNode),this.listenTo(this,"add remove reset",this.setType),t.fetchModel().then((e=this,function(t){return e.schema=t,e.setType()}))}n=l("../core-model"),e=l("../core/collection"),r=l("../core/type-assertions"),t(s,n),s.prototype.defaults=function(){return{class:null,id:null}},s.prototype.validate=function(t,e){return"class"in t&&null==t.class?'"class" must not be null':"id"in t&&null==t.id&&'"id" must not be null'},i=s,u.exports=(t(a,e),a.prototype.model=i,a.prototype.onChangeNode=function(){return this.trigger("change:node change",this.state.get("node"))},a.prototype.onChangeType=function(){var t,e;if(null!=this.schema)return null==(t=this.state.get("commonType"))?this.state.set({typeName:null}):(this.schema.makePath(t).getDisplayName().then((e=this,function(t){return e.state.set({typeName:t}),e.trigger("change:typeName change")})),this.trigger("change:commonType change"))},a.prototype.setType=function(){var t;if(null!=this.schema)return null!=(t=this.size()?t=this.schema.findCommonType(this.map(function(t){return t.get("class")})):null)?this.state.set({commonType:t}):this.state.set({commonType:null,typeName:null})},a)}).call(this)},{"../core-model":2,"../core/collection":5,"../core/type-assertions":10}],59:[function(o,s,t){(function(){var t,n,e,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}e=o("underscore"),t=o("../core-model"),n=o("../utils/count-executor"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.defaults=function(){return{count:0}},i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.set({createdAt:new Date}),this.listenTo(this,"change:query",this._setCount),this._setCount()},i.prototype._setCount=function(){var t,e;return null!=(t=this.get("query"))?n.count(t).then((e=this,function(t){return e.set({count:t})})):this.set({count:0})},i.prototype.toJSON=function(){return e.extend(i.__super__.toJSON.apply(this,arguments),{query:this.get("query").toJSON()})},i)}).call(this)},{"../core-model":2,"../utils/count-executor":77,underscore:262}],60:[function(d,m,t){(function(){function t(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,r,o,s,a,l,g,u={}.hasOwnProperty;function c(t){var e,n;if(this.query=t.query,this.view=t.view,c.__super__.constructor.call(this),null==this.query)throw new Error("No query in call to new SummaryModel");if(null==this.view)throw new Error("No view in call to new SummaryModel");this.fetch=g.partial(a,this.query,this.view),n=this.view.getType(),e=l(n),this.set({limit:i.get("INITIAL_SUMMARY_ROWS"),canHaveMultipleValues:this.query.canHaveMultipleValues(this.view),type:n,integral:e}),this.histogram=new r,this.items=new s,this.listenTo(this,"change:filterTerm",this.onFilterChange),this.listenTo(this,"change:summaryLimit",this.onLimitChange),this.listenTo(this.query,"change:constraints",this.load),this.load()}function h(){return h.__super__.constructor.apply(this,arguments)}function p(){return p.__super__.constructor.apply(this,arguments)}function f(){return f.__super__.constructor.apply(this,arguments)}g=d("underscore"),n=d("../core-model"),e=d("../core/collection"),i=d("../options"),a=d("../services/column-summary").getColumnSummary,l=function(t){return"int"===t||"Integer"===t||"long"===t||"Long"===t||"short"===t||"Short"===t},m.exports=(t(c,n),c.prototype.defaults=function(){return{error:null,maxCount:null,loading:!1,initialized:!1,canHaveMultipleValues:!1,numeric:!1,filterTerm:null}},c.prototype.destroy=function(){return this.histogram.close(),this.items.close(),c.__super__.destroy.apply(this,arguments)},c.prototype.getMaxCount=function(){return this.get("maxCount")},c.prototype.hasMore=function(){return!this.get("numeric")&&this.get("got")<this.get("uniqueValues")},c.prototype.hasAll=function(){return!this.hasMore()},c.prototype.toJSON=function(){return g.extend(c.__super__.toJSON.apply(this,arguments),{items:this.items.toJSON(),histogram:this.getHistogram()})},c.prototype.onFilterChange=function(){return this.hasAll()?this.filterLocally():this.load()},c.prototype.filterLocally=function(){var t,n,e;return null!=(t=this.get("filterTerm"))?(n=t.toLowerCase().split(/\s+/),e=function(e){return g.all(n,function(t){return!(!e||!~e.toLowerCase().indexOf(t))})},this.items.each(function(t){return t.show(e(t.get("item")))})):this.items.each(function(t){return t.show()})},c.prototype.increaseLimit=function(t){var e;return null==t&&(t=2),e=t*this.get("limit"),this.set({limit:e})},c.prototype.onLimitChange=function(){return this.load()},c.prototype.setFilterTerm=function(t){return this.set({filterTerm:t})},c.prototype.fetchAll=function(){return this.set({limit:null})},c.prototype.load=function(){return this.set({loading:!0}),this.fetch(this.get("filterTerm"),this.get("limit")).then(this.getSummaryHandler()).then(null,(e=this,function(t){return e.set({error:t})}));var e},c.prototype.getSummaryHandler=function(){var e,n;return this.lastSummaryHandlerCreatedAt=e=g.now(),n=this,function(t){return n.handleSummary(e,t)}},c.prototype.getHistogram=function(){var t,e,n,i,r,o;if(!(e=this.get("buckets")))return[];for(o=[],t=n=1;1<=e?n<=e:e<=n;t=1<=e?++n:--n)o.push(null!=(i=null!=(r=this.histogram.get(t))?r.get("count"):void 0)?i:0);return o},c.prototype.handleSummary=function(t,e){var n,r,i,o,s,a,l,u,c,h,p,f,d,m;if(f=e.stats,p=e.results,t===this.lastSummaryHandlerCreatedAt)return h=null!=f.max,c={filteredCount:f.filteredCount,uniqueValues:f.uniqueValues,available:null!=(m=f.filteredCount)?m:f.uniqueValues,got:p.length,numeric:h,initialized:!0,loading:!1},h?(i=f.buckets,l=f.max,u=f.min,d=f.stdev,n=f.average,g.extend(c,{buckets:i,max:l,min:u,stdev:parseFloat(d),average:parseFloat(n)}),this.items.size()&&this.items.reset(),this.histogram.set(function(){var t,e,n,i;for(i=[],t=0,e=p.length;t<e;t++)n=p[t],r=n.bucket,o=n.count,i.push({item:r,count:o,id:r});return i}()),c.maxCount=this.histogram.getMaxCount()):(this.histogram.size()&&this.histogram.reset(),this.items.set(function(){var t,e,n,i;for(i=[],s=t=0,e=p.length;t<e;s=++t)n=p[s],a=n.item,o=n.count,i.push({item:a,count:o,id:s});return i}()),c.maxCount=this.items.getMaxCount()),this.set(c)},c),t(h,n),h.prototype.defaults=function(){return{symbol:null,share:null,visible:!0,selected:!1,hover:!1,count:0,item:null}},h.prototype.select=function(){return this.set({selected:!1})},h.prototype.deselect=function(){return this.set({selected:!1})},h.prototype.hide=function(){return this.set({visible:!1})},h.prototype.show=function(t){return null==t&&(t=!0),this.set({visible:t})},h.prototype.mousein=function(){return this.set({hover:!0})},h.prototype.mouseout=function(){return this.set({hover:!1})},o=h,t(p,e),p.prototype.model=o,p.prototype.getMaxCount=function(){var t;return null!=(t=this.first())?t.get("count"):void 0},s=p,t(f,e),f.prototype.model=o,f.prototype.getMaxCount=function(){var r;return g.max(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.models).length;t<e;t++)r=n[t],i.push(r.get("count"));return i}.call(this))},r=f}).call(this)},{"../core-model":2,"../core/collection":5,"../options":63,"../services/column-summary":65,underscore:262}],61:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return this.filled=function(t,e){return function(){return t.apply(e,arguments)}}(this.filled,this),i.__super__.constructor.apply(this,arguments)}e=o("../options"),t=o("../core-model"),n=o("./path-set"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.defaults=function(){return{phase:"FETCHING",start:0,size:e.get("DefaultPageSize"),count:null,fill:0,error:null,selecting:!1,previewOwner:null,highlitNode:null,minimisedColumns:new n}},i.prototype.initialize=function(){var t;return t=this.get("minimisedColumns"),this.listenTo(t,"add remove reset",function(){return this.trigger("change:minimisedColumns change")}),this.freeze("minimisedColumns")},i.prototype.filled=function(){return this.swap("fill",function(t){return t+1})},i.prototype.toJSON=function(){var t;return(t=i.__super__.toJSON.apply(this,arguments)).minimisedColumns=this.get("minimisedColumns").toJSON().map(String),t},i.prototype.destroy=function(){return this.get("minimisedColumns").close(),i.__super__.destroy.apply(this,arguments)},i)}).call(this)},{"../core-model":2,"../options":63,"./path-set":55}],62:[function(u,c,t){(function(){function t(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,s,a,r={}.hasOwnProperty;function o(){return o.__super__.constructor.apply(this,arguments)}function l(){return l.__super__.constructor.apply(this,arguments)}e=u("backbone"),a=u("underscore"),i=u("../core-model"),n=u("../core/collection"),t(o,i),o.prototype.initialize=function(t,e){return null!=e&&this.set(e),this.set({item:t,id:String(t)})},s=o,c.exports=(t(l,n),l.prototype.model=s,l.prototype.toJSON=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.models).length;e<n;e++)t=i[e],r.push(t.get("item"));return r},l.prototype.togglePresence=function(t){return this.contains(t)?this.remove(t):this.add(t)},l.prototype.get=function(t){return l.__super__.get.call(this,t instanceof e.Model?t:String(t))},l.prototype.contains=function(t){return t instanceof s?l.__super__.contains.call(this,t):null!=this.findWhere({item:t})},l.prototype.add=function(t,e){var n,i,r,o;for(o=[],i=0,r=(t=a(t).isArray()?t:[t]).length;i<r;i++)null!=(n=t[i])&&""!==n&&(this.contains(n)?o.push(void 0):o.push(l.__super__.add.call(this,new s(n,e))));return o},l.prototype.remove=function(t,e){var n,i,r,o;for(o=[],i=0,r=(t=a(t).isArray()?t:[t]).length;i<r;i++)(n=t[i])instanceof s?o.push(l.__super__.remove.call(this,n,e)):o.push(l.__super__.remove.call(this,this.findWhere({item:n}),e));return o},l)}).call(this)},{"../core-model":2,"../core/collection":5,backbone:235,underscore:262}],63:[function(n,i,t){(function(){var t,r={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype})(e,n("./core/nested-model")),e.prototype.defaults=function(){return{INITIAL_SUMMARY_ROWS:1e3,NUM_SEPARATOR:",",NUM_CHUNK_SIZE:3,MAX_PIE_SLICES:15,DropdownMax:20,DefaultPageSize:25,DynamicObjects:{NameDelimiter:" / "},CodeGen:{Default:"py",Langs:["py","pl","java","rb","js","xml"],Extra:{js:"codegen.AsHTML"}},ListFreshness:250,MaxSuggestions:1e3,ListCategorisers:["organism.name","department.company.name"],PieColors:"category10",TableResults:{CacheFactor:10,RequestLimit:5e3},TableHeader:{FullPathPopoverEnabled:!0},TableCell:{AddDataClasses:!0,PreviewTrigger:"hover",HoverDelay:200,IndicateOffHostLinks:!0,ExternalLinkIcons:{"http://some.host.somewhere":"http://some.host.somewhere/logo.png"}},ItemDetails:{ShowReferenceCounts:!1,Fields:{},Count:{}},StylePrefix:"imtables",SuggestionDepth:2,Events:{ActivateTab:"mouseenter"},Subtables:{Initially:{expanded:!1}},Facets:{DrawAverageLine:!0,Initially:{Open:!0}},Destinations:["download","Galaxy","GenomeSpace","Drive","Dropbox"],Destination:{download:{Enabled:!0},Galaxy:{Main:"http://main.g2.bx.psu.edu",Current:null,Tool:"flymine",Save:!1,Enabled:!0},GenomeSpace:{Upload:"https://gsui.genomespace.org/jsui/upload/loadUrlToGenomespace.html",Enabled:!0},Drive:{Library:"https://apis.google.com/js/client.js",Enabled:!1},Dropbox:{Library:"https://www.dropbox.com/static/api/2/dropins.js",Enabled:!1}},ShowId:!1,TableWidgets:{Pagination:{enabled:!0,index:0},PageSizer:{enabled:!0,index:1},TableSummary:{enabled:!0,index:2}},CellCutoff:100,ShowHistory:!0,icons:"fontawesome",D3:{Transition:{Easing:"exp",Duration:500,DurationShort:200}},brand:{"http://www_flymine_org/query/service/":{name:"FlyMine"},"http://preview_flymine_org/preview/service/":{name:"FlyMine-Preview"},"http://www_mousemine_org/mousemine/service/":{name:"MouseMine (MGI)"}},Formatters:{testmodel:{},genomic:{}},ColumnManager:{SelectColumn:{Multi:!0}},UndoHistory:{ShowAllStatesCutOff:6}}},t=e,i.exports=new t,i.exports.Options=t}).call(this)},{"./core/nested-model":8}],64:[function(t,e,n){(function(){n.IS_BLANK=/^\s*$/}).call(this)},{}],65:[function(t,e,n){(function(){var o,s;o={},s=function(t,e){return t.service.root+":"+t.service.token+":"+t.toXML()+":"+e},n.getColumnSummary=function(t,e,n,i){var r;return null!=o[r=s(t,e)]?o[r]:o[r]=t.filterSummary(e,n,i)}}).call(this)},{}],66:[function(r,t,e){(function(i){(function(){var t,e,n;n=i.jQuery,e=t=r("jquery"),r("backbone").$=e,i.jQuery=t,r("bootstrap"),r("typeahead.js"),r("jquery-ui-bundle"),null!=n?i.jQuery=n:delete i.jQuery}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{backbone:235,bootstrap:236,jquery:256,"jquery-ui-bundle":255,"typeahead.js":261}],67:[function(t,e,n){var i=t("underscore"),r=n;function o(t){if(!t)throw new Error("Name is required.");if(t=t.replace(/-/g,"_"),templ=r[t],templ)return templ;throw new Error('No template registered as "'+t+'"')}n.template=function(t,e){return i.template(o(t),e)},n.templateFromParts=function(t,e){var n=t.map(o).join("\n");return i.template(n,e)},r.clear='<div style="clear:both"></div>',n.no_results="<% /* requires: selectList :: [], canUndo :: bool */ %>\n<td colspan=\"<%- selectList.length %>\">\n  <div class=\"alert alert-warning\">\n    <% if (canUndo) { %>\n      <button class=\"pull-right btn btn-large btn-default btn-undo\">\n        <%= Icons.icon('Undo') %>\n        <%- Messages.getText('Undo') %>\n      </button>\n    <% } %>\n    <strong><%- Messages.getText('table.Empty') %></strong>\n    <p><%- Messages.getText('table.EmptyWhy') %></p>\n  </div>\n</td>\n",n.code_gen_js='<% if (asHTML) { %>\n\x3c!-- The Element we will target --\x3e\n<div id="some-elem"></div>\n\x3c!-- The imtables source --\x3e\n<script src="<%= imtablesJS %>" charset="UTF-8"><\/script>\n<link rel="stylesheet" href="<%= imtablesCSS %>">\n<script>\n<% } %>\n<% if (!asHTML) { %>\n/* Install from npm: npm install imtables\n * This snippet assumes the presence on the page of an element like:\n * <div id="some-elem"></div>\n */\nvar imtables = require(\'imtables\');\n<% } %>\n\nvar selector = \'#some-elem\';\nvar service  = {root: \'<%= service.root %>\'};\nvar query    = <%= JSON.stringify(query, null, 2) %>;\n\nimtables.loadTable(\n  selector, // Can also be an element, or a jQuery object.\n  <%= JSON.stringify(page) %>, // May be null\n  {service: service, query: query} // May be an imjs.Query\n).then(\n  function (table) { console.log(\'Table loaded\', table); },\n  function (error) { console.error(\'Could not load table\', error); }\n);\n<% if (asHTML) { %>\n<\/script>\n<% } %>\n',n.table_subtable_summary="<% if (rows.length) { %>\n  <%= Icons.icon('Table') %>\n<% } else { %>\n  <%= Icons.icon('EmptyTable') %>\n<% } %>\n<%- rows.length %>\n<%- pluralise(contentName, rows.length) %>\n",n.column_manager_path_chooser_buttons="<button class=\"btn btn-default im-rearrange-columns\">\n  <%- Messages.getText('Cancel') %>\n</button>\n<button class=\"btn btn-success im-add-column\"\n  <%= collection.length ? (void 0) : 'disabled' %> >\n  <%- Messages.getText('columns.AddColumn', {num: collection.length}) %>\n</button>\n\n",n.too_many_suggestions="<span class=\"alert alert-info\">\n  {{{ icons.icon('Info') }}}\n  {{ messages.getText('conbuilder.TooManySuggestions') }}\n  There are {{ extra }} values we could not include.\n</span>\n",n.export_destination_radios='<label><%- Messages.getText(\'export.param.Destination\') %></label>\n<% _.each(destinations, function (d) { %>\n    <div class="radio im-dest-<%- d %>">\n        <label>\n            <input type="radio"\n                    name="dest"\n                    <%= (d === dest) ? \'checked\' : void 0 %>>\n            <%- Messages.getText(d) %>\n        </label>\n    </div>\n<% }); %>\n\n',n.active_constraint='<div class="im-con-overview">\n  <% if (data.con.editable != null && data.con.editable === false) { %>\n    <a title="<%- data.messages.getText(\'conbuilder.NotEditable\') %>">\n        <%= data.icons.icon(\'Lock\') %>\n    </a>\n  <% } else { %>\n    <a class="im-remove-constraint"\n        title="<%- data.messages.getText(\'conbuilder.Remove\') %>"\n        >\n        <%= data.icons.icon(\'RemoveConstraint\') %>\n    </a>\n    <a class="im-edit" title="<%- data.messages.getText(\'conbuilder.EditCon\') %>">\n        <%= data.icons.icon(\'Edit\') %>\n    </a>\n  <% } %>\n</div>\n\n<% /* We use the :empty selector on this element - hence it must be on one line */ %>\n<div class="im-constraint-editor"></div>\n',n.export_json_options="<h3><%- Messages.getText('export.category.Options') %></h3>\n\n<div class=\"radio\">\n    <label>\n        <input type=\"radio\"\n               name=\"rows\"\n               <%= (jsonFormat === 'rows') ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.json.Rows') %>\n        <pre><%- Messages.getText('export.json.RowsExample') %></pre>\n    </label>\n</div>\n\n<div class=\"radio\">\n    <label>\n        <input type=\"radio\"\n               name=\"objects\"\n               <%= (jsonFormat === 'objects') ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.json.Objects') %>\n        <pre><%- Messages.getText('export.json.ObjExample') %></pre>\n    </label>\n</div>\n\n<% if ((size || start) && jsonFormat === 'objects') { %>\n    <div class=\"alert alert-warning\">\n        <h4><%- Messages.get('Warning') %></h4>\n        <p><%- Messages.get('export.json.ObjWarning') %></p>\n    </div>\n<% } %>\n\n",n.progress_bar='<% /* requires: doneness (float: 0 <= i <= 1) */ %>\n<% if (doneness != null && doneness >= 0) { %>\n    <div class="progress">\n        <div class="progress-bar progress-bar-striped active"\n             role="progressbar"\n             aria-valuenow="<%- doneness %>"\n             aria-valuemin="0"\n             aria-valuemax="1"\n             style="width: <%- 100 * doneness %>%;">\n            <% if (doneness < 1) { %>\n              <span class="sr-only">\n                <%- Math.round(100 * doneness) %>% <%- Messages.getText(\'Complete\') %>\n              </span>\n            <% } %>\n        </div>\n    </div>\n<% } %>\n',n.export_row_controls='<h4 class="im-title"></h4>\n\n<div class="form-group">\n    <label class="size-label"></label>\n    <input name="size"\n           step="1"\n           type="range"\n           min="1"\n           max="<%= max %>"\n           value="<%= size || max %>">\n</div>\n\n<div class="form-group">\n    <label class="start-label"></label>\n    <input name="start"\n           step="1"\n           type="range"\n           min="0"\n           max="<%= max - 1 %>"\n           value="<%= start %>">\n</div>\n\n<div class="form-group im-reset">\n</div>\n',n.count_summary="<% if (size && count) { %>\n  <% var msg = (size == 0 ? '.ShowingAll' : '.ShowingRange'); %>\n  <% ['xs', 'sm', 'md', 'lg'].forEach(function (pageSize) { %>\n    <span class=\"visible-<%= pageSize %>-inline\">\n      <%- Messages.getText('table.' + pageSize + msg, page) %>\n    </span>\n  <% }); %>\n<% } %>\n",n.active_progress_bar='<div class="progress progress-info progress-striped active">\n  <div class="bar" style="width: 100%"></div>\n</div>\n',n.type_value_controls="<label class=\"span4\">\n    <%- messages.getText('conbuilder.IsA') %>\n</label>\n<% if (subclasses.length == 1) { %>\n  <select disabled class=\"form-control\">\n      <option><%- subclasses[0].text %></option>\n  </select>\n<% } else { %>\n  <%= select(subclasses, isSelected, 'form-control im-value-type') %>\n<% } %>\n  \n",n.list_dialogue_button_node='<a href="#">\n    <strong>\n        <%- displayName || path %>\n    </strong>\n    <% if (state.count) { %>\n        (<%- numToString(state.count) %>\n        <%- pluralise((typeName || type), state.count) %>)\n    <% } %>\n</a>\n',n.only_one_item="<div class=\"alert alert-info\">\n    <%= Icons.icon('Info') %>\n    <%= Messages.getText('summary.OnlyOne', {names: state, item: items[0]}) %>\n</div>\n\n",n.export_rows_reset_button="<button type=\"button\"\n        <%= (isAll) ? 'disabled' : void 0 %>\n        class=\"btn btn-default btn-reset\">\n        <%- Messages.getText('export.ResetRowSelection') %>\n</button>\n\n<% if (tablePage) { %>\n    <button type=\"button\"\n            <%= (tablePage.start === start && tablePage.size === size) ? 'disabled' : void 0 %>\n            class=\"btn btn-default im-set-table-page\">\n            <%- Messages.getText('export.SetTablePage') %>\n    </button>\n<% } %>\n        \n",n.download_popover='<% /* requires: formats, query, path */ %>\n<ul role="menu" class="im-export-summary">\n    <% _.each(formats, function (icon, param) { %>\n      <li role="presentation">\n        <a role="menuitem"\n            href="<%= query.getExportURI(param) %>&summaryPath=<%= path %>">\n            <%= Icons.icon(icon) %>\n            <%- icon.toUpperCase() %>\n        </a>\n      </li>\n    <% }); %>\n</ul>\n',n.logic_manager_body='<div class="form-group">\n  <label class="form-label">\n    <%- Messages.getText(\'logic.LogicLabel\') %>\n    <input type="text"\n          class="im-logic form-control"\n          placeholder="<%- state.defaultLogic %>"\n          value="<%- logic %>">\n  </label>\n</div>\n<div class="form-group">\n  <button class="pull-right btn btn-primary <%- (state.disabled) ? \'disabled\' : null %>"\n          type="submit">\n    <%- Messages.getText(\'logic.ApplyLogic\') %>\n  </button>\n</div>\n',n.new_filter_dialogue='<div class="modal-body">\n</div>\n<div class="modal-footer">\n    <button class="disabled btn btn-primary pull-right im-add-constraint">\n        <%- Messages.getText(\'constraints.AddFilter\') %>\n    </button>\n    <button class="btn im-close pull-left">\n        <%- Messages.getText(\'Cancel\') %>\n        Cancel\n    </button>\n</div>\n',n.input_with_button='<input type="text" class="form-control"\n       value="<%- value %>"\n       placeholder="<%- Messages.getText(placeholder) %>">\n<span class="input-group-btn">\n  <button class="btn btn-default" type="button">\n    <%- Messages.getText(button) %>\n  </button>\n</span>\n\n',n.modal_error='<% /* Renders an alert box at various levels, with appropriate icons and messages */ %>\n<% if (error) { %>\n    <div class="pull-left alert <%- errorAlert(error) %>">\n        <% if (!error.cannotDismiss) { %>\n            <button type="button" class="dismiss">\n                <span aria-hidden="true">&times;</span>\n                <span class="sr-only">Close</span>\n            </button>\n        <% } %>\n        <%= Icons.icon(errorIcon(error)) %>\n        <strong><%- Messages.getText(\'ErrorTitle\', error) %></strong>\n        <% if (error.key != null) { %>\n            <%- Messages.getText(error.key) %>\n        <% } else { %>\n            <%- error.message || error %>\n        <% } %>\n    </div>\n<% } %>\n',n.facet_item='<dd>\n    <a href=#>\n        <b class="im-facet-count pull-right">\n            (<%- count %>)\n        </b>\n        <%- item %>\n    </a>\n</dd>\n',n.table_cell='<% if (state.minimised) { %>\n  &hellip;\n<% } else if (entity.id == null) { %>\n  <% if (value != null && formattedValue != null) { %>\n    <span class="im-displayed-value"><%= value %></span>\n  <% } else if (entity.isNULL) { %>\n    <span class="im-null-entity">\n      <%- Messages.getText(\'table.cell.NullEntity\', {type: entity[\'class\']}) %>\n    </span>\n  <% } else { %>\n    <%= NULL_VALUE %>\n  <% } %>\n<% } else { %>\n  <input\n    class="im-list-chooser"\n    type="checkbox"\n    <% if (input.checked) { %>checked<% } %>\n    <% if (input.disabled) { %>disabled<% } %>\n    style="display:<%- input.display %>">\n\n  <a class="im-cell-link" target="<%- target %>" href="<%= url %>">\n\n    <% if (isForeign) { %>\n      <% if (icon) { %>\n        <img src="<%= icon %>" class="im-external-link"></img>\n      <% } else { %>\n        <%= Icons.icon(\'ExternalLink\') %>\n      <% } %>\n    <% } %>\n\n    <% if (value != null && formattedValue != null) { %>\n      <span class="im-displayed-value"><%= formattedValue %></span>\n    <% } else { %>\n      <%= NULL_VALUE %>\n    <% } %>\n\n  </a>\n\n  <% if (value != null && field === \'url\' && rawValue != url) { %>\n    <a class="im-cell-link external" href="<%= rawValue %>">\n      <%= Icons.icon(\'ExternalLink\') %>\n      <%- Messages.getText(\'table.cell.Link\') %>\n    </a>\n  <% } %>\n<% } %>\n',n.column_manager_path_remover='<% /* requires: removeTitle */ %>\n<span class="pull-right im-remove-view"\n      title="<%- Messages.getText(removeTitle) %>">\n    <%= Icons.icon(\'Remove\') %>\n</span>\n\n',n.export_column_control="<span class=\"badge\"><%- item.getType() %></span>\n<span class=\"im-active-state\">\n    <% if (active) { %>\n        <%= Icons.icon('Check') %>\n    <% } else { %>\n        <%= Icons.icon('UnCheck') %>\n    <% } %>\n</span>\n<%- name %>\n",n.undo_history='<button class="btn btn-default im-undo">\n  <%= Icons.icon(\'Undo\') %>\n  <span class="visible-lg-inline">\n    <%- Messages.getText(\'Undo\') %>\n  </span>\n</button>\n\n<button class="btn btn-default dropdown-toggle"\n        data-toggle="dropdown">\n  <span class="caret"></span>\n</button>\n\n<ul class="dropdown-menu im-state-list">\n    <li>\n      <button\n          title="<%- Messages.getText(\'undo.ToggleTrivialTitle\', state) %>"\n          class="btn btn-xs btn-default im-toggle-trivial <%= state.hideTrivial ? \'active\' : void 0 %>">\n        <%- Messages.getText(\'undo.ToggleTrivial\', state) %>\n      </button>\n    </li>\n</ul>\n',n.error_message="<% if (error) { %>\n    <div class=\"alert alert-<%= error.level || 'danger' %>\">\n        <%= icons.icon('Error') %>\n        <span class=\"im-conbuilder-error\">\n            <%- error.message || error %>\n        </span>\n    </div>\n<% } %>\n\n",n.boolean_value_controls="<button class=\"btn btn-default im-true {{ (value === true) ? ' active' : void 0 }}\">\n  True\n</button>\n<button class=\"btn btn-default im-false {{ (value === false) ? ' active' : void 0 }}\">\n  False\n</button>\n",n.facet_title="<%= Icons.icon(state.open ? 'Expanded' : 'Collapsed') %>\n<span class=\"im-facet-title\"><%- pathName %></span>\n&nbsp;\n<span class=\"im-facet-count\"><%- Messages.getText('Number', {n: got} %></span>\n",n.join_manager_body="<ul class=\"list-group\"></ul>\n\n<div class=\"alert alert-info\">\n  <%= Icons.icon('Info') %>\n  <strong class=\"im-clickable\">\n    <%- Messages.getText('joins.ExplanationTitle') %>\n  </strong>\n  <p class=\"<%= (!state.explaining) ? 'im-latent' : void 0 %>\">\n    <%- Messages.getText('joins.Explanation') %>\n  </p>\n</div>\n",n.summary_no_results="<div class=\"alert alert-warning\">\n    <%= Icons.icon('Warning') %>\n    <%- Messages.getText('summary.NoResults', {path: pathName}) %>\n</div>\n\n",n.add_value_control='<div class="im-table-height-wrapper">\n    <table class="table table-condensed"></table>\n</div>\n<div class="input-group">\n    <input type="text" class="im-new-multi-value form-control">\n    <span class="input-group-btn">\n        <button class="btn btn-primary im-add" type="button">\n            <span class="im-long"><%- messages.getText(\'multivalue.AddValue\') %></span>\n            <span class="im-short"><%- messages.getText(\'multivalue.AddValueShort\') %></span>\n        </button>\n    </span>\n</div>\n',n.table_throbber='<tr class="im-table-throbber">\n  <td colspan="<%= colcount %>">\n    <h2><%- Messages.getText(\'table.RequestingData\') %></h2>\n    <div class="progress progress-info progress-striped active">\n      <div class="bar" style="width: 100%"></div>\n    </div>\n  </td>\n</tr>\n',n.cell_preview_reference="<tr>\n    <td class=\"im-field-name\"><%- _.rest(parts).join(' ') %></td>\n    <td class=\"im-field-value <%- field.toLowerCase() %>\">\n        <%- values.join(', ') %>\n    </td>\n</tr>\n",n.code_gen_button_main="<%= Icons.icon('CodeFile') %>\n<span class=\"hidden-sm hidden-xs\">\n  <%- Messages.getText('codegen.GenerateCodeIn', {lang: lang}) %>\n</span>\n<span class=\"visible-sm-inline im-current-lang\">\n    <%- Messages.getText('codegen.Lang', {lang: lang}) %>\n</span>\n\n",n.export_compression_controls="<h4><%- Messages.getText('export.category.Compression', state) %></h4>\n\n<div class=\"checkbox im-compress\">\n    <label>\n        <input type=\"checkbox\" <%= compress ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.UseCompression') %>\n    </label>\n</div>\n\n<fieldset <%= compress ? void 0 : 'disabled' %>>\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"gzip\"\n                <%= (compression === 'gzip') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.UseGZIP') %>\n        </label>\n    </div>\n\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"zip\"\n                <%= (compression === 'zip') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.UseZIP') %>\n        </label>\n    </div>\n</fieldset>\n\n",n.export_fasta_options='<h3><%- Messages.getText(\'export.category.Options\') %></h3>\n\n<div class="form-group">\n    <label><%- Messages.getText(\'FastaExtension\') %></label>\n    <input type="text"\n           value="<%- fastaExtension %>"\n           placeholder="5kbp"\n           class="form-control im-fasta-ext">\n</div>\n',n.facet_row='<% /* requires: selected, symbol, item, count, percent, opacity, share */ %>\n<td class="im-selector-col">\n  <span><%- symbol %></span>\n  <div class="checkbox"></div>\n</td>\n\n<td class="im-item-col">\n  <% if (item != null) { %>\n    <%- item %>\n  <% } else { %>\n    <span class=null-value>&nbsp;</span>\n  <% } %>\n</td>\n\n<td class="im-count-col">\n  <% if (max > 1) { %>\n    <div class="im-facet-bar"\n         style="width:<%- percent %>%;background:<%- Messages.getText(\'summary.FacetBar\', {opacity: opacity}) %>">\n    </div>\n  <% } %>\n  <span class="im-count"><%- numToString(count) %></span>\n</td>\n\n<% if (share != null) { %>\n    <td class="im-percent-col"><i><%- share.toFixed() %>%</i></td>\n<% } %>\n',n.list_tags_apology="<% if (!hasTags) { %>\n  <span>\n    <%- Messages.getText('lists.NoTags') %>\n  </span>\n<% } %>\n",n.slider='<div class="im-slider">\n    <% _.each(markers, function(marker) { %>\n        <span class="im-slider-marker"><%- marker.value %></span>\n    <% }); %>\n</div>\n',n.classy_popover='<div class="popover <%- classes %>" role="tooltip">\n  <div class="arrow"></div>\n  <h3 class="popover-title"></h3>\n  <div class="popover-content"></div>\n</div>\n',n.column_manager_order_direction="<% /* requires: direction, isNumeric */ %>\n<span class=\"im-change-direction\"\n  title=\"<%- Messages.getText('columns.ChangeDirection') %>\">\n  <span class=\"sr-only\">\n    <%- Messages.getText('columns.CurrentDirection', {\n      dir: direction, numeric: isNumeric\n    }) %>\n  </span>\n  <%= Icons.icon('Sort' + (isNumeric ? 'Numeric' : 'String') + direction) %>\n</span>\n",n.export_destination_options='<div class="form-group im-param-name">\n    <label><%- Messages.getText(\'export.param.Name\') %></label>\n    <div class="input-group">\n      <input type="text"\n             value="<%- filename %>"\n             class="form-control"\n             placeholder="<%- Messages.getText(\'export.param.Name\') %>"\n             aria-label="<%- Messages.getText(\'export.param.Name\') %>">\n      <div class="input-group-btn">\n        <button type="button"\n                class="btn btn-default dropdown-toggle"\n                data-toggle="dropdown"\n                aria-expanded="false">\n          .<%- format %>\n          <span class="caret"></span>\n        </button>\n        <ul class="dropdown-menu dropdown-menu-right" role="menu">\n          <% _.chain(formats).groupBy(\'group\').each(function (fmts, grp) { %>\n            <% if (this.i++) { %><li class="divider"></li><% } %>\n            <% _.each(fmts, function (fmt) { %>\n                <li>\n                    <a href="#"\n                       class="im-fmt-<%- fmt.id %>">\n                      <%= Icons.icon(fmt.icon) %>\n                      <%- Messages.getText(fmt.name) %>\n                    </a>\n                </li>\n            <% }); %>\n          <% }, {i: 0}); %>\n        </ul>\n      </div>\n    </div>\n</div>\n\n<% if (format && format.desc) { %>\n  <div class="alert alert-info">\n    <%- Messages.getText(format.desc) %>\n  </div>\n<% } %>\n\n<div class="row">\n    <div class="col-sm-6 im-param-dest">\n    </div>\n    <div class="col-sm-6 im-dest-opts">\n    </div>\n</div>\n',n.large_table_disuader='<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <h3>\n            <%= size %> rows - are you sure?\n            </h3>\n        </div>\n\n        <div class="modal-body">\n\n            <p><%= Messages.getText(\'largetable.appeal\', {size: size}) %></p>\n\n            <ul>\n                <li>\n                    <p>\n                        If you want to see all the data, you can page \n                        <span class="label label-info">\n                            <%= Icons.icon(\'GoBack\') %>\n                            backwards\n                        </span>\n                        and \n                        <span class="label label-info">\n                            forwards\n                            <%= Icons.icon(\'GoForward\') %>\n                        </span>\n                        through the results.\n                    </p>\n                    <div class="btn-group">\n                        <a class="btn btn-default im-alternative-action page-backwards" href="#">\n                            <%= Icons.icon(\'GoBack\') %>\n                            go one page back\n                        </a>\n                        <a class="btn btn-default im-alternative-action page-forwards" href="#">\n                            go one page forward\n                            <%= Icons.icon(\'GoForward\') %>\n                        </a>\n                    </div>\n                </li>\n\n                <li>\n                    <p>\n                        If you are looking for something specific, you can use the\n                        <span class="label label-info">filtering tools</span>\n                        to narrow down the result set. Then you \n                        might be able to fit the items you are interested in in a\n                        single page.\n                    </p>\n                    <button class="btn btn-default im-alternative-action add-filter-dialogue">\n                        <%= Icons.icon(\'Filter\') %>\n                        Add a new filter.\n                    </button>\n                </li>\n\n                <li>\n                    <p>\n                        If you want to get and save the results, we suggest\n                        <span class="label label-info">downloading</span>\n                        the results in a format that suits you. \n                    <p>\n                    <button class="btn btn-default im-alternative-action download-menu">\n                        <%= Icons.icon(\'Export\') %>\n                        Open the download menu.\n                    </buttn>\n                </li>\n\n            </ul>\n        </div>\n\n        <div class="modal-footer">\n            <button class="btn btn-primary pull-right">\n                <%- Messages.getText(\'largetable.ok\', {size: size}) %>\n            </button>\n            <button class="btn pull-left close">\n                <%- Messages.getText(\'largetable.abort\') %>\n            </button>\n        </div>\n    </div>\n</div>\n',n.modal_dialogue_opener='<button class="btn btn-default im-open-dialogue">\n  <%= Icons.icon(labels.ICON) %>\n  <span class="im-hidden-sm hidden-sm hidden-xs">\n    <%- Messages.getText(labels.LONG, state) %>\n  </span>\n  <span class="im-visible-sm-inline visible-sm-inline">\n    <%- Messages.getText(labels.SHORT, state) %>\n  <span>\n</button>\n',n.select_with_label='<label><%- Messages.getText(label) %></label>\n\n<% if (options.length) { %>\n    <select class="form-control">\n        <% _.each(options, function (option) { %>\n            <option selected="<%= selected(option) ? \'selected\' : void 0 %>"\n                    value="<%- option.name %>">\n                <%- Messages.getText(optionLabel, option) %>\n            </option>\n        <% }) %>\n    </select>\n    <% if (helpMessage) { %>\n        <span style="display:<%= hasProblem ? \'block\' : \'none\' %>"\n              class="help-block">\n                <%- Messages.getText(helpMessage) %>\n        </span>\n    <% } %>\n<% } else { %>\n    <span class="help-block">\n        <%- Messages.getText(noOptionsMessage, {model: model}) %>\n    </span>\n<% } %>\n\n',n.list_dialogue_body='<div class="im-list-name"></div>\n\n<div class="row">\n  <div class="col-sm-12 im-more-options">\n    <h4>\n      <%= Icons.icon(\'Options\') %>\n      <span class="msg"><%- Messages.getText(\'lists.ShowExtraOptions\', state) %></span>\n    </h4>\n  </div>\n</div>\n\n<div class="im-optional-attributes" style="<%- state.minimised ? \'display:none\' : void 0 %>">\n  <div class="im-list-desc"></div>\n\n  <div class="well im-tags">\n    <div class="row im-active-tags">\n    </div>\n    <div class="row">\n      <div class="col-sm-6 im-apology">\n      </div>\n      <div class="col-sm-6">\n        <div class="im-next-tag">\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',n.undo_history_step='<% if (!state.current) { %>\n  <button class="btn btn-default btn-small im-state-revert"\n      title="<%- Messages.getText(\'undo.RevertToState\') %>">\n      <%= Icons.icon(\'Undo\') %>\n  </button>\n<% } %>\n\n<h4>\n    <%- Messages.getText(\'undo.StepTitle\', title) %>\n</h4>\n\n<% if (state.current) { %>\n  <span class="help-block"><%- Messages.getText(\'undo.IsCurrentState\') %></span>\n<% } %>\n<div style="clear:both"></div>\n\n<span class="im-revision" title="<%- Messages.getText(\'undo.RevisionTitle\', {v: revision}) %>">\n  <%- Messages.getText(\'undo.Revision\', {v: revision}) %>\n</span>\n\n<div class="im-step-count">\n  <span><%- Messages.getText(\'undo.StepCount\', {count: count}) %></span>\n  <% if (diff) { %>\n    <span class="label im-label-<%= (diff > 0 ) ? \'pos\' : \'neg\' %>">\n      <% if (diff > 0) { %>+<% } %><%- numToString(diff) %>\n    </span>\n  <% } %>\n</div>\n\n<div class="im-step-details"></div>\n\n<div style="clear:both"></div>\n',n.code_gen_body='<div class="row">\n  <div class="col-sm-2">\n    <% /* requires lang :: string, options :: {Extra :: {}, Langs :: [string]} */ %>\n    <div class="btn-group language-selector">\n      <button type="button"\n              data-toggle="dropdown"\n              aria-expanded="false"\n              class="btn btn-default dropdown-toggle">\n        <span class="im-current-lang">\n          <%- Messages.getText(\'codegen.Lang\', {lang: lang}) %>\n        </span>\n        <span class="caret"></span>\n      </button>\n      <ul class="dropdown-menu im-code-gen-langs" role="menu">\n        <% _.each(options.Langs, function (l) { %>\n            <li data-lang="<%- l %>"\n                class="<%= (l === lang) ? \'active\' : void 0 %>">\n              <a href="#"><%- Messages.getText(\'codegen.Lang\', {lang: l}) %></a>\n            </li>\n        <% }); %>\n      </ul>\n    </div>\n    <div class="im-show-boilerplate"></div>\n    <div class="im-highlight-syntax"></div>\n    <div class="im-extra-options"></div>\n  </div>\n  <div class="col-sm-10">\n    <pre class="im-generated-code"><%- generatedCode %></pre>\n  </div>\n</div>\n',n.active_constraints='<% /* requires: constraints.length */ %>\n<div class="well im-current-constraints">\n    <p class="well-help">\n      <% if (constraints.length) { %>\n        <%- Messages.getText(\'constraints.EditOrRemove\') %>\n      <% } else { %>\n        <%- Messages.getText(\'constraints.None\') %>\n      <% } %>\n    </p>\n\n    <ul class="im-active-constraints">\n    </ul>\n</div>\n',n.checkbox="<label>\n    <input type=\"checkbox\" \n           <%= checked ? 'checked' : void 0 %>\n           >\n    <%- label %>\n</label>\n",n.modal_footer='<button type="button" class="btn btn-cancel">\n    <%- dismissAction %>\n</button>\n<% if (exportLink != null) { %>\n    <a class="btn btn-primary"\n        <%= (error) ? \'disabled\' : void 0 %>\n        href="<%- exportLink %>">\n        <%= Icons.icon(primaryIcon) %>\n        <%- primaryAction %>\n    </a>\n<% } else { %>\n    <% /* We need the wrapper to deal with the fact that tooltips do not\n        * work on disabled buttons. */ %>\n    <div class="im-tooltip-wrapper"\n        <% if (disabled && disabledReason) { %>\n          title="<%- Messages.getText(disabledReason)  %>"\n        <% } %>>\n        <button type="button"\n                <%= (error || disabled) ? \'disabled\' : void 0 %>\n                class="btn btn-primary">\n            <%= Icons.icon(primaryIcon) %>\n            <%- primaryAction %>\n        </button>\n    </div>\n<% } %>\n',n.cell_preview_error='<div class="alert alert-error">\n    <h4>Error</h4>\n    <p>Sorry. We could not fetch the preview due to an error:</p>\n    <code><%- message %></code>\n</div>\n',n.column_manager_path_name='<% /* requires parts */ %>\n<span class="im-path-name">\n    <% _.each(parts, function (part) { %>\n        <span class="im-name-part"><%- part %></span>\n    <% }); %>\n</span>\n\n',n.value_control_row='<td>\n  <input type="checkbox" {{ (selected) ? \'checked\' : void 0 }}>\n</td>\n<td class="im-multi-value">\n  {{# if (editing) { }}\n    <div class="input-group">\n      <input type="text" value="{{ value }}" class="form-control">\n      <span class="input-group-btn">\n        <button class="btn btn-success im-save"\n                title="{{ messages.getText(\'multivalue.SaveValue\') }}"\n                type="button">\n            {{{ icons.icon(\'OK\') }}}\n            <span class="im-long">{{ messages.getText(\'multivalue.SaveValue\') }}</span>\n        </button>\n        <button class="btn btn-danger im-cancel"\n                title="{{ messages.getText(\'Cancel\') }}"\n                type="button">\n            {{{ icons.icon(\'Cancel\') }}}\n            <span class="im-long">{{ messages.getText(\'Cancel\') }}</span>\n        </button>\n      </span>\n    </div>\n  {{# } else { }}\n    <a class="im-edit pull-right">{{{ icons.icon(\'Edit\') }}}</a>\n    {{ value }}\n  {{# } }}\n</td>\n',n.attribute_value_controls='<div>\n    <input class="form-control im-constraint-value im-value-options im-con-value im-con-value-attr"\n           type="text"\n           placeholder="<%- state.valuePlaceholder %>"\n           value="<%- con.value %>">\n</div>\n',n.extra_value_controls='<label class="im-value-options">\n    <%- messages.getText(\'conbuilder.ExtraLabel\') %>\n    <input type="text" class="im-extra-value form-control"\n            placeholder="<%- state.extraPlaceholder %>"\n            value="<%- con.extraValue %>">\n</label>\n\n',n.column_name_popover='<% _.each(parts, function (part) { %>\n  <span class="im-name-part"><%- part %></span>\n<% }); %>\n',n.list_dialogue_expander="<button class=\"btn btn-default im-expand-dialogue <%= minimised ? 'active' : void 0 %>\">\n  <%- Messages.getText('lists.picker.Collapse') %>\n</button>\n",n.attribute_value_select='<select class="form-control im-con-value-attr">\n    <% _.each(items, function (item) { %>\n    <option <%= (item.item === value) ? \'selected\' : void 0 %> value="<%- item.item %>">\n            <%- item.item %>\n        </option>\n    <% }); %>\n</select>\n',n.export_dialogue='<div class="row">\n    <nav class="col-sm-3 menu">\n    </nav>\n    <div class="col-sm-9 main">\n    </div>\n</div>\n',n.null_value='<span class="im-null-value">&nbsp;</span>\n',n.table_subtables_header="<a title=\"<%- Messages.getText('subtables.RemoveColumn') %>\">\n  <%= Icons.icon('Remove') %>\n</a>\n<% if (displayName && columnName) { %>\n  <%- displayName.replace(columnName, '').replace(/^ > /, '') %>\n<% } %>\n",n.summary_items_controls='<button class="btn btn-default pull-right im-download">\n  <%= Icons.icon(\'Download\') %>\n  <%- Messages.getText(\'summary.DownloadData\') %>\n</button>\n\n<div class="btn-group im-filter-group">\n  <button type="submit"\n        class="btn btn-primary im-filter-in"\n        <%= (anyItemSelected) ? void 0 : \'disabled\' %>>\n    <%- Messages.getText(\'Filter\') %>\n  </button>\n  <button class="btn btn-primary dropdown-toggle" \n          title="<%- Messages.getText(\'summary.SelectFilter\') %>"\n          <%= (anyItemSelected) ? void 0 : \'disabled\' %>>\n    <span class="caret"></span>\n  </button>\n  <ul class="dropdown-menu">\n    <li>\n      <a href="#" class="im-filter-in">\n        <%- Messages.getText(\'summary.Include\') %>\n      </a>\n    </li>\n    <li>\n      <a href="#" class="im-filter-out">\n        <%- Messages.getText(\'summary.Exclude\') %>\n      </a>\n    </li>\n  </ul>\n</div>\n\n<div class="btn-group">\n  <button class="btn btn-default btn-cancel"\n          <%= (anyItemSelected) ? void 0 : \'disabled\' %>\n          title="<%- Messages.getText(\'summary.Reset\') %>">\n    <%= Icons.icon(\'Undo\') %>\n  </button>\n  <% if (!(/boolean/i).test(type)) { %>\n    <button class="btn btn-default btn-toggle-selection"\n            title="<%- Messages.getText(\'summary.Toggle\') %>">\n        <%= Icons.icon(\'Toggle\') %>\n    </button>\n  <% } %>\n</div>\n\n',n.list_dialogue_button='<button class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n  <%= Icons.icon(\'Lists\') %>\n  <span class="hidden-xxs">\n    <%- Messages.getText(\'lists.SaveAsList\') %>\n  </span>\n  <span class="caret"></span>\n</button>\n\n<ul class="dropdown-menu dropdown-menu-right" role="menu">\n    <li class="divider"></li>\n    <li>\n        <a class="im-pick-items" href="#">\n            <%- Messages.getText(\'lists.StartPicking\') %>\n        </a>\n    </li>\n    <li class="divider"></li>\n    <li>\n        <div class="btn-group btn-group-justified" role="group">\n            <a role="button" class="<%- createBtnClasses %>">\n                <%- Messages.getText(\'lists.Create\') %>\n            </a>\n            <a role="button" class="<%- appendBtnClasses %>">\n                <%- Messages.getText(\'lists.Append\') %>\n            </a>\n        </div>\n    </li>\n</ul>\n',n.list_tag="<%- id %>\n<span class=\"im-remove\" title=\"<%- Messages.getText('lists.RemoveTag') %>\">\n    <%= Icons.icon('Remove') %>\n</span>\n",n.export_dialogue_footer='<% if (linkToFile) { %>\n    <div class="pull-left alert alert-info">\n        <%- Messages.getText(\'export.cloud.FileLocation\', {cloud: dest}) %>\n        <a href="<%= linkToFile %>" target="_blank"><%- linkToFile %></a>\n    </div>\n<% } %>\n\n<button type="button" class="btn btn-cancel">\n    <%- dismissAction %>\n</button>\n\n<% if (dest === \'download\') { %>\n    <a class="btn btn-primary"\n        href="<%- exportURI %>">\n        <%= Icons.icon(primaryIcon) %>\n        <%- primaryAction %>\n    </a>\n<% } else { %>\n    <button type="button"\n            <%= (error || doneness != null) ? \'disabled\' : void 0 %>\n            class="btn btn-primary">\n        <%= Icons.icon(primaryIcon) %>\n        <%- primaryAction %>\n    </button>\n<% } %>\n\n',n.summary_selected_count="<% if (state.selectedCount) { %>\n    <div class=\"alert alert-info im-selected-count\">\n        <strong>\n            <%- Messages.getText('summary.SelectedCount', state) %>\n        </strong>\n    </div>\n<% } %>\n",n.column_manager_position_controls="<div class=\"im-position-controls\">\n    <% if (index > 0) { %>\n        <%= Icons.iconWithProps('ASC', {\n            className: 'im-move-up',\n            title: Messages.getText('columns.MoveUp')\n        }) %>\n    <% } %>\n    <% if (!isLast) { %>\n        <%= Icons.iconWithProps('DESC', {\n            className: 'im-move-down',\n            title: Messages.getText('columns.MoveDown')\n        }) %>\n    <% } %>\n</div>\n\n",n.column_manager_sort_order_editor='<% /* requires: collection, available */ %>\n<h4>\n  <%- Messages.getText(\'columns.CurrentSortOrder\', {\n    oes: collection\n  }) %>\n</h4>\n\n<span class="help-block">\n  <%- Messages.getText(\'columns.CurrentSortOrderHelp\') %>\n</span>\n\n<div class="well im-current-sort-order">\n\n  <div class="row">\n    <div class="col-md-6">\n        <% if (collection.length) { %>\n          <ul class="list-group im-active-oes im-connected-list"></ul>\n        <% } else { %>\n          <div class="im-empty-collection">\n            <%- Messages.getText(\'columns.NoSortOrder\') %>\n          </div>\n        <% } %>\n    </div>\n\n    <div class="col-md-6">\n        <% if (available) { %>\n          <div class="im-rubbish-bin">\n            <ul class="list-group im-removed im-available-oes im-connected-list">\n            </ul>\n          </div>\n        <% } %>\n    </div>\n  </div>\n</div>\n',n.summary_stats='<table class="table">\n    <thead>\n        <tr>\n            <th><%- Messages.getText(\'summary.Max\') %></th>\n            <th><%- Messages.getText(\'summary.Min\') %></th>\n            <th><%- Messages.getText(\'summary.Average\') %></th>\n            <th><%- Messages.getText(\'summary.StdDev\') %></th>\n        </tr>\n        <tr>\n            <td><%- Messages.getText(\'Number\', {n: max}) %></td>\n            <td><%- Messages.getText(\'Number\', {n: min}) %></td>\n            <td><%- Messages.getText(\'Number\', {n: average}) %></td>\n            <td><%- Messages.getText(\'Number\', {n: stdev}) %></td>\n        </tr>\n    </thead>\n</table>\n\n<div class="row im-range-controls">\n    <div class="col-sm-4 im-range-from">\n        <input type="text"\n               class="form-control im-range-min input im-range-val"\n               value="<%- min %>">\n    </div>\n    <div class="col-sm-1 im-ellipsis">\n        <span>...</span>\n    </div>\n    <div class="col-sm-4 im-range-to">\n        <input type="text"\n               class="form-control im-range-max input im-range-val"\n               value="<%- max %>">\n    </div>\n    <div class="col-sm-3 im-range-buttons">\n        <div class="btn-group pull-right">\n            <button class="btn btn-primary disabled">Apply</button>\n            <button class="btn btn-cancel disabled">Reset</button>\n        </div>\n    </div>\n</div>\n\n<div class="slider"></div>\n\n',n.table_error="<div class=\"alert alert-error alert-warning\">\n\n  <h2><%= Icons.icon('Bug') %><%- Messages.getText('error.Oops') %></h2>\n\n  <p>\n    <i><%- Messages.getText(error.key || 'error.' + domain + '.Heading') %></i>\n  </p>\n\n  <p><%- Messages.getText('error.' + domain + '.Body') %></p>\n\n  <a class=\"btn btn-primary pull-right\" href=\"mailto:<%= mailto %>\">\n    <%= Icons.icon('Mail') %>\n    <%- Messages.getText('error.EmailHelp') %>\n  </a>\n\n  <button class=\"btn btn-default im-show-query\">\n    <%= Icons.icon('xml') %>\n    <%- Messages.getText('error.ShowQuery') %>\n  </button>\n  <% if (error.message) { %>\n    <button class=\"btn btn-default im-show-error\">\n      <%= Icons.icon('Bug') %>\n      <%- Messages.getText('error.ShowError') %>\n    </button>\n  <% } %>\n\n  <pre class=\"query-xml well im-latent\"><%- indent(query) %></pre>\n\n  <% if (error.message) { %>\n    <pre class=\"error-message well im-latent\"><%- error.message %></pre>\n  <% } %>\n\n</div>\n",n.export_add_column_control='<div class="row">\n    <div class="col-sm-1 im-help"\n         title="<%- Messages.getText(\'export.help.AdditionalCols\') %>">\n        <%= Icons.icon(\'Help\', \'lg\') %>\n    </div>\n    <div class="col-sm-11 form-group">\n        <input type="text" class="form-control">\n    </div>\n</div>\n',n.undo_history_step_section="<div class=\"im-section-summary\">\n  <% if (collection.length) { %>\n    <%= Icons.icon(state.open ? 'ExpandedSection' : 'CollapsedSection') %>\n  <% } %>\n  <%- Messages.getText(summaryLabel, {n: count}) %>\n</div>\n<% if (collection.length) { %>\n  <div class=\"<%- collectionClasses %>\">\n    <% _.each(collection, function (e) { %>\n      <span class=\"label label-<%= e.added ? 'success' : (e.removed ? 'danger' : 'default') %>\">\n        <%- labelContent(e) %>\n      </span>\n    <% }); %>\n  </div>\n<% } %>\n",n.page_sizer='<% /* Expects size, sizes */ %>\n<% if (sizes.length) { %>\n    <label>\n        <span class="hidden-tablet">Rows per page:</span>\n    </label>\n    <select class="form-control" title="Rows per page">\n        <% sizes.forEach(function (s) { %>\n            <option value="<%= s[0] %>" <%= (s[0] === size) && \'selected\' %>>\n            <%= s[1] || s[0] %>\n            </option>\n        <% }); %>\n    </select>\n<% } %>\n',n.loop_value_controls="<% if (candidateLoops.length) { %>\n    <%= select(candidateLoops, isSelected, 'form-control im-value-options im-con-value') %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLoops') %>\n<% } %>\n",n.select='<select class="<%- data.classes %>">\n  <% _.each(data.options, function (opt) { %>\n    <option value="<%- data.key(opt) %>"\n      <%- data.selectedTest(opt) ? \'selected\' : void 0 %> >\n      <% if (data.contentHandler) { %>\n        <%- data.contentHandler(opt) %>\n      <% } else { %>\n        <%- opt.text %>\n      <% } %>\n    </option>\n  <% }); %>\n</select>\n',n.list_value_controls="<% if (suitableLists.length) { %>\n    <%= select(suitableLists, isSelected, 'span7 im-value-options im-con-value im-con-value-list form-control', formatList, getOptionValue) %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLists') %>\n<% } %>\n",n.export_destination_galaxy_options='<div class="form-group">\n    <label><%- Messages.getText(\'GalaxyURILabel\') %></label>\n    <input type="url"\n           class="form-control im-galaxy-uri-param"\n           value="<%- Galaxy.Current || Galaxy.Main %>">\n</div>\n<div class="checkbox im-save-galaxy">\n    <label>\n        <input type="checkbox" <%= (Galaxy.Save) ? \'checked\' : void 0 %>>\n        <%- Messages.getText(\'SaveGalaxyURL\') %></label>\n    </label>\n</div>\n',n.formatted_sorting="<a> <% /* requires Icons, direction and name */ %>\n    <%= Icons.icon(direction || 'unsorted') %>\n    <span class=\"im-sort-path\"><%- name %></span>\n</a>\n",n.cell_preview_items='<colgroup>\n  <col class="im-item-field"/>\n  <col class="im-item-value"/>\n</colgroup>\n<tbody></tbody>\n',n.modal_base='<div class="modal-dialog <%- modalSize %>">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close">\n                <span aria-hidden="true">&times;</span>\n                <span class="sr-only">Close</span>\n            </button>\n            <h4 class="modal-title"><%- title %></h4>\n        </div>\n        <div class="modal-body">\n            <%= body %>\n        </div>\n    </div>\n</div>\n',n.summary_heading='<% /* requires:\n    *  numeric, available, got, uniqueValues\n    *  state.typeName, state.endName\n    *  filtered \n    */ %>\n<h3>\n  <% if (numeric) { %>\n    <%- Messages.getText(\'summary.NumericDistribution\', {n: available}) %>\n    <span class="im-type-name"><%- state.typeName %></span>\n    <span class="im-attr-name"><%- pluralise(state.endName, got) %></span>\n  <% } else { %> \n    <span class="im-item-got">\n      <%- Messages.getText(\'summary.Got\', {available: available, got: got}) %>\n    </span>\n    <span class="im-item-available">\n      <%- Messages.getText(\'Number\', {n: available}) %>\n    </span>\n    <span class="im-type-name"><%- state.typeName %></span>\n    <span class="im-attr-name"><%- pluralise(state.endName, got) %></span>\n    <span class="im-item-total">\n      <%- Messages.getText(\'summary.Total\', {\n            filtered: filtered,\n            total: uniqueValues\n          }) %>\n    </span>\n  <% } %> \n</h3>\n',n.export_format_controls='<h4 class="im-title"></h4>\n\n<% _.each(formats, function (formatDef) { %>\n    <div class="radio">\n        <label>\n            <input type="radio"\n                   name="format"\n                   value="<%= formatDef.id %>"\n                   <%= (formatDef.id === format) ? \'checked\' : void 0 %>>\n            <%= Icons.icon(formatDef.icon) %>\n            <%= Messages.getText(formatDef.desc) %>\n        </label>\n    </div>\n<% }); %>\n',n.constraint_summary="<% if (code) { %>\n  <li><span class=\"text-muted\"><strong><%- code %>:</strong></span></li>\n<% } %>\n<% _.each(labels, function (label) { %>\n  <li>        \n    <span class=\"label label-<%- label.type %>\">\n      <% if (_.include(['error', 'warning'], label.type)) { %>\n        <%= Icons.icon('Error') %>\n        <%- Messages.getText('consummary.' + label.content) %>\n      <% } else if (label.type === 'path') { %>\n        <% _.each(label.content.split(' > '), function (part) { %>\n          <span title=\"<%- label.content %>\" class=\"im-name-part\"><%- part %></span>\n        <% }); %>\n      <% } else { %>\n        <% if (label.icon) { %><%= Icons.icon(label.icon) %><% } %>\n        <%- label.content %>\n      <% } %>\n    </span>\n  </li>\n<% }); %>\n",n.column_manager_tabs='<ul class="nav nav-tabs">\n    <li role="presentation" class="<%- classes.view %>">\n      <a href="#">\n        <%- Messages.getText(\'columns.ViewTabTitle\') %>\n      </a>\n    </li>\n    <li role="presentation" class="<%- classes.sortorder %>">\n      <a href="#">\n        <%- Messages.getText(\'columns.SortOrderTabTitle\') %>\n      </a>\n    </li>\n</ul>\n',n.reset_button="<button type=\"button\"\n        <%= (isAll) ? 'disabled' : void 0 %>\n        class=\"btn btn-default btn-reset\">\n    <%- Messages.getText('Reset') %>\n</button>\n",n.constraint_adder='<div class="im-constraint-adder-options"></div>\n<div class="im-path-finder"><div>\n<div class="im-new-constraint"></div>\n',n.constraint_adder_options='<% if (showTree) { %>\n    <div class="col-sm-5">\n        <div class="input-group">\n            <span class="input-group-addon">find</span>\n            <input type="text"\n                value="<%- filter %>"\n                class="im-tree-filter form-control" placeholder="path">\n            <span class="input-group-btn">\n                <button class="btn btn-default im-clear-filter" type="button">\n                    <%- Messages.getText(\'Clear\') %>\n                </button>\n            </span>\n        </div>\n    </div>\n<% } %>\n<div class="col-sm-7">\n    <div class="btn-group">\n        <% if (!showTree) { %>\n            <button type="button" class="btn btn-default btn-chooser im-choose">\n                <%= Icons.icon(\'Tree\') %>\n                <span><%- Messages.getText(\'constraints.BrowseForColumn\') %></span>\n            </button>\n        <% } else { %>\n            <button <%= anyNodeChosen ? void 0 : \'disabled\' %>\n                    class="btn btn-primary im-approve"\n                    type="button" >\n                <%- Messages.getText(\'constraints.Choose\') %>\n                <% _.each(chosen, function (path, i) { %>\n                    <%- path %>\n                    <% if (i + 2 === chosen.length) { %>\n                        <%- Messages.get(\'and\') %>\n                    <% } else if (i + 2 < chosen.length) { %>\n                        <%- Messages.get(\'comma\') %>\n                    <% } %>\n                <% }); %>\n            </button>\n        <% } %>\n    </div>\n    <div class="form-group">\n        <label class="im-tree-option">\n            <%- Messages.getText(\'columns.AllowRevRef\') %>\n            <input type="checkbox"\n                    class="im-allow-rev-ref"\n                    <%= allowRevRefs ? \'checked\' : void 0 %> >\n        </label>\n    </div>\n</div>\n',n.constraints_heading="<% /* requires constraints.length */ %>\n<h3>\n  <%- Messages.getText('constraints.Heading', {n: constraints.length}) %>\n</h3>\n",n.row_surrogate="<%= Icons.icon(above ? 'ASC' : 'DESC') %>\n<%- item %>: <%- count %>\n",n.export_preview='<div class="form-group im-export-formats">\n  <label><%- Messages.getText(\'export.param.Format\') %></label>\n  <select class="form-control">\n    <% _.each(formats, function (fmt) { %>\n      <option value="<%- fmt.id %>"\n              <%= (fmt.id === format.id) ? \'selected\' : void 0 %>>\n        <%- Messages.getText(fmt.name) %>\n      </option>\n    <% }); %>\n  </select>\n</div>\n\n<pre class="im-export-preview">\n<%- state.preview %>\n</pre>\n\n<div class="alert alert-info">\n    <strong class="nb">nb</strong>\n    <%- Messages.getText(\'export.preview.Limit\') %>\n</div>\n',n.input_with_label='<label><%- Messages.getText(label) %></label>\n<input class="form-control"\n       placeholder="<%- Messages.getText(placeholder) %>"\n       value="<%- value %>">\n<% if (helpMessage) { %>\n  <span style="display:<%= hasProblem ? \'block\' : \'none\' %>"\n        class="help-block">\n        <%- Messages.getText(helpMessage) %>\n  </span>\n<% } %>\n',n.column_manager_select_list='<div class="im-removal-and-rearrangement">\n  <button class="pull-right btn btn-success im-add-view-path">\n      <%= Icons.icon(\'Add\') %>\n      <%- Messages.getText(\'columns.FindColumnToAdd\') %>\n  </button>\n\n  <h4>\n    <%- Messages.getText(\'columns.ColumnsSelected\', {columns: collection, removed: hasRubbish}) %>\n  </h4>\n\n  <span class="help-block"><%- Messages.getText(\'columns.CurrentViewHelp\') %></span>\n\n  <div class="well im-current-view">\n\n    <div class="row">\n\n      <div class="col-md-6">\n        <ul class="list-group im-active-view im-connected-list">\n        </ul>\n      </div>\n\n      <div class="col-md-6">\n        <div class="im-rubbish-bin">\n            <%= Icons.icon((hasRubbish ? \'RubbishFull\' : \'Rubbish\'), \'lg\') %>\n            <% if (hasRubbish) { %>\n                <ul class="list-group im-removed im-removed-view im-connected-list">\n                </ul>\n            <% } %>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n<div class="im-addition">\n</div>\n\n',n.table_subtable='<span class="im-subtable-summary">\n</span>\n<div class="im-table-wrapper">\n</div>\n',n.export_tab_menu='<% _.each(data.tabs, function (tabDef) { %>\n  <li role="presentation" class="im-tab-<%= tabDef.ident %> <%= data.tab === tabDef.ident ? \'active\' : void 0 %>">\n    <a><%- data.Messages.getText(tabDef.key, data) %></a>\n  </li>\n<% }); %>\n',n.column_manager_path_chooser="<div class=\"btn-group pull-right\">\n</div>\n<h4>\n  <%- Messages.getText('columns.ChooseAPathFrom', {root: state.rootName}) %>\n</h4>\n\n",n.cell_preview_reference_relation='<% _.each(collection, function (relation) { %>\n  <li class="im-relation">\n    <span class="im-name"><%- _.last(relation.parts) %></span>\n    <span class="im-count"><%- numToString(relation.count) %></span>\n  </li>\n<% }); %>\n',n.facet_frequency='<% /* requires: error, initialized */ %>\n<% if (error) { %>\n    <% /* Oh noes - something went wrong. */ %>\n    <div class="alert alert-warning">\n        <%= Icons.icon(\'Error\') %>\n        <strong><%- Messages.getText(\'Error\') %></strong>\n        <% if (error.key) { %>\n            <%- Messages.getText(error.key) %>\n        <% } else { %>\n            <%- error.message || error %>\n        <% } %>\n    </div>\n<% } else if (initialized) { %>\n    <% /* Huzzah - there is data, which will be added here as child views */ %>\n<% } else { %>\n    <% /* Boo - no data. Show an indeterminate progress bar while we wait. */ %>\n    <div class="progress">\n      <div class="progress-bar progress-bar-info progress-bar-striped active"\n           role="progressbar"\n           style="width:100%">\n        <span class="sr-only"><%- Messages.getText(\'Loading\') %>.</span>\n      </div>\n    </div>\n<% } %>\n',n.constraint_editor='<fieldset class="im-constraint-options form-group row">\n  <label class="col-sm-3 path-label"><%- data.con.displayName %></label>\n  <% if (data.con.op) { %>\n    <div class="im-operator col-sm-3">\n        <select class="form-control im-ops">\n        <option selected><%- data.con.op %></option>\n        <% data.otherOperators.forEach(function (op) { %>\n            <option><%- op %></option>\n        <% }); %>\n        </select>\n    </div>\n  <% } %>\n  <div class="col-sm-6 im-value-options im-value-section">\n  </div>\n</fieldset>\n\n<div class="btn-group im-con-buttons">\n  <% data.buttons.forEach(function (b, i) { %>\n  <button class="btn btn-<%= (i === 0) ? \'primary\' : \'default\' %> <%- b.classes %>">\n    <%- data.messages.getText(b.key) %>\n  </button>\n  <% }); %>\n</div>\n',n.summary_items='<% if (!(/boolean/i).test(type)) { %>\n    <div class="input-group im-filter-group">\n    <span class="input-group-btn">\n        <button class="btn btn-default im-clear-value-filter">\n        <%= Icons.icon(\'Refresh\') %>\n        </button>\n    </span>\n    <input type="search" class="form-control im-filter-values"\n        value="<%- filterTerm %>"\n        placeholder="<%- Messages.getText(\'summary.FilterValuesPlaceholder\') %>">\n    </div>\n<% } %>\n\n<div class="im-item-table">\n  <table class="table table-condensed table-striped">\n    <colgroup>\n      <% _.each(colClasses, function (cls) { %>\n        <col class="<%- cls %>">\n      <% }); %>\n    </colgroup>\n    <thead>\n      <tr>\n        <% _.each(colHeaders, function (hdr) { %>\n          <th><%- hdr %></th>\n        <% }); %>\n      </tr>\n    </thead>\n    <tbody class="scrollable">\n    </tbody>\n  </table>\n\n  <% if (hasMore) { %>\n    <div class="im-load-more">\n      <%- Messages.getText(\'summary.MoreItems\') %>\n    </div>\n  <% } %>\n</div>\n\n<div class="im-summary-controls">\n</div>\n',n.code_gen_button='<% /* requires lang :: string, options.Langs :: [string] */ %>\n<div class="btn-group language-selector">\n    <button type="button"\n            class="btn btn-default im-show-code-gen-dialogue">\n    </button>\n    <button type="button"\n            data-toggle="dropdown"\n            aria-expanded="false"\n            class="btn btn-default dropdown-toggle">\n        <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu im-code-gen-langs" role="menu">\n        <% _.each(options.Langs, function (l) { %>\n            <li data-lang="<%- l %>" class="<%= (l === lang) ? \'active\' : void 0 %>">\n                <a href="#"><%- Messages.getText(\'codegen.Lang\', {lang: l}) %></a>\n            </li>\n        <% }); %>\n    </ul>\n</div>\n',n.join_style='<% /* requires innerJoinBtn, outerJoinBtn */ %>\n<div class="btn-group pull-right">\n  <button class="<%- innerJoinBtn %>">\n    <%- Messages.getText(\'joins.Inner\') %>\n  </button>\n  <button class="<%- outerJoinBtn %>">\n    <%- Messages.getText(\'joins.Outer\') %>\n  </button>\n</div>\n',n.export_flat_file_options="<h4><%- Messages.getText('export.category.ColumnHeaders', state) %></h4>\n\n<div class=\"checkbox im-headers\">\n    <label>\n        <input type=\"checkbox\" <%= headers ? 'checked' : void 0 %>>\n        <%- Messages.getText('export.AddHeaders') %>\n    </label>\n</div>\n\n<fieldset <%= headers ? void 0 : 'disabled' %>>\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"hdrs-friendly\"\n                <%= (headerType === 'friendly') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.ff.FriendlyHeaders') %>\n        </label>\n    </div>\n\n    <div class=\"radio\">\n        <label>\n            <input type=\"radio\"\n                name=\"hdrs-path\"\n                <%= (headerType === 'path') ? 'checked' : void 0 %>>\n            <%- Messages.getText('export.ff.PathHeaders') %>\n        </label>\n    </div>\n</fieldset>\n\n",n.column_header='<% /* requires the properties of HeaderModel +\n    *  penult, last, headerClasses, colTitleClasses, penultClasses\n    *  and the usual Icons, Messages\n    */ %>\n<div class="<%- headerClasses %>">\n\n<div class="im-th-buttons">\n    \n    <% if (outerJoined && isReference) { %>\n      <a href="#" \n          class="im-subtable-expander im-th-button"\n          title="<%- Messages.getText(\'table.header.ToggleTables\') %>">\n        <%= Icons.icon(\'Table\') %>\n      </a>\n    <% } %>\n\n    <% if (sortable) { %>\n        <span class="im-th-dropdown im-col-sort dropdown">\n            <a class="im-th-button im-col-sort-indicator"\n                title="<%- Messages.getText(\'table.header.SortColumn\', {dir: sortDirection}) %>">\n                <%= Icons.icon(sortDirection || \'unsorted\') %>\n            </a>\n            <div class="dropdown-menu">\n                <div><%- Messages.getText(\'table.header.FailedToInitSortMenu\') %></div>\n            </div>\n        </span>\n    <% } %>\n\n    <a class="im-th-button im-col-remover"\n        title="<%- Messages.getText(\'table.header.RemoveColumn\') %>">\n        <%= Icons.icon(\'headerIconRemove\') %>\n    </a>\n\n    <a class="im-th-button im-col-minumaximiser"\n        title="<%- Messages.getText(\'table.header.ToggleColumn\') %>">\n        <%= Icons.icon(minimised ? \'headerIconReveal\' : \'headerIconHide\') %>\n    </a>\n\n    <span class="dropdown im-filter-summary im-th-dropdown">\n        <a class="im-th-button im-col-filters dropdown-toggle"\n            title="<%- Messages.getText(\'table.header.FilterTitle\', {count: numOfCons}) %>"\n            data-toggle="dropdown" >\n            <%= Icons.icon(\'Filter\') %>\n        </a>\n        <div class="dropdown-menu">\n            <div><%- Messages.getText(\'table.header.FailedToInitFilter\') %></div>\n        </div>\n    </span>\n\n    <span class="dropdown im-summary im-th-dropdown">\n        <a class="im-th-button summary-img dropdown-toggle"\n            title="<%- Messages.getText(\'table.header.ViewSummary\') %>"\n            data-toggle="dropdown" >\n            <%= Icons.icon(\'Summary\') %>\n        </a>\n        <div class="dropdown-menu">\n            <div><%- Messages.getText(\'table.header.FailedToInitSummary\') %></div>\n        </div>\n    </span>\n\n    <% if (isComposed) { %>\n        <a class="im-th-button im-col-composed"\n            title="<%- Messages.getText(\'table.header.Composed\', {replaces: replaces}) %>">\n            <%= Icons.icon(\'Composed\') %>\n        </a>\n    <% } %>\n</div>\n\n<div class="<%- colTitleClasses %>">\n  <div class="<%- penultClasses %>">\n      <%- penult %>\n  </div>\n  <% if (last) { %>\n    <div class="im-title-part im-last">\n        <%- last %>\n    </div>\n  <% } %>\n</div>\n\n</div>\n\n',n.table_building="<h2><%- Messages.getText('table.Building') %></h2>\n<%= IndeterminateProgressBar %>\n",n.export_column_controls='<h4><%- Messages.getText(\'export.heading.Columns\') %></h4>\n\n<ul class="list-group">\n</ul>\n\n<div class="row controls"></div>\n',n.cell_preview_attribute='<tr>\n  <td class="im-field-name"><%- _.last(parts) %></td>\n  <td class="im-field-value <%- field.toLowerCase() %> <%- type %>">\n    <% if (isNumeric) { %>\n      <%- numToString(+value) %>\n    <% } else { %>\n      <%- value %>\n    <% } %>\n    <% if (tooLong) { %>\n      <span class="im-overspill"><%- valueOverspill %></span>\n      <a class="im-too-long">\n        <span class="im-ellipsis">...</span>\n        <%= Icons.icon(\'More\') %>\n      </a>\n    <% } %>\n  </td>\n</tr>\n',n.pagination='<ul class="pagination">\n    <li class="hidden-xs <%= gotoStart || \'im-goto-start\' %>" title="Go to start">\n        <a class="im-pagination-button">&#x21e4;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveBack || \'im-go-back-5\' %>"\n        title="Go back five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x219e;</a>\n    </li>\n    <li class="<%= goOneBack || \'im-go-back-1\' %>"\n        title="Go to previous page">\n        <a class="im-pagination-button">&larr;</a>\n    </li>\n    <li class="im-current-page">\n        <% if (useSelect) { %>\n          <form class="im-page-form form form-inline">\n            <select class="form-control">\n              <% for (i = 0; i < max; i++) { %>\n                <option\n                  <%= selected(i) ? \'selected\' : void 0 %>\n                  value="<%= i * size %>">\n                  page <%= i + 1 %>\n                </option>\n              <% } %>\n            </select>\n          </form>\n        <% } else { %>\n          <a href="#">&hellip;</a>\n          <form class="im-page-form form form-inline"\n                style="display:none;">\n            <div class="control-group">\n                <input type="number"\n                       value="<%= currentPage %>"\n                       max="<%= max %>"\n                       min="<%= min %>"\n                       class="form-control im-page-number">\n            </div>\n          </form>\n        <% } %>\n    </li>\n    <li class="<%= goOneForward || \'im-go-fwd-1\' %>"\n        title="Go to next page">\n        <a class="im-pagination-button">&rarr;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveForward || \'im-go-fwd-5\' %>"\n        title="Go forward five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x21a0;</a>\n    </li>\n    <li class="hidden-xs <%= gotoEnd || \'im-goto-end\' %>"\n        title="Go to last page">\n        <a class="im-pagination-button">&#x21e5;</a>\n    </li>\n</ul>\n',n.column_manager_restore_path='<% /* requires: restoreTitle */ %>\n<span class="pull-right im-restore-view"\n    title="<%- Messages.getText(restoreTitle) %>">\n    <%= Icons.icon(\'Add\') %>\n</span>\n\n'},{underscore:262}],68:[function(t,e,i){(function(){var h,n,o,p;p=t("underscore"),h=t("../options"),n=t("pluralize"),o=p.template('<select class="<%- data.classes %>">\n  <% _.each(data.options, function (opt) { %>\n    <option value="<%- data.key(opt) %>"\n      <%- data.selectedTest(opt) ? \'selected\' : void 0 %> >\n      <% if (data.contentHandler) { %>\n        <%- data.contentHandler(opt) %>\n      <% } else { %>\n        <%- opt.text %>\n      <% } %>\n    </option>\n  <% }); %>\n</select>\n',{variable:"data"}),i.select=function(t,e,n,i,r){return null==e&&(e=function(){return!1}),null==n&&(n=""),null==i&&(i=null),null==r&&(r=function(t){return null!=t?t.value:void 0}),o({options:t,selectedTest:e,classes:n,contentHandler:i,key:r})},i.pluralise=function(t,e){return null!=t?n(t,e):t},i.numToString=function(t){var e,n,i,r,o,s,a,l,u,c;if(!(null!=t?t.toFixed:void 0))return t;if(l=h.get("NUM_SEPARATOR"),n=h.get("NUM_CHUNK_SIZE"),a=[],o=0,-1<t&&t<1)return String(t);for(u=(c=t.toFixed(3).split("."))[0],i=c[1],e=u.split(""),s=e.length,r=p(e).groupBy(function(t,e){return Math.floor((s-(e+1))/n).toFixed()});r[o];)a.unshift(r[o].join("")),o++;return a.join(l)+("000"===i?"":"."+i)},i.errorAlert=function(t){switch(t.level){case"Error":return"alert-danger";case"Warning":return"alert-warning";case"Info":return"alert-info";case"OK":return"alert-success";default:return"alert-danger"}},i.errorIcon=function(t){var e;return null!=(e=t.level)?e:"Error"}}).call(this)},{"../options":63,pluralize:258,underscore:262}],69:[function(t,e,n){(function(){e.exports={interpolate:/\{\{\{ (.+?) \}\}\}/g,escape:/\{\{ (.+?) \}\}/g,evaluate:/\{\{# (.+?) \}\}/g}}).call(this)},{}],70:[function(s,a,t){(function(){var n,i,t,e,r;function o(t){var e;this.key=t.root.replace(/\./g,"_"),this.promise=t.get("branding").then((e=this,function(t){return i.set(["brand",e.key],t.properties)}))}i=s("../options"),t=s("es6-promise").Promise,r={},e=function(t){var e;return null!=r[e=t.root]?r[e]:r[e]=new n(t)},a.exports=function(t){return e(t).getBranding()},o.prototype.getBranding=function(){return new t((e=this,function(t){return e.promise.then(function(){return t(i.get(["brand",e.key]))},function(){return t(null)})}));var e},n=o}).call(this)},{"../options":63,"es6-promise":238}],71:[function(t,e,n){(function(){var S,E,k,N,M,D,A,O=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};E=t("./create-columns"),M=t("./is-key-field"),k=t("./get-replaced-test"),S=t("../formatting"),D=function(e){return function(t){return!e.findWhere({formatter:t})}},A=function(n,i){return function(t){var e;return e=n(t),i(e)?e:null}},N=function(t){var e,n,i,r,o;for(o=[],e=i=0,r=t.length;i<r;e=++i)n=t[e],o.push(n.index=e);return o},e.exports=function(C,T){return C.service.fetchClassKeys().then(function(t){var r,o,e,n,i,s,a,l,u,c,h,p,f,d,m,g,y,v,_,b,w,x;for(a=M(t),c={},e={},i=A(S.getFormatter,D(T)),p=0,g=(o=E(C)).length;p<g;p++)if((r=o[p]).path.isAttribute()&&(n=i(r.path)))for(r.isFormatted=!0,r.formatter=n,u=r.path.getParent(),f=0,y=(w=null!=(b=n.replaces)?b:[]).length;f<y;f++)null==c[h=u+"."+w[f]]&&(c[h]=r),0<=O.call(C.views,h)&&r.replaces.push(C.makePath(h));for(d=0,v=o.length;d<v;d++)for(m=0,_=(x=(r=o[d]).replaces).length;m<_;m++)e[x[m]]=r;return s=k(c,e),l=function(){var t,e,n,i;for(i=[],e=0,t=o.length;e<t;e++)r=o[e],s(r)||(r.isFormatted&&(n=r.path,O.call(r.replaces,n)<0&&r.replaces.push(r.path),(a(r.path)||1<r.replaces.length)&&(r.path=r.path.getParent())),i.push(r));return i}(),N(l),l})}}).call(this)},{"../formatting":13,"./create-columns":78,"./get-replaced-test":85,"./is-key-field":89}],72:[function(t,e,n){(function(){e.exports=function(t,e){var n,i,r,o,s,a,l,u,c,h,p,f,d,m;for(u={},c=0,p=t.length;c<p;c++)if(null!=(null!=(d=(n=t[c]).formatter)?d.replaces:void 0)&&(o=n.model.get("node").toString(),s=(i=n.model.get("column")).toString(),null!=e&&i.isAttribute()&&1<n.formatter.replaces.length&&(r=e.indexOf(e.get(s)),e.remove(s),a=i.getParent(),e.add(a,{at:r}).set({replaces:n.formatter.replaces.map(function(t){return a.append(t)})})),!u[s]))for(h=0,f=(m=n.formatter.replaces.map(function(t){return o+"."+t})).length;h<f;h++)(l=m[h])!==s&&(u[l]=!0,null!=e&&e.remove(l));return u}}).call(this)},{}],73:[function(t,e,n){(function(){var d,m,g=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};d=function(t,e,n){var i,r,o,s,a;if(!(r=t.getOuterJoin(e))||r===n)return null;for(o=t.makePath(r),i=o.isCollection()?r:null,o=o.getParent();o&&!o.isRoot();)s=t.getOuterJoin(o),a=void 0,null!=s&&(a=t.makePath(s)),(null!=a?a.isCollection():void 0)&&s!==n&&(i=s),o=null!=a?a.getParent():void 0;return i},m=function(t,e){return d(t,e,null)},e.exports=function(e){var t,n,i,r,o,s,a,l,u,c,h,p,f;for(a=[],r={},u=0,h=(f=e.views).length;u<h;u++)if(!r[l=f[u]])if(s=m(e,l)){for(t=e.views.filter(function(t){return s===m(e,t)}),i={column:s,view:[]},c=0,p=t.length;c<p;c++)n=t[c],o=d(e,n,s),r[n]=i,o?0<=g.call(i.view,o)||i.view.push(o):i.view.push(n);a.push(r[s]=i)}else a.push(r[l]={column:l});return a}}).call(this)},{}],74:[function(t,e,n){(function(){n.bool=function(t){return!!t}}).call(this)},{}],75:[function(i,r,t){(function(){var o,s,e,a,n,l;function t(t,e){this.itemModels=new n(t.root,e)}l=i("underscore"),n=i("../models/object-store"),e=i("../models/nested-table"),o=i("../models/cell"),a=i("../models/null-object"),s=i("../models/fast-path-object"),r.exports=(t.prototype.getCreator=function(n){var i,r;if(!n)throw new Error("No query");return r=this,i=function(t){var e;return e=n.makePath(t.column),l.has(t,"rows")?r._make_sub_table_model(t,e,i):r._make_simple_cell_model(t,e)}},t.prototype._make_sub_table_model=function(r,t,o){var s;return new e(l.extend({},r,{node:t,column:t,rows:function(){var t,e,n,i;for(i=[],t=0,e=(n=r.rows).length;t<e;t++)s=n[t],i.push(s.map(function(t){return o(t)}));return i}()}))},t.prototype._make_simple_cell_model=function(t,e){var n,i,r;return r=e.getParent(),i=e.end.name,n=null!=t.id?this.itemModels.get(t,i):null==t.class?new a(r.getType().name,i):new s(t,i),new o({entity:n,node:r,column:e,field:i,value:t.value})},t.prototype.destroy=function(){var t;return null!=(t=this.itemModels)&&t.destroy(),delete this.itemModels,this},t)}).call(this)},{"../models/cell":37,"../models/fast-path-object":43,"../models/nested-table":48,"../models/null-object":49,"../models/object-store":51,underscore:262}],76:[function(t,e,n){(function(){var o;o=t("underscore"),n.createChild=function(t,e,n){var i,r;return null==n&&(n={}),i=(null!=(r=e.prototype.parameters)?r:[]).concat(e.prototype.optionalParameters),new e(o.extend(o.pick(t,i),n))}}).call(this)},{underscore:262}],77:[function(t,e,r){(function(){var n,i;n={},i=function(t){return t.service.root+":"+t.service.token+":"+t.toXML()},r.count=function(t){var e;return null!=n[e=i(t)]?n[e]:n[e]=t.count()},r.clearCache=function(){return n={}}}).call(this)},{}],78:[function(e,n,t){(function(){var i,t;i=e("./longest-common-prefix"),t=e("./calculate-row-template"),n.exports=function(a){return t(a).map(function(r){var o,t,e,n,s;return e=null!=r.view?(o=i(r.view),t=a.makePath(o),n=function(){var t,e,n,i;for(i=[],t=0,e=(n=r.view).length;t<e;t++)s=n[t],i.push(a.makePath(s));return i}(),function(){var t,e,n,i;for(i=[],t=0,e=(n=a.views).length;t<e;t++)0===(s=n[t]).indexOf(o)&&i.push(a.makePath(s));return i}()):(t=a.makePath(r.column),n=null,[]),{path:t,subview:n,replaces:e}})}}).call(this)},{"./calculate-row-template":73,"./longest-common-prefix":91}],79:[function(e,i,t){(function(){var n;function t(t){this.definitions=t}n=e("underscore"),i.exports=(t.prototype.activeClasses=function(){var t,e;for(t in e=[],this.definitions)n.result(this.definitions,t)&&e.push(t);return e},t.prototype.toString=function(){return this.activeClasses().join(" ")},t)}).call(this)},{underscore:262}],80:[function(t,e,n){(function(){var r,o,s;r=t("./fetch-missing-data"),o=t("./has-fields"),s=function(e,t){return t.then(function(t){return e.set(t)})},e.exports=function(t,e){var n,i;return i=r(t,e),n=o(e),function(t,e){return n(t)||s(t,i(e,t.get("id"))),t.toJSON()}}}).call(this)},{"./fetch-missing-data":82,"./has-fields":87}],81:[function(i,t,r){(function(){var t,e;function n(){}e=i("underscore"),t=i("backbone"),r.ignore=function(t){return null!=t&&t.preventDefault(),null!=t&&t.stopPropagation(),!1},r.Bus=(e.extend(n.prototype,t.Events),n.prototype.destroy=function(){return this.stopListening(),this.off()},n)}).call(this)},{backbone:235,underscore:262}],82:[function(t,e,n){(function(){var s,a,o,l;l=t("underscore"),s=function(e){return function(t){return t?l.object(l.zip(e,t)):{}}},a=function(i){var r;return l.flatten(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)~(r=i[t]).indexOf(".")&&n.push(o(r));return n}())},o=function(t){var e,n,i,r,o;for(o=[],e=i=1,r=(n=t.split(".")).length;1<=r?i<r:r<i;e=1<=r?++i:--i)o.push(n.slice(0,e).join("."));return o},e.exports=function(i,r,o){return null==o&&(o={}),function(t,e){var n;return n=t.root+"#"+e,null!=o[n]?o[n]:o[n]=t.rows({select:r,from:i,where:{id:e},joins:a(r)}).then(l.compose(s(r),l.head))}}}).call(this)},{underscore:262}],83:[function(t,e,n){(function(){var a,l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};e.exports=a=function(e,n){var t,i,r,o,s;return s=function(){var t;for(r in t=[],e)null!=(i=e[r])&&l.call(n,r)<0&&t.push(i);return t}(),t=function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)null==(o=s[t]).objectId&&n.push(o);return n}(),function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)null!=(o=s[t]).objectId&&n.push(o);return n}().reduce(function(t,e){return t.concat(a(e,n))},t)}}).call(this)},{}],84:[function(e,n,t){(function(){var p,t,f,d,m,g,y,v,_=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};v=e("underscore"),t=e("es6-promise").Promise,g=v.compose(v.uniq,v.flatten),f=function(t){var e;return null!=(null!=(e=t.getType().fields)?e.organism:void 0)},m=function(t){return"Organism"===t.getEndClass().name||f(t)},d=function(t){var e;return"Organism"===t.getEndClass().name&&("name"===(e=t.end.name)||"shortName"===e)},y=function(t){return null!=t&&/\*/.test(t)},p=["=","==","ONE OF"],n.exports=function(h){return new t(function(t,e){var o,n,i,r,s,a,l,u,c;return i=v.compose(t,g),l=function(){return t([])},n=function(){var t,e,n,i,r;for(r=[],t=0,e=(n=h.constraints).length;t<e;t++)i=(o=n[t]).op,0<=_.call(p,i)&&!y(o.value)&&d(h.makePath(o.path))&&r.push(o.value||o.values);return r}(),u=function(){var t,e,n,i;for(i=[],t=0,e=(n=h.constraints).length;t<e;t++)"LOOKUP"===(o=n[t]).op&&null!=o.extraValue&&f(h.makePath(o.path))&&i.push(o.extraValue);return i}(),(r=v.union(n,u)).length?i(r):(a=function(){var t,e,n,i;for(i=[],t=0,e=(n=h.getViewNodes()).length;t<e;t++)s=n[t],m(s)&&(c="Organism"===s.getType().name?s:s.append("organism"),i.push(c.append("shortName")));return i}()).length?h.clone().select(v.uniq(a,String)).orderBy([]).rows().then(i,l):l()})}}).call(this)},{"es6-promise":238,underscore:262}],85:[function(t,e,n){(function(){var o,s;s=t("../formatting").shouldFormat,o=function(t){return t.isAttribute()&&"id"===t.end.name},e.exports=function(i,r){return function(t){var e,n;if(null==t)throw new Error("no column");return e=t.path,!!(s(e)||e in r)&&(n=i[e],o(e)&&null==n&&(n=i[e.getParent()]),n&&null!=n.formatter&&t!==n)}}}).call(this)},{"../formatting":13}],86:[function(e,n,t){(function(){var t;t=e("es6-promise").Promise,n.exports=function(a){return new t(function(t,e){var n,i,r,o,s;return o=a.getViewNodes(),t((n=(i=a.model).findCommonType(function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)r=o[t],n.push(r.getType());return n}()))?i.getPathInfo(n).getDisplayName():null!=(s=i.name)?s:"")})}}).call(this)},{"es6-promise":238}],87:[function(t,e,n){(function(){e.exports=function(t){return null==t&&(t=[]),function(e){return t.every(function(t){return e.has(t)})}}}).call(this)},{}],88:[function(t,e,n){(function(){e.exports=function(t){var e,n,i,r,o,s,a,l;for(n=1,e=[],a=0,l=(s=t.split(/></)).length;a<l;a++)o=s[a],/>$/.test(o)||(o+=">"),/^</.test(o)||(o="<"+o),i=/^<\/\w+\s*>/.test(o),r=!(/\/>$/.test(o)||!i&&/<\/\w+>$/.test(o)||i),i&&n--,e.push(new Array(n).join("  ")+o),r&&n++;return e.join("\n")}}).call(this)},{}],89:[function(t,e,n){(function(){var a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};e.exports=function(s){return function(t){var e,n,i,r,o;return!!t.isAttribute()&&(i=t.getParent().getType().name,e=t.end.name,n=null!=(r=null!=s?s[i]:void 0)?r:[],o=i+"."+e,0<=a.call(n,o))}}}).call(this)},{}],90:[function(t,e,n){(function(o){(function(){var n,i,r;n=t("jquery"),r=t("es6-promise").Promise,i=t("../options"),e.exports=function(t,e){return o[e]?r.resolve(o[e]):r.resolve(n.ajax({url:i.get(t),cache:!0,dataType:"script"})).then(function(){return o[e]})}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../options":63,"es6-promise":238,jquery:256}],91:[function(t,e,n){(function(){var u,n,c=[].slice;n=t("underscore"),u=function(t){return function(e){return n.all(t,function(t){return 0===t.indexOf(e)})}},e.exports=function(t){var e,n,i,r,o,s,a,l;if(e=t[0],o=2<=t.length?c.call(t,1):[],null==e)throw new Error("Empty list");if(!o.length)return e;for(i=e.split(/\./),s=u(o),r=i[0],a=0,l=i.length;a<l;a++)s(n=r+"."+i[a])&&(r=n);return r}}).call(this)},{underscore:262}],92:[function(t,e,n){(function(){n.href=function(t,e,n){return t+"?"+[["subject",e],["body",n]].map(function(t){var e,n;return e=t[0],n=t[1],e+"="+encodeURIComponent(n)}).join("&")}}).call(this)},{}],93:[function(t,e,n){(function(){e.exports=function(t){return t.map(function(t){return"change:"+t}).join(" ")}}).call(this)},{}],94:[function(t,e,n){(function(){e.exports=function(t,e,n){var i,r,o,s,a;for(s in(r=document.createElement("form")).method="POST",r.style.display="none",r.action=t,r.target=e+(new Date).getTime(),n)(o=document.createElement("input")).type="hidden",o.name=s,o.value=n[s],r.appendChild(o);(i=document.querySelector("body")).appendChild(r),a=window.open("somenonexistantpathtonowhere",e),r.submit(),i.removeChild(r),a.close()}}).call(this)},{}],95:[function(e,n,t){(function(){var r,t;t=e("underscore"),r=function(i){var r;return t.object(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r.split("=").map(decodeURIComponent));return n}())},n.exports=function(t){var e,n,i;return e=(i=t.split("?"))[0],n=i[1].split("&"),{URL:e,params:r(n)}}}).call(this)},{underscore:262}],96:[function(t,e,n){(function(){var l,u;u=t("underscore"),l=function(t,e){return 0<=t.toLowerCase().indexOf(e)},e.exports=function(a){return function(t,e){var i,r,o,n,s;return r=null!=(n=null!=t&&null!=(s=t.toLowerCase())?s.split(" "):void 0)?n:[],i=function(t){var e,n,i;return i=t.path,e=t.item,n=t.name,u.all(r,function(t){return null==i&&(i=e),l(i.toString(),t)||l(n,t)})},null!=a.each?e(a.map(function(t){return t.toJSON()}).filter(i)):e(function(){var t,e,n;for(n=[],t=0,e=a.length;t<e;t++)o=a[t],i(o)&&n.push(o);return n}())}}}).call(this)},{underscore:262}],97:[function(t,e,n){(function(){var n,a,l,u;u=t("underscore"),a=t("es6-promise").Promise,n={},l=function(l){return function(t){var e,n,i,r,o,s,a;for(a=[],i=0,r=(o=u.zip(l,t)).length;i<r;i++)n=(s=o[i])[0],e=s[1],a.push({path:n,name:e});return a}},e.exports=function(r,o){var t,e,s,i;return(t=r.service.root+":"+r.root+":"+o)in n?n[t]:(i=(i=function(){var t,e,n,i;for(i=[],t=0,e=(n=r.getPossiblePaths(o)).length;t<e;t++)s=n[t],i.push(r.makePath(s));return i}()).filter(function(t){var e;return!("id"===(null!=(e=t.end)?e.name:void 0))}),e=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)s=i[t],n.push(s.getDisplayName());return n}(),null!=n[t]?n[t]:n[t]=a.all(e).then(l(i)))}}).call(this)},{"es6-promise":238,underscore:262}],98:[function(t,i,e){(function(){var n;function t(t){this.wrapped=t,this.root=this.wrapped.root,this._foundById={},this._counts={}}function e(t,e){this.Preview=e,this.service=new n(t)}t.prototype.fetchModel=function(){return this.wrapped.fetchModel()},t.prototype.findById=function(t,e,n){var i,r;return null!=(i=this._foundById)[r=t+":"+e+":"+n]?i[r]:i[r]=this.wrapped.findById(t,e,n)},t.prototype.count=function(t){var e,n;return null!=(e=this._counts)[n=JSON.stringify(t)]?e[n]:e[n]=this.wrapped.count(t)},t.prototype.destroy=function(){return this._foundById={},this._counts={},delete this.wrapped},n=t,i.exports=(e.prototype.get=function(t){return new this.Preview({service:this.service,model:{types:t.get("classes"),id:t.get("id")}})},e.prototype.destroy=function(){return this.service.destroy(),delete this.service},e)}).call(this)},{}],99:[function(t,e,n){(function(){n.fromPairs=function(i){var r;return function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r.map(encodeURIComponent).join("="));return n}().join("&")}}).call(this)},{}],100:[function(i,r,t){(function(){var s,t,e,n;i("jquery"),t=i("es6-promise").Promise,s=i("../options"),n=i("./load-resource"),e=function(){return n("Destination.Dropbox.Library","Dropbox")},r.exports=function(i,r,o){return e().then(function(n){return new t(function(t,e){return n.appKey=s.get("auth.dropbox"),n.save({files:[{url:i,filename:r}],success:t,progress:o,cancel:e,error:e})})})}}).call(this)},{"../options":63,"./load-resource":90,"es6-promise":238,jquery:256}],101:[function(e,n,t){(function(){var v,_,u,c,h,p,f,d,b,t,w;w=e("underscore"),u=e("es6-promise").Promise,_=e("../options"),v=e("../messages"),h=e("./get-organisms"),c=e("./branding"),f=e("./get-result-class"),d=e("./open-window-with-post"),b=e("./parse-url"),n.exports=t=function(t,e,n){var i,r,o,s,a,l;return a=null!=(l=(i=_.get("Destination.Galaxy")).Current)?l:i.Main,/tool_runner$/.test(a)||(a+="/tool_runner"),r=c(this.query.service),s=f(this.query),o=h(this.query),u.all([s,o,r]).then(p(t,this.query,this.model.format.ext)).then(w.partial(d,a,"Upload"))},p=function(m,g,y){return function(t){var e,n,r,i,o,s,a,l,u,c,h,p,f,d;return i=t[0],h=t[1],n=t[2],e=(d=b(m)).URL,p=d.params,l=function(){var t,e,n,i;for(i=[],t=0,e=(n=g.constraints).length;t<e;t++)"IN"===(r=n[t]).op&&i.push(r.value);return i}(),s="tsv"===y?"tabular":y,o=window.location.toString().replace(/\?.*$/,""),f=_.get("Destination.Galaxy.Tool"),u=v.getText("export.galaxy.name",{cls:i,orgs:h,branding:n}),a=v.getText("export.galaxy.info",{query:g,lists:l,orgs:h,currentLocation:o}),null!=h&&(c=h.join(", ")),w.extend(p,{tool_id:f,URL:e,name:u,info:a,data_type:s,organism:c,URL_method:"post"})}},t.after=function(){var e;return(e=_.get("Destination.Galaxy")).Current&&e.Save?this.query.service.whoami().then(function(t){if(t.preferences["galaxy-url"]!==e.Current)return t.setPreference("galaxy-url",e.Current)}):u.resolve(null)}}).call(this)},{"../messages":16,"../options":63,"./branding":70,"./get-organisms":84,"./get-result-class":86,"./open-window-with-post":94,"./parse-url":95,"es6-promise":238,underscore:262}],102:[function(n,i,t){(function(){var r,t,o,s,e;n("underscore"),t=n("es6-promise").Promise,r=n("../options"),o=n("./query-string").fromPairs,s=function(t,e){var n,i;return n=r.get("Destination.GenomeSpace"),i=o([["uploadUrl",t],["fileName",e]]),n.Upload+"?"+i},e=function(i,r){return new t(function(e,n){var t;return(t=window.open(s(i,r))).setCallbackOnGSUploadComplete=function(t){return e(t)},t.setCallbackOnGSUploadError=function(t){return console.log("GSERR",arguments),n(new Error("Could not save to "+t))},t.addEventListener("unload",function(){return n(new Error("Upload cancelled"))}),t.focus()})},i.exports=e}).call(this)},{"../options":63,"./query-string":99,"es6-promise":238,underscore:262}],103:[function(d,m,t){(function(){var o,t,n,e,s,u,a,i,r,l,c,h;function p(t){this.title=t}function f(t){if(this.gapi=t,!this.gapi)throw new Error("No api");if(!u.get("auth.drive"))throw new Error("No configuration available for Google Drive");console.log(this.gapi)}o=d("jquery"),c=d("underscore"),a=d("es6-promise").Promise,u=d("../options"),r=d("./load-resource"),h=null,n="\r\n--"+(t="-------314159265358979323846")+"\r\n",i={path:"/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'}},l=function(){return null!=h?h:h=r("Destination.Drive.Library","gapi").then(function(t){return new e(t)})},m.exports=function(e,n,i){return l().then(function(t){return i(1),t.upload(e,n)})},p.prototype.mimetype="text/plain",p.prototype.toString=function(){return JSON.stringify({title:this.title,mimetype:this.mimetype})},s=p,f.prototype.authorize=function(){return new a((l=this,function(e,n){var t,i,r,o,s,a;r=l.gapi,a=null,s={client_id:u.get("auth.drive"),scope:"https://www.googleapis.com/auth/drive.file",immediate:!1},o=function(){return r.auth.authorize(s,function(t){return null==t?n(new Error("Not authorized")):t.error?n(new Error(t.error)):e()})},t=function(){return clearTimeout(a),n(new Error("timed out"))},(i=function(){var t;return clearTimeout(a),(null!=(t=r.auth)?t.authorize:void 0)?o():a=setTimeout(i,50)})(),setTimeout(t,5e3)}));var l},f.prototype.loadClient=function(){return new a((n=this,function(t,e){return n.gapi.client.load("drive","v2",t)}));var n},f.prototype.makeRequestBody=function(t,e){return n+"Content-Type: application/json\r\n\r\n"+String(t)+n+"Content-Type: text/tab-separated-values\r\n\r\n"+e+"\r\n---------314159265358979323846--"},f.prototype.makeRequest=function(t){return this.gapi.client.request(c.extend({body:t},i))},f.prototype.upload=function(t,e){return this.authorize().then((r=this,function(){return r.loadClient()})).then(function(){return a.resolve(o.get(t))}).then((i=this,function(t){return i.makeRequestBody(new s(e),t)})).then((n=this,function(t){return n.makeRequest(t)})).then(function(t){return t.result.alternateLink});var n,i,r},e=f}).call(this)},{"../options":63,"./load-resource":90,"es6-promise":238,jquery:256,underscore:262}],104:[function(e,i,t){(function(){var r,o,s,a,t,n=[].slice;t=e("underscore"),o=t.compose,s=t.escape,a=e("./ensure-required-data"),r=function(e){return function(){var t;return arguments[0],t=2<=arguments.length?n.call(arguments,1):[],e.apply(null,t)}},i.exports=function(t,e,n,i){return{classes:i,target:t,replaces:e,call:r(o(s,n,a(t,e)))}}}).call(this)},{"./ensure-required-data":80,underscore:262}],105:[function(t,e,n){(function(){var o;o={ASC:"DESC",DESC:"ASC",NONE:"ASC"},e.exports=function(t,e){var n,i,r;return n=null!=(r=t.getSortDirection(e))?r:"NONE",i=o[n],t.orderBy([{path:e,direction:i}])}}).call(this)},{}],106:[function(t,e,n){(function(){e.exports=function(t){if(null!=t)return(t=t.replace(/\n\s*\n/g,"\n\n")).replace(/(^\s*|\s*$)/g,"")}}).call(this)},{}],107:[function(n,l,t){(function(){var i,r,o,t,s,a;function e(t,e){var n;this.suggestions=t,this.total=e,this.suggest=function(t,e){return function(){return t.apply(e,arguments)}}(this.suggest,this),n=o.get("MaxSuggestions"),this.total>n&&(this.tooMany=s({icons:i,messages:r,extra:e-n}))}a=n("underscore"),o=n("../options"),r=n("../messages"),i=n("../icons"),t=n("../templates/mustache-settings"),s=a.template("<span class=\"alert alert-info\">\n  {{{ icons.icon('Info') }}}\n  {{ messages.getText('conbuilder.TooManySuggestions') }}\n  There are {{ extra }} values we could not include.\n</span>\n",t),l.exports=(e.prototype.tooMany="<span></span>",e.prototype.suggest=function(t,e){var r,n,o,i,s;return null==t||""===t?e(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.suggestions.slice(0,10)).length;t<e;t++)o=n[t],i.push(o);return i}.call(this)):(n=null!=(i=null!=t&&null!=(s=t.toLowerCase())?s.split(" "):void 0)?i:[],r=function(t){var e;return null==(e=t.item)&&(e=""),a.all(n,function(t){return 0<=e.toLowerCase().indexOf(t)})},e(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.suggestions).length;t<e;t++)o=n[t],r(o)&&i.push(o);return i}.call(this)))},e)}).call(this)},{"../icons":14,"../messages":16,"../options":63,"../templates/mustache-settings":69,underscore:262}],108:[function(s,t,a){(function(){var n,r,u,c,t,o,i=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function e(t){this.query=t.clone()}t=s("es6-promise").Promise,u=s("../options"),c=s("../models/page"),r={},n=t.resolve(!0),a.getCache=function(t){var e,n,i;return n=t.toXML(),e=t.service.root,null!=r[i=e+":"+n]?r[i]:r[i]=new o(t)},a.onListChange=function(t){var e,n;for(n in r)e=r[n],0<=i.call(listNamesFor(e.query),t)&&e.dropRows();return!1},e.prototype.offset=0,e.prototype.rows=null,e.prototype.toString=function(){var t;return(null!=(t=this.rows)?t.length:void 0)?"ResultCache("+this.offset+" .. "+(this.offset+this.rows.length)+")":"ResultCache(EMPTY)"},e.prototype.fetchRows=function(t,e){var n,i;return null==t&&(t=0),null==e&&(e=null),n=new c(t,e),this.updateCache(n).then((i=this,function(){return i.getRows(n)}))},e.prototype.updateCache=function(t){var e;return this.contains(t)?n:(e=this.getRequestPage(t),this.query.tableRows({start:e.start,size:e.size}).then(this.addRowsToCache(e)))},e.prototype.contains=function(t){var e,n;return!(null==(e=this.rows)||!e.length)&&(n=this.offset+e.length,!t.all()&&t.start>=this.offset&&t.end()<=n)},e.prototype.dropRows=function(){return this.rows=null,this.offset=0},e.prototype.getRequestPage=function(t){var e,n,i,r,o,s,a,l;return e=this.rows,n=u.get("TableResults.CacheFactor"),r=u.get("TableResults.RequestLimit"),s=t.all()?t.size:t.size*n,null==e?new c(t.start,s):(l=this.offset+e.length,a=t.all()||t.start>=this.offset?t.start:Math.max(0,t.start-s),(o=new c(a,s)).isBefore(this.offset)?(i=o.rightGap(this.offset))+o.size>r?this.dropRows():o.size+=i:o.isAfter(l)&&((i=o.leftGap(l))+o.size>r?this.dropRows():(o.size+=i,o.start=l)),o)},e.prototype.addRowsToCache=function(r){return o=this,function(t){var e,n,i;if(e=o.rows,n=o.offset,null!=e){if(i=o.offset+e.length,r.start<n){if(r.end()<n)throw new Error("Cannot add "+r+" to "+o+" - non contiguous");e=r.all()||r.end()>i?t.slice():t.concat(e.slice(r.end()-n))}else{if(r.start>i)throw new Error("Cannot add "+r+" to "+o+" - non contiguous");r.all()||i<r.end()?e=e.slice(0,r.start-n).concat(t):console.error("Useless cache add - we already had these rows: "+r)}n=Math.min(n,r.start)}else e=t.slice(),n=r.start;return o.offset=n,o.rows=e,!0};var o},e.prototype.getRows=function(t){var e,n,i;if(i=t.start,n=t.size,null==this.rows)throw new Error("Cache has not been updated");return(e=this.rows.slice()).splice(0,i-this.offset),null!=n&&0<n&&e.splice(n,e.length),e},o=e,a.ResultCache=o}).call(this)},{"../models/page":54,"../options":63,"es6-promise":238}],109:[function(t,e,n){(function(){e.exports=function(e){return e.getDisplayName().then(function(t){return{path:e.toString(),name:t}})}}).call(this)},{}],110:[function(t,e,n){(function(a){(function(){var n,i,r,o,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=t("es6-promise").Promise,n=t("../cdn"),i={},o=function(t,e){return 0<=s.call(a,e)?r.resolve(a[e]):n.load(t).then(function(){return a[e]},console.error.bind(console))},e.exports=function(t,e,n){return(null!=i[t]?i[t]:i[t]=o(t,e)).then(n)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../cdn":1,"es6-promise":238}],111:[function(t,e,n){e.exports=""},{}],112:[function(b,w,t){(function(){function t(t,e){for(var n in e)y.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,r,o,s,a,l,u,c,h,p,f,d,m,g=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},y={}.hasOwnProperty;function v(){return v.__super__.constructor.apply(this,arguments)}function _(){return _.__super__.constructor.apply(this,arguments)}f=b("underscore"),b("jquery"),b("es6-promise").Promise,d=b("imjs"),l=d.Query,a=d.Model,r=b("../core-model"),s=b("../messages"),u=b("../templates"),o=b("../icons"),b("../options"),c=b("../core-view"),i=b("./constraint-summary"),e=b("./constraint-editor"),s.setWithPrefix("conbuilder",{Add:"Add constraint",Update:"Update",Cancel:"Cancel",Remove:"Remove",EditCon:"Edit filter",NotEditable:"This constraint is not editable",ValuePlaceholder:"David*",ExtraPlaceholder:"Wernham-Hogg",ExtraLabel:"in",IsA:"is a",NoValue:"No value selected. Please enter a value.",NoOperator:"No operator selected. Please choose an operator.",BadLoop:"The selected path is not in the query.",NaN:"The value provided is not a number.",Duplicate:"This constraint is already on the query",TooManySuggestions:"We cannot show you all the possible values",NoSuitableLists:"No lists of this type are available",NoSuitableLoops:"No suitable loop paths were found"}),h=function(t,e){var n,i,r;return!t&&!e||!(!t||!e)&&(r=f.sortBy([t,e],function(t){return t.length}),i=r[0],n=r[1],f.all(n,function(t){return 0<=g.call(i,t)}))},p=function(r,o){var s,t,e,n,i,a,l,u,c;if(!r||!o)return r===o;for(e=!0,l=0,u=(t=f.union.apply(f,[r,o].map(f.keys))).length;l<u;l++)s=t[l],n=(c=function(){var t,e,n,i;for(i=[],t=0,e=(n=[r,o]).length;t<e;t++)a=n[t],i.push(a[s]);return i}())[0],i=c[1],e&&(e=f.isArray(n)?h(n,i):n===i);return e},t(v,r),v.prototype.defaults=function(){return{code:null}},v.prototype.isTypeConstraint=function(){return null==this.get("op")},n=v,w.exports=(t(_,c),_.prototype.Model=n,_.prototype.tagName="div",_.prototype.className="im-constraint row-fluid",_.prototype.parameters=["query","constraint"],_.prototype.optionalParameters=["buttonDelegate"],_.prototype.initialize=function(){var e;_.__super__.initialize.apply(this,arguments),this.model.set(this.constraint),this.state.set({editing:!1}),this.listenTo(this.state,"change:editing",this.toggleEditor),this.listenTo(this.model,"change:type",this.setTypeName),this.listenTo(this.model,"change:path",this.setDisplayName),this.listenTo(s,"change",this.reRender),this.listenTo(this.model,"cancel",this.cancelEditing),this.listenTo(this.model,"apply",this.applyChanges);try{this.model.set({path:this.query.makePath(this.constraint.path)})}catch(t){e=t,this.model.set({error:e}),this.state.set({editing:!0})}return this.setTypeName()},_.prototype.setDisplayName=function(){return this.model.get("path").getDisplayName((n=this,function(t,e){if(n.model.set({error:t,displayName:e}),null!=t)return n.listenToOnce(n.query,"change:constraints",function(){return n.model.set({path:n.query.getPathInfo(n.constraint.path)}),n.setDisplayName()})}));var n},_.prototype.cancelEditing=function(){return this.state.set({editing:!1}),this.model.set(f.omit(this.constraint,"path")),this.model.set({error:null})},_.prototype.toggleEditing=function(){return this.state.get("editing")?this.cancelEditing():this.state.set({editing:!0})},_.prototype.setTypeName=function(){var e,n,i;if(null==(n=this.model.get("type")))return this.model.unset("typeName");try{return this.query.model.makePath(n).getDisplayName((i=this,function(t,e){return i.model.set({error:t,typeName:e})}))}catch(t){return e=t,this.model.set({error:e,typeName:n})}},_.prototype.events=function(){return{"click .im-edit":"toggleEditing","click .im-remove-constraint":"removeConstraint"}},m=/^\s*$/,_.prototype.getLoopProblem=function(t){return function(){try{return this.query.getPathInfo(t.value),null}catch(t){return"BadLoop"}}.call(this)},_.prototype.getValueProblem=function(t){var e,n,i;return e=t.path,t.op,null==(n=t.value)||m.test(n)?"NoValue":(i=e.getType(),0<=g.call(a.NUMERIC_TYPES,i)&&f.isNaN(1*n)?"NaN":null)},_.prototype.getProblem=function(t){var e,n;return null!=t.type?null:!t.op||m.test(t.op)?"NoOperator":!t.path.isReference()||"="!==(e=t.op)&&"!="!==e?(n=t.op,0<=g.call(l.ATTRIBUTE_VALUE_OPS.concat(l.REFERENCE_OPS),n)?this.getValueProblem(t):this.isDuplicate(t)?"Duplicate":null):this.getLoopProblem(t)},_.prototype.isDuplicate=function(t){return f.any(this.query.constraints,f.partial(p,t))},_.prototype.setError=function(t){var e;return e=s.get("conbuilder."+t),this.model.set({error:e})},_.prototype.applyChanges=function(t){var e;return null!=(e=this.getProblem(t))?this.setError(e):(this.state.set({editing:!1}),this.removeConstraint(null,!0),null==t.values||t.values.length?(t.path=t.path.toString(),this.query.addConstraint(t),this.constraint=t,this.model.unset("new")):this.query.trigger("change:constraints"))},_.prototype.removeConstraint=function(t,e){if(null==e&&(e=!1),null!=t&&t.preventDefault(),null!=t&&t.stopPropagation(),this.model.get("new")||this.query.removeConstraint(this.constraint,e),null!=t)return this.remove()},_.prototype.getData=function(){return{icons:o,messages:s,con:this.model.toJSON()}},_.prototype.template=u.template("active-constraint",{variable:"data"}),_.prototype.toggleEditor=function(){var t;return this.state.get("editing")&&this.rendered?(t={model:this.model,query:this.query,buttonDelegate:this.buttonDelegate},this.renderChild("editor",new e(t),this.$(".im-constraint-editor"))):this.removeChild("editor")},_.prototype.renderSummary=function(){var t;return t={model:this.model},this.renderChild("summary",new i(t),this.$(".im-con-overview"))},_.prototype.postRender=function(){return this.renderSummary(),this.toggleEditor(),this.$("[title]").tooltip()},_)}).call(this)},{"../core-model":2,"../core-view":3,"../icons":14,"../messages":16,"../options":63,"../templates":67,"./constraint-editor":129,"./constraint-summary":130,"es6-promise":238,imjs:247,jquery:256,underscore:262}],113:[function(T,S,t){(function(){var p,t,e,f,n,o,i,r,c,l,s,h,a,u,d,m,g,y,v,_,b,w={}.hasOwnProperty,x=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function C(){return C.__super__.constructor.apply(this,arguments)}p=T("jquery"),v=T("underscore"),l=T("es6-promise").Promise,o=T("../messages"),a=T("../templates"),t=T("../core-view"),c=T("../options"),r=T("../core/nested-model"),u=T("../utils/branding"),n=T("../patterns").IS_BLANK,e=T("../mixins/has-typeaheads"),h=T("../utils/suggestion-source"),b=(_=T("imjs")).Model,f=b.INTEGRAL_TYPES,i=b.NUMERIC_TYPES,s=_.Query,g=a.template("attribute_value_select"),y=function(t){return String(t).replace(/^\s+/,"").replace(/\s+$/,"")},m=function(t){return 1*y(t)},d=T("../templates/helpers").numToString,o.set({"constraintvalue.NoValues":"There are no possible values. This query returns no results","constraintvalue.OneValue":"There is only one possible value: <%- value %>. You might want to remove this constraint"}),S.exports=(function(t,e){for(var n in e)w.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(C,t),C.include(e),C.prototype.className="im-attribute-value-controls",C.prototype.template=a.template("attribute_value_controls"),C.prototype.getData=function(){return v.extend(this.getBaseData(),{messages:o,con:this.model.toJSON()})},C.prototype.initialize=function(t){var e,n;if(this.query=t.query,C.__super__.initialize.apply(this,arguments),this.sliders=[],this.branding=new r,this.cast=(e=this.model.get("path").getType(),0<=x.call(i,e)?m:y),this.listenTo(o,"change",this.reRender),this.state.set({valuePlaceholder:o.getText("conbuilder.ValuePlaceholder")}),this.listenTo(this.branding,"change:defaults.value",function(){return this.state.set({valuePlaceholder:this.branding.get("defaults.value")})}),null!=this.query)return this.listenTo(this.query,"change:constraints",this.clearCachedData),this.listenTo(this.query,"change:constraints",this.reRender),u(this.query.service).then((n=this,function(t){return n.branding.set(t)}))},C.prototype.modelEvents=function(){return{destroy:function(){return this.stopListening()},"change:value":this.onChangeValue,"change:op":this.onChangeOp}},C.prototype.stateEvents=function(){return{"change:valuePlaceholder":this.reRender}},C.prototype.onChangeOp=function(){var t;return t=this.model.get("op"),null!=this.model.get("value")&&0<=x.call(s.MULTIVALUE_OPS,t)&&this.model.set({value:null,values:[this.model.get("value")]}),this.reRender()},C.prototype.onChangeValue=function(){return this.reRender()},C.prototype.removeAllChildren=function(){return this.removeTypeAheads(),this.removeSliders(),C.__super__.removeAllChildren.apply(this,arguments)},C.prototype.removeSliders=function(){var t,e;for(e=[];t=this.sliders.pop();)try{t.slider("destroy"),e.push(t.remove())}catch(t){}return e},C.prototype.events=function(){return{"change .im-con-value-attr":"setAttributeValue"}},C.prototype.updateInput=function(){var t;return(null!=(t=this.lastTypeahead())?t:this.$(".im-con-value-attr")).val(this.model.get("value"))},C.prototype.readAttrValue=function(){var e,t;e=(null!=(t=this.lastTypeahead())?t:this.$(".im-con-value-attr")).val();try{return null==e||n.test(e)?null:this.cast(e)}catch(t){return this.model.set({error:new Error(e+" might not be a legal value for "+this.path)}),e}},C.prototype.setAttributeValue=function(){return this.model.set({value:this.readAttrValue()})},C.prototype.postRender=function(){var e;return this.provideSuggestions().then(null,(e=this,function(t){return e.model.set({error:t})})),this.$(".im-con-value-attr").focus()},C.prototype.provideSuggestions=function(){return this.getSuggestions().then((r=this,function(t){var e,n,i;return i=t.stats,n=t.results,0===i.uniqueValues?(e=o.getText("constraintvalue.NoValues"),r.model.set({error:{message:e,level:"warning"}})):1===i.uniqueValues?(e=o.getText("constraintvalue.OneValue",{value:n[0].item}),r.model.set({error:{message:e,level:"warning"}})):null!=i.max?r.handleNumericSummary(i):null!=n[0].item?r.handleSummary(n,i.uniqueValues):void 0}));var r},C.prototype.clearCachedData=function(){return delete this.__suggestions,this.model.unset("error")},C.prototype.getSuggestions=function(){return null!=this.__suggestions?this.__suggestions:this.__suggestions=(e=this,function(){var r,o,t,s,a;return e.model.get("path")?(o=e.query.clone(),a=e.model.get("value"),s=String(e.model.get("path")),t=c.get("MaxSuggestions"),o.constraints=function(){var t,e,n,i;for(i=[],t=0,e=(n=o.constraints).length;t<e;t++)(r=n[t]).path===s&&r.value===a||i.push(r);return i}(),o.summarise(s,t)):l.reject(new Error("no path"))}());var e},C.prototype.replaceInputWithSelect=function(t){var e;return this.model.has("value")?null==(e=this.model.get("value"))||v.any(t,function(t){return t.item===e})||t.push({item:e}):this.model.set({value:t[0].item}),this.$el.html(g({Messages:o,items:t,value:e}))},C.prototype.handleSummary=function(t,e){var n,i,r,o,s,a,l,u;return("="===(a=this.model.get("op"))||"!="===a)&&t.length<c.get("DropdownMax")?this.replaceInputWithSelect(t):(r=this.$(".im-con-value-attr"),o={minLength:0,highlight:!0},n={name:"summary_suggestions",source:(s=new h(t,e)).suggest,displayKey:"item",templates:{footer:s.tooMany}},this.removeTypeAheads(),i=function(t,e){return l.model.set({value:e.item})},(l=this).activateTypeahead(r,o,n,t[0].item,i,(u=this,function(){return u.setAttributeValue()})))},C.prototype.clearer='<div class="" style="clear:both;">',C.prototype.getMarkers=function(n,t,i){var e,r,o,s,a,l,u,c;for(s=t-n,o=function(t){var e;return e=t*s+n,i?Math.round(e):e},r=function(t){return Math.round(100*t)},c=[],l=(u=[a=0,.5,1]).length;a<l;a++)e=u[a],c.push({percent:r(e),value:d(o(e))});return c},C.prototype.makeSlider=a.template("slider",{variable:"markers"}),C.prototype.handleNumericSummary=function(t){var e,n,i,r,o,s,a,l,u,c,h;return u=t.min,l=t.max,n=t.average,h=this.model.get("path").getType(),c=(s=0<=x.call(f,h))?1:l-u/100,i=s?function(t){return parseInt(t,10)}:parseFloat,r=this.$el,o=this.$("input"),r.append(this.clearer),a=this.getMarkers(u,l,s),this.removeSliders(),o.off("change.slider"),(e=p(this.makeSlider(a))).appendTo(r).slider({min:u,max:l,value:this.model.has("value")?this.model.get("value"):i(n),step:c,slide:function(t,e){return o.val(e.value).change()}}),o.attr({placeholder:i(n)}),r.append(this.clearer),o.on("change.slider",function(t){return e.slider("value",i(o.val()))}),this.sliders.push(e)},C.prototype.remove=function(){return C.__super__.remove.apply(this,arguments),this.removeTypeAheads()},C)}).call(this)},{"../core-view":3,"../core/nested-model":8,"../messages":16,"../mixins/has-typeaheads":32,"../options":63,"../patterns":64,"../templates":67,"../templates/helpers":68,"../utils/branding":70,"../utils/suggestion-source":107,"es6-promise":238,imjs:247,jquery:256,underscore:262}],114:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}n=o("underscore"),o("../messages"),t=o("../core-view"),o("../options"),e=o("../templates/mustache-settings"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.className="im-value-options btn-group",i.prototype.modelEvents=function(){return{change:this.reRender}},i.prototype.getData=function(){return n.extend({value:null},i.__super__.getData.apply(this,arguments))},i.prototype.template=n.template("<button class=\"btn btn-default im-true {{ (value === true) ? ' active' : void 0 }}\">\n  True\n</button>\n<button class=\"btn btn-default im-false {{ (value === false) ? ' active' : void 0 }}\">\n  False\n</button>\n",e),i.prototype.events=function(){return{"click .im-true":"setValueTrue","click .im-false":"setValueFalse"}},i.prototype.setValueTrue=function(){return this.model.set({value:!0})},i.prototype.setValueFalse=function(){return this.model.set({value:!1})},i)}).call(this)},{"../core-view":3,"../messages":16,"../options":63,"../templates/mustache-settings":69,underscore:262}],115:[function(h,p,t){(function(){function t(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,r,o,s,a,l={}.hasOwnProperty;function u(){return u.__super__.constructor.apply(this,arguments)}function c(){return c.__super__.constructor.apply(this,arguments)}a=h("underscore"),n=h("../core-view"),h("../messages"),o=h("../options"),s=h("../templates"),e=h("../models/code-gen"),i=h("./code-gen-dialogue"),h("../messages/code-gen"),t(u,n),u.prototype.modelEvents=function(){return{"change:lang":this.reRender}},u.prototype.template=s.template("code-gen-button-main"),r=u,p.exports=(t(c,n),c.prototype.parameters=["query","tableState"],c.prototype.Model=e,c.prototype.template=s.template("code-gen-button"),c.prototype.getData=function(){return a.extend(c.__super__.getData.apply(this,arguments),{options:o.get("CodeGen")})},c.prototype.renderChildren=function(){return this.renderChildAt(".im-show-code-gen-dialogue",new r({model:this.model}))},c.prototype.events=function(){return{"click .dropdown-menu.im-code-gen-langs li":"chooseLang","click .im-show-code-gen-dialogue":"showDialogue"}},c.prototype.chooseLang=function(t){var e;return e=this.$(t.target).closest("li").data("lang"),this.model.set({lang:e}),this.showDialogue()},c.prototype.showDialogue=function(){var t,e;return e=this.tableState.pick("start","size"),t=new i({query:this.query,model:this.model,page:e}),this.renderChild("dialogue",t),t.show()},c)}).call(this)},{"../core-view":3,"../messages":16,"../messages/code-gen":18,"../models/code-gen":38,"../options":63,"../templates":67,"./code-gen-dialogue":116,underscore:262}],116:[function(T,S,t){(function(C){(function(){var i,t,e,n,r,o,s,a,l,u,c,h,p,f,d,m,g,y,v,_,b=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},w={}.hasOwnProperty;function x(){return x.__super__.constructor.apply(this,arguments)}_=T("underscore"),u=T("es6-promise").Promise,s=T("./modal"),o=T("../messages"),l=T("../options"),c=T("../templates"),n=T("../models/code-gen"),e=T("../core/checkbox"),T("../messages/code-gen"),f=T("../utils/indent-xml"),m=T("../utils/strip-extra-whitespace"),v=T("../utils/with-cdn-resource"),a=/\s*#.*$/gm,t=/\/\*(\*(?!\/)|[^*])*\*\//gm,i={level:"Info",key:"codegen.CannotExportXML"},r={js:"text/javascript;charset=utf8",xml:"application/xml;charset=utf8",html:"text/html;charset=utf8"},y=_.partial(v,"prettify","prettyPrintOne"),g=_.partial(v,"filesaver","saveAs"),h=u.reject("Requirements not met"),d=function(e){var n,i;return _.object(function(){var t;for(n in t=[],e)(i=e[n])&&0!==i.length&&t.push([n,i]);return t}())},p=function(){return!1,0<=b.call(C,!1)?h:g(_.identity)},S.exports=(function(t,e){for(var n in e)w.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(x,s),x.prototype.Model=n,x.prototype.parameters=["query"],x.prototype.optionalParameters=["page"],x.prototype.page={start:0,size:l.get("DefaultPageSize")},x.prototype.initialize=function(){return x.__super__.initialize.apply(this,arguments),this.generateCode(),this.setExportLink()},x.prototype.modalSize=function(){return"lg"},x.prototype.title=function(){return o.getText("codegen.DialogueTitle",{query:this.query,lang:this.model.get("lang")})},x.prototype.primaryIcon=function(){return"Download"},x.prototype.primaryAction=function(){return o.getText("codegen.PrimaryAction")},x.prototype.body=c.template("code_gen_body"),x.prototype.invariants=function(){return{hasQuery:"No query"}},x.prototype.hasQuery=function(){return null!=this.query},x.prototype.modelEvents=function(){return{change:this.onChangeLang,"change:showBoilerPlate":this.reRenderBody,"change:highlightSyntax":this.reRenderBody}},x.prototype.stateEvents=function(){return{"change:generatedCode":this.reRenderBody}},x.prototype.events=function(){return _.extend(x.__super__.events.apply(this,arguments),{"click .dropdown-menu.im-code-gen-langs li":"chooseLang"})},x.prototype.getBoilerPlateRegex=function(){if(!this.model.get("showBoilerPlate"))switch(this.model.get("lang")){case"pl":case"py":case"rb":return a;case"java":case"js":return t;default:return null}},x.prototype.act=function(){var e,n,t,i;return"js"===(t=this.model.get("lang"))&&this.model.get("extrajs")&&(t="html"),e=new Blob([this.state.get("generatedCode")],{type:r[t]}),n=(null!=(i=this.query.name)?i:"name")+"."+t,g(function(t){return t(e,n)})},x.prototype.onChangeLang=function(){var t,e,n;return t=this.model.get("lang"),this.$(".im-current-lang").text(o.getText("codegen.Lang",{lang:t})),this.$(".modal-title").text(this.title()),"js"===t||"xml"===t?p().then((n=this,function(){return n.state.unset("error")})).then(null,(e=this,function(){return e.state.set({error:i})})):this.state.unset("error"),this.generateCode(),this.setExportLink()},x.prototype.generateCode=function(){var t;switch(t=this.model.get("lang")){case"xml":return this.state.set({generatedCode:this.generateXML()});case"js":return this.state.set({generatedCode:this.generateJS()});default:return this.getCodeFromCache(t)}},x.prototype.getCodeFromCache=function(e){var t,n,i;return null==this.cache&&(this.cache={}),null!=(null!=(n=this.cache)?n[e]:void 0)?this.state.set({generatedCode:this.cache[e]}):(t={query:this.query.toXML(),lang:e,date:Date.now()},this.query.service.post("query/code?cachebuster="+Date.now(),t).then((i=this,function(t){return i.cache[e]=t.code,i.state.set({generatedCode:t.code})})))},x.prototype.generateXML=function(){return f(this.query.toXML())},x.prototype.generateJS=function(){var t,e,n;return n=c.template("code-gen-js"),e=d(this.query.toJSON()),t=l.get("CDN.server")+l.get(["CDN","imtables"]),n({service:this.query.service,query:e,page:this.page,asHTML:this.model.get("extrajs"),imtablesJS:t+"imtables.js",imtablesCSS:t+"main.sandboxed.css"})},x.prototype.setExportLink=function(){var t;switch(t=this.model.get("lang")){case"xml":case"js":return this.state.set({exportLink:null});default:return this.state.set({exportLink:this.query.getCodeURI(t)})}},x.prototype.reRenderBody=function(){if(this.rendered)return this.$(".modal-body").html(this.body(this.getData())),this.trigger("rendered",this.rendered)},x.prototype.postRender=function(){return x.__super__.postRender.apply(this,arguments),this.addCheckboxes(),this.highlightCode(),this.setMaxHeight()},x.prototype.setMaxHeight=function(){var t;return t=Math.max(250,this.$el.closest(".modal").height()-200),this.$(".im-generated-code").css({"max-height":t})},x.prototype.addCheckboxes=function(){var t;if(this.renderChildAt(".im-show-boilerplate",new e({model:this.model,attr:"showBoilerPlate",label:"codegen.ShowBoilerPlate"})),this.renderChildAt(".im-highlight-syntax",new e({model:this.model,attr:"highlightSyntax",label:"codegen.HighlightSyntax"})),t=l.get(["CodeGen","Extra",this.model.get("lang")]))return this.renderChildAt(".im-extra-options",new e({model:this.model,attr:"extra"+this.model.get("lang"),label:t}))},x.prototype.highlightCode=function(){var e,n;if(this.model.get("highlightSyntax")){if(this.model.get("lang"),n=this.$(".im-generated-code"),null==(e=this.getCode()))return;return y(function(t){return n.html(t(_.escape(e)))})}},x.prototype.getData=function(){return _.extend(x.__super__.getData.apply(this,arguments),{options:l.get("CodeGen"),generatedCode:this.getCode()})},x.prototype.getCode=function(){var t,e;return t=this.state.get("generatedCode"),(e=this.getBoilerPlateRegex())?m(null!=t?t.replace(e,""):void 0):t},x.prototype.toggleShowBoilerPlate=function(){return this.model.toggle("showBoilerPlate")},x.prototype.toggleHighlightSyntax=function(){return this.model.toggle("highlightSyntax")},x.prototype.chooseLang=function(t){var e;return t.stopPropagation(),e=this.$(t.target).closest("li").data("lang"),this.model.set({lang:e})},x)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../core/checkbox":4,"../messages":16,"../messages/code-gen":18,"../models/code-gen":38,"../options":63,"../templates":67,"../utils/indent-xml":88,"../utils/strip-extra-whitespace":106,"../utils/with-cdn-resource":110,"./modal":197,"es6-promise":238,underscore:262}],117:[function(_,b,t){(function(){function t(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var f,e,n,i,r,o,d,s,a,m,l,u,c,h={}.hasOwnProperty;function p(){this.model=function(t,e){return function(){return t.apply(e,arguments)}}(this.model,this),p.__super__.constructor.apply(this,arguments),this.listenTo(this,"change:index",function(){return c.defer((t=this,function(){return t.sort()}));var t})}function g(){return g.__super__.constructor.apply(this,arguments)}function y(){return y.__super__.constructor.apply(this,arguments)}function v(){return v.__super__.constructor.apply(this,arguments)}c=_("underscore"),o=_("./modal"),_("../templates"),r=_("../messages"),e=_("../core/collection"),a=_("../models/path"),n=_("./column-manager/tabs"),l=_("./column-manager/select-list"),u=_("./column-manager/sort-order"),f=_("../models/available-columns"),s=_("../models/order-element"),_("../messages/columns"),t(p,e),p.prototype.comparator="index",p.prototype.add=function(){return p.__super__.add.apply(this,arguments)},p.prototype.modelFactory=e.prototype.model,p.prototype.model=function(t){var e,n;return e=this.size(),(n=new this.modelFactory(t)).collection=this,n.set({index:e}),n},t(g,i=p),g.prototype.modelFactory=a,m=g,t(y,i),y.prototype.modelFactory=s,d=y,b.exports=(t(v,o),v.prototype.parameters=["query"],v.prototype.modalSize=function(){return"lg"},v.prototype.className=function(){return v.__super__.className.apply(this,arguments)+" im-column-manager"},v.prototype.title=function(){return r.getText("columns.DialogueTitle")},v.prototype.primaryAction=function(){return r.getText("columns.ApplyChanges")},v.prototype.dismissAction=function(){return r.getText("Cancel")},v.prototype.act=function(){var t,e,n,i;if(!this.state.get("disabled"))return n=(i=this.state.pick("viewChanged","orderChanged")).viewChanged,e=i.orderChanged,n&&!e?this.query.select(this.getCurrentView()):e&&!n?this.query.orderBy(this.getCurrentSortOrder()):(t={silent:!0,events:[]},this.query.select(this.getCurrentView(),t),this.query.orderBy(this.getCurrentSortOrder(),t),this.query.trigger(t.events.join(" "))),this.resolve("changed")},v.prototype.stateEvents=function(){return{"change:currentTab":this.renderTabContent,"change:adding":this.setDisabled}},v.prototype.initialize=function(){var t,e,n,i,r,o,s,a,l,u,c,h,p;for(v.__super__.initialize.apply(this,arguments),this.selectList=new m,this.rubbishBin=new m,this.sortOrder=new d,this.availableColumns=new f,i=0,s=(u=this.query.views).length;i<s;i++)n=u[i],this.selectList.add(this.query.makePath(n));for(r=0,a=(c=this.query.sortOrder).length;r<a;r++)e=(h=c[r]).path,t=h.direction,this.sortOrder.add({direction:t,path:this.query.makePath(e)});for(o=0,l=(p=this.getRelevantPaths()).length;o<l;o++)e=p[o],this.sortOrder.get(e.toString())||this.availableColumns.add(e,{sort:!1});return this.availableColumns.sort(),this.listenTo(this.selectList,"sort add remove",this.setDisabled),this.listenTo(this.sortOrder,"sort add remove",this.setDisabled)},v.prototype.getRelevantPaths=function(){return c.chain(this.query.getQueryNodes()).filter((e=this,function(t){return!e.query.isOuterJoined(t)})).map(function(t){var e,n,i,r,o;for(o=[],n=0,i=(r=t.getChildNodes()).length;n<i;n++)(e=r[n]).isAttribute()&&"id"!==e.end.name&&o.push(e);return o}).flatten().value();var e},v.prototype.getCurrentView=function(){return this.selectList.pluck("path")},v.prototype.getCurrentSortOrder=function(){return this.sortOrder.map(function(t){return t.asOrderElement()})},v.prototype.setDisabled=function(){var t,e;return this.state.get("adding")?this.state.set({disabled:!0}):(e=this.getCurrentView().join(" ")===this.query.views.join(" "),t=this.sortOrder.map(function(t){return t.toOrderString()}).join(" ")===this.query.getSorting(),this.state.set({viewChanged:!e,orderChanged:!t,disabled:e&&t}))},v.prototype.initState=function(){return this.state.set({disabledReason:"columns.NoChangesToApply",disabled:!0,currentTab:n.TABS[0]})},v.prototype.renderTabs=function(){return this.renderChild("tabs",new n({state:this.state}),this.$(".modal-body"))},v.prototype.renderTabContent=function(){var t;if(this.rendered)return t=function(){switch(this.state.get("currentTab")){case"view":return new l({state:this.state,query:this.query,rubbishBin:this.rubbishBin,collection:this.selectList});case"sortorder":return new u({query:this.query,availableColumns:this.availableColumns,collection:this.sortOrder});default:throw new Error("Cannot render "+this.state.get("currentTab"))}}.call(this),this.renderChild("main",t,this.$(".modal-body"))},v.prototype.postRender=function(){return v.__super__.postRender.apply(this,arguments),this.renderTabs(),this.renderTabContent()},v.prototype.remove=function(){return this.selectList.close(),this.rubbishBin.close(),this.sortOrder.close(),this.availableColumns.close(),v.__super__.remove.apply(this,arguments)},v)}).call(this)},{"../core/collection":5,"../messages":16,"../messages/columns":19,"../models/available-columns":36,"../models/order-element":53,"../models/path":56,"../templates":67,"./column-manager/select-list":122,"./column-manager/sort-order":124,"./column-manager/tabs":125,"./modal":197,underscore:262}],118:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}e=i("underscore"),t=i("./unselected-column"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.parameters=["findActives"],n.prototype.restoreTitle="columns.AddColumnToSortOrder",n.prototype.events=function(){return e.extend(n.__super__.events.apply(this,arguments),{mousedown:"onMouseDown",dragstart:"onDragStart",dragstop:"onDragStop"})},n.prototype.onMouseDown=function(){return this.fixAppendTo()},n.prototype.fixAppendTo=function(){var t;return this.$el.draggable("option","appendTo",this.$el.closest(".well")),t=900<=this.$el.closest(".modal").width(),this.$el.draggable("option","axis",t?null:"y")},n.prototype.onDragStart=function(){return this.state.set({dragged:this.model.get("path")}),this.$el.addClass("ui-dragging")},n.prototype.onDragStop=function(){return this.state.unset("dragged"),this.$el.removeClass("ui-dragging")},n.prototype.postRender=function(){var t,e;return e=900<=this.$el.closest(".modal").width(),t=this.model.collection.indexOf(this.model),this.$el.draggable({axis:e?null:"y",connectToSortable:this.findActives(),helper:"clone",revert:"invalid",opacity:.8,cancel:"i,a,button",zIndex:1e3}),this.$("[title]").tooltip({placement:0===t?"bottom":"top"})},n)}).call(this)},{"./unselected-column":126,underscore:262}],119:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}e=i("../query-dialogue-button"),t=i("../column-manager"),i("../../messages/columns"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,e),n.prototype.className="im-column-manager-button",n.prototype.longLabel="columns.ManageColumns",n.prototype.shortLabel="columns.ManageColumnsShort",n.prototype.icon="Columns",n.prototype.Dialogue=t,n)}).call(this)},{"../../messages/columns":19,"../column-manager":117,"../query-dialogue-button":206}],120:[function(a,l,t){(function(){var t,e,n,i,r,o={}.hasOwnProperty;function s(){return s.__super__.constructor.apply(this,arguments)}r=a("underscore"),t=a("./selected-column"),n=a("../../templates"),e=["column-manager-position-controls","column-manager-order-direction","column-manager-path-name","column-manager-path-remover"],i=function(t){return"ASC"===t?"DESC":"ASC"},l.exports=(function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(s,t),s.prototype.removeTitle="columns.RemoveOrderElement",s.prototype.template=n.templateFromParts(e),s.prototype.modelEvents=function(){return r.extend(s.__super__.modelEvents.apply(this,arguments),{"change:direction":this.reRender})},s.prototype.events=function(){return r.extend(s.__super__.events.apply(this,arguments),{"click .im-change-direction":"changeDirection"})},s.prototype.changeDirection=function(){return this.model.swap("direction",i)},s)}).call(this)},{"../../templates":67,"./selected-column":123,underscore:262}],121:[function(h,p,t){(function(){function t(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var n,e,i,r,o,s,a,l={}.hasOwnProperty;function u(){return u.__super__.constructor.apply(this,arguments)}function c(){return c.__super__.constructor.apply(this,arguments)}e=h("../../core-view"),a=h("../../templates"),r=h("../../options"),s=h("../../models/path-set"),i=h("../../models/open-nodes"),o=h("../path-chooser"),t(u,e),u.prototype.parameters=["collection","selectList"],u.prototype.template=a.template("column-manager-path-chooser-buttons"),u.prototype.collectionEvents=function(){return{"add remove reset":"reRender"}},u.prototype.events=function(){return{"click .im-add-column":"addColumn","click .im-rearrange-columns":"cancel"}},u.prototype.cancel=function(){return this.trigger("done")},u.prototype.addColumn=function(){var t,e;return e=this.selectList,t=this.collection.paths(),this.cancel(),e.add(t)},n=u,p.exports=(t(c,e),c.prototype.parameters=["query","collection"],c.prototype.template=a.template("column-manager-path-chooser"),c.prototype.initialize=function(){var r;return c.__super__.initialize.apply(this,arguments),this.chosenPaths=new s,this.view=new s(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.collection.pluck("path")).length;t<e;t++)r=n[t],i.push(this.query.makePath(r));return i}.call(this)),this.openNodes=new i(this.query.getViewNodes())},c.prototype.initState=function(){return this.query.makePath(this.query.root).getDisplayName().then((e=this,function(t){return e.state.set({rootName:t})}));var e},c.prototype.stateEvents=function(){return{"change:rootName":"reRender"}},c.prototype.postRender=function(){return this.renderButtons(),this.openPathChooser()},c.prototype.renderButtons=function(){var t,e;return t=new n({state:this.state,collection:this.chosenPaths,selectList:this.collection}),this.listenTo(t,"done",(e=this,function(){return e.trigger("done")})),this.renderChildAt(".btn-group",t)},c.prototype.openPathChooser=function(){var t,e;return t={dontSelectView:!0,multiSelect:r.get("ColumnManager.SelectColumn.Multi")},e=new o({model:t,query:this.query,chosenPaths:this.chosenPaths,openNodes:this.openNodes,view:this.view,trail:[]}),this.renderChild("pathChooser",e),this.setPathChooserHeight()},c.prototype.setPathChooserHeight=function(){return this.$(".im-path-chooser").css({"max-height":this.$el.closest(".modal").height()-350})},c.prototype.remove=function(){return this.chosenPaths.close(),this.view.close(),this.openNodes.close(),c.__super__.remove.apply(this,arguments)},c)}).call(this)},{"../../core-view":3,"../../models/open-nodes":52,"../../models/path-set":55,"../../options":63,"../../templates":67,"../path-chooser":201}],122:[function(p,f,t){(function(){var n,t,e,a,i,l,u,c,h,r,o={}.hasOwnProperty;function s(){return s.__super__.constructor.apply(this,arguments)}r=p("underscore"),t=p("../../core-view"),i=p("../../templates"),p("../../core/collection"),e=p("../../mixins/handles-dom-resort"),a=p("./selected-column"),l=p("./unselected-column"),n=p("./path-chooser"),c=function(t){return"path_"+t.get("id")},u=function(t){return"expath_"+t.get("id")},h=function(t){return t+1},f.exports=(function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(s,t),s.include(e),s.prototype.parameters=["query","collection","rubbishBin"],s.prototype.className="im-select-list-editor",s.prototype.template=i.template("column-manager-select-list"),s.prototype.getData=function(){return r.extend(s.__super__.getData.apply(this,arguments),{hasRubbish:this.rubbishBin.size()})},s.prototype.initialize=function(){return s.__super__.initialize.apply(this,arguments),this.listenTo(this.rubbishBin,"remove",this.restoreView)},s.prototype.initState=function(){return this.state.set({adding:!1})},s.prototype.collectionEvents=function(){return{remove:"moveToBin","add remove":"reRender"}},s.prototype.events=function(){return{"drop .im-rubbish-bin":"onDragToBin","sortupdate .im-active-view":"onOrderChanged","click .im-add-view-path":"setAddingTrue"}},s.prototype.stateEvents=function(){return{"change:adding":"onChangeMode"}},s.prototype.setAddingTrue=function(){return this.state.set({adding:!0})},s.prototype.onDragToBin=function(t,e){return e.draggable.trigger("binned")},s.prototype.moveToBin=function(t){return this.rubbishBin.add(this.query.makePath(t.get("path"))),this.reIndexFrom(t.get("index"))},s.prototype.reIndexFrom=function(t){var e,n,i,r,o;for(o=[],e=n=t,i=this.collection.size();t<=i?n<=i:i<=n;e=t<=i?++n:--n)o.push(null!=(r=this.collection.at(e))?r.set({index:e}):void 0);return o},s.prototype.restoreView=function(t){return this.collection.add(this.query.makePath(t.get("path")))},s.prototype.onChangeMode=function(){if(this.rendered)return this.state.get("adding")?(this.$(".im-removal-and-rearrangement").hide(),this.$(".im-addition").show(),this.renderPathChooser()):(this.$(".im-removal-and-rearrangement").show(),this.$(".im-addition").hide(),this.removeChild("columnChooser"))},s.prototype.renderPathChooser=function(){var t,e;return t=new n({query:this.query,collection:this.collection}),this.listenTo(t,"done",(e=this,function(){return e.state.set({adding:!1})})),this.renderChild("columnChooser",t,this.$(".im-addition"))},s.prototype.onOrderChanged=function(t,e){return null!=e.sender?this.restoreFromBin(e.item):this.onDOMResort()},s.prototype.getInsertPoint=function(t){var e,n,i;return e=t.prev(),n=this.children,null==(i=this.collection.find(function(t){return n[c(t)].el===e[0]}))?0:i.get("index")+1},s.prototype.getRestoredModel=function(n){return this.rubbishBin.find((i=this,function(t){var e;return(null!=(e=i.children[u(t)])?e.el:void 0)===n[0]}));var i},s.prototype.restoreFromBin=function(t){var e,n,i,r,o,s,a,l,u;if(r=this.children,o=this.collection.size(),n=this.getInsertPoint(t),null!=(a=this.getRestoredModel(t))){if(a.destroy(),n!==o){for(s=function(){var t,e;for(e=[],i=t=n;n<=o?t<o:o<t;i=n<=o?++t:--t)e.push(this.collection.at(i));return e}.call(this),e=this.collection.last(),l=0,u=s.length;l<u;l++)s[l].swap("index",h);return e.set({index:n}),r[c(e)].$el.insertBefore(r[c(s[0])].el)}}else console.error("could not find model for:",t)},s.prototype.onDOMResort=function(){return this.setChildIndices(c)},s.prototype.postRender=function(){var e,n,t,i,r,o,s;return n=this.$(".im-active-view"),e=this.$(".im-removed-view"),t=900<=this.$el.closest(".modal").width(),this.collection.each((i=this,function(t){return t.collection=i.collection})),this.rubbishBin.each((r=this,function(t){return t.collection=r.rubbishBin})),this.collection.each((o=this,function(t){return o.renderChild(c(t),new a({model:t}),n)})),this.rubbishBin.each((s=this,function(t){return s.renderChild(u(t),new l({model:t}),e)})),n.sortable({placeholder:"im-view-list-placeholder",opacity:.6,cancel:"i,a,button",axis:t?null:"y",appendTo:this.el}),this.$(".im-removed-view").sortable({placeholder:"im-view-list-placeholder",connectWith:n,opacity:.6,cancel:"i,a,button",axis:t?null:"y",appendTo:this.el}),this.$(".im-rubbish-bin").droppable({accept:".im-selected-column",activeClass:"im-can-remove-column",hoverClass:"im-will-remove-column"}),this.onChangeMode()},s.prototype.removeAllChildren=function(){return this.rendered&&(this.$(".im-active-view").sortable("destroy"),this.$(".im-removed-view").sortable("destroy"),this.$(".im-rubbish-bin").droppable("destroy")),s.__super__.removeAllChildren.apply(this,arguments)},s)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../mixins/handles-dom-resort":31,"../../templates":67,"./path-chooser":121,"./selected-column":123,"./unselected-column":126,underscore:262}],123:[function(h,p,t){(function(){var t,e,n,i,r,o,s,a,l,u={}.hasOwnProperty;function c(){return c.__super__.constructor.apply(this,arguments)}l=h("underscore"),e=h("../../core-view"),t=h("../../core/collection"),r=h("../../templates"),n=h("../../models/path"),s=h("../../utils/events").ignore,o=function(t){return t-1},a=function(t){return t+1},i=["column-manager-path-remover","column-manager-position-controls","column-manager-path-name"],p.exports=(function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(c,e),c.prototype.Model=n,c.prototype.tagName="li",c.prototype.className="list-group-item im-selected-column",c.prototype.template=r.templateFromParts(i),c.prototype.removeTitle="columns.RemoveColumn",c.prototype.getData=function(){var t;return t=this.model===this.model.collection.last(),l.extend(c.__super__.getData.apply(this,arguments),{removeTitle:this.removeTitle,isLast:t,parts:this.parts.pluck("part")})},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.parts=new t,this.listenTo(this.parts,"add remove reset",this.reRender),this.resetParts(),this.listenTo(this.model.collection,"sort",this.onCollectionSorted)},c.prototype.modelEvents=function(){return{destroy:this.stopListeningTo,"change:parts":this.resetParts}},c.prototype.stateEvents=function(){return{"change:fullPath":this.setFullPathClass}},c.prototype.onCollectionSorted=function(){return this.reRender()},c.prototype.resetParts=function(){var r,o;return this.parts.reset(function(){var t,e,n,i;for(n=this.model.get("parts"),i=[],r=t=0,e=n.length;t<e;r=++t)o=n[r],i.push({part:o,id:r});return i}.call(this))},c.prototype.postRender=function(){return this.$("[title]").tooltip({container:this.$el})},c.prototype.events=function(){return{"click .im-remove-view":"removeView","click .im-move-up":"moveUp","click .im-move-down":"moveDown",click:"toggleFullPath",binned:"removeView"}},c.prototype.toggleFullPath=function(){return this.state.toggle("fullPath")},c.prototype.moveDown=function(t){return s(t),this.model.collection.at(a(this.model.get("index"))).swap("index",o),this.model.swap("index",a),this.$el.insertAfter(this.$el.next())},c.prototype.moveUp=function(t){return s(t),this.model.collection.at(o(this.model.get("index"))).swap("index",a),this.model.swap("index",o),this.$el.insertBefore(this.$el.prev())},c.prototype.setFullPathClass=function(){return this.$el.toggleClass("im-full-path",this.state.get("fullPath"))},c.prototype.removeView=function(t){return s(t),this.model.collection.remove(this.model),this.model.destroy()},c)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../models/path":56,"../../templates":67,"../../utils/events":81,underscore:262}],124:[function(p,f,t){(function(h){(function(){var o,t,e,n,i,r,s,a,l,u={}.hasOwnProperty;function c(){return c.__super__.constructor.apply(this,arguments)}l=p("underscore"),e=p("../../core-view"),t=p("../../core-model"),r=p("../../templates"),n=p("../../mixins/handles-dom-resort"),o=p("./available-path"),i=p("./order-element"),s=function(t){return"active_"+t.get("id")},a=function(t){return"inactive_"+t.get("id")},f.exports=(function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(c,e),c.include(n),c.prototype.parameters=["collection","query","availableColumns"],c.prototype.className="im-sort-order-editor",c.prototype.template=r.template("column-manager-sort-order-editor"),c.prototype.getData=function(){return l.extend(c.__super__.getData.apply(this,arguments),{available:this.availableColumns.size()})},c.prototype.collectionEvents=function(){return{"add remove":this.reRender,sort:this.resortSortOrder,remove:this.makeAvailable}},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.dragState=new t,this.listenTo(this.availableColumns,"sort add remove",this.resortAvailable),this.listenTo(this.availableColumns,"remove",this.addToSortOrder)},c.prototype.currentSortOrder=function(){return this.collection.map(function(t){return t.get("path")+" "+t.get("direction")}).join(" ")},c.prototype.postRender=function(){return this.resortSortOrder(),this.activateSortables(),this.resortAvailable(),this.setAvailableHeight()},c.prototype.activateSortables=function(){var t,e;return t=this.$(".im-active-oes"),e=900<=this.$el.closest(".modal").width(),this.collection.size()?this.$actives=t.sortable({placeholder:"im-view-list-placeholder",opacity:.6,cancel:"i,a,button",axis:e?null:"y",appendTo:this.el}):this.$droppable=this.$(".im-empty-collection").droppable({accept:".im-selected-column",activeClass:"im-can-add-column",hoverClass:"im-will-add-column"})},c.prototype.removeAllChildren=function(){var t,e;return null!=(t=this.$actives)&&t.sortable("destroy"),null!=(e=this.$droppable)&&e.droppable("destroy"),this.$droppable=null,this.$actives=null,c.__super__.removeAllChildren.apply(this,arguments)},c.prototype.events=function(){return{"drop .im-empty-collection":"addSortElement","sortupdate .im-active-oes":"onDOMResort"}},c.prototype.onDOMResort=function(t,e){var n,i,r;return(r=this.dragState.get("dragged"))?(i=this.availableColumns.findWhere({path:r}),n=e.item.prevAll().length,this.addToSortOrder(i,n),this.dragState.unset("dragged")):this.setChildIndices(s)},c.prototype.makeAvailable=function(t){return this.availableColumns.add(this.query.makePath(t.get("path")))},c.prototype.findAvailable=function(n){return this.availableColumns.find((i=this,function(t){var e;return(null!=(e=i.children[a(t)])?e.el:void 0)===n}));var i},c.prototype.addSortElement=function(t,e){var n,i;return n=e.draggable,i=this.findAvailable(n[0]),this.addToSortOrder(i)},c.prototype.addToSortOrder=function(t,e){var n,i,r,o,s,a,l;if(r=this.query.makePath(t.get("path")),i={id:String(r),path:r},o=this.collection.size(),t.destroy(),this.collection.add(i),null!=e&&e<o){for(s=this.collection.filter(function(t){return t.get("index")>=e}),n=this.collection.last(),a=0,l=s.length;a<l;a++)s[a].swap("index",function(t){return t+1});return n.set({index:e})}},c.prototype.resortAvailable=function(){var e,n;if(this.rendered)return e=h.document.createDocumentFragment(),this.availableColumns.each((n=this,function(t){return n._renderAvailable(t,e)})),this.$(".im-available-oes").html(e)},c.prototype._renderAvailable=function(t,e){var n,i,r;return n=a(t),i=new o({model:t,findActives:function(){return r.$actives},state:(r=this).dragState}),this.renderChild(n,i,e)},c.prototype.resortSortOrder=function(){var e,n;if(this.rendered)return e=h.document.createDocumentFragment(),this.collection.each((n=this,function(t){return n.renderChild(s(t),new i({model:t}),e)})),this.$(".im-active-oes").html(e)},c.prototype.setAvailableHeight=function(){return this.$(".im-rubbish-bin").css({"max-height":Math.max(200,this.$el.closest(".modal").height()-450)})},c.prototype.remove=function(){return this.dragState.destroy(),c.__super__.remove.apply(this,arguments)},c)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core-model":2,"../../core-view":3,"../../mixins/handles-dom-resort":31,"../../templates":67,"./available-path":118,"./order-element":120,underscore:262}],125:[function(a,l,t){(function(){var i,t,e,o,n,r={}.hasOwnProperty;function s(){return s.__super__.constructor.apply(this,arguments)}n=a("underscore"),t=a("../../core-view"),e=a("../../templates"),i=a("../../utils/css-class-set"),o=function(t,e){var n;return(n={active:function(){return e.get("currentTab")===t}})["im-"+t+"-tab"]=!0,new i(n)},l.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(s,t),s.TABS=["view","sortorder"],s.prototype.template=e.template("column-manager-tabs"),s.prototype.className="im-column-manager-tabs",s.prototype.getData=function(){return n.extend(s.__super__.getData.apply(this,arguments),{classes:this.classSets})},s.prototype.initState=function(){return this.state.set({currentTab:s.TABS[0]})},s.prototype.initialize=function(){return s.__super__.initialize.apply(this,arguments),this.initClassSets()},s.prototype.stateEvents=function(){return{"change:currentTab":this.reRender}},s.prototype.events=function(){return{"click .im-view-tab":"selectViewTab","click .im-sortorder-tab":"selectSortOrderTab"}},s.prototype.selectViewTab=function(){return this.state.set({currentTab:"view"})},s.prototype.selectSortOrderTab=function(){return this.state.set({currentTab:"sortorder"})},s.prototype.initClassSets=function(){var t,e,n,i,r;for(this.classSets={},r=[],e=0,n=(i=["view","sortorder"]).length;e<n;e++)t=i[e],r.push(function(e){return function(t){return e.classSets[t]=o(t,e.state)}}(this)(t));return r},s)}).call(this)},{"../../core-view":3,"../../templates":67,"../../utils/css-class-set":79,underscore:262}],126:[function(s,a,t){(function(){var t,e,n,i,r={}.hasOwnProperty;function o(){return o.__super__.constructor.apply(this,arguments)}i=s("underscore"),t=s("./selected-column"),n=s("../../templates"),e=["column-manager-path-name","column-manager-restore-path"],a.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,t),o.prototype.template=n.templateFromParts(e),o.prototype.events=function(){return{"click .im-restore-view":"removeView",click:"toggleFullPath"}},o.prototype.restoreTitle="columns.RestoreColumn",o.prototype.getData=function(){return i.extend(o.__super__.getData.apply(this,arguments),{restoreTitle:this.restoreTitle})},o)}).call(this)},{"../../templates":67,"./selected-column":123,underscore:262}],127:[function(f,d,t){(function(){var t,n,i,o,e,r,s,a,l,u,c=[].slice,h={}.hasOwnProperty;function p(){return p.__super__.constructor.apply(this,arguments)}u=f("underscore"),o=f("es6-promise").Promise,r=f("../core-view"),i=f("../options"),e=f("../templates"),t=f("../mixins/has-typeaheads"),n=f("../patterns").IS_BLANK,a=f("../utils/path-suggester"),s=f("../utils/path-suggestions"),l=function(t){var e,n;return 3<(e=t.split(" > ")).length?(4<=e.length?c.call(e,0,n=e.length-3):(n=0,[]),"..."+e[n++]+" > "+e[n++]+" > "+e[n++]):t},d.exports=(function(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(p,r),p.include(t),p.prototype.className="row",p.prototype.initialize=function(t){return this.query=t.query,this.openNodes=t.openNodes,this.chosenPaths=t.chosenPaths,p.__super__.initialize.apply(this,arguments),this.state.set({chosen:[]}),this.listenTo(this.openNodes,"add remove reset",this.reRender),this.listenTo(this.chosenPaths,"add remove reset",this.reRender),this.listenTo(this.chosenPaths,"add remove reset",this.setChosen),this.setChosen(),this.generatePathSuggestions()},p.prototype.modelEvents=function(){return{destroy:this.stopListeningTo,"change:showTree change:allowRevRefs":this.reRender}},p.prototype.stateEvents=function(){return{"change:chosen change:suggestions":this.reRender}},p.prototype.pathAcceptable=function(t){var e;return"id"!==(null!=(e=t.end)?e.name:void 0)&&(!!this.model.get("canSelectReferences")||t.isAttribute())},p.prototype.generatePathSuggestions=function(){var t,e;return t=i.get("SuggestionDepth"),s(this.query,t).then((e=this,function(t){return e.state.set({suggestions:t.filter(function(t){return e.pathAcceptable(t.path)})})}))},p.prototype.getData=function(){var t,e;return e=this.openNodes.size(),t=this.chosenPaths.size(),u.extend({anyNodesOpen:e,anyNodeChosen:t},this.state.toJSON(),p.__super__.getData.apply(this,arguments))},p.prototype.template=e.template("constraint_adder_options"),p.prototype.render=function(){return p.__super__.render.apply(this,arguments),this.state.has("suggestions")&&this.installTypeahead(),this},p.prototype.installTypeahead=function(){var t,e,n,i,r;return this.removeTypeAheads(),e=this.$(".im-tree-filter"),i=this.state.get("suggestions"),n={minLength:3,highlight:!0},t={name:"path_suggestions",source:a(i),displayKey:"name"},this.activateTypeahead(e,n,t,i[0].name,(r=this,function(t,e){var n;return n=e.path,r.openNodes.add(n),r.model.get("multiSelect")?r.chosenPaths.add(n):r.chosenPaths.reset([n])}))},p.prototype.events=function(){return{"click .im-collapser":"collapseBranches","change .im-allow-rev-ref":"toggleReverseRefs","change .im-tree-filter":"setFilter","click .im-choose":"toggleShowTree","click .im-approve":"triggerApproval","click .im-clear-filter":"clearFilter"}},p.prototype.triggerApproval=function(){return this.model.trigger("approved")},p.prototype.remove=function(){return this.removeTypeAheads(),p.__super__.remove.apply(this,arguments)},p.prototype.clearFilter=function(){return this.model.set({filter:null}),this.reRender()},p.prototype.setFilter=function(t){var e;return e=t.target.value,this.model.set({filter:n.test(e)?null:e})},p.prototype.collapseBranches=function(){return this.openNodes.reset()},p.prototype.toggleShowTree=function(){return this.model.toggle("showTree")},p.prototype.toggleReverseRefs=function(){return this.model.toggle("allowRevRefs")},p.prototype.setConstraint=function(){return this.model.trigger("approved")},p.prototype.setChosen=function(){var i,r,e;return r=this.chosenPaths.toJSON(),o.all(function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(i.getDisplayName());return n}()).then(function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(l(e));return r}).then((e=this,function(t){return e.state.set({chosen:t})}),function(t){return console.error(t)})},p)}).call(this)},{"../core-view":3,"../mixins/has-typeaheads":32,"../options":63,"../patterns":64,"../templates":67,"../utils/path-suggester":96,"../utils/path-suggestions":97,"es6-promise":238,underscore:262}],128:[function(d,m,t){(function(){function t(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,r,o,s,a,l,u,c,h={}.hasOwnProperty;function p(){return p.__super__.constructor.apply(this,arguments)}function f(){return this.showTree=function(t,e){return function(){return t.apply(e,arguments)}}(this.showTree,this),f.__super__.constructor.apply(this,arguments)}d("underscore"),r=d("../messages"),u=d("../templates"),c=d("../core-view"),i=d("../core-model"),l=d("../models/path-set"),s=d("../models/open-nodes"),n=d("./constraint-adder-options"),o=d("./new-constraint"),a=d("./path-chooser"),r.set({"constraints.BrowseForColumn":"Browse for Column","constraints.AddANewFilter":"Add a new filter","constraints.Choose":"Choose","constraints.Filter":"Filter","columns.CollapseAll":"Collapse columns","columns.AllowRevRef":"Allow reverse references"}),t(p,i),p.prototype.defaults=function(){return{filter:null,showTree:!0,allowRevRefs:!1,canSelectReferences:!0,multiSelect:!1}},e=p,m.exports=(t(f,c),f.prototype.tagName="div",f.prototype.className="im-constraint-adder row-fluid",f.prototype.Model=e,f.prototype.initialize=function(t){var r;return this.query=t.query,this.buttonDelegate=t.buttonDelegate,f.__super__.initialize.apply(this,arguments),this.model.set({root:this.query.getPathInfo(this.query.root)}),this.chosenPaths=new l,this.view=new l(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.views).length;t<e;t++)r=n[t],i.push(this.query.makePath(r));return i}.call(this)),this.openNodes=new s(this.query.getViewNodes()),this.listenTo(this.query,"change:constraints",this.remove)},f.prototype.modelEvents=function(){return{approved:this.handleApproval,"change:showTree":this.toggleTree,"change:constraint":this.onChangeConstraint}},f.prototype.getTreeRoot=function(){return this.model.get("root")},f.prototype.handleApproval=function(){var t,e,n,i;return null!=(t=this.chosenPaths.toJSON()[0])?(n=this.model.get("constraint"),i=t.toString(),(null!=n?n.path:void 0)!==i?(e={path:i},this.model.set({constraint:e}),this.query.trigger("editing-constraint",e)):this.onChangeConstraint()):(console.debug("nothing chosen"),this.model.unset("constraint"))},f.prototype.renderConstraintEditor=function(){var t,e;return t=this.model.get("constraint"),e=new o({buttonDelegate:this.buttonDelegate,query:this.query,constraint:t}),this.renderChild("con",e,this.$(".im-new-constraint")),this.listenTo(e,"remove",function(){return this.model.set({showTree:!0})})},f.prototype.onChangeConstraint=function(){if(this.rendered)return this.model.get("constraint")?(this.model.set({showTree:!1}),this.renderConstraintEditor()):this.removeChild("con")},f.prototype.toggleTree=function(){return this.model.get("showTree")?this.showTree():this.hideTree()},f.prototype.hideTree=function(){return this.trigger("resetting:tree"),this.$(".im-path-finder").removeClass("open"),this.removeChild("tree")},f.prototype.showTree=function(t){var e;return this.trigger("showing:tree"),this.removeChild("con"),e=new a({model:this.model,query:this.query,chosenPaths:this.chosenPaths,openNodes:this.openNodes,view:this.view,trail:[]}),this.$(".im-path-finder").addClass("open"),this.renderChild("tree",e,this.$(".im-path-finder"))},f.prototype.template=u.template("constraint_adder"),f.prototype.renderOptions=function(){var t;return t={model:this.model,openNodes:this.openNodes,chosenPaths:this.chosenPaths,query:this.query},this.renderChild("opts",new n(t),this.$(".im-constraint-adder-options"))},f.prototype.postRender=function(){return this.renderOptions(),this.toggleTree()},f)}).call(this)},{"../core-model":2,"../core-view":3,"../messages":16,"../models/open-nodes":52,"../models/path-set":55,"../templates":67,"./constraint-adder-options":127,"./new-constraint":199,"./path-chooser":201,underscore:262}],129:[function(k,N,t){(function(){var i,r,t,o,e,n,s,a,l,u,c,h,p,f,d,m,g,y,v,_,b,w,x,C,T=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},S={}.hasOwnProperty;function E(){return E.__super__.constructor.apply(this,arguments)}x=k("underscore"),f=k("../messages"),a=k("../icons"),n=k("../core-view"),b=k("./type-value-controls"),t=k("./attribute-value-controls"),m=k("./multi-value-controls"),e=k("./boolean-value-controls"),c=k("./lookup-value-controls"),h=k("./loop-value-controls"),u=k("./list-value-controls"),s=k("./error-message"),C=k("imjs"),y=C.Query,d=C.Model,v=y.REFERENCE_OPS,l=y.LIST_OPS,p=y.MULTIVALUE_OPS,g=y.NULL_OPS,i=y.ATTRIBUTE_OPS,r=y.ATTRIBUTE_VALUE_OPS,d.NUMERIC_TYPES,o=d.BOOLEAN_TYPES,r.concat(g),_=x.template('<fieldset class="im-constraint-options form-group row">\n  <label class="col-sm-3 path-label"><%- data.con.displayName %></label>\n  <% if (data.con.op) { %>\n    <div class="im-operator col-sm-3">\n        <select class="form-control im-ops">\n        <option selected><%- data.con.op %></option>\n        <% data.otherOperators.forEach(function (op) { %>\n            <option><%- op %></option>\n        <% }); %>\n        </select>\n    </div>\n  <% } %>\n  <div class="col-sm-6 im-value-options im-value-section">\n  </div>\n</fieldset>\n\n<div class="btn-group im-con-buttons">\n  <% data.buttons.forEach(function (b, i) { %>\n  <button class="btn btn-<%= (i === 0) ? \'primary\' : \'default\' %> <%- b.classes %>">\n    <%- data.messages.getText(b.key) %>\n  </button>\n  <% }); %>\n</div>\n',{variable:"data"}),w=function(t){var e,n;if(!(null!=(e=t.path)?e.isReference:void 0))throw new Error("No path or wrong type");return e.isRoot()&&v.concat(y.RANGE_OPS),e.isReference()?v.concat(y.RANGE_OPS).concat(t.new?["ISA"]:[]):(n=e.getType(),0<=T.call(o,n)?["=","!="].concat(g):i)},N.exports=(function(t,e){for(var n in e)S.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(E,n),E.prototype.tagName="div",E.prototype.className="form",E.prototype.parameters=["query","model"],E.prototype.optionalParameters=["buttonDelegate"],E.prototype.initialize=function(){return E.__super__.initialize.apply(this,arguments),this.path=this.model.get("path")},E.prototype.invariants=function(){return{modelHasPath:"No path found on model"}},E.prototype.modelHasPath=function(){return this.model.get("path")},E.prototype.getType=function(){return this.model.get("path").getType()},E.prototype.modelEvents=function(){return{"change:op change:displayName":this.reRender,destroy:this.stopListening}},E.prototype.events=function(){return{submit:function(t){return t.preventDefault(),t.stopPropagation()},"click .btn-cancel":"cancelEditing","click .btn-primary":"applyChanges","change .im-ops":"setOperator"}},E.prototype.delegateButtonEvents=function(){var t,e;return this.buttonDelegate.off("click.constraint-editor"),this.buttonDelegate.on("click.constraint-editor",".btn-cancel",(t=this,function(){return t.cancelEditing()})),this.buttonDelegate.on("click.constraint-editor",".btn-primary",(e=this,function(){return e.applyChanges()}))},E.prototype.setOperator=function(){return this.model.set({op:this.$(".im-ops").val()})},E.prototype.cancelEditing=function(){return this.model.trigger("cancel")},E.prototype.applyChanges=function(t){return null!=t&&t.preventDefault(),null!=t&&t.stopPropagation(),this.model.trigger("apply",this.getConstraint())},E.prototype.getConstraint=function(){var t,e,n;return e=(t=this.model.pick(["path","op","value","values","code","type"])).op,0<=T.call(p.concat(g),e)&&delete t.value,n=t.op,0<=T.call(r.concat(g),n)&&delete t.values,"ISA"===t.op&&delete t.op,t},E.prototype.getValueControls=function(){return null==this.path?null:this.isNullConstraint()?null:this.isTypeConstraint()?new b({model:this.model,query:this.query}):this.isMultiValueConstraint()?new m({model:this.model,query:this.query}):this.isListConstraint()?new u({model:this.model,query:this.query}):this.isBooleanConstraint()?new e({model:this.model,query:this.query}):this.isLoopConstraint()?new h({model:this.model,query:this.query}):this.isLookupConstraint()?new c({model:this.model,query:this.query}):this.isRangeConstraint()?new m({model:this.model,query:this.query}):this.path.isAttribute()?new t({model:this.model,query:this.query}):(this.model.set({error:new Error("cannot handle this constaint type")}),null)},E.prototype.isNullConstraint=function(){var t;return t=this.model.get("op"),0<=T.call(g,t)},E.prototype.isLoopConstraint=function(){var t;return this.path.isClass()&&("="===(t=this.model.get("op"))||"!="===t)},E.prototype.isTypeConstraint=function(){return this.path.isReference()&&(!this.model.get("op")||"ISA"===this.model.get("op"))},E.prototype.isBooleanConstraint=function(){var t,e;return t=this.path.getType(),0<=T.call(o,t)&&(e=this.model.get("op"),!(0<=T.call(g,e)))},E.prototype.isMultiValueConstraint=function(){var t;return this.path.isAttribute()&&(t=this.model.get("op"),0<=T.call(p,t))},E.prototype.isListConstraint=function(){var t;return this.path.isClass()&&(t=this.model.get("op"),0<=T.call(l,t))},E.prototype.isLookupConstraint=function(){var t;return this.path.isClass()&&(t=this.model.get("op"),0<=T.call(y.TERNARY_OPS,t))},E.prototype.isRangeConstraint=function(){var t;return this.path.isReference()&&(t=this.model.get("op"),0<=T.call(y.RANGE_OPS,t))},E.prototype.getOtherOperators=function(){return x.without(w(this.model.pick("new","path")),this.model.get("op"))},E.prototype.buttons=function(){var t;return null!=this.buttonDelegate?[]:(t=[{key:"conbuilder.Update",classes:"im-update"},{key:"conbuilder.Cancel",classes:"btn-cancel"}],this.model.get("new")?(t[0].key="conbuilder.Add",t[1].classes="im-remove-constraint"):t.push({key:"conbuilder.Remove",classes:"btn btn-default im-remove-constraint"}),t)},E.prototype.getData=function(){var t;return{buttons:this.buttons(),icons:t=a,messages:f,icons:t,otherOperators:this.getOtherOperators(),con:this.model.toJSON()}},E.prototype.template=_,E.prototype.render=function(){return E.__super__.render.apply(this,arguments),this.renderChild("valuecontrols",this.getValueControls(),this.$(".im-value-options")),this.renderChild("error",new s({model:this.model})),null!=this.buttonDelegate&&this.delegateButtonEvents(),this},E.prototype.remove=function(){var t,e;return null!=(t=this.buttonDelegate)&&t.off("click.constraint-editor"),this.$el.slideUp({always:(e=this,function(){return E.__super__.remove.call(e)})})},E)}).call(this)},{"../core-view":3,"../icons":14,"../messages":16,"./attribute-value-controls":113,"./boolean-value-controls":114,"./error-message":137,"./list-value-controls":193,"./lookup-value-controls":194,"./loop-value-controls":195,"./multi-value-controls":198,"./type-value-controls":228,imjs:247,underscore:262}],130:[function(h,p,t){(function(){var t,o,e,s,n,i,r,a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},u=[].slice;function c(){return c.__super__.constructor.apply(this,arguments)}i=h("underscore"),e=h("../messages"),n=h("../templates"),t=h("../core-view"),o=h("../patterns").IS_BLANK,r=h("imjs"),s=r.Query,r.Model,e.set({"consummary.IsA":"is a","consummary.NoValue":"no value"}),p.exports=(function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(c,t),c.prototype.tagName="ol",c.prototype.className="constraint-summary breadcrumb",c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.listenTo(e,"change",this.reRender)},c.prototype.getData=function(){return i.extend(c.__super__.getData.apply(this,arguments),{labels:this.getSummary()})},c.prototype.template=n.template("constraint-summary"),c.prototype.getTitleOp=function(){return this.model.get("op")||e.getText("consummary.IsA")},c.prototype.modelEvents=function(){return{change:this.reRender}},c.prototype.events=function(){return{"click .label-path":function(){return this.state.toggle("showFullPath")}}},c.prototype.stateEvents=function(){return{"change:showFullPath":this.toggleFullPath}},c.prototype.toggleFullPath=function(){return this.$(".label-path").toggleClass("im-show-full-path",!!this.state.get("showFullPath"))},c.prototype.postRender=function(){return this.toggleFullPath()},c.prototype.getTitleVal=function(){var t,e,n,i,r,o;return this.model.has("values")&&(r=this.model.get("op"),0<=l.call(s.MULTIVALUE_OPS.concat(s.RANGE_OPS),r))?(n=this.model.get("values"))?1===n.length?n[0]:0===n.length?"[ ]":5<n.length?n.length+" values":(t=2<=n.length?u.call(n,0,i=n.length-1):(i=0,[]),e=n[i++],t.join(", ")+" and "+e):void 0:this.model.has("value")?this.model.get("value"):null!=(o=this.model.get("typeName"))?o:this.model.get("type")},c.prototype.isLookup=function(){return"LOOKUP"===this.model.get("op")},c.prototype.getPathLabel=function(){var t,e,n,i,r;return n=(i=this.model.toJSON()).title,t=i.displayName,e=i.path,{content:String(null!=(r=null!=n?n:t)?r:e),type:"path"}},c.prototype.getSummary=function(){var t,e,n,i,r;return(t=[]).push(this.getPathLabel()),(n=this.getTitleOp())&&t.push({content:n,type:"op"}),r=this.model.get("op"),l.call(s.NULL_OPS,r)<0&&(null==(i=this.getTitleVal())||o.test(i)?(e=this.model.get("new")?"warning":"error",t.push({content:"NoValue",type:e})):t.push({content:i,type:"value"}),this.isLookup()&&this.model.has("extraValue")&&t.push({content:this.model.get("extraValue"),type:"extra",icon:"ExtraValue"})),t},c)}).call(this)},{"../core-view":3,"../messages":16,"../patterns":64,"../templates":67,imjs:247,underscore:262}],131:[function(a,l,t){(function(){var s,t,e,n,i,r={}.hasOwnProperty;function o(){return o.__super__.constructor.apply(this,arguments)}i=a("underscore"),e=a("../core-view"),n=a("../templates"),t=a("./constraint-adder"),s=a("./active-constraint"),a("../messages/constraints"),l.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,e),o.prototype.className="im-constraints",o.prototype.initialize=function(t){return this.query=t.query,o.__super__.initialize.apply(this,arguments),this.listenTo(this.query,"change:constraints",this.reRender)},o.prototype.getData=function(){return i.extend(o.__super__.getData.apply(this,arguments),{constraints:this.getConstraints()})},o.prototype.events=function(){return{click:function(t){return null!=t?t.stopPropagation():void 0}}},o.prototype.template=n.templateFromParts(["constraints-heading","active-constraints"]),o.prototype.postRender=function(){var t,e,n,i,r,o;for(e=this.$(".im-active-constraints"),n=i=0,r=(o=this.getConstraints()).length;i<r;n=++i)t=o[n],this.renderChild("con_"+n,new s({query:this.query,constraint:t}),e);return this.renderChild("conAdder",this.getConAdder())},o.prototype.getConstraints=function(){return this.query.constraints.slice()},o.prototype.getConAdder=function(){return new t({query:this.query})},o)}).call(this)},{"../core-view":3,"../messages/constraints":21,"../templates":67,"./active-constraint":112,"./constraint-adder":128,underscore:262}],132:[function(s,a,t){(function(){var t,e,n,i,r={}.hasOwnProperty;function o(){return o.__super__.constructor.apply(this,arguments)}i=s("underscore"),t=s("../../core-view"),e=s("../../messages"),n=s("../../models/path"),s("../../messages/constraints"),a.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,t),o.prototype.Model=n,o.prototype.tagName="button",o.prototype.className="btn btn-primary im-add-constraint",o.prototype.optionalParameters=["hideType"],o.prototype.hideType=!1,o.prototype.template=function(t){return i.escape(e.getText("constraints.AddConFor",t))},o.prototype.getData=function(){return i.extend(o.__super__.getData.apply(this,arguments),{hideType:this.hideType})},o.prototype.modelEvents=function(){return{change:this.reRender}},o.prototype.events=function(){return{click:function(){return this.trigger("chosen",this.model.get("path"))}}},o)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/constraints":21,"../../models/path":56,underscore:262}],133:[function(c,g,t){(function(){function t(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var h,e,n,p,f,d,s,i,r={}.hasOwnProperty,m=[].slice;function o(){return o.__super__.constructor.apply(this,arguments)}function a(){return a.__super__.constructor.apply(this,arguments)}function l(){return l.__super__.constructor.apply(this,arguments)}function u(){return u.__super__.constructor.apply(this,arguments)}i=c("underscore"),n=c("../../core-view"),d=c("../../models/path"),c("../../templates"),c("../../messages"),e=c("../constraint-adder"),h=c("./column-adder-button"),c("../../messages/constraints"),t(o,n),o.prototype.className="btn-group",o.prototype.parameters=["main","options"],o.prototype.initState=function(){return this.state.set({open:!1})},o.prototype.stateEvents=function(){return{"change:open":this.toggleOpen}},o.prototype.toggleOpen=function(){return this.$el.toggleClass("open",this.state.get("open"))},o.prototype.ICONS="NONE",o.prototype.postRender=function(){var t,e,n,i,r,o;for(this.toggleOpen(),this.renderChild("main",this.main),this.renderChild("toggle",new s({state:this.state})),(n=document.createElement("ul")).className="dropdown-menu",t=i=0,r=(o=this.options).length;i<r;t=++i)e=o[t],this.renderChild(t,e,n);return this.$el.append(n)},p=o,t(a,n),a.prototype.tagName="button",a.prototype.className="btn btn-primary dropdown-toggle",a.prototype.ICONS="NONE",a.prototype.template=i.template('<span class="caret"></span>\n<span class="sr-only"><%- Messages.getText(\'constraints.OtherPaths\') %></span>'),a.prototype.events=function(){return{click:function(){return this.state.toggle("open")}}},s=a,t(l,h),l.prototype.tagName="li",l.prototype.className="",l.prototype.template=function(){return"<a>"+l.__super__.template.apply(this,arguments)+"</a>"},f=l,g.exports=(t(u,e),u.prototype.parameters=["query","paths"],u.prototype.onChosen=function(t){return this.model.set({constraint:{path:t}})},u.prototype.renderOptions=function(){},u.prototype.showTree=function(){var t,e,n,i,r,o,s,a,l,u,c;for(r=(u=this.paths)[0],s=2<=u.length?m.call(u,1):[],n=new h({hideType:!0,model:new d(r)}),i=function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)o=s[t],n.push(new f({hideType:!0,model:new d(o)}));return n}(),e=new p({main:n,options:i}),a=0,l=(c=[n].concat(m.call(i))).length;a<l;a++)t=c[a],this.listenTo(t,"chosen",this.onChosen);return this.renderChild("tree",e,this.$(".im-constraint-adder-options"))},u)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/constraints":21,"../../models/path":56,"../../templates":67,"../constraint-adder":128,"./column-adder-button":132,underscore:262}],134:[function(o,s,t){(function(){var e,t,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}o("underscore"),o("../../core-view"),n=o("../../models/path"),o("../../templates"),o("../../messages"),t=o("../constraint-adder"),e=o("./column-adder-button"),o("../../messages/constraints"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.parameters=["query","path"],i.prototype.initialize=function(){var t;return i.__super__.initialize.apply(this,arguments),t={path:this.path},this.model.set({constraint:t})},i.prototype.events=function(){return{"click .im-add-constraint":this.act}},i.prototype.act=function(){return this.hideTree(),this.renderConstraintEditor()},i.prototype.renderOptions=function(){},i.prototype.showTree=function(){var t;return t=new n(this.query.makePath(this.path)),new e({model:t}),this.renderChild("tree",new e({model:t}),this.$(".im-constraint-adder-options"))},i)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/constraints":21,"../../models/path":56,"../../templates":67,"../constraint-adder":128,"./column-adder-button":132,underscore:262}],135:[function(n,i,t){(function(){var o,t,s,r={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}t=n("../constraints"),s=n("./single-column-adder"),o=n("./composed-column-adder"),i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.getConAdder=function(){var t,e,n,i,r;if(this.shouldShowAdder())return i=(r=this.model.attributes).replaces,t=r.isComposed,e=r.outerJoined,n=this.model.pathInfo(),t&&1<i.length?new o({query:this.query,paths:i}):e?new o({query:this.query,paths:[n].concat(i)}):new s({query:this.query,path:n})},e.prototype.shouldShowAdder=function(){var t,e,n,i;return e=(i=this.model.attributes).numeric,t=i.isComposed,n=i.outerJoined,e||t||n||!this.getConstraints().length},e.prototype.getConstraints=function(){var t,e,n,i,r,o;for(e=this.model.get("path"),o=[],n=0,i=(r=this.query.constraints).length;n<i;n++)(t=r[n]).path.match(e)&&o.push(t);return o},e)}).call(this)},{"../constraints":131,"./composed-column-adder":133,"./single-column-adder":134}],136:[function(p,f,t){(function(){var n,e,t,i,r,o,s,a,l,u,c={}.hasOwnProperty;function h(){return h.__super__.constructor.apply(this,arguments)}u=p("underscore"),t=p("../core-view"),i=p("../models/history"),a=p("../models/table"),o=p("../models/selected-objects"),n=p("../utils/events").Bus,e=p("../utils/children"),l=p("../core/type-assertions"),s=p("./table"),r=p("./query-tools"),f.exports=(function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(h,t),h.prototype.tagName="div",h.prototype.className="imtables-dashboard container-fluid",h.prototype.Model=a,h.prototype.optionalParameters=["consumerContainer","consumerBtnClass"],h.prototype.initialize=function(t){var e;if(e=t.query,!l.Query.test(e)&&null==e)throw new Error("Bad arguments to Dashboard - {query :: imjs.Query} is required");if(h.__super__.initialize.apply(this,arguments),this.history=new i,this.bus=new n,this.history.setInitialState(e),this.selectedObjects=new o(e.service),null!=this.consumerContainer&&u.isString(this.consumerContainer)&&(this.consumerContainer=document.querySelector(this.consumerContainer),!this.consumerContainer))return console.log("consumerContainer provided as selector - but no matching element was found")},h.prototype.renderChildren=function(){return this.renderQueryTools(),this.renderTable()},h.prototype.renderTable=function(){var t;return t=e.createChild(this,s),this.renderChild("table",t)},h.prototype.renderQueryTools=function(){var t;return t=e.createChild(this,r,{tableState:this.model}),this.renderChild("tools",t)},h.prototype.remove=function(){return this.bus.destroy(),this.history.close(),h.__super__.remove.apply(this,arguments)},h)}).call(this)},{"../core-view":3,"../core/type-assertions":10,"../models/history":45,"../models/selected-objects":58,"../models/table":61,"../utils/children":76,"../utils/events":81,"./query-tools":208,"./table":209,underscore:262}],137:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}o("underscore"),o("fs"),t=o("../core-view"),e=o("../icons"),n=o("../templates"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.className="im-error-message",i.prototype.modelEvents=function(){return{"change:error":this.reRender}},i.prototype.getData=function(){return{icons:e,error:this.model.get("error")}},i.prototype.logError=function(){var t;if(t=this.model.get("error"))return console.error(t,t.stack)},i.prototype.template=n.template("error-message"),i)}).call(this)},{"../core-view":3,"../icons":14,"../templates":67,fs:263,underscore:262}],138:[function(P,I,t){(function(){function t(t,e){for(var n in e)M.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}function e(t,e){return function(){return t.apply(e,arguments)}}var n,i,r,o,s,a,l,u,c,h,p,f,d,m,g,y,v,_,b,w,x,C,T,S,E,k,N,M={}.hasOwnProperty;function D(t){this.key="export.error."+t,this.message=d.get(this.key)}function A(){return A.__super__.constructor.apply(this,arguments)}function O(){return this.onUploadError=e(this.onUploadError,this),this.onUploadProgress=e(this.onUploadProgress,this),this.onUploadComplete=e(this.onUploadComplete,this),O.__super__.constructor.apply(this,arguments)}N=P("underscore"),P("jquery"),g=P("../core-model"),m=P("./modal"),P("./constraint-adder"),d=P("../messages"),w=P("../templates"),y=P("../options"),c=P("../models/export-formats"),b=P("../mixins/runs-query"),f=P("./export-dialogue/tab-menu"),u=P("./export-dialogue/format-controls"),_=P("./export-dialogue/row-controls"),n=P("./export-dialogue/column-controls"),i=P("./export-dialogue/compression-controls"),l=P("./export-dialogue/flat-file-options"),p=P("./export-dialogue/json-options"),a=P("./export-dialogue/fasta-options"),r=P("./export-dialogue/destination-options"),v=P("./export-dialogue/preview"),P("../utils/open-window-with-post"),T=P("../utils/send-to-dropbox"),k=P("../utils/send-to-google-drive"),S=P("../utils/send-to-galaxy"),E=P("../utils/send-to-genomespace"),h={doneness:null,tab:"dest",dest:"download",linkToFile:null},s=["progress_bar","modal_error","export_dialogue_footer"],D.prototype.cannotDismiss=!0,x=D,t(A,g),A.prototype.defaults=function(){return{filename:"results",format:c.getFormat("tab"),tablePage:null,start:0,columns:[],size:null,max:null,compress:!1,compression:"gzip",headers:!1,jsonFormat:"rows",fastaExtension:null,headerType:"friendly"}},o=A,C=function(e){return function(t){return t.isa(e)}},I.exports=(t(O,m),O.include(b),O.prototype.Model=o,O.prototype.className=function(){return"im-export-dialogue "+O.__super__.className.apply(this,arguments)},O.prototype.parameters=["query"],O.prototype.initialize=function(){return O.__super__.initialize.apply(this,arguments),this.model.has("format")&&!this.model.get("format").ext&&this.model.set({format:c.getFormat(this.model.get("format"))}),this.state.set(h),this.listenTo(this.state,"change:tab",this.renderMain),this.listenTo(this.model,"change",this.updateState),this.listenTo(this.model,"change:columns",this.setMax),this.listenTo(this.model,"change:format",this.onChangeFormat),this.categoriseQuery(),this.model.set({columns:this.query.views}),null!=this.query.name&&this.model.set({filename:this.query.name.replace(/\s+/g,"_")}),this.updateState(),this.setMax(),this.readUserPreferences()},O.prototype.onChangeFormat=function(){return N.defer((f=this,function(){var t,e,n,i,r,o,s,a,l,u,c,h,p;if(n=f.model.get("format"),t=f.model.get("columns"),null!=(h=n.needs)?h.length:void 0){for(s=t.slice(),r=[],u=0,c=(p=f.query.views).length;u<c;u++)l=p[u],a=f.query.makePath(l).getParent(),N.any(n.needs,function(t){return a.isa(t)})&&r.push(a.append("id").toString());return o=N.uniq(r),f.model.set({nodecolumns:o}),e=(i=n.maxColumns)?N.first(o,i):o.slice(),f.model.set({columns:e}),f.model.once("change:format",function(){return f.model.set({columns:s}),f.model.unset("nodecolumns")})}}));var f},O.prototype.readUserPreferences=function(){return this.query.service.whoami().then(function(t){var e;if(t.hasPreferences)return(e=t.preferences["galaxy-url"])?y.set("Destination.Galaxy.Current",e):void 0})},O.prototype.setMax=function(){return this.getEstimatedSize().then((e=this,function(t){return e.model.set({max:t})}));var e},O.prototype.categoriseQuery=function(){var t,e,n,i;for(e in n=this.query.getViewNodes(),t={},i=this.query.model.classes)i[e],t[e]=N.any(n,C(e));return this.model.set({has:t})},O.prototype.title=function(){return d.getText("ExportTitle",{name:this.query.name})},O.prototype.modalSize="lg",O.prototype.primaryAction=function(){return d.getText(this.state.get("dest"))},O.prototype.primaryIcon=function(){return this.state.get("dest")},O.prototype.body=w.template("export_dialogue"),O.prototype.footer=w.templateFromParts(s),O.prototype.updateState=function(){var t,e,n,i,r,o,s,a,l;return n=(l=this.model.toJSON()).compress,i=l.compression,a=l.start,l.size,s=l.max,o=l.format,e=l.columns,t=N.isEqual(e,this.query.views)?d.get("All"):e.length,this.getRowCount(),r=0===e.length?new x("NoColumnsSelected"):s<=a?new x("OffsetOutOfBounds"):null,this.state.set(this.model.pick("headers","headerType","jsonFormat","fastaExtension")),this.state.set({error:r,format:o,max:s,exportURI:this.getExportURI(),rowCount:this.getRowCount(),compression:n?i:null,columns:t})},O.prototype.getRowCount=function(){var t,e,n,i;return n=(i=this.model.pick("start","size","max")).start,e=i.size,t=i.max,null==n&&(n=0),t-=null!=n?n:0,e=null!=e&&0<e?e:t,Math.min(t,e)},O.prototype.getMain=function(){switch(this.state.get("tab")){case"format":return u;case"columns":return n;case"compression":return i;case"column-headers":return l;case"opts-json":return p;case"opts-fasta":return a;case"dest":return r;case"rows":return _;case"preview":return v;default:return u}},O.prototype.onUploadComplete=function(t){return this.state.set({doneness:null,linkToFile:t})},O.prototype.onUploadProgress=function(t){return this.state.set({doneness:t})},O.prototype.onUploadError=function(t){return this.state.set({doneness:null,error:t}),console.error(t)},O.prototype.act=function(){var t,e,n,i,r,o,s,a,l,u,c;if(this.onUploadProgress(0),e=this.getExporter(),r=this.model,l=this.state,a=this.query,t={model:r.toJSON(),state:l.toJSON(),query:a.clone()},u=this.getExportURI(),i=this.getFileName(),o=this.onUploadProgress,(n=e.call(t,u,i,o)).then(this.onUploadComplete,this.onUploadError),null!=e.after)return s=e.after.bind(t),n.then(s,s).then(null,(c=this,function(t){return c.state.set({error:t})}))},O.prototype.getExporter=function(){switch(this.state.get("dest")){case"download":return function(){return Promise.resolve(null)};case"Dropbox":return T;case"Drive":return k;case"Galaxy":return S;case"GenomeSpace":return E;default:throw new Error("Cannot export to "+this.state.get("dest"))}},O.prototype.events=function(){var t;return(t=O.__super__.events.apply(this,arguments)).keyup="handleKeyup",t},O.prototype.handleKeyup=function(t){var e,n;if(!this.$(t.target).is("input"))switch(t.which){case 40:return null!=(e=this.children.menu)?e.next():void 0;case 38:return null!=(n=this.children.menu)?n.prev():void 0}},O.prototype.renderMain=function(){var t;return t=this.getMain(),this.renderChild("main",new t({model:this.model,query:this.query,state:this.state}),this.$("div.main"))},O.prototype.postRender=function(){return this.renderChild("menu",new f({model:this.state}),this.$("nav.menu")),this.renderMain(),this.$el.focus(),O.__super__.postRender.apply(this,arguments)},O)}).call(this)},{"../core-model":2,"../messages":16,"../mixins/runs-query":33,"../models/export-formats":42,"../options":63,"../templates":67,"../utils/open-window-with-post":94,"../utils/send-to-dropbox":100,"../utils/send-to-galaxy":101,"../utils/send-to-genomespace":102,"../utils/send-to-google-drive":103,"./constraint-adder":128,"./export-dialogue/column-controls":140,"./export-dialogue/compression-controls":141,"./export-dialogue/destination-options":142,"./export-dialogue/fasta-options":143,"./export-dialogue/flat-file-options":144,"./export-dialogue/format-controls":145,"./export-dialogue/json-options":146,"./export-dialogue/preview":148,"./export-dialogue/row-controls":149,"./export-dialogue/tab-menu":150,"./modal":197,jquery:256,underscore:262}],139:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}o("underscore"),n=o("../query-dialogue-button"),e=o("../export-dialogue"),t=o("../../utils/count-executor"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,n),i.prototype.className="im-export-dialogue-button",i.prototype.longLabel="export.ExportQuery",i.prototype.shortLabel="export.Export",i.prototype.icon="Download",i.prototype.optionalParameters=["tableState"],i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),t.count(this.query).then((n=this,function(t){return n.state.set({disabled:0===t})})).then(null,(e=this,function(t){return e.state.set({disabled:!0,error:t})}));var e,n},i.prototype.initState=function(){return this.state.set({name:this.query.name})},i.prototype.dialogueOptions=function(){var t,e;return t=null!=(e=this.tableState)?e.pick("start","size"):void 0,{query:this.query,model:{tablePage:t}}},i.prototype.Dialogue=e,i)}).call(this)},{"../../utils/count-executor":77,"../export-dialogue":138,"../query-dialogue-button":206,underscore:262}],140:[function(_,b,t){(function(){function t(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,r,n,i,o,g,s,a,l,u,y,c={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function p(){return p.__super__.constructor.apply(this,arguments)}function f(){return f.__super__.constructor.apply(this,arguments)}function d(){return d.__super__.constructor.apply(this,arguments)}function m(){return m.__super__.constructor.apply(this,arguments)}function v(){return v.__super__.constructor.apply(this,arguments)}y=_("underscore"),l=_("../../core-view"),g=_("../../models/path-set"),i=_("../label-view"),o=_("../../messages"),a=_("../../templates"),n=_("../../mixins/has-typeaheads"),u=_("../../utils/path-suggester"),t(p,i),p.prototype.template=y.partial(o.getText,"export.category.Columns"),t(f,l),f.include(n),f.prototype.initialize=function(t){return this.columns=t.columns,this.query=t.query,f.__super__.initialize.apply(this,arguments),this.initSuggestions()},f.prototype.addSuggestion=function(t){var n;if(!this.columns.contains(t))return this.suggestions.add(t),n=this.suggestions.get(t),t.getDisplayName(function(t,e){return n.set({error:t,name:e})})},f.prototype.initSuggestions=function(){var r,o,t,e,n,i;for(this.suggestions=new g,i=[],e=0,n=(t=this.query.getQueryNodes()).length;e<n;e++)o=t[e],i.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=o.getChildNodes()).length;t<e;t++)(r=n[t]).isAttribute()&&(this.columns.contains(r)?i.push(void 0):i.push(this.addSuggestion(r)));return i}.call(this));return i},f.prototype.postRender=function(){var t,e,n,i;return e=this.$("input"),n={minLength:1,highlight:!0},t={name:"view_suggestions",source:u(this.suggestions),displayKey:"name"},this.activateTypeahead(e,n,t,"Additional paths",(i=this,function(t,e){var n;return n=e.item,i.columns.add(n,{active:!0})})),this.$(".im-help").tooltip()},f.prototype.className="col-sm-8",f.prototype.template=a.template("export_add_column_control"),e=f,t(d,l),d.prototype.className="col-sm-4",d.prototype.RERENDER_EVENT="change:isAll",d.prototype.initialize=function(t){return this.query=t.query,this.columns=t.columns,d.__super__.initialize.apply(this,arguments),this.setIsAll(),this.listenTo(this.columns,"change:active",this.setIsAll)},d.prototype.setIsAll=function(){var r,t,e;return e=this.query.views,t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.columns.where({active:!0})).length;t<e;t++)r=n[t],i.push(r.get("item").toString());return i}.call(this),this.model.set({isAll:y.isEqual(e,t)})},d.prototype.template=a.template("reset_button"),d.prototype.events=function(){return{"click button":"reset"}},d.prototype.reset=function(){var n;return n=this.query.views,this.columns.each(function(t){var e;return e=t.get("item").toString(),t.set({active:y.any(n,function(t){return t===e})})})},s=d,t(m,l),m.prototype.RERENDER_EVENT="change",m.prototype.initialize=function(){var t,e,n;if(m.__super__.initialize.apply(this,arguments),this.model.has("active")||this.model.set({active:!0}),!this.model.has("name"))return this.model.set({name:null}),t=this.model.get("item"),"id"===(null!=(e=this.model.get("item").end)?e.name:void 0)&&(t=t.getParent()),t.getDisplayName((n=this,function(t,e){return n.model.set({error:t,name:e})}))},m.prototype.className="list-group-item",m.prototype.events=function(){return{"click .im-active-state":(t=this,function(){return t.model.toggle("active")})};var t},m.prototype.tagName="li",m.prototype.template=a.template("export_column_control"),r=m,b.exports=(t(v,l),v.prototype.className="container-fluid",v.prototype.initialize=function(t){var e,n,i,r,o,s,a,l,u,c,h,p,f,d,m;if(this.query=t.query,v.__super__.initialize.apply(this,arguments),this.columns=new g,i=this.model.get("format"),e=this.model.get("columns"),!(null!=(d=i.needs)?d.length:void 0))for(l=0,h=(m=this.query.views).length;l<h;l++)a=m[l],s=this.query.makePath(a),this.columns.add(s,{active:y.any(e,function(t){return t===a})});for(u=0,p=e.length;u<p;u++)n=e[u],this.columns.add(this.query.makePath(n),{active:!0});if(o=this.model.get("nodecolumns"))for(c=0,f=o.length;c<f;c++)r=o[c],this.columns.add(this.query.makePath(r),{active:!1});return this.listenTo(this.columns,"add remove reset change:active",this.setColumns),this.listenTo(this.columns,"add remove reset",this.reRender)},v.prototype.setColumns=function(t){var o,s,e,i,n,a;return s=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.columns.where({active:!0})).length;t<e;t++)o=n[t],i.push(o.get("item").toString());return i}.call(this),(e=this.model.get("format").maxColumns)&&null!=t&&s.length>e&&(i=t.get("item").toString(),n=function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)(o=s[t])!==i&&n.push(o);return n}(),s=[i].concat(y.first(n,e-1)),y.defer((a=this,function(){var t,e,n,i,r;for(r=[],t=0,e=(n=a.columns.where({active:!0})).length;t<e;t++)o=n[t],r.push(o.set({active:(i=o.get("item").toString(),0<=h.call(s,i))}));return r}))),this.model.set({columns:s})},v.prototype.tagName="form",v.prototype.template=a.template("export_column_controls"),v.prototype.postRender=function(){var t,n,i;return n=this.$("ul"),t=this.$(".controls"),this.columns.each((i=this,function(t,e){return i.renderChild(e,new r({model:t}),n)})),this.renderChild("reset",new s({query:this.query,columns:this.columns}),t),this.renderChild("add",new e({query:this.query,columns:this.columns}),t)},v)}).call(this)},{"../../core-view":3,"../../messages":16,"../../mixins/has-typeaheads":32,"../../models/path-set":55,"../../templates":67,"../../utils/path-suggester":96,"../label-view":179,underscore:262}],141:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}i("underscore"),t=i("./main"),e=i("../../templates"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.RERENDER_EVENT="change",n.prototype.tagName="form",n.prototype.template=e.template("export_compression_controls"),n.prototype.setCompression=function(t){return e=this,function(){return e.model.set({compression:t})};var e},n.prototype.events=function(){return{"click .im-compress":(t=this,function(){return t.model.toggle("compress")}),"click input[name=gzip]":this.setCompression("gzip"),"click input[name=zip]":this.setCompression("zip")};var t},n)}).call(this)},{"../../templates":67,"./main":147,underscore:262}],142:[function(p,f,t){(function(){function t(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,s,o,i,r,a,l={}.hasOwnProperty;function u(){return u.__super__.constructor.apply(this,arguments)}function c(){return c.__super__.constructor.apply(this,arguments)}function h(){return h.__super__.constructor.apply(this,arguments)}a=p("underscore"),e=p("../../core-view"),r=p("../../templates"),o=p("../../options"),s=p("../../models/export-formats"),t(u,e),u.prototype.RERENDER_EVENT="change:dest",u.prototype.initialize=function(){return u.__super__.initialize.apply(this,arguments),this.listenTo(o,"change:Destination.Galaxy.*",this.reRender)},u.prototype.getData=function(){return a.extend(u.__super__.getData.apply(this,arguments),{Galaxy:o.get("Destination.Galaxy")})},u.prototype.getTemplate=function(){switch(this.model.get("dest")){case"Galaxy":return this.galaxyTemplate;default:return function(){return""}}},u.prototype.galaxyTemplate=r.template("export_destination_galaxy_options"),u.prototype.template=function(t){return this.getTemplate()(t)},u.prototype.events=function(){return{"change .im-galaxy-uri-param":"setGalaxyUri","change .im-save-galaxy input":"toggleSaveGalaxy"}},u.prototype.setGalaxyUri=function(t){var e;return e=t.target,o.set("Destination.Galaxy.Current",e.value)},u.prototype.toggleSaveGalaxy=function(){var t,e;return e="Destination.Galaxy.Save",t=o.get(e),o.set(e,!t)},n=u,t(c,e),c.prototype.RERENDER_EVENT="change:dest",c.prototype.destinations=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=o.get("Destinations")).length;e<n;e++)t=i[e],o.get(["Destination",t,"Enabled"])&&r.push(t);return r},c.prototype.getData=function(){return a.extend({destinations:this.destinations()},c.__super__.getData.apply(this,arguments))},c.prototype.template=r.template("export_destination_radios"),c.prototype.setDest=function(t){return e=this,function(){return e.model.set({dest:t})};var e},c.prototype.events=function(){var r;return a.object(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.destinations()).length;t<e;t++)r=n[t],i.push(["click .im-dest-"+r,this.setDest(r)]);return i}.call(this))},i=c,f.exports=(t(h,e),h.prototype.RERENDER_EVENT="change:format",h.prototype.getData=function(){var t,e;return e=this.model.get("has"),t=s.getFormats(e),a.extend({formats:t},h.__super__.getData.apply(this,arguments))},h.prototype.template=r.template("export_destination_options"),h.prototype.postRender=function(){return this.renderChildAt(".im-param-dest",new i({model:this.state})),this.renderChildAt(".im-dest-opts",new n({model:this.state}))},h.prototype.events=function(){var t,e,n,i,r,o;for(t={".change .im-param-name input":"setName"},n=this.model.get("has"),i=0,r=(o=s.getFormats(n)).length;i<r;i++)t["click .im-fmt-"+(e=o[i]).id]=this.setFormat.bind(this,e);return t},h.prototype.setName=function(t){return this.model.set({filename:t.target.value})},h.prototype.setFormat=function(t){return this.model.set({format:t})},h)}).call(this)},{"../../core-view":3,"../../models/export-formats":42,"../../options":63,"../../templates":67,underscore:262}],143:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}i("underscore"),e=i("../../core-view"),i("../label-view"),i("../../messages"),t=i("../../templates"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,e),n.prototype.RERENDER_EVENT="change",n.prototype.tagName="form",n.prototype.template=t.template("export_fasta_options"),n.prototype.setFastaExtension=function(t){return this.model.set({fastaExtension:t})},n.prototype.events=function(){return{"change .im-fasta-ext":(e=this,function(t){return e.setFastaExtension(t.target.value)})};var e},n)}).call(this)},{"../../core-view":3,"../../messages":16,"../../templates":67,"../label-view":179,underscore:262}],144:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}i("underscore"),e=i("../../core-view"),t=i("../../templates"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,e),n.prototype.RERENDER_EVENT="change",n.prototype.tagName="form",n.prototype.template=t.template("export_flat_file_options"),n.prototype.setHeaderType=function(t){return e=this,function(){return e.model.set({headerType:t})};var e},n.prototype.events=function(){return{"click .im-headers":(t=this,function(){return t.model.toggle("headers")}),"click input[name=hdrs-friendly]":this.setHeaderType("friendly"),"click input[name=hdrs-path]":this.setHeaderType("path")};var t},n)}).call(this)},{"../../core-view":3,"../../templates":67,underscore:262}],145:[function(h,p,t){(function(){function t(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var n,e,i,r,o,s,a,l={}.hasOwnProperty;function u(){return u.__super__.constructor.apply(this,arguments)}function c(){return c.__super__.constructor.apply(this,arguments)}a=h("underscore"),s=h("../../core-view"),r=h("../../messages"),o=h("../../templates"),i=h("../label-view"),n=h("../../models/export-formats"),t(u,i),u.prototype.template=a.partial(r.getText,"export.category.Format"),e=u,p.exports=(t(c,s),c.prototype.tagName="form",c.prototype.template=o.template("export_format_controls"),c.prototype.getData=function(){var t,e;return e=this.model.get("has"),t=n.getFormats(e),a.extend({formats:t},c.__super__.getData.apply(this,arguments))},c.prototype.events=function(){return{"change input:radio":"onChangeFormat"}},c.prototype.onChangeFormat=function(){return this.model.set({format:this.$("input:radio:checked").val()})},c.prototype.postRender=function(){return this.renderChild("heading",new e({model:this.model}),this.$(".im-title"))},c)}).call(this)},{"../../core-view":3,"../../messages":16,"../../models/export-formats":42,"../../templates":67,"../label-view":179,underscore:262}],146:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}i("underscore"),e=i("../../core-view"),i("../label-view"),i("../../messages"),t=i("../../templates"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,e),n.prototype.RERENDER_EVENT="change",n.prototype.tagName="form",n.prototype.template=t.template("export_json_options"),n.prototype.setJSONFormat=function(t){return e=this,function(){return e.model.set({jsonFormat:t})};var e},n.prototype.events=function(){return{"click input[name=rows]":this.setJSONFormat("rows"),"click input[name=objects]":this.setJSONFormat("objects")}},n)}).call(this)},{"../../core-view":3,"../../messages":16,"../../templates":67,"../label-view":179,underscore:262}],147:[function(n,i,t){(function(){var t,r={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}t=n("../../core-view"),i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.initialize=function(t){return this.query=t.query,e.__super__.initialize.apply(this,arguments)},e)}).call(this)},{"../../core-view":3}],148:[function(l,u,t){(function(){var t,n,i,e,r,o,s={}.hasOwnProperty;function a(){return a.__super__.constructor.apply(this,arguments)}o=l("underscore"),t=l("../../core-view"),l("../../messages"),r=l("../../templates"),n=l("../../models/export-formats"),e=l("../../mixins/runs-query"),i={compress:null,size:3},u.exports=(function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(a,t),a.include(e),a.prototype.initialize=function(t){return this.query=t.query,a.__super__.initialize.apply(this,arguments),this.state.set({preview:""}),this.setPreview(),this.listenTo(this.state,"change:preview",this.reRender),this.listenTo(this.model,"change:format",this.setPreview)},a.prototype.setPreview=function(){var e;return"bio"===this.model.get("format").group?this.state.set({preview:"Previews are not supported for bio-informatics formats"}):this.runQuery(i).then((e=this,function(t){return o.isString(t)?e.state.set({preview:t}):e.state.set({preview:JSON.stringify(t,null,2)})}))},a.prototype.template=r.template("export_preview"),a.prototype.getData=function(){var t,e;return e=this.model.get("has"),t=n.getFormats(e),o.extend({formats:t},a.__super__.getData.apply(this,arguments))},a.prototype.events=function(){return{"change .im-export-formats select":"setFormat"}},a.prototype.setFormat=function(t){return this.model.set({format:n.getFormat(t.target.value)})},a)}).call(this)},{"../../core-view":3,"../../messages":16,"../../mixins/runs-query":33,"../../models/export-formats":42,"../../templates":67,underscore:262}],149:[function(g,y,t){(function(){function t(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,r,o,s,a,l,u,c={}.hasOwnProperty;function h(){return h.__super__.constructor.apply(this,arguments)}function p(){return p.__super__.constructor.apply(this,arguments)}function f(){return f.__super__.constructor.apply(this,arguments)}function d(){return d.__super__.constructor.apply(this,arguments)}function m(){return m.__super__.constructor.apply(this,arguments)}u=g("underscore"),l=g("../../core-view"),n=g("../label-view"),i=g("../../messages"),a=g("../../templates"),t(h,n),h.prototype.getData=function(){return{size:this.model.get("size")||i.getText("rows.All")}},h.prototype.template=u.partial(i.getText,"export.param.Size"),s=h,t(p,n),p.prototype.template=u.partial(i.getText,"export.param.Start"),r=p,t(f,n),f.prototype.template=u.partial(i.getText,"export.category.Rows"),e=f,t(d,l),d.prototype.RERENDER_EVENT="change",d.prototype.getData=function(){return u.extend(d.__super__.getData.apply(this,arguments),{isAll:!(this.model.get("start")||this.model.get("size"))})},d.prototype.template=a.template("export_rows_reset_button"),d.prototype.events=function(){return{"click .btn-reset":"reset","click .im-set-table-page":"setTablePage"}},d.prototype.reset=function(){return this.model.set({start:0,size:null})},d.prototype.setTablePage=function(){return this.model.set(this.model.get("tablePage"))},o=d,y.exports=(t(m,l),m.prototype.RERENDER_EVENT="change:max",m.prototype.initialize=function(){return m.__super__.initialize.apply(this,arguments),this.model.has("max")||this.model.set({max:null}),this.listenTo(this.model,"change:size",this.updateLabels),this.listenTo(this.model,"change:size change:start",this.updateInputs)},m.prototype.tagName="form",m.prototype.template=a.template("export_row_controls"),m.prototype.events=function(){return{"input input[name=size]":"onChangeSize","input input[name=start]":"onChangeStart"}},m.prototype.updateInputs=function(){var t,e,n,i;return n=(i=this.model.toJSON()).start,e=i.size,t=i.max,this.$("input[name=size]").val(e||t),this.$("input[name=start]").val(n)},m.prototype.onChangeSize=function(){var t;return(t=parseInt(this.$("input[name=size]").val(),10))&&t!==this.model.get("max")?this.model.set({size:t}):this.model.set({size:null})},m.prototype.onChangeStart=function(){return this.model.set({start:parseInt(this.$("input[name=start]").val(),10)})},m.prototype.postRender=function(){return this.renderChild("heading",new e({model:this.state}),this.$(".im-title")),this.renderChild("size",new s({model:this.model}),this.$(".size-label")),this.renderChild("start",new r({model:this.model}),this.$(".start-label")),this.renderChild("reset",new o({model:this.model}),this.$(".im-reset"))},m)}).call(this)},{"../../core-view":3,"../../messages":16,"../../templates":67,"../label-view":179,underscore:262}],150:[function(c,h,t){(function(){var e,o,t,n,i,s,r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},a={}.hasOwnProperty;function l(t,e,n,i){this.ident=t,this.formats=null!=n?n:[],this.groups=null!=i?i:null,this.key="export.category."+e}function u(){return u.__super__.constructor.apply(this,arguments)}s=c("underscore"),i=c("../../core-view"),e=c("../../options"),n=c("../../templates"),l.prototype.isFor=function(t){var e;return this.formats.length?(e=t.ext,0<=r.call(this.formats,e)):null==this.groups||this.groups[t.group]},o=[new(t=l)("dest","Destination"),new t("opts-json","JsonFormat",["json"]),new t("opts-fasta","FastaFormat",["fasta"]),new t("columns","Columns"),new t("rows","Rows",[],{flat:!0,machine:!0}),new t("compression","Compression"),new t("column-headers","ColumnHeaders",["tsv","csv"]),new t("preview","Preview")],h.exports=(function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(u,i),u.prototype.tagName="ul",u.prototype.RERENDER_EVENT="change",u.prototype.className="nav nav-pills nav-stacked im-export-tab-menu",u.prototype.template=n.template("export_tab_menu",{variable:"data"}),u.prototype.getTabs=function(){var t,e,n,i;for(i=[],e=0,n=o.length;e<n;e++)(t=o[e]).isFor(this.model.get("format"))&&i.push(t);return i},u.prototype.getData=function(){var t;return t=this.getTabs(),s.extend({tabs:t},u.__super__.getData.apply(this,arguments))},u.prototype.setTab=function(t){return e=this,function(){if(!e.state.get("pinned"))return e.model.set({tab:t})};var e},u.prototype.setPinned=function(t){return e=this,function(){return e.state.get("pinned")===t?e.state.set({pinned:!1}):e.state.set({pinned:t}),e.model.set({tab:t})};var e},u.prototype.next=function(){var t,r,e;return e=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getTabs()).length;t<e;t++)r=n[t],i.push(r.ident);return i}.call(this),(t=s.indexOf(e,this.model.get("tab"))+1)===e.length&&(t=0),this.model.set({tab:e[t]})},u.prototype.prev=function(){var t,e,r,n;return n=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getTabs()).length;t<e;t++)r=n[t],i.push(r.ident);return i}.call(this),e=0===(t=s.indexOf(n,this.model.get("tab")))?n.length-1:t-1,this.model.set({tab:n[e]})},u.prototype.events=function(){var t,i,r;return i=e.get("Events.ActivateTab"),t=s.object(function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)r=o[t].ident,n.push([i+" .im-tab-"+r,this.setTab(r)]);return n}.call(this)),"mouseenter"===i&&s.extend(t,s.object(function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)r=o[t].ident,n.push(["click .im-tab-"+r,this.setPinned(r)]);return n}.call(this))),t},u)}).call(this)},{"../../core-view":3,"../../options":63,"../../templates":67,underscore:262}],151:[function(h,p,t){(function(){var t,e,n,i,r,o,s,a,l,u={}.hasOwnProperty;function c(){return this.Model=function(t,e){return function(){return t.apply(e,arguments)}}(this.Model,this),c.__super__.constructor.apply(this,arguments)}h("../../event"),t=h("../../core-view"),r=h("../../options"),s=h("../../mixins/sets-path-names"),l=h("../../models/summary-items"),i=h("../../models/numeric-range"),a=h("./summary-heading"),e=h("./items"),o=h("./selected-count"),n=h("./visualisation"),p.exports=(function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(c,t),c.include(s),c.prototype.className=function(){return"im-facet-view"},c.prototype.modelEvents=function(){return{"change:min change:max":this.setLimits}},c.prototype.stateEvents=function(){return{"change:open":this.honourOpenness}},c.prototype.parameters=["query","view"],c.prototype.optionalParameters=["noTitle"],c.prototype.Model=function(){return new l({query:this.query,view:this.view})},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.range=new i,this.setPathNames(),this.setLimits()},c.prototype.initState=function(){if(!this.state.has("open"))return this.state.set({open:r.get("Facets.Initally.Open")})},c.prototype.setLimits=function(){if(this.model.get("numeric"))return this.range.setLimits(this.model.pick("min","max"))},c.prototype.invariants=function(){return{hasQuery:"No query",hasAttrView:"The view is not an attribute: "+this.view,modelIsSummaryItemsModel:"The model is not a summary items model: "+this.model}},c.prototype.modelIsSummaryItemsModel=function(){return this.model instanceof l},c.prototype.hasQuery=function(){return null!=this.query},c.prototype.hasAttrView=function(){var t;return null!=(t=this.view)&&"function"==typeof t.isAttribute?t.isAttribute():void 0},c.prototype.postRender=function(){return this.renderTitle(),this.renderVisualisation(),this.renderSelectedCount(),this.renderItems(),this.honourOpenness()},c.prototype.renderTitle=function(){if(!this.noTitle)return this.renderChild("title",new a({model:this.model,state:this.state}))},c.prototype.renderVisualisation=function(){return this.renderChild("viz",new n({model:this.model,state:this.state,range:this.range}))},c.prototype.renderSelectedCount=function(){return this.renderChild("count",new o({model:this.model,range:this.range}))},c.prototype.renderItems=function(){return this.renderChild("facet",new e({model:this.model,state:this.state,range:this.range}))},c.prototype.honourOpenness=function(){var t,e,n;if(e=this.state.get("open"),n=this.state.previous("open"),t=this.$("dd.im-facet"),e?(t.slideDown(),this.trigger("opened",this)):(t.slideUp(),this.trigger("closed",this)),null!=n&&e!==n)return this.trigger("toggled",this)},c.prototype.events=function(){return{"click .im-summary-heading":"toggle"}},c.prototype.toggle=function(){return this.state.toggle("open")},c.prototype.close=function(){return this.state.set({open:!1})},c.prototype.open=function(){return this.state.set({open:!0})},c)}).call(this)},{"../../core-view":3,"../../event":11,"../../mixins/sets-path-names":34,"../../models/numeric-range":50,"../../models/summary-items":60,"../../options":63,"./items":153,"./selected-count":160,"./summary-heading":161,"./visualisation":166}],152:[function(i,s,t){(function(){var a,t,n,r,o={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}n=i("d3-browserify"),i("underscore"),a=i("../../options"),i("../../messages"),t=i("./visualisation-base"),i("../../messages/summary"),i("../../utils/casts").bool,r=function(t,e){return n.scale.linear().domain(t).range(e)},s.exports=(function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.className="im-summary-histogram",e.prototype.chartHeight=50,e.prototype.leftMargin=25,e.prototype.rightMargin=25,e.prototype.bottomMargin=.5,e.prototype.stepWidth=0,e.prototype.allCountsAreOne=function(){return 1===this.model.get("maxCount")},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.model.items,"add remove change:selected",(t=this,function(){return t.updateChart()}));var t},e.prototype.invariants=function(){return{hasItems:"No items, or not the right thing: "+this.model.items}},e.prototype.hasItems=function(){var t,e;return null!=(null!=(t=this.model)&&null!=(e=t.items)?e.models:void 0)},e.prototype.initChart=function(){return e.__super__.initChart.apply(this,arguments),this.stepWidth=(this.chartWidth-(this.leftMargin+this.rightMargin+1))/this.model.items.size()},e.prototype.shouldNotDrawChart=function(){return this.allCountsAreOne()},e.prototype.getScales=function(){var t,e,n,i;return e=[0,this.model.items.size()],t=[0,this.model.get("maxCount")],i=[0,this.chartHeight-this.bottomMargin],n=[this.leftMargin,this.chartWidth-this.rightMargin],{x:r(e,n),y:r(t,i)}},e.prototype.selectNodes=function(t){return t.selectAll("rect")},e.prototype.getChartData=function(t){return this.model.items.models.slice()},e.prototype.enter=function(t,n){return t.append("rect").classed("im-item-bar",!0).classed("squashed",this.stepWidth<4).attr("width",this.stepWidth).attr("y",this.chartHeight).attr("height",0).attr("x",function(t,e){return n.x(e)}).on("click",function(t){return t.toggle("selected")}).on("mouseover",function(t){return t.mousein()}).on("mouseout",function(t){return t.mouseout()})},e.prototype.update=function(t,e){var n,i,r,o,s;return n=(s=a.get("D3.Transition")).Duration,i=s.Easing,r=this.chartHeight-this.bottomMargin,o=function(t){return e.y(t.get("count"))},t.classed("selected",function(t){return t.get("selected")}),t.transition().duration(n).ease(i).attr("height",o).attr("y",function(t){return r-o(t)})},e.prototype.drawAxes=function(t,e){var n;return n=this.chartHeight-this.bottomMargin,t.append("line").classed("x-axis",!0).attr("x1",0).attr("x2",this.chartWidth).attr("y1",n).attr("y2",n)},e)}).call(this)},{"../../messages":16,"../../messages/summary":27,"../../options":63,"../../utils/casts":74,"./visualisation-base":165,"d3-browserify":237,underscore:262}],153:[function(c,h,t){(function(){var t,e,n,i,r,o,s,a,l={}.hasOwnProperty;function u(){return u.__super__.constructor.apply(this,arguments)}a=c("underscore"),t=c("../../core-view"),s=c("../../templates"),o=c("./summary-stats"),r=c("./summary-items"),n=c("./only-one-item"),e=c("./no-results"),i=["error","initialized"],h.exports=(function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(u,t),u.prototype.className="im-facet-items",u.prototype.initialize=function(t){return this.range=t.range,u.__super__.initialize.apply(this,arguments)},u.prototype.invariants=function(){return{modelHasRequiredAttrs:"Model only has the following attributes: "+a.keys(this.model.attributes)}},u.prototype.modelHasRequiredAttrs=function(){return 2===a.intersection(i,a.keys(this.model.attributes)).length},u.prototype.modelEvents=function(){return{destroy:this.stopListening}},u.prototype.template=s.template("facet_frequency"),u.prototype.RERENDER_EVENT="change:error change:numeric change:uniqueValues change:initialized",u.prototype.postRender=function(){if(this.model.get("initialized"))return this.renderChild("items",this.getItems())},u.prototype.getItems=function(){switch(!1){case!this.model.get("numeric"):return new o({model:this.model,range:this.range});case!(1<this.model.get("uniqueValues")):return new r({model:this.model});case 1!==this.model.get("uniqueValues"):return new n({model:this.model,state:this.state});default:return new e({model:this.state})}},u)}).call(this)},{"../../core-view":3,"../../templates":67,"./no-results":154,"./only-one-item":156,"./summary-items":163,"./summary-stats":164,underscore:262}],154:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}t=i("../../core-view"),e=i("../../templates"),i("../../messages/summary"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.className="im-no-results",n.prototype.stateEvents=function(){return{"change:pathName":this.reRender}},n.prototype.renderRequires=["pathName"],n.prototype.template=e.template("summary_no_results"),n)}).call(this)},{"../../core-view":3,"../../messages/summary":27,"../../templates":67}],155:[function(n,i,t){(function(){var l,u,c,t,a,h,p,f,d,r={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}h=n("d3-browserify"),l=n("jquery"),d=n("underscore"),c=n("../../options"),u=n("../../messages"),n("../../messages/summary"),t=n("./visualisation-base"),f=function(t,e){return h.scale.linear().domain(t).range(e)},a=function(r,o){var s,t;return{min:(t=function(){var t,e,n,i;for(i=[],e=(n=[t=0,1]).length;t<e;t++)s=n[t],i.push(r(o+s));return i}())[0],max:t[1]}},p=function(e,n){return function(t){return t<e?e:n<t?n:t}},i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.className="im-numeric-distribution",e.prototype.leftMargin=25,e.prototype.bottomMargin=18,e.prototype.rightMargin=14,e.prototype.chartHeight=70,e.prototype.__selecting_paths=!1,e.prototype.selection=null,e.prototype.initialize=function(t){return this.range=t.range,e.__super__.initialize.apply(this,arguments),this.listenTo(this.range,"change reset",this.onChangeRange)},e.prototype.invariants=function(){return{hasRange:"No range",hasHistogramModel:"Wrong model: "+this.model}},e.prototype.hasRange=function(){return null!=this.range},e.prototype.hasHistogramModel=function(){var t;return null!=(null!=(t=this.model)?t.getHistogram:void 0)},e.prototype.selectNodes=function(t){return t.selectAll("rect")},e.prototype.getChartData=function(t){var e,n,i,r,o,s;for(null==t&&(t=this.getScales()),s=[],n=i=0,r=(o=this.model.getHistogram()).length;i<r;n=++i)e=o[n],s.push({count:e,bucket:n+1,range:a(t.bucketToVal,n+1)});return s},e.prototype.initChart=function(){return e.__super__.initChart.apply(this,arguments),this.bucketWidth=(this.model.get("max")-this.model.get("min"))/this.model.get("buckets"),this.stepWidth=(this.chartWidth-(this.leftMargin+1))/this.model.get("buckets")},e.prototype.getScales=function(){var t,e,n,i,r,o,s,a,l,u,c;return c=this.model.pick("min","max"),r=c.min,i=c.max,o=this.model.get("buckets"),n=this.model.getHistogram(),e=[0,h.max(n)],a=[r,i],t=[1,o+1],l=[this.leftMargin,this.chartWidth-this.rightMargin],u=[0,this.chartHeight-this.bottomMargin],s=function(t){return d.compose(p(r,i),f(t,a))},{x:f(t,l),y:f(e,u),valToX:f(a,l),xToVal:s(l),bucketToVal:s(t)}},e.prototype.isIntish=function(){var t;return"int"===(t=this.model.get("type"))||"Integer"===t||"long"===t||"Long"===t||"short"===t||"Short"===t},e.prototype.getRounder=function(){return this.isIntish()?Math.round:d.identity},e.prototype.enter=function(t,n){var e,i,r,o,s,a;return null==n&&(n=this.getScales()),i=this.el,s=this.getRounder(),o=this.chartHeight,a=this,e=function(t,e){return 0<t.count?a.range.set(t.range):a.range.nullify()},r=function(t){var e,n,i,r;return i=(r=t.range).min,n=r.max,e=t.count,u.getText("summary.Bucket",{count:e,range:{min:s(i),max:s(n)}})},t.append("rect").attr("x",function(t,e){return n.x(t.bucket)}).attr("width",function(t){return Math.max(0,n.x(t.bucket+1)-n.x(t.bucket))}).attr("y",o-this.bottomMargin).attr("height",0).classed("im-bucket",!0).classed("im-null-bucket",function(t){return null===t.bucket}).on("click",e).each(function(t){return l(this).tooltip({container:i,title:r(t)})})},e.prototype.update=function(t,e){var n,i,r,o,s,a;return null==e&&(e=this.getScales()),o=this.chartHeight,r=this.bottomMargin,n=(a=c.get("D3.Transition")).Duration,i=a.Easing,s=function(t){return e.y(t.count)},t.transition().duration(n).ease(i).attr("height",s).attr("y",function(t){return o-r-s(t)-.5})},e.prototype.drawAxes=function(t,e){var n,i,r,o;return null==t&&(t=this.getCanvas()),null==e&&(e=this.getScales()),i=this.chartHeight-this.bottomMargin-.5,r=this.el,c.get("Facets.DrawAverageLine")&&t.append("line").classed("average",!0).attr("x1",e.valToX(this.model.get("average"))).attr("x2",e.valToX(this.model.get("average"))).attr("y1",0).attr("y2",i).each(function(){return l(this).tooltip({container:r,title:u.getText("summary.Average")})}),t.append("line").classed("axis",!0).attr("x1",0).attr("x2",this.chartWidth).attr("y1",i).attr("y2",i),n=t.append("svg:g"),o=e.x.ticks(this.model.get("buckets")),n.selectAll("line").data(o).enter().append("svg:line").classed("tick-line",!0).attr("x1",e.x).attr("x2",e.x).attr("y1",this.chartHeight-.75*this.bottomMargin).attr("y2",this.chartHeight-this.bottomMargin)},e.prototype.events=function(){return{mouseout:(t=this,function(){return t.__selecting_paths=!1})};var t},e.prototype.drawSelection=function(t,e){return null==t||t<=0||e>=this.chartWidth?this.removeSelection():(null==this.selection&&(this.selection=this.getCanvas().append("svg:rect").attr("y",0).attr("height",.9*this.chartHeight).classed("rubberband-selection",!0)),this.selection.attr("x",t).attr("width",e))},e.prototype.onChangeRange=function(){var t,e,n,i,r,o;return this.shouldDrawBox()?(n=this.getScales(),e=(o=this.range.toJSON()).min,t=o.max,i=n.valToX(e),r=n.valToX(t)-i,this.drawSelection(i,r)):this.removeSelection()},e.prototype.removeSelection=function(){var t;return null!=(t=this.selection)&&t.remove(),this.selection=null},e.prototype.shouldDrawBox=function(){return this.range.isNotAll()},e.prototype.remove=function(){var t;return this.removeSelection(),null!=(t=this.paper)&&t.remove(),e.__super__.remove.apply(this,arguments)},e)}).call(this)},{"../../messages":16,"../../messages/summary":27,"../../options":63,"./visualisation-base":165,"d3-browserify":237,jquery:256,underscore:262}],156:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}t=i("../../core-view"),e=i("../../templates"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.className="im-only-one",n.prototype.modelEvents=function(){return{change:this.reRender}},n.prototype.stateEvents=function(){return{change:this.reRender}},n.prototype.template=e.template("only_one_item"),n)}).call(this)},{"../../core-view":3,"../../templates":67}],157:[function(y,v,t){(function(){var s,r,o,a,n,t,u,l,c,e,h,p,f,d,i,m={}.hasOwnProperty;function g(){return g.__super__.constructor.apply(this,arguments)}i=y("underscore"),s=y("jquery"),u=y("d3-browserify"),a=y("../../options"),t=y("./visualisation-base"),o=function(t){return t.data.get("id")},r=u.layout.pie().value(function(t){return t.get("count")}),n={startAngle:0,endAngle:0},e=function(){var t,e;return t=a.get("PieColors"),e=i.isFunction(t)?t:u.scale[t](),function(t){return e(t.data.get("id"))}},p=function(t){var e;return null!=(e=t.get("currentPieCoords"))?e:n},d=function(t){return t.data.get("visible")?1:.25},h=function(t,e,n){return{startAngle:t,endAngle:e,selected:n.get("selected")?1:0}},c=function(l){return function(t){var e,n,i,r,o,s,a;return a=t.startAngle,i=t.endAngle,e=t.data,s=p(o=e),n=h(a,i,o),r=u.interpolateObject(s,n),o.set({currentPieCoords:r(1)}),function(t){return l(r(t))}}},f=function(t){return(t.endAngle+t.startAngle)/2>Math.PI},l=function(e,n,i){return u.svg.arc().startAngle(function(t){return t.startAngle}).endAngle(function(t){return t.endAngle}).innerRadius(function(t){return n+t.selected*i}).outerRadius(function(t){return e+t.selected*i})},v.exports=(function(t,e){for(var n in e)m.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(g,t),g.prototype.chartWidth=120,g.prototype.chartHeight=120,g.prototype.className="im-pie-chart",g.prototype.initialize=function(){return g.__super__.initialize.apply(this,arguments),this.listenTo(this.model.items,"change:selected change:visible",this.update),this.listenTo(a,"change:PieColors",this.onChangePalette),this.onChangePalette()},g.prototype.onChangePalette=function(){return this.colour=e(),this.update()},g.prototype._drawD3Chart=function(){var t,e,n,i,r,o,s;return n=this.chartHeight,s=this.$el.closest(":visible").width(),r=.4*n,i=.1*n,o=.08*n,e=u.select(this.el).append("svg").attr("class","chart").attr("height",n).attr("width",s),this.arc=l(r,i,o),this.arc_group=e.append("svg:g").attr("class","arc").attr("transform","translate("+s/2+","+n/2+")"),t=e.append("svg:g").attr("class","center_group").attr("transform","translate("+s/2+","+n/2+")"),e.append("svg:g").attr("class","label_group").attr("transform","translate("+s/2+","+n/2+")"),t.append("svg:circle").attr("fill","white").attr("r",i),this.update()},g.prototype.enter=function(t){var e,r,o,n;return r=this.el,n=this.model.items.reduce(function(t,e){return t+e.get("count")},0),o=function(t){return(t.data.get("count")/n*100).toFixed(1)},e=function(t){var e,n,i;return e=s(this),i=t.data.get("item")+": "+o(t)+"%",n=f(t)?"left":"right",e.tooltip({title:i,placement:n,container:r})},t.append("svg:path").attr("class","donut-arc").on("click",function(t){return t.data.toggle("selected")}).on("mouseover",function(t){return t.data.mousein()}).on("mouseout",function(t){return t.data.mouseout()}).each(e)},g.prototype.exit=function(t){return t.remove()},g.prototype.getChartData=function(){return this.model.items.models.slice()},g.prototype.update=function(){var t,e,n,i;if(null!=this.arc_group)return n=this.arc_group.selectAll("path").data(r(this.getChartData()),o),this.exit(n.exit()),this.enter(n.enter()),t=(i=a.get("D3.Transition")).DurationShort,e=i.Easing,n.attr("fill",this.colour),n.transition().duration(t).ease(e).style("opacity",d).attrTween("d",c(this.arc))},g)}).call(this)},{"../../options":63,"./visualisation-base":165,"d3-browserify":237,jquery:256,underscore:262}],158:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}n=o("underscore"),t=o("../../core-view"),e=o("../../templates"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.className="im-facet-surrogate",i.prototype.initialize=function(t){return this.above=t.above,i.__super__.initialize.apply(this,arguments)},i.prototype.template=e.template("row_surrogate"),i.prototype.getData=function(){return n.extend(i.__super__.getData.apply(this,arguments),{above:this.above})},i.prototype.postRender=function(){return this.$el.addClass(this.above?"above":"below")},i.prototype.remove=function(){return this.$el.fadeOut("fast",(t=this,function(){return i.__super__.remove.call(t)}));var t},i)}).call(this)},{"../../core-view":3,"../../templates":67,underscore:262}],159:[function(l,u,t){(function(){var t,e,r,n,i,o,s={}.hasOwnProperty;function a(){return a.__super__.constructor.apply(this,arguments)}o=l("underscore"),e=l("../../core-view"),n=l("../../templates"),t=l("../../core/checkbox"),r=l("./row-surrogate"),l("../../messages/summary"),i=function(t){return!!t},u.exports=(function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(a,e),a.prototype.RERENDER_EVENT="change:count change:item change:symbol change:share",a.prototype.tagName="tr",a.prototype.className="im-facet-row",a.prototype.modelEvents=function(){return{"change:visible":this.onChangeVisibility,"change:hover":this.onChangeHover,"change:selected":this.onChangeSelected}},a.prototype.invariants=function(){return{modelHasCollection:"No collection on model"}},a.prototype.modelHasCollection=function(){var t;return null!=(null!=(t=this.model)?t.collection:void 0)},a.prototype.template=n.template("facet_row"),a.prototype.getData=function(){var t,e,n,i;return t=this.model.collection.getMaxCount(),e=((i=this.model.get("count")/t)/2+.5).toFixed(),n=(100*i).toFixed(),o.extend(a.__super__.getData.apply(this,arguments),{percent:n,opacity:e,max:t})},a.prototype.onRenderError=function(t){return console.error(t)},a.prototype.postRender=function(){return this.addCheckbox(),this.onChangeVisibility(),this.onChangeHover(),this.onChangeSelected()},a.prototype.addCheckbox=function(){return this.renderChildAt(".checkbox",new t({model:this.model,attr:"selected"}))},a.prototype.onChangeVisibility=function(){return this.$el.toggleClass("im-hidden",!this.model.get("visible"))},a.prototype.onChangeHover=function(){var t;return t=i(this.model.get("hover")),this.$el.toggleClass("hover",t),t?this.showSurrogateUnlessVisible():this.removeSurrogate()},a.prototype.onChangeSelected=function(){return this.$el.toggleClass("im-selected",this.model.get("selected"))},a.prototype.removeSurrogate=function(){return this.removeChild("surrogate")},a.prototype.showSurrogateUnlessVisible=function(){var t,e,n,i;if(this.removeSurrogate(),!this.isVisible())return e=this.isAbove(),t=(n=new r({model:this.model,above:e})).$el,i=this.getTable(),this.renderChild("surrogate",n,i),e?t.css({top:i.scrollTop()}):t.css({bottom:0-i.scrollTop()})},a.prototype.getTable=function(){return this.$el.closest(".im-item-table")},a.prototype.events=function(){return{click:"handleClick"}},a.prototype.handleClick=function(t){return t.stopPropagation(),this.model.toggle("selected")},a.prototype.isBelow=function(){var t;return t=this.getTable(),this.$el.offset().top+this.$el.outerHeight()>t.offset().top+t.outerHeight()},a.prototype.isAbove=function(){var t;return t=this.getTable(),this.$el.offset().top<t.offset().top},a.prototype.isVisible=function(){return!(this.isAbove()||this.isBelow())},a)}).call(this)},{"../../core-view":3,"../../core/checkbox":4,"../../messages/summary":27,"../../templates":67,"./row-surrogate":158,underscore:262}],160:[function(p,f,t){(function(){var t,e,i,a,r,l,o,u,c,s,h={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}s=p("underscore"),t=p("../../core-view"),e=p("../../templates"),p("../../messages/summary"),o=function(n,t){return null==n&&(n=s.identity),s.reduce(t,function(t,e){return t+n(e)},0)},u=s.partial(o,function(t){return t.count}),c=function(t,e,n){return o(s.partial(r,t,e),n)},i=function(t,e,n){var i;return t?(i=t.max-t.min,(t.min<e?Math.min(t.max,n)-e:n-Math.max(t.min,e))/i):0},a=function(e,n){return function(t){return t.min>=e&&t.max<=n}},l=function(e,n){return function(t){return t.min<e&&t.max>e||t.max>n&&t.min<n}},r=function(t,e,n){return n.count*i(n,t,e)},f.exports=(function(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.className="im-summary-selected-count",n.prototype.template=e.template("summary-selected-count"),n.prototype.stateEvents=function(){return{"change:selectedCount change:isApprox":this.reRender}},n.prototype.initialize=function(t){return this.range=t.range,n.__super__.initialize.apply(this,arguments),this.listenTo(this.model.items,"change:selected",this.estimateSelectionSize),this.listenTo(this.range,"change",this.estimateSelectionSize)},n.prototype.estimateSelectionSize=function(){if(this.model.get("initialized"))return this.model.get("numeric")?this.estimateSelectedInRange():this.sumSelectedItems()},n.prototype.preRender=function(){return this.rendered?this.state.get("selectedCount")?void 0:this.$el.slideUp():this.$el.hide()},n.prototype.postRender=function(){if(this.state.get("selectedCount"))return this.$el.slideDown()},n.prototype.sumSelectedItems=function(){var t,e;return e=this.model.items.where({selected:!0}),t=o(function(t){return t.get("count")},e),this.state.set({isApprox:!1,selectedCount:t})},n.prototype.estimateSelectedInRange=function(){var t,e,n,i,r,o,s;return this.range.isAll()?this.state.unset("selectedCount"):(r=(s=this.range.toJSON()).min,i=s.max,e=(n=this.getHistogram()).filter(a(r,i)),o=n.filter(l(r,i)),t=Math.round(u(e)+c(r,i,o)),this.state.set({isApprox:!0,selectedCount:t}))},n.prototype.getHistogram=function(){var t,e,n,i,r,o,s,a;for(t=this.model.getHistogram(),r=(this.model.get("max")-(i=this.model.get("min")))/t.length,a=[],n=o=0,s=t.length;o<s;n=++o)e=t[n],a.push({count:e,min:i+n*r,max:i+r+n*r});return a},n)}).call(this)},{"../../core-view":3,"../../messages/summary":27,"../../templates":67,underscore:262}],161:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}n=o("underscore"),t=o("../../core-view"),e=o("../../templates"),o("../../messages/summary"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.className="im-summary-heading",i.prototype.modelEvents=function(){return{change:this.reRender,destroy:this.stopListening}},i.prototype.stateEvents=function(){return{change:this.reRender}},i.prototype.renderRequires=["numeric","available","got","uniqueValues"],i.prototype.template=e.template("summary_heading"),i.prototype.getData=function(){return n.extend(i.__super__.getData.apply(this,arguments),{filtered:null!=this.model.get("filteredCount")})},i)}).call(this)},{"../../core-view":3,"../../messages/summary":27,"../../templates":67,underscore:262}],162:[function(h,p,t){(function(){var t,e,s,n,i,r,o,a,l,u={}.hasOwnProperty;function c(){return c.__super__.constructor.apply(this,arguments)}l=h("underscore"),e=h("../../core-view"),r=h("../../templates"),n=h("../../messages"),h("../../messages/summary"),o=function(t){return!!t},a=function(t){var e;return(e={}).multi="ONE OF"===t.multi?"NONE OF":"ONE OF",e.single="=="===t.single?"!=":"==",e.absent="IS NULL"===t.absent?"IS NOT NULL":"IS NULL",e},s=function(t){if(null!=t)return t.preventDefault(),t.stopPropagation()},t={single:"==",multi:"ONE OF",absent:"IS NULL"},i={tab:"tsv",csv:"csv",xml:"xml",json:"json"},p.exports=(function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(c,e),c.prototype.RERENDER_EVT="change",c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.listenTo(this.model.items,"change:selected",this.reRender)},c.prototype.invariants=function(){return{viewIsAttribute:"No view, or view not Attribute: "+this.view,hasCollection:"No collection"}},c.prototype.viewIsAttribute=function(){var t,e;return null!=(t=this.model)&&null!=(e=t.view)&&"function"==typeof e.isAttribute?e.isAttribute():void 0},c.prototype.hasCollection=function(){var t;return null!=(null!=(t=this.model)?t.items:void 0)},c.prototype.template=r.template("summary_items_controls"),c.prototype.getData=function(){var t;return t=o(this.model.items.findWhere({selected:!0})),l.extend(c.__super__.getData.apply(this,arguments),{anyItemSelected:t})},c.prototype.postRender=function(){return this.activateTooltips(),this.activatePopovers()},c.prototype.activateTooltips=function(){return this.$btns=this.$(".btn[title]").tooltip({placement:"top",container:this.el})},c.prototype.activatePopovers=function(){return this.$(".im-download").popover({placement:"top",html:!0,container:this.el,title:n.getText("summary.DownloadFormat"),content:this.getDownloadPopover(),trigger:"manual"})},c.prototype.downloadPopoverTemplate=r.template("download_popover"),c.prototype.getDownloadPopover=function(){return this.downloadPopoverTemplate(l.extend(this.getBaseData(),{query:this.model.query,path:this.model.view.toString(),formats:i}))},c.prototype.events=function(){return{"click .im-export-summary":"exportSummary",click:"hideTooltips","click .btn-cancel":"unsetSelection","click .btn-toggle-selection":"toggleSelection","click .im-filter-group .dropdown-toggle":"toggleDropdown","click .im-download":"toggleDownloadPopover","click .im-filter-in":l.bind(this.addConstraint,this,t),"click .im-filter-out":l.bind(this.addConstraint,this,a(t))}},c.prototype.exportSummary=function(t){return t.stopImmediatePropagation(),!0},c.prototype.hideTooltips=function(){var t;return null!=(t=this.$btns)?t.tooltip("hide"):void 0},c.prototype.unsetSelection=function(t){return this.changeSelection(function(t){return t.set({selected:!1})})},c.prototype.toggleSelection=function(t){return this.changeSelection(function(t){if(t.get("visible"))return t.toggle("selected")})},c.prototype.toggleDropdown=function(){return this.$(".im-filter-group").toggleClass("open")},c.prototype.toggleDownloadPopover=function(){return this.$(".im-download").popover("toggle")},c.prototype.addConstraint=function(t,e){var r,i,n,o;return s(e),n=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.model.items.where({selected:!0})).length;t<e;t++)r=n[t],i.push(r.get("item"));return i}.call(this),0===(i=this.model.items.where({selected:!1})).length?this.model.set({error:new Error("All items are selected")}):!l.any(n,function(t){return null==t})&&this.model.hasAll()&&(o=n.length)<10&&o>i.length?this.constrainTo(a(t),function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r.get("item"));return n}()):this.constrainTo(t,n)},c.prototype.constrainTo=function(t,e){var n,i,r,o,s;return(null!=e?e.length:void 0)?(o=this.model.query,r=this.model.view.toString(),s=e[0],i=function(){switch(!1){case!(1<e.length):return{op:t.multi,values:e};case null==s:return{op:t.single,value:String(s)};default:return{op:t.absent}}}(),!/or/.test(o.constraintLogic)&&"ONE OF"===i.op&&(n=l.findWhere(o.constraints,{path:r,op:"ONE OF"}))?(n.values=i.values,o.trigger("change:constraints",o.constraints)):o.addConstraint(l.extend(i,{path:r}))):this.model.set({error:new Error("No values are selected")})},c.prototype.changeSelection=function(e){return this.model.items.each(function(t){return l.defer(e,t)})},c)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/summary":27,"../../templates":67,underscore:262}],163:[function(p,f,t){(function(){var e,t,n,i,r,o,s,a,l,u,c={}.hasOwnProperty;function h(){return this.filterItems=function(t,e){return function(){return t.apply(e,arguments)}}(this.filterItems,this),h.__super__.constructor.apply(this,arguments)}u=p("underscore"),e=p("backbone"),t=p("../../core-view"),a=p("../../templates"),r=p("../../messages"),o=p("../../mixins/sets-path-names"),s=p("./summary-items-controls"),n=p("./row"),p("../../messages/summary"),i=function(t){if(null!=t)return t.preventDefault(),t.stopPropagation()},l=function(t){return"row_"+t.get("id")},f.exports=(function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(h,t),h.include(o),h.prototype.tagName="div",h.prototype.className="im-summary-items",h.prototype.stateEvents=function(){return{"change:error":this.setErrOnModel}},h.prototype.setErrOnModel=function(){return this.model.set(this.state.pick("error"))},h.prototype.initialize=function(){return h.__super__.initialize.apply(this,arguments),this.listenTo(this.model.items,"add",this.addItem),this.listenTo(this.model.items,"remove",this.removeItem),this.listenTo(this.state,"change:typeName change:endName",this.reRender),this.setPathNames()},h.prototype.invariants=function(){return{modelHasItems:"expected a SummaryItems model, got: "+this.model,modelCanHasMore:"expected the correct model methods, got: "+this.model}},h.prototype.modelHasItems=function(){var t;return(null!=(t=this.model)?t.items:void 0)instanceof e.Collection},h.prototype.modelCanHasMore=function(){var t;return u.isFunction(null!=(t=this.model)?t.hasMore:void 0)},h.prototype.template=a.template("summary_items"),h.prototype.getData=function(){return u.extend(h.__super__.getData.apply(this,arguments),{hasMore:this.model.hasMore(),colClasses:u.result(this,"colClasses"),colHeaders:u.result(this,"colHeaders")})},h.prototype.colClasses=["im-item-selector","im-item-value","im-item-count"],h.prototype.colHeaders=function(){return[" ",this.state.has("typeName")?this.state.get("typeName")+" "+this.state.get("endName"):r.getText("summary.Item"),r.getText("summary.Count")]},h.prototype.postRender=function(){if(this.tbody=this.$(".im-item-table tbody"),!this.tbody.length)throw new Error("Could not find table");return this.addControls(),this.addItems()},h.prototype.addControls=function(){return this.renderChildAt(".im-summary-controls",new s({model:this.model}))},h.prototype.addItems=function(t){var n,i;if(null==t&&(t=0),this.rendered&&t<this.model.items.length)return n=t+100,u.defer((i=this,function(){var e;return e=document.createDocumentFragment(),i.model.items.slice(t,n).forEach(function(t){return i.addItem(t,e)}),i.tbody.append(e),i.addItems(n)}))},h.prototype.addItem=function(t,e){if(this.rendered)return this.renderChild(l(t),new n({model:t}),null!=e?e:this.tbody)},h.prototype.removeItem=function(t){return this.removeChild(l(t))},h.prototype.events=function(){return{"click .im-load-more":"loadMoreItems","click .im-clear-value-filter":"clearValueFilter","keyup .im-filter-values":u.throttle(this.filterItems,250,{leading:!1}),submit:i,click:i}},h.prototype.loadMoreItems=function(){if(!this.model.get("loading"))return this.model.increaseLimit(2)},h.prototype.clearValueFilter=function(){return this.$(".im-filter-values").val(null),this.model.setFilterTerm(null)},h.prototype.filterItems=function(t){var e;return(e=this.$(".im-filter-values")).val(),this.model.setFilterTerm(e.val())},h)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/summary":27,"../../mixins/sets-path-names":34,"../../templates":67,"./row":159,"./summary-items-controls":162,backbone:235,underscore:262}],164:[function(o,s,t){(function(){var t,e,n,l,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}l=o("underscore"),t=o("../../core-view"),n=o("../../templates"),e={min:0,max:0,average:0,stdev:0},s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.RERENDER_EVENT="change",i.prototype.className="im-summary-stats",i.prototype.template=n.template("summary_stats"),i.prototype.getData=function(){return l.extend({},e,i.__super__.getData.apply(this,arguments))},i.prototype.initialize=function(t){return this.range=t.range,i.__super__.initialize.apply(this,arguments),this.listenTo(this.range,"change",this.setSliderValues),this.listenTo(this.range,"change",this.setButtonDisabledness),this.listenTo(this.range,"change:min",this.onChangeMin),this.listenTo(this.range,"change:max",this.onChangeMax),this.listenForChange(this.model,this.initType,"integral","min","max"),this.initType()},i.prototype.invariants=function(){return{hasRange:"No range"}},i.prototype.hasRange=function(){return null!=this.range},i.prototype.setSliderValues=function(){var t,e,n,i;return e=(n=this.range.toJSON()).min,t=n.max,null!=(i=this.$slider)?i.slider("option","values",[e,t]):void 0},i.prototype.onChangeMin=function(){var t;if(t=this.range.get("min"),this.$("input.im-range-min").val(t),null!=this.$slider&&this.$slider.slider("values",0)!==t)return this.$slider.slider("values",0,t)},i.prototype.onChangeMax=function(){var t;if(t=this.range.get("max"),this.$("input.im-range-max").val(t),null!=this.$slider&&this.$slider.slider("values",1)!==t)return this.$slider.slider("values",1,t)},i.prototype.setButtonDisabledness=function(){var t;return t=this.range.isNotAll(),this.$(".btn").toggleClass("disabled",!t)},i.prototype.events=function(){return{click:function(t){return t.stopPropagation()},"keyup input.im-range-min":"maybeIncrementMin","keyup input.im-range-max":"maybeIncrementMax","change input.im-range-min":"setRangeMin","change input.im-range-max":"setRangeMax","click .btn-primary":"changeConstraints","click .btn-cancel":"clearRange"}},i.prototype.clearRange=function(){return this.range.set(this.model.pick("min","max"))},i.prototype.maybeIncrementMin=function(t){return this.maybeIncrement("min",t)},i.prototype.maybeIncrementMax=function(t){return this.maybeIncrement("max",t)},i.prototype.maybeIncrement=function(t,e){var n;switch(n=this.range.get(t),e.keyCode){case 40:n-=this.step;break;case 38:n+=this.step}return this.range.set(t,n)},i.prototype.setRangeMin=function(){return this.range.set({min:this.parse(this.$(".im-range-min").val())})},i.prototype.setRangeMax=function(){return this.range.set({max:this.parse(this.$(".im-range-max").val())})},i.prototype.changeConstraints=function(t){var e,n,i,r,o,s,a;for(t.preventDefault(),t.stopPropagation(),r=this.model.view.toString(),o=this.model.query,n=l.where(o.constraints,{path:r}),i=this.range.nulled?[{path:r,op:"IS NULL"}]:[{path:r,op:">=",value:this.range.get("min")},{path:r,op:"<=",value:this.range.get("max")}],s=0,a=n.length;s<a;s++)e=n[s],o.removeConstraint(e,{silent:!0});return o.addConstraints(i)},i.prototype.postRender=function(){return this.drawSlider()},i.prototype.parse=function(e){try{return 1===this.step?parseInt(e,10):parseFloat(e)}catch(t){return this.model.set({error:new Error("Could not parse '"+e+"' as a number")}),null}},i.prototype.initType=function(){var t,e,n,i;return t=(i=this.model.toJSON()).integral,n=i.min,e=i.max,this.step=t?1:Math.abs((e-n)/100),this.round=t?Math.round:l.identity},i.prototype.drawSlider=function(){var t,e,n,i;return t=(n=this.model.pick("min","max")).max,e=n.min,this.activateSlider({range:!0,min:e,max:t,values:[e,t],step:this.step,slide:(i=this,function(t,e){var n;return null!=(n=i.range)?n.set({min:e.values[0],max:e.values[1]}):void 0})})},i.prototype.reRender=function(){return this.destroySlider(),i.__super__.reRender.apply(this,arguments)},i.prototype.activateSlider=function(t){return this.destroySlider(),this.$slider=this.$(".slider"),this.$slider.slider(t)},i.prototype.destroySlider=function(){if(null!=this.$slider)return this.$slider.slider("destroy"),this.$slider=null},i.prototype.remove=function(){return this.destroySlider(),i.__super__.remove.apply(this,arguments)},i)}).call(this)},{"../../core-view":3,"../../templates":67,underscore:262}],165:[function(o,s,t){(function(){var t,e,i,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}e=o("d3-browserify"),i=o("underscore"),t=o("../../core-view"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.chartHeight=0,n.prototype.chartWidth=0,n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:loading",this.reRender)},n.prototype.postRender=function(){if(!this.model.get("loading"))return this.addChart()},n.prototype.addChart=function(){return i.defer((n=this,function(){var e;try{return n._drawD3Chart()}catch(t){return e=t,n.model.set({error:e})}}));var n},n.prototype.getScales=function(){throw new Error("Not implemented")},n.prototype.selectNodes=function(t){throw new Error("not implemented")},n.prototype.getChartData=function(t){throw new Error("not implemented")},n.prototype.exit=function(t){return t.remove()},n.prototype.enter=function(t,e){throw new Error("not implemented")},n.prototype.update=function(t,e){throw new Error("not implemented")},n.prototype.drawAxes=function(t,e){},n.prototype.shouldNotDrawChart=function(){return!1},n.prototype._drawD3Chart=function(){var t,e;if(!this.shouldNotDrawChart())return this.initChart(),e=this.getScales(),t=this.getCanvas(),this.updateChart(t,e),this.drawAxes(t,e)},n.prototype.updateChart=function(t,e){var n;if(!this.shouldNotDrawChart())return null==t&&(t=this.getCanvas()),null==e&&(e=this.getScales()),n=this.selectNodes(t).data(this.getChartData(e)),this.exit(n.exit()),this.enter(n.enter(),e),this.update(n,e)},n.prototype.initChart=function(){return this.chartWidth=this.$el.closest(":visible").width()},n.prototype.getCanvas=function(){return null!=this.paper?this.paper:this.paper=e.select(this.el).append("svg").attr("class","im-summary-chart").attr("width",this.chartWidth).attr("height",this.chartHeight)},n)}).call(this)},{"../../core-view":3,"d3-browserify":237,underscore:262}],166:[function(n,i,t){(function(){var t,s,a,l,u,r={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}l=n("../../options"),t=n("../../core-view"),a=n("./numeric"),u=n("./pie"),s=n("./histogram"),n("./summary-items"),i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.className="im-facet-vis",e.prototype.initialize=function(t){return this.range=t.range,e.__super__.initialize.apply(this,arguments)},e.prototype.RERENDER_EVENT="change:loading change:numeric change:canHaveMultipleValues",e.prototype.postRender=function(){if(this.model.get("initialized"))return this.renderChild("vis",this.getVisualization())},e.prototype.getVisualization=function(t){var e,n,i,r,o;switch(r=(o=this.model.toJSON()).uniqueValues,i=o.numeric,e=o.canHaveMultipleValues,o.type,n=o.got,!1){case!i:return new a({model:this.model,range:this.range});case 1!==r:return null;case!e:return new s({model:this.model});case!(0<r&&r<=l.get("MAX_PIE_SLICES")):return new u({model:this.model});case!n:return new s({model:this.model});default:return null}},e)}).call(this)},{"../../core-view":3,"../../options":63,"./histogram":152,"./numeric":155,"./pie":157,"./summary-items":163}],167:[function(f,d,t){(function(){function t(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var n,e,i,r,o,s,a,l,u={}.hasOwnProperty;function c(){return c.__super__.constructor.apply(this,arguments)}function h(){return h.__super__.constructor.apply(this,arguments)}function p(){return p.__super__.constructor.apply(this,arguments)}l=f("underscore"),i=f("../core-view"),s=f("./modal"),o=f("../messages"),a=f("../templates"),e=f("./constraints"),f("../messages/constraints"),f("../messages/logic"),t(c,i),c.prototype.className="form im-evenly-spaced im-constraint-logic",c.prototype.tagName="form",c.prototype.template=a.template("logic-manager-body"),c.prototype.parameters=["query"],c.prototype.initialize=function(){var r,t;return c.__super__.initialize.apply(this,arguments),t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.constraints).length;t<e;t++)(r=n[t]).code&&i.push(r.code);return i}.call(this),this.model.set({logic:this.query.constraintLogic}),this.state.set({disabled:!0,defaultLogic:t.join(" and ")})},c.prototype.events=function(){return{"change .im-logic":this.setLogic,submit:this.applyChanges}},c.prototype.modelEvents=function(){return{"change:logic":this.setDisabled}},c.prototype.stateEvents=function(){return{"change:disabled":this.reRender}},c.prototype.setDisabled=function(){var t,e;return e=this.model.get("logic"),t=this.query.constraintLogic,this.state.set({disabled:e===t})},c.prototype.setLogic=function(t){return this.model.set({logic:t.target.value})},c.prototype.applyChanges=function(t){var e;if(null!=t&&t.preventDefault(),null!=t&&t.stopPropagation(),!this.state.get("disabled"))return e=this.model.get("logic"),this.query.constraintLogic=e,this.query.trigger("change:logic",e)},r=c,t(h,e),h.prototype.template=a.template("active-constraints"),h.prototype.initialize=function(){return h.__super__.initialize.apply(this,arguments),this.assignCodes()},h.prototype.stateEvents=function(){return{"change:adding":this.reRender}},h.prototype.assignCodes=function(){var r,e,n,i,t,o,s;if(!((i=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.constraints).length;t<e;t++)null!=(r=n[t]).op&&i.push(r);return i}.call(this)).length<2)){for(n="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),s=[],t=0,o=i.length;t<o;t++)null==(r=i[t]).code&&s.push(function(){var t;for(t=[];null==r.code&&(e=n.shift());)l.any(i,function(t){return t.code===e})?t.push(void 0):t.push(r.code=e);return t}());return s}},h.prototype.postRender=function(){var t;return h.__super__.postRender.apply(this,arguments),1<this.getConstraints().length&&this.renderChild("logic",new r({query:this.query})),t=this.state.get("adding")?"slideUp":"slideDown",this.$(".im-current-constraints")[t](400)},h.prototype.getConAdder=function(){if(this.state.get("adding"))return h.__super__.getConAdder.apply(this,arguments)},n=h,d.exports=(t(p,s),p.prototype.parameters=["query"],p.prototype.modalSize=function(){return"lg"},p.prototype.className=function(){return p.__super__.className.apply(this,arguments)+" im-filter-manager"},p.prototype.title=function(){return o.getText("constraints.Heading",{n:this.query.constraints.length})},p.prototype.initState=function(){return this.state.set({adding:!1,disabled:!1})},p.prototype.act=function(){return this.state.set({adding:!0,disabled:!0})},p.prototype.dismissAction=function(){return o.getText("Cancel")},p.prototype.primaryAction=function(){return o.getText("constraints.DefineNew")},p.prototype.initialize=function(){return p.__super__.initialize.apply(this,arguments),this.listenTo(this,"shown",this.renderBodyContent),this.listenTo(this.query,"change:constraints",this.onChangeConstraints)},p.prototype.onChangeConstraints=function(){return this.initState(),this.renderTitle()},p.prototype.renderBodyContent=function(){var t,e;if(this.shown)return t=this.$(".modal-body"),l.defer((e=this,function(){return e.renderChild("cons",new n({state:e.state,query:e.query}),t)}))},p)}).call(this)},{"../core-view":3,"../messages":16,"../messages/constraints":21,"../messages/logic":25,"../templates":67,"./constraints":131,"./modal":197,underscore:262}],168:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}e=i("../query-dialogue-button"),t=i("../filter-dialogue"),i("../../messages/constraints"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,e),n.prototype.className="im-filter-dialogue-button",n.prototype.longLabel="constraints.ManageFilters",n.prototype.shortLabel="constraints.ManageFiltersShort",n.prototype.icon="Filter",n.prototype.Dialogue=t,n)}).call(this)},{"../../messages/constraints":21,"../filter-dialogue":167,"../query-dialogue-button":206}],169:[function(n,o,t){(function(){var t,s,i,r={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}t=n("../core-view"),n("../templates"),s=n("./formatted/sorting-path"),i=n("../utils/sort-query-by-path"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.className="im-col-sort-menu no-margins",e.prototype.tagName="ul",e.prototype.initialize=function(t){return this.query=t.query,e.__super__.initialize.apply(this,arguments),this.setPathNames()},e.prototype.modelEvents=function(){return{"change:displayName":this.initState,"change:replaces":this.setPathNames}},e.prototype.initState=function(){return this.state.set({group:this.model.get("displayName")})},e.prototype.setPathNames=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getPaths()).length;e<n;e++)t=i[e],r.push(function(n){return function(t){var e;return e=t.toString(),n.state.has(e)||n.state.set(e,""),t.getDisplayName().then(function(t){return n.state.set(e,t)})}}(this)(t));return r},e.prototype.getPaths=function(){var t;return(t=this.model.get("replaces")).length?t.slice():[this.query.makePath(this.model.get("path"))]},e.prototype.preRender=function(t){var e,n;if(e=(n=this.getPaths())[0],1===n.length)return t.cancel(),i(this.query,e)},e.prototype.postRender=function(){var t,e,n,i,r,o;for(o=[],t=n=0,i=(r=this.getPaths()).length;n<i;t=++n)e=r[t],o.push(this.renderChild(t,new s({model:this.model,state:this.state,query:this.query,path:e})));return o},e)}).call(this)},{"../core-view":3,"../templates":67,"../utils/sort-query-by-path":105,"./formatted/sorting-path":170}],170:[function(a,l,t){(function(){var t,r,o,e,n,s={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}t=a("../../core-view"),e=a("../../templates"),o=a("../../icons"),n=a("../../utils/sort-query-by-path"),r=/^\s*>\s*/,l.exports=(function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.tagName="li",i.prototype.className="im-formatted-path im-subpath",i.prototype.parameters=["query","path"],i.prototype.stateEvents=function(){return{change:this.reRender}},i.prototype.getData=function(){var t,e,n,i;return e=null!=(i=(n=this.state.toJSON())[this.path])?i.replace(n.group,"").replace(r,""):void 0,t=this.query.getSortDirection(this.path),{Icons:o,name:e,direction:t}},i.prototype.template=e.template("formatted_sorting"),i.prototype.events=function(){return{click:"sortByPath"}},i.prototype.sortByPath=function(){return n(this.query,this.path)},i)}).call(this)},{"../../core-view":3,"../../icons":14,"../../templates":67,"../../utils/sort-query-by-path":105}],171:[function(t,e,n){(function(){n.openDialogue=function(t){return this.renderChild("__dialogue__",t),t.show()},n.getDialogue=function(){var t;return null!=(t=this.children)?t.__dialogue__:void 0}}).call(this)},{}],172:[function(P,I,t){(function(){function t(t,e){for(var n in e)S.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var u,e,c,n,i,h,r,o,s,p,a,l,f,d,m,g,y,v,_,b,w,x,C,T,S={}.hasOwnProperty,E=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function k(t){k.__super__.constructor.call(this,t.path),this.set(T.omit(t,"path"))}function N(){return N.__super__.constructor.apply(this,arguments)}function M(){return M.__super__.constructor.apply(this,arguments)}function D(){return D.__super__.constructor.apply(this,arguments)}function A(){return A.__super__.constructor.apply(this,arguments)}function O(){return this.handleItem=function(t,e){return function(){return t.apply(e,arguments)}}(this.handleItem,this),O.__super__.constructor.apply(this,arguments)}T=P("underscore"),f=P("es6-promise").Promise,v=P("../templates"),n=P("../core-view"),c=P("../core-model"),p=P("../options"),e=P("../core/collection"),a=P("../models/path"),C=P("../core/type-assertions"),x=P("../utils/get-leaves"),s=P("./item-preview/details"),m=P("./item-preview/reference-counts"),i=P("./item-preview/counts-title"),b=function(t,e){return"Could not determine origin of "+t+" from ["+e.join(", ")+"]"},t(k,a),t(N,h=k),N.prototype.defaults=function(){return T.extend(N.__super__.defaults.apply(this,arguments),{fieldType:"ATTR",valueOverspill:null,tooLong:!1,value:null})},u=N,t(M,h),M.prototype.defaults=function(){return T.extend(M.__super__.defaults.apply(this,arguments),{fieldType:"REF",values:[]})},d=M,t(D,e),D.prototype.comparator="displayName",D.prototype.initialize=function(){return this.listenTo(this,"change:displayName",this.sort)},y=D,t(A,c),A.prototype.defaults=function(){return{types:[],id:null,error:null,phase:"FETCHING"}},l=A,r=v.template("cell-preview-error"),o=["class","objectId"],w=function(t,e){return t.concat(e)},_=function(){return function(t,e){return null!=e&&!e.objectId&&E.call(o,t)<0}},g=new C.Structure("ServiceType",{root:C.String,count:C.Function,findById:C.Function,fetchModel:C.Function}),I.exports=(t(O,n),O.prototype.Model=l,O.prototype.className="im-cell-preview-inner",O.prototype.parameters=["service"],O.prototype.parameterTypes={service:g},O.prototype.initialize=function(){return O.__super__.initialize.apply(this,arguments),this.fieldDetails=new y,this.referenceFields=new y},O.prototype.modelEvents=function(){return{"change:phase":this.reRender,"change:error":this.reRender}},O.prototype.remove=function(){return this.removeAllChildren(),this.fieldDetails.close(),this.referenceFields.close(),delete this.fieldDetails,delete this.referenceFields,O.__super__.remove.apply(this,arguments)},O.prototype.fetching=null,O.prototype.template=function(t){var e,n;switch(n=t.phase,e=t.error,n){case"FETCHING":return this.helpers().IndeterminateProgressBar;case"ERROR":return r(e);default:return null}},O.prototype.preRender=function(){var e;return e=this.model,null==this.fetching&&(this.fetching=this.fetchData()),this.fetching.then(function(){return e.set({phase:"SUCCESS"})},function(t){return console.error(t),e.set({phase:"ERROR",error:t})})},O.prototype.postRender=function(){var t,e,n,i,r;if("SUCCESS"===this.model.get("phase")){for(r=[],e=0,n=(i=this.model.get("types")).length;e<n;e++)t=i[e],r.push(this.$el.addClass(t));return r}},O.prototype.renderChildren=function(){var t,e,n;return e=new s({collection:this.fieldDetails}),this.renderChild("details",e),t=new i({collection:this.referenceFields}),this.renderChild("counttitle",t),n=new m({collection:this.referenceFields}),this.renderChild("counts",n),this.$el.append(v.clear)},O.prototype.fetchData=function(){return this.service.fetchModel().then((i=this,function(t){var e,n;return i.schema=t,n=i.getAllDetails(),p.get("ItemDetails.ShowReferenceCounts")?(e=i.getRelationCounts(),f.all(n.concat(e))):f.all(n)}));var i},O.prototype.getAllDetails=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.model.get("types")).length;e<n;e++)t=i[e],r.push(this.getDetails(t));return r},O.prototype.getDetails=function(t){var e,n;return n=this.model.get("id"),e=p.get(["ItemDetails","Fields",this.schema.name,t]),this.service.findById(t,n,e).then(this.handleItem)},O.prototype.handleItem=function(t){var e,n,r,i,o,s;for(n in this.fieldDetails,i=_(),o=function(t,e){return null!=e?e.objectId:void 0},e=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.model.get("types")).length;t<e;t++)r=n[t],i.push(this.schema.classes[r]);return i}.call(this),t)i(n,s=t[n])&&this.handleAttribute(t,e,n,s);for(n in t)o(n,s=t[n])&&this.handleSubObj(t,e,n,s);return null},O.prototype.getPathForField=function(t,e){var n;if(null==(n=T.find(t,function(t){return null!=t.fields[e]})))throw new Error(b(e,T.pick(t,"name")));return this.schema.makePath(n.name+"."+e)},O.prototype.handleSubObj=function(t,e,n,i){var r;return r={path:this.getPathForField(e,n),field:n,values:x(i,o)},this.fieldDetails.add(new d(r))},O.prototype.handleAttribute=function(t,e,n,i){var r,o,s,a,l;return o={path:s=this.getPathForField(e,n),field:n,value:i},(null!=i&&"String"===s.getType()||/Clob/.test(s.getType()))&&(r=p.get("CellCutoff"),l=String(i),i.length>r&&(-1===(a=l.indexOf(" ",.9*r))&&(a=r),o.tooLong=!0,o.valueOverspill=l.substring(a),o.value=l.substring(0,a))),this.fieldDetails.add(new u(o))},O.prototype.getRelationCounts=function(){var o,s,a,t,l,u,e;return C=this.model.get("types"),t=this.service.root,a=null!=(e=p.get(["ItemDetails","Count",t]))?e:{},function(){var t,e,n;for(n=[],t=0,e=C.length;t<e;t++)u=C[t],s=this.schema.classes[u],n.push(function(){var t,e,n,i,r;for(r=[],t=0,e=(i=null!=(n=a[u])?n:function(){var t;for(o in t=[],s.collections)t.push(o);return t}()).length;t<e;t++)l=i[t],r.push(this.getRelationCount(l,u));return r}.call(this));return n}.call(this).reduce(w,[])},O.prototype.getRelationCount=function(t,e){var n,i,r,o,s,a,l,u;if(r=this.model.get("id"),T.isObject(t))a=t.query,o=t.label,n=a(r),i=function(t){return new c({parts:[o],id:o,displayName:o,count:t})};else{if(!(null!=(l=(s=this.schema.makePath(e+"."+t)).getType())?l.attributes.id:void 0))return f.resolve(!0);n={select:[t+".id"],from:e,where:{id:r}},i=function(t){return new h({path:s,count:t})}}return this.service.count(n).then(i).then((u=this,function(t){if(t.get("count"))return u.referenceFields.add(t)}))},O)}).call(this)},{"../core-model":2,"../core-view":3,"../core/collection":5,"../core/type-assertions":10,"../models/path":56,"../options":63,"../templates":67,"../utils/get-leaves":83,"./item-preview/counts-title":173,"./item-preview/details":174,"./item-preview/reference-counts":175,"es6-promise":238,underscore:262}],173:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}n=o("underscore"),t=o("../../core-view"),(e=o("../../messages")).setWithPrefix("preview",{RelatedItemsHeading:"Related Items"}),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.tagName="h4",i.prototype.collectionEvents=function(){return{"add remove reset":this.setVisibility}},i.prototype.setVisibility=function(){return this.$el.toggleClass("im-hidden",this.collection.isEmpty())},i.prototype.template=function(){return n.escape(e.getText("preview.RelatedItemsHeading"))},i.prototype.postRender=function(){return this.setVisibility()},i)}).call(this)},{"../../core-view":3,"../../messages":16,underscore:262}],174:[function(u,c,t){(function(){var e,t,n,i,r,o,s,a={}.hasOwnProperty;function l(){return l.__super__.constructor.apply(this,arguments)}s=u("underscore"),r=u("../../templates"),t=u("../../core-view"),o=u("../../utils/events").ignore,n=r.template("cell-preview-items"),i=r.template("cell-preview-reference"),e=r.template("cell-preview-attribute"),c.exports=(function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(l,t),l.prototype.tagName="table",l.prototype.className="im-item-details table table-condensed table-bordered",l.prototype.template=n,l.prototype.collectionEvents=function(){return{sort:this.reRender,add:this.addDetail}},l.prototype.events=function(){return{"click .im-too-long":this.revealLongField}},l.prototype.postRender=function(){return this.collection.each((e=this,function(t){return e.addDetail(t)}));var e},l.prototype.addDetail=function(t){return this.$el.append(this["render"+t.get("fieldType")](t.toJSON()))},l.prototype.renderATTR=function(t){return e(s.extend(this.getBaseData(),t))},l.prototype.renderREF=i,l.prototype.revealLongField=function(t){var e,n;return o(t),n=this.$(".im-too-long"),e=this.$(".im-overspill"),n.remove(),e.slideDown(250)},l)}).call(this)},{"../../core-view":3,"../../templates":67,"../../utils/events":81,underscore:262}],175:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}e=i("../../templates"),t=i("../../core-view"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.className="im-related-counts",n.prototype.tagName="ul",n.prototype.collectionEvents=function(){return{"add change sort":this.reRender}},n.prototype.template=e.template("cell-preview-reference-relation"),n)}).call(this)},{"../../core-view":3,"../../templates":67}],176:[function(l,u,t){(function(){var e,t,n,i,r,o,s={}.hasOwnProperty;function a(){return a.__super__.constructor.apply(this,arguments)}o=l("underscore"),l("../core-view"),n=l("../messages"),i=l("./modal"),e=l("./join-manager/body"),t=l("../models/joins"),l("../messages/joins"),r=function(t,n){return t.length===n.length&&o.all(t,function(t,e){return t===n[e]})},u.exports=(function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(a,i),a.prototype.parameters=["query"],a.prototype.className=function(){return a.__super__.className.apply(this,arguments)+" im-join-manager"},a.prototype.title=function(){return n.getText("joins.Heading")},a.prototype.dismissAction=function(){return n.getText("Cancel")},a.prototype.primaryAction=function(){return n.getText("modal.ApplyChanges")},a.prototype.initialize=function(){return a.__super__.initialize.apply(this,arguments),this.joins=t.fromQuery(this.query),this.listenTo(this.joins,"change:style",this.setDisabled)},a.prototype.initState=function(){return this.state.set({disabled:!0})},a.prototype.act=function(){var t;if(!this.state.get("disabled"))return t=this.joins.getJoins(),this.query.joins=t,this.query.trigger("change:joins",t),this.resolve(t)},a.prototype.setDisabled=function(){var t,e,n;return t=o.keys(this.joins.getJoins()),e=function(){var t,e;for(n in e=[],t=this.query.joins)"OUTER"===t[n]&&e.push(n);return e}.call(this),t.sort(),e.sort(),this.state.set({disabled:r(t,e)})},a.prototype.postRender=function(){var t;return a.__super__.postRender.apply(this,arguments),t=this.$(".modal-body"),this.renderChild("cons",new e({collection:this.joins}),t)},a)}).call(this)},{"../core-view":3,"../messages":16,"../messages/joins":23,"../models/joins":47,"./join-manager/body":177,"./modal":197,underscore:262}],177:[function(f,d,t){(function(){function t(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,r,o,s,a,l,u={}.hasOwnProperty;function c(t,e){c.__super__.constructor.call(this,{"btn btn-default":!0,active:function(){return e===t.get("style")}})}function h(){return h.__super__.constructor.apply(this,arguments)}function p(){return p.__super__.constructor.apply(this,arguments)}l=f("underscore"),i=f("../../core-view"),s=f("../../templates"),n=f("../../utils/css-class-set"),f("../../messages/joins"),o=["join-style","column-manager-path-name","clear"],t(c,n),e=c,a=function(t){switch(t){case"INNER":return"OUTER";case"OUTER":default:return"INNER"}},t(h,i),h.prototype.tagName="li",h.prototype.className="list-group-item",h.prototype.template=s.templateFromParts(o),h.prototype.modelEvents=function(){return{"change:style change:parts":this.reRender}},h.prototype.initialize=function(){return h.__super__.initialize.apply(this,arguments),this.classSets={innerJoinBtn:new e(this.model,"INNER"),outerJoinBtn:new e(this.model,"OUTER")}},h.prototype.getData=function(){return l.extend(h.__super__.getData.apply(this,arguments),this.classSets)},h.prototype.events=function(){return{"click button":this.onButtonClick}},h.prototype.onButtonClick=function(t){if(!/active/.test(t.target.className))return this.model.swap("style",a)},r=h,d.exports=(t(p,i),p.prototype.template=s.template("join-manager-body"),p.prototype.initState=function(){return this.state.set({explaining:!1})},p.prototype.postRender=function(){return this.$group=this.$(".list-group"),this.collection.each((e=this,function(t){return e.addJoin(t)}));var e},p.prototype.addJoin=function(t){if(this.rendered)return this.renderChild(t.id,new r({model:t}),this.$group)},p.prototype.removeJoin=function(t){return this.removeChild(t.id)},p.prototype.events=function(){return{"click .alert-info strong":function(){return this.state.toggle("explaining")}}},p.prototype.stateEvents=function(){return{"change:explaining":this.onChangeExplaining}},p.prototype.collectionEvents=function(){return{add:this.addJoin,remove:this.removeJoin,sort:this.reRender}},p.prototype.onChangeExplaining=function(){if(this.rendered)return this.$(".alert-info p")[this.state.get("explaining")?"slideDown":"slideUp"]()},p)}).call(this)},{"../../core-view":3,"../../messages/joins":23,"../../templates":67,"../../utils/css-class-set":79,underscore:262}],178:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}e=i("../query-dialogue-button"),t=i("../join-manager"),i("../../messages/joins"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,e),n.prototype.className="im-join-manager-button",n.prototype.longLabel="joins.Manage",n.prototype.shortLabel="joins.ManageShort",n.prototype.icon="Joins",n.prototype.Dialogue=t,n)}).call(this)},{"../../messages/joins":23,"../join-manager":176,"../query-dialogue-button":206}],179:[function(n,i,t){(function(){var t,r={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}t=n("../core-view"),i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.RERENDER_EVENT="change",e.prototype.tagName="span",e)}).call(this)},{"../core-view":3}],180:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}i("es6-promise").Promise,t=i("./base-append-dialogue"),e=i("./from-path-mixin"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.include(e(t)),n)}).call(this)},{"./base-append-dialogue":183,"./from-path-mixin":189,"es6-promise":238}],181:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}o("es6-promise").Promise,t=o("./base-append-dialogue"),e=o("../../mixins/floating-dialogue"),n=o("./from-selection-mixin"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.include(e),i.include(n(t)),i)}).call(this)},{"../../mixins/floating-dialogue":30,"./base-append-dialogue":183,"./from-selection-mixin":190,"es6-promise":238}],182:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}i("underscore"),t=i("../../core-view"),i("../../templates"),i("../../messages"),e=i("../../core/select-with-label"),i("../../messages/lists"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.parameters=["model","collection"],n.prototype.postRender=function(){return this.renderListSelector()},n.prototype.renderListSelector=function(){var t;return t=new e({model:this.model,collection:this.collection,attr:"target",label:"lists.params.Target",optionLabel:"lists.PossibleAppendTarget",helpMessage:"lists.params.help.Target",noOptionsMessage:"lists.append.NoSuitableLists",getProblem:function(t){return!(null!=t?t.length:void 0)}}),this.listenTo(t.state,"change:error",console.error.bind(console)),this.renderChild("list-selector",t)},n)}).call(this)},{"../../core-view":3,"../../core/select-with-label":9,"../../messages":16,"../../messages/lists":24,"../../templates":67,underscore:262}],183:[function(x,C,t){(function(){function t(t,e){for(var n in e)v.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,r,o,s,a,l,u,c,h,p,f,d,m,g,y,v={}.hasOwnProperty;function _(){return _.__super__.constructor.apply(this,arguments)}function b(t){this.service=t.service,b.__super__.constructor.call(this)}function w(){return w.__super__.constructor.apply(this,arguments)}y=x("underscore"),p=x("es6-promise").Promise,r=x("../../core/collection"),o=x("../../core-model"),a=x("../../messages"),i=x("./base-dialogue"),e=x("./append-to-list-body"),n=x("../../models/append-to-list"),l={key:"lists.NoSuitableLists",level:"Warning",cannotDismiss:!0},s={key:"lists.TargetNotCorrectType",level:"Error",cannotDismiss:!0},f={key:"lists.TargetDoesNotExist",level:"Error",cannotDismiss:!0},u={key:"lists.NoTargetSelected",level:"Info",cannotDismiss:!0},m=function(e){return function(t){if(!e.isa(t.type))return p.reject(s)}},d=function(t){return y.where(t,{status:"CURRENT"})},g=function(t){var e,n,i,r,o,s,a;for(a=[],r=0,o=t.length;r<o;r++)e=(s=t[r]).name,i=s.type,n=s.size,a.push({name:e,type:i,size:n,id:e});return a},t(_,o),_.prototype.defaults=function(){return{typeName:null,name:null,size:0}},_.prototype.initialize=function(){return _.__super__.initialize.apply(this,arguments),this.fetchTypeName()},_.prototype.fetchTypeName=function(){var t,e,n;return t=this.collection.service,e=this.get("type"),t.fetchModel().then(function(t){return t.makePath(e)}).then(function(t){return t.getDisplayName()}).then((n=this,function(t){return n.set({typeName:t})}))},c=_,t(b,r),b.prototype.model=c,h=b,C.exports=(t(w,i),w.prototype.Body=e,w.prototype.Model=n,w.prototype.title=function(){return a.getText("lists.AppendToListTitle",this.getData())},w.prototype.primaryAction=function(){return a.getText("lists.Append")},w.prototype.initialize=function(){return w.__super__.initialize.apply(this,arguments),this.listenTo(this.getPossibleLists(),"remove reset",this.verifyState),this.listenTo(this.getPossibleLists(),"add reset",this.setTargetIfOnlyOne)},w.prototype.getPossibleLists=function(){return null!=this.possibleLists?this.possibleLists:this.possibleLists=new h({service:this.getService()})},w.prototype.processQuery=function(t){return t.appendToList(this.model.get("target"))},w.prototype.modelEvents=function(){return y.extend(w.__super__.modelEvents.apply(this,arguments),{"change:target":"onChangeTarget"})},w.prototype.initState=function(){return w.__super__.initState.apply(this,arguments),this.fetchSuitableLists(),this.verifyState()},w.prototype.checkThereAreLists=function(){if(!this.getPossibleLists().size())return this.state.set({error:l})},w.prototype.onChangeTarget=function(){return this.setTitle(),this.verifyState()},w.prototype.verifyState=function(){return this.state.unset("error"),this.checkThereAreLists(),this.verifyTarget(),this.verifyTargetExistsAndIsSuitable()},w.prototype.setTargetIfOnlyOne=function(){var t;if(1===(t=this.getPossibleLists()).length)return this.model.set({target:t.at(0).get("name")})},w.prototype.verifyTarget=function(){if(!this.model.get("target"))return this.state.set({error:u})},w.prototype.onChangeType=function(){return w.__super__.onChangeType.apply(this,arguments),this.fetchSuitableLists()},w.prototype.getBodyOptions=function(){return y.extend(w.__super__.getBodyOptions.apply(this,arguments),{collection:this.getPossibleLists()})},w.prototype.verifyTargetExistsAndIsSuitable=function(){var t,e,n,i;if(null!=(n=this.getType())&&null!=(e=this.model.get("target")))return t=n.model.makePath(n.name),this.getService().fetchList(e).then(m(t),function(){return f}).then(null,(i=this,function(t){return i.state.set({error:t})}))},w.prototype.fetchSuitableLists=function(){var e,t,n,i;return null==(t=this.getType())?this.getPossibleLists().reset():(e=t.model.makePath(t.name),this.getService().fetchLists().then(function(t){return y.filter(t,function(t){return e.isa(t.type)})}).then(d).then(g).then((i=this,function(t){return i.getPossibleLists().reset(t)})).then(null,(n=this,function(t){return n.state.set({error:t})})))},w)}).call(this)},{"../../core-model":2,"../../core/collection":5,"../../messages":16,"../../models/append-to-list":35,"./append-to-list-body":182,"./base-dialogue":184,"es6-promise":238,underscore:262}],184:[function(l,u,t){(function(){var t,e,n,i,r,o,s={}.hasOwnProperty;function a(){return a.__super__.constructor.apply(this,arguments)}o=l("underscore"),r=l("../modal"),i=l("../../messages"),e=l("../../models/create-list"),n=l("./body"),l("../../messages/lists"),t=function(){throw new Error("not implemented")},u.exports=(function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(a,r),a.prototype.getQuery=t,a.prototype.fetchCount=t,a.prototype.getType=t,a.prototype.getService=function(){return t},a.prototype.Model=e,a.prototype.Body=n,a.prototype.className=function(){return a.__super__.className.apply(this,arguments)+" im-list-dialogue im-create-list"},a.prototype.title=function(){return i.getText("lists.CreateListTitle",this.getData())},a.prototype.primaryAction=function(){return i.getText("lists.Create")},a.prototype.act=function(){return this.getQuery().then((n=this,function(t){return n.processQuery(t)})).then(this.resolve,(e=this,function(t){return e.state.set({error:t})}));var e,n},a.prototype.verifyState=function(){return this.state.set({error:null})},a.prototype.processQuery=function(t){return t.saveAsList(this.model.toJSON())},a.prototype.modelEvents=function(){return{"change:type":"onChangeType"}},a.prototype.onChangeType=function(){return this.setTypeName()},a.prototype.stateEvents=function(){return{"change:typeName change:count":"setTitle","change:typeName":"setListName","change:error":function(){return console.log(this.state.get("error"))}}},a.prototype.setTitle=function(){return this.$(".modal-title").text(this.title())},a.prototype.setListName=function(){return this.model.set({name:i.getText("lists.DefaultName",this.state.toJSON())})},a.prototype.initState=function(){return this.state.set({existingLists:{},minimised:o.result(this,"initiallyMinimised")}),this.setTypeName(),this.setCount(),this.checkAuth(),this.getService().fetchLists().then(function(t){return o.where(t,{authorized:!0})}).then(function(t){return o.groupBy(t,"name")}).then((e=this,function(t){return e.state.set({existingLists:t})}));var e},a.prototype.setCount=function(){return this.fetchCount().then((n=this,function(t){return n.state.set({count:t})})).then(null,(e=this,function(t){return e.state.set({error:t})}));var e,n},a.prototype.setTypeName=function(){var t,e,n;return null!=(t=this.getType())?t.getDisplayName().then((n=this,function(t){return n.state.set({typeName:t})})).then(null,(e=this,function(t){return e.state.set({error:t})})):void 0},a.prototype.checkAuth=function(){return this.getService().whoami().then(null,(t=this,function(){return t.state.set({error:{level:"Error",key:"lists.error.MustBeLoggedIn"}})}));var t},a.prototype.getBodyOptions=function(){return{model:this.model,state:this.state}},a.prototype.postRender=function(){return a.__super__.postRender.apply(this,arguments),this.renderChild("body",new this.Body(this.getBodyOptions()),this.$(".modal-body"))},a)}).call(this)},{"../../messages":16,"../../messages/lists":24,"../../models/create-list":41,"../modal":197,"./body":185,underscore:262}],185:[function(h,p,t){(function(){var t,e,n,i,r,o,s,a,l,u={}.hasOwnProperty;function c(){return c.__super__.constructor.apply(this,arguments)}l=h("underscore"),t=h("../../core-view"),a=h("../../templates"),o=h("../../messages"),e=h("../../models/create-list"),i=h("../../core/input-with-label"),n=h("../../core/input-with-button"),r=h("./tag"),s=h("./tags-apology"),h("../../messages/lists"),p.exports=(function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(c,t),c.prototype.Model=e,c.prototype.template=a.template("list-dialogue-body"),c.prototype.getData=function(){return l.extend(c.__super__.getData.apply(this,arguments))},c.prototype.modelEvents=function(){return{"add:tag":"addTag"}},c.prototype.stateEvents=function(){return{"change:minimised":"toggleOptionalAttributes"}},c.prototype.events=function(){return{"click .im-more-options":(t=this,function(){return t.state.toggle("minimised")})};var t},c.prototype.$tags=null,c.prototype.postRender=function(){return this.renderListNameInput(),this.renderListDescInput(),this.renderTags()},c.prototype.renderTags=function(){return this.$tags=this.$(".im-active-tags"),this.addTags(),this.renderApology(),this.renderTagAdder()},c.prototype.renderTagAdder=function(){var t;return t=new n({model:this.model,placeholder:"lists.AddTag",button:"lists.AddTagBtn",sets:"nextTag"}),this.listenTo(t,"act",this.addNextTag),this.renderChildAt(".im-next-tag",t)},c.prototype.addTags=function(){return this.model.tags.each((e=this,function(t){return e.addTag(t)}));var e},c.prototype.addTag=function(t){if(this.rendered)return this.renderChild("tag-"+t.get("id"),new r({model:t}),this.$tags)},c.prototype.toggleOptionalAttributes=function(){var t,e,n;return n=this.state.toJSON(),t=this.$(".im-optional-attributes"),n.minimised?t.slideUp():t.slideDown(),e=o.getText("lists.ShowExtraOptions",n),this.$(".im-more-options .msg").text(e)},c.prototype.renderApology=function(){return this.renderChildAt(".im-apology",new s({collection:this.model.tags}))},c.prototype.renderListNameInput=function(){var e,n;return e=new i({model:this.model,attr:"name",label:"lists.params.Name",helpMessage:"lists.params.help.Name",placeholder:"lists.params.NamePlaceholder",getProblem:(n=this,function(t){return n.validateName(t)})}),this.listenTo(e.state,"change:problem",function(){var t;return t=e.state.get("problem"),this.state.set({disabled:!!t})}),this.renderChildAt(".im-list-name",e)},c.prototype.validateName=function(t){var e;return!(e=null!=t?t.replace(/(^\s+|\s+$)/g,""):void 0)||this.state.get("existingLists")[e]},c.prototype.renderListDescInput=function(){return this.renderChildAt(".im-list-desc",new i({model:this.model,attr:"description",label:"lists.params.Desc",placeholder:"lists.params.DescPlaceholder"}))},c.prototype.addNextTag=function(){return this.model.addTag()},c)}).call(this)},{"../../core-view":3,"../../core/input-with-button":6,"../../core/input-with-label":7,"../../messages":16,"../../messages/lists":24,"../../models/create-list":41,"../../templates":67,"./tag":191,"./tags-apology":192,underscore:262}],186:[function(_,b,t){(function(){function t(t,e){for(var n in e)m.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var i,o,n,e,r,s,a,l,u,c,h,p,f,d,m={}.hasOwnProperty;function g(){return g.__super__.constructor.apply(this,arguments)}function y(){return y.__super__.constructor.apply(this,arguments)}function v(){return v.__super__.constructor.apply(this,arguments)}d=_("underscore"),s=_("../../core-view"),r=_("../../core-model"),e=_("../../core/collection"),f=_("../../templates"),n=_("../../utils/css-class-set"),a=_("../../utils/count-executor"),c=_("../../models/path"),o=_("./append-from-selection"),u=_("./create-from-selection"),i=_("./append-from-path"),l=_("./create-from-path"),_("../../messages/lists"),t(g,e),g.prototype.model=c,h=g,t(y,s),y.prototype.parameters=["query","model","showDialogue","highLight"],y.prototype.tagName="li",y.prototype.modelEvents=function(){return{"change:displayName change:typeName":this.reRender}},y.prototype.stateEvents=function(){return{"change:count":this.reRender}},y.prototype.Model=c,y.prototype.template=f.template("list-dialogue-button-node"),y.prototype.events=function(){return{click:this.openDialogue,"mouseenter a":function(){return d.defer((t=this,function(){return t.highLight(t.model.get("path"))}));var t},"mouseout a":function(){return this.highLight(null)}}},y.prototype.initialize=function(){return y.__super__.initialize.apply(this,arguments),this.query.summarise(this.model.get("id")).then((n=this,function(t){var e;return e=t.stats,n.state.set({count:e.uniqueValues})}));var n},y.prototype.openDialogue=function(){var t;return t={query:this.query,path:this.model.get("id")},this.showDialogue(t)},p=y,b.exports=(t(v,s),v.prototype.tagName="div",v.prototype.className="btn-group list-dialogue-button",v.prototype.template=f.template("list-dialogue-button"),v.prototype.parameters=["query","selected"],v.prototype.optionalParameters=["tableState"],v.prototype.tableState=new r,v.prototype.initState=function(){return this.state.set({action:"create",authenticated:!1,disabled:!1})},v.prototype.stateEvents=function(){return{"change:action":this.setActionButtonState,"change:authenticated":this.setVisible,"change:disabled":this.onChangeDisabled}},v.prototype.events=function(){return{"click .im-create-action":this.setActionIsCreate,"click .im-append-action":this.setActionIsAppend,"click .im-pick-items":this.startPicking}},v.prototype.initialize=function(){var e,n,i,r;return v.__super__.initialize.apply(this,arguments),this.initBtnClasses(),this.paths=new h,this.query.getQueryNodes().reverse().forEach((e=this,function(t){return e.paths.add(new c(t))})),this.query.service.whoami().then((n=this,function(t){return n.state.set({authenticated:!!t})})),a.count(this.query).then((r=this,function(t){return r.state.set({disabled:0===t})})).then(null,(i=this,function(t){return i.state.set({disabled:!0,error:t})}))},v.prototype.getData=function(){return d.extend(v.__super__.getData.apply(this,arguments),this.classSets,{paths:this.paths.toJSON()})},v.prototype.postRender=function(){var i,r,o,e,n,s;return this.setVisible(),this.onChangeDisabled(),r=this.$(".dropdown-menu"),i=function(t){return e.tableState.set({highlitNode:t})},o=function(t){return n.showPathDialogue(t)},(n=e=this).paths.each((s=this,function(t,e){var n;return n=new p({query:s.query,model:t,showDialogue:o,highLight:i}),s.renderChild("path-"+e,n,r,"prepend")}))},v.prototype.onChangeDisabled=function(){return this.$(".btn").toggleClass("disabled",this.state.get("disabled"))},v.prototype.setVisible=function(){return this.$el.toggleClass("im-hidden",!this.state.get("authenticated"))},v.prototype.setActionIsCreate=function(t){return t.stopPropagation(),t.preventDefault(),this.state.set({action:"create"})},v.prototype.setActionIsAppend=function(t){return t.stopPropagation(),t.preventDefault(),this.state.set({action:"append"})},v.prototype.showDialogue=function(t,e){var n,i,r,o;return i=new t(e),this.renderChild("dialogue",i),n=this.state.get("action"),o=this,r=function(e){return function(t){return o.trigger(e+":"+n,t),o.trigger(e,n,t)}},i.show().then(r("success"),r("failure"))},v.prototype.showPathDialogue=function(t){var e,n;return n=this.state.get("action"),e=function(){switch(n){case"append":return i;case"create":return l;default:throw new Error("Unknown action: "+n)}}(),this.showDialogue(e,t)},v.prototype.startPicking=function(){var t,e,n,i,r;return e=this.state.get("action"),n={collection:this.selected,service:this.query.service},t=function(){switch(e){case"append":return o;case"create":return u;default:throw new Error("Unknown action: "+e)}}(),this.tableState.set({selecting:!0}),i=function(){return r.tableState.set({selecting:!1}),r.selected.reset()},(r=this).showDialogue(t,n).then(i,i)},v.prototype.setActionButtonState=function(){var t;return t=this.state.get("action"),this.$(".im-create-action").toggleClass("active","create"===t),this.$(".im-append-action").toggleClass("active","append"===t)},v.prototype.initBtnClasses=function(){var t,e;return this.classSets={},this.classSets.createBtnClasses=new n({"im-create-action":!0,"btn btn-default":!0,active:(t=this,function(){return"create"===t.state.get("action")})}),this.classSets.appendBtnClasses=new n({"im-append-action":!0,"btn btn-default":!0,active:(e=this,function(){return"append"===e.state.get("action")})})},v)}).call(this)},{"../../core-model":2,"../../core-view":3,"../../core/collection":5,"../../messages/lists":24,"../../models/path":56,"../../templates":67,"../../utils/count-executor":77,"../../utils/css-class-set":79,"./append-from-path":180,"./append-from-selection":181,"./create-from-path":187,"./create-from-selection":188,underscore:262}],187:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}i("es6-promise").Promise,t=i("./base-dialogue"),e=i("./from-path-mixin"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.include(e(t)),n)}).call(this)},{"./base-dialogue":184,"./from-path-mixin":189,"es6-promise":238}],188:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}o("underscore"),o("es6-promise").Promise,t=o("./base-dialogue"),e=o("../../mixins/floating-dialogue"),n=o("./from-selection-mixin"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.include(e),i.include(n(t)),i)}).call(this)},{"../../mixins/floating-dialogue":30,"./base-dialogue":184,"./from-selection-mixin":190,"es6-promise":238,underscore:262}],189:[function(t,n,e){(function(){var e;e=t("es6-promise").Promise,n.exports=function(t){return{parameters:["query","path"],className:function(){return t.prototype.className.call(this)+" im-from-path"},getQuery:function(){return e.resolve(this.query.selectPreservingImpliedConstraints([this.path]))},fetchCount:function(){return this.query.summarise(this.path).then(function(t){return t.stats.uniqueValues})},getType:function(){return this.query.makePath(this.path).getParent().getType()},getService:function(){return this.query.service}}}}).call(this)},{"es6-promise":238}],190:[function(e,o,t){(function(){var n,i,t,r;t=e("../../models/selected-objects"),r=e("../../core/type-assertions"),n={level:"Error",key:"lists.NoCommonType",cannotDismiss:!0},i={level:"Info",key:"lists.NoObjectsSelected",cannotDismiss:!0},o.exports=function(e){return{parameters:["service","collection"],parameterTypes:{collection:r.InstanceOf(t,"SelectedObjects")},className:function(){return e.prototype.className.call(this)+" im-list-picker"},getQuery:function(){return this.service.query({from:this.model.get("type"),select:["id"],where:[{path:this.model.get("type"),op:"IN",ids:this.getIds()}]})},fetchCount:function(){return Promise.resolve(this.collection.size())},getType:function(){var t;if(this.model.get("type"))return null!=(t=this.schema)?t.makePath(this.model.get("type")).getType():void 0},getService:function(){return this.service},collectionEvents:function(){return{"change:commonType change:typeName":this.setType,"add remove":this.setCount}},initiallyMinimised:!0,getIds:function(){return this.collection.map(function(t){return t.get("id")})},onChangeType:function(){return e.prototype.onChangeType.call(this),this.verifyState()},verifyState:function(){var t;return null!=(t=e.prototype.verifyState)&&t.call(this),this.collection.size()?this.model.get("type")?void 0:this.state.set({error:n}):this.state.set({error:i})},setType:function(){return this.model.set({type:this.collection.state.get("commonType")}),this.state.set({typeName:this.collection.state.get("typeName")})}}}}).call(this)},{"../../core/type-assertions":10,"../../models/selected-objects":58}],191:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}t=i("../../core-view"),e=i("../../templates"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.className="im-list-tag label label-primary",n.prototype.template=e.template("list-tag"),n.prototype.events=function(){return{"click .im-remove":"removeAndDestroy"}},n.prototype.postRender=function(){return this.activateTooltip()},n.prototype.activateTooltip=function(){return this.$("[title]").tooltip()},n.prototype.removeAndDestroy=function(){return this.model.collection.remove(this.model),this.model.destroy(),this.$el.fadeOut(400,(t=this,function(){return t.remove()}));var t},n)}).call(this)},{"../../core-view":3,"../../templates":67}],192:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}n=o("underscore"),t=o("../../core-view"),e=o("../../templates"),o("../../messages/lists"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.collectionEvents=function(){return{"add remove reset":this.reRender}},i.prototype.template=e.template("list-tags-apology"),i.prototype.getData=function(){return n.extend(i.__super__.getData.apply(this,arguments),{hasTags:this.collection.size()})},i)}).call(this)},{"../../core-view":3,"../../messages/lists":24,"../../templates":67,underscore:262}],193:[function(h,p,t){(function(){var r,n,t,e,i,o,s,a,l,u={}.hasOwnProperty;function c(){return c.__super__.constructor.apply(this,arguments)}l=h("underscore"),n=h("es6-promise").Promise,r=h("../messages"),t=h("../core-view"),r.set({"convalue.BadType":"<%- name %> is of the wrong type (<%- type %>).","convalue.EmptyList":"<%- name %> is empty. This query will always return 0 results","convalue.BadList":'You do not have access to list called "<%- name %>". Choose one from the list.'}),o=h("../templates/helpers"),h("../templates/mustache-settings"),s=l.template("<% if (suitableLists.length) { %>\n    <%= select(suitableLists, isSelected, 'span7 im-value-options im-con-value im-con-value-list form-control', formatList, getOptionValue) %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLists') %>\n<% } %>\n"),i=function(t){return t.name},e=function(t){return t.size?t.name+" ("+t.size+" "+t.typeName+"s)":t.name},a=function(t){return function(e){return t.makePath(e.type).getDisplayName().then(function(t){return l.extend(e,{typeName:t})})}},p.exports=(function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(c,t),c.prototype.className="im-list-value-controls",c.prototype.initialize=function(t){return this.query=t.query,c.__super__.initialize.apply(this,arguments),this.initialValue=this.model.get("value"),this.path=this.model.get("path"),this.setSuitableLists(),this.listenTo(this.model,"change",this.reRender),this.listenTo(this.model,"change:value",this.checkCurrentValue),this.checkCurrentValue()},c.prototype.checkCurrentValue=function(){var t,e,n,i;return n=this.model.get("value"),t=function(t){return i.model.set({error:new Error(r.getText("convalue.BadList",{name:n}))}),i.listenToOnce(i.model,"change:value",function(){return i.model.unset("error")})},e=function(t){var e,n;if(null!=(e=t.size?this.path.isa(t.type)?void 0:"convalue.BadType":"convalue.EmptyList"))return this.model.set({error:new Error(r.getText(e,t))}),this.listenToOnce(this.model,"change:value",(n=this,function(){return n.model.unset("error")}))},(i=this).query.service.fetchList(n).then(e,t)},c.prototype.events=function(){return{"change select":"setList"}},c.prototype.setList=function(){return this.model.set({value:this.$("select").val()})},c.prototype.setSuitableLists=function(){var t,e,n,i;if(!this.model.has("suitableLists"))return e=function(t){return i.model.set({suitableLists:t})},t=function(t){return n.model.set({error:t})},(n=i=this).fetchSuitableLists().then(e,t)},c.prototype.fetchSuitableLists=function(){return null!=this.__suitable_lists?this.__suitable_lists:this.__suitable_lists=this.query.service.fetchLists().then((e=this,function(i){var r,t;return t=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)(r=i[t]).size&&this.path.isa(r.type)&&n.push(r);return n}.call(e),n.all(t.map(a(e.query.model)))}));var e},c.prototype.getSuitableLists=function(){var t,e,n;return t={name:this.initialValue},n=this.model.get("suitableLists")||[],null==(e=l.findWhere(n,t))&&(e=t),l.uniq([e].concat(n),!1,"name")},c.prototype.template=function(t){return t=l.extend({formatList:e,getOptionValue:i,messages:r},o,t),s(t)},c.prototype.getData=function(){var e;return e=this.model.get("value"),{suitableLists:this.getSuitableLists(),isSelected:function(t){return t.name===e}}},c)}).call(this)},{"../core-view":3,"../messages":16,"../templates/helpers":68,"../templates/mustache-settings":69,"es6-promise":238,underscore:262}],194:[function(s,l,t){(function(){var t,e,a,h,n,i,r={}.hasOwnProperty;function o(){return o.__super__.constructor.apply(this,arguments)}i=s("underscore"),a=s("es6-promise").Promise,h=s("../utils/suggestion-source"),e=s("../messages"),t=s("./attribute-value-controls"),n=i.template('<label class="im-value-options">\n    <%- messages.getText(\'conbuilder.ExtraLabel\') %>\n    <input type="text" class="im-extra-value form-control"\n            placeholder="<%- state.extraPlaceholder %>"\n            value="<%- con.extraValue %>">\n</label>\n\n'),l.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,t),o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.state.set({extraPlaceholder:e.get("conbuilder.ExtraPlaceholder")}),this.listenTo(this.branding,"change:defaults.extraValue.path",this.reRender),this.listenTo(this.branding,"change:defaults.extraValue.value",function(){return this.state.set({extraPlaceholder:this.branding.get("defaults.extraValue.value")})}),this.listenTo(this.model,"change",this.reRender)},o.prototype.stateEvents=function(){return i.extend(o.__super__.stateEvents.apply(this,arguments),{"change:extraPlaceholder":this.reRender})},o.prototype.template=function(t){return o.__super__.template.apply(this,arguments)+n(t)},o.prototype.events=function(){return{"change .im-con-value-attr":"setValue","change .im-extra-value":"setExtraValue"}},o.prototype.setExtraValue=function(){var t,e;return(t=this.$("input.im-extra-value.tt-input")).length||(t=this.$("input.im-extra-value")),(e=t.val())?this.model.set({extraValue:e}):this.model.unset("extraValue")},o.prototype.setValue=function(){var t,e;return(t=this.$("input.im-con-value.tt-input")).length||(t=this.$("input.im-con-value")),(e=t.val())?this.model.set({value:e}):this.model.unset("value")},o.prototype.setBoth=function(){return this.setValue(),this.setExtraValue()},o.prototype.suggestExtra=function(){var t,e,n,i,r;return e=this.branding.get("defaults.extraValue.path"),r=this.branding.get("defaults.extraValue.extraFor"),null!=e&&this.model.get("path").isa(r)?(i=this.model.get("path")+"."+e,n=null!=this.__extra_suggestions?this.__extra_suggestions:this.__extra_suggestions=this.query.summarise(i),t=this.handleSuggestionSet.bind(this,this.$("input.im-extra-value"),"extraValue"),n.then(function(t){return t.results}).then(t)):a.resolve(!0)},o.prototype.suggestValue=function(){var e,t,n,o,i,s;return o=this.model.get("path"),i=this.query.service,e=o.getEndClass().name,t=i.fetchClassKeys().then(function(t){return t[e]}),null==this.__value_suggestions&&(this.__value_suggestions=t.then((s=this,function(i){var r,t;return(null!=i?i.length:void 0)?(t=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(this.query.summarise(o+r.replace(/^[^\.]+/,"")));return n}.call(s),a.all(t).then(function(t){return t.reduce(function(t,e){return t.concat(e.results)},[])})):[]}))),n=this.handleSuggestionSet.bind(this,this.$("input.im-con-value-attr"),"value"),this.__value_suggestions.then(n)},o.prototype.handleSuggestionSet=function(t,n,e){var i,r,o,s,a,l,u,c;if(0!==(l=e.length))return a=new h(e,l),s={minLength:0,highlight:!0},i={name:n+"_suggestions",source:a.suggest,displayKey:"item",templates:{footer:a.tooMany}},u=this,r=function(t){return function(t,e){return u.model.set(n,e.item)}},o=e[0].item,this.activateTypeahead(t,s,i,o,r(t),(c=this,function(){return c.setBoth()}))},o.prototype.provideSuggestions=function(){var t,e;return this.removeTypeAheads(),e=this.suggestValue(),t=this.suggestExtra(),a.all([t,e])},o.prototype.remove=function(){return o.__super__.remove.apply(this,arguments),this.branding.destroy()},o)}).call(this)},{"../messages":16,"../utils/suggestion-source":107,"./attribute-value-controls":113,"es6-promise":238,underscore:262}],195:[function(c,h,t){(function(){var e,n,t,i,r,o,s,a,l={}.hasOwnProperty;function u(){return u.__super__.constructor.apply(this,arguments)}a=c("underscore"),n=c("es6-promise").Promise,e=c("../messages"),t=c("../core-view"),i=c("../templates/helpers"),c("../templates/mustache-settings"),o=c("../utils/to-named-path"),r=a.template("<% if (candidateLoops.length) { %>\n    <%= select(candidateLoops, isSelected, 'form-control im-value-options im-con-value') %>\n<% } else { %>\n    <%- messages.getText('conbuilder.NoSuitableLoops') %>\n<% } %>\n"),s=function(t){var e,n;return n=t.path,e=t.name,{value:n.toString(),text:e}},h.exports=(function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(u,t),u.prototype.initialize=function(t){return this.query=t.query,u.__super__.initialize.apply(this,arguments),this.path=this.model.get("path"),this.type=this.path.getType(),this.setCandidateLoops(),this.listenTo(this.model,"change",this.reRender)},u.prototype.events=function(){return{"change select":"setLoop"}},u.prototype.setLoop=function(){return this.model.set({value:this.$("select").val()})},u.prototype.setCandidateLoops=function(){if(!this.model.has("candidateLoops"))return this.getCandidateLoops().then((e=this,function(t){return e.model.set({candidateLoops:t})}));var e},u.prototype.isSuitable=function(t){return(t.isa(this.type)||this.path.isa(t.getType()))&&this.path.toString()!==t.toString()},u.prototype.getCandidateLoops=function(){return null!=this.__candidate_loops?this.__candidate_loops:this.__candidate_loops=(e=this,function(){var t,r;return t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.getQueryNodes()).length;t<e;t++)r=n[t],this.isSuitable(r)&&i.push(r);return i}.call(e),n.all(t.map(o))}());var e},u.prototype.template=function(t){return r(a.extend({messages:e},i,t))},u.prototype.getData=function(){var r,e;return e=this.model.get("value"),{candidateLoops:function(){var t,e,n,i;for(i=[],t=0,e=(n=this.model.get("candidateLoops")||[]).length;t<e;t++)r=n[t],i.push(s(r));return i}.call(this),isSelected:function(t){return t.value===e}}},u)}).call(this)},{"../core-view":3,"../messages":16,"../templates/helpers":68,"../templates/mustache-settings":69,"../utils/to-named-path":109,"es6-promise":238,underscore:262}],196:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}e=i("underscore"),t=i("../core-view"),i("../templates"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.tagName="div",n.prototype.className="modal-footer",n.prototype.RERENDER_EVENT="change:error change:exportLink",n.prototype.parameters=["template","actionNames","actionIcons"],n.prototype.getData=function(){return e.extend({error:null,exportLink:null,disabled:!1,disabledReason:null},this.actionNames,this.actionIcons,n.__super__.getData.apply(this,arguments))},n.prototype.postRender=function(){return this.$("[title]").tooltip()},n)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],197:[function(u,c,t){(function(){var t,e,i,n,r,o,s,a={}.hasOwnProperty;function l(){return l.__super__.constructor.apply(this,arguments)}i=u("es6-promise").Promise,s=u("underscore"),r=u("../core-view"),t=u("../messages"),n=u("../templates"),o=n.template("modal_base"),e=u("./modal-footer"),c.exports=(function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(l,r),l.prototype.className=function(){return"modal fade"},l.prototype.initialize=function(){var n;return l.__super__.initialize.apply(this,arguments),this._promise=new i((n=this,function(t,e){n.resolve=t,n.reject=e})),this.listenTo(this.state,"change",this.renderFooter)},l.prototype.resolve=function(){throw new Error("resolved before initialisation")},l.prototype.reject=function(){throw new Error("rejected before initialisation")},l.prototype.dismissError=function(){return this.$(".modal-footer .alert").slideUp(250,(t=this,function(){return t.state.set({error:null})}));var t},l.prototype.events=function(){return{"click .modal-footer .alert .dismiss":"dismissError","click .modal-footer .btn-cancel":"hide","click .modal-footer button.btn-primary":"act","hidden.bs.modal":"onHidden","click .close":"hide"}},l.prototype.promise=function(){return this._promise},l.prototype.hide=function(){return this.resolve("dismiss")},l.prototype.act=function(){throw new Error("Not implemented.")},l.prototype.primaryIcon=function(){return null},l.prototype.Footer=e,l.prototype.renderFooter=function(){var t,e,n,i;if(this.rendered)return t=s.result(this,"dismissAction"),n=s.result(this,"primaryAction"),i=s.result(this,"primaryIcon"),e={template:this.footer,model:this.state,actionNames:{dismissAction:t,primaryAction:n},actionIcons:{primaryIcon:i}},this.renderChild("footer",new this.Footer(e),this.$(".modal-content"))},l.prototype.postRender=function(){return this.renderFooter()},l.prototype.onHidden=function(t){return(null==t||t.target===this.el)&&(this.resolve("dismiss"),this.shown=!1,this.remove())},l.prototype.remove=function(){return this.reject(new Error("unresolved before removal")),this.shown?this._hideModal():l.__super__.remove.call(this)},l.prototype.title=function(){return t.getText("modal.DefaultTitle")},l.prototype.dismissAction=function(){return t.getText("modal.Dismiss")},l.prototype.primaryAction=function(){return t.getText("modal.OK")},l.prototype.modalSize=function(){},l.prototype.body=function(){},l.prototype.renderTitle=function(){if(this.rendered)return this.$(".modal-title").text(s.result(this,"title"))},l.prototype.footer=n.templateFromParts(["modal_error","modal_footer"]),l.prototype.template=function(t){var e,n,i;return i=s.result(this,"title"),e=this.body(t),n="modal-"+s.result(this,"modalSize"),o({title:i,body:e,modalSize:n})},l.prototype.shown=!1,l.prototype.show=function(){var e,t,n,i;(t=this.promise()).then((i=this,function(){return i.remove()}),(n=this,function(){return n.remove()}));try{this._showModal(),this.trigger("shown",this.shown=!0)}catch(t){e=t,this.reject(e)}return t},l.prototype._showModal=function(){return this.$el.modal().modal("show")},l.prototype._hideModal=function(){return this.$el.modal("hide")},l)}).call(this)},{"../core-view":3,"../messages":16,"../templates":67,"./modal-footer":196,"es6-promise":238,underscore:262}],198:[function(b,w,t){(function(){function t(t,e){for(var n in e)d.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,i,n,r,o,s,a,l,u,c,h,p,f,d={}.hasOwnProperty;function g(){return g.__super__.constructor.apply(this,arguments)}function y(){return y.__super__.constructor.apply(this,arguments)}function v(){return v.__super__.constructor.apply(this,arguments)}function _(){return _.__super__.constructor.apply(this,arguments)}f=b("underscore"),b("backbone").Collection,r=b("../messages"),s=b("../templates"),n=b("../icons"),c=b("../core-view"),o=b("../core-model"),e=b("../core/collection"),b("../options"),i=b("../patterns").IS_BLANK,h=b("../utils/events").ignore,r.setWithPrefix("multivalue",{AddValue:"Add value",AddValueShort:"+",SaveValue:"Save changes"}),p=b("../templates/mustache-settings"),t(g,o),g.prototype.defaults=function(){return{editing:!1,scratch:null,selected:!0}},g.prototype.idAttribute="value",l=g,t(y,e),y.prototype.model=l,u=y,t(v,c),v.prototype.Model=l,v.prototype.tagName="tr",v.prototype.initialize=function(){return this.model.set({editing:!1,scratch:this.model.get("value")}),this.listenTo(this.model,"change:editing change:value change:selected",this.reRender)},v.prototype.events=function(){return{"click .input-group":function(t){return null!=t?t.stopPropagation():void 0},"click .im-edit":"editValue","keyup input":"updateScratch","change input":"updateScratch","click .im-save":"saveValue","click .im-cancel":"cancelEditing",click:"toggleSelected"}},v.prototype.updateScratch=function(t){return h(t),this.model.set({scratch:t.target.value})},v.prototype.saveValue=function(t){return h(t),this.model.set({editing:!1,value:this.model.get("scratch")})},v.prototype.cancelEditing=function(t){return h(t),this.model.set({editing:!1,scratch:this.model.get("value")})},v.prototype.editValue=function(t){return h(t),this.model.toggle("editing")},v.prototype.toggleSelected=function(t){return h(t),this.model.toggle("selected")},v.prototype.getData=function(){return f.extend({icons:n,messages:r},this.model.toJSON())},v.prototype.template=s.template("value-control-row",p),a=v,w.exports=(t(_,c),_.prototype.className="im-value-options im-multi-value-table",_.prototype.initialize=function(){var t,e,n,i;for(_.__super__.initialize.apply(this,arguments),this.values=new u,e=0,n=(i=this.model.get("values")||[]).length;e<n;e++)t=i[e],this.values.add({value:t});return this.listenTo(this.values,"change:selected change:value add",this.updateModel),this.listenTo(this.values,"add",this.renderValue),this.listenTo(this.values,"remove",this.removeValue)},_.prototype.stateEvents=function(){return{"change:value":this.onChangeNewValue}},_.prototype.modelEvents=function(){return{"change:op":this.onChangeOp,"change:values":this.onChangeValues}},_.prototype.onChangeValues=function(){var r,o;if(null==this.model.previous("values"))return r=this.model.get("values"),this.values.set(function(){var t,e,n,i;for(i=[],t=0,e=(n=null!=r?r:[]).length;t<e;t++)o=n[t],i.push({value:o});return i}())},_.prototype.onChangeOp=function(){var t;if(("="===(t=this.model.get("op"))||"!="===t)&&!this.model.has("value"))return this.model.set({values:null,value:this.values.first().get("value")})},_.prototype.events=function(){return{"keyup .im-new-multi-value":this.updateNewValue,"click .im-add":this.addValue}},_.prototype.onChangeNewValue=function(){return this.$(".im-new-multi-value").val(this.state.get("value"))},_.prototype.updateNewValue=function(){return this.state.set({value:this.$(".im-new-multi-value").val()})},_.prototype.addValue=function(t){var e,n;return h(t),null==(e=this.state.get("value"))||i.test(e)?(this.model.set({error:new Error("please enter a value")}),this.listenToOnce(this.state,"change:value",(n=this,function(){return n.model.unset("error")}))):(this.values.add({value:e}),this.state.unset("value"))},_.prototype.updateModel=function(){var r;return this.model.set({values:function(){var t,e,n,i;for(i=[],t=0,e=(n=this.values.where({selected:!0})).length;t<e;t++)r=n[t],i.push(r.get("value"));return i}.call(this)})},_.prototype.getData=function(){return{messages:r}},_.prototype.template=s.template("add-value-control"),_.prototype.postRender=function(){return this.$table=this.$("table"),this.renderRows()},_.prototype.renderRows=function(){return this.values.each((e=this,function(t){return e.renderValue(t)}));var e},_.prototype.removeValue=function(){return this.removeChild(m.id)},_.prototype.renderValue=function(t){return this.renderChild(t.id,new a({model:t}),this.$table)},_.prototype.remove=function(){return this.values.close(),_.__super__.remove.apply(this,arguments)},_)}).call(this)},{"../core-model":2,"../core-view":3,"../core/collection":5,"../icons":14,"../messages":16,"../options":63,"../patterns":64,"../templates":67,"../templates/mustache-settings":69,"../utils/events":81,backbone:235,underscore:262}],199:[function(i,o,t){(function(){var t,e,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}e=i("../messages"),t=i("./active-constraint"),e.set({"conbuilder.Apply":"Apply"}),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.model.set({new:!0,op:this.model.get("path").isAttribute()?"=":"LOOKUP"}),this.state.set({editing:!0})},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.$el.addClass("im-new"),this},n)}).call(this)},{"../messages":16,"./active-constraint":112}],200:[function(n,a,t){(function(){var i,t,e,r,o={}.hasOwnProperty;function s(){return s.__super__.constructor.apply(this,arguments)}r=n("underscore"),e=n("./modal"),i=n("./constraint-adder"),n("../templates"),t=n("../messages"),a.exports=(function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(s,e),s.prototype.className=function(){return"im-constraint-dialogue "+s.__super__.className.apply(this,arguments)},s.prototype.modalSize="lg",s.prototype.initialize=function(t){return this.query=t.query,s.__super__.initialize.apply(this,arguments),this.listenTo(this.query,"change:constraints",this.resolve),this.listenTo(this.query,"editing-constraint",(e=this,function(){return e.$(".im-add-constraint").removeClass("disabled")}));var e},s.prototype.events=function(){return r.extend(s.__super__.events.apply(this,arguments),{"click .im-add-constraint":"addConstraint",childremoved:(n=this,function(t,e){if(e instanceof i)return n.hide()})});var n},s.prototype.title=function(){return t.getText("constraints.AddNewFilter")},s.prototype.primaryAction=function(){return t.getText("constraints.AddFilter")},s.prototype.postRender=function(){var t,e;return e=this.$(".modal-footer"),t=this.$(".modal-body"),this.renderChild("adder",new i({buttonDelegate:e,query:this.query}),t),s.__super__.postRender.apply(this,arguments)},s)}).call(this)},{"../messages":16,"../templates":67,"./constraint-adder":128,"./modal":197,underscore:262}],201:[function(s,c,t){(function(){var e,t,h,i,r,n,a,l,o={}.hasOwnProperty;function u(){return this.createSubFinder=function(t,e){return function(){return t.apply(e,arguments)}}(this.createSubFinder,this),u.__super__.constructor.apply(this,arguments)}l=s("underscore"),h=s("../options"),t=s("../core-view"),e=s("./pathtree/attribute"),n=s("./pathtree/root"),i=s("./pathtree/reference"),r=s("./pathtree/reverse-reference"),a=function(t,e){return t.append(e)},c.exports=(function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(u,t),u.prototype.parameters=["model","query","chosenPaths","openNodes","view","trail"],u.prototype.tagName="ul",u.prototype.className="im-path-chooser",u.prototype.initialize=function(){var n,i,r,o,t,e,s;for(u.__super__.initialize.apply(this,arguments),this.path=l.last(this.trail)||this.model.get("root")||this.query.makePath(this.query.root),this.cd=this.path.getEndClass(),o=a.bind(null,this.path),t=0,e=(s=["attributes","references","collections"]).length;t<e;t++)this[i=s[t]]=function(){var t,e;for(r in e=[],t=this.cd[i])n=t[r],e.push(o(n));return e}.call(this);return this.listenTo(this.model,"change:allowRevRefs",this.render),this.listenTo(this.openNodes,"reset",this.render)},u.prototype.getDepth=function(){return this.trail.length},u.prototype.showRoot=function(){return 0===this.getDepth()&&this.model.get("canSelectReferences")},u.prototype.events=function(){return{scroll:this.onScroll}},u.prototype.onScroll=function(){var t,e,n;if(!this.state.get("ignoreScroll"))return e=this.el.scrollTop,t=this.state.has("scroll")?Math.abs(this.state.get("scroll")-e):0,0!==e||t<50?this.state.set({scroll:e}):l.defer((n=this,function(){return n.el.scrollTop=n.state.get("scroll")}))},u.prototype.startIgnoringScroll=function(){return this.state.set({ignoreScroll:!0})},u.prototype.startListeningForScroll=function(){return this.state.has("scroll")&&(this.el.scrollTop=this.state.get("scroll")),this.state.set({ignoreScroll:!1})},u.prototype.preRender=function(){return this.startIgnoringScroll()},u.prototype.postRender=function(){var t,e,n,i,r,o,s,a,l,u,c;for(r=h.get("ShowId"),this.showRoot()&&(i=this.createRoot(),this.renderChild("root",i)),o=0,a=(u=this.attributes).length;o<a;o++)e=u[o],!r&&"id"===e.end.name||(t=this.createAttribute(e),this.renderChild(e.toString(),t));for(s=0,l=(c=this.references.concat(this.collections)).length;s<l;s++)e=c[s],n=this.createReference(e),this.renderChild(e.toString(),n);return this.startListeningForScroll()},u.prototype.createRoot=function(){return new n({query:this.query,model:this.model,chosenPaths:this.chosenPaths,openNodes:this.openNodes,cd:this.cd})},u.prototype.createAttribute=function(t){return new e({model:this.model,chosenPaths:this.chosenPaths,view:this.view,query:this.query,trail:this.trail,path:t})},u.prototype.createReference=function(t){var e,n;return n=this.isLoop(t),e=this.model.get("allowRevRefs"),new(n&&!e?r:i)({model:this.model,chosenPaths:this.chosenPaths,query:this.query,trail:this.trail,path:t,view:this.view,openNodes:this.openNodes,createSubFinder:this.createSubFinder})},u.prototype.createSubFinder=function(t){return new u(l.extend({model:this.model,query:this.query,chosenPaths:this.chosenPaths,view:this.view,openNodes:this.openNodes},t))},u.prototype.isLoop=function(t){return!(null==t.end.reverseReference||!this.path.isReference()||!this.path.getParent().isa(t.end.referencedType)||this.path.end.name!==t.end.reverseReference)},u)}).call(this)},{"../core-view":3,"../options":63,"./pathtree/attribute":202,"./pathtree/reference":203,"./pathtree/reverse-reference":204,"./pathtree/root":205,underscore:262}],202:[function(u,c,t){(function(){var n,i,t,a,s,r,e,o={}.hasOwnProperty;function l(){return l.__super__.constructor.apply(this,arguments)}e=u("underscore"),t=u("../../core-view"),i=u("../../options"),n=u("../../icons"),s=function(t){return null!=t&&/\w/.test(t)},r=function(t){return null!=t?t.replace(/^.*\s*>/,""):void 0},a=function(t){return"<strong>"+t+"</strong>"},c.exports=(function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(l,t),l.prototype.tagName="li",l.prototype.events=function(){return{"click a":"handleClick"}},l.prototype.initialize=function(t){return this.chosenPaths=t.chosenPaths,this.view=t.view,this.query=t.query,this.path=t.path,this.trail=t.trail,l.__super__.initialize.apply(this,arguments),this.depth=this.trail.length+1,this.state.set({visible:!0,highlitName:null,name:this.path.toString()}),this.listenTo(this.chosenPaths,"add remove reset",this.handleChoice),this.listenTo(this.state,"change:visible",this.onChangeVisible),this.listenTo(this.state,"change:highlitName",this.render),this.listenTo(this.state,"change:displayName",this.render),this.path.getDisplayName().then((e=this,function(t){return e.state.set({displayName:t,name:r(t)})}));var e},l.prototype.onChangeVisible=function(){return this.$el.toggle(this.state.get("visible"))},l.prototype.getFilterPatterns=function(){var t,e,n,i,r,o;if(t=this.model.get("filter"),s(t)){for(o=[],n=0,i=(r=t.split(/\s+/)).length;n<i;n++)(e=r[n])&&o.push(new RegExp(e,"i"));return o}return[]},l.prototype.handleClick=function(t){var e;if(t.stopPropagation(),t.preventDefault(),!(this.model.get("dontSelectView")&&(null!=(e=this.view)?e.contains(this.path):void 0)))return this.chosenPaths.contains(this.path)?this.chosenPaths.remove(this.path):this.choose()},l.prototype.choose=function(){return this.model.get("multiSelect")?this.chosenPaths.add(this.path):this.chosenPaths.reset([this.path])},l.prototype.handleChoice=function(){return this.$el.toggleClass("active",this.chosenPaths.contains(this.path))},l.prototype.setHighlitName=function(t){return this.state.has("name")?this.state.set({highlitName:this.getHighlitName(t)}):this.state.once("change:name",(e=this,function(){return e.state.set({highlitName:e.getHighlitName(t)})}));var e},l.prototype.getHighlitName=function(t){var e,n,i,r,o,s;for(n=this.state.get("name"),null!=(s=this.path.end)&&s.name,e=n,r=0,o=t.length;r<o;r++)i=t[r],e=e.replace(i,a);return/strong/.test(e)?e:a(e)},l.prototype.getDisabled=function(){return!1},l.prototype.getData=function(){var t,e;return e=i.get("ShowId")?this.path+" ("+this.path.getType()+")":"",t=this.state.get("highlitName")?this.state.get("highlitName"):this.state.escape("name"),{icon:n.icon("Attribute"),title:e,name:t}},l.prototype.template=e.template('<a href="#" title="<%- title %>">\n  <%= icon %>\n  <span>\n    <%= name %>\n  </span>\n</a>'),l.prototype.render=function(){return l.__super__.render.apply(this,arguments),this.$el.toggleClass("disabled",this.getDisabled()),i.get("ShowId")&&this.$("a").tooltip({placement:"bottom"}),this.handleChoice(),null!=this.view&&this.$el.toggleClass("in-view",this.view.contains(this.path)),this},l)}).call(this)},{"../../core-view":3,"../../icons":14,"../../options":63,underscore:262}],203:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}e=o("../../icons"),t=o("./attribute"),n=o("../../utils/events").ignore,s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.initialize=function(t){return this.openNodes=t.openNodes,this.createSubFinder=t.createSubFinder,i.__super__.initialize.apply(this,arguments),this.state.set({collapsed:!0}),this.listenTo(this.openNodes,"add remove",this.setCollapsed),this.listenTo(this.state,"change:collapsed",this.onChangeCollapsed),this.setCollapsed()},i.prototype.setCollapsed=function(){var t;return null!=(t=this.state)?t.set({collapsed:!this.openNodes.contains(this.path)}):void 0},i.prototype.handleClick=function(t){return n(t),this.$(t.target).is("i")||!this.model.get("canSelectReferences")?this.openNodes.togglePresence(this.path):i.__super__.handleClick.call(this,t)},i.prototype.getData=function(){var t;return(t=i.__super__.getData.apply(this,arguments)).icon=e.icon(this.state.get("collapsed")?"ClosedReference":"OpenReference"),t},i.prototype.postRender=function(){return this.onChangeCollapsed()},i.prototype.onChangeCollapsed=function(){var t,e;return this.state.get("collapsed")?this.removeChild("subfinder"):(e=this.trail.concat([this.path]),t=this.createSubFinder({trail:e}),this.renderChild("subfinder",t))},i)}).call(this)},{"../../icons":14,"../../utils/events":81,"./attribute":202}],204:[function(i,o,t){(function(){var e,t,r={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}e=i("../../icons"),t=i("./reference"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.className="im-reverse-reference",n.prototype.getData=function(){var t;return(t=n.__super__.getData.apply(this,arguments)).icon+=" "+e.icon("ReverseRef"),t},n.prototype.handleClick=function(t){return t.preventDefault(),t.stopPropagation(),this.$el.tooltip("hide")},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.$el.attr({title:"Refers back to "+this.path.getParent().getParent()}).tooltip(),this},n)}).call(this)},{"../../icons":14,"./reference":203}],205:[function(n,o,t){(function(){var t,e,a,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}a=n("underscore"),e=n("../../icons"),t=n("./attribute"),o.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.className="im-rootclass",i.prototype.initialize=function(t){var e;return e=t.cd,this.openNodes=t.openNodes,t.trail=[],t.path=t.query.getPathInfo(e.name),i.__super__.initialize.call(this,t)},i.prototype.getData=function(){return a.extend(i.__super__.getData.call(this),{icon:e.icon("RootClass")})},i.prototype.handleClick=function(t){var r,e,o,s,n;return null!=t&&t.preventDefault(),null!=t&&t.stopPropagation(),this.$(t.target).is("i")||!this.model.get("canSelectReferences")?this.openNodes.size()?this.openNodes.reset([]):(n=this.path.getType(),r=n.collections,s=n.references,e=function(){var t,e,n,i;for(i=[],t=0,e=(n=a.values(s).concat(a.values(r))).length;t<e;t++)o=n[t],i.push(this.path.append(o.name));return i}.call(this),this.openNodes.reset(e)):i.__super__.handleClick.call(this,t)},i)}).call(this)},{"../../icons":14,"./attribute":202,underscore:262}],206:[function(i,s,t){(function(){var t,e,r,o={}.hasOwnProperty;function n(){return n.__super__.constructor.apply(this,arguments)}r=i("underscore"),t=i("../core-view"),e=i("../templates"),s.exports=(function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.Dialogue=function(){throw new Error("Not implemented")},n.prototype.longLabel=function(){throw new Error("Not implemented")},n.prototype.shortLabel=function(){throw new Error("Not implemented")},n.prototype.icon=function(){throw new Error("Not implemented")},n.prototype.template=e.template("modal-dialogue-opener"),n.prototype.labels=function(){return{ICON:r.result(this,"icon"),LONG:r.result(this,"longLabel"),SHORT:r.result(this,"shortLabel")}},n.prototype.parameters=["query"],n.prototype.initState=function(){return this.state.set({disabled:!1})},n.prototype.events=function(){return{click:this.onClick}},n.prototype.createDialogue=function(){return new this.Dialogue(this.dialogueOptions())},n.prototype.dialogueOptions=function(){return{query:this.query}},n.prototype.stateEvents=function(){return{"change:disabled":function(){return this.$(".btn.im-open-dialogue").toggleClass("disabled",this.state.get("disabled"))}}},n.prototype.onClick=function(t){var e,n,i;if(!this.state.get("disabled"))return e=this.createDialogue(),this.renderChild("dialogue",e),this.state.set({disabled:!0}),i=this,n=function(){return i.removeChild("dialogue"),document.body.classList.remove("modal-open"),r.defer(function(){return i.state.set({disabled:!1})})},e.show().then(n,n)},n)}).call(this)},{"../core-view":3,"../templates":67,underscore:262}],207:[function(p,f,t){(function(){var e,t,n,i,r,o,s,a,l,u,c={}.hasOwnProperty;function h(){return h.__super__.constructor.apply(this,arguments)}t=p("../core-view"),l=(u=a=p("../core/type-assertions")).UnionOf,o=u.Listenable,s=u.Structure,e=p("./column-manager/button"),n=p("./filter-dialogue/button"),r=p("./join-manager/button"),i=l(o,new s("History",{getCurrentQuery:a.Function})),f.exports=(function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(h,t),h.prototype.className="im-query-management",h.prototype.parameters=["history"],h.prototype.parameterTypes={history:i},h.prototype.initialize=function(){return h.__super__.initialize.apply(this,arguments),this.listenTo(this.history,"changed:current",this.reRender)},h.prototype.renderChildren=function(){var t;return t=this.history.getCurrentQuery(),this.renderChild("cols",new e({query:t})),this.renderChild("cons",new n({query:t})),this.renderChild("joins",new r({query:t}))},h)}).call(this)},{"../core-view":3,"../core/type-assertions":10,"./column-manager/button":119,"./filter-dialogue/button":168,"./join-manager/button":178}],208:[function(d,m,t){(function(){var n,t,u,e,c,h,i,r,o,s,a,l={}.hasOwnProperty,p=[].slice;function f(){return f.__super__.constructor.apply(this,arguments)}d("underscore"),n=d("jquery"),e=d("../core-view"),d("../templates"),i=d("../options"),r=d("./query-management-tools"),s=d("./undo-history"),h=d("./list-dialogue/button"),u=d("./code-gen-button"),c=d("./export-dialogue/button"),t=d("../utils/events").Bus,o=["im-query-management","im-history","im-query-consumers"],a=function(t){return'<div class="'+t+' clearfix"></div>'},m.exports=(function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(f,e),f.prototype.className="im-query-tools",f.prototype.parameters=["tableState","history","selectedObjects"],f.prototype.optionalParameters=["bus","consumerContainer","consumerBtnClass"],f.prototype.bus=new t,f.prototype.template=function(){return o.map(a).join("")},f.prototype.initialize=function(){return f.__super__.initialize.apply(this,arguments),this.listenTo(this.history,"changed:current",this.renderQueryConsumers)},f.prototype.renderChildren=function(){return this.renderManagementTools(),this.renderUndo(),this.renderQueryConsumers()},f.prototype.renderManagementTools=function(){return this.renderChildAt(".im-query-management",new r({history:this.history}))},f.prototype.renderUndo=function(){var t;return t=this.$(".im-history"),this.renderChild("undo",new s({collection:this.history}),t)},f.prototype.getConsumerContainer=function(){var t;return null!=this.consumerContainer?(this.consumerContainer.classList.add(i.get("StylePrefix")),this.consumerContainer.classList.add("im-query-consumers"),this.$(".im-query-management").addClass("im-has-more-space"),this.$(".im-history").addClass("im-has-more-space"),this.consumerContainer):(t=this.$(".im-query-consumers").empty()).length?t:void 0},f.prototype.renderQueryConsumers=function(){var t,e,n,i,r,o,s,a;if(t=this.getConsumerContainer()){var l;if(i=this.history.getCurrentQuery(),r=this.selectedObjects,n=new h({query:i,tableState:this.tableState,selected:r}),this.listenTo(n,"all",(l=this,function(){var t,e,n,i;return e=arguments[0],t=2<=arguments.length?p.call(arguments,1):[],(n=l.bus).trigger.apply(n,["list-action:"+e].concat(p.call(t))),(i=l.bus).trigger.apply(i,["list-action",e].concat(p.call(t)))})),this.renderChild("save",new c({query:i,tableState:this.tableState}),t),this.renderChild("code",new u({query:i,tableState:this.tableState}),t),this.renderChild("lists",n,t),this.consumerContainer&&this.consumerBtnClass)for(o=0,s=(a=["save","code","lists"]).length;o<s;o++)e=a[o],this.listenTo(this.children[e],"rendered",this.setButtonStyle);return this.setButtonStyle()}},f.prototype.setButtonStyle=function(){var t,e;if((e=this.consumerContainer)&&(t=this.consumerBtnClass))return n(".btn",e).addClass(t)},f)}).call(this)},{"../core-view":3,"../options":63,"../templates":67,"../utils/events":81,"./code-gen-button":115,"./export-dialogue/button":139,"./list-dialogue/button":186,"./query-management-tools":207,"./undo-history":229,jquery:256,underscore:262}],209:[function(C,T,t){(function(){function t(t,e){return function(){return t.apply(e,arguments)}}var r,e,n,i,o,s,a,l,u,c,h,p,f,d,m,g,y,v,_,b,w={}.hasOwnProperty;function x(){return this.canUseFormatter=t(this.canUseFormatter,this),this.unsetSelecting=t(this.unsetSelecting,this),this.setSelecting=t(this.setSelecting,this),x.__super__.constructor.apply(this,arguments)}b=C("underscore"),n=C("../core-view"),a=C("../options"),g=C("../templates"),s=C("../messages"),C("../core/collection"),C("../core-model"),y=C("../core/type-assertions"),f=C("../models/table"),e=C("../models/column-headers"),_=C("../models/uniq-items"),h=C("../models/rows"),p=C("../models/selected-objects"),o=C("../models/history"),r=C("../utils/cell-model-factory"),d=C("../utils/table-results"),c=C("./table/inner"),i=C("./table/error-notice"),u=C("./table/pagination"),l=C("./table/page-sizer"),m=C("./table/summary"),C("../messages/table"),v={message:"Unknown error",key:"error.Unknown"},T.exports=(function(t,e){for(var n in e)w.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(x,n),x.create=function(t){var e,n,i,r;return i=t.query,n=t.model,y.assertMatch(y.Query,i),null==n&&(n=new f),e=new o,r=new p(i.service),e.setInitialState(i),new x({history:e,model:n,selectedObjects:r})},x.prototype.Model=f,x.prototype.className="im-table-container",x.prototype.parameters=["history","selectedObjects"],x.prototype.optionalParameters=["model","columnHeaders","blacklistedFormatters"],x.prototype.parameterTypes={history:y.InstanceOf(o,"History"),selectedObjects:y.InstanceOf(p,"SelectedObjects")},x.prototype.cellModelFactory=null,x.prototype.initialize=function(){return x.__super__.initialize.apply(this,arguments),null==this.columnHeaders&&(this.columnHeaders=new e),null==this.blacklistedFormatters&&(this.blacklistedFormatters=new _),this.rows=new h,this.listenTo(this.history,"changed:current",this.onChangeQuery),this.listenTo(this.blacklistedFormatters,"reset add remove",this.buildColumnHeaders),this.listenTo(this.columnHeaders,"change:minimised",this.onChangeHeaderMinimised),this.onChangeQuery()},x.prototype.onChangeQuery=function(){var t,e,n,i;return e=(n=this.query=this.history.getCurrentQuery()).service,t=n.model,null==this.cellModelFactory&&(this.cellModelFactory=new r(e,t)),this.buildColumnHeaders(),this.fetchVersion().then((i=this,function(){return i.query.count(function(t,e){return i.model.set({error:t,count:e})}),i.setFreshness()}))},x.prototype.fetchVersion=function(){return this.query.service.fetchVersion().then((e=this,function(t){return e.model.set({version:t})})).then(null,function(t){return onConnectionError(t)});var e},x.prototype.onConnectionError=function(t){var e;return(e=new Error("Could not connect to server")).key="error.ConnectionError",this.model.set({error:e})},x.prototype.modelEvents=function(){return{"change:freshness change:start change:size":this.fillRows,"change:start change:size":this.overlayTable,"change:fill":this.removeOverlay,"change:freshness":this.resetPhase,"change:phase":this.onChangePhase,"change:error":this.onChangeError,"change:count":this.onChangeCount}},x.prototype.onChangePhase=function(){return this.removeOverlay(),this.reRender()},x.prototype.onChangeCount=function(){var t,e,n,i;if(n=(i=this.model.pick("start","count","size")).start,e=i.size,(t=i.count)<=n)return this.model.set({start:Math.max(0,t-e)})},x.prototype.resetPhase=function(){return this.model.set({phase:"FETCHING"})},x.prototype.onChangeError=function(){if(this.model.get("error"))return this.model.set({phase:"ERROR"})},x.prototype.remove=function(){return this.cellModelFactory.destroy(),delete this.cellModelFactory,x.__super__.remove.apply(this,arguments)},x.prototype.onChangeHeaderMinimised=function(t){var e,n;return n=this.query.makePath(t.get("path")),e=this.model.get("minimisedColumns"),t.get("minimised")?e.add(n):e.remove(n)},x.prototype.setSelecting=function(){return this.model.set({selecting:!0})},x.prototype.unsetSelecting=function(){return this.model.set({selecting:!1})},x.prototype.canUseFormatter=function(t){return null!=t&&!this.blacklistedFormatters.contains(t)},x.prototype.setFreshness=function(){return this.model.set({freshness:this.query.toXML()})},x.prototype.buildColumnHeaders=function(){var e,n,i,r;return i={silent:!0},n=this.model.get("minimisedColumns"),e=function(t){return n.contains(r.query.makePath(t.get("path")))},(r=this).columnHeaders.setHeaders(this.query,this.blacklistedFormatters),this.columnHeaders.forEach(function(t){return t.set({minimised:e(t)},i)})},x.prototype.fillRows=function(){var t,e,n,i,r,o,s,a;return n=(r=this.model.pick("start","size")).start,e=r.size,i=function(){return o.model.set({phase:"SUCCESS"})},s=o=this,t=function(t){return null==t&&(t=v),s.model.set({phase:"ERROR",error:t})},d.getCache(this.query).fetchRows(n,e).then((a=this,function(t){return a.fillRowsCollection(t)})).then(i,t).then(this.model.filled,this.model.filled)},x.prototype.fillRowsCollection=function(t){var o,e,n,s;return o=this.cellModelFactory.getCreator(this.query),n=this.model.get("start"),e=t.map((s=this,function(i,t){var r;return{id:s.query.toXML()+"#"+(n+t),index:n+t,query:s.query.toXML(),cells:function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(o(r));return n}()}})),this.rows.set(e)},x.prototype.overlayTable=function(){var t,e,n,i;if(null!=(n=this.children.inner)?n.rendered:void 0)return e=this.children.inner.$el,this.$el.offset(),e.offset(),this.removeOverlay(),this.overlay=document.createElement("div"),this.overlay.className="im-table-overlay im-hidden",(t=this.make("h1",{},s.getText("table.OverlayText"))).style.top=e.height()/2+"px",this.overlay.appendChild(t),this.el.appendChild(this.overlay),b.delay((i=this,function(){var t;return null!=(t=i.overlay)?t.classList.remove("im-hidden"):void 0}),100)},x.prototype.removeOverlay=function(){return null!=this.overlay&&this.el.removeChild(this.overlay),delete this.overlay},x.prototype.template=function(){switch(this.model.get("phase")){case"FETCHING":return this.renderFetching();case"ERROR":return this.renderError();case"SUCCESS":return this.renderTable();default:throw new Error("Unknown phase: "+this.model.get("phase"))}},x.prototype.renderFetching=function(){return g.template("table-building")(this.getBaseData())},x.prototype.renderError=function(){var t;return this.removeChild("error"),this.children.error=t=new i({query:this.query,model:this.model}),t.render().el},x.prototype.renderTable=function(){var t,e;return t=document.createDocumentFragment(),this.renderWidgets(t),e=new c(b.extend(b.pick(this,c.prototype.parameters),{tableState:this.model})),this.renderChild("inner",e,t),t},x.prototype.renderWidgets=function(t){var e,n,i,r,o,s;if(null==t&&(t=this.el),(r=b.chain(a.get("TableWidgets")).map(function(t,e){var n;return n=t.enabled,{name:e,index:t.index,enabled:n}}).where({enabled:!0}).sortBy("index").pluck("name").value()).length){for((n=document.createElement("div")).className="im-table-controls",(e=document.createElement("div")).style.clear="both",o=0,s=r.length;o<s;o++)"place"+(i=r[o])in this&&this["place"+i](n);return n.appendChild(e),t.appendChild(n)}},x.prototype.renderWidget=function(t,e,n){var i,r;return i=new n({model:this.model,getQuery:(r=this,function(){return r.history.getCurrentQuery()})}),this.renderChild(t,i,e)},x.prototype.placePagination=function(t){return this.renderWidget("pagination",t,u)},x.prototype.placePageSizer=function(t){return this.renderWidget("pagesizer",t,l)},x.prototype.placeTableSummary=function(t){return this.renderWidget("tablesummary",t,m)},x)}).call(this)},{"../core-model":2,"../core-view":3,"../core/collection":5,"../core/type-assertions":10,"../messages":16,"../messages/table":28,"../models/column-headers":39,"../models/history":45,"../models/rows":57,"../models/selected-objects":58,"../models/table":61,"../models/uniq-items":62,"../options":63,"../templates":67,"../utils/cell-model-factory":75,"../utils/table-results":108,"./table/error-notice":214,"./table/inner":217,"./table/page-sizer":220,"./table/pagination":221,"./table/summary":227,underscore:262}],210:[function(h,p,t){(function(){function t(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,r,i,o,s,a={}.hasOwnProperty;function l(){return l.__super__.constructor.apply(this,arguments)}function u(){return u.__super__.constructor.apply(this,arguments)}function c(){return c.__super__.constructor.apply(this,arguments)}s=h("underscore"),e=h("../../core-view"),i=h("../../templates"),o=h("../../utils/build-skipset"),h("../../messages/table"),p.exports=(t(l,e),l.prototype.tagName="tbody",l.prototype.parameters=["makeCell","collection","history"],l.prototype.collectionEvents=function(){return{reset:this.reRender,add:this.onRowAdded,remove:this.onRowRemoved}},l.prototype.template=function(){},l.prototype.initialize=function(){return l.__super__.initialize.apply(this,arguments),this._skipSets={}},l.prototype.renderChildren=function(){var e,n;return this.collection.isEmpty()?this.handleEmptyTable():(e=document.createDocumentFragment("tbody"),this.collection.forEach((n=this,function(t){return n.addRow(t,e)})),this.el.appendChild(e))},l.prototype.onRowAdded=function(t){return this.removeChild("apology"),this.addRow(t)},l.prototype.onRowRemoved=function(t){if(this.removeChild(t.id),this.collection.isEmpty())return this.handleEmptyTable()},l.prototype.addRow=function(t,e){var n,i;return null==e&&(e=this.el),n=this.skipped(t),i=new r({model:t,makeCell:this.makeCell,skipped:n}),this.renderChild(t.id,i,e)},l.prototype.handleEmptyTable=function(){return this.renderChild("apology",new n({history:this.history}))},l.prototype.skipped=function(n){var t,e,i;return null!=(t=this._skipSets)[e=n.get("query")]?t[e]:t[e]=(i=this,function(){var t,e;return e=n.get("cells").map(i.makeCell),t=o(e),e.forEach(function(t){return t.remove()}),t}())},l),t(u,e),u.prototype.tagName="tr",u.prototype.parameters=["makeCell","skipped"],u.prototype.postRender=function(){var t,e,n,i,r,o;for(o=[],n=i=0,r=(e=this.model.get("cells").map(this.makeCell)).length;i<r;n=++i)t=e[n],this.skipped[t.model.get("column")]||o.push(this.renderChild(n,t));return o},r=u,t(c,e),c.prototype.tagName="tr",c.prototype.className="im-empty-apology",c.prototype.template=i.template("no-results"),c.prototype.parameters=["history"],c.prototype.events=function(){return{"click .btn-undo":function(){return this.history.popState()}}},c.prototype.getData=function(){return s.extend(c.__super__.getData.apply(this,arguments),{selectList:this.history.getCurrentQuery().views,canUndo:1<this.history.length})},n=c}).call(this)},{"../../core-view":3,"../../messages/table":28,"../../templates":67,"../../utils/build-skipset":72,underscore:262}],211:[function(t,e,n){(function(){var o,s,a;s=t("../../models/nested-table"),a=t("./subtable"),o=t("./cell"),e.exports=function(e,n){var i,r;return e.root.replace(/\/service\/?$/,""),r=function(t){var e;return null!=(e=n.getFormatter(t.get("node"),t.get("column")))&&n.canUseFormatter(e)?e:null},i=function(t){return t instanceof s?new a({query:n.query,model:t,cellify:i,expandedSubtables:n.expandedSubtables}):new o({model:t,service:e,popovers:n.popoverFactory,selectedObjects:n.selectedObjects,tableState:n.tableState,formatter:r(t)})}}}).call(this)},{"../../models/nested-table":48,"./cell":212,"./subtable":226}],212:[function(y,v,t){(function(g){(function(){var n,t,e,i,o,a,r,l,u,s,c,h,p,f={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function m(){return m.__super__.constructor.apply(this,arguments)}h=y("underscore"),n=y("jquery"),e=y("../../core-view"),l=y("../../templates"),a=y("../../options"),o=y("../../messages"),t=y("../../models/cell"),i=y("../../formatting"),o.setWithPrefix("table.cell",{Link:"link",NullEntity:"No <%= type %>",PreviewTitle:function(t){return t.types.join(a.get("DynamicObjects.NameDelimiter"))}}),r=y("../../models/selected-objects"),c=y("../../core/type-assertions"),s=l.template("classy-popover")({classes:"item-preview"}),p=function(t,e){return null!=e&&null!=t.model.findSharedAncestor(t,e)},u=h.memoize(p,function(t,e){return t+"<"+(null!=e?e:"!")}),v.exports=(function(t,e){for(var n in e)f.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(m,e),m.prototype.Model=t,m.prototype.tagName="td",m.prototype.className="im-result-field",m.prototype.id=function(){return h.uniqueId("im_table_cell_")},m.prototype.formatter=i.defaultFormatter,m.prototype.parameters=["model","service","selectedObjects","tableState","popovers"],m.prototype.optionalParameters=["formatter"],m.prototype.parameterTypes={model:c.InstanceOf(t,"models/cell"),selectedObjects:c.InstanceOf(r,"SelectedObjects"),formatter:c.Callable,tableState:c.Model,service:c.Service,popovers:new c.Structure("HasGet",{get:c.Function})},m.prototype.initialize=function(){return m.__super__.initialize.apply(this,arguments),this.listen()},m.prototype.initState=function(){return this.setSelected(),this.setSelectable(),this.setHighlit(),this.setMinimised()},m.prototype.getPath=function(){return this.model.get("column")},m.prototype.getTypes=function(){var t,e,n,i,r,o;if(n=this.model.get("node"),null==(e=this.model.get("entity").get("classes")))return[n];for(o=[],i=0,r=e.length;i<r;i++)t=e[i],o.push(n.model.makePath(t));return o},m.prototype.listen=function(){return this.listenToEntity(),this.listenToSelectedObjects(),this.listenToOptions(),this.listenToTableState()},m.prototype.listenToOptions=function(){return this.listenTo(a,"change:TableCell.IndicateOffHostLinks",this.reRender),this.listenTo(a,"change:TableCell.ExternalLinkIcons",this.reRender),this.listenTo(a,"change:TableCell.PreviewTrigger",this.onChangeTrigger)},m.prototype.listenToTableState=function(){var t;return t=this.tableState,this.listenTo(t,"change:selecting",this.setInputDisplay),this.listenTo(t,"change:previewOwner",this.closeOwnPreview),this.listenTo(t,"change:highlitNode",this.setHighlit),this.listenTo(t,"change:minimisedColumns",this.setMinimised)},m.prototype.listenToSelectedObjects=function(){var t;return t=this.selectedObjects,this.listenTo(t,"add remove reset",this.setSelected),this.listenTo(t,"add remove reset change:commonType change:node",this.setSelectable)},m.prototype.modelEvents=function(){return{"change:entity":this.onChangeEntity}},m.prototype.stateEvents=function(){return{"change:highlit change:selected":this.setActiveClass,"change:selectable":this.onChangeSelectable,"change:selected":this.setInputChecked,"change:showPreview":this.onChangeShowPreview,"change:minimised":this.reRender}},m.prototype.events=function(){var t,e;if(t={"show.bs.popover":this.onShowPreview,"hide.bs.popover":this.onHidePreview,"click a.im-cell-link":this.onClickCellLink},"hover"===(e=a.get("TableCell").PreviewTrigger))t["mouseover .im-cell-link"]=this.showPreview,t["mouseout .im-cell-link"]=this.hidePreview,t.click=this.activateChooser;else{if("click"!==e)throw new Error("Unknown cell preview: "+e);t.click=this.clickTogglePreview}return t},m.prototype.onChangeTrigger=function(){return this.destroyPreview(),this.initPreview(),this.delegateEvents()},m.prototype.onClickCellLink=function(t){var e;if(!this.tableState.get("selecting"))return(e=n.Event("view.im.object")).object=this.model.get("entity").toJSON(),this.$el.trigger(e),e.isDefaultPrevented()?t.preventDefault():void 0;t.preventDefault()},m.prototype.closeOwnPreview=function(){if(this.el.id!==this.tableState.get("previewOwner"))return this.hidePreview(),this._hidePreview()},m.prototype.listenToEntity=function(){return this.listenTo(this.model.get("entity"),"change",this.updateValue)},m.prototype.onShowPreview=function(){return this.tableState.set({previewOwner:this.el.id})},m.prototype.onHidePreview=function(){if(this.el.id===this.tableState.get("previewOwner"))return this.tableState.set({previewOwner:null})},m.prototype.toggleSelection=function(){var t,e,n,i;if(n=(t=this.model.get("entity")).get("id"),null!=t){if(e=this.selectedObjects.get(n))return this.selectedObjects.remove(e);if(null==(i=this.getMostSuitableIdentity()))throw new Error("None of our identities is a compatible");return this.selectedObjects.add(i)}},m.prototype.getMostSuitableIdentity=function(){var n,e,r,t,i,o,s;return i=this.model.get("node"),n=i.model.getSubclassesOf(i.getType()),r=this.model.get("entity").get("id"),t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getTypes()).length;t<e;t++)s=n[t],i.push({class:String(s),id:r});return i}.call(this),this.selectedObjects.isEmpty()?h.find(t,function(t){var e;return e=t.class,0<=d.call(n,e)}):(e=i.model.makePath(this.selectedObjects.state.get("commonType")),h.all(t,function(t){return u(e,t.class)}),o=h.sortBy(t,function(t){return i.model.getAncestorsOf(t.class).length}),h.last(o))},m.prototype.setSelected=function(){return this.state.set({selected:null!=this.selectedObjects.get(this.model.get("entity"))})},m.prototype.setSelectable=function(){var t,e,n,i;return t=this.selectedObjects.state.get("commonType"),e=this.selectedObjects.state.get("node"),i=this.selectedObjects.size(),n=(null==e||e===String(this.model.get("node")))&&(0===i||this.isCompatibleWith(t)),this.state.set({selectable:n})},m.prototype.isCompatibleWith=function(e){return this.getTypes().some(function(t){return u(t,e)})},m.prototype.setHighlit=function(){var t,e;return e=this.model.get("node"),t=this.tableState.get("highlitNode"),this.state.set({highlit:null!=t&&String(e)===String(t)})},m.prototype.setMinimised=function(){var t,e;return e=this.model.get("column"),t=this.tableState.get("minimisedColumns").contains(e),this.state.set({minimised:t})},m.prototype.onChangeEntity=function(){var t;return t=this.model.previous("entity"),delete this._has_id,null!=t&&this.stopListening(t),this.listenToEntity()},m.prototype.clickTogglePreview=function(){return this.activateChooser()||this.state.toggle("showPreview")},m.prototype.activateChooser=function(){var t;if(this.hasID())return t=this.tableState.get("selecting"),this.state.get("selectable")&&t?this.toggleSelection():void 0},m.prototype.hasID=function(){return null!=this._has_id?this._has_id:this._has_id=null!=this.model.get("entity").get("id")},m.prototype.showPreview=function(){return this.state.set({showPreview:!0})},m.prototype.hidePreview=function(){return this.state.set({showPreview:!1})},m.prototype._showPreview=function(){var t,e,n;if(this.rendered){if(this.tableState.get("selecting"))return;return t=a.get("TableCell"),n=this,e=function(){var t;if(n.state.get("showPreview"))return null!=(t=n.children.popover)?t.render():void 0},"hover"===t.PreviewTrigger?h.delay(e,t.HoverDelay):e()}},m.prototype._hidePreview=function(){var t,e;if(null!=(t=this.children.popover)?t.rendered:void 0)return null!=(e=this.popoverTarget)?e.popover("hide"):void 0},m.prototype.onChangeShowPreview=function(){return this.state.get("showPreview")?this._showPreview():this._hidePreview()},m.prototype.onChangeSelectable=function(){return this.setDisabledCellClass(),this.setInputDisabled()},m.prototype.updateValue=function(){return h.defer((t=this,function(){return t.$(".im-displayed-value").html(t.getFormattedValue())}));var t},m.prototype.setActiveClass=function(){var t,e,n;return t=(n=this.state.pick("highlit","selected")).highlit,e=n.selected,this.$el.toggleClass("active",t||e)},m.prototype.setInputChecked=function(){return this.$("input").prop({checked:this.getInputState().checked})},m.prototype.setInputDisplay=function(){return this.$("input").css({display:this.getInputState().display})},m.prototype.setDisabledCellClass=function(){return this.$el.toggleClass("im-not-selectable",!this.state.get("selectable"))},m.prototype.setInputDisabled=function(){return this.$("input").prop({disabled:this.getInputState().disabled})},m.prototype.template=l.template("table-cell"),m.prototype.getData=function(){var t,e,n,i,r,o,s;for(e in n=(i=a.get("TableCell")).IndicateOffHostLinks?g.location.host:/.*/,(t=this.model.toJSON()).formattedValue=this.getFormattedValue(),t.input=this.getInputState(),t.icon=null,t.url=r=t.entity["report:uri"],t.isForeign=r&&!r.match(n),t.target=t.isForeign?"_blank":"",t.NULL_VALUE=l.null_value,s=i.ExternalLinkIcons)o=s[e],(null!=r?r.match(e):void 0)&&null==t.icon&&(t.icon=o);return h.extend(this.getBaseData(),t)},m.prototype.getFormattedValue=function(){var t,e,n;return t=(n=this.model.pick("entity","value")).entity,null!=(e=n.value)?this.formatter.call(null,t,this.service,e):null},m.prototype.getInputState=function(){var t,e;return t=this.tableState.get("selecting"),{checked:(e=this.state.pick("selected","selectable")).selected,disabled:!e.selectable,display:t?"inline":"none"}},m.prototype.canHavePreview=function(){return this.hasID()&&!this.state.get("minimised")},m.prototype.postRender=function(){return this.setAttrClass(),this.setActiveClass(),this.setMinimisedClass(),this.setDisabledCellClass(),this.setFormatterClasses(),this.initPreview()},m.prototype.setAttrClass=function(){var t,e,n,i,r;if(a.get("TableCell.AddDataClasses")){for(t=this.model.get("column").getType(),this.$el.addClass("im-type-"+t.toLowerCase()),n=0,i=(r=this.getTypes()).length;n<i;n++)e=r[n],this.$el.addClass(String(e));return this.$el.addClass(this.model.get("column").end.name)}},m.prototype.setMinimisedClass=function(){return this.$el.toggleClass("im-minimised",this.state.get("minimised"))},m.prototype.setFormatterClasses=function(){var t,e;if(null!=(t=this.formatter.classes)&&this.$el.addClass(t),null!=(e=this.formatter.target))return this.$el.addClass(e)},m.prototype.getPreviewContainer=function(){var t,e;for(e=[],t=[".im-query-results",".im-table-container",".panel","table","body"];t.length&&0===e.length;)e=this.$el.closest(t.shift());return e},m.prototype.removeAllChildren=function(){return this.destroyPreview(),null!=this.children.popover&&(this.stopListeningTo(this.children.popover),this.children.popover.rendered&&this.$el.popover("destroy")),m.__super__.removeAllChildren.apply(this,arguments)},m.prototype.destroyPreview=function(){var t;if(null!=this.children.popover)return this.stopListeningTo(this.children.popover),this.children.popover.rendered&&null!=(t=this.popoverTarget)&&t.popover("destroy"),delete this.popoverTarget,this.removeChild("popover")},m.prototype.popoverTarget=null,m.prototype.initPreview=function(){var e,n,t,i,r;if(null==this.children.popover&&this.canHavePreview())return e=this.popovers.get(this.model.get("entity")),t=a.get("TableCell.PreviewTrigger"),this.popoverTarget="hover"===t?this.$(".im-cell-link"):this.$el,n=o.getText.bind(o,"table.cell.PreviewTitle"),this.listenToOnce(e,"rendered",(i=this,function(){var t;return t=i.getPreviewContainer(),i.popoverTarget.popover({trigger:"manual",template:s,placement:"auto left",container:t,html:!0,title:function(){return n({types:i.model.get("typeNames")})},content:e.el})})),this.listenTo(e,"rendered",(r=this,function(){return r.popoverTarget.popover("show")})),this.children.popover=e},m)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core-view":3,"../../core/type-assertions":10,"../../formatting":13,"../../messages":16,"../../models/cell":37,"../../models/selected-objects":58,"../../options":63,"../../templates":67,jquery:256,underscore:262}],213:[function(s,a,t){(function(){var t,i,e,n,r={}.hasOwnProperty;function o(t){var e,n;if(n=t.query,e=t.model,!n)throw new Error("No query in call to new DropDownColumnSummary");if(!(e instanceof i))throw new Error("No PathModel in call to new DropDownColumnSummary");o.__super__.constructor.call(this,{query:n,view:e.pathInfo()})}n=s("underscore"),t=s("../facets/facet-view"),i=s("../../models/path"),e=s("../../utils/events").ignore,a.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,t),o.prototype.className=function(){return o.__super__.className.apply(this,arguments)+" im-dropdown-summary"},o.prototype.events=function(){return n.extend(o.__super__.events.apply(this,arguments),{click:e})},o.prototype.postRender=function(){return o.__super__.postRender.apply(this,arguments),this.$el.addClass(this.className())},o)}).call(this)},{"../../models/path":56,"../../utils/events":81,"../facets/facet-view":151,underscore:262}],214:[function(d,m,t){(function(f){(function(){var t,s,e,a,l,u,i,c,r,n,h,o={}.hasOwnProperty;function p(){return p.__super__.constructor.apply(this,arguments)}h=d("underscore"),u=d("imjs"),d("../../options"),t=d("../../core-view"),e=d("../../templates"),s=d("../../messages"),i=d("../../utils/indent-xml"),c=d("../../utils/mailto"),n=d("../../utils/with-cdn-resource"),a=d("../../version"),d("../../messages/error"),r=h.partial(n,"prettify","prettyPrintOne"),l=function(t){return/(Type|Reference)Error/.test(String(t))?"client":"server"},m.exports=(function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(p,t),p.prototype.className="im-error-notice",p.prototype.parameters=["model","query"],p.prototype.helpers=function(){return h.extend(p.__super__.helpers.apply(this,arguments),{indent:i})},p.prototype.template=e.template("table-error"),p.prototype.getData=function(){var t,e,n,i,r,o;return n=this.model.get("error"),o=new Date,r=s.getText("error.mail.Subject"),t=this.query.service.help,e=l(n),console.error(n),i=c.href(t,r,"We encountered an error running a query from an\nembedded result table.\n\npage:       "+f.location+"\nservice:    "+this.query.service.root+"\nerror:      "+n+"\ndate-stamp: "+o+"\n\n-------------------------------\nIMJS:       "+u.VERSION+"\n-------------------------------\nIMTABLES:   "+a+"\n-------------------------------\nQUERY:      "+this.query.toXML()+"\n-------------------------------\nSTACK:      "+(null!=n?n.stack:void 0)),h.extend(p.__super__.getData.apply(this,arguments),{domain:e,mailto:i,query:this.query.toXML()})},p.prototype.postRender=function(){var e,n;return n=i(this.query.toXML()),e=this.$(".query-xml"),r(function(t){return e.html(t(h.escape(n)))})},p.prototype.events=function(){return{"click .im-show-query":function(){return this.$(".query-xml").slideToggle(),this.$(".im-show-query").toggleClass("active")},"click .im-show-error":function(){return this.$(".error-message").slideToggle(),this.$(".im-show-error").toggleClass("active")}}},p)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core-view":3,"../../messages":16,"../../messages/error":22,"../../options":63,"../../templates":67,"../../utils/indent-xml":88,"../../utils/mailto":92,"../../utils/with-cdn-resource":110,"../../version":111,imjs:247,underscore:262}],215:[function(n,i,t){(function(){var s,t,a,r={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}a=n("underscore"),t=n("../../core-view"),s=n("./header"),i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.tagName="thead",e.prototype.parameters=["history","expandedSubtables","blacklistedFormatters","columnHeaders"],e.prototype.template=function(){},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.columnHeaders,"add reset sort",this.reRender),this.listenTo(this.columnHeaders,"remove",function(t){return this.removeChild(t.id)}),this},e.prototype.renderChildren=function(){var t,e,n;return t=document.createDocumentFragment(),n=document.createElement("tr"),t.appendChild(n),e={query:this.history.getCurrentQuery(),expandedSubtables:this.expandedSubtables,blacklistedFormatters:this.blacklistedFormatters},this.columnHeaders.each(this.renderHeader(n,e)),this.$el.html(t)},e.prototype.renderHeader=function(i,r){return o=this,function(t,e){var n;return n=new s(a.extend({model:t},r)),o.renderChild(t.id,n,i)};var o},e)}).call(this)},{"../../core-view":3,"./header":216,underscore:262}],216:[function(w,x,t){(function(){function t(t,e){return function(){return t.apply(e,arguments)}}var a,e,n,i,r,o,s,l,u,c,h,p,f,d,m,g,y,v={}.hasOwnProperty,_=[].slice;function b(){return this.toggleColumnVisibility=t(this.toggleColumnVisibility,this),this.showFilterSummary=t(this.showFilterSummary,this),this.showColumnSummary=t(this.showColumnSummary,this),this.showSummary=t(this.showSummary,this),b.__super__.constructor.apply(this,arguments)}y=w("underscore"),n=w("../../core-view"),e=w("../../core/collection"),h=w("../../templates"),w("../../messages"),l=w("../../options"),a=w("../../utils/css-class-set"),g=w("../../utils/sort-query-by-path"),m=w("../../utils/on-change"),o=w("../../models/header"),r=w("../formatted-sorting"),c=w("../constraints/single-column"),i=w("./column-summary"),u=w("./outer-join-summary"),d=w("../../utils/events").ignore,w("../../messages/table"),s=function(t,e){return function(){return t.get(e)}},p=function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},f=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},x.exports=(function(t,e){for(var n in e)v.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(b,n),b.prototype.Model=o,b.prototype.tagName="th",b.prototype.className="im-column-th",b.prototype.RERENDER_EVENT=m(["composed","expanded","minimised","numOfCons","outerJoined","parts","path","sortable","sortDirection"]),b.prototype.template=h.template("column-header"),b.prototype.namePopoverTemplate=h.template("column_name_popover"),b.prototype.parameters=["query"],b.prototype.optionalParameters=["blacklistedFormatters","expandedSubtables"],b.prototype.expandedSubtables=new e,b.prototype.blacklistedFormatters=new e,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.listenTo(this.query,"showing:column-summary",this.removeMySummary),this.listenTo(l,"change:icons",this.reRender),this.createClassSets()},b.prototype.path=function(){return this.model.pathInfo()},b.prototype.createClassSets=function(){return this.classSets={},this.classSets.headerClasses=new a({"im-column-header":!0,"im-minimised-th":s(this.model,"minimised"),"im-is-composed":s(this.model,"composed"),"im-has-constraint":s(this.model,"numOfCons")}),this.classSets.colTitleClasses=new a({"im-col-title":!0,"im-hidden":s(this.model,"minimised")})},b.prototype.removeMySummary=function(t){if(!t.equals(this.model.pathInfo()))return this.removeChild("summary"),this.$(".dropdown.open").removeClass("open")},b.prototype.onSubtableExpanded=function(t){if(t.toString().match(this.model.getView()))return this.model.set({expanded:!0})},b.prototype.onSubtableCollapsed=function(t){if(t.toString().match(this.model.getView()))return this.model.set({expanded:!1})},b.prototype.getData=function(){var t,e,n,i,r,o,s;return t=3<=(s=this.model.get("parts")).length?_.call(s,0,o=s.length-2):(o=0,[]),i=s[o++],n=s[o++],e=t.length,r=new a({"im-title-part im-parent":!0,"im-root-parent":!e,"im-non-root-parent":e,"im-last":!n}),y.extend({penultClasses:r,last:n,penult:i},this.classSets,b.__super__.getData.apply(this,arguments))},b.prototype.events=function(){return{"click .im-col-sort":"setSortOrder","click .im-col-minumaximiser":"toggleColumnVisibility","click .im-col-filters":"showFilterSummary","click .im-subtable-expander":this.toggleSubTable,"click .im-col-remover":"removeColumn","hidden.bs.dropdown":function(){return this.removeChild("summary")},"shown.bs.dropdown":"onDropdownShown","toggle .im-th-button":"summaryToggled","click .summary-img":this.showColumnSummary,"click .im-col-composed":this.addFormatterToBlacklist}},b.prototype.postRender=function(){return this.setTitlePopover(),this.announceExpandedState(),this.activateTooltips()},b.prototype.activateTooltips=function(){return this.$(".im-th-button").tooltip({placement:"top",container:this.el})},b.prototype.onDropdownShown=function(n){return y.defer(function(){var t,e;if(delete n.target.style.right,(t=n.target.getBoundingClientRect()).left<0)return e=t.left+"px",n.target.style.right=e})},b.prototype.addFormatterToBlacklist=function(){return this.blacklistedFormatters.add({formatter:this.model.get("formatter")})},b.prototype.announceExpandedState=function(){if(this.model.get("expanded"))return this.query.trigger("expand:subtables",this.model.get("path"))},b.prototype.setTitlePopover=function(){if(l.get("TableHeader.FullPathPopoverEnabled"))return this.$(".im-col-title").popover({content:(t=this,function(){return t.namePopoverTemplate(t.getData())}),container:this.el,placement:"bottom",html:!0});var t},b.prototype.summaryToggled=function(t,e){if(d(t),t.target===t.currentTarget)return e?void 0:this.removeChild("summary")},b.prototype.hideTooltips=function(){return this.$(".im-th-button").tooltip("hide")},b.prototype.removeColumn=function(t){var r,o;return d(t),this.hideTooltips(),o=this.model.getView(),this.query.removeFromSelect(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.query.views).length;t<e;t++)(r=n[t]).match(o)&&i.push(r);return i}.call(this))},b.prototype.checkHowFarOver=function(t){var e;if(e=this.$el.closest(".im-table-container"),t.offset().left+350>=e.offset().left+e.width())return this.$el.addClass("too-far-over")},b.prototype.showSummary=function(t,e,n){var i,r,o,s,a;if(d(n),r=this.$(t),o=this.path(),r.hasClass("open"))return this.query.trigger("hiding:column-summary",o),r.removeClass("open"),null!=(a=this.children.summary)&&a.$el.hide(),this.removeChild("summary"),!1;if(this.$(".dropdown.open").removeClass("open"),this.query.trigger("showing:column-summary",o),s=new e({query:this.query,model:this.model}),!(i=this.$(t+" .dropdown-menu")).length)throw new Error(t+" not found");return i.empty(),this.renderChild("summary",s,i),r.addClass("open"),this.onDropdownShown({target:i[0]}),!0},b.prototype.ensureDropdownIsWithinTable=function(t,e,n){var i,r,o,s,a;if(null==n&&(n=360),r=t.getBoundingClientRect(),null!=(s=this.$el.closest("table")[0])){if(o=f(),i=this.$(e+" .dropdown-menu"),o<=n)return i.addClass("im-fullwidth-dropdown").css({width:o});if(i.css({width:null}),!(n>=f()))return a=s.getBoundingClientRect(),r.left+n>a.right?this.$(e+" .dropdown-menu").addClass("dropdown-menu-right"):void 0}},b.prototype.showColumnSummary=function(t){var e,n;if(e=this.model.get("isReference")?u:i,this.showSummary(".im-summary",e,t))return n=p(),this.$(".im-item-table").css({"max-height":Math.max(350,n/2)}),this.ensureDropdownIsWithinTable(t.target,".im-summary")},b.prototype.showFilterSummary=function(t){if(this.showSummary(".im-filter-summary",c,t))return this.ensureDropdownIsWithinTable(t.target,".im-filter-summary",500)},b.prototype.toggleColumnVisibility=function(t){return d(t),this.model.toggle("minimised")},b.prototype.setSortOrder=function(t){return d(t),this.model.get("replaces").length?this.showSummary(".im-col-sort",r,t):(g(this.query,this.model.getView()),this.$(".im-col-sort").removeClass("open"))},b.prototype.toggleSubTable=function(t){return d(t),this.expandedSubtables.toggle(this.model.pathInfo())},b)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../messages":16,"../../messages/table":28,"../../models/header":44,"../../options":63,"../../templates":67,"../../utils/css-class-set":79,"../../utils/events":81,"../../utils/on-change":93,"../../utils/sort-query-by-path":105,"../constraints/single-column":135,"../formatted-sorting":169,"./column-summary":213,"./outer-join-summary":219,underscore:262}],217:[function(v,_,t){(function(){var e,t,n,i,r,o,s,a,l,u,c,h,p,f,d,m,g={}.hasOwnProperty;function y(){return this.canUseFormatter=function(t,e){return function(){return t.apply(e,arguments)}}(this.canUseFormatter,this),y.__super__.constructor.apply(this,arguments)}m=v("underscore"),n=v("../../core-view"),p=v("../../templates"),i=v("../../formatting"),o=v("../../models/path-set"),t=v("../../models/column-headers"),s=v("../../utils/popover-factory"),r=v("../../models/history"),h=v("../../models/table"),l=v("../../models/selected-objects"),a=v("../item-preview"),f=v("../../core/type-assertions"),e=v("./cell-factory"),u=v("./body"),c=v("./head"),d=function(n){return function(t,e){return n(e,t)}},_.exports=(function(t,e){for(var n in e)g.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(y,n),y.prototype.className="im-results-table table table-striped table-bordered",y.prototype.tagName="table",y.prototype.throbber=p.template("table-throbber"),y.prototype.parameters=["history","columnHeaders","rows","tableState","blacklistedFormatters","selectedObjects"],y.prototype.parameterTypes={history:f.InstanceOf(r,"History"),blacklistedFormatters:f.Collection,rows:f.Collection,tableState:f.InstanceOf(h,"TableModel"),columnHeaders:f.InstanceOf(t,"ColumnHeaders"),selectedObjects:f.InstanceOf(l,"SelectedObjects")},y.prototype.initialize=function(){var t;return y.__super__.initialize.apply(this,arguments),t=(this.query=this.history.getCurrentQuery()).service,this.expandedSubtables=new o,this.popoverFactory=new s(t,a),this.cellFactory=e(t,this),this.listenTo(this.blacklistedFormatters,"reset add remove",this.renderBody),this.listenTo(this.history,"changed:current",this.setQuery)},y.prototype.setQuery=function(){return this.query=this.history.getCurrentQuery()},y.prototype.getFormatter=d(i.getFormatter),y.prototype.canUseFormatter=function(t){return null!=t&&!this.blacklistedFormatters.findWhere({formatter:t})},y.prototype.renderChildren=function(){return this.renderHeaders(),this.renderBody()},y.prototype.renderHeaders=function(){return this.renderChild("head",new c(m.pick(this,c.prototype.parameters)))},y.prototype.renderBody=function(){return this.renderChild("body",new u({collection:this.rows,history:this.history,makeCell:this.cellFactory}))},y.prototype.remove=function(){return this.expandedSubtables.close(),delete this.expandedSubtables,this.popoverFactory.destroy(),delete this.popoverFactory,delete this.cellFactory,y.__super__.remove.apply(this,arguments)},y)}).call(this)},{"../../core-view":3,"../../core/type-assertions":10,"../../formatting":13,"../../models/column-headers":39,"../../models/history":45,"../../models/path-set":55,"../../models/selected-objects":58,"../../models/table":61,"../../templates":67,"../../utils/popover-factory":98,"../item-preview":172,"./body":210,"./cell-factory":211,"./head":215,underscore:262}],218:[function(n,i,t){(function(){var o,t,e,s,r={}.hasOwnProperty;function a(){return a.__super__.constructor.apply(this,arguments)}s=n("underscore"),t=n("../modal"),e=n("../../templates").large_table_disuader,o={ACCEPT:"accept",CONSTRAIN:"constrain",BACK:"back",FWD:"forward",EXPORT:"export",DISMISS:"dismiss"},i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(a,t),a.prototype.className=function(){return"im-page-size-sanity-check fade "+a.__super__.className.apply(this,arguments)},a.prototype.template=s.template(e),a.prototype.act=function(){return this.resolve("accept")},a.prototype.events=function(){return s.extend(a.__super__.events.apply(this,arguments),{"click .btn-primary":(r=this,function(){return r.resolve(o.ACCEPT)}),"click .add-filter-dialogue":(i=this,function(){return i.resolve(o.CONSTRAIN)}),"click .page-backwards":(n=this,function(){return n.resolve(o.BACK)}),"click .page-forwards":(e=this,function(){return e.resolve(o.FWD)}),"click .download-menu":(t=this,function(){return t.resolve(o.EXPORT)})});var t,e,n,i,r},a)}).call(this)},{"../../templates":67,"../modal":197,underscore:262}],219:[function(f,d,t){(function(){function t(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,r,o,s,a,l,u={}.hasOwnProperty;function c(){return c.__super__.constructor.apply(this,arguments)}function h(){return h.__super__.constructor.apply(this,arguments)}function p(){return p.__super__.constructor.apply(this,arguments)}l=f("underscore"),n=f("../../core-view"),a=f("../../templates"),e=f("../../core/collection"),r=f("../../models/path"),i=f("./column-summary"),t(c,e),c.prototype.model=r,s=c,t(h,n),h.prototype.parameters=["showPathSummary"],h.prototype.className="im-subpath im-outer-joined-path",h.prototype.tagName="li",h.prototype.template=l.template('<a href="#">'+a.column_manager_path_name+"</a>"),h.prototype.modelEvents=function(){return{change:this.reRender}},h.prototype.events=function(){return{click:this.onClick}},h.prototype.onClick=function(t){return t.stopPropagation(),t.preventDefault(),this.showPathSummary(this.model)},o=h,d.exports=(t(p,n),p.prototype.parameters=["query"],p.prototype.className="im-summary-selector",p.prototype.tagName="ul",p.prototype.initialize=function(){var t,e,n,i;for(p.__super__.initialize.apply(this,arguments),this.subColumns=new s,e=0,n=(i=this.model.get("replaces")).length;e<n;e++)t=i[e],this.subColumns.add(this.query.makePath(t));return this.path=new r(this.query.makePath(this.model.get("path")))},p.prototype.getSubpaths=function(){return this.subColumns},p.prototype.postRender=function(){var t,n,e,i;return 1===(t=this.getSubpaths()).length?this.showPathSummary(t.first()):(n=function(t){return e.showPathSummary(t)},(e=this).getSubpaths().each((i=this,function(t,e){return i.renderChild(e,new o({model:t,showPathSummary:n}))})))},p.prototype.showPathSummary=function(t){var e;return this.undelegateEvents(),this.removeAllChildren(),e=new i({query:this.query,model:t}),(this.children.summ=e).setElement(this.el),e.render()},p)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../models/path":56,"../../templates":67,"./column-summary":213,underscore:262}],220:[function(p,f,t){(function(){var t,e,a,n,i,l,r,o,s,u={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function h(){return h.__super__.constructor.apply(this,arguments)}s=p("underscore"),r=p("./paging"),n=p("../has-dialogues"),t=p("../../core-view"),o=p("../../templates"),e=p("../../events"),l=p("../new-filter-dialogue"),a=p("../export-dialogue"),i=p("./large-table-disuader"),f.exports=(function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(h,t),h.include(r),h.include(n),h.prototype.tagName="form",h.prototype.className="im-page-sizer im-table-control form-inline",h.prototype.sizes=[[10],[25],[50],[100],[250]],h.prototype.parameters=["getQuery"],h.prototype.initialize=function(){var r,t;if(h.__super__.initialize.apply(this,arguments),null!=(t=this.model.get("size"))&&c.call(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.sizes).length;t<e;t++)r=n[t][0],i.push(r);return i}.call(this),t)<0)return this.sizes=[[t,t]].concat(this.sizes)},h.prototype.events=function(){return{submit:e.suppress,"change select":"changePageSize"}},h.prototype.modelEvents=function(){return{"change:size":function(t,e){return this.$("select").val(e)},"change:count":this.reRender}},h.prototype.changePageSize=function(t){var e,n,i,r,o,s;return n=this.$(t.target),r=parseInt(n.val(),10),i=this.model.get("size"),e=function(){return o.model.set({size:r})},(o=this).aboveSizeThreshold(r)?this.whenAcceptable(r).then((s=this,function(t){if("accept"===t)return e();switch(n.val(i),t){case"back":return s.goBack(1);case"forward":return s.goForward(1);case"constrain":return s.openDialogue(new l({query:s.getQuery()}));case"export":return s.openDialogue(a({query:s.getQuery()}));default:return console.debug("dismissed dialogue",t)}})).then(null,function(t){return console.error("Error handling dialogues",t)}):e()},h.prototype.whenAcceptable=function(t){return this.openDialogue(new i({model:{size:t}}))},h.prototype.template=o.template("page_sizer"),h.prototype.getData=function(){var r,t,o,e,n;return r=this.model.get("count"),e=this.model.get("size"),(n=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.sizes).length;t<e;t++)o=n[t],(null==r||o[0]<r)&&i.push(o);return i}.call(this)).length&&r<this.sizes[this.sizes.length-1][0]&&((t=s.find(n,function(t){return t[0]===r}))?t[1]+=t[0]+" (All)":n.push([r,r+" (All)"])),{size:e,sizes:n}},h.prototype.pageSizeFeasibilityThreshold=250,h.prototype.aboveSizeThreshold=function(t){return!!(t&&t>=this.pageSizeFeasibilityThreshold)||!t&&this.model.get("count")>=this.pageSizeFeasibilityThreshold},h)}).call(this)},{"../../core-view":3,"../../events":12,"../../templates":67,"../export-dialogue":138,"../has-dialogues":171,"../new-filter-dialogue":200,"./large-table-disuader":218,"./paging":222,underscore:262}],221:[function(a,l,t){(function(){var t,e,o,n,i,r={}.hasOwnProperty;function s(){return s.__super__.constructor.apply(this,arguments)}i=a("underscore"),e=a("../../core-view"),t=a("./paging"),n=function(t){return t.replace(/\s+/g,"")},o=function(t){return"string"==typeof t?parseInt(n(t),10):t},l.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(s,e),s.include(t),s.prototype.tagName="nav",s.prototype.className="im-table-pagination im-table-control",s.prototype.RERENDER_EVENT="change:start change:count change:size",s.prototype.template=i.template('<ul class="pagination">\n    <li class="hidden-xs <%= gotoStart || \'im-goto-start\' %>" title="Go to start">\n        <a class="im-pagination-button">&#x21e4;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveBack || \'im-go-back-5\' %>"\n        title="Go back five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x219e;</a>\n    </li>\n    <li class="<%= goOneBack || \'im-go-back-1\' %>"\n        title="Go to previous page">\n        <a class="im-pagination-button">&larr;</a>\n    </li>\n    <li class="im-current-page">\n        <% if (useSelect) { %>\n          <form class="im-page-form form form-inline">\n            <select class="form-control">\n              <% for (i = 0; i < max; i++) { %>\n                <option\n                  <%= selected(i) ? \'selected\' : void 0 %>\n                  value="<%= i * size %>">\n                  page <%= i + 1 %>\n                </option>\n              <% } %>\n            </select>\n          </form>\n        <% } else { %>\n          <a href="#">&hellip;</a>\n          <form class="im-page-form form form-inline"\n                style="display:none;">\n            <div class="control-group">\n                <input type="number"\n                       value="<%= currentPage %>"\n                       max="<%= max %>"\n                       min="<%= min %>"\n                       class="form-control im-page-number">\n            </div>\n          </form>\n        <% } %>\n    </li>\n    <li class="<%= goOneForward || \'im-go-fwd-1\' %>"\n        title="Go to next page">\n        <a class="im-pagination-button">&rarr;</a>\n    </li>\n    <li class="hidden-xs hidden-sm <%= goFiveForward || \'im-go-fwd-5\' %>"\n        title="Go forward five pages"\n        class="visible-desktop">\n        <a class="im-pagination-button">&#x21a0;</a>\n    </li>\n    <li class="hidden-xs <%= gotoEnd || \'im-goto-end\' %>"\n        title="Go to last page">\n        <a class="im-pagination-button">&#x21e5;</a>\n    </li>\n</ul>\n'),s.prototype.modelEvents=function(){return{"change:count":this.setVisible}},s.prototype.getData=function(){var t,e,n,i,r;return r=this.model.toJSON(),i=r.start,n=r.size,t=r.count,{max:e=this.getMaxPage(),min:1,size:n,currentPage:this.getCurrentPage(),gotoStart:0===i?"disabled":void 0,goFiveBack:i<5*n?"disabled":void 0,goOneBack:i<n?"disabled":void 0,gotoEnd:t-n<=i?"disabled":void 0,goFiveForward:t-6*n<=i?"disabled":void 0,goOneForward:t-n<=i?"disabled":void 0,selected:function(t){return i===t*n},useSelect:e<=200}},s.prototype.postRender=function(){return this.$("li").tooltip({placement:"top"}),this.setVisible()},s.prototype.setVisible=function(){var t;return t=this.getMaxPage(),this.$el.toggleClass("im-hidden",t<2)},s.prototype.events=function(){return{"submit .im-page-form":"pageFormSubmit","click .im-current-page a":"clickCurrentPage","change .im-page-form select":"goToChosenPage","blur .im-page-form input":"pageFormSubmit","click .im-goto-start":(o=this,function(){return o.goTo(0)}),"click .im-go-back-5":(r=this,function(){return r.goBack(5)}),"click .im-go-back-1":(i=this,function(){return i.goBack(1)}),"click .im-go-fwd-5":(n=this,function(){return n.goForward(5)}),"click .im-go-fwd-1":(e=this,function(){return e.goForward(1)}),"click .im-goto-end":(t=this,function(){return t.goTo((t.getMaxPage()-1)*t.model.get("size"))})};var t,e,n,i,r,o},s.prototype.goToChosenPage=function(t){var e;return e=o(this.$(t.target).val()),this.goTo(e)},s.prototype.clickCurrentPage=function(t){var e;if(e=this.model.get("size"),!(this.model.get("count")<=e))return this.$(t.target).hide(),this.$("form").show().find("input").focus()},s.prototype.pageFormSubmit=function(t){var e,n,i,r;if(null!=t&&t.stopPropagation(),null!=t&&t.preventDefault(),r=this.$(".im-page-form"),(n=this.$(".im-page-form input")).size())return 1<=(e=o(n[0].value))?(i=Math.min(this.getMaxPage(),e),this.goTo((i-1)*this.model.get("size")),this.$(".im-current-page > a").show(),r.hide()):(r.find(".control-group").addClass("error"),inp.val(null))},s)}).call(this)},{"../../core-view":3,"./paging":222,underscore:262}],222:[function(t,e,n){(function(){n.getCurrentPage=function(){var t,e,n;return e=(n=this.model.toJSON()).start,t=n.size,Math.floor(e/t)+1},n.getMaxPage=function(){var t,e,n,i;return t=(e=(i=this.model.toJSON()).count)%(n=i.size)==0?0:1,Math.floor(e/n)+t},n.goTo=function(t){return this.model.set({start:t})},n.goToPage=function(t){return this.model.set({start:(t-1)*this.model.get("size")})},n.goBack=function(t){var e,n,i;return n=(i=this.model.toJSON()).start,e=i.size,this.goTo(Math.max(0,n-t*e))},n.goForward=function(t){var e,n,i;return n=(i=this.model.toJSON()).start,e=i.size,this.goTo(Math.min(this.getMaxPage()*e,n+t*e))}}).call(this)},{}],223:[function(l,u,t){(function(){function t(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,r,n,i,o={}.hasOwnProperty;function s(){return s.__super__.constructor.apply(this,arguments)}function a(){return a.__super__.constructor.apply(this,arguments)}i=l("underscore"),e=l("../../core-view"),n=l("../../templates"),l("../../messages/subtables"),t(s,e),s.prototype.tagName="th",s.prototype.parameters=["columnModel","model","query"],s.prototype.template=n.template("table-subtables-header"),s.prototype.getData=function(){return i.extend(s.__super__.getData.apply(this,arguments),this.columnModel.pick("columnName"))},s.prototype.modelEvents=function(){return{"change:displayName":this.reRender}},s.prototype.events=function(){return{"click a":this.removeView}},s.prototype.removeView=function(){var t;return this.query.removeFromSelect(null!=(t=this.model.get("replaces"))?t:this.model.get("path"))},s.prototype.postRender=function(){return this.$("[title]").tooltip()},s.prototype.initialize=function(){return s.__super__.initialize.apply(this,arguments),this.listenTo(this.columnModel,"change:columnName",this.reRender)},s.prototype.remove=function(){return delete this.columnModel,s.__super__.remove.apply(this,arguments)},r=s,u.exports=(t(a,e),a.prototype.tagName="thead",a.prototype.template=function(){return"<tr></tr>"},a.prototype.parameters=["collection","columnModel","query"],a.prototype.collectionEvents=function(){return{"add remove":this.reRender}},a.prototype.renderChildren=function(){var n,i;return n=this.el.querySelector("tr"),this.collection.forEach((i=this,function(t,e){return i.renderChild(e,new r({model:t,query:i.query,columnModel:i.columnModel}),n)}))},a.prototype.remove=function(){return delete this.columnModel,a.__super__.remove.apply(this,arguments)},a)}).call(this)},{"../../core-view":3,"../../messages/subtables":26,"../../templates":67,underscore:262}],224:[function(o,s,t){(function(){var t,n,e,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}t=o("../../core-view"),n=o("./subtable-header"),e=o("../../utils/build-skipset"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.tagName="table",i.prototype.className="im-subtable table table-condensed table-striped",i.prototype.parameters=["query","headers","model","rows","cellify"],i.prototype.render=function(){var t,e,n,i,r,o;for(this.removeAllChildren(),this.rendered&&(this.el.innerHTML=""),1<this.headers.length&&this.renderHead(),n=document.createElement("tbody"),t=i=0,r=(o=this.rows).length;i<r;t=++i)e=o[t],this.appendRow(e,t,n);return this.el.appendChild(n),this.trigger("rendered",this.rendered=!0),this},i.prototype.renderHead=function(t){var e;return e=new n({query:this.query,collection:this.headers,columnModel:this.model}),this.renderChild("thead",e,t)},i.prototype.buildSkipped=function(t){return null!=this._skipped?this._skipped:this._skipped=e(t,this.headers)},i.prototype.appendRow=function(i,t,e){var r,n,o,s,a,l,u,c,h;for(l=document.createElement("tr"),e.appendChild(l),o=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(this.cellify(r));return n}.call(this),a=this.buildSkipped(o),h=[],s=u=0,c=o.length;u<c;s=++u)a[(n=o[s]).model.get("column")]||h.push(this.renderChild("cell-"+t+"-"+s,n,l));return h},i)}).call(this)},{"../../core-view":3,"../../utils/build-skipset":72,"./subtable-header":223}],225:[function(o,s,t){(function(){var t,e,n,r={}.hasOwnProperty;function i(){return i.__super__.constructor.apply(this,arguments)}t=o("../../core-view"),e=o("../../messages"),n=o("../../templates"),o("../../messages/subtables"),s.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.className="im-subtable-summary",i.prototype.tagName="span",i.prototype.template=n.template("table-subtable-summary"),i.prototype.parameters=["model","state"],i.prototype.modelEvents=function(){return{"change:contentName":this.reRender}},i.prototype.events=function(){return{click:this.onClick}},i.prototype.onClick=function(t){return null!=t&&t.stopPropagation(),this.$el.tooltip("hide"),this.state.toggle("open")},i.prototype.postRender=function(){return this.$el.tooltip({title:this.model.get("rows").length?e.getText("subtables.OpenHint"):void 0,placement:"auto right"})},i)}).call(this)},{"../../core-view":3,"../../messages":16,"../../messages/subtables":26,"../../templates":67}],226:[function(m,g,t){(function(){function t(t,e){for(var n in e)p.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,r,o,s,a,l,u,c,h,p={}.hasOwnProperty;function f(){return f.__super__.constructor.apply(this,arguments)}function d(){return d.__super__.constructor.apply(this,arguments)}h=m("underscore"),n=m("../../core-view"),r=m("../../options"),e=m("../../core/collection"),u=m("../../templates"),c=m("../../core/type-assertions"),i=m("../../models/nested-table"),s=m("../../models/path"),l=m("./subtable-summary"),a=m("./subtable-inner"),m("../../utils/events").ignore,t(f,e),f.prototype.model=s,o=f,g.exports=(t(d,n),d.prototype.tagName="td",d.prototype.className="im-result-subtable",d.prototype.Model=i,d.prototype.parameters=["query","cellify","expandedSubtables"],d.prototype.parameterTypes={query:c.Query,cellify:c.Function,expandedSubtables:c.Collection},d.prototype.initialize=function(){return d.__super__.initialize.apply(this,arguments),this.headers=new o,this.listenTo(this.expandedSubtables,"add remove reset",this.onChangeExpandedSubtables),this.buildHeaders()},d.prototype.getPath=function(){return this.model.get("column")},d.prototype.initState=function(){var t;return t=r.get("Subtables.Initially.expanded")||this.expandedSubtables.contains(this.getPath()),this.state.set({open:t})},d.prototype.stateEvents=function(){return{"change:open":this.onChangeOpen}},d.prototype.onChangeOpen=function(){var t;return t=this.el.querySelector(".im-table-wrapper"),this.state.get("open")?this.renderTable(t)?this.$(t).slideDown():void 0:this.$(t).slideUp()},d.prototype.onChangeExpandedSubtables=function(){return this.state.set({open:this.expandedSubtables.contains(this.getPath())})},d.prototype.template=u.template("table-subtable"),d.prototype.renderChildren=function(){return this.renderChildAt(".im-subtable-summary",new l({model:this.model,state:this.state})),this.onChangeOpen()},d.prototype.tableRendered=!1,d.prototype.renderTable=function(t){var e,n;return n=this.model.get("rows"),this.tableRendered||0===n.length?this.tableRendered:(e=new a(h.extend({rows:n},h.pick(this,a.prototype.parameters))),this.renderChild("inner",e,t),this.tableRendered=!0)},d.prototype.buildHeaders=function(){var i,r;if(null!=(r=this.model.get("rows")[0]))return this.headers.set(function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(new s(i.get("column")));return n}())},d)}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../core/type-assertions":10,"../../models/nested-table":48,"../../models/path":56,"../../options":63,"../../templates":67,"../../utils/events":81,"./subtable-inner":224,"./subtable-summary":225,underscore:262}],227:[function(n,i,t){(function(){var t,e,o,r={}.hasOwnProperty;function s(){return s.__super__.constructor.apply(this,arguments)}o=n("underscore"),t=n("../../core-view"),e=n("../../templates"),n("../../messages/table"),i.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(s,t),s.prototype.className="im-table-summary hidden-phone",s.prototype.RERENDER_EVENT="change:start change:size change:count",s.prototype.getData=function(){var t,e,n,i,r;return i=(r=e=s.__super__.getData.apply(this,arguments)).start,n=r.size,t=r.count,o.extend(e,{page:{count:t,first:i+1,last:0===n?0:Math.min(i+n,t)}})},s.prototype.template=e.template("count_summary"),s)}).call(this)},{"../../core-view":3,"../../messages/table":28,"../../templates":67,underscore:262}],228:[function(o,a,t){(function(){var u,c,t,s,n,h,e,r={}.hasOwnProperty,p=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function i(){return i.__super__.constructor.apply(this,arguments)}e=o("underscore"),c=o("es6-promise").Promise,u=o("../messages"),t=o("../core-view"),u.set({"typeconstraints.BadType":"<%- type %> is not a legal value for this constraint. Choose another from the list.","typeconstraints.OneClass":"<%- name %> is the only legal value this constraint can have. You can always remove it though."}),h=o("../utils/to-named-path"),n=o("../templates/helpers"),s=function(t){return{value:t.path,text:t.name}},a.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.parameters=["query","model"],i.prototype.initialize=function(){var e;return i.__super__.initialize.apply(this,arguments),this.model.swap("type",(e=this,function(t){return null!=t?t:e.model.get("path").getType().name})),this.listenTo(u,"change",this.reRender),this.listenTo(this.state,"change:subclasses",this.reRender),this.setSubclasses()},i.prototype.getData=function(){var o,e;return e=this.model.get("type"),{select:n.select,messages:u,subclasses:function(){var t,e,n,i,r;for(r=[],t=0,e=(i=null!=(n=this.state.get("subclasses"))?n:[]).length;t<e;t++)o=i[t],r.push(s(o));return r}.call(this),isSelected:function(t){return e===t.value}}},i.prototype.events=function(){return{"change .im-value-type":"setType"}},i.prototype.setType=function(){return this.model.set({type:this.$(".im-value-type").val()})},i.prototype.template=e.template("<label class=\"span4\">\n    <%- messages.getText('conbuilder.IsA') %>\n</label>\n<% if (subclasses.length == 1) { %>\n  <select disabled class=\"form-control\">\n      <option><%- subclasses[0].text %></option>\n  </select>\n<% } else { %>\n  <%= select(subclasses, isSelected, 'form-control im-value-type') %>\n<% } %>\n  \n"),i.prototype.setSubclasses=function(){if(!this.model.has("subclasses"))return this.getPossibleTypes().then((n=this,function(t){var e;return 1===t.length&&(e=u.getText("typeconstraints.OneClass",t[0]),n.model.set({error:{message:e,level:"warning"}})),n.state.set({subclasses:t})}));var n},i.prototype.getPossibleTypes=function(){var r,t,e,o,n,i,s,a,l;return t=(l=this.model.toJSON()).path,a=l.type,n=this.query.getSubclasses(),o=this.query.model,delete n[t],r=o.getPathInfo(t.toString(),n).getType(),i=function(){var t,e,n,i;for(i=[],t=0,e=(n=o.getSubclassesOf(r)).length;t<e;t++)(s=n[t])!==r.name&&i.push(s);return i}(),e=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)s=i[t],n.push(o.makePath(s));return n}().map(h),p.call(i,a)<0&&(this.model.set({error:new Error(u.getText("typeconstraints.BadType",this.model.toJSON()))}),e.push(c.resolve({path:a,name:this.model.get("typeName")}))),c.all(e)},i)}).call(this)},{"../core-view":3,"../messages":16,"../templates/helpers":68,"../utils/to-named-path":109,"es6-promise":238,underscore:262}],229:[function(h,p,t){(function(){function t(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var e,n,i,g,r,o,s,y,a,l={}.hasOwnProperty;function u(){return u.__super__.constructor.apply(this,arguments)}function c(){return c.__super__.constructor.apply(this,arguments)}a=h("underscore"),e=h("../core-view"),o=h("../templates"),i=h("../messages"),g=h("../options"),r=h("./undo-history/step"),s=function(t){return"state-"+t.get("revision")},h("../messages/undo"),t(u,e),u.prototype.parameters=["more"],u.prototype.tagName="li",u.prototype.className="im-step im-ellipsis",u.prototype.template=function(){return a.escape(i.getText("undo.MoreSteps",{more:this.more})+" ...")},u.prototype.attributes=function(){return{title:i.getText("undo.ShowAllStates",{n:this.more})}},u.prototype.postRender=function(){return this.$el.tooltip({placement:"right"})},u.prototype.events=function(){return{click:function(t){return t.preventDefault(),t.stopPropagation(),this.state.toggle("showAll")}}},n=u,y=function(t,e,n){var i;return i=n[e-1],0===e||e===n.length-1||t.get("count")!==i.get("count")},p.exports=(t(c,e),c.prototype.parameters=["collection"],c.prototype.className="btn-group im-undo-history",c.prototype.template=o.template("undo-history"),c.prototype.events=function(){return{"click .btn.im-undo":"revertToPreviousState","click .im-toggle-trivial":"toggleTrivial"}},c.prototype.initState=function(){return this.state.set({showAll:!1,hideTrivial:!1})},c.prototype.stateEvents=function(){return{"change:showAll":this.reRender,"change:hideTrivial":this.reRender}},c.prototype.collectionEvents=function(){return{remove:this.removeStep,"add remove":this.reRender,"change:count":this.reRenderIfHidingTrivial}},c.prototype.toggleTrivial=function(t){return t.preventDefault(),t.stopPropagation(),this.state.toggle("hideTrivial")},c.prototype.revertToPreviousState=function(){return this.collection.popState()},c.prototype.reRenderIfHidingTrivial=function(){if(this.state.get("hideTrivial"))return this.reRender()},c.prototype.postRender=function(){return this.$(".im-toggle-trivial").tooltip({placement:"right"}),this.$list=this.$(".im-state-list"),this.renderStates(),this.$el.toggleClass("im-has-history",1<this.collection.size()),this.$el.toggleClass("im-hidden",this.collection.size()<=1)},c.prototype.renderStates=function(){var t,n,e,i,r,o,s,a,l,u,c,h,p,f,d,m;for(s=(c=this.state.toJSON()).showAll,e=c.hideTrivial,t=this.collection,r=e?t.filter(y):t.models.slice(),a=r.length,n=g.get("UndoHistory.ShowAllStatesCutOff"),m=[],l=0,u=(o=s||a<=n?function(){f=[];for(var t=h=a-1;h<=0?t<=0:0<=t;h<=0?t++:t--)f.push(t);return f}.apply(this):function(){d=[];for(var t=p=a-1,e=a-(n-1);p<=e?t<=e:e<=t;p<=e?t++:t--)d.push(t);return d}.apply(this).concat([-1,0])).length;l<u;l++)-1===(i=o[l])?m.push(this.renderEllipsis(a-n)):m.push(this.renderState(r[i]));return m},c.prototype.renderEllipsis=function(t){return this.renderChild("...",new n({more:t,state:this.state}),this.$list)},c.prototype.renderState=function(t){return this.renderChild(s(t),new r({model:t}),this.$list)},c.prototype.removeStep=function(t){return this.removeChild(s(t))},c)}).call(this)},{"../core-view":3,"../messages":16,"../messages/undo":29,"../options":63,"../templates":67,"./undo-history/step":231,underscore:262}],230:[function(s,a,t){(function(){var e,t,n,i,r={}.hasOwnProperty;function o(){return o.__super__.constructor.apply(this,arguments)}i=s("underscore"),t=s("../../core-view"),n=s("../../templates"),e=s("../../utils/css-class-set"),a.exports=(function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,t),o.prototype.template=n.template("undo-history-step-section"),o.prototype.labelContent=function(){throw new Error("NOT IMPLEMENTED")},o.prototype.summaryLabel=function(){return thow(new Error("NOT IMPLEMENTED"))},o.prototype.initState=function(){return this.state.set({open:!1})},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.collectionClasses=new e({"well well-sm":!0,"im-hidden":(t=this,function(){return!t.state.get("open")})});var t},o.prototype.getData=function(){var t,e;return e=i.result(this,"summaryLabel"),t=this.collection.where({removed:!1}).length,i.extend(o.__super__.getData.apply(this,arguments),{count:t,summaryLabel:e,labelContent:this.labelContent,collectionClasses:this.collectionClasses})},o.prototype.events=function(){return{"click .im-section-summary":"toggleOpen"}},o.prototype.stateEvents=function(){return{"change:open":this.reRender}},o.prototype.collectionEvents=function(){return{change:this.reRender}},o.prototype.toggleOpen=function(t){return t.stopPropagation(),t.preventDefault(),this.state.toggle("open")},o)}).call(this)},{"../../core-view":3,"../../templates":67,"../../utils/css-class-set":79,underscore:262}],231:[function(A,O,t){(function(){function n(t,e){for(var n in e)w.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var t,r,e,i,o,s,a,l,u,c,h,p,f,d,m,g,y,v,_,b,w={}.hasOwnProperty,x=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function C(t){var e;e=t.path,C.__super__.constructor.call(this,e)}function T(){return T.__super__.constructor.apply(this,arguments)}function S(){return S.__super__.constructor.apply(this,arguments)}function E(){return E.__super__.constructor.apply(this,arguments)}function k(){return k.__super__.constructor.apply(this,arguments)}function N(){return N.__super__.constructor.apply(this,arguments)}function M(){return M.__super__.constructor.apply(this,arguments)}function D(){return D.__super__.constructor.apply(this,arguments)}b=A("underscore"),o=A("../../core-view"),t=A("../../core/collection"),d=A("../../templates"),s=A("../../messages"),u=A("../../models/path"),e=A("../../models/constraint"),l=A("../../models/order-element"),c=A("./query-property-section"),A("../../messages/undo"),A("../../messages/constraints"),_=function(t){return n(e,t),e.prototype.defaults=function(){return b.extend(e.__super__.defaults.apply(this,arguments),{added:!1,removed:!1})},e;function e(){return e.__super__.constructor.apply(this,arguments)}},n(C,u),a=C,n(T,t),T.prototype.model=_(a),m=T,n(S,t),S.prototype.model=_(e),r=S,n(E,t),E.prototype.model=_(l),p=E,y=function(n){return function(t){var e;return t=b.isString(t)?{path:t}:t,e={path:n.makePath(t.path)},t.type&&(e.type=n.model.makePath(t.type)),b.extend(e,b.omit(t,"path","type"))}},O.exports=(n(k,o),k.prototype.className="im-step",k.prototype.tagName="li",k.prototype.template=d.template("undo-history-step"),k.prototype.getData=function(){return b.extend(k.__super__.getData.apply(this,arguments),{diff:this.getCountDiff()})},k.prototype.getCountDiff=function(){return this.state.has("prevCount")?this.model.get("count")-this.state.get("prevCount"):null},k.prototype.initialize=function(){var t,e,n,i;if(k.__super__.initialize.apply(this,arguments),e=this.model.get("query"),this.initPrevCount(),t=y(e),this.listenTo(this.model.collection,"add remove",this.setCurrent),this.views=new m(e.views.map(t)),this.constraints=new r(e.constraints.map(t)),this.sortOrder=new p(e.sortOrder.map(t)),"Added"===(i=(n=this.model.get("title")).verb)||"Removed"===i||"Changed"===i)switch(n.label){case"column":return this.diffView();case"sort order element":return this.diffSortOrder();case"filter":return this.diffConstraints();case"Initial":return null;default:return console.error("Cannot diff",n.label)}},k.prototype.initPrevCount=function(){var t,e;if(t=this.getPrevModel())return this.state.set({prevCount:t.get("count")}),this.listenTo(t,"change:count",(e=this,function(){return e.state.set({prevCount:t.get("count")})}))},k.prototype.getPrevModel=function(){var t;return 0===(t=this.model.collection.indexOf(this.model))?null:this.model.collection.at(t-1)},k.prototype.diff=function(t,e,n){var i,r,o,s,a,l,u,c,h,p,f,d,m;for(a=this.getPrevModel(),i=this.model.get("query"),l=a.get("query"),o=u=0,h=(f=i[t]).length;u<h;o=++u)n(r=f[o],l)&&e.at(o).set({added:!0});for(s=y(l),m=[],o=c=0,p=(d=l[t]).length;c<p;o=++c)n(r=d[o],i)&&m.push(e.add(s(r),{at:o}).set({removed:!0}));return m},k.prototype.diffView=function(){return this.diff("views",this.views,function(t,e){var n;return n=e.views,x.call(n,t)<0})},k.prototype.diffSortOrder=function(){return this.diff("sortOrder",this.sortOrder,function(t,e){return!b.findWhere(e.sortOrder,t)})},k.prototype.diffConstraints=function(){return this.diff("constraints",this.constraints,function(t,e){return!b.findWhere(e.constraints,t)})},k.prototype.initState=function(){return this.setCurrent()},k.prototype.setCurrent=function(){var t,e,n;if(null!=(n=this.model)?n.collection:void 0)return t=this.model.collection.indexOf(this.model),e=this.model.collection.size(),this.state.set({current:t===e-1})},k.prototype.stateEvents=function(){return{change:this.reRender}},k.prototype.modelEvents=function(){return{change:this.reRender}},k.prototype.events=function(){return{"click .btn.im-state-revert":"revertToState",click:function(t){return t.preventDefault(),t.stopPropagation()}}},k.prototype.revertToState=function(){return this.model.collection.revertTo(this.model)},k.prototype.postRender=function(){var t;if(this.$details=this.$(".im-step-details"),this.$el.toggleClass("im-current-state",this.state.get("current")),this.$(".btn[title]").tooltip({placement:"right"}),this.state.get("current"))return this.renderAllSections();switch((t=this.model.get("title")).label){case"column":return this.renderViews();case"filter":return this.renderConstraints();case"sort order element":return this.renderSortOrder();case"Initial":return null;default:return console.error("Cannot render",t.label)}},k.prototype.renderAllSections=function(){return this.renderViews(),this.renderConstraints(),this.renderSortOrder()},k.prototype.renderViews=function(){return this.renderChild("views",new h({collection:this.views}),this.$details)},k.prototype.renderSortOrder=function(){return this.renderChild("so",new f({collection:this.sortOrder}),this.$details)},k.prototype.renderConstraints=function(){return this.renderChild("cons",new i({collection:this.constraints}),this.$details)},k),n(N,c),N.prototype.summaryLabel="undo.ViewCount",N.prototype.labelContent=function(t){return t.displayName},h=N,n(M,c),M.prototype.summaryLabel="undo.OrderElemCount",M.prototype.labelContent=function(t){return t.displayName+" "+t.direction},f=M,v=function(t){return s.getText("constraints.NoOfValues",{n:t.values.length})},g=function(t){return s.getText("constraints.NoOfIds",{n:t.ids.length})},n(D,c),D.prototype.summaryLabel="undo.ConstraintCount",D.prototype.labelContent=function(t){return function(){switch(t.CONSTRAINT_TYPE){case"MULTI_VALUE":return[t.displayName,t.op,t.values.length,v(t)];case"TYPE":return[t.displayName,s.getText("constraints.ISA"),t.typeName];case"IDS":return[t.displayName,t.op,g(t)];case"LOOKUP":return[t.displayName,t.op,t.value,s.getText("constraints.LookupIn"),t.extraValue];default:return[t.displayName,t.op,t.value]}}().join(" ")},i=D}).call(this)},{"../../core-view":3,"../../core/collection":5,"../../messages":16,"../../messages/constraints":21,"../../messages/undo":29,"../../models/constraint":40,"../../models/order-element":53,"../../models/path":56,"../../templates":67,"./query-property-section":230,underscore:262}],232:[function(n,r,o){(function(t,e){var i=n("jsonparse"),p=n("through");function f(t,e){return"string"==typeof t?e==t:t&&"function"==typeof t.exec?t.exec(e):"boolean"==typeof t?t:"function"==typeof t&&t(e)}o.parse=function(l,u){var n=new i,c=p(function(t){"string"==typeof t&&(t=new e(t)),n.write(t)},function(t){t&&c.write(t),c.queue(null)});"string"==typeof l&&(l=l.split(".").map(function(t){return"*"===t||(""===t?{recurse:!0}:t)}));var h=0;return l&&l.length||(l=null),n.onValue=function(t){if(this.root||(c.root=t),l){for(var e=0,n=0;e<l.length;){var i,r=l[e];if(n++,r&&!r.recurse){if(!(i=n===this.stack.length?this:this.stack[n]))return;if(!f(r,i.key))return;e++}else{var o=l[++e];if(!o)return;for(;;){if(!(i=n===this.stack.length?this:this.stack[n]))return;if(f(o,i.key)){e++;break}n++}}}if(n===this.stack.length){h++;var s=this.stack.slice(1).map(function(t){return t.key}).concat([this.key]),a=this.value[this.key];null!=a&&null!=(a=u?u(a,s):a)&&c.queue(a),delete this.value[this.key]}}},n._onToken=n.onToken,n.onToken=function(t,e){n._onToken(t,e),0===this.stack.length&&c.root&&(l||c.queue(c.root),c.emit("root",c.root,h),h=0,c.root=null)},n.onError=function(t){c.emit("error",t)},c},o.stringify=function(n,i,e,r){r=r||0,!1===n?(i="\n",e=n=""):null==n&&(n="[\n",i="\n,\n",e="\n]\n");var o,s=!0,a=!1;return o=p(function(t){a=!0;var e=JSON.stringify(t,null,r);s?(s=!1,o.queue(n+e)):o.queue(i+e)},function(t){a||o.queue(n),o.queue(e),o.queue(null)})},o.stringifyObject=function(n,i,e,r){r=r||0,!1===n?(i="\n",e=n=""):null==n&&(n="{\n",i="\n,\n",e="\n}\n");var o=!0,s=!1;return stream=p(function(t){s=!0;var e=JSON.stringify(t[0])+":"+JSON.stringify(t[1],null,r);o?(o=!1,this.queue(n+e)):this.queue(i+e)},function(t){s||this.queue(n),this.queue(e),this.queue(null)}),stream},r.parent||"browser"===t.title||t.stdin.pipe(o.parse(t.argv[2])).pipe(o.stringify("[",",\n","]\n",2)).pipe(t.stdout)}).call(this,n("_process"),n("buffer").Buffer)},{_process:275,buffer:266,jsonparse:257,through:260}],233:[function(t,a,u){!function(){var s=Array.prototype.forEach,n=Object.prototype.hasOwnProperty,r=Array.prototype.slice,i=0;var e,h={keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++i+"";return t?t+e:e},has:function(t,e){return n.call(t,e)},each:function(t,e,n){if(null!=t)if(s&&t.forEach===s)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var o in t)this.has(t,o)&&e.call(n,t[o],o,t)},once:function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments),t=null),e}}};e={on:function(t,e,n){return p(this,"on",t,[e,n])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this})),this},once:function(t,e,n){if(!p(this,"once",t,[e,n])||!e)return this;var i=this,r=h.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,a,l,u,c;if(!this._events||!p(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=0,l=(s=t?[t]:h.keys(this._events)).length;a<l;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=i=[],e||n)for(u=0,c=o.length;u<c;u++)r=o[u],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!p(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&o(n,e),i&&o(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;for(var o in"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t),i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}};var l=/\s+/,p=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var o=n.split(l),s=0,a=o.length;s<a;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},o=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}};h.each({listenTo:"on",listenToOnce:"once"},function(r,t){e[t]=function(t,e,n){var i=this._listeners||(this._listeners={});return"object"==typeof e&&(n=this),(i[t._listenerId||(t._listenerId=h.uniqueId("l"))]=t)[r](e,n,this),this}}),e.bind=e.on,e.unbind=e.off,e.mixin=function(e){return h.each(["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"],function(t){e[t]=this[t]},this),e},void 0!==u?(void 0!==a&&a.exports&&(u=a.exports=e),u.BackboneEvents=e):this.BackboneEvents=e}()},{}],234:[function(t,e,n){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":233}],235:[function(o,t,s){(function(r){!function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof r&&r.global===r&&r;if(void 0!==s){var n,i=o("underscore");try{n=o("jquery")}catch(t){}t(e,s,i,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,l,w,e){var n=t.Backbone,s=Array.prototype.slice;l.VERSION="1.4.0",l.$=e,l.noConflict=function(){return t.Backbone=n,this},l.emulateHTTP=!1,l.emulateJSON=!1;var a,i=l.Events={},u=/\s+/,c=function(t,e,n,i,r){var o,s=0;if(n&&"object"==typeof n){void 0!==i&&"context"in r&&void 0===r.context&&(r.context=i);for(o=w.keys(n);s<o.length;s++)e=c(t,e,o[s],n[o[s]],r)}else if(n&&u.test(n))for(o=n.split(u);s<o.length;s++)e=t(e,o[s],i,r);else e=t(e,n,i,r);return e};i.on=function(t,e,n){this._events=c(r,this._events||{},t,e,{context:n,ctx:this,listening:a}),a&&(((this._listeners||(this._listeners={}))[a.id]=a).interop=!1);return this},i.listenTo=function(t,e,n){if(!t)return this;var i=t._listenId||(t._listenId=w.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),o=a=r[i];o||(this._listenId||(this._listenId=w.uniqueId("l")),o=a=r[i]=new m(this,t));var s=h(t,e,n,this);if(a=void 0,s)throw s;return o.interop&&o.on(e,n),this};var r=function(t,e,n,i){if(n){var r=t[e]||(t[e]=[]),o=i.context,s=i.ctx,a=i.listening;a&&a.count++,r.push({callback:n,context:o,ctx:o||s,listening:a})}return t},h=function(t,e,n,i){try{t.on(e,n,i)}catch(t){return t}};i.off=function(t,e,n){return this._events&&(this._events=c(o,this._events,t,e,{context:n,listeners:this._listeners})),this},i.stopListening=function(t,e,n){var i=this._listeningTo;if(!i)return this;for(var r=t?[t._listenId]:w.keys(i),o=0;o<r.length;o++){var s=i[r[o]];if(!s)break;s.obj.off(e,n,this),s.interop&&s.off(e,n)}return w.isEmpty(i)&&(this._listeningTo=void 0),this};var o=function(t,e,n,i){if(t){var r,o=i.context,s=i.listeners,a=0;if(e||o||n){for(r=e?[e]:w.keys(t);a<r.length;a++){var l=t[e=r[a]];if(!l)break;for(var u=[],c=0;c<l.length;c++){var h=l[c];if(n&&n!==h.callback&&n!==h.callback._callback||o&&o!==h.context)u.push(h);else{var p=h.listening;p&&p.off(e,n)}}u.length?t[e]=u:delete t[e]}return t}for(r=w.keys(s);a<r.length;a++)s[r[a]].cleanup()}};i.once=function(t,e,n){var i=c(p,{},t,e,this.off.bind(this));return"string"==typeof t&&null==n&&(e=void 0),this.on(i,e,n)},i.listenToOnce=function(t,e,n){var i=c(p,{},e,n,this.stopListening.bind(this,t));return this.listenTo(t,i)};var p=function(t,e,n,i){if(n){var r=t[e]=w.once(function(){i(e,r),n.apply(this,arguments)});r._callback=n}return t};i.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return c(f,this._events,t,void 0,n),this};var f=function(t,e,n,i){if(t){var r=t[e],o=t.all;r&&o&&(o=o.slice()),r&&d(r,i),o&&d(o,[e].concat(i))}return t},d=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}},m=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};m.prototype.on=i.on,m.prototype.off=function(t,e){(this.interop?(this._events=c(o,this._events,t,e,{context:void 0,listeners:void 0}),this._events):(this.count--,0!==this.count))||this.cleanup()},m.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},i.bind=i.on,i.unbind=i.off,w.extend(l,i);var g=l.Model=function(t,e){var n=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=w.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var i=w.result(this,"defaults");n=w.defaults(w.extend({},i,n),i),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};w.extend(g.prototype,i,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return w.clone(this.attributes)},sync:function(){return l.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return w.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!w.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var i;if("object"==typeof t?(i=t,n=e):(i={})[t]=e,n||(n={}),!this._validate(i,n))return!1;var r=n.unset,o=n.silent,s=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=w.clone(this.attributes),this.changed={});var l=this.attributes,u=this.changed,c=this._previousAttributes;for(var h in i)e=i[h],w.isEqual(l[h],e)||s.push(h),w.isEqual(c[h],e)?delete u[h]:u[h]=e,r?delete l[h]:l[h]=e;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!o){s.length&&(this._pending=n);for(var p=0;p<s.length;p++)this.trigger("change:"+s[p],this,l[s[p]],n)}if(a)return this;if(!o)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,w.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,w.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!w.isEmpty(this.changed):w.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&w.clone(this.changed);var e,n=this._changing?this._previousAttributes:this.attributes,i={};for(var r in t){var o=t[r];w.isEqual(n[r],o)||(i[r]=o,e=!0)}return!!e&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return w.clone(this._previousAttributes)},fetch:function(n){n=w.extend({parse:!0},n);var i=this,r=n.success;return n.success=function(t){var e=n.parse?i.parse(t,n):t;if(!i.set(e,n))return!1;r&&r.call(n.context,i,t,n),i.trigger("sync",i,t,n)},$(this,n),this.sync("read",this,n)},save:function(t,e,n){var i;null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e;var r=(n=w.extend({validate:!0,parse:!0},n)).wait;if(i&&!r){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;var o=this,s=n.success,a=this.attributes;n.success=function(t){o.attributes=a;var e=n.parse?o.parse(t,n):t;if(r&&(e=w.extend({},i,e)),e&&!o.set(e,n))return!1;s&&s.call(n.context,o,t,n),o.trigger("sync",o,t,n)},$(this,n),i&&r&&(this.attributes=w.extend({},a,i));var l=this.isNew()?"create":n.patch?"patch":"update";"patch"!=l||n.attrs||(n.attrs=i);var u=this.sync(l,this,n);return this.attributes=a,u},destroy:function(e){e=e?w.clone(e):{};function n(){i.stopListening(),i.trigger("destroy",i,i.collection,e)}var i=this,r=e.success,o=e.wait,t=!(e.success=function(t){o&&n(),r&&r.call(e.context,i,t,e),i.isNew()||i.trigger("sync",i,t,e)});return this.isNew()?w.defer(e.success):($(this,e),t=this.sync("delete",this,e)),o||n(),t},url:function(){var t=w.result(this,"urlRoot")||w.result(this.collection,"url")||U();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},w.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=w.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,w.extend(e,{validationError:n})),!1)}});function x(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,r=Array(t.length-n),o=e.length;for(i=0;i<r.length;i++)r[i]=t[i+n];for(i=0;i<o;i++)t[i+n]=e[i];for(i=0;i<r.length;i++)t[i+o+n]=r[i]}var y=l.Collection=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,w.extend({silent:!0},e))},C={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};w.extend(y.prototype,i,{model:g,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return l.sync.apply(this,arguments)},add:function(t,e){return this.set(t,w.extend({merge:!1},e,v))},remove:function(t,e){e=w.extend({},e);var n=!w.isArray(t);t=n?[t]:t.slice();var i=this._removeModels(t,e);return!e.silent&&i.length&&(e.changes={added:[],merged:[],removed:i},this.trigger("update",this,e)),n?i[0]:i},set:function(t,e){if(null!=t){(e=w.extend({},C,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!w.isArray(t);t=n?[t]:t.slice();var i=e.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var r,o,s=[],a=[],l=[],u=[],c={},h=e.add,p=e.merge,f=e.remove,d=!1,m=this.comparator&&null==i&&!1!==e.sort,g=w.isString(this.comparator)?this.comparator:null;for(o=0;o<t.length;o++){r=t[o];var y=this.get(r);if(y){if(p&&r!==y){var v=this._isModel(r)?r.attributes:r;e.parse&&(v=y.parse(v,e)),y.set(v,e),l.push(y),m&&!d&&(d=y.hasChanged(g))}c[y.cid]||(c[y.cid]=!0,s.push(y)),t[o]=y}else h&&(r=t[o]=this._prepareModel(r,e))&&(a.push(r),this._addReference(r,e),c[r.cid]=!0,s.push(r))}if(f){for(o=0;o<this.length;o++)c[(r=this.models[o]).cid]||u.push(r);u.length&&this._removeModels(u,e)}var _=!1,b=!m&&h&&f;if(s.length&&b?(_=this.length!==s.length||w.some(this.models,function(t,e){return t!==s[e]}),this.models.length=0,x(this.models,s,0),this.length=this.models.length):a.length&&(m&&(d=!0),x(this.models,a,null==i?this.length:i),this.length=this.models.length),d&&this.sort({silent:!0}),!e.silent){for(o=0;o<a.length;o++)null!=i&&(e.index=i+o),(r=a[o]).trigger("add",r,this,e);(d||_)&&this.trigger("sort",this,e),(a.length||u.length||l.length)&&(e.changes={added:a,removed:u,merged:l},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?w.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,w.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,w.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,w.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return w.isFunction(e)&&(e=e.bind(this)),1===n||w.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(n){var i=(n=w.extend({parse:!0},n)).success,r=this;return n.success=function(t){var e=n.reset?"reset":"set";r[e](t,n),i&&i.call(n.context,r,t,n),r.trigger("sync",r,t,n)},$(this,n),this.sync("read",this,n)},create:function(t,e){var i=(e=e?w.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;i||this.add(t,e);var r=this,o=e.success;return e.success=function(t,e,n){i&&r.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},values:function(){return new b(this,T)},keys:function(){return new b(this,S)},entries:function(){return new b(this,E)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;var n=new(((e=e?w.clone(e):{}).collection=this).model)(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.get(t[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var s=this.modelId(r.attributes);null!=s&&delete this._byId[s],e.silent||(e.index=o,r.trigger("remove",r,this,e)),n.push(r),this._removeReference(r,e)}}return n},_isModel:function(t){return t instanceof g},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});var _="function"==typeof Symbol&&Symbol.iterator;_&&(y.prototype[_]=y.prototype.values);var b=function(t,e){this._collection=t,this._kind=e,this._index=0},T=1,S=2,E=3;_&&(b.prototype[_]=function(){return this}),b.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===T)t=e;else{var n=this._collection.modelId(e.attributes);t=this._kind===S?n:[n,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var k=l.View=function(t){this.cid=w.uniqueId("view"),this.preinitialize.apply(this,arguments),w.extend(this,w.pick(t,M)),this._ensureElement(),this.initialize.apply(this,arguments)},N=/^(\S+)\s*(.*)$/,M=["model","collection","el","id","attributes","className","tagName","events"];w.extend(k.prototype,i,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof l.$?t:l.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=w.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(w.isFunction(n)||(n=this[n]),n){var i=e.match(N);this.delegate(i[1],i[2],n.bind(this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(w.result(this,"el"));else{var t=w.extend({},w.result(this,"attributes"));this.id&&(t.id=w.result(this,"id")),this.className&&(t.class=w.result(this,"className")),this.setElement(this._createElement(w.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});function D(n,i,t,r){w.each(t,function(t,e){i[e]&&(n.prototype[e]=function(i,t,r,o){switch(t){case 1:return function(){return i[r](this[o])};case 2:return function(t){return i[r](this[o],t)};case 3:return function(t,e){return i[r](this[o],A(t,this),e)};case 4:return function(t,e,n){return i[r](this[o],A(t,this),e,n)};default:return function(){var t=s.call(arguments);return t.unshift(this[o]),i[r].apply(i,t)}}}(i,t,e,r))})}var A=function(e,t){return w.isFunction(e)?e:w.isObject(e)&&!t._isModel(e)?O(e):w.isString(e)?function(t){return t.get(e)}:e},O=function(t){var e=w.matches(t);return function(t){return e(t.attributes)}};w.each([[y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[g,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(t){var n=t[0],e=t[1],i=t[2];n.mixin=function(t){var e=w.reduce(w.functions(t),function(t,e){return t[e]=0,t},{});D(n,t,e,i)},D(n,w,e,i)}),l.sync=function(t,e,i){var n=P[t];w.defaults(i||(i={}),{emulateHTTP:l.emulateHTTP,emulateJSON:l.emulateJSON});var r={type:n,dataType:"json"};if(i.url||(r.url=w.result(e,"url")||U()),null!=i.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(i.attrs||e.toJSON(i))),i.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),i.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){r.type="POST",i.emulateJSON&&(r.data._method=n);var o=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",n),o)return o.apply(this,arguments)}}"GET"===r.type||i.emulateJSON||(r.processData=!1);var s=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,s&&s.call(i.context,t,e,n)};var a=i.xhr=l.ajax(w.extend(r,i));return e.trigger("request",e,a,i),a};var P={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};l.ajax=function(){return l.$.ajax.apply(l.$,arguments)};var I=l.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},R=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,q=/\*\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g;w.extend(I.prototype,i,{preinitialize:function(){},initialize:function(){},route:function(n,i,r){w.isRegExp(n)||(n=this._routeToRegExp(n)),w.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return l.history.route(n,function(t){var e=o._extractParameters(n,t);!1!==o.execute(r,e,i)&&(o.trigger.apply(o,["route:"+i].concat(e)),o.trigger("route",i,e),l.history.trigger("route",o,i,e))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,e){return l.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=w.result(this,"routes");for(var t,e=w.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(j,"\\$&").replace(R,"(?:$1)?").replace(L,function(t,e){return e?t:"([^/?]+)"}).replace(q,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return w.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var F=l.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},z=/^[#\/]|\s+$/g,H=/^\/+|\/+$/g,B=/#.*$/;F.started=!1,w.extend(F.prototype,i,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(z,"")},start:function(t){if(F.started)throw new Error("Backbone.history has already been started");if(F.started=!0,this.options=w.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(H,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,i=n.insertBefore(this.iframe,n.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),F.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),w.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(t,e){if(!F.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;t=t.replace(B,"");var r=this.decodeFragment(t);if(this.fragment!==r){if(this.fragment=r,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),l.history=new F;g.extend=y.extend=I.extend=k.extend=F.extend=function(t,e){var n,i=this;return n=t&&w.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},w.extend(n,i,e),n.prototype=w.create(i.prototype,t),(n.prototype.constructor=n).__super__=i.prototype,n};var U=function(){throw new Error('A "url" property or function must be specified')},$=function(e,n){var i=n.error;n.error=function(t){i&&i.call(n.context,e,t,n),e.trigger("error",e,t,n)}};return l})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:256,underscore:262}],236:[function(t,e,n){var i,r;i=this,r=function(t,d,h){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function l(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,n,i;e=r,i=o[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i})}return r}d=d&&d.hasOwnProperty("default")?d.default:d,h=h&&h.hasOwnProperty("default")?h.default:h;var e="transitionend";function n(t){var e=this,n=!1;return d(this).one(m.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||m.triggerTransitionEnd(e)},t),this}var m={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var n=t.getAttribute("href");e=n&&"#"!==n?n.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=d(t).css("transition-duration"),n=d(t).css("transition-delay"),i=parseFloat(e),r=parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(e)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){d(t).trigger(e)},supportsTransitionEnd:function(){return Boolean(e)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i],o=e[i],s=o&&m.isElement(o)?"element":(a=o,{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(r).test(s))throw new Error(t.toUpperCase()+': Option "'+i+'" provided type "'+s+'" but expected type "'+r+'".')}var a},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"!=typeof t.getRootNode)return t instanceof ShadowRoot?t:t.parentNode?m.findShadowRoot(t.parentNode):null;var e=t.getRootNode();return e instanceof ShadowRoot?e:null}};d.fn.emulateTransitionEnd=n,d.event.special[m.TRANSITION_END]={bindType:e,delegateType:e,handle:function(t){if(d(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var r="alert",o="bs.alert",a="."+o,u=d.fn[r],c={CLOSE:"close"+a,CLOSED:"closed"+a,CLICK_DATA_API:"click"+a+".data-api"},p="alert",f="fade",g="show",y=function(){function i(t){this._element=t}var t=i.prototype;return t.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){d.removeData(this._element,o),this._element=null},t._getRootElement=function(t){var e=m.getSelectorFromElement(t),n=!1;return e&&(n=document.querySelector(e)),n||(n=d(t).closest("."+p)[0]),n},t._triggerCloseEvent=function(t){var e=d.Event(c.CLOSE);return d(t).trigger(e),e},t._removeElement=function(e){var n=this;if(d(e).removeClass(g),d(e).hasClass(f)){var t=m.getTransitionDurationFromElement(e);d(e).one(m.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(t)}else this._destroyElement(e)},t._destroyElement=function(t){d(t).detach().trigger(c.CLOSED).remove()},i._jQueryInterface=function(n){return this.each(function(){var t=d(this),e=t.data(o);e||(e=new i(this),t.data(o,e)),"close"===n&&e[n](this)})},i._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),i}();d(document).on(c.CLICK_DATA_API,'[data-dismiss="alert"]',y._handleDismiss(new y)),d.fn[r]=y._jQueryInterface,d.fn[r].Constructor=y,d.fn[r].noConflict=function(){return d.fn[r]=u,y._jQueryInterface};var v="button",_="bs.button",b="."+_,w=".data-api",x=d.fn[v],C="active",T="btn",S="focus",E='[data-toggle^="button"]',k='[data-toggle="buttons"]',N='input:not([type="hidden"])',M=".active",D=".btn",A={CLICK_DATA_API:"click"+b+w,FOCUS_BLUR_DATA_API:"focus"+b+w+" blur"+b+w},O=function(){function n(t){this._element=t}var t=n.prototype;return t.toggle=function(){var t=!0,e=!0,n=d(this._element).closest(k)[0];if(n){var i=this._element.querySelector(N);if(i){if("radio"===i.type)if(i.checked&&this._element.classList.contains(C))t=!1;else{var r=n.querySelector(M);r&&d(r).removeClass(C)}if(t){if(i.hasAttribute("disabled")||n.hasAttribute("disabled")||i.classList.contains("disabled")||n.classList.contains("disabled"))return;i.checked=!this._element.classList.contains(C),d(i).trigger("change")}i.focus(),e=!1}}e&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(C)),t&&d(this._element).toggleClass(C)},t.dispose=function(){d.removeData(this._element,_),this._element=null},n._jQueryInterface=function(e){return this.each(function(){var t=d(this).data(_);t||(t=new n(this),d(this).data(_,t)),"toggle"===e&&t[e]()})},s(n,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),n}();d(document).on(A.CLICK_DATA_API,E,function(t){t.preventDefault();var e=t.target;d(e).hasClass(T)||(e=d(e).closest(D)),O._jQueryInterface.call(d(e),"toggle")}).on(A.FOCUS_BLUR_DATA_API,E,function(t){var e=d(t.target).closest(D)[0];d(e).toggleClass(S,/^focus(in)?$/.test(t.type))}),d.fn[v]=O._jQueryInterface,d.fn[v].Constructor=O,d.fn[v].noConflict=function(){return d.fn[v]=x,O._jQueryInterface};var P="carousel",I="bs.carousel",R="."+I,L=d.fn[P],q={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},j={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},F="next",z="prev",H="left",B="right",U={SLIDE:"slide"+R,SLID:"slid"+R,KEYDOWN:"keydown"+R,MOUSEENTER:"mouseenter"+R,MOUSELEAVE:"mouseleave"+R,TOUCHSTART:"touchstart"+R,TOUCHMOVE:"touchmove"+R,TOUCHEND:"touchend"+R,POINTERDOWN:"pointerdown"+R,POINTERUP:"pointerup"+R,DRAG_START:"dragstart"+R,LOAD_DATA_API:"load"+R+".data-api",CLICK_DATA_API:"click"+R+".data-api"},$="carousel",W="active",V="slide",Y="carousel-item-right",K="carousel-item-left",G="carousel-item-next",Q="carousel-item-prev",J="pointer-event",X=".active",Z=".active.carousel-item",tt=".carousel-item",et=".carousel-item img",nt=".carousel-item-next, .carousel-item-prev",it=".carousel-indicators",rt="[data-slide], [data-slide-to]",ot='[data-ride="carousel"]',st={TOUCH:"touch",PEN:"pen"},at=function(){function o(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(it),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var t=o.prototype;return t.next=function(){this._isSliding||this._slide(F)},t.nextWhenVisible=function(){!document.hidden&&d(this._element).is(":visible")&&"hidden"!==d(this._element).css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide(z)},t.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(nt)&&(m.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(t){var e=this;this._activeElement=this._element.querySelector(Z);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)d(this._element).one(U.SLID,function(){return e.to(t)});else{if(n===t)return this.pause(),void this.cycle();var i=n<t?F:z;this._slide(i,this._items[t])}},t.dispose=function(){d(this._element).off(R),d.removeData(this._element,I),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(t){return t=l({},q,t),m.typeCheckConfig(P,t,j),t},t._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;0<e&&this.prev(),e<0&&this.next()}},t._addEventListeners=function(){var e=this;this._config.keyboard&&d(this._element).on(U.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&d(this._element).on(U.MOUSEENTER,function(t){return e.pause(t)}).on(U.MOUSELEAVE,function(t){return e.cycle(t)}),this._config.touch&&this._addTouchEventListeners()},t._addTouchEventListeners=function(){var e=this;if(this._touchSupported){var n=function(t){e._pointerEvent&&st[t.originalEvent.pointerType.toUpperCase()]?e.touchStartX=t.originalEvent.clientX:e._pointerEvent||(e.touchStartX=t.originalEvent.touches[0].clientX)},i=function(t){e._pointerEvent&&st[t.originalEvent.pointerType.toUpperCase()]&&(e.touchDeltaX=t.originalEvent.clientX-e.touchStartX),e._handleSwipe(),"hover"===e._config.pause&&(e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},500+e._config.interval))};d(this._element.querySelectorAll(et)).on(U.DRAG_START,function(t){return t.preventDefault()}),this._pointerEvent?(d(this._element).on(U.POINTERDOWN,function(t){return n(t)}),d(this._element).on(U.POINTERUP,function(t){return i(t)}),this._element.classList.add(J)):(d(this._element).on(U.TOUCHSTART,function(t){return n(t)}),d(this._element).on(U.TOUCHMOVE,function(t){return function(t){t.originalEvent.touches&&1<t.originalEvent.touches.length?e.touchDeltaX=0:e.touchDeltaX=t.originalEvent.touches[0].clientX-e.touchStartX}(t)}),d(this._element).on(U.TOUCHEND,function(t){return i(t)}))}},t._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},t._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(tt)):[],this._items.indexOf(t)},t._getItemByDirection=function(t,e){var n=t===F,i=t===z,r=this._getItemIndex(e),o=this._items.length-1;if((i&&0===r||n&&r===o)&&!this._config.wrap)return e;var s=(r+(t===z?-1:1))%this._items.length;return-1==s?this._items[this._items.length-1]:this._items[s]},t._triggerSlideEvent=function(t,e){var n=this._getItemIndex(t),i=this._getItemIndex(this._element.querySelector(Z)),r=d.Event(U.SLIDE,{relatedTarget:t,direction:e,from:i,to:n});return d(this._element).trigger(r),r},t._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var e=[].slice.call(this._indicatorsElement.querySelectorAll(X));d(e).removeClass(W);var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&d(n).addClass(W)}},t._slide=function(t,e){var n,i,r,o=this,s=this._element.querySelector(Z),a=this._getItemIndex(s),l=e||s&&this._getItemByDirection(t,s),u=this._getItemIndex(l),c=Boolean(this._interval);if(r=t===F?(n=K,i=G,H):(n=Y,i=Q,B),l&&d(l).hasClass(W))this._isSliding=!1;else if(!this._triggerSlideEvent(l,r).isDefaultPrevented()&&s&&l){this._isSliding=!0,c&&this.pause(),this._setActiveIndicatorElement(l);var h=d.Event(U.SLID,{relatedTarget:l,direction:r,from:a,to:u});if(d(this._element).hasClass(V)){d(l).addClass(i),m.reflow(l),d(s).addClass(n),d(l).addClass(n);var p=parseInt(l.getAttribute("data-interval"),10);p?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=p):this._config.interval=this._config.defaultInterval||this._config.interval;var f=m.getTransitionDurationFromElement(s);d(s).one(m.TRANSITION_END,function(){d(l).removeClass(n+" "+i).addClass(W),d(s).removeClass(W+" "+i+" "+n),o._isSliding=!1,setTimeout(function(){return d(o._element).trigger(h)},0)}).emulateTransitionEnd(f)}else d(s).removeClass(W),d(l).addClass(W),this._isSliding=!1,d(this._element).trigger(h);c&&this.cycle()}},o._jQueryInterface=function(i){return this.each(function(){var t=d(this).data(I),e=l({},q,d(this).data());"object"==typeof i&&(e=l({},e,i));var n="string"==typeof i?i:e.slide;if(t||(t=new o(this,e),d(this).data(I,t)),"number"==typeof i)t.to(i);else if("string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}else e.interval&&e.ride&&(t.pause(),t.cycle())})},o._dataApiClickHandler=function(t){var e=m.getSelectorFromElement(this);if(e){var n=d(e)[0];if(n&&d(n).hasClass($)){var i=l({},d(n).data(),d(this).data()),r=this.getAttribute("data-slide-to");r&&(i.interval=!1),o._jQueryInterface.call(d(n),i),r&&d(n).data(I).to(r),t.preventDefault()}}},s(o,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return q}}]),o}();d(document).on(U.CLICK_DATA_API,rt,at._dataApiClickHandler),d(window).on(U.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(ot)),e=0,n=t.length;e<n;e++){var i=d(t[e]);at._jQueryInterface.call(i,i.data())}}),d.fn[P]=at._jQueryInterface,d.fn[P].Constructor=at,d.fn[P].noConflict=function(){return d.fn[P]=L,at._jQueryInterface};var lt="collapse",ut="bs.collapse",ct="."+ut,ht=d.fn[lt],pt={toggle:!0,parent:""},ft={toggle:"boolean",parent:"(string|element)"},dt={SHOW:"show"+ct,SHOWN:"shown"+ct,HIDE:"hide"+ct,HIDDEN:"hidden"+ct,CLICK_DATA_API:"click"+ct+".data-api"},mt="show",gt="collapse",yt="collapsing",vt="collapsed",_t="width",bt="height",wt=".show, .collapsing",xt='[data-toggle="collapse"]',Ct=function(){function a(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(xt)),i=0,r=n.length;i<r;i++){var o=n[i],s=m.getSelectorFromElement(o),a=[].slice.call(document.querySelectorAll(s)).filter(function(t){return t===e});null!==s&&0<a.length&&(this._selector=s,this._triggerArray.push(o))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=a.prototype;return t.toggle=function(){d(this._element).hasClass(mt)?this.hide():this.show()},t.show=function(){var t,e,n=this;if(!this._isTransitioning&&!d(this._element).hasClass(mt)&&(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(wt)).filter(function(t){return"string"==typeof n._config.parent?t.getAttribute("data-parent")===n._config.parent:t.classList.contains(gt)})).length&&(t=null),!(t&&(e=d(t).not(this._selector).data(ut))&&e._isTransitioning))){var i=d.Event(dt.SHOW);if(d(this._element).trigger(i),!i.isDefaultPrevented()){t&&(a._jQueryInterface.call(d(t).not(this._selector),"hide"),e||d(t).data(ut,null));var r=this._getDimension();d(this._element).removeClass(gt).addClass(yt),this._element.style[r]=0,this._triggerArray.length&&d(this._triggerArray).removeClass(vt).attr("aria-expanded",!0),this.setTransitioning(!0);var o="scroll"+(r[0].toUpperCase()+r.slice(1)),s=m.getTransitionDurationFromElement(this._element);d(this._element).one(m.TRANSITION_END,function(){d(n._element).removeClass(yt).addClass(gt).addClass(mt),n._element.style[r]="",n.setTransitioning(!1),d(n._element).trigger(dt.SHOWN)}).emulateTransitionEnd(s),this._element.style[r]=this._element[o]+"px"}}},t.hide=function(){var t=this;if(!this._isTransitioning&&d(this._element).hasClass(mt)){var e=d.Event(dt.HIDE);if(d(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",m.reflow(this._element),d(this._element).addClass(yt).removeClass(gt).removeClass(mt);var i=this._triggerArray.length;if(0<i)for(var r=0;r<i;r++){var o=this._triggerArray[r],s=m.getSelectorFromElement(o);if(null!==s)d([].slice.call(document.querySelectorAll(s))).hasClass(mt)||d(o).addClass(vt).attr("aria-expanded",!1)}this.setTransitioning(!0);this._element.style[n]="";var a=m.getTransitionDurationFromElement(this._element);d(this._element).one(m.TRANSITION_END,function(){t.setTransitioning(!1),d(t._element).removeClass(yt).addClass(gt).trigger(dt.HIDDEN)}).emulateTransitionEnd(a)}}},t.setTransitioning=function(t){this._isTransitioning=t},t.dispose=function(){d.removeData(this._element,ut),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(t){return(t=l({},pt,t)).toggle=Boolean(t.toggle),m.typeCheckConfig(lt,t,ft),t},t._getDimension=function(){return d(this._element).hasClass(_t)?_t:bt},t._getParent=function(){var t,n=this;m.isElement(this._config.parent)?(t=this._config.parent,void 0!==this._config.parent.jquery&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent);var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',i=[].slice.call(t.querySelectorAll(e));return d(i).each(function(t,e){n._addAriaAndCollapsedClass(a._getTargetFromElement(e),[e])}),t},t._addAriaAndCollapsedClass=function(t,e){var n=d(t).hasClass(mt);e.length&&d(e).toggleClass(vt,!n).attr("aria-expanded",n)},a._getTargetFromElement=function(t){var e=m.getSelectorFromElement(t);return e?document.querySelector(e):null},a._jQueryInterface=function(i){return this.each(function(){var t=d(this),e=t.data(ut),n=l({},pt,t.data(),"object"==typeof i&&i?i:{});if(!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||(e=new a(this,n),t.data(ut,e)),"string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i]()}})},s(a,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return pt}}]),a}();d(document).on(dt.CLICK_DATA_API,xt,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=d(this),e=m.getSelectorFromElement(this),i=[].slice.call(document.querySelectorAll(e));d(i).each(function(){var t=d(this),e=t.data(ut)?"toggle":n.data();Ct._jQueryInterface.call(t,e)})}),d.fn[lt]=Ct._jQueryInterface,d.fn[lt].Constructor=Ct,d.fn[lt].noConflict=function(){return d.fn[lt]=ht,Ct._jQueryInterface};var Tt="dropdown",St="bs.dropdown",Et="."+St,kt=".data-api",Nt=d.fn[Tt],Mt=new RegExp("38|40|27"),Dt={HIDE:"hide"+Et,HIDDEN:"hidden"+Et,SHOW:"show"+Et,SHOWN:"shown"+Et,CLICK:"click"+Et,CLICK_DATA_API:"click"+Et+kt,KEYDOWN_DATA_API:"keydown"+Et+kt,KEYUP_DATA_API:"keyup"+Et+kt},At="disabled",Ot="show",Pt="dropup",It="dropright",Rt="dropleft",Lt="dropdown-menu-right",qt="position-static",jt='[data-toggle="dropdown"]',Ft=".dropdown form",zt=".dropdown-menu",Ht=".navbar-nav",Bt=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Ut="top-start",$t="top-end",Wt="bottom-start",Vt="bottom-end",Yt="right-start",Kt="left-start",Gt={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},Qt={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},Jt=function(){function u(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=u.prototype;return t.toggle=function(){if(!this._element.disabled&&!d(this._element).hasClass(At)){var t=u._getParentFromElement(this._element),e=d(this._menu).hasClass(Ot);if(u._clearMenus(),!e){var n={relatedTarget:this._element},i=d.Event(Dt.SHOW,n);if(d(t).trigger(i),!i.isDefaultPrevented()){if(!this._inNavbar){if(void 0===h)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var r=this._element;"parent"===this._config.reference?r=t:m.isElement(this._config.reference)&&(r=this._config.reference,void 0!==this._config.reference.jquery&&(r=this._config.reference[0])),"scrollParent"!==this._config.boundary&&d(t).addClass(qt),this._popper=new h(r,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===d(t).closest(Ht).length&&d(document.body).children().on("mouseover",null,d.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),d(this._menu).toggleClass(Ot),d(t).toggleClass(Ot).trigger(d.Event(Dt.SHOWN,n))}}}},t.show=function(){if(!(this._element.disabled||d(this._element).hasClass(At)||d(this._menu).hasClass(Ot))){var t={relatedTarget:this._element},e=d.Event(Dt.SHOW,t),n=u._getParentFromElement(this._element);d(n).trigger(e),e.isDefaultPrevented()||(d(this._menu).toggleClass(Ot),d(n).toggleClass(Ot).trigger(d.Event(Dt.SHOWN,t)))}},t.hide=function(){if(!this._element.disabled&&!d(this._element).hasClass(At)&&d(this._menu).hasClass(Ot)){var t={relatedTarget:this._element},e=d.Event(Dt.HIDE,t),n=u._getParentFromElement(this._element);d(n).trigger(e),e.isDefaultPrevented()||(d(this._menu).toggleClass(Ot),d(n).toggleClass(Ot).trigger(d.Event(Dt.HIDDEN,t)))}},t.dispose=function(){d.removeData(this._element,St),d(this._element).off(Et),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;d(this._element).on(Dt.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},t._getConfig=function(t){return t=l({},this.constructor.Default,d(this._element).data(),t),m.typeCheckConfig(Tt,t,this.constructor.DefaultType),t},t._getMenuElement=function(){if(!this._menu){var t=u._getParentFromElement(this._element);t&&(this._menu=t.querySelector(zt))}return this._menu},t._getPlacement=function(){var t=d(this._element.parentNode),e=Wt;return t.hasClass(Pt)?(e=Ut,d(this._menu).hasClass(Lt)&&(e=$t)):t.hasClass(It)?e=Yt:t.hasClass(Rt)?e=Kt:d(this._menu).hasClass(Lt)&&(e=Vt),e},t._detectNavbar=function(){return 0<d(this._element).closest(".navbar").length},t._getOffset=function(){var e=this,t={};return"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e._config.offset(t.offsets,e._element)||{}),t}:t.offset=this._config.offset,t},t._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),t},u._jQueryInterface=function(e){return this.each(function(){var t=d(this).data(St);if(t||(t=new u(this,"object"==typeof e?e:null),d(this).data(St,t)),"string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},u._clearMenus=function(t){if(!t||3!==t.which&&("keyup"!==t.type||9===t.which))for(var e=[].slice.call(document.querySelectorAll(jt)),n=0,i=e.length;n<i;n++){var r=u._getParentFromElement(e[n]),o=d(e[n]).data(St),s={relatedTarget:e[n]};if(t&&"click"===t.type&&(s.clickEvent=t),o){var a=o._menu;if(d(r).hasClass(Ot)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&9===t.which)&&d.contains(r,t.target))){var l=d.Event(Dt.HIDE,s);d(r).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&d(document.body).children().off("mouseover",null,d.noop),e[n].setAttribute("aria-expanded","false"),d(a).removeClass(Ot),d(r).removeClass(Ot).trigger(d.Event(Dt.HIDDEN,s)))}}}},u._getParentFromElement=function(t){var e,n=m.getSelectorFromElement(t);return n&&(e=document.querySelector(n)),e||t.parentNode},u._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(32===t.which||27!==t.which&&(40!==t.which&&38!==t.which||d(t.target).closest(zt).length)):Mt.test(t.which))&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!d(this).hasClass(At))){var e=u._getParentFromElement(this),n=d(e).hasClass(Ot);if(n&&(!n||27!==t.which&&32!==t.which)){var i=[].slice.call(e.querySelectorAll(Bt));if(0!==i.length){var r=i.indexOf(t.target);38===t.which&&0<r&&r--,40===t.which&&r<i.length-1&&r++,r<0&&(r=0),i[r].focus()}}else{if(27===t.which){var o=e.querySelector(jt);d(o).trigger("focus")}d(this).trigger("click")}}},s(u,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Gt}},{key:"DefaultType",get:function(){return Qt}}]),u}();d(document).on(Dt.KEYDOWN_DATA_API,jt,Jt._dataApiKeydownHandler).on(Dt.KEYDOWN_DATA_API,zt,Jt._dataApiKeydownHandler).on(Dt.CLICK_DATA_API+" "+Dt.KEYUP_DATA_API,Jt._clearMenus).on(Dt.CLICK_DATA_API,jt,function(t){t.preventDefault(),t.stopPropagation(),Jt._jQueryInterface.call(d(this),"toggle")}).on(Dt.CLICK_DATA_API,Ft,function(t){t.stopPropagation()}),d.fn[Tt]=Jt._jQueryInterface,d.fn[Tt].Constructor=Jt,d.fn[Tt].noConflict=function(){return d.fn[Tt]=Nt,Jt._jQueryInterface};var Xt="modal",Zt="bs.modal",te="."+Zt,ee=d.fn[Xt],ne={backdrop:!0,keyboard:!0,focus:!0,show:!0},ie={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},re={HIDE:"hide"+te,HIDDEN:"hidden"+te,SHOW:"show"+te,SHOWN:"shown"+te,FOCUSIN:"focusin"+te,RESIZE:"resize"+te,CLICK_DISMISS:"click.dismiss"+te,KEYDOWN_DISMISS:"keydown.dismiss"+te,MOUSEUP_DISMISS:"mouseup.dismiss"+te,MOUSEDOWN_DISMISS:"mousedown.dismiss"+te,CLICK_DATA_API:"click"+te+".data-api"},oe="modal-dialog-scrollable",se="modal-scrollbar-measure",ae="modal-backdrop",le="modal-open",ue="fade",ce="show",he=".modal-dialog",pe=".modal-body",fe='[data-toggle="modal"]',de='[data-dismiss="modal"]',me=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ge=".sticky-top",ye=function(){function r(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(he),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var t=r.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e=this;if(!this._isShown&&!this._isTransitioning){d(this._element).hasClass(ue)&&(this._isTransitioning=!0);var n=d.Event(re.SHOW,{relatedTarget:t});d(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),d(this._element).on(re.CLICK_DISMISS,de,function(t){return e.hide(t)}),d(this._dialog).on(re.MOUSEDOWN_DISMISS,function(){d(e._element).one(re.MOUSEUP_DISMISS,function(t){d(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return e._showElement(t)}))}},t.hide=function(t){var e=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var n=d.Event(re.HIDE);if(d(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var i=d(this._element).hasClass(ue);if(i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),d(document).off(re.FOCUSIN),d(this._element).removeClass(ce),d(this._element).off(re.CLICK_DISMISS),d(this._dialog).off(re.MOUSEDOWN_DISMISS),i){var r=m.getTransitionDurationFromElement(this._element);d(this._element).one(m.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(r)}else this._hideModal()}}},t.dispose=function(){[window,this._element,this._dialog].forEach(function(t){return d(t).off(te)}),d(document).off(re.FOCUSIN),d.removeData(this._element,Zt),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=l({},ne,t),m.typeCheckConfig(Xt,t,ie),t},t._showElement=function(t){var e=this,n=d(this._element).hasClass(ue);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),d(this._dialog).hasClass(oe)?this._dialog.querySelector(pe).scrollTop=0:this._element.scrollTop=0,n&&m.reflow(this._element),d(this._element).addClass(ce),this._config.focus&&this._enforceFocus();function i(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,d(e._element).trigger(r)}var r=d.Event(re.SHOWN,{relatedTarget:t});if(n){var o=m.getTransitionDurationFromElement(this._dialog);d(this._dialog).one(m.TRANSITION_END,i).emulateTransitionEnd(o)}else i()},t._enforceFocus=function(){var e=this;d(document).off(re.FOCUSIN).on(re.FOCUSIN,function(t){document!==t.target&&e._element!==t.target&&0===d(e._element).has(t.target).length&&e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?d(this._element).on(re.KEYDOWN_DISMISS,function(t){27===t.which&&(t.preventDefault(),e.hide())}):this._isShown||d(this._element).off(re.KEYDOWN_DISMISS)},t._setResizeEvent=function(){var e=this;this._isShown?d(window).on(re.RESIZE,function(t){return e.handleUpdate(t)}):d(window).off(re.RESIZE)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){d(document.body).removeClass(le),t._resetAdjustments(),t._resetScrollbar(),d(t._element).trigger(re.HIDDEN)})},t._removeBackdrop=function(){this._backdrop&&(d(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e=this,n=d(this._element).hasClass(ue)?ue:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=ae,n&&this._backdrop.classList.add(n),d(this._backdrop).appendTo(document.body),d(this._element).on(re.CLICK_DISMISS,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._element.focus():e.hide())}),n&&m.reflow(this._backdrop),d(this._backdrop).addClass(ce),!t)return;if(!n)return void t();var i=m.getTransitionDurationFromElement(this._backdrop);d(this._backdrop).one(m.TRANSITION_END,t).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){d(this._backdrop).removeClass(ce);var r=function(){e._removeBackdrop(),t&&t()};if(d(this._element).hasClass(ue)){var o=m.getTransitionDurationFromElement(this._backdrop);d(this._backdrop).one(m.TRANSITION_END,r).emulateTransitionEnd(o)}else r()}else t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var r=this;if(this._isBodyOverflowing){var t=[].slice.call(document.querySelectorAll(me)),e=[].slice.call(document.querySelectorAll(ge));d(t).each(function(t,e){var n=e.style.paddingRight,i=d(e).css("padding-right");d(e).data("padding-right",n).css("padding-right",parseFloat(i)+r._scrollbarWidth+"px")}),d(e).each(function(t,e){var n=e.style.marginRight,i=d(e).css("margin-right");d(e).data("margin-right",n).css("margin-right",parseFloat(i)-r._scrollbarWidth+"px")});var n=document.body.style.paddingRight,i=d(document.body).css("padding-right");d(document.body).data("padding-right",n).css("padding-right",parseFloat(i)+this._scrollbarWidth+"px")}d(document.body).addClass(le)},t._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(me));d(t).each(function(t,e){var n=d(e).data("padding-right");d(e).removeData("padding-right"),e.style.paddingRight=n||""});var e=[].slice.call(document.querySelectorAll(""+ge));d(e).each(function(t,e){var n=d(e).data("margin-right");void 0!==n&&d(e).css("margin-right",n).removeData("margin-right")});var n=d(document.body).data("padding-right");d(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className=se,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},r._jQueryInterface=function(n,i){return this.each(function(){var t=d(this).data(Zt),e=l({},ne,d(this).data(),"object"==typeof n&&n?n:{});if(t||(t=new r(this,e),d(this).data(Zt,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n](i)}else e.show&&t.show(i)})},s(r,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return ne}}]),r}();d(document).on(re.CLICK_DATA_API,fe,function(t){var e,n=this,i=m.getSelectorFromElement(this);i&&(e=document.querySelector(i));var r=d(e).data(Zt)?"toggle":l({},d(e).data(),d(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var o=d(e).one(re.SHOW,function(t){t.isDefaultPrevented()||o.one(re.HIDDEN,function(){d(n).is(":visible")&&n.focus()})});ye._jQueryInterface.call(d(e),r,this)}),d.fn[Xt]=ye._jQueryInterface,d.fn[Xt].Constructor=ye,d.fn[Xt].noConflict=function(){return d.fn[Xt]=ee,ye._jQueryInterface};var ve=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],_e={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},be=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,we=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function xe(t,s,e){if(0===t.length)return t;if(e&&"function"==typeof e)return e(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),a=Object.keys(s),l=[].slice.call(n.body.querySelectorAll("*")),i=function(t,e){var n=l[t],i=n.nodeName.toLowerCase();if(-1===a.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var r=[].slice.call(n.attributes),o=[].concat(s["*"]||[],s[i]||[]);r.forEach(function(t){!function(t,e){var n=t.nodeName.toLowerCase();if(-1!==e.indexOf(n))return-1===ve.indexOf(n)||Boolean(t.nodeValue.match(be)||t.nodeValue.match(we));for(var i=e.filter(function(t){return t instanceof RegExp}),r=0,o=i.length;r<o;r++)if(n.match(i[r]))return!0;return!1}(t,o)&&n.removeAttribute(t.nodeName)})},r=0,o=l.length;r<o;r++)i(r);return n.body.innerHTML}var Ce="tooltip",Te="bs.tooltip",Se="."+Te,Ee=d.fn[Ce],ke="bs-tooltip",Ne=new RegExp("(^|\\s)"+ke+"\\S+","g"),Me=["sanitize","whiteList","sanitizeFn"],De={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},Ae={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Oe={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:_e},Pe="show",Ie="out",Re={HIDE:"hide"+Se,HIDDEN:"hidden"+Se,SHOW:"show"+Se,SHOWN:"shown"+Se,INSERTED:"inserted"+Se,CLICK:"click"+Se,FOCUSIN:"focusin"+Se,FOCUSOUT:"focusout"+Se,MOUSEENTER:"mouseenter"+Se,MOUSELEAVE:"mouseleave"+Se},Le="fade",qe="show",je=".tooltip-inner",Fe=".arrow",ze="hover",He="focus",Be="click",Ue="manual",$e=function(){function i(t,e){if(void 0===h)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=i.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,n=d(t.currentTarget).data(e);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),d(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(d(this.getTipElement()).hasClass(qe))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),d.removeData(this.element,this.constructor.DATA_KEY),d(this.element).off(this.constructor.EVENT_KEY),d(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&d(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===d(this.element).css("display"))throw new Error("Please use show on visible elements");var t=d.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){d(this.element).trigger(t);var n=m.findShadowRoot(this.element),i=d.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!i)return;var r=this.getTipElement(),o=m.getUID(this.constructor.NAME);r.setAttribute("id",o),this.element.setAttribute("aria-describedby",o),this.setContent(),this.config.animation&&d(r).addClass(Le);var s="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,a=this._getAttachment(s);this.addAttachmentClass(a);var l=this._getContainer();d(r).data(this.constructor.DATA_KEY,this),d.contains(this.element.ownerDocument.documentElement,this.tip)||d(r).appendTo(l),d(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new h(this.element,r,{placement:a,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:Fe},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}}),d(r).addClass(qe),"ontouchstart"in document.documentElement&&d(document.body).children().on("mouseover",null,d.noop);var u=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,d(e.element).trigger(e.constructor.Event.SHOWN),t===Ie&&e._leave(null,e)};if(d(this.tip).hasClass(Le)){var c=m.getTransitionDurationFromElement(this.tip);d(this.tip).one(m.TRANSITION_END,u).emulateTransitionEnd(c)}else u()}},t.hide=function(t){function e(){n._hoverState!==Pe&&i.parentNode&&i.parentNode.removeChild(i),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),d(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),t&&t()}var n=this,i=this.getTipElement(),r=d.Event(this.constructor.Event.HIDE);if(d(this.element).trigger(r),!r.isDefaultPrevented()){if(d(i).removeClass(qe),"ontouchstart"in document.documentElement&&d(document.body).children().off("mouseover",null,d.noop),this._activeTrigger[Be]=!1,this._activeTrigger[He]=!1,this._activeTrigger[ze]=!1,d(this.tip).hasClass(Le)){var o=m.getTransitionDurationFromElement(i);d(i).one(m.TRANSITION_END,e).emulateTransitionEnd(o)}else e();this._hoverState=""}},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(t){d(this.getTipElement()).addClass(ke+"-"+t)},t.getTipElement=function(){return this.tip=this.tip||d(this.config.template)[0],this.tip},t.setContent=function(){var t=this.getTipElement();this.setElementContent(d(t.querySelectorAll(je)),this.getTitle()),d(t).removeClass(Le+" "+qe)},t.setElementContent=function(t,e){"object"!=typeof e||!e.nodeType&&!e.jquery?this.config.html?(this.config.sanitize&&(e=xe(e,this.config.whiteList,this.config.sanitizeFn)),t.html(e)):t.text(e):this.config.html?d(e).parent().is(t)||t.empty().append(e):t.text(d(e).text())},t.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},t._getOffset=function(){var e=this,t={};return"function"==typeof this.config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e.config.offset(t.offsets,e.element)||{}),t}:t.offset=this.config.offset,t},t._getContainer=function(){return!1===this.config.container?document.body:m.isElement(this.config.container)?d(this.config.container):d(document).find(this.config.container)},t._getAttachment=function(t){return Ae[t.toUpperCase()]},t._setListeners=function(){var i=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)d(i.element).on(i.constructor.Event.CLICK,i.config.selector,function(t){return i.toggle(t)});else if(t!==Ue){var e=t===ze?i.constructor.Event.MOUSEENTER:i.constructor.Event.FOCUSIN,n=t===ze?i.constructor.Event.MOUSELEAVE:i.constructor.Event.FOCUSOUT;d(i.element).on(e,i.config.selector,function(t){return i._enter(t)}).on(n,i.config.selector,function(t){return i._leave(t)})}}),d(this.element).closest(".modal").on("hide.bs.modal",function(){i.element&&i.hide()}),this.config.selector?this.config=l({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");!this.element.getAttribute("title")&&"string"==t||(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(t,e){var n=this.constructor.DATA_KEY;(e=e||d(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),d(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?He:ze]=!0),d(e.getTipElement()).hasClass(qe)||e._hoverState===Pe?e._hoverState=Pe:(clearTimeout(e._timeout),e._hoverState=Pe,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===Pe&&e.show()},e.config.delay.show):e.show())},t._leave=function(t,e){var n=this.constructor.DATA_KEY;(e=e||d(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),d(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?He:ze]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=Ie,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){e._hoverState===Ie&&e.hide()},e.config.delay.hide):e.hide())},t._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},t._getConfig=function(t){var e=d(this.element).data();return Object.keys(e).forEach(function(t){-1!==Me.indexOf(t)&&delete e[t]}),"number"==typeof(t=l({},this.constructor.Default,e,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),m.typeCheckConfig(Ce,t,this.constructor.DefaultType),t.sanitize&&(t.template=xe(t.template,t.whiteList,t.sanitizeFn)),t},t._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},t._cleanTipClass=function(){var t=d(this.getTipElement()),e=t.attr("class").match(Ne);null!==e&&e.length&&t.removeClass(e.join(""))},t._handlePopperPlacementChange=function(t){var e=t.instance;this.tip=e.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},t._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(d(t).removeClass(Le),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},i._jQueryInterface=function(n){return this.each(function(){var t=d(this).data(Te),e="object"==typeof n&&n;if((t||!/dispose|hide/.test(n))&&(t||(t=new i(this,e),d(this).data(Te,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Oe}},{key:"NAME",get:function(){return Ce}},{key:"DATA_KEY",get:function(){return Te}},{key:"Event",get:function(){return Re}},{key:"EVENT_KEY",get:function(){return Se}},{key:"DefaultType",get:function(){return De}}]),i}();d.fn[Ce]=$e._jQueryInterface,d.fn[Ce].Constructor=$e,d.fn[Ce].noConflict=function(){return d.fn[Ce]=Ee,$e._jQueryInterface};var We="popover",Ve="bs.popover",Ye="."+Ve,Ke=d.fn[We],Ge="bs-popover",Qe=new RegExp("(^|\\s)"+Ge+"\\S+","g"),Je=l({},$e.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Xe=l({},$e.DefaultType,{content:"(string|element|function)"}),Ze="fade",tn="show",en=".popover-header",nn=".popover-body",rn={HIDE:"hide"+Ye,HIDDEN:"hidden"+Ye,SHOW:"show"+Ye,SHOWN:"shown"+Ye,INSERTED:"inserted"+Ye,CLICK:"click"+Ye,FOCUSIN:"focusin"+Ye,FOCUSOUT:"focusout"+Ye,MOUSEENTER:"mouseenter"+Ye,MOUSELEAVE:"mouseleave"+Ye},on=function(t){function i(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(i,t);var e=i.prototype;return e.isWithContent=function(){return this.getTitle()||this._getContent()},e.addAttachmentClass=function(t){d(this.getTipElement()).addClass(Ge+"-"+t)},e.getTipElement=function(){return this.tip=this.tip||d(this.config.template)[0],this.tip},e.setContent=function(){var t=d(this.getTipElement());this.setElementContent(t.find(en),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(nn),e),t.removeClass(Ze+" "+tn)},e._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},e._cleanTipClass=function(){var t=d(this.getTipElement()),e=t.attr("class").match(Qe);null!==e&&0<e.length&&t.removeClass(e.join(""))},i._jQueryInterface=function(n){return this.each(function(){var t=d(this).data(Ve),e="object"==typeof n?n:null;if((t||!/dispose|hide/.test(n))&&(t||(t=new i(this,e),d(this).data(Ve,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Je}},{key:"NAME",get:function(){return We}},{key:"DATA_KEY",get:function(){return Ve}},{key:"Event",get:function(){return rn}},{key:"EVENT_KEY",get:function(){return Ye}},{key:"DefaultType",get:function(){return Xe}}]),i}($e);d.fn[We]=on._jQueryInterface,d.fn[We].Constructor=on,d.fn[We].noConflict=function(){return d.fn[We]=Ke,on._jQueryInterface};var sn="scrollspy",an="bs.scrollspy",ln="."+an,un=d.fn[sn],cn={offset:10,method:"auto",target:""},hn={offset:"number",method:"string",target:"(string|element)"},pn={ACTIVATE:"activate"+ln,SCROLL:"scroll"+ln,LOAD_DATA_API:"load"+ln+".data-api"},fn="dropdown-item",dn="active",mn='[data-spy="scroll"]',gn=".nav, .list-group",yn=".nav-link",vn=".nav-item",_n=".list-group-item",bn=".dropdown",wn=".dropdown-item",xn=".dropdown-toggle",Cn="offset",Tn="position",Sn=function(){function n(t,e){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+yn+","+this._config.target+" "+_n+","+this._config.target+" "+wn,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,d(this._scrollElement).on(pn.SCROLL,function(t){return n._process(t)}),this.refresh(),this._process()}var t=n.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?Cn:Tn,r="auto"===this._config.method?t:this._config.method,o=r===Tn?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var e,n=m.getSelectorFromElement(t);if(n&&(e=document.querySelector(n)),e){var i=e.getBoundingClientRect();if(i.width||i.height)return[d(e)[r]().top+o,n]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},t.dispose=function(){d.removeData(this._element,an),d(this._scrollElement).off(ln),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(t){if("string"!=typeof(t=l({},cn,"object"==typeof t&&t?t:{})).target){var e=d(t.target).attr("id");e||(e=m.getUID(sn),d(t.target).attr("id",e)),t.target="#"+e}return m.typeCheckConfig(sn,t,hn),t},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var r=this._offsets.length;r--;){this._activeTarget!==this._targets[r]&&t>=this._offsets[r]&&(void 0===this._offsets[r+1]||t<this._offsets[r+1])&&this._activate(this._targets[r])}}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",").map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'}),n=d([].slice.call(document.querySelectorAll(t.join(","))));n.hasClass(fn)?(n.closest(bn).find(xn).addClass(dn),n.addClass(dn)):(n.addClass(dn),n.parents(gn).prev(yn+", "+_n).addClass(dn),n.parents(gn).prev(vn).children(yn).addClass(dn)),d(this._scrollElement).trigger(pn.ACTIVATE,{relatedTarget:e})},t._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains(dn)}).forEach(function(t){return t.classList.remove(dn)})},n._jQueryInterface=function(e){return this.each(function(){var t=d(this).data(an);if(t||(t=new n(this,"object"==typeof e&&e),d(this).data(an,t)),"string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},s(n,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return cn}}]),n}();d(window).on(pn.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(mn)),e=t.length;e--;){var n=d(t[e]);Sn._jQueryInterface.call(n,n.data())}}),d.fn[sn]=Sn._jQueryInterface,d.fn[sn].Constructor=Sn,d.fn[sn].noConflict=function(){return d.fn[sn]=un,Sn._jQueryInterface};var En="bs.tab",kn="."+En,Nn=d.fn.tab,Mn={HIDE:"hide"+kn,HIDDEN:"hidden"+kn,SHOW:"show"+kn,SHOWN:"shown"+kn,CLICK_DATA_API:"click.bs.tab.data-api"},Dn="dropdown-menu",An="active",On="disabled",Pn="fade",In="show",Rn=".dropdown",Ln=".nav, .list-group",qn=".active",jn="> li > .active",Fn='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',zn=".dropdown-toggle",Hn="> .dropdown-menu .active",Bn=function(){function i(t){this._element=t}var t=i.prototype;return t.show=function(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&d(this._element).hasClass(An)||d(this._element).hasClass(On))){var t,i,e=d(this._element).closest(Ln)[0],r=m.getSelectorFromElement(this._element);if(e){var o="UL"===e.nodeName||"OL"===e.nodeName?jn:qn;i=(i=d.makeArray(d(e).find(o)))[i.length-1]}var s=d.Event(Mn.HIDE,{relatedTarget:this._element}),a=d.Event(Mn.SHOW,{relatedTarget:i});if(i&&d(i).trigger(s),d(this._element).trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){r&&(t=document.querySelector(r)),this._activate(this._element,e);var l=function(){var t=d.Event(Mn.HIDDEN,{relatedTarget:n._element}),e=d.Event(Mn.SHOWN,{relatedTarget:i});d(i).trigger(t),d(n._element).trigger(e)};t?this._activate(t,t.parentNode,l):l()}}},t.dispose=function(){d.removeData(this._element,En),this._element=null},t._activate=function(t,e,n){function i(){return r._transitionComplete(t,o,n)}var r=this,o=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?d(e).children(qn):d(e).find(jn))[0],s=n&&o&&d(o).hasClass(Pn);if(o&&s){var a=m.getTransitionDurationFromElement(o);d(o).removeClass(In).one(m.TRANSITION_END,i).emulateTransitionEnd(a)}else i()},t._transitionComplete=function(t,e,n){if(e){d(e).removeClass(An);var i=d(e.parentNode).find(Hn)[0];i&&d(i).removeClass(An),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}if(d(t).addClass(An),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),m.reflow(t),t.classList.contains(Pn)&&t.classList.add(In),t.parentNode&&d(t.parentNode).hasClass(Dn)){var r=d(t).closest(Rn)[0];if(r){var o=[].slice.call(r.querySelectorAll(zn));d(o).addClass(An)}t.setAttribute("aria-expanded",!0)}n&&n()},i._jQueryInterface=function(n){return this.each(function(){var t=d(this),e=t.data(En);if(e||(e=new i(this),t.data(En,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),i}();d(document).on(Mn.CLICK_DATA_API,Fn,function(t){t.preventDefault(),Bn._jQueryInterface.call(d(this),"show")}),d.fn.tab=Bn._jQueryInterface,d.fn.tab.Constructor=Bn,d.fn.tab.noConflict=function(){return d.fn.tab=Nn,Bn._jQueryInterface};var Un="toast",$n="bs.toast",Wn="."+$n,Vn=d.fn[Un],Yn={CLICK_DISMISS:"click.dismiss"+Wn,HIDE:"hide"+Wn,HIDDEN:"hidden"+Wn,SHOW:"show"+Wn,SHOWN:"shown"+Wn},Kn="fade",Gn="hide",Qn="show",Jn="showing",Xn={animation:"boolean",autohide:"boolean",delay:"number"},Zn={animation:!0,autohide:!0,delay:500},ti='[data-dismiss="toast"]',ei=function(){function i(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var t=i.prototype;return t.show=function(){var t=this;d(this._element).trigger(Yn.SHOW),this._config.animation&&this._element.classList.add(Kn);function e(){t._element.classList.remove(Jn),t._element.classList.add(Qn),d(t._element).trigger(Yn.SHOWN),t._config.autohide&&t.hide()}if(this._element.classList.remove(Gn),this._element.classList.add(Jn),this._config.animation){var n=m.getTransitionDurationFromElement(this._element);d(this._element).one(m.TRANSITION_END,e).emulateTransitionEnd(n)}else e()},t.hide=function(t){var e=this;this._element.classList.contains(Qn)&&(d(this._element).trigger(Yn.HIDE),t?this._close():this._timeout=setTimeout(function(){e._close()},this._config.delay))},t.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(Qn)&&this._element.classList.remove(Qn),d(this._element).off(Yn.CLICK_DISMISS),d.removeData(this._element,$n),this._element=null,this._config=null},t._getConfig=function(t){return t=l({},Zn,d(this._element).data(),"object"==typeof t&&t?t:{}),m.typeCheckConfig(Un,t,this.constructor.DefaultType),t},t._setListeners=function(){var t=this;d(this._element).on(Yn.CLICK_DISMISS,ti,function(){return t.hide(!0)})},t._close=function(){function t(){e._element.classList.add(Gn),d(e._element).trigger(Yn.HIDDEN)}var e=this;if(this._element.classList.remove(Qn),this._config.animation){var n=m.getTransitionDurationFromElement(this._element);d(this._element).one(m.TRANSITION_END,t).emulateTransitionEnd(n)}else t()},i._jQueryInterface=function(n){return this.each(function(){var t=d(this),e=t.data($n);if(e||(e=new i(this,"object"==typeof n&&n),t.data($n,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n](this)}})},s(i,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"DefaultType",get:function(){return Xn}},{key:"Default",get:function(){return Zn}}]),i}();d.fn[Un]=ei._jQueryInterface,d.fn[Un].Constructor=ei,d.fn[Un].noConflict=function(){return d.fn[Un]=Vn,ei._jQueryInterface},function(){if(void 0===d)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=d.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),t.Util=m,t.Alert=y,t.Button=O,t.Carousel=at,t.Collapse=Ct,t.Dropdown=Jt,t.Modal=ye,t.Popover=on,t.Scrollspy=Sn,t.Tab=Bn,t.Toast=ei,t.Tooltip=$e,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?r(n,t("jquery"),t("popper.js")):r((i=i||self).bootstrap={},i.jQuery,i.Popper)},{jquery:256,"popper.js":259}],237:[function(t,e,n){e.exports=function(){var P={version:"3.4.11"};Date.now||(Date.now=function(){return+new Date});var r=[].slice,h=function(t){return r.call(t)},i=document,a=i.documentElement,I=window;try{h(a.childNodes)[0].nodeType}catch(t){h=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{i.createElement("div").style.setProperty("opacity",0,"")}catch(t){var e=I.Element.prototype,n=e.setAttribute,o=e.setAttributeNS,s=I.CSSStyleDeclaration.prototype,l=s.setProperty;e.setAttribute=function(t,e){n.call(this,t,e+"")},e.setAttributeNS=function(t,e,n){o.call(this,t,e,n+"")},s.setProperty=function(t,e,n){l.call(this,t,e+"",n)}}function u(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function c(t){return null!=t&&!isNaN(t)}function t(o){return{left:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;o(t[r],e)<0?n=1+r:i=r}return n},right:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;0<o(t[r],e)?i=r:n=1+r}return n}}}P.ascending=u,P.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},P.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o&&!(null!=(n=t[r])&&n<=n);)n=void 0;for(;++r<o;)null!=(i=t[r])&&i<n&&(n=i)}else{for(;++r<o&&!(null!=(n=e.call(t,t[r],r))&&n<=n);)n=void 0;for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i<n&&(n=i)}return n},P.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o&&!(null!=(n=t[r])&&n<=n);)n=void 0;for(;++r<o;)null!=(i=t[r])&&n<i&&(n=i)}else{for(;++r<o&&!(null!=(n=e.call(t,t[r],r))&&n<=n);)n=void 0;for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n<i&&(n=i)}return n},P.extent=function(t,e){var n,i,r,o=-1,s=t.length;if(1===arguments.length){for(;++o<s&&!(null!=(n=r=t[o])&&n<=n);)n=r=void 0;for(;++o<s;)null!=(i=t[o])&&(i<n&&(n=i),r<i&&(r=i))}else{for(;++o<s&&!(null!=(n=r=e.call(t,t[o],o))&&n<=n);)n=void 0;for(;++o<s;)null!=(i=e.call(t,t[o],o))&&(i<n&&(n=i),r<i&&(r=i))}return[n,r]},P.sum=function(t,e){var n,i=0,r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)isNaN(n=+t[o])||(i+=n);else for(;++o<r;)isNaN(n=+e.call(t,t[o],o))||(i+=n);return i},P.mean=function(t,e){var n,i=0,r=t.length,o=-1,s=r;if(1===arguments.length)for(;++o<r;)c(n=t[o])?i+=n:--s;else for(;++o<r;)c(n=e.call(t,t[o],o))?i+=n:--s;return s?i/s:void 0},P.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},P.median=function(t,e){return 1<arguments.length&&(t=t.map(e)),(t=t.filter(c)).length?P.quantile(t.sort(u),.5):void 0};var p=t(u);function f(t){return t.length}P.bisectLeft=p.left,P.bisect=P.bisectRight=p.right,P.bisector=function(n){return t(1===n.length?function(t,e){return u(n(t),e)}:n)},P.shuffle=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t},P.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},P.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(n<0?0:n);e<n;)r[e]=[i,i=t[++e]];return r},P.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=P.min(arguments,f),n=new Array(e);++t<e;)for(var i,r=-1,o=n[t]=new Array(i);++r<i;)o[r]=arguments[r][t];return n},P.transpose=function(t){return P.zip.apply(P,t)},P.keys=function(t){var e=[];for(var n in t)e.push(n);return e},P.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},P.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},P.merge=function(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);0<=--r;)for(e=(i=t[r]).length;0<=--e;)n[--s]=i[e];return n};var R=Math.abs;function d(e,n){try{for(var t in n)Object.defineProperty(e.prototype,t,{value:n[t],enumerable:!1})}catch(t){e.prototype=n}}function _(){}P.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,r=[],o=function(t){var e=1;for(;t*e%1;)e*=10;return e}(R(n)),s=-1;if(t*=o,e*=o,(n*=o)<0)for(;(i=t+n*++s)>e;)r.push(i/o);else for(;(i=t+n*++s)<e;)r.push(i/o);return r},P.map=function(t){var n=new _;if(t instanceof _)t.forEach(function(t,e){n.set(t,e)});else for(var e in t)n.set(e,t[e]);return n},d(_,{has:y,get:function(t){return this[m+t]},set:function(t,e){return this[m+t]=e},remove:function(t){return(t=m+t)in this&&delete this[t]},keys:v,values:function(){var n=[];return this.forEach(function(t,e){n.push(e)}),n},entries:function(){var n=[];return this.forEach(function(t,e){n.push({key:t,value:e})}),n},size:b,empty:w,forEach:function(t){for(var e in this)e.charCodeAt(0)===g&&t.call(this,e.substring(1),this[e])}});var m="\0",g=m.charCodeAt(0);function y(t){return m+t in this}function v(){var e=[];return this.forEach(function(t){e.push(t)}),e}function b(){var t=0;for(var e in this)e.charCodeAt(0)===g&&++t;return t}function w(){for(var t in this)if(t.charCodeAt(0)===g)return!1;return!0}function x(){}function C(e,n,i){return function(){var t=i.apply(n,arguments);return t===n?e:t}}function T(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var n=0,i=S.length;n<i;++n){var r=S[n]+e;if(r in t)return r}}P.nest=function(){var h,p,f={},d=[],e=[];function m(n,t,i){if(i>=d.length)return p?p.call(f,t):h?t.sort(h):t;for(var e,r,o,s,a=-1,l=t.length,u=d[i++],c=new _;++a<l;)(s=c.get(e=u(r=t[a])))?s.push(r):c.set(e,[r]);return o=n?(r=n(),function(t,e){r.set(t,m(n,e,i))}):(r={},function(t,e){r[t]=m(n,e,i)}),c.forEach(o),r}return f.map=function(t,e){return m(e,t,0)},f.entries=function(t){return function n(t,i){if(i>=d.length)return t;var r=[],o=e[i++];return t.forEach(function(t,e){r.push({key:t,values:n(e,i)})}),o?r.sort(function(t,e){return o(t.key,e.key)}):r}(m(P.map,t,0),0)},f.key=function(t){return d.push(t),f},f.sortKeys=function(t){return e[d.length-1]=t,f},f.sortValues=function(t){return h=t,f},f.rollup=function(t){return p=t,f},f},P.set=function(t){var e=new x;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},d(x,{has:y,add:function(t){return this[m+t]=!0,t},remove:function(t){return(t=m+t)in this&&delete this[t]},values:v,size:b,empty:w,forEach:function(t){for(var e in this)e.charCodeAt(0)===g&&t.call(this,e.substring(1))}}),P.behavior={},P.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=C(t,e,e[n]);return t};var S=["webkit","ms","moz","Moz","o","O"];function E(){}function k(){}function N(r){var o=[],s=new _;function t(){for(var t,e=o,n=-1,i=e.length;++n<i;)(t=e[n].on)&&t.apply(this,arguments);return r}return t.on=function(t,e){var n,i=s.get(t);return arguments.length<2?i&&i.on:(i&&(i.on=null,o=o.slice(0,n=o.indexOf(i)).concat(o.slice(n+1)),s.remove(t)),e&&o.push(s.set(t,{on:e})),r)},t}function L(){P.event.preventDefault()}function M(){for(var t,e=P.event;t=e.sourceEvent;)e=t;return e}function q(r){for(var o=new k,t=0,e=arguments.length;++t<e;)o[arguments[t]]=N(o);return o.of=function(n,i){return function(t){try{var e=t.sourceEvent=P.event;t.target=r,P.event=t,o[t.type].apply(n,i)}finally{P.event=e}}},o}P.dispatch=function(){for(var t=new k,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=N(t);return t},k.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(0<=n&&(i=t.substring(n+1),t=t.substring(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},P.event=null,P.requote=function(t){return t.replace(D,"\\$&")};var D=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,A={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function O(t){return A(t,B),t}var j=function(t,e){return e.querySelector(t)},F=function(t,e){return e.querySelectorAll(t)},z=a.matches||a[T(a,"matchesSelector")],H=function(t,e){return z.call(t,e)};"function"==typeof Sizzle&&(j=function(t,e){return Sizzle(t,e)[0]||null},F=Sizzle,H=Sizzle.matchesSelector),P.selection=function(){return at};var B=P.selection.prototype=[];function U(t){return"function"==typeof t?t:function(){return j(t,this)}}function $(t){return"function"==typeof t?t:function(){return F(t,this)}}B.select=function(t){var e,n,i,r,o=[];t=U(t);for(var s=-1,a=this.length;++s<a;){o.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,s)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return O(o)},B.selectAll=function(t){var e,n,i=[];t=$(t);for(var r=-1,o=this.length;++r<o;)for(var s=this[r],a=-1,l=s.length;++a<l;)(n=s[a])&&(i.push(e=h(t.call(n,n.__data__,a,r))),e.parentNode=n);return O(i)};var W={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function V(e,n){return e=P.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function Y(t){return t.trim().replace(/\s+/g," ")}function K(t){return new RegExp("(?:^|\\s+)"+P.requote(t)+"(?:\\s+|$)","g")}function G(t){return(t+"").trim().split(/^|\s+/)}function Q(n,i){var r=(n=G(n).map(J)).length;return"function"==typeof i?function(){for(var t=-1,e=i.apply(this,arguments);++t<r;)n[t](this,e)}:function(){for(var t=-1;++t<r;)n[t](this,i)}}function J(i){var r=K(i);return function(t,e){if(n=t.classList)return e?n.add(i):n.remove(i);var n=t.getAttribute("class")||"";e?(r.lastIndex=0,r.test(n)||t.setAttribute("class",Y(n+" "+i))):t.setAttribute("class",Y(n.replace(r," ")))}}function X(e,n,i){return null==n?function(){this.style.removeProperty(e)}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}:function(){this.style.setProperty(e,n,i)}}function Z(e,n){return null==n?function(){delete this[e]}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}:function(){this[e]=n}}function tt(t){return"function"==typeof t?t:(t=P.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function et(t){return{__data__:t}}function nt(t){return function(){return H(this,t)}}function it(t,e){for(var n=0,i=t.length;n<i;n++)for(var r,o=t[n],s=0,a=o.length;s<a;s++)(r=o[s])&&e(r,s,n);return t}function rt(t){return A(t,ot),t}P.ns={prefix:W,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&(n=t.substring(0,e),t=t.substring(e+1)),W.hasOwnProperty(n)?{space:W[n],local:t}:t}},B.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=P.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(V(e,t[e]));return this}return this.each(V(t,e))},B.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=G(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!K(t[r]).test(e))return!1;return!0}for(e in t)this.each(Q(e,t[e]));return this}return this.each(Q(t,e))},B.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(X(n,t[n],e));return this}if(i<2)return I.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(X(t,e,n))},B.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(Z(e,t[e]));return this}return this.each(Z(t,e))},B.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},B.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},B.append=function(t){return t=tt(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},B.insert=function(t,e){return t=tt(t),e=U(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},B.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},B.data=function(t,m){var e,n,i=-1,r=this.length;if(!arguments.length){for(t=new Array(r=(e=this[0]).length);++i<r;)(n=e[i])&&(t[i]=n.__data__);return t}function o(t,e){var n,i,r,o=t.length,s=e.length,a=Math.min(o,s),l=new Array(s),u=new Array(s),c=new Array(o);if(m){var h,p=new _,f=new _,d=[];for(n=-1;++n<o;)h=m.call(i=t[n],i.__data__,n),p.has(h)?c[n]=i:p.set(h,i),d.push(h);for(n=-1;++n<s;)h=m.call(e,r=e[n],n),(i=p.get(h))?(l[n]=i).__data__=r:f.has(h)||(u[n]=et(r)),f.set(h,r),p.remove(h);for(n=-1;++n<o;)p.has(d[n])&&(c[n]=t[n])}else{for(n=-1;++n<a;)i=t[n],r=e[n],i?(i.__data__=r,l[n]=i):u[n]=et(r);for(;n<s;++n)u[n]=et(e[n]);for(;n<o;++n)c[n]=t[n]}u.update=l,u.parentNode=l.parentNode=c.parentNode=t.parentNode,g.push(u),y.push(l),v.push(c)}var g=rt([]),y=O([]),v=O([]);if("function"==typeof t)for(;++i<r;)o(e=this[i],t.call(e,e.parentNode.__data__,i));else for(;++i<r;)o(e=this[i],t);return y.enter=function(){return g},y.exit=function(){return v},y},B.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},B.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=nt(t));for(var o=0,s=this.length;o<s;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var a=0,l=n.length;a<l;a++)(i=n[a])&&t.call(i,i.__data__,a,o)&&e.push(i)}return O(r)},B.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];0<=--r;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},B.sort=function(t){t=function(n){arguments.length||(n=u);return function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},B.each=function(i){return it(this,function(t,e,n){i.call(t,t.__data__,e,n)})},B.call=function(t){var e=h(arguments);return t.apply(e[0]=this,e),this},B.empty=function(){return!this.node()},B.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,r=n.length;i<r;i++){var o=n[i];if(o)return o}return null},B.size=function(){var t=0;return this.each(function(){++t}),t};var ot=[];function st(){var t=this.__transition__;t&&++t.active}P.selection.enter=rt,(P.selection.enter.prototype=ot).append=B.append,ot.empty=B.empty,ot.node=B.node,ot.call=B.call,ot.size=B.size,ot.select=function(t){for(var e,n,i,r,o,s=[],a=-1,l=this.length;++a<l;){i=(r=this[a]).update,s.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(o=r[u])?(e.push(i[u]=n=t.call(r.parentNode,o.__data__,u,a)),n.__data__=o.__data__):e.push(null)}return O(s)},ot.insert=function(t,e){return arguments.length<2&&(e=function(s){var a,l;return function(t,e,n){var i,r=s[n].update,o=r.length;for(n!=l&&(l=n,a=0),a<=e&&(a=e+1);!(i=r[a])&&++a<o;);return i}}(this)),B.insert.call(this,t,e)},B.transition=function(){for(var t,e,n=Sa||++Na,i=[],r=Ea||{time:Date.now(),ease:So,delay:0,duration:250},o=-1,s=this.length;++o<s;){i.push(t=[]);for(var a=this[o],l=-1,u=a.length;++l<u;)(e=a[l])&&Aa(e,l,n,r),t.push(e)}return Ta(i,n)},B.interrupt=function(){return this.each(st)},P.select=function(t){var e=["string"==typeof t?j(t,i):t];return e.parentNode=a,O([e])},P.selectAll=function(t){var e=h("string"==typeof t?F(t,i):t);return e.parentNode=a,O([e])};var at=P.select(a);function lt(r,e,n){var i="__on"+r,t=r.indexOf("."),o=ct;0<t&&(r=r.substring(0,t));var s=ut.get(r);function a(){var t=this[i];t&&(this.removeEventListener(r,t,t.$),delete this[i])}return s&&(r=s,o=ht),t?e?function(){var t=o(e,h(arguments));a.call(this),this.addEventListener(r,this[i]=t,t.$=n),t._=e}:a:e?E:function(){var t,e=new RegExp("^__on([^.]+)"+P.requote(r)+"$");for(var n in this)if(t=n.match(e)){var i=this[n];this.removeEventListener(t[1],i,i.$),delete this[n]}}}B.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(lt(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(lt(t,e,n))};var ut=P.map({mouseenter:"mouseover",mouseleave:"mouseout"});function ct(n,i){return function(t){var e=P.event;P.event=t,i[0]=this.__data__;try{n.apply(this,i)}finally{P.event=e}}}function ht(t,e){var n=ct(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}ut.forEach(function(t){"on"+t in i&&ut.remove(t)});var pt="onselectstart"in i?null:T(a.style,"userSelect"),ft=0;function dt(){var n=".dragsuppress-"+ ++ft,i="click"+n,r=P.select(I).on("touchmove"+n,L).on("dragstart"+n,L).on("selectstart"+n,L);if(pt){var o=a.style,s=o[pt];o[pt]="none"}return function(t){if(r.on(n,null),pt&&(o[pt]=s),t){function e(){r.on(i,null)}r.on(i,function(){L(),e()},!0),setTimeout(e,0)}}}P.mouse=function(t){return gt(t,M())};var mt=/WebKit/.test(I.navigator.userAgent)?-1:0;function gt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(mt<0&&(I.scrollX||I.scrollY)){var r=(n=P.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();mt=!(r.f||r.e),n.remove()}return mt?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function yt(){return P.event.changedTouches[0].identifier}function vt(){return P.event.target}function _t(){return I}P.touches=function(n,t){return arguments.length<2&&(t=M().touches),t?h(t).map(function(t){var e=gt(n,t);return e.identifier=t.identifier,e}):[]},P.behavior.drag=function(){var m=q(n,"drag","dragstart","dragend"),g=null,t=i(E,P.mouse,_t,"mousemove","mouseup"),e=i(yt,P.touch,vt,"touchmove","touchend");function n(){this.on("mousedown.drag",t).on("touchstart.drag",e)}function i(c,h,p,f,d){return function(){var i,t=P.event.target,r=this.parentNode,o=m.of(this,arguments),s=0,a=c(),e=".drag"+(null==a?"":"-"+a),n=P.select(p()).on(f+e,function(){var t,e,n=h(r,a);if(!n)return;t=n[0]-u[0],e=n[1]-u[1],s|=t|e,o({type:"drag",x:(u=n)[0]+i[0],y:n[1]+i[1],dx:t,dy:e})}).on(d+e,function(){if(!h(r,a))return;n.on(f+e,null).on(d+e,null),l(s&&P.event.target===t),o({type:"dragend"})}),l=dt(),u=h(r,a);i=g?[(i=g.apply(this,arguments)).x-u[0],i.y-u[1]]:[0,0],o({type:"dragstart"})}}return n.origin=function(t){return arguments.length?(g=t,n):g},P.rebind(n,m,"on")};var bt=Math.PI,wt=2*bt,xt=bt/2,Ct=1e-6,Tt=Ct*Ct,St=bt/180,Et=180/bt;function kt(t){return 0<t?1:t<0?-1:0}function Nt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Mt(t){return 1<t?0:t<-1?bt:Math.acos(t)}function Dt(t){return 1<t?xt:t<-1?-xt:Math.asin(t)}function At(t){return((t=Math.exp(t))+1/t)/2}function Ot(t){return(t=Math.sin(t/2))*t}var Pt=Math.SQRT2;P.interpolateZoom=function(t,e){var r=t[0],o=t[1],s=t[2],n=e[0],i=e[1],a=e[2],l=n-r,u=i-o,c=l*l+u*u,h=Math.sqrt(c),p=(a*a-s*s+4*c)/(2*s*2*h),f=(a*a-s*s-4*c)/(2*a*2*h),d=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(f*f+1)-f)-d,g=(m||Math.log(a/s))/Pt;function y(t){var e=t*g;if(m){var n=At(d),i=s/(2*h)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Pt*e+d)-function(t){return((t=Math.exp(t))-1/t)/2}(d));return[r+i*l,o+i*u,s*n/At(Pt*e+d)]}return[r+t*l,o+t*u,s*Math.exp(Pt*e)]}return y.duration=1e3*g,y},P.behavior.zoom=function(){var e,n,i,r,b,o,s,a,l,w={x:0,y:0,k:1},u=[960,500],c=Rt,x="mousedown.zoom",h="mousemove.zoom",p="mouseup.zoom",C="touchstart.zoom",T=q(f,"zoomstart","zoom","zoomend");function f(t){t.on(x,A).on(Lt+".zoom",m).on("dblclick.zoom",g).on(C,O)}function S(t){return[(t[0]-w.x)/w.k,(t[1]-w.y)/w.k]}function E(t){w.k=Math.max(c[0],Math.min(c[1],t))}function k(t,e){e=function(t){return[t[0]*w.k+w.x,t[1]*w.k+w.y]}(e),w.x+=t[0]-e[0],w.y+=t[1]-e[1]}function d(){s&&s.domain(o.range().map(function(t){return(t-w.x)/w.k}).map(o.invert)),l&&l.domain(a.range().map(function(t){return(t-w.y)/w.k}).map(a.invert))}function N(t){t({type:"zoomstart"})}function M(t){d(),t({type:"zoom",scale:w.k,translate:[w.x,w.y]})}function D(t){t({type:"zoomend"})}function A(){var t=this,e=P.event.target,n=T.of(t,arguments),i=0,r=P.select(I).on(h,function(){i=1,k(P.mouse(t),o),M(n)}).on(p,function(){r.on(h,null).on(p,null),s(i&&P.event.target===e),D(n)}),o=S(P.mouse(t)),s=dt();st.call(t),N(n)}function O(){var u,c=this,h=T.of(c,arguments),p={},f=0,r=".zoom-"+P.event.changedTouches[0].identifier,d="touchmove"+r,m="touchend"+r,g=[],o=P.select(c).on(x,null).on(C,t),s=dt();function y(){var t=P.touches(c);return u=w.k,t.forEach(function(t){t.identifier in p&&(p[t.identifier]=S(t))}),t}function t(){var t=P.event.target;P.select(t).on(d,v).on(m,_),g.push(t);for(var e=P.event.changedTouches,n=0,i=e.length;n<i;++n)p[e[n].identifier]=null;var r=y(),o=Date.now();if(1===r.length){if(o-b<500){var s=r[0],a=p[s.identifier];E(2*w.k),k(s,a),L(),M(h)}b=o}else if(1<r.length){s=r[0];var l=r[1],u=s[0]-l[0],c=s[1]-l[1];f=u*u+c*c}}function v(){for(var t,e,n,i,r=P.touches(c),o=0,s=r.length;o<s;++o,i=null)if(n=r[o],i=p[n.identifier]){if(e)break;t=n,e=i}if(i){var a=(a=n[0]-t[0])*a+(a=n[1]-t[1])*a,l=f&&Math.sqrt(a/f);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],E(l*u)}b=null,k(t,e),M(h)}function _(){if(P.event.touches.length){for(var t=P.event.changedTouches,e=0,n=t.length;e<n;++e)delete p[t[e].identifier];for(var i in p)return void y()}P.selectAll(g).on(r,null),o.on(x,A).on(C,O),s(),D(h)}st.call(c),t(),N(h)}function m(){var t=T.of(this,arguments);r?clearTimeout(r):(e=S(n=i||P.mouse(this)),st.call(this),N(t)),r=setTimeout(function(){r=null,D(t)},50),L(),E(Math.pow(2,.002*It())*w.k),k(n,e),M(t)}function g(){var t=T.of(this,arguments),e=P.mouse(this),n=S(e),i=Math.log(w.k)/Math.LN2;N(t),E(Math.pow(2,P.event.shiftKey?Math.ceil(i)-1:Math.floor(i)+1)),k(e,n),M(t),D(t)}return f.event=function(t){t.each(function(){var a=T.of(this,arguments),e=w;Sa?P.select(this).transition().each("start.zoom",function(){w=this.__chart__||{x:0,y:0,k:1},N(a)}).tween("zoom:zoom",function(){var i=u[0],t=u[1],r=i/2,o=t/2,s=P.interpolateZoom([(r-w.x)/w.k,(o-w.y)/w.k,i/w.k],[(r-e.x)/e.k,(o-e.y)/e.k,i/e.k]);return function(t){var e=s(t),n=i/e[2];this.__chart__=w={x:r-e[0]*n,y:o-e[1]*n,k:n},M(a)}}).each("end.zoom",function(){D(a)}):(this.__chart__=w,N(a),M(a),D(a))})},f.translate=function(t){return arguments.length?(w={x:+t[0],y:+t[1],k:w.k},d(),f):[w.x,w.y]},f.scale=function(t){return arguments.length?(w={x:w.x,y:w.y,k:+t},d(),f):w.k},f.scaleExtent=function(t){return arguments.length?(c=null==t?Rt:[+t[0],+t[1]],f):c},f.center=function(t){return arguments.length?(i=t&&[+t[0],+t[1]],f):i},f.size=function(t){return arguments.length?(u=t&&[+t[0],+t[1]],f):u},f.x=function(t){return arguments.length?(o=(s=t).copy(),w={x:0,y:0,k:1},f):s},f.y=function(t){return arguments.length?(a=(l=t).copy(),w={x:0,y:0,k:1},f):l},P.rebind(f,T,"on")};var It,Rt=[0,1/0],Lt="onwheel"in i?(It=function(){return-P.event.deltaY*(P.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(It=function(){return P.event.wheelDelta},"mousewheel"):(It=function(){return-P.event.detail},"MozMousePixelScroll");function qt(){}function jt(t,e,n){return this instanceof jt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof jt?new jt(t.h,t.s,t.l):se(""+t,ae,jt):new jt(t,e,n)}(P.color=qt).prototype.toString=function(){return this.rgb()+""};var Ft=(P.hsl=jt).prototype=new qt;function zt(t,e,n){var i,r;function o(t){return Math.round(255*function(t){return 360<t?t-=360:t<0&&(t+=360),t<60?i+(r-i)*t/60:t<180?r:t<240?i+(r-i)*(240-t)/60:i}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:1<e?1:e,i=2*(n=n<0?0:1<n?1:n)-(r=n<=.5?n*(1+e):n+e-n*e),new ee(o(t+120),o(t),o(t-120))}function Ht(t,e,n){return this instanceof Ht?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Ht?new Ht(t.h,t.c,t.l):Jt(t instanceof $t?t.l:(t=le((t=P.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Ht(t,e,n)}Ft.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new jt(this.h,this.s,this.l/t)},Ft.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new jt(this.h,this.s,t*this.l)},Ft.rgb=function(){return zt(this.h,this.s,this.l)};var Bt=(P.hcl=Ht).prototype=new qt;function Ut(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new $t(n,Math.cos(t*=St)*e,Math.sin(t)*e)}function $t(t,e,n){return this instanceof $t?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof $t?new $t(t.l,t.a,t.b):t instanceof Ht?Ut(t.l,t.c,t.h):le((t=ee(t)).r,t.g,t.b):new $t(t,e,n)}Bt.brighter=function(t){return new Ht(this.h,this.c,Math.min(100,this.l+Wt*(arguments.length?t:1)))},Bt.darker=function(t){return new Ht(this.h,this.c,Math.max(0,this.l-Wt*(arguments.length?t:1)))},Bt.rgb=function(){return Ut(this.h,this.c,this.l).rgb()},P.lab=$t;var Wt=18,Vt=.95047,Yt=1,Kt=1.08883,Gt=$t.prototype=new qt;function Qt(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return new ee(te(3.2404542*(r=Xt(r)*Vt)-1.5371385*(i=Xt(i)*Yt)-.4985314*(o=Xt(o)*Kt)),te(-.969266*r+1.8760108*i+.041556*o),te(.0556434*r-.2040259*i+1.0572252*o))}function Jt(t,e,n){return 0<t?new Ht(Math.atan2(n,e)*Et,Math.sqrt(e*e+n*n),t):new Ht(NaN,NaN,t)}function Xt(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function Zt(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function te(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ee(t,e,n){return this instanceof ee?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ee?new ee(t.r,t.g,t.b):se(""+t,ee,zt):new ee(t,e,n)}function ne(t){return new ee(t>>16,t>>8&255,255&t)}function ie(t){return ne(t)+""}Gt.brighter=function(t){return new $t(Math.min(100,this.l+Wt*(arguments.length?t:1)),this.a,this.b)},Gt.darker=function(t){return new $t(Math.max(0,this.l-Wt*(arguments.length?t:1)),this.a,this.b)},Gt.rgb=function(){return Qt(this.l,this.a,this.b)};var re=(P.rgb=ee).prototype=new qt;function oe(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function se(t,e,n){var i,r,o,s=0,a=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(ce(r[0]),ce(r[1]),ce(r[2]))}return(o=he.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.substring(1),16))||(4===t.length?(s=(3840&o)>>4,s|=s>>4,a=240&o,a|=a>>4,l=15&o,l|=l<<4):7===t.length&&(s=(16711680&o)>>16,a=(65280&o)>>8,l=255&o)),e(s,a,l))}function ae(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-o,l=(s+o)/2;return a?(r=l<.5?a/(s+o):a/(2-s-o),i=t==s?(e-n)/a+(e<n?6:0):e==s?(n-t)/a+2:(t-e)/a+4,i*=60):(i=NaN,r=0<l&&l<1?0:i),new jt(i,r,l)}function le(t,e,n){var i=Zt((.4124564*(t=ue(t))+.3575761*(e=ue(e))+.1804375*(n=ue(n)))/Vt),r=Zt((.2126729*t+.7151522*e+.072175*n)/Yt);return $t(116*r-16,500*(i-r),200*(r-Zt((.0193339*t+.119192*e+.9503041*n)/Kt)))}function ue(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ce(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}re.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b;return e||n||i?(e&&e<30&&(e=30),n&&n<30&&(n=30),i&&i<30&&(i=30),new ee(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new ee(30,30,30)},re.darker=function(t){return new ee((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},re.hsl=function(){return ae(this.r,this.g,this.b)},re.toString=function(){return"#"+oe(this.r)+oe(this.g)+oe(this.b)};var he=P.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function pe(t){return"function"==typeof t?t:function(){return t}}function fe(t){return t}function de(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),me(t,e,i,n)}}function me(r,o,n,t){var s={},a=P.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;function e(){var t,e=u.status;if(!e&&u.responseText||200<=e&&e<300||304===e){try{t=n.call(s,u)}catch(t){return void a.error.call(s,t)}a.load.call(s,t)}else a.error.call(s,u)}return!I.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(r)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=e:u.onreadystatechange=function(){3<u.readyState&&e()},u.onprogress=function(t){var e=P.event;P.event=t;try{a.progress.call(s,u)}finally{P.event=e}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(o=null==t?null:t+"",s):o},s.responseType=function(t){return arguments.length?(c=t,s):c},s.response=function(t){return n=t,s},["get","post"].forEach(function(t){s[t]=function(){return s.send.apply(s,[t].concat(h(arguments)))}}),s.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),u.open(t,r,!0),null==o||"accept"in l||(l.accept=o+",*/*"),u.setRequestHeader)for(var i in l)u.setRequestHeader(i,l[i]);return null!=o&&u.overrideMimeType&&u.overrideMimeType(o),null!=c&&(u.responseType=c),null!=n&&s.on("error",n).on("load",function(t){n(null,t)}),a.beforesend.call(s,u),u.send(null==e?null:e),s},s.abort=function(){return u.abort(),s},P.rebind(s,a,"on"),null==t?s:s.get(function(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}(t))}he.forEach(function(t,e){he.set(t,ne(e))}),P.functor=pe,P.xhr=de(fe),P.dsv=function(r,o){var e=new RegExp('["'+r+"\n]"),p=r.charCodeAt(0);function s(t,e,n){arguments.length<3&&(n=e,e=null);var i=me(t,o,null==e?a:l(e),n);return i.row=function(t){return arguments.length?i.response(null==(e=t)?a:l(t)):e},i}function a(t){return s.parse(t.responseText)}function l(e){return function(t){return s.parse(t.responseText,e)}}function n(t){return t.map(u).join(r)}function u(t){return e.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return s.parse=function(t,i){var r;return s.parseRows(t,function(t,e){if(r)return r(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=i?function(t,e){return i(n(t),e)}:n})},s.parseRows=function(r,t){var e,o,s={},a={},n=[],l=r.length,u=0,i=0;function c(){if(l<=u)return a;if(o)return o=!1,s;var t=u;if(34===r.charCodeAt(t)){for(var e=t;e++<l;)if(34===r.charCodeAt(e)){if(34!==r.charCodeAt(e+1))break;++e}return u=e+2,13===(n=r.charCodeAt(e+1))?(o=!0,10===r.charCodeAt(e+2)&&++u):10===n&&(o=!0),r.substring(t+1,e).replace(/""/g,'"')}for(;u<l;){var n,i=1;if(10===(n=r.charCodeAt(u++)))o=!0;else if(13===n)o=!0,10===r.charCodeAt(u)&&(++u,++i);else if(n!==p)continue;return r.substring(t,u-i)}return r.substring(t)}for(;(e=c())!==a;){for(var h=[];e!==s&&e!==a;)h.push(e),e=c();t&&!(h=t(h,i++))||n.push(h)}return n},s.format=function(t){if(Array.isArray(t[0]))return s.formatRows(t);var n=new x,i=[];return t.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(u).join(r)].concat(t.map(function(e){return i.map(function(t){return u(e[t])}).join(r)})).join("\n")},s.formatRows=function(t){return t.map(n).join("\n")},s},P.csv=P.dsv(",","text/csv"),P.tsv=P.dsv("\t","text/tab-separated-values"),P.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=M().changedTouches),e)for(var i,r=0,o=e.length;r<o;++r)if((i=e[r]).identifier===n)return gt(t,i)};var ge,ye,ve,_e,be,we=I[T(I,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function xe(){var t=Ce(),e=Te()-t;24<e?(isFinite(e)&&(clearTimeout(_e),_e=setTimeout(xe,e)),ve=0):(ve=1,we(xe))}function Ce(){var t=Date.now();for(be=ge;be;)t>=be.t&&(be.f=be.c(t-be.t)),be=be.n;return t}function Te(){for(var t,e=ge,n=1/0;e;)e=e.f?t?t.n=e.n:ge=e.n:(e.t<n&&(n=e.t),(t=e).n);return ye=t,n}function Se(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}P.timer=function(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var r={c:t,t:n+e,f:!1,n:null};ye?ye.n=r:ge=r,ye=r,ve||(_e=clearTimeout(_e),ve=1,we(xe))},P.timer.flush=function(){Ce(),Te()},P.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ee=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*R(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}});P.formatPrefix=function(t,e){var n=0;return t&&(t<0&&(t*=-1),e&&(t=P.round(t,Se(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ee[8+n/3]};var ke=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ne=P.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=P.round(t,Se(t,e))).toFixed(Math.max(0,Math.min(20,Se(t*(1+1e-15),e))))}});function Me(t){return t+""}var De=P.time={},Ae=Date;function Oe(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Oe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Pe.setUTCDate.apply(this._,arguments)},setDay:function(){Pe.setUTCDay.apply(this._,arguments)},setFullYear:function(){Pe.setUTCFullYear.apply(this._,arguments)},setHours:function(){Pe.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Pe.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Pe.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Pe.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Pe.setUTCSeconds.apply(this._,arguments)},setTime:function(){Pe.setTime.apply(this._,arguments)}};var Pe=Date.prototype;function Ie(i,o,s){function t(t){var e=i(t),n=r(e,1);return t-e<n-t?e:n}function a(t){return o(t=i(new Ae(t-1)),1),t}function r(t,e){return o(t=new Ae(+t),e),t}function l(t,e,n){var i=a(t),r=[];if(1<n)for(;i<e;)s(i)%n||r.push(new Date(+i)),o(i,1);else for(;i<e;)r.push(new Date(+i)),o(i,1);return r}(i.floor=i).round=t,i.ceil=a,i.offset=r,i.range=l;var e=i.utc=Re(i);return(e.floor=e).round=Re(t),e.ceil=Re(a),e.offset=Re(r),e.range=function(t,e,n){try{var i=new(Ae=Oe);return i._=t,l(i,e,n)}finally{Ae=Date}},i}function Re(i){return function(t,e){try{var n=new(Ae=Oe);return n._=t,i(n,e)._}finally{Ae=Date}}}De.year=Ie(function(t){return(t=De.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),De.years=De.year.range,De.years.utc=De.year.utc.range,De.day=Ie(function(t){var e=new Ae(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),De.days=De.day.range,De.days.utc=De.day.utc.range,De.dayOfYear=function(t){var e=De.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=De[t]=Ie(function(t){return(t=De.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=De.year(t).getDay();return Math.floor((De.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});De[t+"s"]=e.range,De[t+"s"].utc=e.utc.range,De[t+"OfYear"]=function(t){var e=De.year(t).getDay();return Math.floor((De.dayOfYear(t)+(e+n)%7)/7)}}),De.week=De.sunday,De.weeks=De.sunday.range,De.weeks.utc=De.sunday.utc.range,De.weekOfYear=De.sundayOfYear;var Le={"-":"",_:" ",0:"0"},qe=/^\s*\d+/,je=/^%/;function Fe(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function ze(t){return new RegExp("^(?:"+t.map(P.requote).join("|")+")","i")}function He(t){for(var e=new _,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Be(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ue(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n));return i?(t.U=+i[0],n+i[0].length):-1}function $e(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n));return i?(t.W=+i[0],n+i[0].length):-1}function We(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Ve(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.y=function(t){return t+(68<t?1900:2e3)}(+i[0]),n+i[0].length):-1}function Ye(t,e,n){return/^[+-]\d{4}$/.test(e=e.substring(n,n+5))?(t.Z=-e,n+5):-1}function Ke(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Ge(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Qe(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function Je(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Xe(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Ze(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function tn(t,e,n){qe.lastIndex=0;var i=qe.exec(e.substring(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function en(t){var e=t.getTimezoneOffset(),n=0<e?"-":"+",i=~~(R(e)/60),r=R(e)%60;return n+Fe(i,"0",2)+Fe(r,"0",2)}function nn(t,e,n){je.lastIndex=0;var i=je.exec(e.substring(n,n+1));return i?n+i[0].length:-1}function rn(i){for(var t=i.length,e=-1;++e<t;)i[e][0]=this(i[e][0]);return function(t){for(var e=0,n=i[e];!n[1](t);)n=i[++e];return n[0](t)}}P.locale=function(t){return{numberFormat:function(t){var x=t.decimal,o=t.thousands,s=t.grouping,i=t.currency,C=s?function(t){for(var e=t.length,n=[],i=0,r=s[0];0<e&&0<r;)n.push(t.substring(e-=r,e+r)),r=s[i=(i+1)%s.length];return n.reverse().join(o)}:fe;return function(t){var e=ke.exec(t),u=e[1]||" ",c=e[2]||">",h=e[3]||"",n=e[4]||"",p=e[5],f=+e[6],d=e[7],m=e[8],g=e[9],y=1,v="",_="",b=!1;switch(m&&(m=+m.substring(1)),(p||"0"===u&&"="===c)&&(p=u="0",c="=",d&&(f-=Math.floor((f-1)/4))),g){case"n":d=!0,g="g";break;case"%":y=100,_="%",g="f";break;case"p":y=100,_="%",g="r";break;case"b":case"o":case"x":case"X":"#"===n&&(v="0"+g.toLowerCase());case"c":case"d":b=!0,m=0;break;case"s":y=-1,g="r"}"$"===n&&(v=i[0],_=i[1]),"r"!=g||m||(g="g"),null!=m&&("g"==g?m=Math.max(1,Math.min(21,m)):"e"!=g&&"f"!=g||(m=Math.max(0,Math.min(20,m)))),g=Ne.get(g)||Me;var w=p&&d;return function(t){var e=_;if(b&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):h;if(y<0){var i=P.formatPrefix(t,m);t=i.scale(t),e=i.symbol+_}else t*=y;var r=(t=g(t,m)).lastIndexOf("."),o=r<0?t:t.substring(0,r),s=r<0?"":x+t.substring(r+1);!p&&d&&(o=C(o));var a=v.length+o.length+s.length+(w?0:n.length),l=a<f?new Array(a=f-a+1).join(u):"";return w&&(o=C(l+o)),n+=v,t=o+s,("<"===c?n+t+l:">"===c?l+n+t:"^"===c?l.substring(0,a>>=1)+n+t+l.substring(a):n+(w?t:l+t))+e}}}(t),timeFormat:function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths;function u(a){var l=a.length;function t(t){for(var e,n,i,r=[],o=-1,s=0;++o<l;)37===a.charCodeAt(o)&&(r.push(a.substring(s,o)),null!=(n=Le[e=a.charAt(++o)])&&(e=a.charAt(++o)),(i=b[e])&&(e=i(t,null==n?"e"===e?" ":"0":n)),r.push(e),s=o+1);return r.push(a.substring(s,o)),r.join("")}return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(e,a,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var n=null!=e.Z&&Ae!==Oe,i=new(n?Oe:Ae);return"j"in e?i.setFullYear(e.y,0,e.j):"w"in e&&("W"in e||"U"in e)?(i.setFullYear(e.y,0,1),i.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(i.getDay()+5)%7:e.w+7*e.U-(i.getDay()+6)%7)):i.setFullYear(e.y,e.m,e.d),i.setHours(e.H+Math.floor(e.Z/100),e.M+e.Z%100,e.S,e.L),n?i._:i},t.toString=function(){return a},t}function c(t,e,n,i){for(var r,o,s,a=0,l=e.length,u=n.length;a<l;){if(u<=i)return-1;if(37===(r=e.charCodeAt(a++))){if(s=e.charAt(a++),!(o=w[s in Le?e.charAt(a++):s])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}u.multi=(u.utc=function(t){var n=u(t);function e(t){try{var e=new(Ae=Oe);return e._=t,n(e)}finally{Ae=Date}}return e.parse=function(t){try{Ae=Oe;var e=n.parse(t);return e&&e._}finally{Ae=Date}},e.toString=n.toString,e}).multi=rn;var h=P.map(),p=ze(o),f=He(o),d=ze(s),m=He(s),g=ze(a),y=He(a),v=ze(l),_=He(l);r.forEach(function(t,e){h.set(t.toLowerCase(),e)});var b={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:u(e),d:function(t,e){return Fe(t.getDate(),e,2)},e:function(t,e){return Fe(t.getDate(),e,2)},H:function(t,e){return Fe(t.getHours(),e,2)},I:function(t,e){return Fe(t.getHours()%12||12,e,2)},j:function(t,e){return Fe(1+De.dayOfYear(t),e,3)},L:function(t,e){return Fe(t.getMilliseconds(),e,3)},m:function(t,e){return Fe(t.getMonth()+1,e,2)},M:function(t,e){return Fe(t.getMinutes(),e,2)},p:function(t){return r[+(12<=t.getHours())]},S:function(t,e){return Fe(t.getSeconds(),e,2)},U:function(t,e){return Fe(De.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Fe(De.mondayOfYear(t),e,2)},x:u(n),X:u(i),y:function(t,e){return Fe(t.getFullYear()%100,e,2)},Y:function(t,e){return Fe(t.getFullYear()%1e4,e,4)},Z:en,"%":function(){return"%"}},w={a:function(t,e,n){d.lastIndex=0;var i=d.exec(e.substring(n));return i?(t.w=m.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){p.lastIndex=0;var i=p.exec(e.substring(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){v.lastIndex=0;var i=v.exec(e.substring(n));return i?(t.m=_.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){g.lastIndex=0;var i=g.exec(e.substring(n));return i?(t.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,n){return c(t,b.c.toString(),e,n)},d:Ge,e:Ge,H:Je,I:Je,j:Qe,L:tn,m:Ke,M:Xe,p:function(t,e,n){var i=h.get(e.substring(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:Ze,U:Ue,w:Be,W:$e,x:function(t,e,n){return c(t,b.x.toString(),e,n)},X:function(t,e,n){return c(t,b.X.toString(),e,n)},y:Ve,Y:We,Z:Ye,"%":nn};return u}(t)}};var on=P.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sn(){}P.format=on.numberFormat,P.geo={},sn.prototype={s:0,t:0,add:function(t){ln(t,this.t,an),ln(an.s,this.s,this),this.s?this.t+=an.t:this.s=an.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var an=new sn;function ln(t,e,n){var i=n.s=t+e,r=i-t,o=i-r;n.t=t-o+(e-r)}function un(t,e){t&&hn.hasOwnProperty(t.type)&&hn[t.type](t,e)}P.geo.stream=function(t,e){t&&cn.hasOwnProperty(t.type)?cn[t.type](t,e):un(t,e)};var cn={Feature:function(t,e){un(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)un(n[i].geometry,e)}},hn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){pn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)pn(n[i],e,0)},Polygon:function(t,e){fn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)fn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)un(n[i],e)}};function pn(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function fn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)pn(t[n],e,1);e.polygonEnd()}P.geo.area=function(t){return dn=0,P.geo.stream(t,Fn),dn};var dn,mn,gn,yn,vn,_n,bn,wn,xn,Cn,Tn,Sn,En,kn,Nn,Mn,Dn,An,On,Pn,In,Rn,Ln,qn,jn=new sn,Fn={sphere:function(){dn+=4*bt},point:E,lineStart:E,lineEnd:E,polygonStart:function(){jn.reset(),Fn.lineStart=zn},polygonEnd:function(){var t=2*jn;dn+=t<0?4*bt+t:t,Fn.lineStart=Fn.lineEnd=Fn.point=E}};function zn(){var n,i,c,h,p;function r(t,e){e=e*St/2+bt/4;var n=(t*=St)-c,i=0<=n?1:-1,r=i*n,o=Math.cos(e),s=Math.sin(e),a=p*s,l=h*o+a*Math.cos(r),u=a*i*Math.sin(r);jn.add(Math.atan2(u,l)),c=t,h=o,p=s}Fn.point=function(t,e){Fn.point=r,c=(n=t)*St,h=Math.cos(e=(i=e)*St/2+bt/4),p=Math.sin(e)},Fn.lineEnd=function(){r(n,i)}}function Hn(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Bn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Un(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function $n(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Wn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Vn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Yn(t){return[Math.atan2(t[1],t[0]),Dt(t[2])]}function Kn(t,e){return R(t[0]-e[0])<Ct&&R(t[1]-e[1])<Ct}function Gn(t,e){Tn.push(Sn=[mn=t,yn=t]),e<gn&&(gn=e),vn<e&&(vn=e)}function Qn(t,e){var n=Hn([t*St,e*St]);if(xn){var i=Un(xn,n),r=Un([i[1],-i[0],0],i);Vn(r),r=Yn(r);var o=t-_n,s=0<o?1:-1,a=r[0]*Et*s,l=180<R(o);if(l^(s*_n<a&&a<s*t)){var u=r[1]*Et;vn<u&&(vn=u)}else if(l^(s*_n<(a=(a+360)%360-180)&&a<s*t)){(u=-r[1]*Et)<gn&&(gn=u)}else e<gn&&(gn=e),vn<e&&(vn=e);l?t<_n?ni(mn,t)>ni(mn,yn)&&(yn=t):ni(t,yn)>ni(mn,yn)&&(mn=t):mn<=yn?(t<mn&&(mn=t),yn<t&&(yn=t)):_n<t?ni(mn,t)>ni(mn,yn)&&(yn=t):ni(t,yn)>ni(mn,yn)&&(mn=t)}else Gn(t,e);xn=n,_n=t}function Jn(){En.point=Qn}function Xn(){Sn[0]=mn,Sn[1]=yn,En.point=Gn,xn=null}function Zn(t,e){if(xn){var n=t-_n;Cn+=180<R(n)?n+(0<n?360:-360):n}else bn=t,wn=e;Fn.point(t,e),Qn(t,e)}function ti(){Fn.lineStart()}function ei(){Zn(bn,wn),Fn.lineEnd(),R(Cn)>Ct&&(mn=-(yn=180)),Sn[0]=mn,Sn[1]=yn,xn=null}function ni(t,e){return(e-=t)<0?e+360:e}function ii(t,e){return t[0]-e[0]}function ri(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}P.geo.bounds=(En={point:Gn,lineStart:Jn,lineEnd:Xn,polygonStart:function(){En.point=Zn,En.lineStart=ti,En.lineEnd=ei,Cn=0,Fn.polygonStart()},polygonEnd:function(){Fn.polygonEnd(),En.point=Gn,En.lineStart=Jn,En.lineEnd=Xn,jn<0?(mn=-(yn=180),gn=-(vn=90)):Ct<Cn?vn=90:Cn<-Ct&&(gn=-90),Sn[0]=mn,Sn[1]=yn}},function(t){if(vn=yn=-(mn=gn=1/0),Tn=[],P.geo.stream(t,En),r=Tn.length){Tn.sort(ii);for(var e=1,n=[a=Tn[0]];e<r;++e)ri((o=Tn[e])[0],a)||ri(o[1],a)?(ni(a[0],o[1])>ni(a[0],a[1])&&(a[1]=o[1]),ni(o[0],a[1])>ni(a[0],a[1])&&(a[0]=o[0])):n.push(a=o);for(var i,r,o,s=-1/0,a=(e=0,n[r=n.length-1]);e<=r;a=o,++e)o=n[e],(i=ni(a[1],o[0]))>s&&(s=i,mn=o[0],yn=a[1])}return Tn=Sn=null,mn===1/0||gn===1/0?[[NaN,NaN],[NaN,NaN]]:[[mn,gn],[yn,vn]]}),P.geo.centroid=function(t){kn=Nn=Mn=Dn=An=On=Pn=In=Rn=Ln=qn=0,P.geo.stream(t,oi);var e=Rn,n=Ln,i=qn,r=e*e+n*n+i*i;return r<Tt&&(e=On,n=Pn,i=In,Nn<Ct&&(e=Mn,n=Dn,i=An),(r=e*e+n*n+i*i)<Tt)?[NaN,NaN]:[Math.atan2(n,e)*Et,Dt(i/Math.sqrt(r))*Et]};var oi={sphere:E,point:si,lineStart:li,lineEnd:ui,polygonStart:function(){oi.lineStart=ci},polygonEnd:function(){oi.lineStart=li}};function si(t,e){t*=St;var n=Math.cos(e*=St);ai(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ai(t,e,n){Mn+=(t-Mn)/++kn,Dn+=(e-Dn)/kn,An+=(n-An)/kn}function li(){var a,l,u;function i(t,e){t*=St;var n=Math.cos(e*=St),i=n*Math.cos(t),r=n*Math.sin(t),o=Math.sin(e),s=Math.atan2(Math.sqrt((s=l*o-u*r)*s+(s=u*i-a*o)*s+(s=a*r-l*i)*s),a*i+l*r+u*o);Nn+=s,On+=s*(a+(a=i)),Pn+=s*(l+(l=r)),In+=s*(u+(u=o)),ai(a,l,u)}oi.point=function(t,e){t*=St;var n=Math.cos(e*=St);a=n*Math.cos(t),l=n*Math.sin(t),u=Math.sin(e),oi.point=i,ai(a,l,u)}}function ui(){oi.point=si}function ci(){var i,r,f,d,m;function o(t,e){t*=St;var n=Math.cos(e*=St),i=n*Math.cos(t),r=n*Math.sin(t),o=Math.sin(e),s=d*o-m*r,a=m*i-f*o,l=f*r-d*i,u=Math.sqrt(s*s+a*a+l*l),c=f*i+d*r+m*o,h=u&&-Mt(c)/u,p=Math.atan2(u,c);Rn+=h*s,Ln+=h*a,qn+=h*l,Nn+=p,On+=p*(f+(f=i)),Pn+=p*(d+(d=r)),In+=p*(m+(m=o)),ai(f,d,m)}oi.point=function(t,e){i=t,r=e,oi.point=o,t*=St;var n=Math.cos(e*=St);f=n*Math.cos(t),d=n*Math.sin(t),m=Math.sin(e),ai(f,d,m)},oi.lineEnd=function(){o(i,r),oi.lineEnd=ui,oi.point=si}}function hi(){return!0}function pi(t,e,n,i,a){var l=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(Kn(n,i)){a.lineStart();for(var r=0;r<e;++r)a.point((n=t[r])[0],n[1]);a.lineEnd()}else{var o=new di(n,t,null,!0),s=new di(n,null,o,!1);o.o=s,l.push(o),u.push(s),s=new di(i,null,o=new di(i,t,null,!1),!0),o.o=s,l.push(o),u.push(s)}}}),u.sort(e),fi(l),fi(u),l.length){for(var r=0,o=n,s=u.length;r<s;++r)u[r].e=o=!o;for(var c,h,p=l[0];;){for(var f=p,d=!0;f.v;)if((f=f.n)===p)return;c=f.z,a.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(r=0,s=c.length;r<s;++r)a.point((h=c[r])[0],h[1]);else i(f.x,f.n.x,1,a);f=f.n}else{if(d)for(r=(c=f.p.z).length-1;0<=r;--r)a.point((h=c[r])[0],h[1]);else i(f.x,f.p.x,-1,a);f=f.p}c=(f=f.o).z,d=!d}while(!f.v);a.lineEnd()}}}function fi(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function di(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function mi(v,_,b,w){return function(i,s){var a,r=_(s),e=i.invert(w[0],w[1]),n={point:o,lineStart:l,lineEnd:u,polygonStart:function(){n.point=m,n.lineStart=g,n.lineEnd=y,a=[],c=[]},polygonEnd:function(){n.point=o,n.lineStart=l,n.lineEnd=u,a=P.merge(a);var t=function(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],o=0,s=0;jn.reset();for(var a=0,l=e.length;a<l;++a){var u=e[a],c=u.length;if(c)for(var h=u[0],p=h[0],f=h[1]/2+bt/4,d=Math.sin(f),m=Math.cos(f),g=1;;){g===c&&(g=0);var y=(t=u[g])[0],v=t[1]/2+bt/4,_=Math.sin(v),b=Math.cos(v),w=y-p,x=0<=w?1:-1,C=x*w,T=bt<C,S=d*_;if(jn.add(Math.atan2(S*x*Math.sin(C),m*b+S*Math.cos(C))),o+=T?w+x*wt:w,T^n<=p^n<=y){var E=Un(Hn(h),Hn(t));Vn(E);var k=Un(r,E);Vn(k);var N=(T^0<=w?-1:1)*Dt(k[2]);(N<i||i===N&&(E[0]||E[1]))&&(s+=T^0<=w?1:-1)}if(!g++)break;p=y,d=_,m=b,h=t}}return(o<-Ct||o<Ct&&jn<0)^1&s}(e,c);a.length?(d||(s.polygonStart(),d=!0),pi(a,vi,t,b,s)):t&&(d||(s.polygonStart(),d=!0),s.lineStart(),b(null,null,1,s),s.lineEnd()),d&&(s.polygonEnd(),d=!1),a=c=null},sphere:function(){s.polygonStart(),s.lineStart(),b(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function o(t,e){var n=i(t,e);v(t=n[0],e=n[1])&&s.point(t,e)}function t(t,e){var n=i(t,e);r.point(n[0],n[1])}function l(){n.point=t,r.lineStart()}function u(){n.point=o,r.lineEnd()}var c,h,p=yi(),f=_(p),d=!1;function m(t,e){h.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function g(){f.lineStart(),h=[]}function y(){m(h[0][0],h[0][1]),f.lineEnd();var t,e=f.clean(),n=p.buffer(),i=n.length;if(h.pop(),c.push(h),h=null,i)if(1&e){var r,o=-1;if(0<(i=(t=n[0]).length-1)){for(d||(s.polygonStart(),d=!0),s.lineStart();++o<i;)s.point((r=t[o])[0],r[1]);s.lineEnd()}}else 1<i&&2&e&&n.push(n.pop().concat(n.shift())),a.push(n.filter(gi))}return n}}function gi(t){return 1<t.length}function yi(){var n,e=[];return{lineStart:function(){e.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:E,buffer:function(){var t=e;return e=[],n=null,t},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function vi(t,e){return((t=t.x)[0]<0?t[1]-xt-Ct:xt-t[1])-((e=e.x)[0]<0?e[1]-xt-Ct:xt-e[1])}var _i=mi(hi,function(r){var o,s=NaN,a=NaN,l=NaN;return{lineStart:function(){r.lineStart(),o=1},point:function(t,e){var n=0<t?bt:-bt,i=R(t-s);R(i-bt)<Ct?(r.point(s,a=0<(a+e)/2?xt:-xt),r.point(l,a),r.lineEnd(),r.lineStart(),r.point(n,a),r.point(t,a),o=0):l!==n&&bt<=i&&(R(s-l)<Ct&&(s-=l*Ct),R(t-n)<Ct&&(t-=n*Ct),a=function(t,e,n,i){var r,o,s=Math.sin(t-n);return R(s)>Ct?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*o*s)):(e+i)/2}(s,a,t,e),r.point(l,a),r.lineEnd(),r.lineStart(),r.point(n,a),o=0),r.point(s=t,a=e),l=n},lineEnd:function(){r.lineEnd(),s=a=NaN},clean:function(){return 2-o}}},function(t,e,n,i){var r;if(null==t)r=n*xt,i.point(-bt,r),i.point(0,r),i.point(bt,r),i.point(bt,0),i.point(bt,-r),i.point(0,-r),i.point(-bt,-r),i.point(-bt,0),i.point(-bt,r);else if(R(t[0]-e[0])>Ct){var o=t[0]<e[0]?bt:-bt;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])},[-bt,-bt/2]);function bi(c,h,p,f){return function(t){var e,n=t.a,i=t.b,r=n.x,o=n.y,s=0,a=1,l=i.x-r,u=i.y-o;if(e=c-r,l||!(0<e)){if(e/=l,l<0){if(e<s)return;e<a&&(a=e)}else if(0<l){if(a<e)return;s<e&&(s=e)}if(e=p-r,l||!(e<0)){if(e/=l,l<0){if(a<e)return;s<e&&(s=e)}else if(0<l){if(e<s)return;e<a&&(a=e)}if(e=h-o,u||!(0<e)){if(e/=u,u<0){if(e<s)return;e<a&&(a=e)}else if(0<u){if(a<e)return;s<e&&(s=e)}if(e=f-o,u||!(e<0)){if(e/=u,u<0){if(a<e)return;s<e&&(s=e)}else if(0<u){if(e<s)return;e<a&&(a=e)}return 0<s&&(t.a={x:r+s*l,y:o+s*u}),a<1&&(t.b={x:r+a*l,y:o+a*u}),t}}}}}}var wi=1e9;function xi(b,w,x,C){return function(r){var i,c,o,s,a,l,u,h,p,f,d,m=r,t=yi(),g=bi(b,w,x,C),e={point:n,lineStart:function(){e.point=_,c&&c.push(o=[]);f=!0,p=!1,u=h=NaN},lineEnd:function(){i&&(_(s,a),l&&p&&t.rejoin(),i.push(t.buffer()));e.point=n,p&&r.lineEnd()},polygonStart:function(){r=t,i=[],c=[],d=!0},polygonEnd:function(){r=m,i=P.merge(i);var t=function(t){for(var e=0,n=c.length,i=t[1],r=0;r<n;++r)for(var o,s=1,a=c[r],l=a.length,u=a[0];s<l;++s)o=a[s],u[1]<=i?o[1]>i&&0<Nt(u,o,t)&&++e:o[1]<=i&&Nt(u,o,t)<0&&--e,u=o;return 0!==e}([b,C]),e=d&&t,n=i.length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),y(null,null,1,r),r.lineEnd()),n&&pi(i,S,t,y,r),r.polygonEnd()),i=c=o=null}};function y(t,e,n,i){var r=0,o=0;if(null==t||(r=T(t,n))!==(o=T(e,n))||E(t,e)<0^0<n)for(;i.point(0===r||3===r?b:x,1<r?C:w),(r=(r+n+4)%4)!==o;);else i.point(e[0],e[1])}function v(t,e){return b<=t&&t<=x&&w<=e&&e<=C}function n(t,e){v(t,e)&&r.point(t,e)}function _(t,e){var n=v(t=Math.max(-wi,Math.min(wi,t)),e=Math.max(-wi,Math.min(wi,e)));if(c&&o.push([t,e]),f)s=t,a=e,f=!1,(l=n)&&(r.lineStart(),r.point(t,e));else if(n&&p)r.point(t,e);else{var i={a:{x:u,y:h},b:{x:t,y:e}};g(i)?(p||(r.lineStart(),r.point(i.a.x,i.a.y)),r.point(i.b.x,i.b.y),n||r.lineEnd(),d=!1):n&&(r.lineStart(),r.point(t,e),d=!1)}u=t,h=e,p=n}return e};function T(t,e){return R(t[0]-b)<Ct?0<e?0:3:R(t[0]-x)<Ct?0<e?2:1:R(t[1]-w)<Ct?0<e?1:0:0<e?3:2}function S(t,e){return E(t.x,e.x)}function E(t,e){var n=T(t,1),i=T(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function Ci(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function Ti(t){var e=0,n=bt/3,i=Ki(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*bt/180,n=t[1]*bt/180):[e/bt*180,n/bt*180]},r}function Si(t,e){var n=Math.sin(t),i=(n+Math.sin(e))/2,r=1+n*(2*i-n),o=Math.sqrt(r)/i;function s(t,e){var n=Math.sqrt(r-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),o-n*Math.cos(t)]}return s.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,Dt((r-(t*t+n*n)*i*i)/(2*i))]},s}P.geo.clipExtent=function(){var e,n,i,r,o,s,a={stream:function(t){return o&&(o.valid=!1),(o=s(t)).valid=!0,o},extent:function(t){return arguments.length?(s=xi(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),o&&(o.valid=!1,o=null),a):[[e,n],[i,r]]}};return a.extent([[0,0],[960,500]])},(P.geo.conicEqualArea=function(){return Ti(Si)}).raw=Si,P.geo.albers=function(){return P.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},P.geo.albersUsa=function(){var i,r,o,s,a=P.geo.albers(),l=P.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=P.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){i=[t,e]}};function h(t){var e=t[0],n=t[1];return i=null,r(e,n),i||(o(e,n),i)||s(e,n),i}return h.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(.12<=r&&r<.234&&-.425<=i&&i<-.214?l:.166<=r&&r<.234&&-.214<=i&&i<-.115?u:a).invert(t)},h.stream=function(t){var n=a.stream(t),i=l.stream(t),r=u.stream(t);return{point:function(t,e){n.point(t,e),i.point(t,e),r.point(t,e)},sphere:function(){n.sphere(),i.sphere(),r.sphere()},lineStart:function(){n.lineStart(),i.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),i.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),i.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),i.polygonEnd(),r.polygonEnd()}}},h.precision=function(t){return arguments.length?(a.precision(t),l.precision(t),u.precision(t),h):a.precision()},h.scale=function(t){return arguments.length?(a.scale(t),l.scale(.35*t),u.scale(t),h.translate(a.translate())):a.scale()},h.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),n=+t[0],i=+t[1];return r=a.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(c).point,o=l.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+Ct,i+.12*e+Ct],[n-.214*e-Ct,i+.234*e-Ct]]).stream(c).point,s=u.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+Ct,i+.166*e+Ct],[n-.115*e-Ct,i+.234*e-Ct]]).stream(c).point,h},h.scale(1070)};var Ei,ki,Ni,Mi,Di,Ai,Oi={point:E,lineStart:E,lineEnd:E,polygonStart:function(){ki=0,Oi.lineStart=Pi},polygonEnd:function(){Oi.lineStart=Oi.lineEnd=Oi.point=E,Ei+=R(ki/2)}};function Pi(){var n,i,r,o;function s(t,e){ki+=o*t-r*e,r=t,o=e}Oi.point=function(t,e){Oi.point=s,n=r=t,i=o=e},Oi.lineEnd=function(){s(n,i)}}var Ii={point:function(t,e){t<Ni&&(Ni=t);Di<t&&(Di=t);e<Mi&&(Mi=e);Ai<e&&(Ai=e)},lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E};function Ri(){var n=Li(4.5),i=[],r={point:t,lineStart:function(){r.point=e},lineEnd:s,polygonStart:function(){r.lineEnd=a},polygonEnd:function(){r.lineEnd=s,r.point=t},pointRadius:function(t){return n=Li(t),r},result:function(){if(i.length){var t=i.join("");return i=[],t}}};function t(t,e){i.push("M",t,",",e,n)}function e(t,e){i.push("M",t,",",e),r.point=o}function o(t,e){i.push("L",t,",",e)}function s(){r.point=t}function a(){i.push("Z")}return r}function Li(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var qi,ji={point:Fi,lineStart:zi,lineEnd:Hi,polygonStart:function(){ji.lineStart=Bi},polygonEnd:function(){ji.point=Fi,ji.lineStart=zi,ji.lineEnd=Hi}};function Fi(t,e){Mn+=t,Dn+=e,++An}function zi(){var o,s;function n(t,e){var n=t-o,i=e-s,r=Math.sqrt(n*n+i*i);On+=r*(o+t)/2,Pn+=r*(s+e)/2,In+=r,Fi(o=t,s=e)}ji.point=function(t,e){ji.point=n,Fi(o=t,s=e)}}function Hi(){ji.point=Fi}function Bi(){var n,i,o,s;function r(t,e){var n=t-o,i=e-s,r=Math.sqrt(n*n+i*i);On+=r*(o+t)/2,Pn+=r*(s+e)/2,In+=r,Rn+=(r=s*t-o*e)*(o+t),Ln+=r*(s+e),qn+=3*r,Fi(o=t,s=e)}ji.point=function(t,e){ji.point=r,Fi(n=o=t,i=s=e)},ji.lineEnd=function(){r(n,i)}}function Ui(n){var i=4.5,r={point:t,lineStart:function(){r.point=e},lineEnd:s,polygonStart:function(){r.lineEnd=a},polygonEnd:function(){r.lineEnd=s,r.point=t},pointRadius:function(t){return i=t,r},result:E};function t(t,e){n.moveTo(t,e),n.arc(t,e,i,0,wt)}function e(t,e){n.moveTo(t,e),r.point=o}function o(t,e){n.lineTo(t,e)}function s(){r.point=t}function a(){n.closePath()}return r}function $i(M){var D=.5,A=Math.cos(30*St),w=16;function e(t){return(w?function(r){var n,i,o,s,a,l,u,c,h,p,f,d,m={point:t,lineStart:e,lineEnd:y,polygonStart:function(){r.polygonStart(),m.lineStart=v},polygonEnd:function(){r.polygonEnd(),m.lineStart=e}};function t(t,e){t=M(t,e),r.point(t[0],t[1])}function e(){c=NaN,m.point=g,r.lineStart()}function g(t,e){var n=Hn([t,e]),i=M(t,e);O(c,h,u,p,f,d,c=i[0],h=i[1],u=t,p=n[0],f=n[1],d=n[2],w,r),r.point(c,h)}function y(){m.point=t,r.lineEnd()}function v(){e(),m.point=_,m.lineEnd=b}function _(t,e){g(n=t,e),i=c,o=h,s=p,a=f,l=d,m.point=g}function b(){O(c,h,u,p,f,d,i,o,n,s,a,l,w,r),(m.lineEnd=y)()}return m}:function(n){return Vi(n,function(t,e){t=M(t,e),n.point(t[0],t[1])})})(t)}function O(t,e,n,i,r,o,s,a,l,u,c,h,p,f){var d=s-t,m=a-e,g=d*d+m*m;if(4*D<g&&p--){var y=i+u,v=r+c,_=o+h,b=Math.sqrt(y*y+v*v+_*_),w=Math.asin(_/=b),x=R(R(_)-1)<Ct||R(n-l)<Ct?(n+l)/2:Math.atan2(v,y),C=M(x,w),T=C[0],S=C[1],E=T-t,k=S-e,N=m*E-d*k;(D<N*N/g||.3<R((d*E+m*k)/g-.5)||i*u+r*c+o*h<A)&&(O(t,e,n,i,r,o,T,S,x,y/=b,v/=b,_,p,f),f.point(T,S),O(T,S,x,y,v,_,s,a,l,u,c,h,p,f))}}return e.precision=function(t){return arguments.length?(w=0<(D=t*t)&&16,e):Math.sqrt(D)},e}function Wi(t){this.stream=t}function Vi(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Yi(t){return Ki(function(){return t})()}function Ki(t){var n,e,i,r,o,s,a=$i(function(t,e){return[(t=n(t,e))[0]*l+r,o-t[1]*l]}),l=150,u=480,c=250,h=0,p=0,f=0,d=0,m=0,g=_i,y=fe,v=null,_=null;function b(t){return[(t=i(t[0]*St,t[1]*St))[0]*l+r,o-t[1]*l]}function w(t){return(t=i.invert((t[0]-r)/l,(o-t[1])/l))&&[t[0]*Et,t[1]*Et]}function x(){i=Ci(e=Xi(f,d,m),n);var t=n(h,p);return r=u-t[0]*l,o=c+t[1]*l,C()}function C(){return s&&(s.valid=!1,s=null),b}return b.stream=function(t){return s&&(s.valid=!1),(s=Gi(g(e,a(y(t))))).valid=!0,s},b.clipAngle=function(t){return arguments.length?(g=null==t?(v=t,_i):function(r){var E=Math.cos(r),f=0<E,d=R(E)>Ct;return mi(m,function(a){var l,u,c,h,p;return{lineStart:function(){h=c=!1,p=1},point:function(t,e){var n,i=[t,e],r=m(t,e),o=f?r?0:y(t,e):r?y(t+(t<0?bt:-bt),e):0;if(!l&&(h=c=r)&&a.lineStart(),r!==c&&(n=g(l,i),(Kn(l,n)||Kn(i,n))&&(i[0]+=Ct,i[1]+=Ct,r=m(i[0],i[1]))),r!==c)p=0,r?(a.lineStart(),n=g(i,l),a.point(n[0],n[1])):(n=g(l,i),a.point(n[0],n[1]),a.lineEnd()),l=n;else if(d&&l&&f^r){var s;o&u||!(s=g(i,l,!0))||(p=0,f?(a.lineStart(),a.point(s[0][0],s[0][1]),a.point(s[1][0],s[1][1]),a.lineEnd()):(a.point(s[1][0],s[1][1]),a.lineEnd(),a.lineStart(),a.point(s[0][0],s[0][1])))}!r||l&&Kn(l,i)||a.point(i[0],i[1]),l=i,c=r,u=o},lineEnd:function(){c&&a.lineEnd(),l=null},clean:function(){return p|(h&&c)<<1}}},nr(r,6*St),f?[0,-r]:[-bt,r-bt]);function m(t,e){return Math.cos(t)*Math.cos(e)>E}function g(t,e,n){var i=[1,0,0],r=Un(Hn(t),Hn(e)),o=Bn(r,r),s=r[0],a=o-s*s;if(!a)return!n&&t;var l=E*o/a,u=-E*s/a,c=Un(i,r),h=Wn(i,l);$n(h,Wn(r,u));var p=c,f=Bn(h,p),d=Bn(p,p),m=f*f-d*(Bn(h,h)-1);if(!(m<0)){var g=Math.sqrt(m),y=Wn(p,(-f-g)/d);if($n(y,h),y=Yn(y),!n)return y;var v,_=t[0],b=e[0],w=t[1],x=e[1];b<_&&(v=_,_=b,b=v);var C=b-_,T=R(C-bt)<Ct;if(!T&&x<w&&(v=w,w=x,x=v),T||C<Ct?T?0<w+x^y[1]<(R(y[0]-_)<Ct?w:x):w<=y[1]&&y[1]<=x:bt<C^(_<=y[0]&&y[0]<=b)){var S=Wn(p,(-f+g)/d);return $n(S,h),[y,Yn(S)]}}}function y(t,e){var n=f?r:bt-r,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}}((v=+t)*St),C()):v},b.clipExtent=function(t){return arguments.length?(y=(_=t)?xi(t[0][0],t[0][1],t[1][0],t[1][1]):fe,C()):_},b.scale=function(t){return arguments.length?(l=+t,x()):l},b.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],x()):[u,c]},b.center=function(t){return arguments.length?(h=t[0]%360*St,p=t[1]%360*St,x()):[h*Et,p*Et]},b.rotate=function(t){return arguments.length?(f=t[0]%360*St,d=t[1]%360*St,m=2<t.length?t[2]%360*St:0,x()):[f*Et,d*Et,m*Et]},P.rebind(b,a,"precision"),function(){return n=t.apply(this,arguments),b.invert=n.invert&&w,x()}}function Gi(n){return Vi(n,function(t,e){n.point(t*St,e*St)})}function Qi(t,e){return[t,e]}function Ji(t,e){return[bt<t?t-wt:t<-bt?t+wt:t,e]}function Xi(t,e,n){return t?e||n?Ci(tr(t),er(e,n)):tr(t):e||n?er(e,n):Ji}function Zi(n){return function(t,e){return[bt<(t+=n)?t-wt:t<-bt?t+wt:t,e]}}function tr(t){var e=Zi(t);return e.invert=Zi(-t),e}function er(t,e){var a=Math.cos(t),l=Math.sin(t),u=Math.cos(e),c=Math.sin(e);function n(t,e){var n=Math.cos(e),i=Math.cos(t)*n,r=Math.sin(t)*n,o=Math.sin(e),s=o*a+i*l;return[Math.atan2(r*u-s*c,i*a-o*l),Dt(s*u+r*c)]}return n.invert=function(t,e){var n=Math.cos(e),i=Math.cos(t)*n,r=Math.sin(t)*n,o=Math.sin(e),s=o*u-r*c;return[Math.atan2(r*u+o*c,i*a+s*l),Dt(s*a-i*l)]},n}function nr(a,l){var u=Math.cos(a),c=Math.sin(a);return function(t,e,n,i){var r=n*l;null!=t?(t=ir(u,t),e=ir(u,e),(0<n?t<e:e<t)&&(t+=n*wt)):(t=a+n*wt,e=a-.5*r);for(var o,s=t;0<n?e<s:s<e;s-=r)i.point((o=Yn([u,-c*Math.cos(s),-c*Math.sin(s)]))[0],o[1])}}function ir(t,e){var n=Hn(e);n[0]-=t,Vn(n);var i=Mt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Ct)%(2*Math.PI)}function rr(t,e,n){var i=P.range(t,e-Ct,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function or(t,e,n){var i=P.range(t,e-Ct,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function sr(t){return t.source}function ar(t){return t.target}P.geo.path=function(){var e,n,i,r,o,s=4.5;function a(t){return t&&("function"==typeof s&&r.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=i(r)),P.geo.stream(t,o)),r.result()}function l(){return o=null,a}return a.area=function(t){return Ei=0,P.geo.stream(t,i(Oi)),Ei},a.centroid=function(t){return Mn=Dn=An=On=Pn=In=Rn=Ln=qn=0,P.geo.stream(t,i(ji)),qn?[Rn/qn,Ln/qn]:In?[On/In,Pn/In]:An?[Mn/An,Dn/An]:[NaN,NaN]},a.bounds=function(t){return Di=Ai=-(Ni=Mi=1/0),P.geo.stream(t,i(Ii)),[[Ni,Mi],[Di,Ai]]},a.projection=function(t){return arguments.length?(i=(e=t)?t.stream||function(n){var e=$i(function(t,e){return n([t*Et,e*Et])});return function(t){return Gi(e(t))}}(t):fe,l()):e},a.context=function(t){return arguments.length?(r=null==(n=t)?new Ri:new Ui(t),"function"!=typeof s&&r.pointRadius(s),l()):n},a.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(r.pointRadius(+t),+t),a):s},a.projection(P.geo.albersUsa()).context(null)},P.geo.transform=function(i){return{stream:function(t){var e=new Wi(t);for(var n in i)e[n]=i[n];return e}}},Wi.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},P.geo.projection=Yi,P.geo.projectionMutator=Ki,(P.geo.equirectangular=function(){return Yi(Qi)}).raw=Qi.invert=Qi,P.geo.rotation=function(e){function t(t){return(t=e(t[0]*St,t[1]*St))[0]*=Et,t[1]*=Et,t}return e=Xi(e[0]%360*St,e[1]*St,2<e.length?e[2]*St:0),t.invert=function(t){return(t=e.invert(t[0]*St,t[1]*St))[0]*=Et,t[1]*=Et,t},t},Ji.invert=Qi,P.geo.circle=function(){var e,r,o=[0,0],n=6;function i(){var t="function"==typeof o?o.apply(this,arguments):o,n=Xi(-t[0]*St,-t[1]*St,0).invert,i=[];return r(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=Et,t[1]*=Et}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(o=t,i):o},i.angle=function(t){return arguments.length?(r=nr((e=+t)*St,n*St),i):e},i.precision=function(t){return arguments.length?(r=nr(e*St,(n=+t)*St),i):n},i.angle(90)},P.geo.distance=function(t,e){var n,i=(e[0]-t[0])*St,r=t[1]*St,o=e[1]*St,s=Math.sin(i),a=Math.cos(i),l=Math.sin(r),u=Math.cos(r),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*s)*n+(n=u*c-l*h*a)*n),l*c+u*h*a)},P.geo.graticule=function(){var e,n,i,r,o,s,a,l,u,c,h,p,f=10,d=f,m=90,g=360,y=2.5;function v(){return{type:"MultiLineString",coordinates:t()}}function t(){return P.range(Math.ceil(r/m)*m,i,m).map(h).concat(P.range(Math.ceil(l/g)*g,a,g).map(p)).concat(P.range(Math.ceil(n/f)*f,e,f).filter(function(t){return R(t%m)>Ct}).map(u)).concat(P.range(Math.ceil(s/d)*d,o,d).filter(function(t){return R(t%g)>Ct}).map(c))}return v.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},v.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(p(a).slice(1),h(i).reverse().slice(1),p(l).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.majorExtent(t).minorExtent(t):v.minorExtent()},v.majorExtent=function(t){return arguments.length?(r=+t[0][0],i=+t[1][0],l=+t[0][1],a=+t[1][1],i<r&&(t=r,r=i,i=t),a<l&&(t=l,l=a,a=t),v.precision(y)):[[r,l],[i,a]]},v.minorExtent=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],s=+t[0][1],o=+t[1][1],e<n&&(t=n,n=e,e=t),o<s&&(t=s,s=o,o=t),v.precision(y)):[[n,s],[e,o]]},v.step=function(t){return arguments.length?v.majorStep(t).minorStep(t):v.minorStep()},v.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],v):[m,g]},v.minorStep=function(t){return arguments.length?(f=+t[0],d=+t[1],v):[f,d]},v.precision=function(t){return arguments.length?(y=+t,u=rr(s,o,90),c=or(n,e,y),h=rr(l,a,90),p=or(r,i,y),v):y},v.majorExtent([[-180,-90+Ct],[180,90-Ct]]).minorExtent([[-180,-80-Ct],[180,80+Ct]])},P.geo.greatArc=function(){var e,n,i=sr,r=ar;function o(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}return o.distance=function(){return P.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},o.source=function(t){return arguments.length?(e="function"==typeof(i=t)?null:t,o):i},o.target=function(t){return arguments.length?(n="function"==typeof(r=t)?null:t,o):r},o.precision=function(){return arguments.length?o:0},o},P.geo.interpolate=function(t,e){return function(t,e,n,i){var r=Math.cos(e),s=Math.sin(e),o=Math.cos(i),a=Math.sin(i),l=r*Math.cos(t),u=r*Math.sin(t),c=o*Math.cos(n),h=o*Math.sin(n),p=2*Math.asin(Math.sqrt(Ot(i-e)+r*o*Ot(n-t))),f=1/Math.sin(p),d=p?function(t){var e=Math.sin(t*=p)*f,n=Math.sin(p-t)*f,i=n*l+e*c,r=n*u+e*h,o=n*s+e*a;return[Math.atan2(r,i)*Et,Math.atan2(o,Math.sqrt(i*i+r*r))*Et]}:function(){return[t*Et,e*Et]};return d.distance=p,d}(t[0]*St,t[1]*St,e[0]*St,e[1]*St)},P.geo.length=function(t){return qi=0,P.geo.stream(t,lr),qi};var lr={sphere:E,point:E,lineStart:function(){var s,a,l;function n(t,e){var n=Math.sin(e*=St),i=Math.cos(e),r=R((t*=St)-s),o=Math.cos(r);qi+=Math.atan2(Math.sqrt((r=i*Math.sin(r))*r+(r=l*n-a*i*o)*r),a*n+l*i*o),s=t,a=n,l=i}lr.point=function(t,e){s=t*St,a=Math.sin(e*=St),l=Math.cos(e),lr.point=n},lr.lineEnd=function(){lr.point=lr.lineEnd=E}},lineEnd:E,polygonStart:E,polygonEnd:E};function ur(o,s){function t(t,e){var n=Math.cos(t),i=Math.cos(e),r=o(n*i);return[r*i*Math.sin(t),r*Math.sin(e)]}return t.invert=function(t,e){var n=Math.sqrt(t*t+e*e),i=s(n),r=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*r,n*o),Math.asin(n&&e*r/n)]},t}var cr=ur(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(P.geo.azimuthalEqualArea=function(){return Yi(cr)}).raw=cr;var hr=ur(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},fe);function pr(t,e){function i(t){return Math.tan(bt/4+t/2)}var n=Math.cos(t),r=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(i(e)/i(t)),o=n*Math.pow(i(t),r)/r;if(!r)return mr;function s(t,e){0<o?e<-xt+Ct&&(e=-xt+Ct):xt-Ct<e&&(e=xt-Ct);var n=o/Math.pow(i(e),r);return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}return s.invert=function(t,e){var n=o-e,i=kt(r)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/r,2*Math.atan(Math.pow(o/i,1/r))-xt]},s}function fr(t,e){var n=Math.cos(t),i=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),r=n/i+t;if(R(i)<Ct)return Qi;function o(t,e){var n=r-e;return[n*Math.sin(i*t),r-n*Math.cos(i*t)]}return o.invert=function(t,e){var n=r-e;return[Math.atan2(t,n)/i,r-kt(i)*Math.sqrt(t*t+n*n)]},o}(P.geo.azimuthalEquidistant=function(){return Yi(hr)}).raw=hr,(P.geo.conicConformal=function(){return Ti(pr)}).raw=pr,(P.geo.conicEquidistant=function(){return Ti(fr)}).raw=fr;var dr=ur(function(t){return 1/t},Math.atan);function mr(t,e){return[t,Math.log(Math.tan(bt/4+e/2))]}function gr(t){var r,o=Yi(t),s=o.scale,a=o.translate,l=o.clipExtent;return o.scale=function(){var t=s.apply(o,arguments);return t===o?r?o.clipExtent(null):o:t},o.translate=function(){var t=a.apply(o,arguments);return t===o?r?o.clipExtent(null):o:t},o.clipExtent=function(t){var e=l.apply(o,arguments);if(e===o){if(r=null==t){var n=bt*s(),i=a();l([[i[0]-n,i[1]-n],[i[0]+n,i[1]+n]])}}else r&&(e=null);return e},o.clipExtent(null)}(P.geo.gnomonic=function(){return Yi(dr)}).raw=dr,mr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-xt]},(P.geo.mercator=function(){return gr(mr)}).raw=mr;var yr=ur(function(){return 1},Math.asin);(P.geo.orthographic=function(){return Yi(yr)}).raw=yr;var vr=ur(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function _r(t,e){return[Math.log(Math.tan(bt/4+e/2)),-t]}function br(t){return t[0]}function wr(t){return t[1]}function xr(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;r++){for(;1<i&&Nt(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Cr(t,e){return t[0]-e[0]||t[1]-e[1]}(P.geo.stereographic=function(){return Yi(vr)}).raw=vr,_r.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-xt]},(P.geo.transverseMercator=function(){var t=gr(_r),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=_r,P.geom={},P.geom.hull=function(t){var p=br,f=wr;if(arguments.length)return e(t);function e(t){if(t.length<3)return[];var e,n=pe(p),i=pe(f),r=t.length,o=[],s=[];for(e=0;e<r;e++)o.push([+n.call(this,t[e],e),+i.call(this,t[e],e),e]);for(o.sort(Cr),e=0;e<r;e++)s.push([o[e][0],-o[e][1]]);var a=xr(o),l=xr(s),u=l[0]===a[0],c=l[l.length-1]===a[a.length-1],h=[];for(e=a.length-1;0<=e;--e)h.push(t[o[a[e]][2]]);for(e=+u;e<l.length-c;++e)h.push(t[o[l[e]][2]]);return h}return e.x=function(t){return arguments.length?(p=t,e):p},e.y=function(t){return arguments.length?(f=t,e):f},e},P.geom.polygon=function(t){return A(t,Tr),t};var Tr=P.geom.polygon.prototype=[];function Sr(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Er(t,e,n,i){var r=t[0],o=n[0],s=e[0]-r,a=i[0]-o,l=t[1],u=n[1],c=e[1]-l,h=i[1]-u,p=(a*(l-u)-h*(r-o))/(h*s-a*c);return[r+p*s,l+p*c]}function kr(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}Tr.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},Tr.centroid=function(t){var e,n,i=-1,r=this.length,o=0,s=0,a=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=a,a=this[i],n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return[o*t,s*t]},Tr.clip=function(t){for(var e,n,i,r,o,s,a=kr(t),l=-1,u=this.length-kr(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,r=this[l],o=e[(i=e.length-a)-1],n=-1;++n<i;)Sr(s=e[n],c,r)?(Sr(o,c,r)||t.push(Er(o,s,c,r)),t.push(s)):Sr(o,c,r)&&t.push(Er(o,s,c,r)),o=s;a&&t.push(t[0]),c=r}return t};var Nr,Mr,Dr,Ar,Or,Pr=[],Ir=[];function Rr(){to(this),this.edge=this.site=this.circle=null}function Lr(t){var e=Pr.pop()||new Rr;return e.site=t,e}function qr(t){Vr(t),Dr.remove(t),Pr.push(t),to(t)}function jr(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},o=t.P,s=t.N,a=[t];qr(t);for(var l=o;l.circle&&R(n-l.circle.x)<Ct&&R(i-l.circle.cy)<Ct;)o=l.P,a.unshift(l),qr(l),l=o;a.unshift(l),Vr(l);for(var u=s;u.circle&&R(n-u.circle.x)<Ct&&R(i-u.circle.cy)<Ct;)s=u.N,a.push(u),qr(u),u=s;a.push(u),Vr(u);var c,h=a.length;for(c=1;c<h;++c)u=a[c],l=a[c-1],Jr(u.edge,l.site,u.site,r);l=a[0],(u=a[h-1]).edge=Gr(l.site,u.site,null,r),Wr(l),Wr(u)}function Fr(t){for(var e,n,i,r,o=t.x,s=t.y,a=Dr._;a;)if(i=zr(a,s)-o,Ct<i)a=a.L;else{if(r=o-Hr(a,s),!(Ct<r)){-Ct<i?(e=a.P,n=a):-Ct<r?n=(e=a).N:e=n=a;break}if(!a.R){e=a;break}a=a.R}var l=Lr(t);if(Dr.insert(e,l),e||n){if(e===n)return Vr(e),n=Lr(e.site),Dr.insert(l,n),l.edge=n.edge=Gr(e.site,l.site),Wr(e),void Wr(n);if(n){Vr(e),Vr(n);var u=e.site,c=u.x,h=u.y,p=t.x-c,f=t.y-h,d=n.site,m=d.x-c,g=d.y-h,y=2*(p*g-f*m),v=p*p+f*f,_=m*m+g*g,b={x:(g*v-f*_)/y+c,y:(p*_-m*v)/y+h};Jr(n.edge,u,d,b),l.edge=Gr(u,t,null,b),n.edge=Gr(t,d,null,b),Wr(e),Wr(n)}else l.edge=Gr(e.site,l.site)}}function zr(t,e){var n=t.site,i=n.x,r=n.y,o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site).x,l=n.y,u=l-e;if(!u)return a;var c=a-i,h=1/o-1/u,p=c/u;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*u)-l+u/2+r-o/2)))/h+i:(i+a)/2}function Hr(t,e){var n=t.N;if(n)return zr(n,e);var i=t.site;return i.y===e?i.x:1/0}function Br(t){this.site=t,this.edges=[]}function Ur(t,e){return e.angle-t.angle}function $r(){to(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wr(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r.x,a=r.y,l=i.x-s,u=i.y-a,c=o.x-s,h=2*(l*(g=o.y-a)-u*c);if(!(-Tt<=h)){var p=l*l+u*u,f=c*c+g*g,d=(g*p-u*f)/h,m=(l*f-c*p)/h,g=m+a,y=Ir.pop()||new $r;y.arc=t,y.site=r,y.x=d+s,y.y=g+Math.sqrt(d*d+m*m),y.cy=g,t.circle=y;for(var v=null,_=Or._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}Or.insert(v,y),v||(Ar=y)}}}}function Vr(t){var e=t.circle;e&&(e.P||(Ar=e.N),Or.remove(e),Ir.push(e),to(e),t.circle=null)}function Yr(t,e){var n=t.b;if(n)return!0;var i,r,o=t.a,s=e[0][0],a=e[1][0],l=e[0][1],u=e[1][1],c=t.l,h=t.r,p=c.x,f=c.y,d=h.x,m=h.y,g=(p+d)/2,y=(f+m)/2;if(m===f){if(g<s||a<=g)return;if(d<p){if(o){if(o.y>=u)return}else o={x:g,y:l};n={x:g,y:u}}else{if(o){if(o.y<l)return}else o={x:g,y:u};n={x:g,y:l}}}else if(r=y-(i=(p-d)/(m-f))*g,i<-1||1<i)if(d<p){if(o){if(o.y>=u)return}else o={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else if(f<m){if(o){if(o.x>=a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}else{if(o){if(o.x<s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}return t.a=o,t.b=n,!0}function Kr(t,e){this.l=t,this.r=e,this.a=this.b=null}function Gr(t,e,n,i){var r=new Kr(t,e);return Nr.push(r),n&&Jr(r,t,e,n),i&&Jr(r,e,t,i),Mr[t.i].edges.push(new Xr(r,t,e)),Mr[e.i].edges.push(new Xr(r,e,t)),r}function Qr(t,e,n){var i=new Kr(t,null);return i.a=e,i.b=n,Nr.push(i),i}function Jr(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Xr(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function Zr(){this._=null}function to(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function eo(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function no(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function io(t){for(;t.L;)t=t.L;return t}function ro(t,e){var n,i,r,o=t.sort(oo).pop();for(Nr=[],Mr=new Array(t.length),Dr=new Zr,Or=new Zr;;)if(r=Ar,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))o.x===n&&o.y===i||(Mr[o.i]=new Br(o),Fr(o),n=o.x,i=o.y),o=t.pop();else{if(!r)break;jr(r.arc)}e&&(function(t){for(var e,n=Nr,i=bi(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)Yr(e=n[r],t)&&i(e)&&!(R(e.a.x-e.b.x)<Ct&&R(e.a.y-e.b.y)<Ct)||(e.a=e.b=null,n.splice(r,1))}(e),function(t){for(var e,n,i,r,o,s,a,l,u,c,h=t[0][0],p=t[1][0],f=t[0][1],d=t[1][1],m=Mr,g=m.length;g--;)if((o=m[g])&&o.prepare())for(l=(a=o.edges).length,s=0;s<l;)i=(c=a[s].end()).x,r=c.y,e=(u=a[++s%l].start()).x,n=u.y,(R(i-e)>Ct||R(r-n)>Ct)&&(a.splice(s,0,new Xr(Qr(o.site,c,R(i-h)<Ct&&Ct<d-r?{x:h,y:R(e-h)<Ct?n:d}:R(r-d)<Ct&&Ct<p-i?{x:R(n-d)<Ct?e:p,y:d}:R(i-p)<Ct&&Ct<r-f?{x:p,y:R(e-p)<Ct?n:f}:R(r-f)<Ct&&Ct<i-h?{x:R(n-f)<Ct?e:h,y:f}:null),o.site,null)),++l)}(e));var s={cells:Mr,edges:Nr};return Dr=Or=Nr=Mr=null,s}function oo(t,e){return e.y-t.y||e.x-t.x}Br.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Ur),e.length},Xr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Zr.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=io(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(eo(this,n),n=(t=n).U),n.C=!1,i.C=!0,no(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(no(this,n),n=(t=n).U),n.C=!1,i.C=!0,eo(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?io(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,((n.L=o).U=n)!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,(n.R=s).U=n):(n.U=r,t=(r=n).R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,eo(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,no(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,eo(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,no(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,eo(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,no(this,r),t=this._;break}e.C=!0,r=(t=r).U}while(!t.C);t&&(t.C=!1)}}},P.geom.voronoi=function(t){var e=br,n=wr,i=e,r=n,c=so;if(t)return o(t);function o(r){var o=new Array(r.length),s=c[0][0],a=c[0][1],l=c[1][0],u=c[1][1];return ro(h(r),c).cells.forEach(function(t,e){var n=t.edges,i=t.site;(o[e]=n.length?n.map(function(t){var e=t.start();return[e.x,e.y]}):i.x>=s&&i.x<=l&&i.y>=a&&i.y<=u?[[s,u],[l,u],[l,a],[s,a]]:[]).point=r[e]}),o}function h(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/Ct)*Ct,y:Math.round(r(t,e)/Ct)*Ct,i:e}})}return o.links=function(e){return ro(h(e)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},o.triangles=function(p){var f=[];return ro(h(p)).cells.forEach(function(t,e){for(var n,i,r,o,s=t.site,a=t.edges.sort(Ur),l=-1,u=a.length,c=a[u-1].edge,h=c.l===s?c.r:c.l;++l<u;)c,n=h,h=(c=a[l].edge).l===s?c.r:c.l,e<n.i&&e<h.i&&(r=n,o=h,((i=s).x-o.x)*(r.y-i.y)-(i.x-r.x)*(o.y-i.y)<0)&&f.push([p[e],p[n.i],p[h.i]])}),f},o.x=function(t){return arguments.length?(i=pe(e=t),o):e},o.y=function(t){return arguments.length?(r=pe(n=t),o):n},o.clipExtent=function(t){return arguments.length?(c=null==t?so:t,o):c===so?null:c},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):c===so?null:c&&c[1]},o};var so=[[-1e6,-1e6],[1e6,1e6]];function ao(t){return t.x}function lo(t){return t.y}function uo(t,e){t=P.rgb(t),e=P.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,s=e.g-i,a=e.b-r;return function(t){return"#"+oe(Math.round(n+o*t))+oe(Math.round(i+s*t))+oe(Math.round(r+a*t))}}function co(t,e){var n,i={},r={};for(n in t)n in e?i[n]=go(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function ho(e,n){return n-=e=+e,function(t){return e+n*t}}function po(t,i){var e,n,r,o=fo.lastIndex=mo.lastIndex=0,s=-1,a=[],l=[];for(t+="",i+="";(e=fo.exec(t))&&(n=mo.exec(i));)(r=n.index)>o&&(r=i.substring(o,r),a[s]?a[s]+=r:a[++s]=r),(e=e[0])===(n=n[0])?a[s]?a[s]+=n:a[++s]=n:(a[++s]=null,l.push({i:s,x:ho(e,n)})),o=mo.lastIndex;return o<i.length&&(r=i.substring(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?(i=l[0].x,function(t){return i(t)+""}):function(){return i}:(i=l.length,function(t){for(var e,n=0;n<i;++n)a[(e=l[n]).i]=e.x(t);return a.join("")})}P.geom.delaunay=function(t){return P.geom.voronoi().triangles(t)},P.geom.quadtree=function(t,_,b,w,x){var C,T=br,S=wr;if(C=arguments.length)return T=ao,S=lo,3===C&&(x=b,w=_,b=_=0),e(t);function e(t){var e,n,i,r,o,s,a,l,u,c=pe(T),h=pe(S);if(null!=_)s=_,a=b,l=w,u=x;else if(l=u=-(s=a=1/0),n=[],i=[],o=t.length,C)for(r=0;r<o;++r)(e=t[r]).x<s&&(s=e.x),e.y<a&&(a=e.y),e.x>l&&(l=e.x),e.y>u&&(u=e.y),n.push(e.x),i.push(e.y);else for(r=0;r<o;++r){var p=+c(e=t[r],r),f=+h(e,r);p<s&&(s=p),f<a&&(a=f),l<p&&(l=p),u<f&&(u=f),n.push(p),i.push(f)}var d=l-s,m=u-a;function g(t,e,n,i,r,o,s,a){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(R(l-n)+R(u-i)<.01)y(t,e,n,i,r,o,s,a);else{var c=t.point;t.x=t.y=t.point=null,y(t,c,l,u,r,o,s,a),y(t,e,n,i,r,o,s,a)}else t.x=n,t.y=i,t.point=e}else y(t,e,n,i,r,o,s,a)}function y(t,e,n,i,r,o,s,a){var l=.5*(r+s),u=.5*(o+a),c=l<=n,h=u<=i,p=(h<<1)+c;t.leaf=!1,c?r=l:s=l,h?o=u:a=u,g(t=t.nodes[p]||(t.nodes[p]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,i,r,o,s,a)}m<d?u=a+d:l=s+m;var v={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){g(v,t,+c(t,++r),+h(t,r),s,a,l,u)}};if(v.visit=function(t){!function t(e,n,i,r,o,s){if(!e(n,i,r,o,s)){var a=.5*(i+o),l=.5*(r+s),u=n.nodes;u[0]&&t(e,u[0],i,r,a,l),u[1]&&t(e,u[1],a,r,o,l),u[2]&&t(e,u[2],i,l,a,s),u[3]&&t(e,u[3],a,l,o,s)}}(t,v,s,a,l,u)},r=-1,null==_){for(;++r<o;)g(v,t[r],n[r],i[r],s,a,l,u);--r}else t.forEach(v.add);return n=i=t=e=null,v}return e.x=function(t){return arguments.length?(T=t,e):T},e.y=function(t){return arguments.length?(S=t,e):S},e.extent=function(t){return arguments.length?(null==t?_=b=w=x=null:(_=+t[0][0],b=+t[0][1],w=+t[1][0],x=+t[1][1]),e):null==_?null:[[_,b],[w,x]]},e.size=function(t){return arguments.length?(null==t?_=b=w=x=null:(_=b=0,w=+t[0],x=+t[1]),e):null==_?null:[w-_,x-b]},e},P.interpolateRgb=uo,P.interpolateObject=co,P.interpolateNumber=ho,P.interpolateString=po;var fo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mo=new RegExp(fo.source,"g");function go(t,e){for(var n,i=P.interpolators.length;0<=--i&&!(n=P.interpolators[i](t,e)););return n}function yo(t,e){var n,i=[],r=[],o=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;n<a;++n)i.push(go(t[n],e[n]));for(;n<o;++n)r[n]=t[n];for(;n<s;++n)r[n]=e[n];return function(t){for(n=0;n<a;++n)r[n]=i[n](t);return r}}P.interpolate=go,P.interpolators=[function(t,e){var n=typeof e;return("string"==n?he.has(e)||/^(#|rgb\(|hsl\()/.test(e)?uo:po:e instanceof qt?uo:Array.isArray(e)?yo:"object"==n&&isNaN(e)?co:ho)(t,e)}],P.interpolateArray=yo;function vo(){return fe}var _o=P.map({linear:vo,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return Co},cubic:function(){return To},sin:function(){return Eo},exp:function(){return ko},circle:function(){return No},elastic:function(e,n){var i;arguments.length<2&&(n=.45);i=arguments.length?n/wt*Math.asin(1/e):(e=1,n/4);return function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-i)*wt/n)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return Mo}}),bo=P.map({in:fe,out:wo,"in-out":xo,"out-in":function(t){return xo(wo(t))}});function wo(e){return function(t){return 1-e(1-t)}}function xo(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Co(t){return t*t}function To(t){return t*t*t}function So(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Eo(t){return 1-Math.cos(t*xt)}function ko(t){return Math.pow(2,10*(t-1))}function No(t){return 1-Math.sqrt(1-t*t)}function Mo(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Do(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function Ao(t){var e=[t.a,t.b],n=[t.c,t.d],i=Po(e),r=Oo(e,n),o=Po(function(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Et,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*Et:0}function Oo(t,e){return t[0]*e[0]+t[1]*e[1]}function Po(t){var e=Math.sqrt(Oo(t,t));return e&&(t[0]/=e,t[1]/=e),e}P.ease=function(t){var e=t.indexOf("-"),n=0<=e?t.substring(0,e):t,i=0<=e?t.substring(e+1):"in";return n=_o.get(n)||vo,function(e){return function(t){return t<=0?0:1<=t?1:e(t)}}((i=bo.get(i)||fe)(n.apply(null,r.call(arguments,1))))},P.interpolateHcl=function(t,e){t=P.hcl(t),e=P.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,s=e.c-i,a=e.l-r;isNaN(s)&&(s=0,i=isNaN(i)?e.c:i);isNaN(o)?(o=0,n=isNaN(n)?e.h:n):180<o?o-=360:o<-180&&(o+=360);return function(t){return Ut(n+o*t,i+s*t,r+a*t)+""}},P.interpolateHsl=function(t,e){t=P.hsl(t),e=P.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,s=e.s-i,a=e.l-r;isNaN(s)&&(s=0,i=isNaN(i)?e.s:i);isNaN(o)?(o=0,n=isNaN(n)?e.h:n):180<o?o-=360:o<-180&&(o+=360);return function(t){return zt(n+o*t,i+s*t,r+a*t)+""}},P.interpolateLab=function(t,e){t=P.lab(t),e=P.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,s=e.a-i,a=e.b-r;return function(t){return Qt(n+o*t,i+s*t,r+a*t)+""}},P.interpolateRound=Do,P.transform=function(t){var n=i.createElementNS(P.ns.prefix.svg,"g");return(P.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Ao(e?e.matrix:Io)})(t)},Ao.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Io={a:1,b:0,c:0,d:1,e:0,f:0};function Ro(t,e){var i,r=[],o=[],n=P.transform(t),s=P.transform(e),a=n.translate,l=s.translate,u=n.rotate,c=s.rotate,h=n.skew,p=s.skew,f=n.scale,d=s.scale;return a[0]!=l[0]||a[1]!=l[1]?(r.push("translate(",null,",",null,")"),o.push({i:1,x:ho(a[0],l[0])},{i:3,x:ho(a[1],l[1])})):l[0]||l[1]?r.push("translate("+l+")"):r.push(""),u!=c?(180<u-c?c+=360:180<c-u&&(u+=360),o.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:ho(u,c)})):c&&r.push(r.pop()+"rotate("+c+")"),h!=p?o.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:ho(h,p)}):p&&r.push(r.pop()+"skewX("+p+")"),f[0]!=d[0]||f[1]!=d[1]?(i=r.push(r.pop()+"scale(",null,",",null,")"),o.push({i:i-4,x:ho(f[0],d[0])},{i:i-2,x:ho(f[1],d[1])})):1==d[0]&&1==d[1]||r.push(r.pop()+"scale("+d+")"),i=o.length,function(t){for(var e,n=-1;++n<i;)r[(e=o[n]).i]=e.x(t);return r.join("")}}function Lo(e,n){return n=n-(e=+e)?1/(n-e):0,function(t){return(t-e)*n}}function qo(e,n){return n=n-(e=+e)?1/(n-e):0,function(t){return Math.max(0,Math.min(1,(t-e)*n))}}function jo(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;var n=Fo(t),i=Fo(e),r=n.pop(),o=i.pop(),s=null;for(;r===o;)s=r,r=n.pop(),o=i.pop();return s}(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function Fo(t){for(var e=[],n=t.parent;null!=n;)e.push(t),n=(t=n).parent;return e.push(t),e}function zo(t){t.fixed|=2}function Ho(t){t.fixed&=-7}function Bo(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Uo(t){t.fixed&=-5}P.interpolateTransform=Ro,P.layout={},P.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(jo(t[n]));return e}},P.layout.chord=function(){var g,y,v,_,b,w,x,e={},C=0;function t(){var t,e,n,i,r,o={},s=[],a=P.range(_),l=[];for(g=[],y=[],t=0,i=-1;++i<_;){for(e=0,r=-1;++r<_;)e+=v[i][r];s.push(e),l.push(P.range(_)),t+=e}for(b&&a.sort(function(t,e){return b(s[t],s[e])}),w&&l.forEach(function(t,n){t.sort(function(t,e){return w(v[n][t],v[n][e])})}),t=(wt-C*_)/t,e=0,i=-1;++i<_;){for(n=e,r=-1;++r<_;){var u=a[i],c=l[u][r],h=v[u][c],p=e,f=e+=h*t;o[u+"-"+c]={index:u,subindex:c,startAngle:p,endAngle:f,value:h}}y[u]={index:u,startAngle:n,endAngle:e,value:(e-n)/t},e+=C}for(i=-1;++i<_;)for(r=i-1;++r<_;){var d=o[i+"-"+r],m=o[r+"-"+i];(d.value||m.value)&&g.push(d.value<m.value?{source:m,target:d}:{source:d,target:m})}x&&T()}function T(){g.sort(function(t,e){return x((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return e.matrix=function(t){return arguments.length?(_=(v=t)&&v.length,g=y=null,e):v},e.padding=function(t){return arguments.length?(C=t,g=y=null,e):C},e.sortGroups=function(t){return arguments.length?(b=t,g=y=null,e):b},e.sortSubgroups=function(t){return arguments.length?(w=t,g=null,e):w},e.sortChords=function(t){return arguments.length?(x=t,g&&T(),e):x},e.chords=function(){return g||t(),g},e.groups=function(){return y||t(),y},e},P.layout.force=function(){var t,h,p,f,d,o={},m=P.dispatch("start","tick","end"),g=[1,1],y=.9,s=$o,c=Wo,v=-30,_=Vo,b=.1,w=.64,x=[],C=[];function T(u){return function(t,e,n,i){if(t.point!==u){var r=t.cx-u.x,o=t.cy-u.y,s=i-e,a=r*r+o*o;if(s*s/w<a){if(a<_){var l=t.charge/a;u.px-=r*l,u.py-=o*l}return!0}if(t.point&&a&&a<_){l=t.pointCharge/a;u.px-=r*l,u.py-=o*l}}return!t.charge}}function e(t){t.px=P.event.x,t.py=P.event.y,o.resume()}return o.tick=function(){if((h*=.99)<.005)return m.end({type:"end",alpha:h=0}),!0;var t,e,n,i,r,o,s,a,l,u=x.length,c=C.length;for(e=0;e<c;++e)i=(n=C[e]).source,(o=(a=(r=n.target).x-i.x)*a+(l=r.y-i.y)*l)&&(a*=o=h*f[e]*((o=Math.sqrt(o))-p[e])/o,l*=o,r.x-=a*(s=i.weight/(r.weight+i.weight)),r.y-=l*s,i.x+=a*(s=1-s),i.y+=l*s);if((s=h*b)&&(a=g[0]/2,l=g[1]/2,e=-1,s))for(;++e<u;)(n=x[e]).x+=(a-n.x)*s,n.y+=(l-n.y)*s;if(v)for(!function t(e,n,i){var r=0,o=0;e.charge=0;if(!e.leaf)for(var s,a=e.nodes,l=a.length,u=-1;++u<l;)null!=(s=a[u])&&(t(s,n,i),e.charge+=s.charge,r+=s.charge*s.cx,o+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*i[e.point.index];e.charge+=e.pointCharge=c,r+=c*e.point.x,o+=c*e.point.y}e.cx=r/e.charge;e.cy=o/e.charge}(t=P.geom.quadtree(x),h,d),e=-1;++e<u;)(n=x[e]).fixed||t.visit(T(n));for(e=-1;++e<u;)(n=x[e]).fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*y,n.y-=(n.py-(n.py=n.y))*y);m.tick({type:"tick",alpha:h})},o.nodes=function(t){return arguments.length?(x=t,o):x},o.links=function(t){return arguments.length?(C=t,o):C},o.size=function(t){return arguments.length?(g=t,o):g},o.linkDistance=function(t){return arguments.length?(s="function"==typeof t?t:+t,o):s},o.distance=o.linkDistance,o.linkStrength=function(t){return arguments.length?(c="function"==typeof t?t:+t,o):c},o.friction=function(t){return arguments.length?(y=+t,o):y},o.charge=function(t){return arguments.length?(v="function"==typeof t?t:+t,o):v},o.chargeDistance=function(t){return arguments.length?(_=t*t,o):Math.sqrt(_)},o.gravity=function(t){return arguments.length?(b=+t,o):b},o.theta=function(t){return arguments.length?(w=t*t,o):Math.sqrt(w)},o.alpha=function(t){return arguments.length?(t=+t,h?h=0<t?t:0:0<t&&(m.start({type:"start",alpha:h=t}),P.timer(o.tick)),o):h},o.start=function(){var a,l,t,u=x.length,e=C.length,n=g[0],i=g[1];for(a=0;a<u;++a)(t=x[a]).index=a,t.weight=0;for(a=0;a<e;++a)"number"==typeof(t=C[a]).source&&(t.source=x[t.source]),"number"==typeof t.target&&(t.target=x[t.target]),++t.source.weight,++t.target.weight;for(a=0;a<u;++a)t=x[a],isNaN(t.x)&&(t.x=r("x",n)),isNaN(t.y)&&(t.y=r("y",i)),isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y);if(p=[],"function"==typeof s)for(a=0;a<e;++a)p[a]=+s.call(this,C[a],a);else for(a=0;a<e;++a)p[a]=s;if(f=[],"function"==typeof c)for(a=0;a<e;++a)f[a]=+c.call(this,C[a],a);else for(a=0;a<e;++a)f[a]=c;if(d=[],"function"==typeof v)for(a=0;a<u;++a)d[a]=+v.call(this,x[a],a);else for(a=0;a<u;++a)d[a]=v;function r(t,e){if(!l){for(l=new Array(u),o=0;o<u;++o)l[o]=[];for(o=0;o<s;++o){var n=C[o];l[n.source.index].push(n.target),l[n.target.index].push(n.source)}}for(var i,r=l[a],o=-1,s=r.length;++o<s;)if(!isNaN(i=r[o][t]))return i;return Math.random()*e}return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){if(t||(t=P.behavior.drag().origin(fe).on("dragstart.force",zo).on("drag.force",e).on("dragend.force",Ho)),!arguments.length)return t;this.on("mouseover.force",Bo).on("mouseout.force",Uo).call(t)},P.rebind(o,m,"on")};var $o=20,Wo=1,Vo=1/0;function Yo(t,e){return P.rebind(t,e,"sort","children","value"),(t.nodes=t).links=Zo,t}function Ko(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;0<=--i;)n.push(r[i])}function Go(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(o=t.children)&&(r=o.length))for(var r,o,s=-1;++s<r;)n.push(o[s]);for(;null!=(t=i.pop());)e(t)}function Qo(t){return t.children}function Jo(t){return t.value}function Xo(t,e){return e.value-t.value}function Zo(t){return P.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}P.layout.hierarchy=function(){var a=Xo,l=Qo,u=Jo;function c(t){var e,n=[t],i=[];for(t.depth=0;null!=(e=n.pop());)if(i.push(e),(o=l.call(c,e,e.depth))&&(r=o.length)){for(var r,o,s;0<=--r;)n.push(s=o[r]),s.parent=e,s.depth=e.depth+1;u&&(e.value=0),e.children=o}else u&&(e.value=+u.call(c,e,e.depth)||0),delete e.children;return Go(t,function(t){var e,n;a&&(e=t.children)&&e.sort(a),u&&(n=t.parent)&&(n.value+=t.value)}),i}return c.sort=function(t){return arguments.length?(a=t,c):a},c.children=function(t){return arguments.length?(l=t,c):l},c.value=function(t){return arguments.length?(u=t,c):u},c.revalue=function(t){return u&&(Ko(t,function(t){t.children&&(t.value=0)}),Go(t,function(t){var e;t.children||(t.value=+u.call(c,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},c},P.layout.partition=function(){var i=P.layout.hierarchy(),r=[1,1];function e(t,e){var n=i.call(this,t,e);return function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(s=o.length)){var s,a,l,u=-1;for(i=e.value?i/e.value:0;++u<s;)t(a=o[u],n,l=a.value*i,r),n+=l}}(n[0],0,r[0],r[1]/function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,t(n[o]));return 1+i}(n[0])),n}return e.size=function(t){return arguments.length?(r=t,e):r},Yo(e,i)},P.layout.pie=function(){var a=Number,l=ts,e=0,u=wt;function c(n){var i=n.map(function(t,e){return+a.call(c,t,e)}),r=+("function"==typeof e?e.apply(this,arguments):e),o=(("function"==typeof u?u.apply(this,arguments):u)-r)/P.sum(i),t=P.range(n.length);null!=l&&t.sort(l===ts?function(t,e){return i[e]-i[t]}:function(t,e){return l(n[t],n[e])});var s=[];return t.forEach(function(t){var e;s[t]={data:n[t],value:e=i[t],startAngle:r,endAngle:r+=e*o}}),s}return c.value=function(t){return arguments.length?(a=t,c):a},c.sort=function(t){return arguments.length?(l=t,c):l},c.startAngle=function(t){return arguments.length?(e=t,c):e},c.endAngle=function(t){return arguments.length?(u=t,c):u},c};var ts={};function es(t){return t.x}function ns(t){return t.y}function is(t,e,n){t.y0=e,t.y=n}P.layout.stack=function(){var h=fe,p=ss,f=as,d=is,m=es,g=ns;function y(t,e){var n=t.map(function(t,e){return h.call(y,t,e)}),i=n.map(function(t){return t.map(function(t,e){return[m.call(y,t,e),g.call(y,t,e)]})}),r=p.call(y,i,e);n=P.permute(n,r),i=P.permute(i,r);var o,s,a,l=f.call(y,i,e),u=n.length,c=n[0].length;for(s=0;s<c;++s)for(d.call(y,n[0][s],a=l[s],i[0][s][1]),o=1;o<u;++o)d.call(y,n[o][s],a+=i[o-1][s][1],i[o][s][1]);return t}return y.values=function(t){return arguments.length?(h=t,y):h},y.order=function(t){return arguments.length?(p="function"==typeof t?t:rs.get(t)||ss,y):p},y.offset=function(t){return arguments.length?(f="function"==typeof t?t:os.get(t)||as,y):f},y.x=function(t){return arguments.length?(m=t,y):m},y.y=function(t){return arguments.length?(g=t,y):g},y.out=function(t){return arguments.length?(d=t,y):d},y};var rs=P.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(ls),o=t.map(us),s=P.range(i).sort(function(t,e){return r[t]-r[e]}),a=0,l=0,u=[],c=[];for(e=0;e<i;++e)n=s[e],a<l?(a+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return P.range(t.length).reverse()},default:ss}),os=P.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,s=[],a=0,l=[];for(n=0;n<o;++n){for(i=e=0;e<r;e++)i+=t[e][n][1];a<i&&(a=i),s.push(i)}for(n=0;n<o;++n)l[n]=(a-s[n])/2;return l},wiggle:function(t){var e,n,i,r,o,s,a,l,u,c=t.length,h=t[0],p=h.length,f=[];for(f[0]=l=u=0,n=1;n<p;++n){for(r=e=0;e<c;++e)r+=t[e][n][1];for(o=e=0,a=h[n][0]-h[n-1][0];e<c;++e){for(i=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);i<e;++i)s+=(t[i][n][1]-t[i][n-1][1])/a;o+=s*t[e][n][1]}f[n]=l-=r?o/r*a:0,l<u&&(u=l)}for(n=0;n<p;++n)f[n]-=u;return f},expand:function(t){var e,n,i,r=t.length,o=t[0].length,s=1/r,a=[];for(n=0;n<o;++n){for(i=e=0;e<r;e++)i+=t[e][n][1];if(i)for(e=0;e<r;e++)t[e][n][1]/=i;else for(e=0;e<r;e++)t[e][n][1]=s}for(n=0;n<o;++n)a[n]=0;return a},zero:as});function ss(t){return P.range(t.length)}function as(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function ls(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function us(t){return t.reduce(cs,0)}function cs(t,e){return t+e[1]}function hs(t,e){return ps(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ps(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function fs(t){return[P.min(t),P.max(t)]}function ds(t,e){return t.value-e.value}function ms(t,e){var n=t._pack_next;(t._pack_next=e)._pack_prev=t,(e._pack_next=n)._pack_prev=e}function gs(t,e){(t._pack_next=e)._pack_prev=t}function ys(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return n*n+i*i<.999*r*r}function vs(t){if((e=t.children)&&(l=e.length)){var e,n,i,r,o,s,a,l,u=1/0,c=-1/0,h=1/0,p=-1/0;if(e.forEach(_s),(n=e[0]).x=-n.r,n.y=0,_(n),1<l&&((i=e[1]).x=i.r,i.y=0,_(i),2<l))for(ws(n,i,r=e[2]),_(r),ms(n,r),ms(n._pack_prev=r,i),i=n._pack_next,o=3;o<l;o++){ws(n,i,r=e[o]);var f=0,d=1,m=1;for(s=i._pack_next;s!==i;s=s._pack_next,d++)if(ys(s,r)){f=1;break}if(1==f)for(a=n._pack_prev;a!==s._pack_prev&&!ys(a,r);a=a._pack_prev,m++);f?(d<m||d==m&&i.r<n.r?gs(n,i=s):gs(n=a,i),o--):(ms(n,r),_(i=r))}var g=(u+c)/2,y=(h+p)/2,v=0;for(o=0;o<l;o++)(r=e[o]).x-=g,r.y-=y,v=Math.max(v,r.r+Math.sqrt(r.x*r.x+r.y*r.y));t.r=v,e.forEach(bs)}function _(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),h=Math.min(t.y-t.r,h),p=Math.max(t.y+t.r,p)}}function _s(t){t._pack_next=t._pack_prev=t}function bs(t){delete t._pack_next,delete t._pack_prev}function ws(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var s=e.r+n.r,a=r*r+o*o,l=.5+((i*=i)-(s*=s))/(2*a),u=Math.sqrt(Math.max(0,2*s*(i+a)-(i-=a)*i-s*s))/(2*a);n.x=t.x+l*r+u*o,n.y=t.y+l*o-u*r}else n.x=t.x+i,n.y=t.y}function xs(t,e){return t.parent==e.parent?1:2}function Cs(t){var e=t.children;return e.length?e[0]:t.t}function Ts(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Ss(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Es(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ks(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return r<0&&(n+=r/2,r=0),o<0&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function Ns(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Ms(t){return t.rangeExtent?t.rangeExtent():Ns(t.range())}function Ds(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function As(t,e){var n,i=0,r=t.length-1,o=t[i],s=t[r];return s<o&&(n=i,i=r,r=n,n=o,o=s,s=n),t[i]=e.floor(o),t[r]=e.ceil(s),t}P.layout.histogram=function(){var h=!0,p=Number,f=fs,d=hs;function n(t,e){for(var n,i,r=[],o=t.map(p,this),s=f.call(this,o,e),a=d.call(this,s,o,e),l=(e=-1,o.length),u=a.length-1,c=h?1:1/l;++e<u;)(n=r[e]=[]).dx=a[e+1]-(n.x=a[e]),n.y=0;if(0<u)for(e=-1;++e<l;)(i=o[e])>=s[0]&&i<=s[1]&&((n=r[P.bisect(a,i,1,u)-1]).y+=c,n.push(t[e]));return r}return n.value=function(t){return arguments.length?(p=t,n):p},n.range=function(t){return arguments.length?(f=pe(t),n):f},n.bins=function(e){return arguments.length?(d="number"==typeof e?function(t){return ps(t,e)}:pe(e),n):d},n.frequency=function(t){return arguments.length?(h=!!t,n):h},n},P.layout.pack=function(){var l,u=P.layout.hierarchy().sort(ds),c=0,h=[1,1];function e(t,e){var n=u.call(this,t,e),i=n[0],r=h[0],o=h[1],s=null==l?Math.sqrt:"function"==typeof l?l:function(){return l};if(i.x=i.y=0,Go(i,function(t){t.r=+s(t.value)}),Go(i,vs),c){var a=c*(l?1:Math.max(2*i.r/r,2*i.r/o))/2;Go(i,function(t){t.r+=a}),Go(i,vs),Go(i,function(t){t.r-=a})}return function t(e,n,i,r){var o=e.children;e.x=n+=r*e.x;e.y=i+=r*e.y;e.r*=r;if(o)for(var s=-1,a=o.length;++s<a;)t(o[s],n,i,r)}(i,r/2,o/2,l?1:1/Math.max(2*i.r/r,2*i.r/o)),n}return e.size=function(t){return arguments.length?(h=t,e):h},e.radius=function(t){return arguments.length?(l=null==t||"function"==typeof t?t:+t,e):l},e.padding=function(t){return arguments.length?(c=+t,e):c},Yo(e,u)},P.layout.tree=function(){var h=P.layout.hierarchy().sort(null).value(null),m=xs,p=[1,1],f=null;function e(t,e){var n=h.call(this,t,e),i=n[0],r=function(t){var e,n={A:null,children:[t]},i=[n];for(;null!=(e=i.pop());)for(var r,o=e.children,s=0,a=o.length;s<a;++s)i.push((o[s]=r={_:o[s],parent:e,children:(r=o[s].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=r);return n.children[0]}(i);if(Go(r,d),r.parent.m=-r.z,Ko(r,g),f)Ko(i,y);else{var o=i,s=i,a=i;Ko(i,function(t){t.x<o.x&&(o=t),t.x>s.x&&(s=t),t.depth>a.depth&&(a=t)});var l=m(o,s)/2-o.x,u=p[0]/(s.x+m(s,o)/2+l),c=p[1]/(a.depth||1);Ko(i,function(t){t.x=(t.x+l)*u,t.y=t.depth*c})}return n}function d(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){!function(t){var e,n=0,i=0,r=t.children,o=r.length;for(;0<=--o;)(e=r[o]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var r=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+m(t._,i._),t.m=t.z-r):t.z=r}else i&&(t.z=i.z+m(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,r=t,o=t,s=e,a=r.parent.children[0],l=r.m,u=o.m,c=s.m,h=a.m;s=Ts(s),r=Cs(r),s&&r;)a=Cs(a),(o=Ts(o)).a=t,0<(i=s.z+c-r.z-l+m(s._,r._))&&(Ss((f=t,d=n,(p=s).a.parent===f.parent?p.a:d),t,i),l+=i,u+=i),c+=s.m,l+=r.m,h+=a.m,u+=o.m;s&&!Ts(o)&&(o.t=s,o.m+=c-u),r&&!Cs(a)&&(a.t=r,a.m+=l-h,n=t)}var p,f,d;return n}(t,i,t.parent.A||n[0])}function g(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function y(t){t.x*=p[0],t.y=t.depth*p[1]}return e.separation=function(t){return arguments.length?(m=t,e):m},e.size=function(t){return arguments.length?(f=null==(p=t)?y:null,e):f?null:p},e.nodeSize=function(t){return arguments.length?(f=null==(p=t)?null:y,e):f?p:null},Yo(e,h)},P.layout.cluster=function(){var c=P.layout.hierarchy().sort(null).value(null),h=xs,p=[1,1],f=!1;function e(t,e){var n,i=c.call(this,t,e),r=i[0],o=0;Go(r,function(t){var e=t.children;e&&e.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(e),t.y=function(t){return 1+P.max(t,function(t){return t.y})}(e)):(t.x=n?o+=h(t,n):0,t.y=0,n=t)});var s=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(r),a=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(r),l=s.x-h(s,a)/2,u=a.x+h(a,s)/2;return Go(r,f?function(t){t.x=(t.x-r.x)*p[0],t.y=(r.y-t.y)*p[1]}:function(t){t.x=(t.x-l)/(u-l)*p[0],t.y=(1-(r.y?t.y/r.y:1))*p[1]}),i}return e.separation=function(t){return arguments.length?(h=t,e):h},e.size=function(t){return arguments.length?(f=null==(p=t),e):f?null:p},e.nodeSize=function(t){return arguments.length?(f=null!=(p=t),e):f?p:null},Yo(e,c)},P.layout.treemap=function(){var i,r=P.layout.hierarchy(),c=Math.round,o=[1,1],s=null,h=Es,a=!1,p="squarify",l=.5*(1+Math.sqrt(5));function f(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function d(t){var e=t.children;if(e&&e.length){var n,i,r,o=h(t),s=[],a=e.slice(),l=1/0,u="slice"===p?o.dx:"dice"===p?o.dy:"slice-dice"===p?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(f(a,o.dx*o.dy/t.value),s.area=0;0<(r=a.length);)s.push(n=a[r-1]),s.area+=n.area,l="squarify"!==p||(i=m(s,u))<=l?(a.pop(),i):(s.area-=s.pop().area,g(s,u,o,!1),u=Math.min(o.dx,o.dy),s.length=s.area=0,1/0);s.length&&(g(s,u,o,!0),s.length=s.area=0),e.forEach(d)}}function u(t){var e=t.children;if(e&&e.length){var n,i=h(t),r=e.slice(),o=[];for(f(r,i.dx*i.dy/t.value),o.area=0;n=r.pop();)o.push(n),o.area+=n.area,null!=n.z&&(g(o,n.z?i.dx:i.dy,i,!r.length),o.length=o.area=0);e.forEach(u)}}function m(t,e){for(var n,i=t.area,r=0,o=1/0,s=-1,a=t.length;++s<a;)(n=t[s].area)&&(n<o&&(o=n),r<n&&(r=n));return e*=e,(i*=i)?Math.max(e*r*l/i,i/(e*o*l)):1/0}function g(t,e,n,i){var r,o=-1,s=t.length,a=n.x,l=n.y,u=e?c(t.area/e):0;if(e==n.dx){for((i||u>n.dy)&&(u=n.dy);++o<s;)(r=t[o]).x=a,r.y=l,r.dy=u,a+=r.dx=Math.min(n.x+n.dx-a,u?c(r.area/u):0);r.z=!0,r.dx+=n.x+n.dx-a,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++o<s;)(r=t[o]).x=a,r.y=l,r.dx=u,l+=r.dy=Math.min(n.y+n.dy-l,u?c(r.area/u):0);r.z=!1,r.dy+=n.y+n.dy-l,n.x+=u,n.dx-=u}}function y(t){var e=i||r(t),n=e[0];return n.x=0,n.y=0,n.dx=o[0],n.dy=o[1],i&&r.revalue(n),f([n],n.dx*n.dy/n.value),(i?u:d)(n),a&&(i=e),e}return y.size=function(t){return arguments.length?(o=t,y):o},y.padding=function(n){if(!arguments.length)return s;function t(t){return ks(t,n)}var e;return h=null==(s=n)?Es:"function"==(e=typeof n)?function(t){var e=n.call(y,t,t.depth);return null==e?Es(t):ks(t,"number"==typeof e?[e,e,e,e]:e)}:("number"==e&&(n=[n,n,n,n]),t),y},y.round=function(t){return arguments.length?(c=t?Math.round:Number,y):c!=Number},y.sticky=function(t){return arguments.length?(a=t,i=null,y):a},y.ratio=function(t){return arguments.length?(l=t,y):l},y.mode=function(t){return arguments.length?(p=t+"",y):p},Yo(y,r)},P.random={normal:function(i,r){var t=arguments.length;return t<2&&(r=1),t<1&&(i=0),function(){for(var t,e,n;!(n=(t=2*Math.random()-1)*t+(e=2*Math.random()-1)*e)||1<n;);return i+r*t*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var t=P.random.normal.apply(P,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=P.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},P.scale={};var Os={floor:fe,ceil:fe};function Ps(n,t,e,i){var r=[],o=[],s=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++s<=a;)r.push(e(n[s-1],n[s])),o.push(i(t[s-1],t[s]));return function(t){var e=P.bisect(n,t,1,a)-1;return o[e](r[e](t))}}function Is(t,e){return P.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Rs(t,e){return As(t,function(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Os}(Ls(t,e)[2]))}function Ls(t,e){null==e&&(e=10);var n=Ns(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return o<=.15?r*=10:o<=.35?r*=5:o<=.75&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function qs(t,e){return P.range.apply(P,Ls(t,e))}function js(t,e,n){var i=Ls(t,e);if(n){var r=ke.exec(n);if(r.shift(),"s"===r[8]){var o=P.formatPrefix(Math.max(R(i[0]),R(i[1])));return r[7]||(r[7]="."+zs(o.scale(i[2]))),r[8]="f",n=P.format(r.join("")),function(t){return n(o.scale(t))+o.symbol}}r[7]||(r[7]="."+function(t,e){var n=zs(e[2]);return t in Fs?Math.abs(n-zs(Math.max(R(e[0]),R(e[1]))))+ +("e"!==t):n-2*("%"===t)}(r[8],i)),n=r.join("")}else n=",."+zs(i[2])+"f";return P.format(n)}P.scale.linear=function(){return function t(n,i,r,o){var s,a;function e(){var t=2<Math.min(n.length,i.length)?Ps:Ds,e=o?qo:Lo;return s=t(n,i,e,r),a=t(i,n,e,go),l}function l(t){return s(t)}l.invert=function(t){return a(t)};l.domain=function(t){return arguments.length?(n=t.map(Number),e()):n};l.range=function(t){return arguments.length?(i=t,e()):i};l.rangeRound=function(t){return l.range(t).interpolate(Do)};l.clamp=function(t){return arguments.length?(o=t,e()):o};l.interpolate=function(t){return arguments.length?(r=t,e()):r};l.ticks=function(t){return qs(n,t)};l.tickFormat=function(t,e){return js(n,t,e)};l.nice=function(t){return Rs(n,t),e()};l.copy=function(){return t(n,i,r,o)};return e()}([0,1],[0,1],go,!1)};var Fs={s:1,g:1,p:1,r:1,e:1};function zs(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}P.scale.log=function(){return function t(e,l,u,c){function h(t){return(u?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(l)}function p(t){return u?Math.pow(l,t):-Math.pow(l,-t)}function o(t){return e(h(t))}o.invert=function(t){return p(e.invert(t))};o.domain=function(t){return arguments.length?(u=0<=t[0],e.domain((c=t.map(Number)).map(h)),o):c};o.base=function(t){return arguments.length?(l=+t,e.domain(c.map(h)),o):l};o.nice=function(){var t=As(c.map(h),u?Math:Bs);return e.domain(t),c=t.map(p),o};o.ticks=function(){var t=Ns(c),e=[],n=t[0],i=t[1],r=Math.floor(h(n)),o=Math.ceil(h(i)),s=l%1?2:l;if(isFinite(o-r)){if(u){for(;r<o;r++)for(var a=1;a<s;a++)e.push(p(r)*a);e.push(p(r))}else for(e.push(p(r));r++<o;)for(var a=s-1;0<a;a--)e.push(p(r)*a);for(r=0;e[r]<n;r++);for(o=e.length;e[o-1]>i;o--);e=e.slice(r,o)}return e};o.tickFormat=function(t,e){if(!arguments.length)return Hs;arguments.length<2?e=Hs:"function"!=typeof e&&(e=P.format(e));var n,i=Math.max(.1,t/o.ticks().length),r=u?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/p(r(h(t)+n))<=i?e(t):""}};o.copy=function(){return t(e.copy(),l,u,c)};return Is(o,e)}(P.scale.linear().domain([0,1]),10,!0,[1,10])};var Hs=P.format(".0e"),Bs={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Us(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}P.scale.pow=function(){return function t(e,n,i){var r=Us(n),o=Us(1/n);function s(t){return e(r(t))}s.invert=function(t){return o(e.invert(t))};s.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(r)),s):i};s.ticks=function(t){return qs(i,t)};s.tickFormat=function(t,e){return js(i,t,e)};s.nice=function(t){return s.domain(Rs(i,t))};s.exponent=function(t){return arguments.length?(r=Us(n=t),o=Us(1/n),e.domain(i.map(r)),s):n};s.copy=function(){return t(e.copy(),n,i)};return Is(s,e)}(P.scale.linear(),1,[0,1])},P.scale.sqrt=function(){return P.scale.pow().exponent(.5)},P.scale.ordinal=function(){return function t(l,u){var r,c,h;function p(t){return c[((r.get(t)||("range"===u.t?r.set(t,l.push(t)):NaN))-1)%c.length]}function f(e,n){return P.range(l.length).map(function(t){return e+n*t})}p.domain=function(t){if(!arguments.length)return l;l=[],r=new _;for(var e,n=-1,i=t.length;++n<i;)r.has(e=t[n])||r.set(e,l.push(e));return p[u.t].apply(p,u.a)};p.range=function(t){return arguments.length?(c=t,h=0,u={t:"range",a:arguments},p):c};p.rangePoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],r=(i-n)/(Math.max(1,l.length-1)+e);return c=f(l.length<2?(n+i)/2:n+r*e/2,r),h=0,u={t:"rangePoints",a:arguments},p};p.rangeBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[i-0],o=t[1-i],s=(o-r)/(l.length-e+2*n);return c=f(r+s*n,s),i&&c.reverse(),h=s*(1-e),u={t:"rangeBands",a:arguments},p};p.rangeRoundBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[i-0],o=t[1-i],s=Math.floor((o-r)/(l.length-e+2*n)),a=o-r-(l.length-e)*s;return c=f(r+Math.round(a/2),s),i&&c.reverse(),h=Math.round(s*(1-e)),u={t:"rangeRoundBands",a:arguments},p};p.rangeBand=function(){return h};p.rangeExtent=function(){return Ns(u.a[0])};p.copy=function(){return t(l,u)};return p.domain(l)}([],{t:"range",a:[[]]})},P.scale.category10=function(){return P.scale.ordinal().range($s)},P.scale.category20=function(){return P.scale.ordinal().range(Ws)},P.scale.category20b=function(){return P.scale.ordinal().range(Vs)},P.scale.category20c=function(){return P.scale.ordinal().range(Ys)};var $s=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ie),Ws=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ie),Vs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ie),Ys=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ie);P.scale.quantile=function(){return function t(n,i){var r;function e(){var t=0,e=i.length;for(r=[];++t<e;)r[t-1]=P.quantile(n,t/e);return o}function o(t){if(!isNaN(t=+t))return i[P.bisect(r,t)]}o.domain=function(t){return arguments.length?(n=t.filter(c).sort(u),e()):n};o.range=function(t){return arguments.length?(i=t,e()):i};o.quantiles=function(){return r};o.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[0<t?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]};o.copy=function(){return t(n,i)};return e()}([],[])},P.scale.quantize=function(){return function t(e,n,i){var r,o;function s(t){return i[Math.max(0,Math.min(o,Math.floor(r*(t-e))))]}function a(){return r=i.length/(n-e),o=i.length-1,s}s.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],a()):[e,n]};s.range=function(t){return arguments.length?(i=t,a()):i};s.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/r+e,t+1/r]};s.copy=function(){return t(e,n,i)};return a()}(0,1,[0,1])},P.scale.threshold=function(){return function t(e,n){function i(t){if(t<=t)return n[P.bisect(e,t)]}i.domain=function(t){return arguments.length?(e=t,i):e};i.range=function(t){return arguments.length?(n=t,i):n};i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]};i.copy=function(){return t(e,n)};return i}([.5],[0,1])},P.scale.identity=function(){return function t(n){function e(t){return+t}e.invert=e;e.domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n};e.ticks=function(t){return qs(n,t)};e.tickFormat=function(t,e){return js(n,t,e)};e.copy=function(){return t(n)};return e}([0,1])},P.svg={},P.svg.arc=function(){var c=Qs,h=Js,p=Xs,f=Zs;function e(){var t=c.apply(this,arguments),e=h.apply(this,arguments),n=p.apply(this,arguments)+Ks,i=f.apply(this,arguments)+Ks,r=(i<n&&(r=n,n=i,i=r),i-n),o=r<bt?"0":"1",s=Math.cos(n),a=Math.sin(n),l=Math.cos(i),u=Math.sin(i);return Gs<=r?t?"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z":t?"M"+e*s+","+e*a+"A"+e+","+e+" 0 "+o+",1 "+e*l+","+e*u+"L"+t*l+","+t*u+"A"+t+","+t+" 0 "+o+",0 "+t*s+","+t*a+"Z":"M"+e*s+","+e*a+"A"+e+","+e+" 0 "+o+",1 "+e*l+","+e*u+"L0,0Z"}return e.innerRadius=function(t){return arguments.length?(c=pe(t),e):c},e.outerRadius=function(t){return arguments.length?(h=pe(t),e):h},e.startAngle=function(t){return arguments.length?(p=pe(t),e):p},e.endAngle=function(t){return arguments.length?(f=pe(t),e):f},e.centroid=function(){var t=(c.apply(this,arguments)+h.apply(this,arguments))/2,e=(p.apply(this,arguments)+f.apply(this,arguments))/2+Ks;return[Math.cos(e)*t,Math.sin(e)*t]},e};var Ks=-xt,Gs=wt-Ct;function Qs(t){return t.innerRadius}function Js(t){return t.outerRadius}function Xs(t){return t.startAngle}function Zs(t){return t.endAngle}function ta(u){var c=br,h=wr,p=hi,f=na,e=f.key,d=.7;function n(t){var e,n=[],i=[],r=-1,o=t.length,s=pe(c),a=pe(h);function l(){n.push("M",f(u(i),d))}for(;++r<o;)p.call(this,e=t[r],r)?i.push([+s.call(this,e,r),+a.call(this,e,r)]):i.length&&(l(),i=[]);return i.length&&l(),n.length?n.join(""):null}return n.x=function(t){return arguments.length?(c=t,n):c},n.y=function(t){return arguments.length?(h=t,n):h},n.defined=function(t){return arguments.length?(p=t,n):p},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?f=t:(f=ea.get(t)||na).key,n):e},n.tension=function(t){return arguments.length?(d=t,n):d},n}P.svg.line=function(){return ta(fe)};var ea=P.map({linear:na,"linear-closed":function(t){return na(t)+"Z"},step:function(t){var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];for(;++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);1<n&&r.push("H",i[0]);return r.join("")},"step-before":ia,"step-after":ra,basis:aa,"basis-open":function(t){if(t.length<4)return na(t);var e,n=[],i=-1,r=t.length,o=[0],s=[0];for(;++i<3;)e=t[i],o.push(e[0]),s.push(e[1]);n.push(la(ha,o)+","+la(ha,s)),--i;for(;++i<r;)e=t[i],o.shift(),o.push(e[0]),s.shift(),s.push(e[1]),pa(n,o,s);return n.join("")},"basis-closed":function(t){var e,n,i=-1,r=t.length,o=r+4,s=[],a=[];for(;++i<4;)n=t[i%r],s.push(n[0]),a.push(n[1]);e=[la(ha,s),",",la(ha,a)],--i;for(;++i<o;)n=t[i%r],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),pa(e,s,a);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],s=t[0][1],a=t[n][0]-o,l=t[n][1]-s,u=-1;++u<=n;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(o+r*a),i[1]=e*i[1]+(1-e)*(s+r*l);return aa(t)},cardinal:function(t,e){return t.length<3?na(t):t[0]+oa(t,sa(t,e))},"cardinal-open":function(t,e){return t.length<4?na(t):t[1]+oa(t.slice(1,t.length-1),sa(t,e))},"cardinal-closed":function(t,e){return t.length<3?na(t):t[0]+oa((t.push(t[0]),t),sa([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?na(t):t[0]+oa(t,function(t){var e,n,i,r,o=[],s=function(t){var e=0,n=t.length-1,i=[],r=t[0],o=t[1],s=i[0]=fa(r,o);for(;++e<n;)i[e]=(s+(s=fa(r=o,o=t[e+1])))/2;return i[e]=s,i}(t),a=-1,l=t.length-1;for(;++a<l;)e=fa(t[a],t[a+1]),R(e)<Ct?s[a]=s[a+1]=0:(n=s[a]/e,i=s[a+1]/e,9<(r=n*n+i*i)&&(r=3*e/Math.sqrt(r),s[a]=r*n,s[a+1]=r*i));a=-1;for(;++a<=l;)r=(t[Math.min(l,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),o.push([r||0,s[a]*r||0]);return o}(t))}});function na(t){return t.join("L")}function ia(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function ra(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function oa(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return na(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],s=e[0],a=s,l=1;if(n&&(i+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],r=t[1],l=2),1<e.length){a=e[1],o=t[l],l++,i+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],a=e[u],i+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}if(n){var c=t[l];i+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+c[0]+","+c[1]}return i}function sa(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],s=t[1],a=1,l=t.length;++a<l;)n=o,o=s,s=t[a],i.push([r*(s[0]-n[0]),r*(s[1]-n[1])]);return i}function aa(t){if(t.length<3)return na(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],s=[r,r,r,(i=t[1])[0]],a=[o,o,o,i[1]],l=[r,",",o,"L",la(ha,s),",",la(ha,a)];for(t.push(t[n-1]);++e<=n;)i=t[e],s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),pa(l,s,a);return t.pop(),l.push("L",i),l.join("")}function la(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}ea.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var ua=[0,2/3,1/3,0],ca=[0,1/3,2/3,0],ha=[0,1/6,2/3,1/6];function pa(t,e,n){t.push("C",la(ua,e),",",la(ua,n),",",la(ca,e),",",la(ca,n),",",la(ha,e),",",la(ha,n))}function fa(t,e){return(e[1]-t[1])/(e[0]-t[0])}function da(t){for(var e,n,i,r=-1,o=t.length;++r<o;)n=(e=t[r])[0],i=e[1]+Ks,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function ma(d){var m=br,g=br,y=0,v=wr,_=hi,b=na,e=b.key,w=b,x="L",C=.7;function n(t){var e,n,i,r=[],o=[],s=[],a=-1,l=t.length,u=pe(m),c=pe(y),h=m===g?function(){return n}:pe(g),p=y===v?function(){return i}:pe(v);function f(){r.push("M",b(d(s),C),x,w(d(o.reverse()),C),"Z")}for(;++a<l;)_.call(this,e=t[a],a)?(o.push([n=+u.call(this,e,a),i=+c.call(this,e,a)]),s.push([+h.call(this,e,a),+p.call(this,e,a)])):o.length&&(f(),o=[],s=[]);return o.length&&f(),r.length?r.join(""):null}return n.x=function(t){return arguments.length?(m=g=t,n):g},n.x0=function(t){return arguments.length?(m=t,n):m},n.x1=function(t){return arguments.length?(g=t,n):g},n.y=function(t){return arguments.length?(y=v=t,n):v},n.y0=function(t){return arguments.length?(y=t,n):y},n.y1=function(t){return arguments.length?(v=t,n):v},n.defined=function(t){return arguments.length?(_=t,n):_},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?b=t:(b=ea.get(t)||na).key,w=b.reverse||b,x=b.closed?"M":"L",n):e},n.tension=function(t){return arguments.length?(C=t,n):C},n}function ga(t){return t.radius}function ya(t){return[t.x,t.y]}function va(){return 64}function _a(){return"circle"}function ba(t){var e=Math.sqrt(t/bt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}P.svg.line.radial=function(){var t=ta(da);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(ia.reverse=ra).reverse=ia,P.svg.area=function(){return ma(fe)},P.svg.area.radial=function(){var t=ma(da);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},P.svg.chord=function(){var r=sr,o=ar,l=ga,u=Xs,c=Zs;function e(t,e){var n=s(this,r,t,e),i=s(this,o,t,e);return"M"+n.p0+a(n.r,n.p1,n.a1-n.a0)+(function(t,e){return t.a0==e.a0&&t.a1==e.a1}(n,i)?h(n.r,n.p1,n.r,n.p0):h(n.r,n.p1,i.r,i.p0)+a(i.r,i.p1,i.a1-i.a0)+h(i.r,i.p1,n.r,n.p0))+"Z"}function s(t,e,n,i){var r=e.call(t,n,i),o=l.call(t,r,i),s=u.call(t,r,i)+Ks,a=c.call(t,r,i)+Ks;return{r:o,a0:s,a1:a,p0:[o*Math.cos(s),o*Math.sin(s)],p1:[o*Math.cos(a),o*Math.sin(a)]}}function a(t,e,n){return"A"+t+","+t+" 0 "+ +(bt<n)+",1 "+e}function h(t,e,n,i){return"Q 0,0 "+i}return e.radius=function(t){return arguments.length?(l=pe(t),e):l},e.source=function(t){return arguments.length?(r=pe(t),e):r},e.target=function(t){return arguments.length?(o=pe(t),e):o},e.startAngle=function(t){return arguments.length?(u=pe(t),e):u},e.endAngle=function(t){return arguments.length?(c=pe(t),e):c},e},P.svg.diagonal=function(){var s=sr,a=ar,l=ya;function e(t,e){var n=s.call(this,t,e),i=a.call(this,t,e),r=(n.y+i.y)/2,o=[n,{x:n.x,y:r},{x:i.x,y:r},i];return"M"+(o=o.map(l))[0]+"C"+o[1]+" "+o[2]+" "+o[3]}return e.source=function(t){return arguments.length?(s=pe(t),e):s},e.target=function(t){return arguments.length?(a=pe(t),e):a},e.projection=function(t){return arguments.length?(l=t,e):l},e},P.svg.diagonal.radial=function(){var t=P.svg.diagonal(),e=ya,n=t.projection;return t.projection=function(t){return arguments.length?n(function(i){return function(){var t=i.apply(this,arguments),e=t[0],n=t[1]+Ks;return[e*Math.cos(n),e*Math.sin(n)]}}(e=t)):e},t},P.svg.symbol=function(){var n=_a,i=va;function e(t,e){return(wa.get(n.call(this,t,e))||ba)(i.call(this,t,e))}return e.type=function(t){return arguments.length?(n=pe(t),e):n},e.size=function(t){return arguments.length?(i=pe(t),e):i},e};var wa=P.map({circle:ba,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Ca)),n=e*Ca;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/xa),n=e*xa/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/xa),n=e*xa/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});P.svg.symbolTypes=wa.keys();var xa=Math.sqrt(3),Ca=Math.tan(30*St);function Ta(t,e){return A(t,ka),t.id=e,t}var Sa,Ea,ka=[],Na=0;function Ma(t,i,r,o){var s=t.id;return it(t,"function"==typeof r?function(t,e,n){t.__transition__[s].tween.set(i,o(r.call(t,t.__data__,e,n)))}:(r=o(r),function(t){t.__transition__[s].tween.set(i,r)}))}function Da(t){return null==t&&(t=""),function(){this.textContent=t}}function Aa(c,h,p,t){var f=c.__transition__||(c.__transition__={active:0,count:0}),d=f[p];if(!d){var m=t.time;d=f[p]={tween:new _,time:m,ease:t.ease,delay:t.delay,duration:t.duration},++f.count,P.timer(function(t){var r=c.__data__,o=d.ease,e=d.delay,s=d.duration,n=be,a=[];if(n.t=e+m,e<=t)return i(t-e);function i(t){if(f.active>p)return u();f.active=p,d.event&&d.event.start.call(c,r,h),d.tween.forEach(function(t,e){(e=e.call(c,r,h))&&a.push(e)}),P.timer(function(){return n.c=l(t||1)?hi:l,1},0,m)}function l(t){if(f.active!==p)return u();for(var e=t/s,n=o(e),i=a.length;0<i;)a[--i].call(c,n);return 1<=e?(d.event&&d.event.end.call(c,r,h),u()):void 0}function u(){return--f.count?delete f[p]:delete c.__transition__,1}n.c=i},0,m)}}ka.call=B.call,ka.empty=B.empty,ka.node=B.node,ka.size=B.size,P.transition=function(t){return arguments.length?Sa?t.transition():t:at.transition()},(P.transition.prototype=ka).select=function(t){var e,n,i,r=this.id,o=[];t=U(t);for(var s=-1,a=this.length;++s<a;){o.push(e=[]);for(var l=this[s],u=-1,c=l.length;++u<c;)(i=l[u])&&(n=t.call(i,i.__data__,u,s))?("__data__"in i&&(n.__data__=i.__data__),Aa(n,u,r,i.__transition__[r]),e.push(n)):e.push(null)}return Ta(o,r)},ka.selectAll=function(t){var e,n,i,r,o,s=this.id,a=[];t=$(t);for(var l=-1,u=this.length;++l<u;)for(var c=this[l],h=-1,p=c.length;++h<p;)if(i=c[h]){o=i.__transition__[s],n=t.call(i,i.__data__,h,l),a.push(e=[]);for(var f=-1,d=n.length;++f<d;)(r=n[f])&&Aa(r,f,s,o),e.push(r)}return Ta(a,s)},ka.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=nt(t));for(var r=0,o=this.length;r<o;r++){i.push(e=[]);for(var s,a=0,l=(s=this[r]).length;a<l;a++)(n=s[a])&&t.call(n,n.__data__,a,r)&&e.push(n)}return Ta(i,this.id)},ka.tween=function(e,n){var i=this.id;return arguments.length<2?this.node().__transition__[i].tween.get(e):it(this,null==n?function(t){t.__transition__[i].tween.remove(e)}:function(t){t.__transition__[i].tween.set(e,n)})},ka.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i="transform"==t?Ro:go,r=P.ns.qualify(t);function o(){this.removeAttribute(r)}function s(){this.removeAttributeNS(r.space,r.local)}return Ma(this,"attr."+t,e,r.local?function(n){return null==n?s:(n+="",function(){var e,t=this.getAttributeNS(r.space,r.local);return t!==n&&(e=i(t,n),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}:function(n){return null==n?o:(n+="",function(){var e,t=this.getAttribute(r);return t!==n&&(e=i(t,n),function(t){this.setAttribute(r,e(t))})})})},ka.attrTween=function(t,i){var r=P.ns.qualify(t);return this.tween("attr."+t,r.local?function(t,e){var n=i.call(this,t,e,this.getAttributeNS(r.space,r.local));return n&&function(t){this.setAttributeNS(r.space,r.local,n(t))}}:function(t,e){var n=i.call(this,t,e,this.getAttribute(r));return n&&function(t){this.setAttribute(r,n(t))}})},ka.style=function(i,t,r){var e=arguments.length;if(e<3){if("string"!=typeof i){for(r in e<2&&(t=""),i)this.style(r,i[r],t);return this}r=""}function o(){this.style.removeProperty(i)}return Ma(this,"style."+i,t,function(n){return null==n?o:(n+="",function(){var e,t=I.getComputedStyle(this,null).getPropertyValue(i);return t!==n&&(e=go(t,n),function(t){this.style.setProperty(i,e(t),r)})})})},ka.styleTween=function(i,r,o){return arguments.length<3&&(o=""),this.tween("style."+i,function(t,e){var n=r.call(this,t,e,I.getComputedStyle(this,null).getPropertyValue(i));return n&&function(t){this.style.setProperty(i,n(t),o)}})},ka.text=function(t){return Ma(this,"text",t,Da)},ka.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},ka.ease=function(e){var n=this.id;return arguments.length<1?this.node().__transition__[n].ease:("function"!=typeof e&&(e=P.ease.apply(P,arguments)),it(this,function(t){t.__transition__[n].ease=e}))},ka.delay=function(i){var r=this.id;return arguments.length<1?this.node().__transition__[r].delay:it(this,"function"==typeof i?function(t,e,n){t.__transition__[r].delay=+i.call(t,t.__data__,e,n)}:(i=+i,function(t){t.__transition__[r].delay=i}))},ka.duration=function(i){var r=this.id;return arguments.length<1?this.node().__transition__[r].duration:it(this,"function"==typeof i?function(t,e,n){t.__transition__[r].duration=Math.max(1,i.call(t,t.__data__,e,n))}:(i=Math.max(1,i),function(t){t.__transition__[r].duration=i}))},ka.each=function(i,n){var r=this.id;if(arguments.length<2){var t=Ea,e=Sa;Sa=r,it(this,function(t,e,n){Ea=t.__transition__[r],i.call(t,t.__data__,e,n)}),Ea=t,Sa=e}else it(this,function(t){var e=t.__transition__[r];(e.event||(e.event=P.dispatch("start","end"))).on(i,n)});return this},ka.transition=function(){for(var t,e,n,i=this.id,r=++Na,o=[],s=0,a=this.length;s<a;s++){o.push(t=[]);for(var l,u=0,c=(l=this[s]).length;u<c;u++)(e=l[u])&&((n=Object.create(e.__transition__[i])).delay+=n.duration,Aa(e,u,r,n)),t.push(e)}return Ta(o,r)},P.svg.axis=function(){var b,w=P.scale.linear(),x=Oa,C=6,T=6,S=3,E=[10],k=null;function n(t){t.each(function(){var t,e=P.select(this),n=this.__chart__||w,i=this.__chart__=w.copy(),r=null==k?i.ticks?i.ticks.apply(i,E):i.domain():k,o=null==b?i.tickFormat?i.tickFormat.apply(i,E):fe:b,s=e.selectAll(".tick").data(r,i),a=s.enter().insert("g",".domain").attr("class","tick").style("opacity",Ct),l=P.transition(s.exit()).style("opacity",Ct).remove(),u=P.transition(s.order()).style("opacity",1),c=Ms(i),h=e.selectAll(".domain").data([0]),p=(h.enter().append("path").attr("class","domain"),P.transition(h));a.append("line"),a.append("text");var f=a.select("line"),d=u.select("line"),m=s.select("text").text(o),g=a.select("text"),y=u.select("text");switch(x){case"bottom":t=Ia,f.attr("y2",C),g.attr("y",Math.max(C,0)+S),d.attr("x2",0).attr("y2",C),y.attr("x",0).attr("y",Math.max(C,0)+S),m.attr("dy",".71em").style("text-anchor","middle"),p.attr("d","M"+c[0]+","+T+"V0H"+c[1]+"V"+T);break;case"top":t=Ia,f.attr("y2",-C),g.attr("y",-(Math.max(C,0)+S)),d.attr("x2",0).attr("y2",-C),y.attr("x",0).attr("y",-(Math.max(C,0)+S)),m.attr("dy","0em").style("text-anchor","middle"),p.attr("d","M"+c[0]+","+-T+"V0H"+c[1]+"V"+-T);break;case"left":t=Ra,f.attr("x2",-C),g.attr("x",-(Math.max(C,0)+S)),d.attr("x2",-C).attr("y2",0),y.attr("x",-(Math.max(C,0)+S)).attr("y",0),m.attr("dy",".32em").style("text-anchor","end"),p.attr("d","M"+-T+","+c[0]+"H0V"+c[1]+"H"+-T);break;case"right":t=Ra,f.attr("x2",C),g.attr("x",Math.max(C,0)+S),d.attr("x2",C).attr("y2",0),y.attr("x",Math.max(C,0)+S).attr("y",0),m.attr("dy",".32em").style("text-anchor","start"),p.attr("d","M"+T+","+c[0]+"H0V"+c[1]+"H"+T)}if(i.rangeBand){var v=i,_=v.rangeBand()/2;n=i=function(t){return v(t)+_}}else n.rangeBand?n=i:l.call(t,i);a.call(t,n),u.call(t,i)})}return n.scale=function(t){return arguments.length?(w=t,n):w},n.orient=function(t){return arguments.length?(x=t in Pa?t+"":Oa,n):x},n.ticks=function(){return arguments.length?(E=arguments,n):E},n.tickValues=function(t){return arguments.length?(k=t,n):k},n.tickFormat=function(t){return arguments.length?(b=t,n):b},n.tickSize=function(t){var e=arguments.length;return e?(C=+t,T=+arguments[e-1],n):C},n.innerTickSize=function(t){return arguments.length?(C=+t,n):C},n.outerTickSize=function(t){return arguments.length?(T=+t,n):T},n.tickPadding=function(t){return arguments.length?(S=+t,n):S},n.tickSubdivide=function(){return arguments.length&&n},n};var Oa="bottom",Pa={top:1,right:1,bottom:1,left:1};function Ia(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Ra(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}P.svg.brush=function(){var v,_,b=q(k,"brushstart","brush","brushend"),w=null,x=null,C=[0,0],T=[0,0],S=!0,E=!0,s=qa[0];function k(t){t.each(function(){var t=P.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(s,fe);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return La[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",k.empty()?"none":null);var i,r=P.transition(t),o=P.transition(e);w&&(i=Ms(w),o.attr("x",i[0]).attr("width",i[1]-i[0]),M(r)),x&&(i=Ms(x),o.attr("y",i[0]).attr("height",i[1]-i[0]),D(r)),N(r)})}function N(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+C[+/e$/.test(t)]+","+T[+/^s/.test(t)]+")"})}function M(t){t.select(".extent").attr("x",C[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",C[1]-C[0])}function D(t){t.select(".extent").attr("y",T[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",T[1]-T[0])}function a(){var h,n,i=this,t=P.select(P.event.target),r=b.of(i,arguments),o=P.select(i),e=t.datum(),s=!/^(n|s)$/.test(e)&&w,a=!/^(e|w)$/.test(e)&&x,p=t.classed("extent"),l=dt(),f=P.mouse(i),u=P.select(I).on("keydown.brush",function(){32==P.event.keyCode&&(p||(h=null,f[0]-=C[1],f[1]-=T[1],p=2),L())}).on("keyup.brush",function(){32==P.event.keyCode&&2==p&&(f[0]+=C[1],f[1]+=T[1],p=0,L())});if(P.event.changedTouches?u.on("touchmove.brush",m).on("touchend.brush",y):u.on("mousemove.brush",m).on("mouseup.brush",y),o.interrupt().selectAll("*").interrupt(),p)f[0]=C[0]-f[0],f[1]=T[0]-f[1];else if(e){var c=+/w$/.test(e),d=+/^n/.test(e);n=[C[1-c]-f[0],T[1-d]-f[1]],f[0]=C[c],f[1]=T[d]}else P.event.altKey&&(h=f.slice());function m(){var t=P.mouse(i),e=!1;n&&(t[0]+=n[0],t[1]+=n[1]),p||(P.event.altKey?(h||(h=[(C[0]+C[1])/2,(T[0]+T[1])/2]),f[0]=C[+(t[0]<h[0])],f[1]=T[+(t[1]<h[1])]):h=null),s&&g(t,w,0)&&(M(o),e=!0),a&&g(t,x,1)&&(D(o),e=!0),e&&(N(o),r({type:"brush",mode:p?"move":"resize"}))}function g(t,e,n){var i,r,o=Ms(e),s=o[0],a=o[1],l=f[n],u=n?T:C,c=u[1]-u[0];if(p&&(s-=l,a-=c+l),i=(n?E:S)?Math.max(s,Math.min(a,t[n])):t[n],p?r=(i+=l)+c:(h&&(l=Math.max(s,Math.min(a,2*h[n]-i))),l<i?(r=i,i=l):r=l),u[0]!=i||u[1]!=r)return n?_=null:v=null,u[0]=i,u[1]=r,!0}function y(){m(),o.style("pointer-events","all").selectAll(".resize").style("display",k.empty()?"none":null),P.select("body").style("cursor",null),u.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),l(),r({type:"brushend"})}o.style("pointer-events","none").selectAll(".resize").style("display",null),P.select("body").style("cursor",t.style("cursor")),r({type:"brushstart"}),m()}return k.event=function(t){t.each(function(){var i=b.of(this,arguments),r={x:C,y:T,i:v,j:_},t=this.__chart__||r;this.__chart__=r,Sa?P.select(this).transition().each("start.brush",function(){v=t.i,_=t.j,C=t.x,T=t.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=yo(C,r.x),n=yo(T,r.y);return v=_=null,function(t){C=r.x=e(t),T=r.y=n(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){v=r.i,_=r.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},k.x=function(t){return arguments.length?(s=qa[!(w=t)<<1|!x],k):w},k.y=function(t){return arguments.length?(s=qa[!w<<1|!(x=t)],k):x},k.clamp=function(t){return arguments.length?(w&&x?(S=!!t[0],E=!!t[1]):w?S=!!t:x&&(E=!!t),k):w&&x?[S,E]:w?S:x?E:null},k.extent=function(t){var e,n,i,r,o;return arguments.length?(w&&(e=t[0],n=t[1],x&&(e=e[0],n=n[0]),v=[e,n],w.invert&&(e=w(e),n=w(n)),n<e&&(o=e,e=n,n=o),e==C[0]&&n==C[1]||(C=[e,n])),x&&(i=t[0],r=t[1],w&&(i=i[1],r=r[1]),_=[i,r],x.invert&&(i=x(i),r=x(r)),r<i&&(o=i,i=r,r=o),i==T[0]&&r==T[1]||(T=[i,r])),k):(w&&(v?(e=v[0],n=v[1]):(e=C[0],n=C[1],w.invert&&(e=w.invert(e),n=w.invert(n)),n<e&&(o=e,e=n,n=o))),x&&(_?(i=_[0],r=_[1]):(i=T[0],r=T[1],x.invert&&(i=x.invert(i),r=x.invert(r)),r<i&&(o=i,i=r,r=o))),w&&x?[[e,i],[n,r]]:w?[e,n]:x&&[i,r])},k.clear=function(){return k.empty()||(C=[0,0],T=[0,0],v=_=null),k},k.empty=function(){return!!w&&C[0]==C[1]||!!x&&T[0]==T[1]},P.rebind(k,b,"on")};var La={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},qa=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],ja=De.format=on.timeFormat,Fa=ja.utc,za=Fa("%Y-%m-%dT%H:%M:%S.%LZ");function Ha(t){return t.toISOString()}function Ba(e,r,t){function s(t){return e(t)}function a(t,e){var n=(t[1]-t[0])/e,i=P.bisect($a,n);return i==$a.length?[r.year,Ls(t.map(function(t){return t/31536e6}),e)[2]]:i?r[n/$a[i-1]<$a[i]/n?i-1:i]:[Ya,Ls(t,e)[2]]}return s.invert=function(t){return Ua(e.invert(t))},s.domain=function(t){return arguments.length?(e.domain(t),s):e.domain().map(Ua)},s.nice=function(e,n){var t=s.domain(),i=Ns(t),r=null==e?a(i,10):"number"==typeof e&&a(i,e);function o(t){return!isNaN(t)&&!e.range(t,Ua(+t+1),n).length}return r&&(e=r[0],n=r[1]),s.domain(As(t,1<n?{floor:function(t){for(;o(t=e.floor(t));)t=Ua(t-1);return t},ceil:function(t){for(;o(t=e.ceil(t));)t=Ua(+t+1);return t}}:e))},s.ticks=function(t,e){var n=Ns(s.domain()),i=null==t?a(n,10):"number"==typeof t?a(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],Ua(+n[1]+1),e<1?1:e)},s.tickFormat=function(){return t},s.copy=function(){return Ba(e.copy(),r,t)},Is(s,e)}function Ua(t){return new Date(t)}ja.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ha:za,Ha.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ha.toString=za.toString,De.second=Ie(function(t){return new Ae(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),De.seconds=De.second.range,De.seconds.utc=De.second.utc.range,De.minute=Ie(function(t){return new Ae(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),De.minutes=De.minute.range,De.minutes.utc=De.minute.utc.range,De.hour=Ie(function(t){var e=t.getTimezoneOffset()/60;return new Ae(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),De.hours=De.hour.range,De.hours.utc=De.hour.utc.range,De.month=Ie(function(t){return(t=De.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),De.months=De.month.range,De.months.utc=De.month.utc.range;var $a=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Wa=[[De.second,1],[De.second,5],[De.second,15],[De.second,30],[De.minute,1],[De.minute,5],[De.minute,15],[De.minute,30],[De.hour,1],[De.hour,3],[De.hour,6],[De.hour,12],[De.day,1],[De.day,2],[De.week,1],[De.month,1],[De.month,3],[De.year,1]],Va=ja.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",hi]]),Ya={range:function(t,e,n){return P.range(Math.ceil(t/n)*n,+e,n).map(Ua)},floor:fe,ceil:fe};Wa.year=De.year,De.scale=function(){return Ba(P.scale.linear(),Wa,Va)};var Ka=Wa.map(function(t){return[t[0].utc,t[1]]}),Ga=Fa.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",hi]]);function Qa(t){return JSON.parse(t.responseText)}function Ja(t){var e=i.createRange();return e.selectNode(i.body),e.createContextualFragment(t.responseText)}return Ka.year=De.year.utc,De.scale.utc=function(){return Ba(P.scale.linear(),Ka,Ga)},P.text=de(function(t){return t.responseText}),P.json=function(t,e){return me(t,"application/json",Qa,e)},P.html=function(t,e){return me(t,"text/html",Ja,e)},P.xml=de(function(t){return t.responseXML}),P}()},{}],238:[function($,n,i){(function(B,U){var t,e;t=this,e=function(){"use strict";function u(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,e=void 0,r=void 0,s=function(t,e){p[i]=t,p[i+1]=e,2===(i+=2)&&(r?r(f):v())};var t="undefined"!=typeof window?window:void 0,o=t||{},a=o.MutationObserver||o.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==B&&"[object process]"==={}.toString.call(B),c="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(f,1)}}var p=new Array(1e3);function f(){for(var t=0;t<i;t+=2){(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0}i=0}var d,m,g,y,v=void 0;function _(t,e){var n=this,i=new this.constructor(x);void 0===i[w]&&q(i);var r=n._state;if(r){var o=arguments[r-1];s(function(){return R(r,i,o,n._result)})}else P(n,i,t,e);return i}function b(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(x);return M(e,t),e}v=l?function(){return B.nextTick(f)}:a?(m=0,g=new a(f),y=document.createTextNode(""),g.observe(y,{characterData:!0}),function(){y.data=m=++m%2}):c?((d=new MessageChannel).port1.onmessage=f,function(){return d.port2.postMessage(0)}):void 0===t&&"function"==typeof $?function(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(f)}:h()}catch(t){return h()}}():h();var w=Math.random().toString(36).substring(2);function x(){}var C=void 0,T=1,S=2,E={error:null};function k(t){try{return t.then}catch(t){return E.error=t,E}}function N(t,e,n){e.constructor===t.constructor&&n===_&&e.constructor.resolve===b?function(e,t){t._state===T?A(e,t._result):t._state===S?O(e,t._result):P(t,void 0,function(t){return M(e,t)},function(t){return O(e,t)})}(t,e):n===E?(O(t,E.error),E.error=null):void 0===n?A(t,e):u(n)?function(t,i,r){s(function(e){var n=!1,t=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(r,i,function(t){n||(n=!0,i!==t?M(e,t):A(e,t))},function(t){n||(n=!0,O(e,t))},e._label);!n&&t&&(n=!0,O(e,t))},t)}(t,e,n):A(t,e)}function M(t,e){t===e?O(t,new TypeError("You cannot resolve a promise with itself")):!function(t){var e=typeof t;return null!==t&&("object"==e||"function"==e)}(e)?A(t,e):N(t,e,k(e))}function D(t){t._onerror&&t._onerror(t._result),I(t)}function A(t,e){t._state===C&&(t._result=e,t._state=T,0!==t._subscribers.length&&s(I,t))}function O(t,e){t._state===C&&(t._state=S,t._result=e,s(D,t))}function P(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+T]=n,r[o+S]=i,0===o&&t._state&&s(I,t)}function I(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,o=t._result,s=0;s<e.length;s+=3)i=e[s],r=e[s+n],i?R(n,i,r,o):r(o);t._subscribers.length=0}}function R(t,e,n,i){var r=u(n),o=void 0,s=void 0,a=void 0,l=void 0;if(r){if((o=function(t,e){try{return t(e)}catch(t){return E.error=t,E}}(n,i))===E?(l=!0,s=o.error,o.error=null):a=!0,e===o)return void O(e,new TypeError("A promises callback cannot return that same promise."))}else o=i,a=!0;e._state!==C||(r&&a?M(e,o):l?O(e,s):t===T?A(e,o):t===S&&O(e,o))}var L=0;function q(t){t[w]=L++,t._state=void 0,t._result=void 0,t._subscribers=[]}var j=(F.prototype._enumerate=function(t){for(var e=0;this._state===C&&e<t.length;e++)this._eachEntry(t[e],e)},F.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===b){var r=k(e);if(r===_&&e._state!==C)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===z){var o=new n(x);N(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},F.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===C&&(this._remaining--,t===S?O(i,n):this._result[e]=n),0===this._remaining&&A(i,this._result)},F.prototype._willSettleAt=function(t,e){var n=this;P(t,void 0,function(t){return n._settledAt(T,e,t)},function(t){return n._settledAt(S,e,t)})},F);function F(t,e){this._instanceConstructor=t,this.promise=new t(x),this.promise[w]||q(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&A(this.promise,this._result))):O(this.promise,new Error("Array Methods must be provided an Array"))}var z=(H.prototype.catch=function(t){return this.then(null,t)},H.prototype.finally=function(e){var n=this.constructor;return u(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},H);function H(t){this[w]=L++,this._result=this._state=void 0,this._subscribers=[],x!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof H?function(e,t){try{t(function(t){M(e,t)},function(t){O(e,t)})}catch(t){O(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return z.prototype.then=_,z.all=function(t){return new j(this,t).promise},z.race=function(r){var o=this;return n(r)?new o(function(t,e){for(var n=r.length,i=0;i<n;i++)o.resolve(r[i]).then(t,e)}):new o(function(t,e){return e(new TypeError("You must pass an array to race."))})},z.resolve=b,z.reject=function(t){var e=new this(x);return O(e,t),e},z._setScheduler=function(t){r=t},z._setAsap=function(t){s=t},z._asap=s,z.polyfill=function(){var t=void 0;if(void 0!==U)t=U;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=z},z.Promise=z},"object"==typeof i&&void 0!==n?n.exports=e():t.ES6Promise=e()}).call(this,$("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:275}],239:[function(t,e,n){(function(){n.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],240:[function(n,t,i){(function(){var u,o,c,h,t,p,f,d,m,g,y,v,_,b,w,e;c=n("url"),o=n("JSONStream"),g=n("http"),u=n("./constants").ACCEPT_HEADER,t=n("./version").VERSION,e=w=n("./util"),d=e.error,f=e.defer,y=e.merge,e.invoke,h="node-http/imjs-"+t,i.supports=function(){return!0},b=function(t,i,r){return function(t){var e,n;return null==t.pipe?r(new Error("response is not a stream")):(t.on("error",r),null!=t.statusCode&&200!==t.statusCode?((e=o.parse("error")).pause(),t.pipe(e),r([t.statusCode,e])):((n=o.parse("results.*")).pause(),t.pipe(n),i(n)))}},m=function(t,e,n,i){return"Could not parse response to "+t.type+" "+t.url+': "'+e+'" ('+i+": "+n+")"},p=function(l,u,c){return function(s){var a;return a="",s.on("data",function(t){return a+=t}),s.on("error",c),s.on("end",function(){var t,e,n,i,r,o;if(null!=(null!=s?s.headers:void 0)&&(t=s.headers["content-type"]),"application/json"!==t&&!/json/.test(l.dataType)&&!/json/.test(l.data.format))return(i=a.match(/\[ERROR\] (\d+)([\s\S]*)/))?c(new Error(i[2])):(200<=(o=s.statusCode)&&o<400?u:c)(a);if(""===a&&200===s.statusCode)return u();try{return(n=(r=JSON.parse(a)).error)?c(new Error(n)):u(r)}catch(t){return e=t,400<=s.statusCode?c(new Error(s.statusCode)):c(new Error(m(l,a,e,s.statusCode)))}})}},i.iterReq=function(c,h,p){return function(t,e,n,i,r){var o,s,a,l,u;return null==e&&(e={}),null==n&&(n=function(){}),null==i&&(i=function(){}),null==r&&(r=function(){}),w.isFunction(e)&&(e=(u=[{},e,n,i])[0],n=u[1],i=u[2],r=u[3]),l=y({format:p},e,{query:t.toXML()}),o=function(t){return t.on("data",n),t.on("error",i),t.on("end",r),setTimeout(function(){if(null!=t.resume)return t.resume()},3),t},a=function(t){var e,n;return n=t[0],(e=t[1]).on("data",i),e.on("error",i),e.on("end",r),null!=e.resume&&e.resume(),d(n)},(s=this.makeRequest(c,h,l,null,!0)).then(o,a),s}},_=function(t,e,n){var i;return i=setTimeout(function(){return e("Request timed out.")},t),n.then(function(){return cancelTimeout(i)})},v=function(t){var e,n,i,r,o,s,a,l;if(!t.url)throw new Error("No url provided in "+JSON.stringify(t));if("string"==typeof t.data){if(i=t.data,"GET"===(s=t.type)||"DELETE"===s)throw new Error("Invalid request. "+t.type+" requests must not have bodies")}else i=w.querystring(t.data);if((n=c.parse(t.url,!0)).withCredentials=!1,n.method=t.type||"GET",null!=t.port&&(n.port=t.port),n.headers={"User-Agent":h,Accept:u[t.dataType]},("GET"===(a=n.method)||"DELETE"===a)&&(null!=i?i.length:void 0)?(r=/\?/.test(n.path)?"&":"?",n.path+=r+i,i=null):(n.headers["Content-Type"]=(t.contentType||"application/x-www-form-urlencoded")+"; charset=UTF-8",n.headers["Content-Length"]=i.length),null!=t.headers)for(e in l=t.headers)o=l[e],n.headers[e]=o;return null!=t.auth&&(n.auth=t.auth),[n,i]},i.doReq=function(e,t){var n,i,r,o,s,a,l,u,c,h;r=(c=f()).promise,a=c.resolve,o=c.reject,r.then(null,e.error);try{h=v(e),u=h[0],i=h[1],n=(t?b:p)(e,a,o),(s=g.request(u,n)).on("error",function(t){return o(new Error("Error: "+u.method+" "+e.url+": "+t))}),null!=i&&s.write(i),s.end(),0<(l=e.timeout)&&_(l,o,r)}catch(t){o(t)}return r}}).call(this)},{"./constants":239,"./util":251,"./version":252,JSONStream:232,http:295,url:301}],241:[function(T,t,S){(function(){function n(t,e){return function(){return t.apply(e,arguments)}}var i,r,o,t,h,s,e,a,l,u,c,p,f,d,m,g,y,v,_={}.hasOwnProperty,b=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function w(t){var e,n;for(e in t)_.call(t,e)&&(n=t[e],this[e]=n)}function x(t){var e,n;for(e in t)_.call(t,e)&&(n=t[e],this[e]=n)}function C(t,e){this.uid=t,this.service=e,this.del=n(this.del,this),this.fetchResults=n(this.fetchResults,this),this.fetchErrorMessage=n(this.fetchErrorMessage,this),this.fetchStatus=n(this.fetchStatus,this)}a=T("./util"),c=S,p=a.uniqBy,s=a.difference,h=a.defer,f=a.withCB,u=a.id,l=a.get,e=a.fold,t=a.concatMap,w.prototype.getStats=function(t){return null!=t?this.stats[t]:this.stats},d=t(l("matches")),w.prototype.getMatches=function(t){var e;return"MATCH"===t?this.matches[t]:null!=(e=d(this.matches[t]))?e:[]},w.prototype.getMatchIds=function(t){return null!=t?this.getMatches(t).map(l("id")):this.allMatchIds()},w.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},w.prototype.allMatchIds=function(){var n;return e((n=this,function(t,e){return t.concat(n.getMatchIds(e))}))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},i=w,v=p(u),m=t(u),g=function(n){var i,r;return m(function(){var t,e;for(i in e=[],t=n.identifiers)r=t[i],e.push(r);return e}())},y=function(t,e){return null==e||0<=b.call(g(t),e)},x.prototype.getStats=function(t){switch(t){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},x.prototype.getIdentifierStats=function(){var t,e,n;return e=(n=function(i){var r,o;return v(m(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(function(){var t;for(r in t=[],null!=o?o.identifiers:void 0)t.push(r);return t}());return n}()))})(this.getMatches("MATCH")),t=n(this.getMatches()),{matches:e.length,all:t.length,issues:s(t,e).length}},x.prototype.getObjectStats=function(){var e;return{matches:this.goodMatchIds().length,all:this.allMatchIds().length,issues:function(){var t;for(u in t=[],this)_.call(this,u)&&(e=this[u],b.call(g(e),"MATCH")<0&&t.push(u));return t}.call(this).length}},x.prototype.getMatches=function(t){var e,n;for(u in n=[],this)_.call(this,u)&&(e=this[u],y(e,t)&&n.push(e));return n},x.prototype.getMatchIds=function(t){var e,n;for(u in n=[],this)_.call(this,u)&&(e=this[u],y(e,t)&&n.push(u));return n},x.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},x.prototype.allMatchIds=function(){return this.getMatchIds()},o=x,C.prototype.fetchStatus=function(t){return f(t,this.service.get("ids/"+this.uid+"/status").then(l("status")))},C.prototype.fetchErrorMessage=function(t){return f(t,this.service.get("ids/"+this.uid+"/status").then(l("message")))},C.prototype.fetchResults=function(t){var n;return n=this.service.get("ids/"+this.uid+"/result").then(l("results")),this.service.fetchVersion().then(function(e){return n.then(function(t){return 16<=e?new i(t):new o(t)})})},C.prototype.del=function(t){return f(t,this.service.makeRequest("DELETE","ids/"+this.uid))},C.prototype.decay=50,C.prototype.poll=function(t,e,n){var i,r,o,s,a,l,u,c;return o=(u=h()).promise,a=u.resolve,s=u.reject,o.then(t,e),r=null!=n?n:function(){},(l=this.fetchStatus()).then(null,s),i=this.decay,this.decay=Math.min(6e4,1.25*i),l.then((c=this,function(t){switch(r(t),t){case"SUCCESS":return c.fetchResults().then(a,s);case"ERROR":return c.fetchErrorMessage().then(s,s);default:return setTimeout(function(){return c.poll(a,s,r)},i)}})),o},(r=C).prototype.wait=r.prototype.poll,r.create=function(e){return function(t){return new r(t,e)}},c.IDResolutionJob=r,c.CategoryResults=i,c.IdResults=o}).call(this)},{"./util":251}],242:[function(m,t,g){(function(){function r(t,e){return function(){return t.apply(e,arguments)}}var t,e,c,o,n,h,s,i,p,f,a,l={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function u(t,e){var n,i;for(n in this.service=e,this._updateTags=r(this._updateTags,this),this.hasTag=r(this.hasTag,this),t)l.call(t,n)&&(i=t[n],this[n]=i);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(s).map(o)}p=m("./util"),n=g,i=p.merge,f=p.withCB,c=p.get,h=p.invoke,p.REQUIRES_VERSION,p.set,e=p.dejoin,s=function(t){return"__folder__"===t.substr(0,t.indexOf(":"))},o=function(t){return t.substr(t.indexOf(":")+1)},u.prototype.hasTag=function(t){return 0<=d.call(this.tags,t)},u.prototype.query=function(t){return null==t&&(t=["*"]),this.service.query({select:t,from:this.type,where:[[this.type,"IN",this.name]]})},u.prototype.del=function(t){return this.service.makeRequest("DELETE","lists",{name:this.name},t)},a=function(t){return t.tags},u.prototype._updateTags=function(t,e){if(null==t)return this.tags=e.slice(),this.folders=this.tags.filter(s).map(o)},u.prototype.fetchTags=function(t){return f(this._updateTags,t,this.service.makeRequest("GET","list/tags",{name:this.name}).then(a))},u.prototype.addTags=function(t,e){var n;return n={name:this.name,tags:t},f(this._updateTags,e,this.service.makeRequest("POST","list/tags",n).then(a))},u.prototype.removeTags=function(t,e){var n;return n={name:this.name,tags:t},f(this._updateTags,e,this.service.makeRequest("DELETE","list/tags",n).then(a))},u.prototype.contents=function(t){return f(t,this.query().then(e).then(h("records")))},u.prototype.rename=function(t,e){var n,i;return n=this.service.post("lists/rename",{oldname:this.name,newname:t}).then(c("listName")).then((i=this,function(t){return i.name=t})).then(this.service.fetchList),f(e,n)},u.prototype.copy=function(t,e){var n,i,r,o,s,a,l,u;return null==t&&(t={}),null==e&&(e=function(){}),1===arguments.length&&p.isFunction(t)&&(t=(s=[{},t])[0],e=s[1]),"string"==typeof t&&(t={name:t}),i=n=null!=(a=t.name)?a:this.name+"_copy",o=this.tags.concat(null!=(l=t.tags)?l:[]),r=this.query(["id"]),f(e,this.service.fetchLists().then(h("map",c("name"))).then((u=this,function(t){var e;for(e=1;0<=d.call(t,i);)i=n+"-"+e++;return r.then(h("saveAsList",{name:i,tags:o,description:u.description}))})))},u.prototype.enrichment=function(t,e){return this.service.enrichment(i({list:this.name},t),e)},u.prototype.shareWithUser=function(t,e){return f(e,this.service.post("lists/shares",{list:this.name,with:t}))},u.prototype.inviteUserToShare=function(t,e,n){return null==e&&(e=!0),null==n&&(n=function(){}),f(n,this.service.post("lists/invitations",{list:this.name,to:t,notify:!!e}))},t=u,n.List=t}).call(this)},{"./util":251}],243:[function(h,t,p){(function(){function r(t,e){return function(){return t.apply(e,arguments)}}var o,e,n,s,a,t,l,i,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function c(t){var e,n,i;this.name=t.name,e=t.classes,this.findCommonType=r(this.findCommonType,this),this.findSharedAncestor=r(this.findSharedAncestor,this),this.getAncestorsOf=r(this.getAncestorsOf,this),this.getSubclassesOf=r(this.getSubclassesOf,this),this.getPathInfo=r(this.getPathInfo,this),n=l((i=this,function(t,e){return[t,new s(e,i)]})),this.classes=n(e),this.classes["java.lang.Object"]=o}s=h("./table").Table,n=h("./path").PathInfo,(i=h("./util")).flatten,a=i.find,i.error,l=i.omap,t=p,o=new s({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),c.prototype.getPathInfo=function(t,e){return n.parse(this,t,e)},c.prototype.getSubclassesOf=function(t){var e,n,i,r,o,s;if(null==(n=t&&t.name?t:this.classes[t]))throw new Error(t+" is not a table");for(r in i=[n.name],o=this.classes)e=o[r],s=n.name,0<=u.call(e.parents(),s)&&(i=i.concat(this.getSubclassesOf(e)));return i},c.prototype.getAncestorsOf=function(t){var e,n,i,r;if(null==(e=t&&t.name?t:this.classes[t]))throw new Error(t+" is not a table");return(n=e.parents()).filter((r=this,function(t){return r.classes[t]})).reduce((i=this,function(t,e){return t.concat(i.getAncestorsOf(e))}),n)},c.prototype.findSharedAncestor=function(t,e){var n,i;return null===e||null===t?null:t===e?t:(n=this.getAncestorsOf(t),0<=u.call(n,e)?e:(i=this.getAncestorsOf(e),0<=u.call(i,t)?t:a(n,function(t){return 0<=u.call(i,t)})))},c.prototype.findCommonType=function(t){return null==t&&(t=[]),t.reduce(this.findSharedAncestor)},(e=c).prototype.makePath=e.prototype.getPathInfo,e.prototype.findCommonTypeOfMultipleClasses=e.prototype.findCommonType,e.load=function(t){try{return new e(t)}catch(t){throw new Error("Error loading model: "+t)}},e.INTEGRAL_TYPES=["int","Integer","long","Long"],e.FRACTIONAL_TYPES=["double","Double","float","Float"],e.NUMERIC_TYPES=e.INTEGRAL_TYPES.concat(e.FRACTIONAL_TYPES),e.BOOLEAN_TYPES=["boolean","Boolean"],t.Model=e}).call(this)},{"./path":244,"./table":249,"./util":251}],244:[function(v,t,_){(function(){function i(t,e){return function(){return t.apply(e,arguments)}}var s,p,f,t,a,l,u,c,e,d,h,m,n,g,r=[].slice,o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function y(t){var e,n;this.root=t.root,this.model=t.model,this.descriptors=t.descriptors,this.subclasses=t.subclasses,this.displayName=t.displayName,this.ident=t.ident,this.allDescriptors=i(this.allDescriptors,this),this.getChildNodes=i(this.getChildNodes,this),this.getDisplayName=i(this.getDisplayName,this),this.isa=i(this.isa,this),this.append=i(this.append,this),this.getParent=i(this.getParent,this),this.getEndClass=i(this.getEndClass,this),this.containsCollection=i(this.containsCollection,this),this.isCollection=i(this.isCollection,this),this.isReverseReference=i(this.isReverseReference,this),this.isReference=i(this.isReference,this),this.isClass=i(this.isClass,this),this.isAttribute=i(this.isAttribute,this),this.isRoot=i(this.isRoot,this),n=this.descriptors,this.mid=2<=n.length?r.call(n,0,e=n.length-1):(e=0,[]),this.end=n[e++],null==this.ident&&(this.ident=d(this.model,this,this.subclasses))}e=_,n=v("./util"),g=n.withCB,a=n.concatMap,c=n.get,t=n.any,h=n.set,l=n.copy,m=n.success,u=n.error,s={},p={},d=function(t,e,n){var i,r,o;return(null!=t?t.name:void 0)+"|"+(null!=t&&null!=(o=t.service)?o.root:void 0)+"|"+e+":"+function(){var t;for(i in t=[],n)r=n[i],t.push(i+"="+r);return t}()},y.prototype.isRoot=function(){return 0===this.descriptors.length},y.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},y.prototype.isClass=function(){return this.isRoot()||this.isReference()},y.prototype.isReference=function(){var t;return null!=(null!=(t=this.end)?t.referencedType:void 0)},y.prototype.isReverseReference=function(){var t,e,n,i,r;return!!(this.isReference()&&0<this.mid.length)&&(i=(r=this.end).reverseReference,n=r.referencedType,t=(e=this.getParent()).getParent(),null!=n&&t.isa(n)&&e.end.name===i)},y.prototype.isCollection=function(){var t,e;return null!=(t=null!=(e=this.end)?e.isCollection:void 0)&&t},y.prototype.containsCollection=function(){return t(this.descriptors,function(t){return t.isCollection})},y.prototype.getEndClass=function(){var t;return this.model.classes[this.subclasses[this.toString()]||(null!=(t=this.end)?t.referencedType:void 0)]||this.root},y.prototype.getParent=function(){if(this.isRoot())throw new Error("Root paths do not have parents");return new y({root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses})},y.prototype.append=function(t){var e;if(this.isAttribute())throw new Error(this+" is an attribute.");if(null==(e="string"==typeof t?this.getType().fields[t]:t))throw new Error(t+" is not a field of "+this.getType());return new y({root:this.root,model:this.model,descriptors:this.descriptors.concat([e]),subclasses:this.subclasses})},y.prototype.isa=function(t){var e,n;return null!=t&&(this.isAttribute()?this.getType()===t:(e=t.name?t.name:""+t)===(n=this.getType()).name||0<=o.call(this.model.getAncestorsOf(n),e))},y.prototype.getDisplayName=function(t){var e,n,i,r,o;return(n=this.displayName)?m(n):(null==this.namePromise&&(this.namePromise=(e=s[this.ident])?m(e):this.isRoot()&&this.root.displayName?m(this.root.displayName):null==this.model.service?u("No service"):(r="model"+a(function(t){return"/"+t.name})(this.allDescriptors()),i=h({format:"json"})(l(this.subclasses)),this.model.service.get(r,i).then(c("display")).then((o=this,function(t){var e;return null!=s[e=o.ident]?s[e]:s[e]=t})))),g(t,this.namePromise))},y.prototype.getChildNodes=function(){var t,e,n,i,r;for(e in r=[],i=(null!=(n=this.getEndClass())?n.fields:void 0)||{})t=i[e],r.push(this.append(t));return r},y.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},y.prototype.toString=function(){return this.allDescriptors().map(c("name")).join(".")},y.prototype.equals=function(t){return this===t||this.ident&&(null!=t?t.ident:void 0)===this.ident},y.prototype.getType=function(){var t,e;return(null!=(t=this.end)&&null!=(e=t.type)?e.replace(/java\.lang\./,""):void 0)||this.getEndClass()},(f=y).prototype.toPathString=f.prototype.toString,f.parse=function(r,o,s){var t,a,e,l,n,u,c,h,i;return null==s&&(s={}),n=d(r,o,s),(t=p[n])?t:(h=(o+"").split("."),i=a=r.classes[h.shift()],u=i.name,e=function(){var t,e,n,i;for(i=[],t=0,e=h.length;t<e;t++){if(c=h[t],!(l=(null!=a?a.fields[c]:void 0)||(null!=(n=a=r.classes[s[u]])?n.fields[c]:void 0)))throw new Error("Could not find "+c+" in "+a+" when parsing "+o);u+="."+c,a=r.classes[l.type||l.referencedType],i.push(l)}return i}(),p[n]=new f({root:i,model:r,descriptors:e,subclasses:s,ident:n}))},f.flushCache=function(){return p={},s={}},e.PathInfo=f}).call(this)},{"./util":251}],245:[function(e,n,t){(function(){var t;t=e("es6-promise").Promise,n.exports=t}).call(this)},{"es6-promise":254}],246:[function(ut,t,ct){(function(){function _(t,e){return function(){return t.apply(e,arguments)}}var e,u,t,s,l,a,n,i,r,o,c,h,p,f,d,m,g,y,v,b,w,x,C,T,S,E,k,N,M,D,A,O,P,I,R,L,q,j,F,z,H,B,U,$,W,V,Y,K,G,Q,J,X,Z,tt,et,nt,it,rt,ot=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},st=[].slice,at={}.hasOwnProperty;function lt(t,e,n){var i,r,o,s,a,l,u,c,h,p,f,d,m,g,y,v;for(i=(l=null!=n?n:{}).model,o=l.summaryFields,this.addConstraint=_(this.addConstraint,this),this.expandStar=_(this.expandStar,this),this.adjustPath=_(this.adjustPath,this),this.select=_(this.select,this),null==t&&(t={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=H.copy(null!=(u=null!=(h=t.displayNames)?h:t.aliases)?u:{}),s=0,a=(p=["name","title","comment","description","type"]).length;s<a;s++)null!=t[r=p[s]]&&(this[r]=t[r]);this.service=null!=e?e:{},this.model=null!=(f=null!=i?i:t.model)?f:{},this.summaryFields=null!=(d=null!=o?o:t.summaryFields)?d:{},this.root=null!=(m=t.root)?m:t.from,this.maxRows=null!=(g=null!=(y=t.size)?y:t.limit)?g:t.maxRows,this.start=null!=(v=null!=(c=t.start)?c:t.offset)?v:0,this.select(t.views||t.view||t.select||[]),this.addConstraints(t.constraints||t.where||[]),this.addJoins(t.joins||t.join||[]),this.orderBy(t.sortOrder||t.orderBy||[]),null!=t.constraintLogic&&(this.constraintLogic=t.constraintLogic),this.on("change:views",I,this)}for(t=ut("backbone-events-standalone"),(S=ct).xml=ut("./xml"),H=ut("./util"),a=H.REQUIRES_VERSION,B=H.withCB,N=H.merge,y=H.filter,P=H.partition,v=H.fold,f=H.concatMap,C=H.id,b=H.get,H.invoke,j=H.querystring,w=function(t){var e;if(!(e=null!=(null!=t?t.toLowerCase:void 0)?l.OP_DICT[t.toLowerCase()]:null))throw new Error("Illegal constraint operator: "+t);return e},i=(e=["path","op","code"]).concat(["value","extraValue"]),n=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],s=function(t){return H.compose(t.fetchList,b("listName"))},u=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],m=function(t){return null==t&&(t=""),t.substr(t.indexOf("."))},p=function(t){return null!=t?"<value>"+H.escape(t)+"</value>":"<nullValue/>"},o=function(e,n){var i,r;return function(){var t;for(i in t=[],e)r=e[i],0<=ot.call(n,i)&&t.push(i+'="'+H.escape(r)+'" ');return t}().join("")},O=function(t){return"<constraint "+o(t,e)+"/>"},F=function(t){return"<constraint "+o(t,["path","type"])+"/>"},R=function(t){return"<constraint "+o(t,i)+"/>"},D=function(t){return"<constraint "+o(t,e)+">"+f(p)(t.values)+"</constraint>"},T=function(t){return"<constraint "+o(t,e)+'ids="'+t.ids.join(",")+'"/>'},c=function(t){var e;return null!=t.values?D(t):null!=t.ids?T(t):null==t.op?F(t):(e=t.op,0<=ot.call(l.NULL_OPS,e)?O(t):R(t))},x=function(t){return t.replace(/^[^\.]+\./,"")},d=function(t){var e,n,i,r,o,s,a,l,u,c,h;return s=t.path,u=t.type,o=t.op,c=t.value,h=t.values,i=t.extraValue,r=t.ids,e=t.code,n=t.editable,l=t.switched,a=t.switchable,r=null!=r?r.slice():void 0,h=null!=h?h.slice():void 0,A({path:s,type:u,op:o,value:c,values:h,extraValue:i,ids:r,code:e,editable:n,switched:l,switchable:a})},h=function(t){var e;return(e=d(t)).path=x(e.path),e},A=function(t){var e;for(e in t)null==t[e]&&delete t[e];return t},g=function(t,e){return"Did not remove a single constraint. original = "+t+", reduced = "+e},k=function(t,e){var n,i,r,o,s,a;if(n={path:t},null===e)n.op="IS NULL";else if(H.isArray(e))n.op="ONE OF",n.values=e;else if("string"==(s=typeof e)||"number"==s||"boolean"==s)a="function"==typeof e.toUpperCase?e.toUpperCase():void 0,0<=ot.call(l.NULL_OPS,a)?n.op=e:(n.op="=",n.value=e);else if(r=function(){var t;for(i in t=[],e)e[i],t.push(i);return t}(),0<=ot.call(r,"isa"))H.isArray(e.isa)?(n.op=i,n.values=e.isa):n.type=e.isa;else for(i in 0<=ot.call(r,"extraValue")&&(n.extraValue=e.extraValue),e)o=e[i],"extraValue"!==i&&(n.op=i,H.isArray(o)?n.values=o:n.value=o);return n},E=function(t){var e,n,i,r;return n={path:(t=t.slice()).shift()},1===t.length?(r="function"==typeof(e=t[0]).toUpperCase?e.toUpperCase():void 0,0<=ot.call(l.NULL_OPS,r)?n.op=e:n.type=e):2<=t.length&&(n.op=t[0],i=t[1],H.isArray(i)?n.values=i:n.value=i,3===t.length&&(n.extraValue=t[2])),n},q=function(i){var r;return function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r.path+" "+r.direction);return n}().join(" ")},L=function(t){var e,i,n,r,o,s,a;if(null==t)return[];for(i=t.split(/\s+/),a=[],o=0,s=(n=function(){var t,e,n;for(n=[],r=t=0,e=i.length/2;0<=e?t<e:e<t;r=0<=e?++t:--t)n.push(2*r);return n}()).length;o<s;o++)e=n[o],a.push([i[e],i[e+1]]);return a},I=function(){var i,r;if(r=this.sortOrder,this.sortOrder=function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],this.isRelevant(i.path)&&n.push(i);return n}.call(this),r.length!==this.sortOrder.length)return this.trigger("change:sortorder change:orderby",this.sortOrder.slice())},lt.JOIN_STYLES=["INNER","OUTER"],lt.BIO_FORMATS=["gff3","fasta","bed"],lt.NULL_OPS=["IS NULL","IS NOT NULL"],lt.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],lt.MULTIVALUE_OPS=["ONE OF","NONE OF"],lt.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],lt.TERNARY_OPS=["LOOKUP"],lt.LOOP_OPS=["=","!="],lt.LIST_OPS=["IN","NOT IN"],lt.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF",in:"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},tt=["name","view","sortOrder","constraintLogic","title","description","comment"],J=["path","type","op","code","value","ids"],nt=function(t,e){var n,i,r,o;for(o=[],i=0,r=e.length;i<r;i++)n=e[i],t.hasAttribute(n)&&o.push([n,t.getAttribute(n)]);return o},X=function(t,e){var n,i,r,o,s;for(s=[],i=0,r=(o=t.getElementsByTagName(e)).length;i<r;i++)n=o[i],s.push(n);return s},rt=function(e){return function(t){return t.getAttribute(e)}},lt.fromXML=function(t){var c,e,r,o,n,h,s;if(e=S.xml.parse(t),!(h=X(e,"query")[0]||X(e,"template")[0]))throw new Error("no query in xml");return o=rt("path"),s=rt("style"),(n=H.pairsToObj(nt(h,tt))).view=n.view.split(/\s+/),n.sortOrder=L(n.sortOrder),n.joins=function(){var t,e,n,i;for(i=[],t=0,e=(n=X(h,"join")).length;t<e;t++)r=n[t],"OUTER"===s(r)&&i.push(o(r));return i}(),n.constraints=function(){var t,e,n,i,r,o,s,a,l,u;for(i=[],t=0,e=(n=X(h,"constraint")).length;t<e;t++)c=n[t],i.push((r=c,u=l=a=s=o=void 0,null!=(o=H.pairsToObj(nt(r,J))).ids&&(o.ids=function(){var t,e,n,i;for(i=[],t=0,e=(n=o.ids.split(",")).length;t<e;t++)u=n[t],i.push(parseInt(u,10));return i}()),(l=X(r,"value")).length&&(o.values=function(){var t,e,n;for(n=[],t=0,e=l.length;t<e;t++)a=l[t],n.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=a.childNodes).length;t<e;t++)s=n[t],i.push(s.data);return i}().join(""));return n}()),o));return i}(),n},lt.prototype.constraints=[],lt.prototype.views=[],lt.prototype.joins={},lt.prototype.constraintLogic="",lt.prototype.sortOrder="",lt.prototype.name=null,lt.prototype.title=null,lt.prototype.comment=null,lt.prototype.description=null,lt.prototype.removeFromSelect=function(o){var i,s,r,a;return null==o&&(o=[]),o=H.stringList(o),i=H.compose(this.expandStar,this.adjustPath),o=H.flatten(function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)r=o[t],n.push(i(r));return n}()),this.sortOrder=function(){var t,e,n,i,r;for(r=[],t=0,e=(n=this.sortOrder).length;t<e;t++)i=(s=n[t]).path,0<=ot.call(o,i)||r.push(s);return r}.call(this),this.views=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.views).length;t<e;t++)a=n[t],0<=ot.call(o,a)||i.push(a);return i}.call(this),this.trigger("remove:view",o),this.trigger("change:views",this.views),this.trigger("change",this.views)},lt.prototype.removeConstraint=function(i,t){var r,o,s,e;if(null==t&&(t=!1),s=this.constraints,o="string"==typeof i?function(t){return t.code===i}:function(t){var e,n;return t.path===i.path&&t.op===i.op&&t.value===i.value&&t.extraValue===i.extraValue&&i.type===t.type&&(null!=(e=t.values)?e.join("%%"):void 0)===(null!=(n=i.values)?n.join("%%"):void 0)},(e=function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)r=s[t],o(r)||n.push(r);return n}()).length!==s.length-1)throw new Error(g(s,e));if(this.constraints=e,!t)return this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",H.find(s,o))},lt.prototype.addToSelect=function(i,t){var e,r,o,s,a,l,n,u;if(null==i&&(i=[]),null==t&&(t={}),i=H.stringList(i),r=H.compose(this.expandStar,this.adjustPath),s=H.flatten(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)a=i[t],n.push(r(a));return n}()),(e=function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)o=s[t],0<=ot.call(this.views,o)&&n.push(o);return n}.call(this)).length)throw new Error(e+" already in the select list");if((e=function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)o=s[t],1<function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)(l=s[t])===o&&n.push(l);return n}().length&&n.push(o);return n}()).length)throw new Error(e+" specified multiple times as arguments to addToSelect");return(n=this.views).push.apply(n,s),t.silent?t.events=(null!=(u=t.events)?u:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",s),this.trigger("change")),this},lt.prototype.select=function(t,e){var n,i;i=this.views.slice();try{this.views=[],this.addToSelect(t,e)}catch(t){n=t,this.views=i,H.error(n)}return this},lt.prototype.adjustPath=function(t){return t=t&&t.name?t.name:""+t,null!=this.root?t.match("^"+this.root)||(t=this.root+"."+t):this.root=t.split(".")[0],t},lt.prototype.getPossiblePaths=function(t,l,e){var u,n,i,r,o,c;return null==t&&(t=3),null==l&&(l=!0),null==e&&(e=null),r="string"==typeof e?function(t){return t[e]()}:e,u=function(e,n){var i,r,o,t,s,a;return s=c.getPathInfo(e),!l&&s.isReverseReference()?[]:s.isAttribute()?[s]:(i=s.getType(),a=f(function(t){return u(e+"."+t.name,n-1)}),t=i&&0<n?a(function(){var t,e;for(o in e=[],t=i.fields)r=t[o],e.push(r);return e}()):[],[s].concat(t))},n=t+"-"+l,null==(c=this)._possiblePaths&&(this._possiblePaths={}),i=(null!=(o=this._possiblePaths)[n]?o[n]:o[n]=u(this.root,t)).slice(),null!=r?i.filter(r):i},lt.prototype.makePath=lt.prototype.getPathInfo=function(t){var e,n,i;return e=this.adjustPath(t),(n=null!=(i=this.model)&&"function"==typeof i.getPathInfo?i.getPathInfo(e,this.getSubclasses()):void 0)&&e in this.displayNames&&(n.displayName=this.displayNames[e]),n},it=function(t){return[t.path,t.type]},et=H.compose(H.pairsToObj,H.map(it),y(b("type"))),lt.prototype.getSubclasses=function(){return et(this.constraints)},lt.prototype.getType=function(t){return this.getPathInfo(t).getType()},lt.prototype.getViewNodes=function(){var r,o,e;return e=this,o=function(t){return e.getPathInfo(t).getParent()},H.uniqBy(String,function(){var t,e,n,i;for(i=[],t=0,e=(n=this.views).length;t<e;t++)r=n[t],i.push(o(r));return i}.call(this))},lt.prototype.isInView=function(t){var e,n,i;if(!(e=this.getPathInfo(t)))throw new Error("Invalid path: "+t);return e.isAttribute()?(i=e.toString(),0<=ot.call(this.views,i)):(n=e.toString(),H.any(this.getViewNodes(),function(t){return t.toString()===n}))},lt.prototype.isConstrained=function(t,e){var n,i,r;if(null==e&&(e=!1),!(n=this.getPathInfo(t)))throw new Error("Invalid path: "+t);return i=function(t){return null!=t.op&&t.path===n.toString()},!n.isAttribute()&&e&&(r=this,i=function(t){return null!=t.op&&(t.path===n.toString()||n.equals(r.getPathInfo(t.path).getParent()))}),H.any(this.constraints,i)},lt.prototype.canHaveMultipleValues=function(t){return this.getPathInfo(t).containsCollection()},lt.prototype.getQueryNodes=function(){var r,t,o,e;return e=this.getViewNodes(),t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.constraints).length;t<e;t++)null==(r=n[t]).type&&((o=this.getPathInfo(r.path)).isAttribute()?i.push(o.getParent()):i.push(o));return i}.call(this),H.uniqBy(String,e.concat(t))},lt.prototype.isInQuery=function(t){var r,e,n,i,o,s;if(e=this.getPathInfo(t)){for(n=e.toPathString(),i=0,o=(s=this.views.concat(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.constraints).length;t<e;t++)null==(r=n[t]).type&&i.push(r.path);return i}.call(this))).length;i<o;i++)if(0===(t=s[i]).indexOf(n))return!0;return!1}return!0},lt.prototype.isRelevant=function(t){var e,n,i;return(n=this.getPathInfo(t)).isAttribute()&&(n=n.getParent()),i=n.toString(),e=this.getViewNodes(),H.any(e,function(t){return t.toPathString()===i})},lt.prototype.expandStar=function(t){var e,r,n,o,s,i,a,l;if(/\*$/.test(t))if(a=t.substr(0,t.lastIndexOf(".")),n=function(t){return a+t},r=this.getType(a),/\.\*$/.test(t)){if(r&&this.summaryFields[r.name])return o=H.compose(n,m),function(){var t,e,n,i;for(i=[],t=0,e=(n=this.summaryFields[r.name]).length;t<e;t++)s=n[t],this.hasView(s)||i.push(o(s));return i}.call(this)}else if(/\.\*\*$/.test(t))return l=this.expandStar(a+".*"),e=function(){var t;for(i in t=[],r.attributes)t.push(n("."+i));return t}(),H.uniqBy(C,l.concat(e));return t},lt.prototype.isOuterJoin=function(t){return"OUTER"===this.joins[this.adjustPath(t)]},lt.prototype.hasView=function(t){var e;return this.views&&(e=this.adjustPath(t),0<=ot.call(this.views,e))},lt.prototype.count=function(t){if(this.service.count)return this.service.count(this,t);throw new Error("This query has no service with count functionality attached.")},lt.prototype.appendToList=function(n,t){var e,i,r,o;return o=(null!=n?n.name:void 0)?(e=n.name,function(t,e){if(null==t)return n.size=e.size}):(e=String(n),null),r={listName:e,query:this.makeListQuery().toXML()},i=s(this.service),B(o,t,this.service.post("query/append/tolist",r).then(i))},lt.prototype.selectPreservingImpliedConstraints=function(t){var e,n,i,r,o;for(null==t&&(t=[]),(n=this.clone()).select(t),i=0,r=(o=this.getViewNodes()).length;i<r;i++)e=o[i],this.isOuterJoined(e)||n.isInView(e||n.isConstrained(e))||null==e.getEndClass().fields.id||n.addConstraint([e.append("id"),"IS NOT NULL"]);return n},lt.prototype.makeListQuery=function(){var t,e;return 1===(t=this.views.slice()).length&&(null!=(e=t[0])?e.match(/\.id$/):void 0)||(t=["id"]),this.selectPreservingImpliedConstraints(t)},lt.prototype.saveAsList=function(t,e){var n,i;return i=this.makeListQuery(),(n=H.copy(t)).listName=n.listName||n.name,n.query=i.toXML(),t.tags&&(n.tags=t.tags.join(";")),B(e,this.service.post("query/tolist",n).then(s(this.service)))},lt.prototype.summarise=function(t,e,n){return this.filterSummary(t,"",e,n)},lt.prototype.summarize=function(){var t;return t=1<=arguments.length?st.call(arguments,0):[],this.summarise.apply(this,t)},Z=function(t){var e,n,i,r,o,s,a;for(e=null!=(null!=(s=t.results[0])?s.max:void 0),r=0,o=(a=t.results).length;r<o;r++)(n=a[r]).count=parseInt(n.count,10);return i={uniqueValues:t.uniqueValues,filteredCount:t.filteredCount},e&&(i=N(i,t.results[0])),t.stats=i,t},lt.prototype.filterSummary=function(t,e,n,i){var r,o,s;return null==i&&(i=function(){}),H.isFunction(n)&&(i=(s=[n,null])[0],n=s[1]),t=this.adjustPath(t),o=this.clone(),ot.call(o.views,t)<0&&o.views.push(t),r={query:o.toXML(),summaryPath:t,format:"jsonrows"},n&&(r.size=n),e&&(r.filterTerm=e),B(i,this.service.post("query/results",r).then(Z))},lt.prototype.clone=function(t){var e,n,i,r;if(null==(e=new lt(this,this.service))._callbacks&&(e._callbacks={}),t){for(n in r=this._callbacks)at.call(r,n)&&(i=r[n],e._callbacks[n]=i);e.off("change:views",I,this)}return e},lt.prototype.next=function(){var t;return t=this.clone(),this.maxRows&&(t.start=this.start+this.maxRows),t},lt.prototype.previous=function(){var t;return t=this.clone(),this.maxRows?t.start=this.start-this.maxRows:t.start=0,t},lt.prototype.getSortDirection=function(t){var n,e;if(n=this.adjustPath(t),!this.isInQuery(n)&&!this.isRelevant(n))throw new Error(t+" is not in the query");return null!=(e=H.find(this.sortOrder,function(t){var e;return e=t.path,n===e}))?e.direction:void 0},lt.prototype.isOuterJoined=function(t){var e,n;for(e in t=this.adjustPath(t),n=this.joins)if("OUTER"===n[e]&&0===t.indexOf(e))return!0;return!1},lt.prototype.getOuterJoin=function(e){var t,n,i;return e=this.adjustPath(e),t=function(){var t;for(n in t=[],this.joins)t.push(n);return t}.call(this).sort(function(t,e){return e.length-t.length}),H.find(t,(i=this,function(t){return"OUTER"===i.joins[t]&&0===e.indexOf(t)}))},lt.prototype._parse_sort_order=function(t){var e,n,i,r,o;if(null==t)throw new Error("No input");if("string"==typeof t)r={path:t,direction:"ASC"};else if(H.isArray(t))r={path:i=t[0],direction:e=t[1]};else if(null==t.path){for(n in t)i=(o=[n,t[n]])[0],e=o[1];r={path:i,direction:e}}else r={path:i=t.path,direction:e=t.direction};return r.path=this.adjustPath(r.path),null==r.direction&&(r.direction="ASC"),r.direction=r.direction.toUpperCase(),r},lt.prototype.addOrSetSortOrder=function(e){var t;return e=this._parse_sort_order(e),null==(t=this.getSortDirection(e.path))?this.addSortOrder(e):t!==e.direction&&(H.find(this.sortOrder,function(t){return t.path===e.path}).direction=e.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},lt.prototype.addSortOrder=function(t,e){var n;if(n=(null!=e?e:{}).silent,this.sortOrder.push(this._parse_sort_order(t)),!n)return this.trigger("add:sortorder",t),this.trigger("change:sortorder",this.sortOrder),this.trigger("change")},lt.prototype.orderBy=function(t,e){var n,o,i,r,s,a,l,u;for(null==e&&(e={}),r=this.sortOrder.slice(),this.sortOrder=[],a=0,l=t.length;a<l;a++)i=t[a],this.addSortOrder(this._parse_sort_order(i),{silent:!0});return n=function(){var t,e,n,i,r;for(r=[],t=0,e=(n=this.sortOrder).length;t<e;t++)i=n[t],s=i.path,o=i.direction,r.push({path:s,direction:o});return r}.call(this),this.trigger("set:sortorder",n),q(r)!==this.getSorting()&&(e.silent?e.events=(null!=(u=e.events)?u:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",n),this.trigger("change"))),this},lt.prototype.addJoins=function(t){var e,n,i,r,o,s,a;if(H.isArray(t)){for(s=[],r=0,o=t.length;r<o;r++)e=t[r],s.push(this.addJoin(e));return s}for(n in a=[],t)i=t[n],a.push(this.addJoin({path:n,style:i}));return a},lt.prototype.addJoin=function(t){return"string"==typeof t&&(t={path:t,style:"OUTER"}),this.setJoinStyle(t.path,t.style)},lt.prototype.setJoinStyle=function(t,e){if(null==e&&(e="OUTER"),t=this.adjustPath(t),e=e.toUpperCase(),ot.call(lt.JOIN_STYLES,e)<0)throw new Error("Invalid join style: "+e);return this.joins[t]!==e&&(this.joins[t]=e,this.trigger("change:joins",{path:t,style:e}),this.trigger("change")),this},lt.prototype.addConstraints=function(t,n){var e,i,r,o,s,a,l;if(null==n&&(n="and"),this.__silent__=!0,i=this.constraintLogic,H.isArray(t))for(s=0,a=t.length;s<a;s++)e=t[s],this.addConstraint(e,n);else for(r in l=this,o=function(t,e){return l.addConstraint(k(t,e),n)},t)o(r,t[r]);return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),i!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},lt.prototype.addConstraint=function(t,e){var i,n,r,o,s,a,l;if(null==e&&(e="and"),"and"!==e&&"or"!==e)throw new Error("Unknown logical conjunction: "+e);return"OFF"===(t=H.isArray(t)?E(t):d(t)).switched||(t.path=this.adjustPath(t.path),null==t.type&&(t.op=w(t.op)),this.constraints.push(t),r="or"===e||0<(null!=(l=this.constraintLogic)?l.length:void 0),o=this.constraints.length,a=this.constraintLogic,r&&(s=2===o?u[0]+" "+e+" "+u[1]:((n=this.constraintLogic)||(n=function(){var t,e,n;for(n=[],i=t=0,e=o-2;0<=e?t<=e:e<=t;i=0<=e?++t:--t)n.push(u[i]);return n}().join(" and ")),"("+n+") "+e+" "+u[o-1]),this.constraintLogic=s),this.__silent__||(this.trigger("add:constraint",t),this.trigger("change:constraints"),a!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change"))),this},lt.prototype.getSorting=function(){return q(this.sortOrder)},lt.prototype.getConstraintXML=function(){var r,t;return(t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.constraints).length;t<e;t++)null!=(r=n[t]).type&&!this.isInQuery(r.path)||i.push(r);return i}.call(this)).length?f(c)(f(C)(P(function(t){return null!=t.type})(t))):""},lt.prototype.getJoinXML=function(){var n,i;return function(){var t,e;for(n in e=[],t=this.joins)i=t[n],this.isInQuery(n)&&"OUTER"===i&&e.push('<join path="'+n+'" style="OUTER"/>');return e}.call(this).join("")},lt.prototype.toXML=function(){var e,n,i;return e={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(e.name=this.name),"<query "+function(){var t;for(n in t=[],e)(i=e[n])&&t.push(n+'="'+i+'"');return t}().join(" ")+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},lt.prototype.toJSON=function(){var r,o,s,a;return A({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var t,e,n,i;for(i=[],t=0,e=(n=this.views).length;t<e;t++)a=n[t],i.push(x(a));return i}.call(this),orderBy:function(){var t,e,n,i,r;for(r=[],t=0,e=(n=this.sortOrder).length;t<e;t++)i=n[t],s=i.path,o=i.direction,r.push({path:x(s),direction:o});return r}.call(this),joins:function(){var t,e;for(s in e=[],t=this.joins)"OUTER"===t[s]&&e.push(x(s));return e}.call(this),where:function(){var t,e,n,i;for(i=[],t=0,e=(n=this.constraints).length;t<e;t++)r=n[t],i.push(h(r));return i}.call(this)})},lt.prototype.fetchCode=function(t,e){var n;return n={query:this.toXML(),lang:t},B(e,this.service.post("query/code",n).then(this.service.VERIFIER).then(b("code")))},lt.prototype.setName=function(t){this.name=t},lt.prototype.save=function(n,i){return a(this.service,16,(r=this,function(){var t,e;return H.isFunction(n)&&(n=(e=[null,n])[0],i=e[1]),null!=n&&r.setName(n),t={type:"PUT",path:"user/queries",data:r.toXML(),contentType:"application/xml",dataType:"json"},B(i,r.service.authorise(t)).then(function(t){return r.service.doReq(t)}).then(function(t){return t.queries})}));var r},lt.prototype.store=function(r,o){return a(this.service,16,(s=this,function(){var t,e,n,i;return H.isFunction(r)&&(r=(i=[null,r])[0],o=i[1]),null!=r&&s.setName(r),n=function(t,e){if(null==t)return s.setName(e)},t=H.compose(b(s.name),b("queries")),e={type:"POST",path:"user/queries",data:s.toXML(),contentType:"application/xml",dataType:"json"},B(o,n,s.service.authorise(e)).then(function(t){return s.service.doReq(t)}).then(t)}));var s},lt.prototype.saveAsTemplate=function(n,i){return a(this.service,16,(r=this,function(){var t,e;if(H.isFunction(n)&&(n=(e=[null,n])[0],i=e[1]),null!=n&&r.setName(n),!r.name)throw new Error("Templates must have a name");return t={type:"POST",path:"templates",data:"<template "+o(r,["name","title","comment"])+">"+r.toXML()+"</template>",contentType:"application/xml",dataType:"json"},B(i,r.service.authorise(t).then(function(t){return r.service.doReq(t)}))}));var r},lt.prototype.getCodeURI=function(t){var e,n;return e={query:this.toXML(),lang:t,format:"text"},null!=(null!=(n=this.service)?n.token:void 0)&&(e.token=this.service.token),this.service.root+"query/code?"+j(e)},lt.prototype.getExportURI=function(t,e){var n,i;return null==t&&(t="tab"),null==e&&(e={}),0<=ot.call(lt.BIO_FORMATS,t)?this["get"+t.toUpperCase()+"URI"](e):(n=N(e,{query:this.toXML(),format:t}),null!=(null!=(i=this.service)?i.token:void 0)&&(n.token=this.service.token),this.service.root+"query/results?"+j(n))},lt.prototype.needsAuthentication=function(){return H.any(this.constraints,function(t){var e;return"NOT IN"===(e=t.op)||"IN"===e})},lt.prototype.fetchQID=function(t){return B(t,this.service.post("queries",{query:this.toXML()}).then(b("id")))},Q=function(t){return t.append("primaryIdentifier").toString()},lt.prototype.__bio_req=function(t,r){var o,e;return e=this.makeListQuery(),o=function(e){return H.any(t,function(t){return e.isa(t)})},e.views=H.take(r)(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getViewNodes()).length;t<e;t++)r=n[t],o(r)&&i.push(Q(r));return i}.call(this)),{query:e.toXML(),format:"text"}},lt.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},lt.prototype._bed_req=lt.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},l=lt,z=v(function(t,e){return t.concat(e)}),l.prototype.toString=l.prototype.toXML,l.ATTRIBUTE_OPS=z([l.ATTRIBUTE_VALUE_OPS,l.MULTIVALUE_OPS,l.NULL_OPS]),l.REFERENCE_OPS=z([l.TERNARY_OPS,l.LOOP_OPS,l.LIST_OPS]),r=function(l,u){return function(r,t){var e,n,i,o,s,a;return null==r&&(r={}),null==t&&(t=function(){}),H.isFunction(r)&&(r=(s=[{},r])[0],t=s[1]),a=this,e=function(t){var e;return(e=a.getPathInfo(t)).isAttribute()?e:e.append("id")},null!=(null!=r?r.view:void 0)&&(r.view=function(){var t,e,n,i;for(i=[],t=0,e=(n=r.view).length;t<e;t++)o=n[t],i.push(this.getPathInfo(o).toString());return i}.call(this)),n=null!=r.export?this.selectPreservingImpliedConstraints(r.export.map(e)):this,i=N(n[l](),r),u.call(n,i,t)}},U=function(n){var t,e,i;return e="_"+n+"_req",i=(t="get"+n.toUpperCase())+"URI",l.prototype[t]=r(e,function(t,e){return B(e,this.service.post("query/results/"+n,t))}),l.prototype[i]=r(e,function(t,e){return null!=this.service.token&&(t.token=this.service.token),this.service.root+"query/results/"+n+"?"+j(t)})},W=0,Y=(G=l.BIO_FORMATS).length;W<Y;W++)U(G[W]);for($=function(r){return function(){var t,e,i,n;if(e=arguments[0],t=2<=arguments.length?st.call(arguments,1):[],this.service[r])return null==e?e={}:H.isFunction(e)&&(e={},t=function(){var t,e,n;for(n=[],t=0,e=arguments.length;t<e;t++)i=arguments[t],n.push(i);return n}.apply(this,arguments)),e=A(N({start:this.start,size:this.maxRows},e)),(n=this.service)[r].apply(n,[this,e].concat(st.call(t)));throw new Error("Service does not provide '"+r+"'.")}},V=0,K=n.length;V<K;V++)M=n[V],l.prototype[M]=$(M);t.mixin(l.prototype),l.prototype.emit=l.prototype.trigger,l.prototype.bind=l.prototype.on,S.Query=l}).call(this)},{"./util":251,"./xml":253,"backbone-events-standalone":234}],247:[function(ut,t,ct){(function(){function n(t,e){return function(){return t.apply(e,arguments)}}var i,e,r,o,s,a,l,u,h,c,p,f,d,m,g,y,t,v,_,b,w,x,C,T,S,E,k,N,M,D,A,O,P,I,R,L,q,j,F,z,H,B,U,$,W,V,Y,K,G,Q,J,X,Z,tt,et,nt,it,rt,ot,st={}.hasOwnProperty,at=[].slice;for(t=ut("./promise"),f=ut("./model").Model,_=ut("./query").Query,c=ut("./lists").List,N=ut("./user").User,l=ut("./id-resolution-job").IDResolutionJob,V=ut("./version"),W=ut("./util"),q=ut("./http"),$=W.querystring,Y=W.withCB,F=W.map,z=W.merge,R=W.get,B=W.set,j=W.invoke,U=W.success,I=W.error,x=W.REQUIRES_VERSION,P=W.dejoin,M={},e={},b={},p={},S={},A={},"http://","templates","lists",o="list/enrichment",O="listswithobject",u={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},C="lists/subtract",D="user/whoami",(v="query/results")+"/tablerows",y="user/preferences","user/tokens","ids",m={},G=0,J=(Z=["version",w="version/release","classkeys","widgets","model",T="summaryfields","search",g="path/values"]).length;G<J;G++)m[H=Z[G]]=!0;for(i={},Q=0,X=(tt=[D,y,u,C,O,o,"templates","user/tokens"]).length;Q<X;Q++)i[H=tt[Q]]=!0;function lt(t){var e;if(this.root=t.root,this.token=t.token,this.errorHandler=t.errorHandler,this.DEBUG=t.DEBUG,this.help=t.help,e=t.noCache,this.headers=t.headers,this.connectAs=n(this.connectAs,this),this.createList=n(this.createList,this),this.resolveIds=n(this.resolveIds,this),this.templateQuery=n(this.templateQuery,this),this.savedQuery=n(this.savedQuery,this),this.query=n(this.query,this),this.fetchRelease=n(this.fetchRelease,this),this.fetchClassKeys=n(this.fetchClassKeys,this),this.fetchVersion=n(this.fetchVersion,this),this.fetchSummaryFields=n(this.fetchSummaryFields,this),this.fetchModel=n(this.fetchModel,this),this.fetchWidgetMap=n(this.fetchWidgetMap,this),this.fetchWidgets=n(this.fetchWidgets,this),this.complement=n(this.complement,this),this.fetchListsContaining=n(this.fetchListsContaining,this),this.fetchList=n(this.fetchList,this),this.findLists=n(this.findLists,this),this.fetchLists=n(this.fetchLists,this),this.fetchTemplates=n(this.fetchTemplates,this),this.tableRows=n(this.tableRows,this),this.values=n(this.values,this),this.rows=n(this.rows,this),this.records=n(this.records,this),this.table=n(this.table,this),this.pathValues=n(this.pathValues,this),this.fetchUser=n(this.fetchUser,this),this.whoami=n(this.whoami,this),this.findById=n(this.findById,this),this.count=n(this.count,this),this.enrichment=n(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");s.test(this.root)||(this.root="http://"+this.root),a.test(this.root)||(this.root=this.root+"/service/"),this.root=this.root.replace(/ice$/,"ice/"),null==this.headers&&(this.headers=null),null==this.errorHandler&&(this.errorHandler=r),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!e,this.getFormat=function(t){return null==t&&(t="json"),t}}d=function(t,e){return!m[t]&&(!!i[t]||(null==e||!e.needsAuthentication||e.needsAuthentication()))},s=/^https?:\/\//i,a=/service\/?$/i,r=function(t){var e;return(null!=(e=console.error)?e:console.log)(t)},K=function(t,e,n,i,r){var o,s,a,l,u;return a=this.root,l=this.useCache,s=null!=this[t]?this[t]:this[t]=l&&(u=e[a])?U(u):(o={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(z(o,{url:this.root+n})).then(function(t){return e[a]=t[i]})),Y(r,s)},L=function(r){return function(i){return new t(function(t,e){var n;return(n=W.find(i,function(t){return t.name===r}))?t(n):e('List "'+r+'" not found among: '+i.map(R("name")))})}},h=function(t,e){return null==e&&(e="listName"),W.compose(t.fetchList,R(e))},k=function(t){var e,n,i,r,o,s;for(null==t&&(t=[]),s=[],n=0,i=(r=W.isArray(t)?t:[t]).length;n<i;n++)e=r[n],s.push(null!=(o=e.name)?o:e);return s},lt.prototype.doReq=function(){return arguments[0]=this.attachCustomHeaders(arguments[0]),q.doReq.apply(this,arguments)},lt.prototype.post=function(t,e){return this.makeRequest("POST",t,e)},lt.prototype.get=function(t,e){return this.makeRequest("GET",t,e)},lt.prototype.makeRequest=function(t,e,n,i,r){var o,s,a,l,u,c,h,p;return null==t&&(t="GET"),null==e&&(e=""),null==n&&(n={}),null==i&&(i=function(){}),null==r&&(r=!1),W.isArray(i)&&(i=(u=i)[0],s=u[1]),W.isArray(n)&&(n=W.pairsToObj(n)),null==s&&(s=this.errorHandler),n=W.copy(n),o=this.getFormat(n.format),q.supports(t)||(c=[t,q.getMethod(t)],n.method=c[0],t=c[1]),a={data:n,dataType:o,success:i,error:s,path:e,type:t},null!=n.auth&&(a.auth=n.auth,delete a.data.auth),null!=n.headers&&(a.headers=W.copy(n.headers),delete a.data.headers),(l=null!=(h=n.timeout)?h:this.timeout)&&(a.timeout=l,delete n.timeout),this.authorise(a).then((p=this,function(t){return p.doReq(t,r)}))},lt.prototype.authorise=function(r){return this.fetchVersion().then((o=this,function(t){var e,n,i;return null==(e=W.copy(r)).headers&&(e.headers={}),e.url=o.root+e.path,n=[],t<14&&("string"==typeof e.data?n.push(["format",e.dataType]):e.data.format=e.dataType),null!=o.token&&d(r.path,null!=(i=e.data)?i.query:void 0)&&(14<=t?e.headers.Authorization="Token "+o.token:"string"==typeof e.data?n.push(["token",o.token]):e.data.token=o.token),n.length&&(e.url+="?"+$(n)),e}));var o},lt.prototype.attachCustomHeaders=function(t){var e;return null!=this.headers?((e=W.copy(t)).headers=W.merge(e.headers,this.headers),e):t},lt.prototype.enrichment=function(e,n){return x(this,8,(i=this,function(){var t;return t=z({maxp:.05,correction:"Holm-Bonferroni"},e),Y(n,i.get(o,t).then(R("results")))}));var i},lt.prototype.search=function(r,o){return null==r&&(r={}),null==o&&(o=function(){}),x(this,9,(s=this,function(){var t,e,n,i;if(W.isFunction(r)&&(o=(i=[r,{}])[0],r=i[1]),"string"==typeof r)e={q:r};else for(t in e={q:r.q,start:r.start,size:r.size},r)st.call(r,t)&&(n=r[t],"q"!==t&&"start"!==t&&"size"!==t&&(e["facet_"+t]=n));return Y(o,s.post("search",e))}));var s},lt.prototype.makePath=function(e,n,t){return null==n&&(n={}),null==t&&(t=function(){}),Y(t,this.fetchModel().then(function(t){return t.makePath(e,n)}))},lt.prototype.count=function(e,t){var n,i,r;return null==t&&(t=function(){}),n=e?null!=e.toPathString?(H=e.isClass()?e.append("id"):e,this.pathValues(H,"count")):null!=e.toXML?(i={query:e,format:"jsoncount"},this.post(v,i).then(R("count"))):"string"==typeof e?this.fetchModel().then((r=this,function(t){try{return r.count(t.makePath(e))}catch(t){return r.query({select:[e]}).then(r.count)}})):this.query(e).then(this.count):I("Not enough arguments"),Y(t,n)},lt.prototype.findById=function(t,e,n,i){var r,o;return null==n&&(n=["**"]),null==i&&(i=function(){}),W.isFunction(n)&&(n=(o=[["**"],n])[0],i=o[1]),r=this.query({from:t,select:n,where:{id:e}}).then(P).then(j("records")).then(R(0)),Y(i,r)},lt.prototype.lookup=function(t,e,n,i){var r,o;return W.isFunction(n)&&(n=(o=[null,n])[0],i=o[1]),r=this.query({from:t,select:["**"],where:[[t,"LOOKUP",e,n]]}).then(P).then(j("records")),Y(i,r)},lt.prototype.find=function(t,e,n,i){var r;return W.isFunction(n)&&(n=(r=[null,n])[0],i=r[1]),Y(i,this.lookup(t,e,n).then(function(t){return null==t||0===t.length?I("Nothing found"):1<t.length?I("Multiple items found: "+t.slice(0,3)+"..."):U(t[0])}))},lt.prototype.whoami=function(t){return x(this,9,(e=this,function(){return Y(t,e.get(D).then(R("user")).then(function(t){return new N(e,t)}))}));var e},lt.prototype.fetchUser=function(){var t;return t=1<=arguments.length?at.call(arguments,0):[],this.whoami.apply(this,t)},rt=function(t,e){return{format:t,path:String(e),typeConstraints:JSON.stringify(e.subclasses)}},lt.prototype.pathValues=function(r,o,s){return null==o&&(o={}),x(this,6,(a=this,function(){var n,t,i,e;return"string"==typeof o&&(i=o,o={}),W.isFunction(o)&&(o=(e=[s,o])[0],s=e[1]),"count"!==i&&(i="results"),n="count"===i?"jsoncount":"json",t=function(){var t,e;try{return this.fetchModel().then(j("makePath",r,null!=(t=r.subclasses)?t:o)).then(function(t){return rt(n,t)}).then((e=this,function(t){return e.post(g,t)})).then(R(i))}catch(t){return I(t)}}.call(a),Y(s,t)}));var a},lt.prototype.doPagedRequest=function(t,e,n,i,r){var o,s,a;return null==n&&(n={}),null==r&&(r=function(){}),null!=t.toXML?(W.isFunction(n)&&(r=(s=[n,{}])[0],n=s[1]),o=z(n,{query:t,format:i}),Y(r,this.post(e,o).then(R("results")))):this.query(t).then((a=this,function(t){return a.doPagedRequest(t,e,n,i,r)}))},lt.prototype.table=function(t,e,n){return this.doPagedRequest(t,v,e,"jsontable",n)},lt.prototype.records=function(t,e,n){return this.doPagedRequest(t,v,e,"jsonobjects",n)},lt.prototype.rows=function(t,e,n){return this.doPagedRequest(t,v,e,"json",n)},lt.prototype.values=function(t,e,n){var i,r,o;return W.isFunction(e)&&(n=(r=[e,n])[0],e=r[1]),i=null==t?I("No query term supplied"):null!=t.descriptors||"string"==typeof t?this.pathValues(t,e).then(F(R("value"))):null!=t.toXML?1!==t.views.length?I("Expected one column, got "+t.views.length):this.rows(t,e).then(F(R(0))):this.query(t).then((o=this,function(t){return o.values(t,e)})),Y(n,i)},lt.prototype.tableRows=function(t,e,n){return this.doPagedRequest(t,"query/results/tablerows",e,"json",n)},lt.prototype.fetchTemplates=function(t){return Y(t,this.get("templates").then(R("templates")))},lt.prototype.fetchLists=function(t){return this.findLists("",t)},lt.prototype.findLists=function(n,i){return null==n&&(n=""),null==i&&(i=function(){}),this.fetchVersion().then((o=this,function(t){var e;return Y(i,n&&t<13?I("Finding lists by name on the server requires version 13. This is only "+t):(e=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(new c(e,o));return r},o.get("lists",{name:n}).then(R("lists")).then(e)))}));var o},lt.prototype.fetchList=function(e,n){return this.fetchVersion().then((i=this,function(t){return Y(n,t<13?i.findLists().then(L(e)):i.findLists(e).then(R(0)))}));var i},lt.prototype.fetchListsContaining=function(t,e){var n,o;return n=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(new c(e,o));return r},Y(e,(o=this).get(O,t).then(R("lists")).then(n))},lt.prototype.combineLists=function(t,e,n){var i,r,o,s,a;return r=(a=z({lists:[],tags:[]},e)).name,i=a.lists,s=a.tags,null==(o={name:r,description:a.description}).description&&(o.description=t+" of "+i.join(", ")),o.tags=s.join(";"),o.lists=i.join(";"),Y(n,this.get(u[t],o).then(h(this)))},lt.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(at.call(arguments)))},lt.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(at.call(arguments)))},lt.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(at.call(arguments)))},lt.prototype.complement=function(t,e){var n,i,r,o,s,a,l,u,c;return null==t&&(t={}),null==e&&(e=function(){}),o=t.from,r=t.exclude,a=t.name,i=t.description,c=t.tags,n=function(){return"Relative complement of "+s.join(" and ")+" in "+l.join(" and ")},l=k(o),s=k(r),null==a&&(a=n()),null==i&&(i=n()),null==c&&(c=[]),u={name:a,description:i,tags:c,lists:s,references:l},Y(e,this.post(C,u).then(h(this)))},lt.prototype.fetchWidgets=function(t){return x(this,8,(e=this,function(){return K.call(e,"widgets",A,"widgets","widgets",t)}));var e},ot=W.omap(function(t){return[t.name,t]}),lt.prototype.fetchWidgetMap=function(t){return x(this,8,(e=this,function(){return Y(t,null!=e.__wmap__?e.__wmap__:e.__wmap__=e.fetchWidgets().then(ot))}));var e},lt.prototype.fetchModel=function(t){var e;return e=K.call(this,"model",p,"model","model").then(f.load).then(B({service:this})),Y(t,e)},lt.prototype.fetchSummaryFields=function(t){return K.call(this,"summaryFields",S,T,"classes",t)},lt.prototype.fetchVersion=function(t){return K.call(this,"version",M,"version","version",t)},lt.prototype.fetchClassKeys=function(t){return K.call(this,"classkeys",e,"classkeys","classes",t)},lt.prototype.fetchRelease=function(t){return K.call(this,"release",b,w,"version",t)},lt.prototype.query=function(i,t){var e,r;return r=this,e=function(t){var e,n;return e=t[0],n=t[1],new _(i,r,{model:e,summaryFields:n})},Y(t,W.parallel(this.fetchModel(),this.fetchSummaryFields()).then(e))},it=function(e,n){return function(t){return t?e.query(t):I("No query found called "+n)}},et=function(t){return t?"string"==typeof t?U():I("Name must be a string"):I("Name not provided")},lt.prototype.savedQuery=function(e,t){return x(this,16,(n=this,function(){return et(e).then(function(){return Y(t,n.get("user/queries",{filter:e}).then(function(t){return t.queries[e]}).then(it(n,e)))})}));var n},lt.prototype.templateQuery=function(t,e){return et(t).then((n=this,function(){return Y(e,n.fetchTemplates().then(R(t)).then(B("type","TEMPLATE")).then(it(n,t)))}));var n},lt.prototype.manageUserPreferences=function(t,e,n){return x(this,11,(i=this,function(){return Y(n,i.makeRequest(t,y,e).then(R("preferences")))}));var i},lt.prototype.resolveIds=function(e,n){return x(this,10,(i=this,function(){var t;return t={type:"POST",url:i.root+"ids",contentType:"application/json",data:JSON.stringify(e),dataType:"json"},Y(n,i.doReq(t).then(R("uid")).then(l.create(i)))}));var i},lt.prototype.resolutionJob=function(t){return l.create(this)(t)},lt.prototype.createList=function(e,t,n){var i,r,o;return null==e&&(e={}),null==t&&(t=""),null==n&&(n=function(){}),o=this,i=function(t){return z(t,{token:o.token,tags:e.tags||[]})},r={data:W.isArray(t)?t.map(function(t){return'"'+t+'"'}).join("\n"):t,dataType:"json",url:this.root+"lists?"+$(i(e)),type:"POST",contentType:"text/plain"},Y(n,this.doReq(r).then(h(this)))},nt=function(t){return t.user.temporaryToken},lt.prototype.connectAs=function(t){return lt.connect(z(this,{token:t,noCache:!this.useCache}))},lt.prototype.register=function(t,e,n){return x(this,9,(i=this,function(){return Y(n,i.post("users",{name:t,password:e}).then(nt).then(i.connectAs))}));var i},lt.prototype.getDeregistrationToken=function(e,n){return null==e&&(e=300),x(this,16,(i=this,function(){var t;return t=null!=i.token?i.post("user/deregistration",{validity:e}).then(R("token")):I("Not registered"),Y(n,t)}));var i},lt.prototype.deregister=function(t,e){return x(this,16,(n=this,function(){return Y(e,n.makeRequest("DELETE","user",{deregistrationToken:t,format:"xml"}))}));var n},lt.prototype.login=function(t,n,i){return x(this,9,(r=this,function(){var e;return e=t+":"+n,Y(i,r.logout().then(function(t){return t.get("user/token",{auth:e})})).then(R("token")).then(r.connectAs)}));var r},lt.prototype.logout=function(t){return Y(t,U(this.connectAs()))},(E=lt).prototype.rowByRow=function(){var e,t,n,i;return n=arguments[0],e=2<=arguments.length?at.call(arguments,1):[],t=q.iterReq("POST",v,"json"),null!=n.toXML?t.apply(this,arguments):this.query(n).then((i=this,function(t){return i.rowByRow.apply(i,[t].concat(at.call(e)))}))},E.prototype.eachRow=E.prototype.rowByRow,E.prototype.recordByRecord=function(){var e,t,n,i;return n=arguments[0],e=2<=arguments.length?at.call(arguments,1):[],t=q.iterReq("POST",v,"jsonobjects"),null!=n.toXML?t.apply(this,arguments):this.query(n).then((i=this,function(t){return i.recordByRecord.apply(i,[t].concat(at.call(e)))}))},E.prototype.eachRecord=E.prototype.recordByRecord,E.prototype.union=E.prototype.merge,E.prototype.difference=E.prototype.diff,E.prototype.symmetricDifference=E.prototype.diff,E.prototype.relativeComplement=E.prototype.complement,E.prototype.subtract=E.prototype.complement,E.flushCaches=function(){return p={},M={},b={},e={},S={},A={}},E.connect=function(t){if(null==(null!=t?t.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(t));return new E(t)},ct.Service=E,ct.Model=f,ct.Query=_,ct.utils=W,ct.VERSION=V.VERSION,ct.imjs=V}).call(this)},{"./http":240,"./id-resolution-job":241,"./lists":242,"./model":243,"./promise":245,"./query":246,"./user":250,"./util":251,"./version":252}],248:[function(t,e,n){(function(t){(function(){n.DOMParser=null!=t.DOMParser?t.DOMParser:function(){throw new Error("DOMParser is not available")}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],249:[function(n,t,i){(function(){var t,l,u;function e(t,e){var n,i,r,o,s,a;for(this.model=e,this.getDisplayName=function(t,e){return function(){return t.apply(e,arguments)}}(this.getDisplayName,this),this.name=t.name,this.tags=t.tags,this.displayName=t.displayName,this.attributes=t.attributes,this.references=t.references,this.collections=t.collections,this.fields={},this.__parents__=null!=(s=t.extends)?s:[],r=0,o=u.length;r<o;r++){if(null==this[n=u[r]])throw new Error("Bad model data: missing "+n);l(this[n],this.fields)}for(i in a=this.collections)a[i].isCollection=!0}l=function(t,e){var n,i,r;for(n in r=[],t)i=t[n],r.push(e[n]=i);return r},t=n("./promise"),u=["attributes","references","collections"],i.Table=(e.prototype.toString=function(){var n;return"[Table name="+this.name+", fields=["+function(){var t,e;for(n in e=[],t=this.fields)t[n],e.push(n);return e}.call(this)+"]]"},e.prototype.parents=function(){var t;return(null!=(t=this.__parents__)?t:[]).slice()},e.prototype.getDisplayName=function(){return new t((n=this,function(t,e){return null!=n.model?t(n.model.makePath(n.name).getDisplayName()):e(new Error("model not set - cannot make path"))}));var n},e)}).call(this)},{"./promise":245}],250:[function(r,t,c){(function(){function n(t,e){return function(){return t.apply(e,arguments)}}var o,i,s,a,l,u,t;function e(t,e){this.service=t,this.username=e.username,this.preferences=e.preferences,this.refresh=n(this.refresh,this),this.clearPreferences=n(this.clearPreferences,this),this.clearPreference=n(this.clearPreference,this),this.setPreferences=n(this.setPreferences,this),this.setPreference=n(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}t=r("./util"),u=t.withCB,a=t.get,l=t.isFunction,o=t.any,s=t.error,i=function(e,t,n,i){return e.service.manageUserPreferences(n,t,i).then(function(t){return e.preferences=t})},c.User=(e.prototype.setPreference=function(t,e,n){var i,r;if(l(e)&&(e=(r=[null,e])[0],n=r[1]),"string"==typeof t)(i={})[t]=e;else{if(null!=e)return u(n,s("Incorrect arguments to setPreference"));i=t}return this.setPreferences(i,n)},e.prototype.setPreferences=function(t,e){return i(this,t,"POST",e)},e.prototype.clearPreference=function(t,e){return i(this,{key:t},"DELETE",e)},e.prototype.clearPreferences=function(t){return i(this,{},"DELETE",t)},e.prototype.refresh=function(t){return i(this,{},"GET",t)},e.prototype.createToken=function(t,e,n){var i,r;return null==t&&(t="day"),null==n&&o([t,e],l)&&(l(t)?(t=(i=[null,null,t])[0],e=i[1],n=i[2]):l(e)&&(e=(r=[null,e])[0],n=r[1])),u(n,this.service.post("user/tokens",{type:t,message:e}).then(a("token")))},e.prototype.fetchCurrentTokens=function(t){return u(t,this.service.get("user/tokens").then(a("tokens")))},e.prototype.revokeAllTokens=function(t){return u(t,this.service.makeRequest("DELETE","user/tokens"))},e.prototype.revokeToken=function(t,e){return u(e,this.service.makeRequest("DELETE","user/tokens/"+t))},e)}).call(this)},{"./util":251}],251:[function(C,t,T){(function(){var e,i,n,l,o,a,r,u,c,s,h,p,f,d,m,g,y,v,_,t,b=[].slice,w=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},x={}.hasOwnProperty;e=C("./promise"),(y=T).defer=function(){var n;return(n={}).promise=new e(function(t,e){return n.resolve=t,n.reject=e}),n},o=function(t){return encodeURIComponent(String(t))},g=function(i){var r;return function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r.map(o).join("="));return n}().join("&")},y.querystring=function(t){var i,r,o,e,s,a;if(!t)return"";if(f(t))o=t.slice();else for(i in o=[],t)a=t[i],f(a)?(e=function(){var t,e,n;for(n=[],t=0,e=a.length;t<e;t++)s=a[t],n.push([i,s]);return n}(),o=o.concat(e)):o.push([i,a]);return g(function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)null!=(r=o[t])[1]&&n.push(r);return n}())},y.curry=l=function(){var e,n;return n=arguments[0],e=2<=arguments.length?b.call(arguments,1):[],function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],n.apply(null,e.concat(t))}},y.error=r=function(n){return new e(function(t,e){return e(new Error(n))})},y.success=v=function(n){return new e(function(t,e){return t(n)})},y.parallel=function(){var t;return 1===(t=1<=arguments.length?b.call(arguments,0):[]).length&&!t[0].then&&t[0].length?e.all(t[0]):e.all(t)},y.withCB=function(){var t,e,n,i,r,o,s,a;for(e=2<=arguments.length?b.call(arguments,0,o=arguments.length-1):(o=0,[]),r=arguments[o++],s=0,a=e.length;s<a;s++)null!=(t=e[s])&&(i=l(t,null),n=t,r.then(i,n));return r},y.fold=c=function(o){return function(t,e){var n,i,r;if(1===arguments.length&&(t=(null!=(e=(null!=t?t.slice():void 0)||t)?e.shift():void 0)||{}),null==e)throw new Error("xs is null");if(null!=e.reduce)return e.reduce(o,t);for(n in i=t,e)r=e[n],i=null!=i?o(i,n,r):{k:r};return i}},y.take=function(e){return function(t){return null!=e?t.slice(0,+(e-1)+1||9e9):t.slice()}},y.filter=function(o){return function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],o(e)&&r.push(e);return r}},y.uniqBy=function(t,e){var n,i,r,o,s,a;if(1===arguments.length)return l(y.uniqBy,t);if(i=[],r=[],null==e)return r;for(s=0,a=e.length;s<a;s++)n=t(o=e[s]),w.call(i,n)<0&&(i.push(n),r.push(o));return r},y.find=function(t,e){var n,i,r;if(1===arguments.length)return e=t,function(t){return y.find(t,e)};for(i=0,r=t.length;i<r;i++)if(n=t[i],e(n))return n;return null},f=null!=(t=Array.isArray)?t:function(t){return null!=(null!=t?t.splice:void 0)&&null!=(null!=t?t.push:void 0)&&null!=(null!=t?t.pop:void 0)&&null!=(null!=t?t.slice:void 0)},y.isArray=f,y.isFunction="function"!=typeof/./?function(t){return"function"==typeof t}:function(t){return null!=t&&null!=t.call&&null!=t.apply&&"[object Function]"===t.toString()},a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},y.escape=function(t){var e,n,i,r,o,s;if(null==t)return"";for(i=[],n=o=0,s=(r=String(t).replace(/[&<>"']/g,function(t){return a[t]})).length;0<=s?o<=s:s<=o;n=0<=s?++o:--o)256<(e=r.charCodeAt(n))?i.push("&#"+e+";"):i.push(r.charAt(n));return i.join("")},y.omap=function(s){var e;return e=c(function(t,e,n){var i,r,o;return i=(o=s(e,n))[0],r=o[1],f(r)&&(r=r.slice()),t[i]=r,t}),function(t){return e({},t)}},y.copy=y.omap(function(t,e){return[t,e]}),y.partition=function(r){return function(t){return c(function(t,e){var n,i;return i=t[0],n=t[1],r(e)?[i.concat([e]),n]:[i,n.concat([e])]})([[],[]],t)}},y.merge=function(t,e){return extend(extend({},t),e)},y.extend=function(t,e){var n,i,r;for(n in r=[],e)i=e[n],r.push(t[n]=i);return r},y.id=s=function(t){return t},y.concatMap=function(s){return function(t){var e,n,i,r,o;for(n=void 0,r=0,o=t.length;r<o;r++)i=t[r],e=s(i),n=void 0===n?e:"number"==typeof n?n+e:null!=n.concat?n.concat(e):d(n,e);return n}},y.map=function(t){return h("map",t)},n=c(function(e,n){return function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],e(n.apply(null,t))}}),y.compose=function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],n(t)},y.flatMap=y.concatMap,y.difference=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;i<r;i++)n=t[i],w.call(e,n)<0&&o.push(n);return o},y.stringList=function(t){return"string"==typeof t?[t]:t},y.flatten=u=function(){var t,e,n,i,r,o,s,a,l;for(t=[],r=0,s=(n=1<=arguments.length?b.call(arguments,0):[]).length;r<s;r++)if(e=n[r],f(e))for(o=0,a=(l=u.apply(null,e)).length;o<a;o++)i=l[o],t.push(i);else t.push(e);return t},y.sum=y.concatMap(s),y.merge=d=function(){var t,e,n,i,r,o,s;for(e={},o=0,s=(i=1<=arguments.length?b.call(arguments,0):[]).length;o<s;o++)for(t in n=i[o])x.call(n,t)&&(r=n[t],e[t]=r);return e},y.any=function(t,e){var n,i;for(null==e&&(e=s),n=0,i=t.length;n<i;n++)if(e(t[n]))return!0;return!1},y.invoke=h=function(){var t,e;return e=arguments[0],t=2<=arguments.length?b.call(arguments,1):[],p(e,t)},y.invokeWith=p=function(e,n,i){return null==n&&(n=[]),null==i&&(i=null),function(t){if(null==t)throw new Error('Cannot call method "'+e+'" of null');if(t[e])return t[e].apply(i||t,n);throw new Error('Cannot call undefined method "'+e+" of "+t)}},y.get=function(e){return function(t){return t[e]}},y.set=function(i,r){return function(t){var e,n;if(2===arguments.length)t[i]=r;else for(e in i)x.call(i,e)&&(n=i[e],t[e]=n);return t}},i=function(t,e){return"This service requires a service at version "+t+" or above. This one is at "+e},y.REQUIRES_VERSION=function(t,e,n){return t.fetchVersion().then(function(t){return e<=t?n():r(i(e,t))})},y.dejoin=function(t){var e,n,i,r;for(n=0,i=(r=t.views).length;n<i;n++)2<(e=r[n].split(".")).length&&t.addJoin(e.slice(1,-1).join("."));return t},_=c(function(t,e){return t.then(e)}),y.sequence=function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],_(v(),t)},m=c(function(t,e){var n,i;if(n=e[0],i=e[1],null!=t[n])throw new Error("Duplicate key: "+n);return t[n]=i,t}),y.pairsToObj=function(t){return m({},t)}}).call(this)},{"./promise":245}],252:[function(t,e,n){(function(){n.VERSION="3.16.0"}).call(this)},{}],253:[function(t,e,r){(function(){var n,i;n=t("xmldom").DOMParser,i=function(t){return 0===(t=(t=t.replace(/^\s*/g,"")).replace(/\s$/g,"")).length?t:">"!==t[t.length-1]?t+">":t},r.parse=function(t){var e;if("string"!=typeof t)throw new Error("Expected a string - got "+t);if(!(t=i(t)))throw new Error("Expected content - got empty string");if(!(e=function(){try{return(new n).parseFromString(t,"text/xml")}catch(t){}}())||!e.documentElement||e.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return e}}).call(this)},{xmldom:248}],254:[function(K,G,t){(function(V,Y){(function(){"use strict";function u(t){return"function"==typeof t}var e,n,s=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,a=function(t,e){_[i]=t,_[i+1]=e,2===(i+=2)&&(n?n(b):p())};var t="undefined"!=typeof window?window:void 0,r=t||{},o=r.MutationObserver||r.WebKitMutationObserver,l=void 0!==V&&"[object process]"==={}.toString.call(V),c="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){return function(){setTimeout(b,1)}}var p,f,d,m,g,y,v,_=new Array(1e3);function b(){for(var t=0;t<i;t+=2){(0,_[t])(_[t+1]),_[t]=void 0,_[t+1]=void 0}i=0}function w(){}p=l?(y=V.nextTick,v=V.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(v)&&"0"===v[1]&&"10"===v[2]&&(y=setImmediate),function(){y(b)}):o?(d=0,m=new o(b),g=document.createTextNode(""),m.observe(g,{characterData:!0}),function(){g.data=d=++d%2}):c?((f=new MessageChannel).port1.onmessage=b,function(){f.port2.postMessage(0)}):void 0===t&&"function"==typeof K?function(){try{var t=K("vertx");return e=t.runOnLoop||t.runOnContext,function(){e(b)}}catch(t){return h()}}():h();var x=void 0,C=1,T=2,S=new P;function E(t,e){if(e.constructor===t.constructor)!function(e,t){t._state===C?M(e,t._result):t._state===T?D(e,t._result):A(t,void 0,function(t){k(e,t)},function(t){D(e,t)})}(t,e);else{var n=function(t){try{return t.then}catch(t){return S.error=t,S}}(e);n===S?D(t,S.error):void 0===n?M(t,e):u(n)?function(t,i,r){a(function(e){var n=!1,t=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(r,i,function(t){n||(n=!0,i!==t?k(e,t):M(e,t))},function(t){n||(n=!0,D(e,t))},e._label);!n&&t&&(n=!0,D(e,t))},t)}(t,e,n):M(t,e)}}function k(t,e){t===e?D(t,new TypeError("You cannot resolve a promise with itself")):!function(t){return"function"==typeof t||"object"==typeof t&&null!==t}(e)?M(t,e):E(t,e)}function N(t){t._onerror&&t._onerror(t._result),O(t)}function M(t,e){t._state===x&&(t._result=e,t._state=C,0!==t._subscribers.length&&a(O,t))}function D(t,e){t._state===x&&(t._state=T,t._result=e,a(N,t))}function A(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+C]=n,r[o+T]=i,0===o&&t._state&&a(O,t)}function O(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,r,o=t._result,s=0;s<e.length;s+=3)i=e[s],r=e[s+n],i?R(n,i,r,o):r(o);t._subscribers.length=0}}function P(){this.error=null}var I=new P;function R(t,e,n,i){var r,o,s,a,l=u(n);if(l){if((r=function(t,e){try{return t(e)}catch(t){return I.error=t,I}}(n,i))===I?(a=!0,o=r.error,r=null):s=!0,e===r)return void D(e,new TypeError("A promises callback cannot return that same promise."))}else r=i,s=!0;e._state!==x||(l&&s?k(e,r):a?D(e,o):t===C?M(e,r):t===T&&D(e,r))}function L(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(w),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?M(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&M(n.promise,n._result))):D(n.promise,n._validationError())}L.prototype._validateInput=function(t){return s(t)},L.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},L.prototype._init=function(){this._result=new Array(this.length)};var q=L;L.prototype._enumerate=function(){for(var t=this.length,e=this.promise,n=this._input,i=0;e._state===x&&i<t;i++)this._eachEntry(n[i],i)},L.prototype._eachEntry=function(t,e){var n=this._instanceConstructor;!function(t){return"object"==typeof t&&null!==t}(t)?(this._remaining--,this._result[e]=t):t.constructor===n&&t._state!==x?(t._onerror=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(n.resolve(t),e)},L.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===x&&(this._remaining--,t===T?D(i,n):this._result[e]=n),0===this._remaining&&M(i,this._result)},L.prototype._willSettleAt=function(t,e){var n=this;A(t,void 0,function(t){n._settledAt(C,e,t)},function(t){n._settledAt(T,e,t)})};function j(t){var e=new this(w);if(!s(t))return D(e,new TypeError("You must pass an array to race.")),e;var n=t.length;function i(t){k(e,t)}function r(t){D(e,t)}for(var o=0;e._state===x&&o<n;o++)A(this.resolve(t[o]),void 0,i,r);return e}function F(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(w);return k(e,t),e}function z(t){var e=new this(w);return D(e,t),e}var H=0;var B=U;function U(t){this._id=H++,this._state=void 0,this._result=void 0,this._subscribers=[],w!==t&&(u(t)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof U||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(e,t){try{t(function(t){k(e,t)},function(t){D(e,t)})}catch(t){D(e,t)}}(this,t))}U.all=function(t){return new q(this,t).promise},U.race=j,U.resolve=F,U.reject=z,U._setScheduler=function(t){n=t},U._setAsap=function(t){a=t},U._asap=a,U.prototype={constructor:U,then:function(t,e){var n=this._state;if(n===C&&!t||n===T&&!e)return this;var i=new this.constructor(w),r=this._result;if(n){var o=arguments[n-1];a(function(){R(n,i,o,r)})}else A(this,i,t,e);return i},catch:function(t){return this.then(null,t)}};var $=function(){var t;if(void 0!==Y)t=Y;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=B)},W={Promise:B,polyfill:$};void 0!==G&&G.exports?G.exports=W:void 0!==this&&(this.ES6Promise=W),$()}).call(this)}).call(this,K("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:275}],255:[function(t,e,n){(function(C){C.ui=C.ui||{};C.ui.version="1.12.1";var r,n=0,a=Array.prototype.slice;C.cleanData=(r=C.cleanData,function(t){var e,n,i;for(i=0;null!=(n=t[i]);i++)try{(e=C._data(n,"events"))&&e.remove&&C(n).triggerHandler("remove")}catch(t){}r(t)}),C.widget=function(t,n,e){var i,r,o,s={},a=t.split(".")[0],l=a+"-"+(t=t.split(".")[1]);return e||(e=n,n=C.Widget),C.isArray(e)&&(e=C.extend.apply(null,[{}].concat(e))),C.expr.pseudos[l.toLowerCase()]=function(t){return!!C.data(t,l)},C[a]=C[a]||{},i=C[a][t],r=C[a][t]=function(t,e){if(!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},C.extend(r,i,{version:e.version,_proto:C.extend({},e),_childConstructors:[]}),(o=new n).options=C.widget.extend({},o.options),C.each(e,function(e,i){function r(){return n.prototype[e].apply(this,arguments)}function o(t){return n.prototype[e].apply(this,t)}C.isFunction(i)?s[e]=function(){var t,e=this._super,n=this._superApply;return this._super=r,this._superApply=o,t=i.apply(this,arguments),this._super=e,this._superApply=n,t}:s[e]=i}),r.prototype=C.widget.extend(o,{widgetEventPrefix:i&&o.widgetEventPrefix||t},s,{constructor:r,namespace:a,widgetName:t,widgetFullName:l}),i?(C.each(i._childConstructors,function(t,e){var n=e.prototype;C.widget(n.namespace+"."+n.widgetName,r,e._proto)}),delete i._childConstructors):n._childConstructors.push(r),C.widget.bridge(t,r),r},C.widget.extend=function(t){for(var e,n,i=a.call(arguments,1),r=0,o=i.length;r<o;r++)for(e in i[r])n=i[r][e],i[r].hasOwnProperty(e)&&void 0!==n&&(C.isPlainObject(n)?t[e]=C.isPlainObject(t[e])?C.widget.extend({},t[e],n):C.widget.extend({},n):t[e]=n);return t},C.widget.bridge=function(o,e){var s=e.prototype.widgetFullName||o;C.fn[o]=function(n){var t="string"==typeof n,i=a.call(arguments,1),r=this;return t?this.length||"instance"!==n?this.each(function(){var t,e=C.data(this,s);return"instance"===n?(r=e,!1):e?C.isFunction(e[n])&&"_"!==n.charAt(0)?(t=e[n].apply(e,i))!==e&&void 0!==t?(r=t&&t.jquery?r.pushStack(t.get()):t,!1):void 0:C.error("no such method '"+n+"' for "+o+" widget instance"):C.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+n+"'")}):r=void 0:(i.length&&(n=C.widget.extend.apply(null,[n].concat(i))),this.each(function(){var t=C.data(this,s);t?(t.option(n||{}),t._init&&t._init()):C.data(this,s,new e(n,this))})),r}},C.Widget=function(){},C.Widget._childConstructors=[],C.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=C(e||this.defaultElement||this)[0],this.element=C(e),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=C(),this.hoverable=C(),this.focusable=C(),this.classesElementLookup={},e!==this&&(C.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=C(e.style?e.ownerDocument:e.document||e),this.window=C(this.document[0].defaultView||this.document[0].parentWindow)),this.options=C.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:C.noop,_create:C.noop,_init:C.noop,destroy:function(){var n=this;this._destroy(),C.each(this.classesElementLookup,function(t,e){n._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:C.noop,widget:function(){return this.element},option:function(t,e){var n,i,r,o=t;if(0===arguments.length)return C.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(n=t.split(".")).shift(),n.length){for(i=o[t]=C.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)i[n[r]]=i[n[r]]||{},i=i[n[r]];if(t=n.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,n,i;for(e in t)i=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&i&&i.length&&(n=C(i.get()),this._removeClass(i,e),n.addClass(this._classes({element:n,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(r){var o=[],s=this;function t(t,e){var n,i;for(i=0;i<t.length;i++)n=s.classesElementLookup[t[i]]||C(),n=r.add?C(C.uniqueSort(n.get().concat(r.element.get()))):C(n.not(r.element).get()),s.classesElementLookup[t[i]]=n,o.push(t[i]),e&&r.classes[t[i]]&&o.push(r.classes[t[i]])}return r=C.extend({element:this.element,classes:this.options.classes||{}},r),this._on(r.element,{remove:"_untrackClassesElement"}),r.keys&&t(r.keys.match(/\S+/g)||[],!0),r.extra&&t(r.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(n){var i=this;C.each(i.classesElementLookup,function(t,e){-1!==C.inArray(n.target,e)&&(i.classesElementLookup[t]=C(e.not(n.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof t||null===t,o={extra:r?e:n,keys:r?t:e,element:r?this.element:t,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(s,a,t){var l,u=this;"boolean"!=typeof s&&(t=a,a=s,s=!1),t?(a=l=C(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,l=this.widget()),C.each(t,function(t,e){function n(){if(s||!0!==u.options.disabled&&!C(this).hasClass("ui-state-disabled"))return("string"==typeof e?u[e]:e).apply(u,arguments)}"string"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||C.guid++);var i=t.match(/^([\w:-]*)\s*(.*)$/),r=i[1]+u.eventNamespace,o=i[2];o?l.on(r,o,n):a.on(r,n)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=C(this.bindings.not(t).get()),this.focusable=C(this.focusable.not(t).get()),this.hoverable=C(this.hoverable.not(t).get())},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(C(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(C(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(C(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(C(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,n){var i,r,o=this.options[t];if(n=n||{},(e=C.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],r=e.originalEvent)for(i in r)i in e||(e[i]=r[i]);return this.element.trigger(e,n),!(C.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},C.each({show:"fadeIn",hide:"fadeOut"},function(o,s){C.Widget.prototype["_"+o]=function(e,t,n){var i;"string"==typeof t&&(t={effect:t});var r=t?!0===t||"number"==typeof t?s:t.effect||s:o;"number"==typeof(t=t||{})&&(t={duration:t}),i=!C.isEmptyObject(t),t.complete=n,t.delay&&e.delay(t.delay),i&&C.effects&&C.effects.effect[r]?e[o](t):r!==o&&e[r]?e[r](t.duration,t.easing,n):e.queue(function(t){C(this)[o](),n&&n.call(e[0]),t()})}});var o,x,T,i,s,l,u,c,e;C.widget;function S(t,e,n){return[parseFloat(t[0])*(c.test(t[0])?e/100:1),parseFloat(t[1])*(c.test(t[1])?n/100:1)]}function E(t,e){return parseInt(C.css(t,e),10)||0}x=Math.max,T=Math.abs,i=/left|center|right/,s=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,c=/%$/,e=C.fn.position,C.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,e,n=C("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];return C("body").append(n),t=i.offsetWidth,n.css("overflow","scroll"),t===(e=i.offsetWidth)&&(e=n[0].clientWidth),n.remove(),o=t-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?C.position.scrollbarWidth():0,height:i?C.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=C(t||window),n=C.isWindow(e[0]),i=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:n,isDocument:i,offset:n||i?{left:0,top:0}:C(t).offset(),scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}},C.fn.position=function(h){if(!h||!h.of)return e.apply(this,arguments);h=C.extend({},h);var p,f,d,m,g,t,y=C(h.of),v=C.position.getWithinInfo(h.within),_=C.position.getScrollInfo(v),b=(h.collision||"flip").split(" "),w={};return t=function(t){var e=t[0];return 9===e.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:C.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}(y),y[0].preventDefault&&(h.at="left top"),f=t.width,d=t.height,m=t.offset,g=C.extend({},m),C.each(["my","at"],function(){var t,e,n=(h[this]||"").split(" ");1===n.length&&(n=i.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]),n[0]=i.test(n[0])?n[0]:"center",n[1]=s.test(n[1])?n[1]:"center",t=l.exec(n[0]),e=l.exec(n[1]),w[this]=[t?t[0]:0,e?e[0]:0],h[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===h.at[0]?g.left+=f:"center"===h.at[0]&&(g.left+=f/2),"bottom"===h.at[1]?g.top+=d:"center"===h.at[1]&&(g.top+=d/2),p=S(w.at,f,d),g.left+=p[0],g.top+=p[1],this.each(function(){var n,t,s=C(this),a=s.outerWidth(),l=s.outerHeight(),e=E(this,"marginLeft"),i=E(this,"marginTop"),r=a+e+E(this,"marginRight")+_.width,o=l+i+E(this,"marginBottom")+_.height,u=C.extend({},g),c=S(w.my,s.outerWidth(),s.outerHeight());"right"===h.my[0]?u.left-=a:"center"===h.my[0]&&(u.left-=a/2),"bottom"===h.my[1]?u.top-=l:"center"===h.my[1]&&(u.top-=l/2),u.left+=c[0],u.top+=c[1],n={marginLeft:e,marginTop:i},C.each(["left","top"],function(t,e){C.ui.position[b[t]]&&C.ui.position[b[t]][e](u,{targetWidth:f,targetHeight:d,elemWidth:a,elemHeight:l,collisionPosition:n,collisionWidth:r,collisionHeight:o,offset:[p[0]+c[0],p[1]+c[1]],my:h.my,at:h.at,within:v,elem:s})}),h.using&&(t=function(t){var e=m.left-u.left,n=e+f-a,i=m.top-u.top,r=i+d-l,o={target:{element:y,left:m.left,top:m.top,width:f,height:d},element:{element:s,left:u.left,top:u.top,width:a,height:l},horizontal:n<0?"left":0<e?"right":"center",vertical:r<0?"top":0<i?"bottom":"middle"};f<a&&T(e+n)<f&&(o.horizontal="center"),d<l&&T(i+r)<d&&(o.vertical="middle"),x(T(e),T(n))>x(T(i),T(r))?o.important="horizontal":o.important="vertical",h.using.call(this,t,o)}),s.offset(C.extend(u,{using:t}))})},C.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,s=t.left-e.collisionPosition.marginLeft,a=r-s,l=s+e.collisionWidth-o-r;e.collisionWidth>o?0<a&&l<=0?(n=t.left+a+e.collisionWidth-o-r,t.left+=a-n):t.left=0<l&&a<=0?r:l<a?r+o-e.collisionWidth:r:0<a?t.left+=a:0<l?t.left-=l:t.left=x(t.left-s,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,o=e.within.height,s=t.top-e.collisionPosition.marginTop,a=r-s,l=s+e.collisionHeight-o-r;e.collisionHeight>o?0<a&&l<=0?(n=t.top+a+e.collisionHeight-o-r,t.top+=a-n):t.top=0<l&&a<=0?r:l<a?r+o-e.collisionHeight:r:0<a?t.top+=a:0<l?t.top-=l:t.top=x(t.top-s,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,o=r.offset.left+r.scrollLeft,s=r.width,a=r.isWindow?r.scrollLeft:r.offset.left,l=t.left-e.collisionPosition.marginLeft,u=l-a,c=l+e.collisionWidth-s-a,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((n=t.left+h+p+f+e.collisionWidth-s-o)<0||n<T(u))&&(t.left+=h+p+f):0<c&&(0<(i=t.left-e.collisionPosition.marginLeft+h+p+f-a)||T(i)<c)&&(t.left+=h+p+f)},top:function(t,e){var n,i,r=e.within,o=r.offset.top+r.scrollTop,s=r.height,a=r.isWindow?r.scrollTop:r.offset.top,l=t.top-e.collisionPosition.marginTop,u=l-a,c=l+e.collisionHeight-s-a,h="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];u<0?((i=t.top+h+p+f+e.collisionHeight-s-o)<0||i<T(u))&&(t.top+=h+p+f):0<c&&(0<(n=t.top-e.collisionPosition.marginTop+h+p+f-a)||T(n)<c)&&(t.top+=h+p+f)}},flipfit:{left:function(){C.ui.position.flip.left.apply(this,arguments),C.ui.position.fit.left.apply(this,arguments)},top:function(){C.ui.position.flip.top.apply(this,arguments),C.ui.position.fit.top.apply(this,arguments)}}};var t;C.ui.position,C.extend(C.expr.pseudos,{data:C.expr.createPseudo?C.expr.createPseudo(function(e){return function(t){return!!C.data(t,e)}}):function(t,e,n){return!!C.data(t,n[3])}}),C.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});C.ui.focusable=function(t,e){var n,i,r,o,s,a=t.nodeName.toLowerCase();return"area"===a?(i=(n=t.parentNode).name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&(0<(r=C("img[usemap='#"+i+"']")).length&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(a)?(o=!t.disabled)&&(s=C(t).closest("fieldset")[0])&&(o=!s.disabled):o="a"===a&&t.href||e,o&&C(t).is(":visible")&&function(t){var e=t.css("visibility");for(;"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}(C(t)))},C.extend(C.expr.pseudos,{focusable:function(t){return C.ui.focusable(t,null!=C.attr(t,"tabindex"))}});C.ui.focusable,C.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):C(this[0].form)},C.ui.formResetMixin={_formResetHandler:function(){var e=C(this);setTimeout(function(){var t=e.data("ui-form-reset-instances");C.each(t,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(C.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};"1.7"===C.fn.jquery.substring(0,3)&&(C.each(["Width","Height"],function(t,n){var r="Width"===n?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),o={innerWidth:C.fn.innerWidth,innerHeight:C.fn.innerHeight,outerWidth:C.fn.outerWidth,outerHeight:C.fn.outerHeight};function s(t,e,n,i){return C.each(r,function(){e-=parseFloat(C.css(t,"padding"+this))||0,n&&(e-=parseFloat(C.css(t,"border"+this+"Width"))||0),i&&(e-=parseFloat(C.css(t,"margin"+this))||0)}),e}C.fn["inner"+n]=function(t){return void 0===t?o["inner"+n].call(this):this.each(function(){C(this).css(i,s(this,t)+"px")})},C.fn["outer"+n]=function(t,e){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){C(this).css(i,s(this,t,!0,e)+"px")})}}),C.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))});C.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},C.ui.escapeSelector=(h=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(h,"\\$1")}),C.fn.labels=function(){var t,e,n,i,r;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),(n=this.attr("id"))&&(r=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),e="label[for='"+C.ui.escapeSelector(n)+"']",i=i.add(r.find(e).addBack(e))),this.pushStack(i))},C.fn.scrollParent=function(t){var e=this.css("position"),n="absolute"===e,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=C(this);return(!n||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&r.length?r:C(this[0].ownerDocument||document)},C.extend(C.expr.pseudos,{tabbable:function(t){var e=C.attr(t,"tabindex"),n=null!=e;return(!n||0<=e)&&C.ui.focusable(t,n)}}),C.fn.extend({uniqueId:(p=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++p)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&C(this).removeAttr("id")})}}),C.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var h,p,f=!1;C(document).on("mouseup",function(){f=!1});C.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(t){if(!0===C.data(t.target,e.widgetName+".preventClickEvent"))return C.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!f){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,n=1===t.which,i=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&C(t.target).closest(this.options.cancel).length;return!(n&&!i&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===C.data(t.target,this.widgetName+".preventClickEvent")&&C.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),f=!0))}},_mouseMove:function(t){if(this._mouseMoved){if(C.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&C.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,f=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),C.ui.plugin={add:function(t,e,n){var i,r=C.ui[t].prototype;for(i in n)r.plugins[i]=r.plugins[i]||[],r.plugins[i].push([e,n[i]])},call:function(t,e,n,i){var r,o=t.plugins[e];if(o&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,n)}},C.ui.safeActiveElement=function(e){var n;try{n=e.activeElement}catch(t){n=e.body}return n||(n=e.body),n.nodeName||(n=e.body),n},C.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&C(t).trigger("blur")};C.widget("ui.draggable",C.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||0<C(t.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=C(this);return C("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=C.ui.safeActiveElement(this.document[0]);C(t.target).closest(e).length||C.ui.safeBlur(e)},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),C.ui.ddmanager&&(C.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===C(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),C.ui.ddmanager&&!e.dropBehaviour&&C.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),C.ui.ddmanager&&C.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!e){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new C.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",C.ui.ddmanager&&C.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,n=!1;return C.ui.ddmanager&&!this.options.dropBehaviour&&(n=C.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||C.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?C(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),C.ui.ddmanager&&C.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),C.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new C.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!C(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var e=this.options,n=C.isFunction(e.helper),i=n?C(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),n&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),C.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&C.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options,r=this.document[0];this.relativeContainer=null,i.containment?"window"!==i.containment?"document"!==i.containment?i.containment.constructor!==Array?("parent"===i.containment&&(i.containment=this.helper[0].parentNode),(n=(e=C(i.containment))[0])&&(t=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e)):this.containment=i.containment:this.containment=[0,0,C(r).width()-this.helperProportions.width-this.margins.left,(C(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[C(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,C(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,C(window).scrollLeft()+C(window).width()-this.helperProportions.width-this.margins.left,C(window).scrollTop()+(C(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,r,o,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,u=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(n=this.relativeContainer?(i=this.relativeContainer.offset(),[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-s.grid[0]:o+s.grid[0]:o),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,e,n){return n=n||this._uiHash(),C.ui.plugin.call(this,t,[e,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),C.Widget.prototype._trigger.call(this,t,e,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),C.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,n){var i=C.extend({},t,{item:n.element});n.sortables=[],C(n.options.connectToSortable).each(function(){var t=C(this).sortable("instance");t&&!t.options.disabled&&(n.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,i))})},stop:function(e,t,n){var i=C.extend({},t,{item:n.element});n.cancelHelperRemoval=!1,C.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,i))})},drag:function(n,i,r){C.each(r.sortables,function(){var t=!1,e=this;e.positionAbs=r.positionAbs,e.helperProportions=r.helperProportions,e.offset.click=r.offset.click,e._intersectsWith(e.containerCache)&&(t=!0,C.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==e&&this._intersectsWith(this.containerCache)&&C.contains(e.element[0],this.element[0])&&(t=!1),t})),t?(e.isOver||(e.isOver=1,r._parent=i.helper.parent(),e.currentItem=i.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return i.helper[0]},n.target=e.currentItem[0],e._mouseCapture(n,!0),e._mouseStart(n,!0,!0),e.offset.click.top=r.offset.click.top,e.offset.click.left=r.offset.click.left,e.offset.parent.left-=r.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=r.offset.parent.top-e.offset.parent.top,r._trigger("toSortable",n),r.dropped=e.element,C.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,e.fromOutside=r),e.currentItem&&(e._mouseDrag(n),i.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",n,e._uiHash(e)),e._mouseStop(n,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),i.helper.appendTo(r._parent),r._refreshOffsets(n),i.position=r._generatePosition(n,!0),r._trigger("fromSortable",n),r.dropped=!1,C.each(r.sortables,function(){this.refreshPositions()}))})}}),C.ui.plugin.add("draggable","cursor",{start:function(t,e,n){var i=C("body"),r=n.options;i.css("cursor")&&(r._cursor=i.css("cursor")),i.css("cursor",r.cursor)},stop:function(t,e,n){var i=n.options;i._cursor&&C("body").css("cursor",i._cursor)}}),C.ui.plugin.add("draggable","opacity",{start:function(t,e,n){var i=C(e.helper),r=n.options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,e,n){var i=n.options;i._opacity&&C(e.helper).css("opacity",i._opacity)}}),C.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,e,n){var i=n.options,r=!1,o=n.scrollParentNotHidden[0],s=n.document[0];o!==s&&"HTML"!==o.tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=r=o.scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=r=o.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=r=o.scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=r=o.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-C(s).scrollTop()<i.scrollSensitivity?r=C(s).scrollTop(C(s).scrollTop()-i.scrollSpeed):C(window).height()-(t.pageY-C(s).scrollTop())<i.scrollSensitivity&&(r=C(s).scrollTop(C(s).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-C(s).scrollLeft()<i.scrollSensitivity?r=C(s).scrollLeft(C(s).scrollLeft()-i.scrollSpeed):C(window).width()-(t.pageX-C(s).scrollLeft())<i.scrollSensitivity&&(r=C(s).scrollLeft(C(s).scrollLeft()+i.scrollSpeed)))),!1!==r&&C.ui.ddmanager&&!i.dropBehaviour&&C.ui.ddmanager.prepareOffsets(n,t)}}),C.ui.plugin.add("draggable","snap",{start:function(t,e,n){var i=n.options;n.snapElements=[],C(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=C(this),e=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e,n){var i,r,o,s,a,l,u,c,h,p,f=n.options,d=f.snapTolerance,m=e.offset.left,g=m+n.helperProportions.width,y=e.offset.top,v=y+n.helperProportions.height;for(h=n.snapElements.length-1;0<=h;h--)l=(a=n.snapElements[h].left-n.margins.left)+n.snapElements[h].width,c=(u=n.snapElements[h].top-n.margins.top)+n.snapElements[h].height,g<a-d||l+d<m||v<u-d||c+d<y||!C.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,C.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(i=Math.abs(u-v)<=d,r=Math.abs(c-y)<=d,o=Math.abs(a-g)<=d,s=Math.abs(l-m)<=d,i&&(e.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),r&&(e.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),o&&(e.position.left=n._convertPositionTo("relative",{top:0,left:a-n.helperProportions.width}).left),s&&(e.position.left=n._convertPositionTo("relative",{top:0,left:l}).left)),p=i||r||o||s,"outer"!==f.snapMode&&(i=Math.abs(u-y)<=d,r=Math.abs(c-v)<=d,o=Math.abs(a-m)<=d,s=Math.abs(l-g)<=d,i&&(e.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),r&&(e.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),o&&(e.position.left=n._convertPositionTo("relative",{top:0,left:a}).left),s&&(e.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(i||r||o||s||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,C.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=i||r||o||s||p)}}),C.ui.plugin.add("draggable","stack",{start:function(t,e,n){var i,r=n.options,o=C.makeArray(C(r.stack)).sort(function(t,e){return(parseInt(C(t).css("zIndex"),10)||0)-(parseInt(C(e).css("zIndex"),10)||0)});o.length&&(i=parseInt(C(o[0]).css("zIndex"),10)||0,C(o).each(function(t){C(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length))}}),C.ui.plugin.add("draggable","zIndex",{start:function(t,e,n){var i=C(e.helper),r=n.options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,e,n){var i=n.options;i._zIndex&&C(e.helper).css("zIndex",i._zIndex)}});C.ui.draggable;C.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,n=e.accept;this.isover=!1,this.isout=!0,this.accept=C.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){C.ui.ddmanager.droppables[t]=C.ui.ddmanager.droppables[t]||[],C.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=C.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,e){if("accept"===t)this.accept=C.isFunction(e)?e:function(t){return t.is(e)};else if("scope"===t){var n=C.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(e)}this._super(t,e)},_activate:function(t){var e=C.ui.ddmanager.current;this._addActiveClass(),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=C.ui.ddmanager.current;this._removeActiveClass(),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=C.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=C.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(e)))},_drop:function(e,t){var n=t||C.ui.ddmanager.current,i=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=C(this).droppable("instance");if(t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&d(n,C.extend(t,{offset:t.element.offset()}),t.options.tolerance,e))return!(i=!0)}),!i&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var d=C.ui.intersect=function(t,e,n,i){if(!e.offset)return!1;var r=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,s=r+t.helperProportions.width,a=o+t.helperProportions.height,l=e.offset.left,u=e.offset.top,c=l+e.proportions().width,h=u+e.proportions().height;switch(n){case"fit":return l<=r&&s<=c&&u<=o&&a<=h;case"intersect":return l<r+t.helperProportions.width/2&&s-t.helperProportions.width/2<c&&u<o+t.helperProportions.height/2&&a-t.helperProportions.height/2<h;case"pointer":return m(i.pageY,u,e.proportions().height)&&m(i.pageX,l,e.proportions().width);case"touch":return(u<=o&&o<=h||u<=a&&a<=h||o<u&&h<a)&&(l<=r&&r<=c||l<=s&&s<=c||r<l&&c<s);default:return!1}};function m(t,e,n){return e<=t&&t<e+n}!(C.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var n,i,r=C.ui.ddmanager.droppables[t.options.scope]||[],o=e?e.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<r.length;n++)if(!(r[n].options.disabled||t&&!r[n].accept.call(r[n].element[0],t.currentItem||t.element))){for(i=0;i<s.length;i++)if(s[i]===r[n].element[0]){r[n].proportions().height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===o&&r[n]._activate.call(r[n],e),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(t,e){var n=!1;return C.each((C.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&d(t,this,this.options.tolerance,e)&&(n=this._drop.call(this,e)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),n},dragStart:function(t,e){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||C.ui.ddmanager.prepareOffsets(t,e)})},drag:function(o,s){o.options.refreshPositions&&C.ui.ddmanager.prepareOffsets(o,s),C.each(C.ui.ddmanager.droppables[o.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,e,n,i=d(o,this,this.options.tolerance,s),r=!i&&this.isover?"isout":i&&!this.isover?"isover":null;r&&(this.options.greedy&&(e=this.options.scope,(n=this.element.parents(":data(ui-droppable)").filter(function(){return C(this).droppable("instance").options.scope===e})).length&&((t=C(n[0]).droppable("instance")).greedyChild="isover"===r)),t&&"isover"===r&&(t.isover=!1,t.isout=!0,t._out.call(t,s)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,s),t&&"isout"===r&&(t.isout=!1,t.isover=!0,t._over.call(t,s)))}})},dragStop:function(t,e){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||C.ui.ddmanager.prepareOffsets(t,e)}})!==C.uiBackCompat&&C.widget("ui.droppable",C.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});C.ui.droppable;C.widget("ui.resizable",C.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(t,e){if("hidden"===C(t).css("overflow"))return!1;var n,i=e&&"left"===e?"scrollLeft":"scrollTop";return 0<t[i]||(t[i]=1,n=0<t[i],t[i]=0,n)},_create:function(){var t,e=this.options,n=this;this._addClass("ui-resizable"),C.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(C("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),e.autoHide&&C(this.element).on("mouseenter",function(){e.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){e.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();function t(t){C(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()}var e;return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,e,n,i,r,o=this.options,s=this;if(this.handles=o.handles||(C(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=C(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},e=0;e<n.length;e++)i="ui-resizable-"+(t=C.trim(n[e])),r=C("<div>"),this._addClass(r,"ui-resizable-handle "+i),r.css({zIndex:o.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(r);this._renderAxis=function(t){var e,n,i,r;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=C(this.handles[e]),this._on(this.handles[e],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=C(this.handles[e],this.element),r=/sw|ne|nw|se|n|s/.test(e)?n.outerHeight():n.outerWidth(),i=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(i,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=r&&r[1]?r[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var e,n,i=!1;for(e in this.handles)(n=C(this.handles[e])[0])!==t.target&&!C.contains(n,t.target)||(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var e,n,i,r=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(e+=C(r.containment).scrollLeft()||0,n+=C(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:e,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=C(".ui-resizable-"+this.axis).css("cursor"),C("body").css("cursor","auto"===i?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e,n,i=this.originalMousePosition,r=this.axis,o=t.pageX-i.left||0,s=t.pageY-i.top||0,a=this._change[r];return this._updatePrevProperties(),a&&(e=a.apply(this,[t,o,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(e=this._updateRatio(e,t)),e=this._respectSize(e,t),this._updateCache(e),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),C.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges())),!1},_mouseStop:function(t){this.resizing=!1;var e,n,i,r,o,s,a,l=this.options,u=this;return this._helper&&(i=(n=(e=this._proportionallyResizeElements).length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:u.sizeDiff.height,r=n?0:u.sizeDiff.width,o={width:u.helper.width()-r,height:u.helper.height()-i},s=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,a=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(C.extend(o,{top:a,left:s})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),C("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,n,i,r,o,s=this.options;o={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),r<o.maxHeight&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,i=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===i&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===i&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,i=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,u=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(t.width=e.minWidth),s&&(t.height=e.minHeight),i&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),o&&u&&(t.left=a-e.minWidth),i&&u&&(t.left=a-e.maxWidth),s&&c&&(t.top=l-e.minHeight),r&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,n=[],i=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],r=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)n[e]=parseFloat(i[e])||0,n[e]+=parseFloat(r[e])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,n=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||C("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize;return{left:this.originalPosition.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(t,e,n){return C.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,n]))},sw:function(t,e,n){return C.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,n]))},ne:function(t,e,n){return C.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,n]))},nw:function(t,e,n){return C.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,n]))}},_propagate:function(t,e){C.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),C.ui.plugin.add("resizable","animate",{stop:function(e){var n=C(this).resizable("instance"),t=n.options,i=n._proportionallyResizeElements,r=i.length&&/textarea/i.test(i[0].nodeName),o=r&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,s=r?0:n.sizeDiff.width,a={width:n.size.width-s,height:n.size.height-o},l=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(C.extend(a,u&&l?{top:u,left:l}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};i&&i.length&&C(i[0]).css({width:t.width,height:t.height}),n._updateCache(t),n._propagate("resize",e)}})}}),C.ui.plugin.add("resizable","containment",{start:function(){var n,i,t,e,r,o,s,a=C(this).resizable("instance"),l=a.options,u=a.element,c=l.containment,h=c instanceof C?c.get(0):/parent/.test(c)?u.parent().get(0):c;h&&(a.containerElement=C(h),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:C(document),left:0,top:0,width:C(document).width(),height:C(document).height()||document.body.parentNode.scrollHeight}):(n=C(h),i=[],C(["Top","Right","Left","Bottom"]).each(function(t,e){i[t]=a._num(n.css("padding"+e))}),a.containerOffset=n.offset(),a.containerPosition=n.position(),a.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},t=a.containerOffset,e=a.containerSize.height,r=a.containerSize.width,o=a._hasScroll(h,"left")?h.scrollWidth:r,s=a._hasScroll(h)?h.scrollHeight:e,a.parentData={element:h,left:t.left,top:t.top,width:o,height:s}))},resize:function(t){var e,n,i,r,o=C(this).resizable("instance"),s=o.options,a=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),l.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=s.helper?a.left:0),l.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?a.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),r=/relative|absolute/.test(o.containerElement.css("position")),i&&r?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),e=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-a.left)),n=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-a.top)),e+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-e,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=C(this).resizable("instance"),e=t.options,n=t.containerOffset,i=t.containerPosition,r=t.containerElement,o=C(t.helper),s=o.offset(),a=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(r.css("position"))&&C(this).css({left:s.left-i.left-n.left,width:a,height:l}),t._helper&&!e.animate&&/static/.test(r.css("position"))&&C(this).css({left:s.left-i.left-n.left,width:a,height:l})}}),C.ui.plugin.add("resizable","alsoResize",{start:function(){var t=C(this).resizable("instance").options;C(t.alsoResize).each(function(){var t=C(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var e=C(this).resizable("instance"),i=e.options,r=e.originalSize,o=e.originalPosition,s={height:e.size.height-r.height||0,width:e.size.width-r.width||0,top:e.position.top-o.top||0,left:e.position.left-o.left||0};C(i.alsoResize).each(function(){var t=C(this),i=C(this).data("ui-resizable-alsoresize"),r={},e=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];C.each(e,function(t,e){var n=(i[e]||0)+(s[e]||0);n&&0<=n&&(r[e]=n||null)}),t.css(r)})},stop:function(){C(this).removeData("ui-resizable-alsoresize")}}),C.ui.plugin.add("resizable","ghost",{start:function(){var t=C(this).resizable("instance"),e=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==C.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=C(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=C(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),C.ui.plugin.add("resizable","grid",{resize:function(){var t,e=C(this).resizable("instance"),n=e.options,i=e.size,r=e.originalSize,o=e.originalPosition,s=e.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=a[0]||1,u=a[1]||1,c=Math.round((i.width-r.width)/l)*l,h=Math.round((i.height-r.height)/u)*u,p=r.width+c,f=r.height+h,d=n.maxWidth&&n.maxWidth<p,m=n.maxHeight&&n.maxHeight<f,g=n.minWidth&&n.minWidth>p,y=n.minHeight&&n.minHeight>f;n.grid=a,g&&(p+=l),y&&(f+=u),d&&(p-=l),m&&(f-=u),/^(se|s|e)$/.test(s)?(e.size.width=p,e.size.height=f):/^(ne)$/.test(s)?(e.size.width=p,e.size.height=f,e.position.top=o.top-h):/^(sw)$/.test(s)?(e.size.width=p,e.size.height=f,e.position.left=o.left-c):((f-u<=0||p-l<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),0<f-u?(e.size.height=f,e.position.top=o.top-h):(f=u-t.height,e.size.height=f,e.position.top=o.top+r.height-f),0<p-l?(e.size.width=p,e.position.left=o.left-c):(p=l-t.width,e.size.width=p,e.position.left=o.left+r.width-p))}});C.ui.resizable,C.widget("ui.selectable",C.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var i=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){i.elementPos=C(i.element[0]).offset(),i.selectees=C(i.options.filter,i.element[0]),i._addClass(i.selectees,"ui-selectee"),i.selectees.each(function(){var t=C(this),e=t.offset(),n={left:e.left-i.elementPos.left,top:e.top-i.elementPos.top};C.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=C("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(n){var i=this,t=this.options;this.opos=[n.pageX,n.pageY],this.elementPos=C(this.element[0]).offset(),this.options.disabled||(this.selectees=C(t.filter,this.element[0]),this._trigger("start",n),C(t.appendTo).append(this.helper),this.helper.css({left:n.pageX,top:n.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=C.data(this,"selectable-item");t.startselected=!0,n.metaKey||n.ctrlKey||(i._removeClass(t.$element,"ui-selected"),t.selected=!1,i._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element}))}),C(n.target).parents().addBack().each(function(){var t,e=C.data(this,"selectable-item");if(e)return t=!n.metaKey&&!n.ctrlKey||!e.$element.hasClass("ui-selected"),i._removeClass(e.$element,t?"ui-unselecting":"ui-selected")._addClass(e.$element,t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?i._trigger("selecting",n,{selecting:e.element}):i._trigger("unselecting",n,{unselecting:e.element}),!1}))},_mouseDrag:function(i){if(this.dragged=!0,!this.options.disabled){var t,r=this,o=this.options,s=this.opos[0],a=this.opos[1],l=i.pageX,u=i.pageY;return l<s&&(t=l,l=s,s=t),u<a&&(t=u,u=a,a=t),this.helper.css({left:s,top:a,width:l-s,height:u-a}),this.selectees.each(function(){var t=C.data(this,"selectable-item"),e=!1,n={};t&&t.element!==r.element[0]&&(n.left=t.left+r.elementPos.left,n.right=t.right+r.elementPos.left,n.top=t.top+r.elementPos.top,n.bottom=t.bottom+r.elementPos.top,"touch"===o.tolerance?e=!(n.left>l||n.right<s||n.top>u||n.bottom<a):"fit"===o.tolerance&&(e=n.left>s&&n.right<l&&n.top>a&&n.bottom<u),e?(t.selected&&(r._removeClass(t.$element,"ui-selected"),t.selected=!1),t.unselecting&&(r._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1),t.selecting||(r._addClass(t.$element,"ui-selecting"),t.selecting=!0,r._trigger("selecting",i,{selecting:t.element}))):(t.selecting&&((i.metaKey||i.ctrlKey)&&t.startselected?(r._removeClass(t.$element,"ui-selecting"),t.selecting=!1,r._addClass(t.$element,"ui-selected"),t.selected=!0):(r._removeClass(t.$element,"ui-selecting"),t.selecting=!1,t.startselected&&(r._addClass(t.$element,"ui-unselecting"),t.unselecting=!0),r._trigger("unselecting",i,{unselecting:t.element}))),t.selected&&(i.metaKey||i.ctrlKey||t.startselected||(r._removeClass(t.$element,"ui-selected"),t.selected=!1,r._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,r._trigger("unselecting",i,{unselecting:t.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,C(".ui-unselecting",this.element[0]).each(function(){var t=C.data(this,"selectable-item");n._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1,t.startselected=!1,n._trigger("unselected",e,{unselected:t.element})}),C(".ui-selecting",this.element[0]).each(function(){var t=C.data(this,"selectable-item");n._removeClass(t.$element,"ui-selecting")._addClass(t.$element,"ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,n._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),C.widget("ui.sortable",C.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return e<=t&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),C.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var n=null,i=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),C(t.target).parents().each(function(){if(C.data(this,r.widgetName+"-item")===r)return n=C(this),!1}),C.data(t.target,r.widgetName+"-item")===r&&(n=C(t.target)),!!n&&(!(this.options.handle&&!e&&(C(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,n){var i,r,o=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},C.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=C("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(i=this.containers.length-1;0<=i;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return C.ui.ddmanager&&(C.ui.ddmanager.current=this),C.ui.ddmanager&&!o.dropBehaviour&&C.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,n,i,r,o=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==s&&C.ui.ddmanager&&!o.dropBehaviour&&C.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(i=(n=this.items[e]).item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===i||C.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&C.contains(this.element[0],i))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),C.ui.ddmanager&&C.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(C.ui.ddmanager&&!this.options.dropBehaviour&&C.ui.ddmanager.drop(this,t),this.options.revert){var n=this,i=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,C(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new C.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),C.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?C(this.domPosition.prev).after(this.currentItem):C(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},C(t).each(function(){var t=(C(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&n.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e.each(function(){n.push(C(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=t.left,s=o+t.width,a=t.top,l=a+t.height,u=this.offset.click.top,c=this.offset.click.left,h="x"===this.options.axis||a<i+u&&i+u<l,p="y"===this.options.axis||o<e+c&&e+c<s,f=h&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:o<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!(!i||!r)&&(e=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var e,n,i,r,o=[],s=[],a=this._connectWith();if(a&&t)for(e=a.length-1;0<=e;e--)for(n=(i=C(a[e],this.document[0])).length-1;0<=n;n--)(r=C.data(i[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&s.push([C.isFunction(r.options.items)?r.options.items.call(r.element):C(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);function l(){o.push(this)}for(s.push([C.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):C(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),e=s.length-1;0<=e;e--)s[e][0].each(l);return C(o)},_removeCurrentsFromItems:function(){var n=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=C.grep(this.items,function(t){for(var e=0;e<n.length;e++)if(n[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,n,i,r,o,s,a,l,u=this.items,c=[[C.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):C(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(e=h.length-1;0<=e;e--)for(n=(i=C(h[e],this.document[0])).length-1;0<=n;n--)(r=C.data(i[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(c.push([C.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):C(r.options.items,r.element),r]),this.containers.push(r));for(e=c.length-1;0<=e;e--)for(o=c[e][1],n=0,l=(s=c[e][0]).length;n<l;n++)(a=C(s[n])).data(this.widgetName+"-item",o),u.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,n,i,r;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(n=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?C(this.options.toleranceElement,n.item):n.item,t||(n.width=i.outerWidth(),n.height=i.outerHeight()),r=i.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)r=this.containers[e].element.offset(),this.containers[e].containerCache.left=r.left,this.containers[e].containerCache.top=r.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(n){var i,r=(n=n||this).options;r.placeholder&&r.placeholder.constructor!==String||(i=r.placeholder,r.placeholder={element:function(){var t=n.currentItem[0].nodeName.toLowerCase(),e=C("<"+t+">",n.document[0]);return n._addClass(e,"ui-sortable-placeholder",i||n.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===t?n._createTrPlaceholder(n.currentItem.find("tr").eq(0),C("<tr>",n.document[0]).appendTo(e)):"tr"===t?n._createTrPlaceholder(n.currentItem,e):"img"===t&&e.attr("src",n.currentItem.attr("src")),i||e.css("visibility","hidden"),e},update:function(t,e){i&&!r.forcePlaceholderSize||(e.height()||e.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=C(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_createTrPlaceholder:function(t,e){var n=this;t.children().each(function(){C("<td>&#160;</td>",n.document[0]).attr("colspan",C(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,n,i,r,o,s,a,l,u,c,h=null,p=null;for(e=this.containers.length-1;0<=e;e--)if(!C.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(h&&C.contains(this.containers[e].element[0],h.element[0]))continue;h=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(i=1e4,r=null,o=(u=h.floating||this._isFloating(this.currentItem))?"left":"top",s=u?"width":"height",c=u?"pageX":"pageY",n=this.items.length-1;0<=n;n--)C.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(a=this.items[n].item.offset()[o],l=!1,t[c]-a>this.items[n][s]/2&&(l=!0),Math.abs(t[c]-a)<i&&(i=Math.abs(t[c]-a),r=this.items[n],this.direction=l?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var e=this.options,n=C.isFunction(e.helper)?C(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||C("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!e.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!e.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),C.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&C.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&C.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=C(i.containment)[0],e=C(i.containment).offset(),n="hidden"!==C(t).css("overflow"),this.containment=[e.left+(parseInt(C(t).css("borderLeftWidth"),10)||0)+(parseInt(C(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(C(t).css("borderTopWidth"),10)||0)+(parseInt(C(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(C(t).css("borderLeftWidth"),10)||0)-(parseInt(C(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(C(t).css("borderTopWidth"),10)||0)-(parseInt(C(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&C.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop())*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())*n}},_generatePosition:function(t){var e,n,i=this.options,r=t.pageX,o=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&C.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(e=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-i.grid[1]:e+i.grid[1]:e,n=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:s.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:s.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function r(e,n,i){return function(t){i._trigger(e,t,n._uiHash(n))}}for(this.fromOutside&&!e&&i.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||i.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(i.push(function(t){this._trigger("remove",t,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;0<=n;n--)e||i.push(r("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(r("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===C.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||C([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}}),C.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=C(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():C()}},_createIcons:function(){var t,e,n=this.options.icons;n&&(t=C("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+n.header),t.prependTo(this.headers),e=this.active.children(".ui-accordion-header-icon"),this._removeClass(e,n.header)._addClass(e,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons())):this._activate(e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var e=C.ui.keyCode,n=this.headers.length,i=this.headers.index(t.target),r=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:r=this.headers[(i+1)%n];break;case e.LEFT:case e.UP:r=this.headers[(i-1+n)%n];break;case e.SPACE:case e.ENTER:this._eventHandler(t);break;case e.HOME:r=this.headers[0];break;case e.END:r=this.headers[n-1]}r&&(C(t.target).attr("tabIndex",-1),C(r).attr("tabIndex",0),C(r).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===C.ui.keyCode.UP&&t.ctrlKey&&C(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=C()):!1===t.active?this._activate(0):this.active.length&&!C.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=C()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var n,t=this.options,e=t.heightStyle,i=this.element.parent();this.active=this._findActive(t.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var t=C(this),e=t.uniqueId().attr("id"),n=t.next(),i=n.uniqueId().attr("id");t.attr("aria-controls",i),n.attr("aria-labelledby",e)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(t.event),"fill"===e?(n=i.height(),this.element.siblings(":visible").each(function(){var t=C(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(n-=t.outerHeight(!0))}),this.headers.each(function(){n-=C(this).outerHeight(!0)}),this.headers.next().each(function(){C(this).height(Math.max(0,n-C(this).innerHeight()+C(this).height()))}).css("overflow","auto")):"auto"===e&&(n=0,this.headers.next().each(function(){var t=C(this).is(":visible");t||C(this).show(),n=Math.max(n,C(this).css("height","").height()),t||C(this).hide()}).height(n))},_activate:function(t){var e=this._findActive(t)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:C.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):C()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&C.each(t.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var e,n,i=this.options,r=this.active,o=C(t.currentTarget),s=o[0]===r[0],a=s&&i.collapsible,l=a?C():o.next(),u=r.next(),c={oldHeader:r,oldPanel:u,newHeader:a?C():o,newPanel:l};t.preventDefault(),s&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!a&&this.headers.index(o),this.active=s?C():o,this._toggle(c),this._removeClass(r,"ui-accordion-header-active","ui-state-active"),i.icons&&(e=r.children(".ui-accordion-header-icon"),this._removeClass(e,null,i.icons.activeHeader)._addClass(e,null,i.icons.header)),s||(this._removeClass(o,"ui-accordion-header-collapsed")._addClass(o,"ui-accordion-header-active","ui-state-active"),i.icons&&(n=o.children(".ui-accordion-header-icon"),this._removeClass(n,null,i.icons.header)._addClass(n,null,i.icons.activeHeader)),this._addClass(o.next(),"ui-accordion-content-active")))},_toggle:function(t){var e=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=e,this.prevHide=n,this.options.animate?this._animate(e,n,t):(n.hide(),e.show(),this._toggleComplete(t)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),e.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):e.length&&this.headers.filter(function(){return 0===parseInt(C(this).attr("tabIndex"),10)}).attr("tabIndex",-1),e.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,n,e){function i(){a._toggleComplete(e)}var r,o,s,a=this,l=0,u=t.css("box-sizing"),c=t.length&&(!n.length||t.index()<n.index()),h=this.options.animate||{},p=c&&h.down||h;return"number"==typeof p&&(s=p),"string"==typeof p&&(o=p),o=o||p.easing||h.easing,s=s||p.duration||h.duration,n.length?t.length?(r=t.show().outerHeight(),n.animate(this.hideProps,{duration:s,easing:o,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:s,easing:o,complete:i,step:function(t,e){e.now=Math.round(t),"height"!==e.prop?"content-box"===u&&(l+=e.now):"content"!==a.options.heightStyle&&(e.now=Math.round(r-n.outerHeight()-l),l=0)}})):n.animate(this.hideProps,s,o,i):t.animate(this.showProps,s,o,i)},_toggleComplete:function(t){var e=t.oldPanel,n=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(n,"ui-accordion-header-active")._addClass(n,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),C.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(t){var e=C(t.target),n=C(C.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var e=C(t.target).closest(".ui-menu-item"),n=C(t.currentTarget);e[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(t){this._delay(function(){C.contains(this.element[0],C.ui.safeActiveElement(this.document[0]))||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each(function(){var t=C(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var e,n,i,r,o=!0;switch(t.keyCode){case C.ui.keyCode.PAGE_UP:this.previousPage(t);break;case C.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case C.ui.keyCode.HOME:this._move("first","first",t);break;case C.ui.keyCode.END:this._move("last","last",t);break;case C.ui.keyCode.UP:this.previous(t);break;case C.ui.keyCode.DOWN:this.next(t);break;case C.ui.keyCode.LEFT:this.collapse(t);break;case C.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case C.ui.keyCode.ENTER:case C.ui.keyCode.SPACE:this._activate(t);break;case C.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,n=this.previousFilter||"",r=!1,i=96<=t.keyCode&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),i===n?r=!0:i=n+i,e=this._filterMenuItems(i),(e=r&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(i=String.fromCharCode(t.keyCode),e=this._filterMenuItems(i)),e.length?(this.focus(t,e),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var t,e,n,i,r=this,o=this.options.icons.submenu,s=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),e=s.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=C(this),e=t.prev(),n=C("<span>").data("ui-menu-submenu-caret",!0);r._addClass(n,"ui-menu-icon","ui-icon "+o),e.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",e.attr("id"))}),this._addClass(e,"ui-menu","ui-widget ui-widget-content ui-front"),(t=s.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=C(this);r._isDivider(t)&&r._addClass(t,"ui-menu-divider","ui-widget-content")}),i=(n=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(i,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!C.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var n,i,r;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(r,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(n=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,n,i,r,o,s;this._hasScroll()&&(e=parseFloat(C.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(C.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-n,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=t.outerHeight(),i<0?this.activeMenu.scrollTop(r+i):o<i+s&&this.activeMenu.scrollTop(r+i-o+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=C.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var t=n?this.element:C(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this._removeClass(t.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=t},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!C(t.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[e]()),this.focus(n,i)},nextPage:function(t){var e,n,i;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=C(this)).offset().top-n-i<0}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var e,n,i;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=C(this)).offset().top-n+i}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||C(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)},_filterMenuItems:function(t){var e=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(C.trim(C(this).children(".ui-menu-item-wrapper").text()))})}});C.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var n,i,r,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,o="input"===t;this.isMultiLine=e||!o&&this._isContentEditable(this.element),this.valueMethod=this.element[e||o?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))i=r=n=!0;else{i=r=n=!1;var e=C.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:n=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:n=!0,this._move("nextPage",t);break;case e.UP:n=!0,this._keyEvent("previous",t);break;case e.DOWN:n=!0,this._keyEvent("next",t);break;case e.ENTER:this.menu.active&&(n=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(t),t.preventDefault());break;default:i=!0,this._searchTimeout(t)}}},keypress:function(t){if(n)return n=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||t.preventDefault());if(!i){var e=C.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){if(r)return r=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=C("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==C.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,e){var n,i;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){C(t.target).trigger(t.originalEvent)});i=e.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),(n=e.item.attr("aria-label")||i.value)&&C.trim(n).length&&(this.liveRegion.children().hide(),C("<div>").text(n).appendTo(this.liveRegion))},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==C.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=C("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var e=this.menu.element[0];return t.target===this.element[0]||t.target===e||C.contains(e,t.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?C(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var n,i,r=this;C.isArray(this.options.source)?(n=this.options.source,this.source=function(t,e){e(C.ui.autocomplete.filter(n,t.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,e){r.xhr&&r.xhr.abort(),r.xhr=C.ajax({url:i,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(i){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),e=this.menu.element.is(":visible"),n=i.altKey||i.ctrlKey||i.metaKey||i.shiftKey;t&&(!t||e||n)||(this.selectedItem=null,this.search(null,i))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return C.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:C.map(t,function(t){return"string"==typeof t?{label:t,value:t}:C.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(C.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(n,t){var i=this;C.each(t,function(t,e){i._renderItemData(n,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return C("<li>").append(C("<div>").text(e.label)).appendTo(t)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),C.extend(C.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var n=new RegExp(C.ui.autocomplete.escapeRegex(e),"i");return C.grep(t,function(t){return n.test(t.label||t.value||t)})}}),C.widget("ui.autocomplete",C.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),C("<div>").text(e).appendTo(this.liveRegion))}});C.ui.autocomplete;var g=/ui-corner-([a-z]){2,6}/g;C.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var s=this,a=[];C.each(this.options.items,function(r,t){var e,o={};if(t)return"controlgroupLabel"===r?((e=s.element.find(t)).each(function(){var t=C(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),s._addClass(e,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(e.get()))):void(C.fn[r]&&(o=s["_"+r+"Options"]?s["_"+r+"Options"]("middle"):{classes:{}},s.element.find(t).each(function(){var t=C(this),e=t[r]("instance"),n=C.widget.extend({},o);if("button"!==r||!t.parent(".ui-spinner").length){e||(e=t[r]()[r]("instance")),e&&(n.classes=s._resolveClassesValues(n.classes,e)),t[r](n);var i=t[r]("widget");C.data(i[0],"ui-controlgroup-data",e||t[r]("instance")),a.push(i[0])}})))}),this.childWidgets=C(C.uniqueSort(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var t=C(this).data("ui-controlgroup-data");t&&t[e]&&t[e]()})},_updateCornerClass:function(t,e){var n=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,n)},_buildSimpleOptions:function(t,e){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[e]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[t],i},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(n,i){var r={};return C.each(n,function(t){var e=i.options.classes[t]||"";e=C.trim(e.replace(g,"")),r[t]=(e+" "+n[t]).replace(/\s+/g," ")}),r},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"!==t?this.refresh():this._callChildMethod(e?"disable":"enable")},refresh:function(){var r,o=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),r=this.childWidgets,this.options.onlyVisible&&(r=r.filter(":visible")),r.length&&(C.each(["first","last"],function(t,e){var n=r[e]().data("ui-controlgroup-data");if(n&&o["_"+n.widgetName+"Options"]){var i=o["_"+n.widgetName+"Options"](1===r.length?"only":e);i.classes=o._resolveClassesValues(i.classes,n),n.element[n.widgetName](i)}else o._updateCornerClass(r[e](),e)}),this._callChildMethod("refresh"))}});C.widget("ui.checkboxradio",[C.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,e,n=this,i=this._super()||{};return this._readType(),e=this.element.labels(),this.label=C(e[e.length-1]),this.label.length||C.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){n.originalLabel+=3===this.nodeType?C(this).text():this.outerHTML}),this.originalLabel&&(i.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(i.disabled=t),i},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||C.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,e="input[name='"+C.ui.escapeSelector(t)+"']";return t?(this.form.length?C(this.form[0].elements).filter(e):C(e).filter(function(){return 0===C(this).form().length})).not(this.element):C([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=C(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(t){var e="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=C("<span>"),this.iconSpace=C("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(e+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):e+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",e),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]);var y;C.ui.checkboxradio;C.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===C.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,e){var n="iconPosition"!==t,i=n?this.options.iconPosition:e,r="top"===i||"bottom"===i;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=C("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,e),this._attachIcon(i),r?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=C("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(i))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,n=void 0===t.icon?this.options.icon:t.icon;e||n||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),(this.element[0].disabled=e)&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==C.uiBackCompat&&(C.widget("ui.button",C.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),C.fn.button=(y=C.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?y.apply(this,arguments):(C.ui.checkboxradio||C.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),C.fn.buttonset=function(){return C.ui.controlgroup||C.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});var v;C.ui.button;function _(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},C.extend(this._defaults,this.regional[""]),this.regional.en=C.extend(!0,{},this.regional[""]),this.regional["en-US"]=C.extend(!0,{},this.regional.en),this.dpDiv=b(C("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function b(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",e,function(){C(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",e,w)}function w(){C.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(C(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),C(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).addClass("ui-datepicker-next-hover"))}function k(t,e){for(var n in C.extend(t,e),e)null==e[n]&&(t[n]=e[n]);return t}C.extend(C.ui,{datepicker:{version:"1.12.1"}}),C.extend(_.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return k(this._defaults,t||{}),this},_attachDatepicker:function(t,e){var n,i,r;i="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(r=this._newInst(C(t),i)).settings=C.extend({},e||{}),"input"===n?this._connectDatepicker(t,r):i&&this._inlineDatepicker(t,r)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?b(C("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,e){var n=C(t);e.append=C([]),e.trigger=C([]),n.hasClass(this.markerClassName)||(this._attachments(n,e),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(e),C.data(t,"datepicker",e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var n,i,r,o=this._get(e,"appendText"),s=this._get(e,"isRTL");e.append&&e.append.remove(),o&&(e.append=C("<span class='"+this._appendClass+"'>"+o+"</span>"),t[s?"before":"after"](e.append)),t.off("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),"focus"!==(n=this._get(e,"showOn"))&&"both"!==n||t.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(i=this._get(e,"buttonText"),r=this._get(e,"buttonImage"),e.trigger=C(this._get(e,"buttonImageOnly")?C("<img/>").addClass(this._triggerClass).attr({src:r,alt:i,title:i}):C("<button type='button'></button>").addClass(this._triggerClass).html(r?C("<img/>").attr({src:r,alt:i,title:i}):i)),t[s?"before":"after"](e.trigger),e.trigger.on("click",function(){return C.datepicker._datepickerShowing&&C.datepicker._lastInput===t[0]?C.datepicker._hideDatepicker():(C.datepicker._datepickerShowing&&C.datepicker._lastInput!==t[0]&&C.datepicker._hideDatepicker(),C.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,r,o=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(r=i=n=0;r<t.length;r++)t[r].length>n&&(n=t[r].length,i=r);return i},o.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(t,e){var n=C(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(e.dpDiv),C.data(t,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,n,i,r){var o,s,a,l,u,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=C("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),C("body").append(this._dialogInput),(c=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},C.data(this._dialogInput[0],"datepicker",c)),k(c.settings,i||{}),e=e&&e.constructor===Date?this._formatDate(c,e):e,this._dialogInput.val(e),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(s=document.documentElement.clientWidth,a=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[s/2-100+l,a/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),C.blockUI&&C.blockUI(this.dpDiv),C.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var e,n=C(t),i=C.data(t,"datepicker");n.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),C.removeData(t,"datepicker"),"input"===e?(i.append.remove(),i.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==e&&"span"!==e||n.removeClass(this.markerClassName).empty(),v===i&&(v=null))},_enableDatepicker:function(e){var t,n,i=C(e),r=C.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=C.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var t,n,i=C(e),r=C.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=C.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(t){try{return C.data(t,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,n){var i,r,o,s,a=this._getInst(t);if(2===arguments.length&&"string"==typeof e)return"defaults"===e?C.extend({},C.datepicker._defaults):a?"all"===e?C.extend({},a.settings):this._get(a,e):null;i=e||{},"string"==typeof e&&((i={})[e]=n),a&&(this._curInst===a&&this._hideDatepicker(),r=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(a,"min"),s=this._getMinMaxDate(a,"max"),k(a.settings,i),null!==o&&void 0!==i.dateFormat&&void 0===i.minDate&&(a.settings.minDate=this._formatDate(a,o)),null!==s&&void 0!==i.dateFormat&&void 0===i.maxDate&&(a.settings.maxDate=this._formatDate(a,s)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(C(t),a),this._autoSize(a),this._setDate(a,r),this._updateAlternate(a),this._updateDatepicker(a))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(t){var e,n,i,r=C.datepicker._getInst(t.target),o=!0,s=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,C.datepicker._datepickerShowing)switch(t.keyCode){case 9:C.datepicker._hideDatepicker(),o=!1;break;case 13:return(i=C("td."+C.datepicker._dayOverClass+":not(."+C.datepicker._currentClass+")",r.dpDiv))[0]&&C.datepicker._selectDay(t.target,r.selectedMonth,r.selectedYear,i[0]),(e=C.datepicker._get(r,"onSelect"))?(n=C.datepicker._formatDate(r),e.apply(r.input?r.input[0]:null,[n,r])):C.datepicker._hideDatepicker(),!1;case 27:C.datepicker._hideDatepicker();break;case 33:C.datepicker._adjustDate(t.target,t.ctrlKey?-C.datepicker._get(r,"stepBigMonths"):-C.datepicker._get(r,"stepMonths"),"M");break;case 34:C.datepicker._adjustDate(t.target,t.ctrlKey?+C.datepicker._get(r,"stepBigMonths"):+C.datepicker._get(r,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&C.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&C.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,s?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&C.datepicker._adjustDate(t.target,t.ctrlKey?-C.datepicker._get(r,"stepBigMonths"):-C.datepicker._get(r,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,s?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&C.datepicker._adjustDate(t.target,t.ctrlKey?+C.datepicker._get(r,"stepBigMonths"):+C.datepicker._get(r,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?C.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,n,i=C.datepicker._getInst(t.target);if(C.datepicker._get(i,"constrainInput"))return e=C.datepicker._possibleChars(C.datepicker._get(i,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!e||-1<e.indexOf(n)},_doKeyUp:function(t){var e=C.datepicker._getInst(t.target);if(e.input.val()!==e.lastVal)try{C.datepicker.parseDate(C.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,C.datepicker._getFormatConfig(e))&&(C.datepicker._setDateFromField(e),C.datepicker._updateAlternate(e),C.datepicker._updateDatepicker(e))}catch(t){}return!0},_showDatepicker:function(t){var e,n,i,r,o,s,a;"input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=C("input",t.parentNode)[0]),C.datepicker._isDisabledDatepicker(t)||C.datepicker._lastInput===t||(e=C.datepicker._getInst(t),C.datepicker._curInst&&C.datepicker._curInst!==e&&(C.datepicker._curInst.dpDiv.stop(!0,!0),e&&C.datepicker._datepickerShowing&&C.datepicker._hideDatepicker(C.datepicker._curInst.input[0])),!1!==(i=(n=C.datepicker._get(e,"beforeShow"))?n.apply(t,[t,e]):{})&&(k(e.settings,i),e.lastVal=null,C.datepicker._lastInput=t,C.datepicker._setDateFromField(e),C.datepicker._inDialog&&(t.value=""),C.datepicker._pos||(C.datepicker._pos=C.datepicker._findPos(t),C.datepicker._pos[1]+=t.offsetHeight),r=!1,C(t).parents().each(function(){return!(r|="fixed"===C(this).css("position"))}),o={left:C.datepicker._pos[0],top:C.datepicker._pos[1]},C.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),C.datepicker._updateDatepicker(e),o=C.datepicker._checkOffset(e,o,r),e.dpDiv.css({position:C.datepicker._inDialog&&C.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),e.inline||(s=C.datepicker._get(e,"showAnim"),a=C.datepicker._get(e,"duration"),e.dpDiv.css("z-index",function(t){for(var e,n;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(t.css("zIndex"),10),!isNaN(n)&&0!==n))return n;t=t.parent()}return 0}(C(t))+1),C.datepicker._datepickerShowing=!0,C.effects&&C.effects.effect[s]?e.dpDiv.show(s,C.datepicker._get(e,"showOptions"),a):e.dpDiv[s||"show"](s?a:null),C.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),C.datepicker._curInst=e)))},_updateDatepicker:function(t){this.maxRows=4,(v=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var e,n=this._getNumberOfMonths(t),i=n[1],r=t.dpDiv.find("."+this._dayOverClass+" a");0<r.length&&w.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<i&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",17*i+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===C.datepicker._curInst&&C.datepicker._datepickerShowing&&C.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(t,e,n){var i=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(n?0:C(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:C(document).scrollTop());return e.left-=this._get(t,"isRTL")?i-o:0,e.left-=n&&e.left===t.input.offset().left?C(document).scrollLeft():0,e.top-=n&&e.top===t.input.offset().top+s?C(document).scrollTop():0,e.left-=Math.min(e.left,e.left+i>a&&i<a?Math.abs(e.left+i-a):0),e.top-=Math.min(e.top,e.top+r>l&&r<l?Math.abs(r+s):0),e},_findPos:function(t){for(var e,n=this._getInst(t),i=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||C.expr.pseudos.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return[(e=C(t).offset()).left,e.top]},_hideDatepicker:function(t){var e,n,i,r,o=this._curInst;!o||t&&o!==C.data(t,"datepicker")||this._datepickerShowing&&(e=this._get(o,"showAnim"),n=this._get(o,"duration"),i=function(){C.datepicker._tidyDialog(o)},C.effects&&(C.effects.effect[e]||C.effects[e])?o.dpDiv.hide(e,C.datepicker._get(o,"showOptions"),n,i):o.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?n:null,i),e||i(),this._datepickerShowing=!1,(r=this._get(o,"onClose"))&&r.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),C.blockUI&&(C.unblockUI(),C("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(C.datepicker._curInst){var e=C(t.target),n=C.datepicker._getInst(e[0]);(e[0].id===C.datepicker._mainDivId||0!==e.parents("#"+C.datepicker._mainDivId).length||e.hasClass(C.datepicker.markerClassName)||e.closest("."+C.datepicker._triggerClass).length||!C.datepicker._datepickerShowing||C.datepicker._inDialog&&C.blockUI)&&(!e.hasClass(C.datepicker.markerClassName)||C.datepicker._curInst===n)||C.datepicker._hideDatepicker()}},_adjustDate:function(t,e,n){var i=C(t),r=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(r,e+("M"===n?this._get(r,"showCurrentAtPos"):0),n),this._updateDatepicker(r))},_gotoToday:function(t){var e,n=C(t),i=this._getInst(n[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(e=new Date,i.selectedDay=e.getDate(),i.drawMonth=i.selectedMonth=e.getMonth(),i.drawYear=i.selectedYear=e.getFullYear()),this._notifyChange(i),this._adjustDate(n)},_selectMonthYear:function(t,e,n){var i=C(t),r=this._getInst(i[0]);r["selected"+("M"===n?"Month":"Year")]=r["draw"+("M"===n?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(i)},_selectDay:function(t,e,n,i){var r,o=C(t);C(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((r=this._getInst(o[0])).selectedDay=r.currentDay=C("a",i).html(),r.selectedMonth=r.currentMonth=e,r.selectedYear=r.currentYear=n,this._selectDate(t,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(t){var e=C(t);this._selectDate(e,"")},_selectDate:function(t,e){var n,i=C(t),r=this._getInst(i[0]);e=null!=e?e:this._formatDate(r),r.input&&r.input.val(e),this._updateAlternate(r),(n=this._get(r,"onSelect"))?n.apply(r.input?r.input[0]:null,[e,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var e,n,i,r=this._get(t,"altField");r&&(e=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),i=this.formatDate(e,n,this._getFormatConfig(t)),C(r).val(i))},noWeekends:function(t){var e=t.getDay();return[0<e&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(n,o,t){if(null==n||null==o)throw"Invalid arguments";if(""===(o="object"==typeof o?o.toString():o+""))return null;function s(t){var e=a+1<n.length&&n.charAt(a+1)===t;return e&&a++,e}function e(t){var e=s(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,i=new RegExp("^\\d{"+("y"===t?n:1)+","+n+"}"),r=o.substring(h).match(i);if(!r)throw"Missing number at position "+h;return h+=r[0].length,parseInt(r[0],10)}function i(t,e,n){var i=-1,r=C.map(s(t)?n:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(C.each(r,function(t,e){var n=e[1];if(o.substr(h,n.length).toLowerCase()===n.toLowerCase())return i=e[0],h+=n.length,!1}),-1!==i)return i+1;throw"Unknown name at position "+h}function r(){if(o.charAt(h)!==n.charAt(a))throw"Unexpected literal at position "+h;h++}var a,l,u,c,h=0,p=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,f="string"!=typeof p?p:(new Date).getFullYear()%100+parseInt(p,10),d=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,m=(t?t.dayNames:null)||this._defaults.dayNames,g=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,y=(t?t.monthNames:null)||this._defaults.monthNames,v=-1,_=-1,b=-1,w=-1,x=!1;for(a=0;a<n.length;a++)if(x)"'"!==n.charAt(a)||s("'")?r():x=!1;else switch(n.charAt(a)){case"d":b=e("d");break;case"D":i("D",d,m);break;case"o":w=e("o");break;case"m":_=e("m");break;case"M":_=i("M",g,y);break;case"y":v=e("y");break;case"@":v=(c=new Date(e("@"))).getFullYear(),_=c.getMonth()+1,b=c.getDate();break;case"!":v=(c=new Date((e("!")-this._ticksTo1970)/1e4)).getFullYear(),_=c.getMonth()+1,b=c.getDate();break;case"'":s("'")?r():x=!0;break;default:r()}if(h<o.length&&(u=o.substr(h),!/^\s+/.test(u)))throw"Extra/unparsed characters found in date: "+u;if(-1===v?v=(new Date).getFullYear():v<100&&(v+=(new Date).getFullYear()-(new Date).getFullYear()%100+(v<=f?0:-100)),-1<w)for(_=1,b=w;;){if(b<=(l=this._getDaysInMonth(v,_-1)))break;_++,b-=l}if((c=this._daylightSavingAdjust(new Date(v,_-1,b))).getFullYear()!==v||c.getMonth()+1!==_||c.getDate()!==b)throw"Invalid date";return c},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(n,t,e){if(!t)return"";function r(t){var e=s+1<n.length&&n.charAt(s+1)===t;return e&&s++,e}function i(t,e,n){var i=""+e;if(r(t))for(;i.length<n;)i="0"+i;return i}function o(t,e,n,i){return r(t)?i[e]:n[e]}var s,a=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,l=(e?e.dayNames:null)||this._defaults.dayNames,u=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,c=(e?e.monthNames:null)||this._defaults.monthNames,h="",p=!1;if(t)for(s=0;s<n.length;s++)if(p)"'"!==n.charAt(s)||r("'")?h+=n.charAt(s):p=!1;else switch(n.charAt(s)){case"d":h+=i("d",t.getDate(),2);break;case"D":h+=o("D",t.getDay(),a,l);break;case"o":h+=i("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=i("m",t.getMonth()+1,2);break;case"M":h+=o("M",t.getMonth(),u,c);break;case"y":h+=r("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":r("'")?h+="'":p=!0;break;default:h+=n.charAt(s)}return h},_possibleChars:function(n){function t(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e}var i,e="",r=!1;for(i=0;i<n.length;i++)if(r)"'"!==n.charAt(i)||t("'")?e+=n.charAt(i):r=!1;else switch(n.charAt(i)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":t("'")?e+="'":r=!0;break;default:e+=n.charAt(i)}return e},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),o=r,s=this._getFormatConfig(t);try{o=this.parseDate(n,i,s)||r}catch(t){i=e?"":i}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=i?o.getDate():0,t.currentMonth=i?o.getMonth():0,t.currentYear=i?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(a,t,e){var n,i,r=null==t||""===t?e:"string"==typeof t?function(t){try{return C.datepicker.parseDate(C.datepicker._get(a,"dateFormat"),t,C.datepicker._getFormatConfig(a))}catch(t){}for(var e=(t.toLowerCase().match(/^c/)?C.datepicker._getDate(a):null)||new Date,n=e.getFullYear(),i=e.getMonth(),r=e.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,s=o.exec(t);s;){switch(s[2]||"d"){case"d":case"D":r+=parseInt(s[1],10);break;case"w":case"W":r+=7*parseInt(s[1],10);break;case"m":case"M":i+=parseInt(s[1],10),r=Math.min(r,C.datepicker._getDaysInMonth(n,i));break;case"y":case"Y":n+=parseInt(s[1],10),r=Math.min(r,C.datepicker._getDaysInMonth(n,i))}s=o.exec(t)}return new Date(n,i,r)}(t):"number"==typeof t?isNaN(t)?e:(n=t,(i=new Date).setDate(i.getDate()+n),i):new Date(t.getTime());return(r=r&&"Invalid Date"===r.toString()?e:r)&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,r=t.selectedMonth,o=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),r===t.selectedMonth&&o===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){C.datepicker._adjustDate(n,-e,"M")},next:function(){C.datepicker._adjustDate(n,+e,"M")},hide:function(){C.datepicker._hideDatepicker()},today:function(){C.datepicker._gotoToday(n)},selectDay:function(){return C.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return C.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return C.datepicker._selectMonthYear(n,this,"Y"),!1}};C(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,r,o,s,a,l,u,c,h,p,f,d,m,g,y,v,_,b,w,x,C,T,S,E,k,N,M,D,A,O,P,I,R,L,q,j,F,z=new Date,H=this._daylightSavingAdjust(new Date(z.getFullYear(),z.getMonth(),z.getDate())),B=this._get(t,"isRTL"),U=this._get(t,"showButtonPanel"),$=this._get(t,"hideIfNoPrevNext"),W=this._get(t,"navigationAsDateFormat"),V=this._getNumberOfMonths(t),Y=this._get(t,"showCurrentAtPos"),K=this._get(t,"stepMonths"),G=1!==V[0]||1!==V[1],Q=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),X=this._getMinMaxDate(t,"max"),Z=t.drawMonth-Y,tt=t.drawYear;if(Z<0&&(Z+=12,tt--),X)for(e=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-V[0]*V[1]+1,X.getDate())),e=J&&e<J?J:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)--Z<0&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,n=this._get(t,"prevText"),n=W?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,Z-K,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>":$?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>",r=this._get(t,"nextText"),r=W?this.formatDate(r,this._daylightSavingAdjust(new Date(tt,Z+K,1)),this._getFormatConfig(t)):r,o=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+r+"</span></a>":$?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+r+"</span></a>",s=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?Q:H,s=W?this.formatDate(s,a,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",u=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(B?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,h=this._get(t,"showWeek"),p=this._get(t,"dayNames"),f=this._get(t,"dayNamesMin"),d=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),y=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),_=this._getDefaultDate(t),b="",x=0;x<V[0];x++){for(C="",this.maxRows=4,T=0;T<V[1];T++){if(S=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),E=" ui-corner-all",k="",G){if(k+="<div class='ui-datepicker-group",1<V[1])switch(T){case 0:k+=" ui-datepicker-group-first",E=" ui-corner-"+(B?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",E=" ui-corner-"+(B?"left":"right");break;default:k+=" ui-datepicker-group-middle",E=""}k+="'>"}for(k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+E+"'>"+(/all|left/.test(E)&&0===x?B?o:i:"")+(/all|right/.test(E)&&0===x?B?i:o:"")+this._generateMonthYearHeader(t,Z,tt,J,X,0<x||0<T,d,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",N=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;w<7;w++)N+="<th scope='col'"+(5<=(w+c+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+p[M=(w+c)%7]+"'>"+f[M]+"</span></th>";for(k+=N+"</tr></thead><tbody>",D=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,D)),A=(this._getFirstDayOfMonth(tt,Z)-c+7)%7,O=Math.ceil((A+D)/7),P=G&&this.maxRows>O?this.maxRows:O,this.maxRows=P,I=this._daylightSavingAdjust(new Date(tt,Z,1-A)),R=0;R<P;R++){for(k+="<tr>",L=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(I)+"</td>":"",w=0;w<7;w++)q=g?g.apply(t.input?t.input[0]:null,[I]):[!0,""],F=(j=I.getMonth()!==Z)&&!v||!q[0]||J&&I<J||X&&X<I,L+="<td class='"+(5<=(w+c+6)%7?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(I.getTime()===S.getTime()&&Z===t.selectedMonth&&t._keyEvent||_.getTime()===I.getTime()&&_.getTime()===S.getTime()?" "+this._dayOverClass:"")+(F?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!y?"":" "+q[1]+(I.getTime()===Q.getTime()?" "+this._currentClass:"")+(I.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(j&&!y||!q[2]?"":" title='"+q[2].replace(/'/g,"&#39;")+"'")+(F?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(j&&!y?"&#xa0;":F?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===H.getTime()?" ui-state-highlight":"")+(I.getTime()===Q.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);k+=L+"</tr>"}11<++Z&&(Z=0,tt++),C+=k+="</tbody></table>"+(G?"</div>"+(0<V[0]&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}b+=C}return b+=u,t._keyEvent=!1,b},_generateMonthYearHeader:function(t,e,n,i,r,o,s,a){var l,u,c,h,p,f,d,m,g=this._get(t,"changeMonth"),y=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",b="";if(o||!g)b+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=i&&i.getFullYear()===n,u=r&&r.getFullYear()===n,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=i.getMonth())&&(!u||c<=r.getMonth())&&(b+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+a[c]+"</option>");b+="</select>"}if(v||(_+=b+(!o&&g&&y?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!y)_+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(h=this._get(t,"yearRange").split(":"),p=(new Date).getFullYear(),d=(f=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?p+parseInt(t,10):parseInt(t,10);return isNaN(e)?p:e})(h[0]),m=Math.max(d,f(h[1]||"")),d=i?Math.max(d,i.getFullYear()):d,m=r?Math.min(m,r.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";d<=m;d++)t.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";t.yearshtml+="</select>",_+=t.yearshtml,t.yearshtml=null}return _+=this._get(t,"yearSuffix"),v&&(_+=(!o&&g&&y?"":"&#xa0;")+b),_+="</div>"},_adjustInstDate:function(t,e,n){var i=t.selectedYear+("Y"===n?e:0),r=t.selectedMonth+("M"===n?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(i,r))+("D"===n?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,r,o)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),r=n&&e<n?n:e;return i&&i<r?i:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var r=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(n,i+(e<0?e:r[0]*r[1]),1));return e<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var n,i,r=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),s=null,a=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),a=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(a+=i)),(!r||e.getTime()>=r.getTime())&&(!o||e.getTime()<=o.getTime())&&(!s||e.getFullYear()>=s)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),C.fn.datepicker=function(t){if(!this.length)return this;C.datepicker.initialized||(C(document).on("mousedown",C.datepicker._checkExternalClick),C.datepicker.initialized=!0),0===C("#"+C.datepicker._mainDivId).length&&C("body").append(C.datepicker.dpDiv);var e=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?C.datepicker["_"+t+"Datepicker"].apply(C.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?C.datepicker["_"+t+"Datepicker"].apply(C.datepicker,[this].concat(e)):C.datepicker._attachDatepicker(this,t)}):C.datepicker["_"+t+"Datepicker"].apply(C.datepicker,[this[0]].concat(e))},C.datepicker=new _,C.datepicker.initialized=!1,C.datepicker.uuid=(new Date).getTime(),C.datepicker.version="1.12.1";C.datepicker;C.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=C(this).css(t).offset().top;e<0&&C(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&C.fn.draggable&&this._makeDraggable(),this.options.resizable&&C.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?C(t):this.document.find(t||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:C.noop,enable:C.noop,close:function(t){var e=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||C.ui.safeBlur(C.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var n=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+C(this).css("z-index")}).get(),r=Math.max.apply(null,i);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),n=!0),n&&!e&&this._trigger("focus",t),n},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=C(C.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(t){function e(){var t=C.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||C.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),e.call(this),this._delay(e)},_createWrapper:function(){this.uiDialog=C("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===C.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===C.ui.keyCode.TAB&&!t.isDefaultPrevented()){var e=this.uiDialog.find(":tabbable"),n=e.filter(":first"),i=e.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){i.trigger("focus")}),t.preventDefault()):(this._delay(function(){n.trigger("focus")}),t.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=C("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){C(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=C("<button type='button'></button>").button({label:C("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),t=C("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=C("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=C("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var r=this,t=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),C.isEmptyObject(t)||C.isArray(t)&&!t.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(C.each(t,function(t,e){var n,i;e=C.isFunction(e)?{click:e,text:t}:e,e=C.extend({type:"button"},e),n=e.click,i={icon:e.icon,iconPosition:e.iconPosition,showLabel:e.showLabel,icons:e.icons,text:e.text},delete e.click,delete e.icon,delete e.iconPosition,delete e.showLabel,delete e.icons,"boolean"==typeof e.text&&delete e.text,C("<button></button>",e).button(i).appendTo(r.uiButtonSet).on("click",function(){n.apply(r.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var r=this,o=this.options;function s(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){r._addClass(C(this),"ui-dialog-dragging"),r._blockFrames(),r._trigger("dragStart",t,s(e))},drag:function(t,e){r._trigger("drag",t,s(e))},stop:function(t,e){var n=e.offset.left-r.document.scrollLeft(),i=e.offset.top-r.document.scrollTop();o.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=i?"+":"")+i,of:r.window},r._removeClass(C(this),"ui-dialog-dragging"),r._unblockFrames(),r._trigger("dragStop",t,s(e))}})},_makeResizable:function(){var o=this,s=this.options,t=s.resizable,e=this.uiDialog.css("position"),n="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";function a(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:n,start:function(t,e){o._addClass(C(this),"ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",t,a(e))},resize:function(t,e){o._trigger("resize",t,a(e))},stop:function(t,e){var n=o.uiDialog.offset(),i=n.left-o.document.scrollLeft(),r=n.top-o.document.scrollTop();s.height=o.uiDialog.height(),s.width=o.uiDialog.width(),s.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=r?"+":"")+r,of:o.window},o._removeClass(C(this),"ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",t,a(e))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=C(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=C.inArray(this,t);-1!==e&&t.splice(e,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,r={};C.each(t,function(t,e){n._setOption(t,e),t in n.sizeRelatedOptions&&(i=!0),t in n.resizableRelatedOptions&&(r[t]=e)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,e){var n,i,r=this.uiDialog;"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:C("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((n=r.is(":data(ui-draggable)"))&&!e&&r.draggable("destroy"),!n&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((i=r.is(":data(ui-resizable)"))&&!e&&r.resizable("destroy"),i&&"string"==typeof e&&r.resizable("option","handles",e),i||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=C(this);return C("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!C(t.target).closest(".ui-dialog").length||!!C(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=C("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==C.uiBackCompat&&C.widget("ui.dialog",C.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}});C.ui.dialog,C.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=C("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(e.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=C("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),C.widget("ui.selectmenu",[C.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=C()},_drawButton:function(){var t,e=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=C("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=C("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(n).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){e._rendered||e._refreshMenu()})},_drawMenu:function(){var i=this;this.menu=C("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=C("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,e){t.preventDefault(),i._setSelection(),i._select(e.item.data("ui-selectmenu-item"),t)},focus:function(t,e){var n=e.item.data("ui-selectmenu-item");null!=i.focusIndex&&n.index!==i.focusIndex&&(i._trigger("focus",t,{item:n}),i.isOpen||i._select(n,t)),i.focusIndex=n.index,i.button.attr("aria-activedescendant",i.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(C.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var e=C("<span>");return this._setText(e,t.label),this._addClass(e,"ui-selectmenu-text"),e},_renderMenu:function(i,t){var r=this,o="";C.each(t,function(t,e){var n;e.optgroup!==o&&(n=C("<li>",{text:e.optgroup}),r._addClass(n,"ui-selectmenu-optgroup","ui-menu-divider"+(e.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),n.appendTo(i),o=e.optgroup),r._renderItemData(i,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(t,e){var n=C("<li>"),i=C("<div>",{title:e.element.attr("title")});return e.disabled&&this._addClass(n,null,"ui-state-disabled"),this._setText(i,e.label),n.append(i).appendTo(t)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var n,i,r=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex).parent("li"):(n=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),r+=":not(.ui-state-disabled)"),(i="first"===t||"last"===t?n["first"===t?"prevAll":"nextAll"](r).eq(-1):n[t+"All"](r).eq(0)).length&&this.menuInstance.focus(e,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(C(t.target).closest(".ui-selectmenu-menu, #"+C.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection()).rangeCount&&(this.range=t.getRangeAt(0)):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(t){var e=!0;switch(t.keyCode){case C.ui.keyCode.TAB:case C.ui.keyCode.ESCAPE:this.close(t),e=!1;break;case C.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case C.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case C.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case C.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case C.ui.keyCode.LEFT:this._move("prev",t);break;case C.ui.keyCode.RIGHT:this._move("next",t);break;case C.ui.keyCode.HOME:case C.ui.keyCode.PAGE_UP:this._move("first",t);break;case C.ui.keyCode.END:case C.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),e=!1}e&&t.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==n&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var n=this.button.find("span.ui-icon");this._removeClass(n,null,this.options.icons.button)._addClass(n,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?C(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;!1!==t?(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(t){var n=this,i=[];t.each(function(t,e){i.push(n._parseOption(C(e),t))}),this.items=i},_parseOption:function(t,e){var n=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),C.widget("ui.slider",C.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e,n=this.options,i=this.element.find(".ui-slider-handle"),r=[];for(e=n.values&&n.values.length||1,i.length>e&&(i.slice(e).remove(),i=i.slice(0,e)),t=i.length;t<e;t++)r.push("<span tabindex='0'></span>");this.handles=i.add(C(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){C(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:C.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=C("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var e,n,i,r,o,s,a,l=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(n-l.values(t));(e<i||i===e&&(t===l._lastChangedValue||l.values(t)===u.min))&&(i=e,r=C(this),o=t)}),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),s=r.offset(),a=!C(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:t.pageX-s.left-r.width()/2,top:t.pageY-s.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,n),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,r;return 1<(n=("horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),i=this._valueMax()-this._valueMin(),r=this._valueMin()+n*i,this._trimAlignValue(r)},_uiHash:function(t,e,n){var i={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(i.value=void 0!==e?e:this.values(t),i.values=n||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,n){var i,r=this.value(),o=this.values();this._hasMultipleValues()&&(i=this.values(e?0:1),r=this.values(e),2===this.options.values.length&&!0===this.options.range&&(n=0===e?Math.min(i,n):Math.max(i,n)),o[e]=n),n!==r&&!1!==this._trigger("slide",t,this._uiHash(e,n,o))&&(this._hasMultipleValues()?this.values(e,n):this.value(n))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var n,i,r;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!C.isArray(t))return this._hasMultipleValues()?this._values(t):this.value();for(n=this.options.values,i=t,r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(i[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,e){var n,i=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),C.isArray(this.options.values)&&(i=this.options.values.length),this._super(t,e),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(e),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=i-1;0<=n;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=0<n?e:-e),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step;(t=Math.round((t-e)/n)*n+e)>this.options.max&&(t-=n),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,n,t,i,r,o=this.options.range,s=this.options,a=this,l=!this._animateOff&&s.animate,u={};this._hasMultipleValues()?this.handles.each(function(t){n=(a.values(t)-a._valueMin())/(a._valueMax()-a._valueMin())*100,u["horizontal"===a.orientation?"left":"bottom"]=n+"%",C(this).stop(1,1)[l?"animate":"css"](u,s.animate),!0===a.options.range&&("horizontal"===a.orientation?(0===t&&a.range.stop(1,1)[l?"animate":"css"]({left:n+"%"},s.animate),1===t&&a.range[l?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:s.animate})):(0===t&&a.range.stop(1,1)[l?"animate":"css"]({bottom:n+"%"},s.animate),1===t&&a.range[l?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:s.animate}))),e=n}):(t=this.value(),i=this._valueMin(),r=this._valueMax(),n=r!==i?(t-i)/(r-i)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[l?"animate":"css"](u,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:n+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-n+"%"},s.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:n+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-n+"%"},s.animate))},_handleEvents:{keydown:function(t){var e,n,i,r=C(t.target).data("ui-slider-handle-index");switch(t.keyCode){case C.ui.keyCode.HOME:case C.ui.keyCode.END:case C.ui.keyCode.PAGE_UP:case C.ui.keyCode.PAGE_DOWN:case C.ui.keyCode.UP:case C.ui.keyCode.RIGHT:case C.ui.keyCode.DOWN:case C.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(C(t.target),null,"ui-state-active"),!1===this._start(t,r)))return}switch(i=this.options.step,e=n=this._hasMultipleValues()?this.values(r):this.value(),t.keyCode){case C.ui.keyCode.HOME:n=this._valueMin();break;case C.ui.keyCode.END:n=this._valueMax();break;case C.ui.keyCode.PAGE_UP:n=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case C.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);break;case C.ui.keyCode.UP:case C.ui.keyCode.RIGHT:if(e===this._valueMax())return;n=this._trimAlignValue(e+i);break;case C.ui.keyCode.DOWN:case C.ui.keyCode.LEFT:if(e===this._valueMin())return;n=this._trimAlignValue(e-i)}this._slide(t,r,n)},keyup:function(t){var e=C(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),this._removeClass(C(t.target),null,"ui-state-active"))}}});function N(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}C.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var i=this._super(),r=this.element;return C.each(["min","max","step"],function(t,e){var n=r.attr(e);null!=n&&n.length&&(i[e]=n)}),i},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((0<e?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(t){var e;function n(){this.element[0]===C.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=e,this._delay(function(){this.previous=e}))}e=this.element[0]===C.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),!1!==this._start(t)&&this._repeat(null,C(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(C(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,C(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var e=this.options,n=C.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,e.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-e.page,t),!0}return!1},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(t,e,n){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,n)},t),this._spin(e*this.options.step,n)},_spin:function(t,e){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:n})||(this._value(n),this.counter++)},_increment:function(t){var e=this.options.incremental;return e?C.isFunction(e)?e(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_adjustValue:function(t){var e,n,i=this.options;return n=t-(e=null!==i.min?i.min:0),t=e+(n=Math.round(n/i.step)*i.step),t=parseFloat(t.toFixed(this._precision())),null!==i.max&&t>i.max?i.max:null!==i.min&&t<i.min?i.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var n,i,r;if("culture"===t||"numberFormat"===t)return n=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(n));"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,e.up),r=this.buttons.last().find(".ui-icon"),this._removeClass(r,null,this.options.icons.down),this._addClass(r,null,e.down)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:N(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var n;""!==t&&null!==(n=this._parse(t))&&(e||(n=this._adjustValue(n)),t=this._format(n)),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:N(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:N(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:N(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:N(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());N(this._value).call(this,t)},widget:function(){return this.uiSpinner}}),!1!==C.uiBackCompat&&C.widget("ui.spinner",C.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});var M;C.ui.spinner;C.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(M=/#.*$/,function(t){var e,n;e=t.href.replace(M,""),n=location.href.replace(M,"");try{e=decodeURIComponent(e)}catch(t){}try{n=decodeURIComponent(n)}catch(t){}return 1<t.hash.length&&e===n}),_create:function(){var e=this,t=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,t.collapsible),this._processTabs(),t.active=this._initialActive(),C.isArray(t.disabled)&&(t.disabled=C.unique(t.disabled.concat(C.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(t.active):this.active=C(),this._refresh(),this.active.length&&this.load(t.active)},_initialActive:function(){var n=this.options.active,t=this.options.collapsible,i=location.hash.substring(1);return null===n&&(i&&this.tabs.each(function(t,e){if(C(e).attr("aria-controls")===i)return n=t,!1}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==n&&-1!==n||(n=!!this.tabs.length&&0)),!1!==n&&-1===(n=this.tabs.index(this.tabs.eq(n)))&&(n=!t&&0),!t&&!1===n&&this.anchors.length&&(n=0),n},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):C()}},_tabKeydown:function(t){var e=C(C.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(e),i=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case C.ui.keyCode.RIGHT:case C.ui.keyCode.DOWN:n++;break;case C.ui.keyCode.UP:case C.ui.keyCode.LEFT:i=!1,n--;break;case C.ui.keyCode.END:n=this.anchors.length-1;break;case C.ui.keyCode.HOME:n=0;break;case C.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case C.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,i),t.ctrlKey||t.metaKey||(e.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===C.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===C.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===C.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,e){var n=this.tabs.length-1;for(;-1!==C.inArray((n<t&&(t=0),t<0&&(t=n),t),this.options.disabled);)t=e?t+1:t-1;return t},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){"active"!==t?(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._activate(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,e=this.tablist.children(":has(a[href])");t.disabled=C.map(e.filter(".ui-state-disabled"),function(t){return e.index(t)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!C.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=C()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=C()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var l=this,t=this.tabs,e=this.anchors,n=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){C(this).is(".ui-state-disabled")&&t.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){C(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return C("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=C(),this.anchors.each(function(t,e){var n,i,r,o=C(e).uniqueId().attr("id"),s=C(e).closest("li"),a=s.attr("aria-controls");l._isLocal(e)?(r=(n=e.hash).substring(1),i=l.element.find(l._sanitizeSelector(n))):(n="#"+(r=s.attr("aria-controls")||C({}).uniqueId()[0].id),(i=l.element.find(n)).length||(i=l._createPanel(r)).insertAfter(l.panels[t-1]||l.tablist),i.attr("aria-live","polite")),i.length&&(l.panels=l.panels.add(i)),a&&s.data("ui-tabs-aria-controls",a),s.attr({"aria-controls":r,"aria-labelledby":o}),i.attr("aria-labelledby",o)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),t&&(this._off(t.not(this.tabs)),this._off(e.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return C("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var e,n,i;for(C.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),i=0;n=this.tabs[i];i++)e=C(n),!0===t||-1!==C.inArray(i,t)?(e.attr("aria-disabled","true"),this._addClass(e,null,"ui-state-disabled")):(e.removeAttr("aria-disabled"),this._removeClass(e,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var n={};t&&C.each(t.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,e=this.element.parent();"fill"===t?(n=e.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=C(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=C(this).outerHeight(!0)}),this.panels.each(function(){C(this).height(Math.max(0,n-C(this).innerHeight()+C(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,C(this).height("").height())}).height(n))},_eventHandler:function(t){var e=this.options,n=this.active,i=C(t.currentTarget).closest("li"),r=i[0]===n[0],o=r&&e.collapsible,s=o?C():this._getPanelForTab(i),a=n.length?this._getPanelForTab(n):C(),l={oldTab:n,oldPanel:a,newTab:o?C():i,newPanel:s};t.preventDefault(),i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||r&&!e.collapsible||!1===this._trigger("beforeActivate",t,l)||(e.active=!o&&this.tabs.index(i),this.active=r?C():i,this.xhr&&this.xhr.abort(),a.length||s.length||C.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(i),t),this._toggle(t,l))},_toggle:function(t,e){var n=this,i=e.newPanel,r=e.oldPanel;function o(){n.running=!1,n._trigger("activate",t,e)}function s(){n._addClass(e.newTab.closest("li"),"ui-tabs-active","ui-state-active"),i.length&&n.options.show?n._show(i,n.options.show,o):(i.show(),o())}this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){n._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s()}):(this._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r.hide(),s()),r.attr("aria-hidden","true"),e.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&r.length?e.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return 0===C(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false"),e.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var e,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),e=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:C.noop}))},_findActive:function(t){return!1===t?C():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+C.ui.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){C.data(this,"ui-tabs-destroy")?C(this).remove():C(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var t=C(this),e=t.data("ui-tabs-aria-controls");e?t.attr("aria-controls",e).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var t=this.options.disabled;!1!==t&&(t=void 0!==n&&(n=this._getIndex(n),C.isArray(t)?C.map(t,function(t){return t!==n?t:null}):C.map(this.tabs,function(t,e){return e!==n?e:null})),this._setOptionDisabled(t))},disable:function(t){var e=this.options.disabled;if(!0!==e){if(void 0===t)e=!0;else{if(t=this._getIndex(t),-1!==C.inArray(t,e))return;e=C.isArray(e)?C.merge([t],e).sort():[t]}this._setOptionDisabled(e)}},load:function(t,i){t=this._getIndex(t);function r(t,e){"abort"===e&&o.panels.stop(!1,!0),o._removeClass(n,"ui-tabs-loading"),s.removeAttr("aria-busy"),t===o.xhr&&delete o.xhr}var o=this,n=this.tabs.eq(t),e=n.find(".ui-tabs-anchor"),s=this._getPanelForTab(n),a={tab:n,panel:s};this._isLocal(e[0])||(this.xhr=C.ajax(this._ajaxSettings(e,i,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(n,"ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done(function(t,e,n){setTimeout(function(){s.html(t),o._trigger("load",i,a),r(n,e)},1)}).fail(function(t,e){setTimeout(function(){r(t,e)},1)})))},_ajaxSettings:function(t,n,i){var r=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,e){return r._trigger("beforeLoad",n,C.extend({jqXHR:t,ajaxSettings:e},i))}}},_getPanelForTab:function(t){var e=C(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+e))}}),!1!==C.uiBackCompat&&C.widget("ui.tabs",C.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}});C.ui.tabs;C.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=C(this).attr("title")||"";return C("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,e){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(e),t.data("ui-tooltip-id",e).attr("aria-describedby",C.trim(n.join(" ")))},_removeDescribedBy:function(t){var e=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),i=C.inArray(e,n);-1!==i&&n.splice(i,1),t.removeData("ui-tooltip-id"),(n=C.trim(n.join(" ")))?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=C("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=C([])},_setOption:function(t,e){var n=this;this._super(t,e),"content"===t&&C.each(this.tooltips,function(t,e){n._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var i=this;C.each(this.tooltips,function(t,e){var n=C.Event("blur");n.target=n.currentTarget=e.element[0],i.close(n,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=C(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=C(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=C([])},open:function(t){var n=this,e=C(t?t.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&e.parents().each(function(){var t,e=C(this);e.data("ui-tooltip-open")&&((t=C.Event("blur")).target=t.currentTarget=this,n.close(t,!0)),e.attr("title")&&(e.uniqueId(),n.parents[this.id]={element:this,title:e.attr("title")},e.attr("title",""))}),this._registerCloseHandlers(t,e),this._updateContent(e,t))},_updateContent:function(e,n){var t,i=this.options.content,r=this,o=n?n.type:null;if("string"==typeof i||i.nodeType||i.jquery)return this._open(n,e,i);(t=i.call(e[0],function(t){r._delay(function(){e.data("ui-tooltip-open")&&(n&&(n.type=o),this._open(n,e,t))})}))&&this._open(n,e,t)},_open:function(t,e,n){var i,r,o,s,a=C.extend({},this.options.position);function l(t){a.of=t,r.is(":hidden")||r.position(a)}n&&((i=this._find(e))?i.tooltip.find(".ui-tooltip-content").html(n):(e.is("[title]")&&(t&&"mouseover"===t.type?e.attr("title",""):e.removeAttr("title")),i=this._tooltip(e),r=i.tooltip,this._addDescribedBy(e,r.attr("id")),r.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),(s=C("<div>").html(r.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),s.removeAttr("id").find("[id]").removeAttr("id"),s.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:l}),l(t)):r.position(C.extend({of:e},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){r.is(":visible")&&(l(a.of),clearInterval(o))},C.fx.interval)),this._trigger("open",t,{tooltip:r})))},_registerCloseHandlers:function(t,n){var e={keyup:function(t){if(t.keyCode===C.ui.keyCode.ESCAPE){var e=C.Event(t);e.currentTarget=n[0],this.close(e,!0)}}};n[0]!==this.element[0]&&(e.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(e.mouseleave="close"),t&&"focusin"!==t.type||(e.focusout="close"),this._on(!0,n,e)},close:function(t){var e,n=this,i=C(t?t.currentTarget:this.element),r=this._find(i);r?(e=r.tooltip,r.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),r.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){n._removeTooltip(C(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&C.each(this.parents,function(t,e){C(e.element).attr("title",e.title),delete n.parents[t]}),r.closing=!0,this._trigger("close",t,{tooltip:e}),r.hiding||(r.closing=!1))):i.removeData("ui-tooltip-open")},_tooltip:function(t){var e=C("<div>").attr("role","tooltip"),n=C("<div>").appendTo(e),i=e.uniqueId().attr("id");return this._addClass(n,"ui-tooltip-content"),this._addClass(e,"ui-tooltip","ui-widget ui-widget-content"),e.appendTo(this._appendTo(t)),this.tooltips[i]={element:t,tooltip:e}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),e},_destroy:function(){var r=this;C.each(this.tooltips,function(t,e){var n=C.Event("blur"),i=e.element;n.target=n.currentTarget=i[0],r.close(n,!0),C("#"+t).remove(),i.data("ui-tooltip-title")&&(i.attr("title")||i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==C.uiBackCompat&&C.widget("ui.tooltip",C.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}});C.ui.tooltip;var D,A,O,P,I,R,L,q,j,F,z,H,B,U,$,W,V,Y,K,G,Q,J="ui-effects-",X="ui-effects-style",Z="ui-effects-animated",tt=C;function et(t,e,n){var i=q[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:t<0?0:i.max<t?i.max:t)}function nt(s){var a=R(),l=a._rgba=[];return s=s.toLowerCase(),z(I,function(t,e){var n,i=e.re.exec(s),r=i&&e.parse(i),o=e.space||"rgba";if(r)return n=a[o](r),a[L[o].cache]=n[L[o].cache],l=a._rgba=n._rgba,!1}),l.length?("0,0,0,0"===l.join()&&D.extend(l,O.transparent),a):O[s]}function it(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function rt(t){var e,n,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)"string"==typeof i[e=i[n]]&&(r[C.camelCase(e)]=i[e]);else for(e in i)"string"==typeof i[e]&&(r[e]=i[e]);return r}function ot(t,e,n,i){return C.isPlainObject(t)&&(t=(e=t).effect),t={effect:t},null==e&&(e={}),C.isFunction(e)&&(i=e,n=null,e={}),"number"!=typeof e&&!C.fx.speeds[e]||(i=n,n=e,e={}),C.isFunction(n)&&(i=n,n=null),e&&C.extend(t,e),n=n||e.duration,t.duration=C.fx.off?0:"number"==typeof n?n:n in C.fx.speeds?C.fx.speeds[n]:C.fx.speeds._default,t.complete=i||e.complete,t}function st(t){return!(t&&"number"!=typeof t&&!C.fx.speeds[t])||("string"==typeof t&&!C.effects.effect[t]||(!!C.isFunction(t)||"object"==typeof t&&!t.effect))}function at(t,e){var n=e.outerWidth(),i=e.outerHeight(),r=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,n,i,0];return{top:parseFloat(r[1])||0,right:"auto"===r[2]?n:parseFloat(r[2]),bottom:"auto"===r[3]?i:parseFloat(r[3]),left:parseFloat(r[4])||0}}C.effects={effect:{}},P=/^([\-+])=\s*(\d+\.?\d*)/,I=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],R=(D=tt).Color=function(t,e,n,i){return new D.Color.fn.parse(t,e,n,i)},L={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},q={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},j=R.support={},F=D("<p>")[0],z=D.each,F.style.cssText="background-color:rgba(1,1,1,.5)",j.rgba=-1<F.style.backgroundColor.indexOf("rgba"),z(L,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),R.fn=D.extend(R.prototype,{parse:function(r,t,e,n){if(r===A)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=D(r).css(t),t=A);var o=this,i=D.type(r),s=this._rgba=[];return t!==A&&(r=[r,t,e,n],i="array"),"string"===i?this.parse(nt(r)||O._default):"array"===i?(z(L.rgba.props,function(t,e){s[e.idx]=et(r[e.idx],e)}),this):"object"===i?(z(L,r instanceof R?function(t,e){r[e.cache]&&(o[e.cache]=r[e.cache].slice())}:function(t,n){var i=n.cache;z(n.props,function(t,e){if(!o[i]&&n.to){if("alpha"===t||null==r[t])return;o[i]=n.to(o._rgba)}o[i][e.idx]=et(r[t],e,!0)}),o[i]&&D.inArray(null,o[i].slice(0,3))<0&&(o[i][3]=1,n.from&&(o._rgba=n.from(o[i])))}),this):void 0},is:function(t){var r=R(t),o=!0,s=this;return z(L,function(t,e){var n,i=r[e.cache];return i&&(n=s[e.cache]||e.to&&e.to(s._rgba)||[],z(e.props,function(t,e){if(null!=i[e.idx])return o=i[e.idx]===n[e.idx]})),o}),o},_space:function(){var n=[],i=this;return z(L,function(t,e){i[e.cache]&&n.push(t)}),n.pop()},transition:function(t,s){var a=R(t),e=a._space(),n=L[e],i=0===this.alpha()?R("transparent"):this,l=i[n.cache]||n.to(i._rgba),u=l.slice();return a=a[n.cache],z(n.props,function(t,e){var n=e.idx,i=l[n],r=a[n],o=q[e.type]||{};null!==r&&(null===i?u[n]=r:(o.mod&&(r-i>o.mod/2?i+=o.mod:i-r>o.mod/2&&(i-=o.mod)),u[n]=et((r-i)*s+i,e)))}),this[e](u)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),n=e.pop(),i=R(t)._rgba;return R(D.map(e,function(t,e){return(1-n)*i[e]+n*t}))},toRgbaString:function(){var t="rgba(",e=D.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=D.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),n=e.pop();return t&&e.push(~~(255*n)),"#"+D.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),R.fn.parse.prototype=R.fn,L.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,s=t[3],a=Math.max(i,r,o),l=Math.min(i,r,o),u=a-l,c=a+l,h=.5*c;return e=l===a?0:i===a?60*(r-o)/u+360:r===a?60*(o-i)/u+120:60*(i-r)/u+240,n=0==u?0:h<=.5?u/c:u/(2-c),[Math.round(e)%360,n,h,null==s?1:s]},L.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],r=t[3],o=i<=.5?i*(1+n):i+n-i*n,s=2*i-o;return[Math.round(255*it(s,o,e+1/3)),Math.round(255*it(s,o,e)),Math.round(255*it(s,o,e-1/3)),r]},z(L,function(l,t){var n=t.props,s=t.cache,a=t.to,u=t.from;R.fn[l]=function(t){if(a&&!this[s]&&(this[s]=a(this._rgba)),t===A)return this[s].slice();var e,i=D.type(t),r="array"===i||"object"===i?t:arguments,o=this[s].slice();return z(n,function(t,e){var n=r["object"===i?t:e.idx];null==n&&(n=o[e.idx]),o[e.idx]=et(n,e)}),u?((e=R(u(o)))[s]=o,e):R(o)},z(n,function(s,a){R.fn[s]||(R.fn[s]=function(t){var e,n=D.type(t),i="alpha"===s?this._hsla?"hsla":"rgba":l,r=this[i](),o=r[a.idx];return"undefined"===n?o:("function"===n&&(t=t.call(this,o),n=D.type(t)),null==t&&a.empty?this:("string"===n&&(e=P.exec(t))&&(t=o+parseFloat(e[2])*("+"===e[1]?1:-1)),r[a.idx]=t,this[i](r)))})})}),R.hook=function(t){var e=t.split(" ");z(e,function(t,o){D.cssHooks[o]={set:function(t,e){var n,i,r="";if("transparent"!==e&&("string"!==D.type(e)||(n=nt(e)))){if(e=R(n||e),!j.rgba&&1!==e._rgba[3]){for(i="backgroundColor"===o?t.parentNode:t;(""===r||"transparent"===r)&&i&&i.style;)try{r=D.css(i,"backgroundColor"),i=i.parentNode}catch(t){}e=e.blend(r&&"transparent"!==r?r:"_default")}e=e.toRgbaString()}try{t.style[o]=e}catch(t){}}},D.fx.step[o]=function(t){t.colorInit||(t.start=R(t.elem,o),t.end=R(t.end),t.colorInit=!0),D.cssHooks[o].set(t.elem,t.start.transition(t.end,t.pos))}})},R.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),D.cssHooks.borderColor={expand:function(n){var i={};return z(["Top","Right","Bottom","Left"],function(t,e){i["border"+e+"Color"]=n}),i}},O=D.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},$=["add","remove","toggle"],W={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},C.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){C.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(tt.style(t.elem,e,t.end),t.setAttr=!0)}}),C.fn.addBack||(C.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),C.effects.animateClass=function(r,t,e,n){var o=C.speed(t,e,n);return this.queue(function(){var t,n=C(this),e=n.attr("class")||"",i=o.children?n.find("*").addBack():n;i=i.map(function(){return{el:C(this),start:rt(this)}}),(t=function(){C.each($,function(t,e){r[e]&&n[e+"Class"](r[e])})})(),i=i.map(function(){return this.end=rt(this.el[0]),this.diff=function(t,e){var n,i,r={};for(n in e)i=e[n],t[n]!==i&&(W[n]||!C.fx.step[n]&&isNaN(parseFloat(i))||(r[n]=i));return r}(this.start,this.end),this}),n.attr("class",e),i=i.map(function(){var t=this,e=C.Deferred(),n=C.extend({},o,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,n),e.promise()}),C.when.apply(C,i.get()).done(function(){t(),C.each(arguments,function(){var e=this.el;C.each(this.diff,function(t){e.css(t,"")})}),o.complete.call(n[0])})})},C.fn.extend({addClass:(U=C.fn.addClass,function(t,e,n,i){return e?C.effects.animateClass.call(this,{add:t},e,n,i):U.apply(this,arguments)}),removeClass:(B=C.fn.removeClass,function(t,e,n,i){return 1<arguments.length?C.effects.animateClass.call(this,{remove:t},e,n,i):B.apply(this,arguments)}),toggleClass:(H=C.fn.toggleClass,function(t,e,n,i,r){return"boolean"==typeof e||void 0===e?n?C.effects.animateClass.call(this,e?{add:t}:{remove:t},n,i,r):H.apply(this,arguments):C.effects.animateClass.call(this,{toggle:t},e,n,i)}),switchClass:function(t,e,n,i,r){return C.effects.animateClass.call(this,{add:e,remove:t},n,i,r)}}),C.expr&&C.expr.pseudos&&C.expr.pseudos.animated&&(C.expr.pseudos.animated=(V=C.expr.pseudos.animated,function(t){return!!C(t).data(Z)||V(t)})),!1!==C.uiBackCompat&&C.extend(C.effects,{save:function(t,e){for(var n=0,i=e.length;n<i;n++)null!==e[n]&&t.data(J+e[n],t[0].style[e[n]])},restore:function(t,e){for(var n,i=0,r=e.length;i<r;i++)null!==e[i]&&(n=t.data(J+e[i]),t.css(e[i],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var i={width:n.outerWidth(!0),height:n.outerHeight(!0),float:n.css("float")},t=C("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:n.width(),height:n.height()},r=document.activeElement;try{r.id}catch(t){r=document.body}return n.wrap(t),n[0]!==r&&!C.contains(n[0],r)||C(r).trigger("focus"),t=n.parent(),"static"===n.css("position")?(t.css({position:"relative"}),n.css({position:"relative"})):(C.extend(i,{position:n.css("position"),zIndex:n.css("z-index")}),C.each(["top","left","bottom","right"],function(t,e){i[e]=n.css(e),isNaN(parseInt(i[e],10))&&(i[e]="auto")}),n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(e),t.css(i).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),t[0]!==e&&!C.contains(t[0],e)||C(e).trigger("focus")),t}}),C.extend(C.effects,{version:"1.12.1",define:function(t,e,n){return n||(n=e,e="effect"),C.effects.effect[t]=n,C.effects.effect[t].mode=e,n},scaledDimensions:function(t,e,n){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(e||100)/100:1,r="vertical"!==n?(e||100)/100:1;return{height:t.height()*r,width:t.width()*i,outerHeight:t.outerHeight()*r,outerWidth:t.outerWidth()*i}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var i=t.queue();1<e&&i.splice.apply(i,[1,0].concat(i.splice(e,n))),t.dequeue()},saveStyle:function(t){t.data(X,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(X)||"",t.removeData(X)},mode:function(t,e){var n=t.is(":hidden");return"toggle"===e&&(e=n?"show":"hide"),(n?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createPlaceholder:function(t){var e,n=t.css("position"),i=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",e=C("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(J+"placeholder",e)),t.css({position:n,left:i.left,top:i.top}),e},removePlaceholder:function(t){var e=J+"placeholder",n=t.data(e);n&&(n.remove(),t.removeData(e))},cleanUp:function(t){C.effects.restoreStyle(t),C.effects.removePlaceholder(t)},setTransition:function(i,t,r,o){return o=o||{},C.each(t,function(t,e){var n=i.cssUnit(e);0<n[0]&&(o[e]=n[0]*r+n[1])}),o}}),C.fn.extend({effect:function(){function t(t){var e=C(this),n=C.effects.mode(e,a)||o;e.data(Z,!0),l.push(n),o&&("show"===n||n===o&&"hide"===n)&&e.show(),o&&"none"===n||C.effects.saveStyle(e),C.isFunction(t)&&t()}var i=ot.apply(this,arguments),r=C.effects.effect[i.effect],o=r.mode,e=i.queue,n=e||"fx",s=i.complete,a=i.mode,l=[];if(C.fx.off||!r)return a?this[a](i.duration,s):this.each(function(){s&&s.call(this)});function u(t){var e=C(this);function n(){C.isFunction(s)&&s.call(e[0]),C.isFunction(t)&&t()}i.mode=l.shift(),!1===C.uiBackCompat||o?"none"===i.mode?(e[a](),n()):r.call(e[0],i,function(){e.removeData(Z),C.effects.cleanUp(e),"hide"===i.mode&&e.hide(),n()}):(e.is(":hidden")?"hide"===a:"show"===a)?(e[a](),n()):r.call(e[0],i,n)}return!1===e?this.each(t).each(u):this.queue(n,t).queue(n,u)},show:(G=C.fn.show,function(t){if(st(t))return G.apply(this,arguments);var e=ot.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(K=C.fn.hide,function(t){if(st(t))return K.apply(this,arguments);var e=ot.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(Y=C.fn.toggle,function(t){if(st(t)||"boolean"==typeof t)return Y.apply(this,arguments);var e=ot.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(t){var n=this.css(t),i=[];return C.each(["em","px","%","pt"],function(t,e){0<n.indexOf(e)&&(i=[parseFloat(n),e])}),i},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):at(this.css("clip"),this)},transfer:function(t,e){var n=C(this),i=C(t.to),r="fixed"===i.css("position"),o=C("body"),s=r?o.scrollTop():0,a=r?o.scrollLeft():0,l=i.offset(),u={top:l.top-s,left:l.left-a,height:i.innerHeight(),width:i.innerWidth()},c=n.offset(),h=C("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:c.top-s,left:c.left-a,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){h.remove(),C.isFunction(e)&&e()})}}),C.fx.step.clip=function(t){t.clipInit||(t.start=C(t.elem).cssClip(),"string"==typeof t.end&&(t.end=at(t.end,t.elem)),t.clipInit=!0),C(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})},Q={},C.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){Q[t]=function(t){return Math.pow(t,e+2)}}),C.extend(Q,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),C.each(Q,function(t,e){C.easing["easeIn"+t]=e,C.easing["easeOut"+t]=function(t){return 1-e(1-t)},C.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}});C.effects,C.effects.define("blind","hide",function(t,e){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},i=C(this),r=t.direction||"up",o=i.cssClip(),s={clip:C.extend({},o)},a=C.effects.createPlaceholder(i);s.clip[n[r][0]]=s.clip[n[r][1]],"show"===t.mode&&(i.cssClip(s.clip),a&&a.css(C.effects.clipToBox(s)),s.clip=o),a&&a.animate(C.effects.clipToBox(s),t.duration,t.easing),i.animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),C.effects.define("bounce",function(t,e){var n,i,r,o=C(this),s=t.mode,a="hide"===s,l="show"===s,u=t.direction||"up",c=t.distance,h=t.times||5,p=2*h+(l||a?1:0),f=t.duration/p,d=t.easing,m="up"===u||"down"===u?"top":"left",g="up"===u||"left"===u,y=0,v=o.queue().length;for(C.effects.createPlaceholder(o),r=o.css(m),c||(c=o["top"==m?"outerHeight":"outerWidth"]()/3),l&&((i={opacity:1})[m]=r,o.css("opacity",0).css(m,g?2*-c:2*c).animate(i,f,d)),a&&(c/=Math.pow(2,h-1)),(i={})[m]=r;y<h;y++)(n={})[m]=(g?"-=":"+=")+c,o.animate(n,f,d).animate(i,f,d),c=a?2*c:c/2;a&&((n={opacity:0})[m]=(g?"-=":"+=")+c,o.animate(n,f,d)),o.queue(e),C.effects.unshift(o,v,1+p)}),C.effects.define("clip","hide",function(t,e){var n,i={},r=C(this),o=t.direction||"vertical",s="both"===o,a=s||"horizontal"===o,l=s||"vertical"===o;n=r.cssClip(),i.clip={top:l?(n.bottom-n.top)/2:n.top,right:a?(n.right-n.left)/2:n.right,bottom:l?(n.bottom-n.top)/2:n.bottom,left:a?(n.right-n.left)/2:n.left},C.effects.createPlaceholder(r),"show"===t.mode&&(r.cssClip(i.clip),i.clip=n),r.animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),C.effects.define("drop","hide",function(t,e){var n,i=C(this),r="show"===t.mode,o=t.direction||"left",s="up"===o||"down"===o?"top":"left",a="up"===o||"left"===o?"-=":"+=",l="+="==a?"-=":"+=",u={opacity:0};C.effects.createPlaceholder(i),n=t.distance||i["top"==s?"outerHeight":"outerWidth"](!0)/2,u[s]=a+n,r&&(i.css(u),u[s]=l+n,u.opacity=1),i.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),C.effects.define("explode","hide",function(t,e){var n,i,r,o,s,a,l=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=l,c=C(this),h="show"===t.mode,p=c.show().css("visibility","hidden").offset(),f=Math.ceil(c.outerWidth()/u),d=Math.ceil(c.outerHeight()/l),m=[];function g(){m.push(this),m.length===l*u&&(c.css({visibility:"visible"}),C(m).remove(),e())}for(n=0;n<l;n++)for(o=p.top+n*d,a=n-(l-1)/2,i=0;i<u;i++)r=p.left+i*f,s=i-(u-1)/2,c.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-i*f,top:-n*d}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:d,left:r+(h?s*f:0),top:o+(h?a*d:0),opacity:h?0:1}).animate({left:r+(h?0:s*f),top:o+(h?0:a*d),opacity:h?1:0},t.duration||500,t.easing,g)}),C.effects.define("fade","toggle",function(t,e){var n="show"===t.mode;C(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),C.effects.define("fold","hide",function(e,t){var n=C(this),i=e.mode,r="show"===i,o="hide"===i,s=e.size||15,a=/([0-9]+)%/.exec(s),l=!!e.horizFirst?["right","bottom"]:["bottom","right"],u=e.duration/2,c=C.effects.createPlaceholder(n),h=n.cssClip(),p={clip:C.extend({},h)},f={clip:C.extend({},h)},d=[h[l[0]],h[l[1]]],m=n.queue().length;a&&(s=parseInt(a[1],10)/100*d[o?0:1]),p.clip[l[0]]=s,f.clip[l[0]]=s,f.clip[l[1]]=0,r&&(n.cssClip(f.clip),c&&c.css(C.effects.clipToBox(f)),f.clip=h),n.queue(function(t){c&&c.animate(C.effects.clipToBox(p),u,e.easing).animate(C.effects.clipToBox(f),u,e.easing),t()}).animate(p,u,e.easing).animate(f,u,e.easing).queue(t),C.effects.unshift(n,m,4)}),C.effects.define("highlight","show",function(t,e){var n=C(this),i={backgroundColor:n.css("backgroundColor")};"hide"===t.mode&&(i.opacity=0),C.effects.saveStyle(n),n.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),C.effects.define("size",function(r,e){var t,o,n,i=C(this),s=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=r.mode,c="effect"!==u,h=r.scale||"both",p=r.origin||["middle","center"],f=i.css("position"),d=i.position(),m=C.effects.scaledDimensions(i),g=r.from||m,y=r.to||C.effects.scaledDimensions(i,0);C.effects.createPlaceholder(i),"show"===u&&(n=g,g=y,y=n),o={from:{y:g.height/m.height,x:g.width/m.width},to:{y:y.height/m.height,x:y.width/m.width}},"box"!==h&&"both"!==h||(o.from.y!==o.to.y&&(g=C.effects.setTransition(i,a,o.from.y,g),y=C.effects.setTransition(i,a,o.to.y,y)),o.from.x!==o.to.x&&(g=C.effects.setTransition(i,l,o.from.x,g),y=C.effects.setTransition(i,l,o.to.x,y))),"content"!==h&&"both"!==h||o.from.y!==o.to.y&&(g=C.effects.setTransition(i,s,o.from.y,g),y=C.effects.setTransition(i,s,o.to.y,y)),p&&(t=C.effects.getBaseline(p,m),g.top=(m.outerHeight-g.outerHeight)*t.y+d.top,g.left=(m.outerWidth-g.outerWidth)*t.x+d.left,y.top=(m.outerHeight-y.outerHeight)*t.y+d.top,y.left=(m.outerWidth-y.outerWidth)*t.x+d.left),i.css(g),"content"!==h&&"both"!==h||(a=a.concat(["marginTop","marginBottom"]).concat(s),l=l.concat(["marginLeft","marginRight"]),i.find("*[width]").each(function(){var t=C(this),e=C.effects.scaledDimensions(t),n={height:e.height*o.from.y,width:e.width*o.from.x,outerHeight:e.outerHeight*o.from.y,outerWidth:e.outerWidth*o.from.x},i={height:e.height*o.to.y,width:e.width*o.to.x,outerHeight:e.height*o.to.y,outerWidth:e.width*o.to.x};o.from.y!==o.to.y&&(n=C.effects.setTransition(t,a,o.from.y,n),i=C.effects.setTransition(t,a,o.to.y,i)),o.from.x!==o.to.x&&(n=C.effects.setTransition(t,l,o.from.x,n),i=C.effects.setTransition(t,l,o.to.x,i)),c&&C.effects.saveStyle(t),t.css(n),t.animate(i,r.duration,r.easing,function(){c&&C.effects.restoreStyle(t)})})),i.animate(y,{queue:!1,duration:r.duration,easing:r.easing,complete:function(){var t=i.offset();0===y.opacity&&i.css("opacity",g.opacity),c||(i.css("position","static"===f?"relative":f).offset(t),C.effects.saveStyle(i)),e()}})}),C.effects.define("scale",function(t,e){var n=C(this),i=t.mode,r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"effect"!==i?0:100),o=C.extend(!0,{from:C.effects.scaledDimensions(n),to:C.effects.scaledDimensions(n,r,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(o.from.opacity=1,o.to.opacity=0),C.effects.effect.size.call(this,o,e)}),C.effects.define("puff","hide",function(t,e){var n=C.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});C.effects.effect.scale.call(this,n,e)}),C.effects.define("pulsate","show",function(t,e){var n=C(this),i=t.mode,r="show"===i,o=r||"hide"===i,s=2*(t.times||5)+(o?1:0),a=t.duration/s,l=0,u=1,c=n.queue().length;for(!r&&n.is(":visible")||(n.css("opacity",0).show(),l=1);u<s;u++)n.animate({opacity:l},a,t.easing),l=1-l;n.animate({opacity:l},a,t.easing),n.queue(e),C.effects.unshift(n,c,1+s)}),C.effects.define("shake",function(t,e){var n=1,i=C(this),r=t.direction||"left",o=t.distance||20,s=t.times||3,a=2*s+1,l=Math.round(t.duration/a),u="up"===r||"down"===r?"top":"left",c="up"===r||"left"===r,h={},p={},f={},d=i.queue().length;for(C.effects.createPlaceholder(i),h[u]=(c?"-=":"+=")+o,p[u]=(c?"+=":"-=")+2*o,f[u]=(c?"-=":"+=")+2*o,i.animate(h,l,t.easing);n<s;n++)i.animate(p,l,t.easing).animate(f,l,t.easing);i.animate(p,l,t.easing).animate(h,l/2,t.easing).queue(e),C.effects.unshift(i,d,1+a)}),C.effects.define("slide","show",function(t,e){var n,i,r=C(this),o={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=t.mode,a=t.direction||"left",l="up"===a||"down"===a?"top":"left",u="up"===a||"left"===a,c=t.distance||r["top"==l?"outerHeight":"outerWidth"](!0),h={};C.effects.createPlaceholder(r),n=r.cssClip(),i=r.position()[l],h[l]=(u?-1:1)*c+i,h.clip=r.cssClip(),h.clip[o[a][1]]=h.clip[o[a][0]],"show"===s&&(r.cssClip(h.clip),r.css(l,h[l]),h.clip=n,h[l]=i),r.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:e})});!1!==C.uiBackCompat&&C.effects.define("transfer",function(t,e){C(this).transfer(t,e)})})(jQuery)},{}],256:[function(t,n,e){!function(t,e){"use strict";"object"==typeof n&&"object"==typeof n.exports?n.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(C,t){"use strict";function m(t){return null!=t&&t===t.window}var e=[],T=C.document,i=Object.getPrototypeOf,a=e.slice,g=e.concat,l=e.push,r=e.indexOf,n={},o=n.toString,y=n.hasOwnProperty,s=y.toString,u=s.call(Object),v={},_=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},c={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var i,r,o=(n=n||T).createElement("script");if(o.text=t,e)for(i in c)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?n[o.call(t)]||"object":typeof t}var S=function(t,e){return new S.fn.init(t,e)},h=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function p(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!_(t)&&!m(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}S.fn=S.prototype={jquery:"3.4.1",constructor:S,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=S.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return S.each(this,t)},map:function(n){return this.pushStack(S.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},S.extend=S.fn.extend=function(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||_(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&s!==i&&(u&&i&&(S.isPlainObject(i)||(r=Array.isArray(i)))?(n=s[e],o=r&&!Array.isArray(n)?[]:r||S.isPlainObject(n)?n:{},r=!1,s[e]=S.extend(u,o,i)):void 0!==i&&(s[e]=i));return s},S.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==o.call(t))&&(!(e=i(t))||"function"==typeof(n=y.call(e,"constructor")&&e.constructor)&&s.call(n)===u)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){b(t,{nonce:e&&e.nonce})},each:function(t,e){var n,i=0;if(p(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(h,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(p(Object(t))?S.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:r.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,s=!n;r<o;r++)!e(t[r],r)!=s&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,s=[];if(p(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&s.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&s.push(r);return g.apply([],s)},guid:1,support:v}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=e[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var f=function(n){function h(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(65536+i):String.fromCharCode(i>>10|55296,1023&i|56320)}function r(){x()}var t,f,b,o,s,d,p,m,w,l,u,x,C,a,T,g,c,y,v,S="sizzle"+1*new Date,_=n.document,E=0,i=0,k=lt(),N=lt(),M=lt(),D=lt(),A=function(t,e){return t===e&&(u=!0),0},O={}.hasOwnProperty,e=[],P=e.pop,I=e.push,R=e.push,L=e.slice,q=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",z="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",H="\\["+F+"*("+z+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+F+"*\\]",B=":("+z+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+H+")*)|.*)\\)|)",U=new RegExp(F+"+","g"),$=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),V=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),Y=new RegExp(F+"|>"),K=new RegExp(B),G=new RegExp("^"+z+"$"),Q={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z+"|[*])"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,tt=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nt=/[+~]/,it=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ot=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=bt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{R.apply(e=L.call(_.childNodes),_.childNodes),e[_.childNodes.length].nodeType}catch(t){R={apply:e.length?function(t,e){I.apply(t,L.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(e,t,n,i){var r,o,s,a,l,u,c,h=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!i&&((t?t.ownerDocument||t:_)!==C&&x(t),t=t||C,T)){if(11!==p&&(l=et.exec(e)))if(r=l[1]){if(9===p){if(!(s=t.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(h&&(s=h.getElementById(r))&&v(t,s)&&s.id===r)return n.push(s),n}else{if(l[2])return R.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&f.getElementsByClassName&&t.getElementsByClassName)return R.apply(n,t.getElementsByClassName(r)),n}if(f.qsa&&!D[e+" "]&&(!g||!g.test(e))&&(1!==p||"object"!==t.nodeName.toLowerCase())){if(c=e,h=t,1===p&&Y.test(e)){for((a=t.getAttribute("id"))?a=a.replace(rt,ot):t.setAttribute("id",a=S),o=(u=d(e)).length;o--;)u[o]="#"+a+" "+_t(u[o]);c=u.join(","),h=nt.test(e)&&yt(t.parentNode)||t}try{return R.apply(n,h.querySelectorAll(c)),n}catch(t){D(e,!0)}finally{a===S&&t.removeAttribute("id")}}}return m(e.replace($,"$1"),t,n,i)}function lt(){var i=[];return function t(e,n){return i.push(e+" ")>b.cacheLength&&delete t[i.shift()],t[e+" "]=n}}function ut(t){return t[S]=!0,t}function ct(t){var e=C.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),i=n.length;i--;)b.attrHandle[n[i]]=e}function pt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ft(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function dt(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function mt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&st(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function gt(s){return ut(function(o){return o=+o,ut(function(t,e){for(var n,i=s([],t.length,o),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}function yt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in f=at.support={},s=at.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!J.test(e||n&&n.nodeName||"HTML")},x=at.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:_;return i!==C&&9===i.nodeType&&i.documentElement&&(a=(C=i).documentElement,T=!s(C),_!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",r,!1):n.attachEvent&&n.attachEvent("onunload",r)),f.attributes=ct(function(t){return t.className="i",!t.getAttribute("className")}),f.getElementsByTagName=ct(function(t){return t.appendChild(C.createComment("")),!t.getElementsByTagName("*").length}),f.getElementsByClassName=tt.test(C.getElementsByClassName),f.getById=ct(function(t){return a.appendChild(t).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),f.getById?(b.filter.ID=function(t){var e=t.replace(it,h);return function(t){return t.getAttribute("id")===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&T){var n=e.getElementById(t);return n?[n]:[]}}):(b.filter.ID=function(t){var n=t.replace(it,h);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&T){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),b.find.TAG=f.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):f.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;n=o[r++];)1===n.nodeType&&i.push(n);return i},b.find.CLASS=f.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&T)return e.getElementsByClassName(t)},c=[],g=[],(f.qsa=tt.test(C.querySelectorAll))&&(ct(function(t){a.appendChild(t).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+F+"*(?:value|"+j+")"),t.querySelectorAll("[id~="+S+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+S+"+*").length||g.push(".#.+[+~]")}),ct(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=C.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+F+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),a.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(f.matchesSelector=tt.test(y=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ct(function(t){f.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),c.push("!=",B)}),g=g.length&&new RegExp(g.join("|")),c=c.length&&new RegExp(c.join("|")),e=tt.test(a.compareDocumentPosition),v=e||tt.test(a.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!f.sortDetached&&e.compareDocumentPosition(t)===n?t===C||t.ownerDocument===_&&v(_,t)?-1:e===C||e.ownerDocument===_&&v(_,e)?1:l?q(l,t)-q(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!r||!o)return t===C?-1:e===C?1:r?-1:o?1:l?q(l,t)-q(l,e):0;if(r===o)return pt(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?pt(s[i],a[i]):s[i]===_?-1:a[i]===_?1:0}),C},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if((t.ownerDocument||t)!==C&&x(t),f.matchesSelector&&T&&!D[e+" "]&&(!c||!c.test(e))&&(!g||!g.test(e)))try{var n=y.call(t,e);if(n||f.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){D(e,!0)}return 0<at(e,C,null,[t]).length},at.contains=function(t,e){return(t.ownerDocument||t)!==C&&x(t),v(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!==C&&x(t);var n=b.attrHandle[e.toLowerCase()],i=n&&O.call(b.attrHandle,e.toLowerCase())?n(t,e,!T):void 0;return void 0!==i?i:f.attributes||!T?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},at.escape=function(t){return(t+"").replace(rt,ot)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,n=[],i=0,r=0;if(u=!f.detectDuplicates,l=!f.sortStable&&t.slice(0),t.sort(A),u){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return l=null,t},o=at.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=o(e);return n},(b=at.selectors={cacheLength:50,createPseudo:ut,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(it,h),t[3]=(t[3]||t[4]||t[5]||"").replace(it,h),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&K.test(n)&&(e=d(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(it,h).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=k[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&k(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=at.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&-1<e.indexOf(r):"$="===i?r&&e.slice(-r.length)===r:"~="===i?-1<(" "+e.replace(U," ")+" ").indexOf(r):"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(d,t,e,m,g){var y="nth"!==d.slice(0,3),v="last"!==d.slice(-4),_="of-type"===t;return 1===m&&0===g?function(t){return!!t.parentNode}:function(t,e,n){var i,r,o,s,a,l,u=y!=v?"nextSibling":"previousSibling",c=t.parentNode,h=_&&t.nodeName.toLowerCase(),p=!n&&!_,f=!1;if(c){if(y){for(;u;){for(s=t;s=s[u];)if(_?s.nodeName.toLowerCase()===h:1===s.nodeType)return!1;l=u="only"===d&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&p){for(f=(a=(i=(r=(o=(s=c)[S]||(s[S]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===E&&i[1])&&i[2],s=a&&c.childNodes[a];s=++a&&s&&s[u]||(f=a=0)||l.pop();)if(1===s.nodeType&&++f&&s===t){r[d]=[E,a,f];break}}else if(p&&(f=a=(i=(r=(o=(s=t)[S]||(s[S]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===E&&i[1]),!1===f)for(;(s=++a&&s&&s[u]||(f=a=0)||l.pop())&&((_?s.nodeName.toLowerCase()!==h:1!==s.nodeType)||!++f||(p&&((r=(o=s[S]||(s[S]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]=[E,f]),s!==t)););return(f-=g)===m||f%m==0&&0<=f/m}}},PSEUDO:function(t,o){var e,s=b.pseudos[t]||b.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return s[S]?s(o):1<s.length?(e=[t,t,"",o],b.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,e){for(var n,i=s(t,o),r=i.length;r--;)t[n=q(t,i[r])]=!(e[n]=i[r])}):function(t){return s(t,0,e)}):s}},pseudos:{not:ut(function(t){var i=[],r=[],a=p(t.replace($,"$1"));return a[S]?ut(function(t,e,n,i){for(var r,o=a(t,null,i,[]),s=t.length;s--;)(r=o[s])&&(t[s]=!(e[s]=r))}):function(t,e,n){return i[0]=t,a(i,null,n,r),i[0]=null,!r.pop()}}),has:ut(function(e){return function(t){return 0<at(e,t).length}}),contains:ut(function(e){return e=e.replace(it,h),function(t){return-1<(t.textContent||o(t)).indexOf(e)}}),lang:ut(function(n){return G.test(n||"")||at.error("unsupported lang: "+n),n=n.replace(it,h).toLowerCase(),function(t){var e;do{if(e=T?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===a},focus:function(t){return t===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt(function(){return[0]}),last:gt(function(t,e){return[e-1]}),eq:gt(function(t,e,n){return[n<0?n+e:n]}),even:gt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:gt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:gt(function(t,e,n){for(var i=n<0?n+e:e<n?e:n;0<=--i;)t.push(i);return t}),gt:gt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[t]=ft(t);for(t in{submit:!0,reset:!0})b.pseudos[t]=dt(t);function vt(){}function _t(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function bt(a,t,e){var l=t.dir,u=t.next,c=u||l,h=e&&"parentNode"===c,p=i++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||h)return a(t,e,n);return!1}:function(t,e,n){var i,r,o,s=[E,p];if(n){for(;t=t[l];)if((1===t.nodeType||h)&&a(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||h)if(r=(o=t[S]||(t[S]={}))[t.uniqueID]||(o[t.uniqueID]={}),u&&u===t.nodeName.toLowerCase())t=t[l]||t;else{if((i=r[c])&&i[0]===E&&i[1]===p)return s[2]=i[2];if((r[c]=s)[2]=a(t,e,n))return!0}return!1}}function wt(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function xt(t,e,n,i,r){for(var o,s=[],a=0,l=t.length,u=null!=e;a<l;a++)(o=t[a])&&(n&&!n(o,i,r)||(s.push(o),u&&e.push(a)));return s}function Ct(f,d,m,g,y,t){return g&&!g[S]&&(g=Ct(g)),y&&!y[S]&&(y=Ct(y,t)),ut(function(t,e,n,i){var r,o,s,a=[],l=[],u=e.length,c=t||function(t,e,n){for(var i=0,r=e.length;i<r;i++)at(t,e[i],n);return n}(d||"*",n.nodeType?[n]:n,[]),h=!f||!t&&d?c:xt(c,a,f,n,i),p=m?y||(t?f:u||g)?[]:e:h;if(m&&m(h,p,n,i),g)for(r=xt(p,l),g(r,[],n,i),o=r.length;o--;)(s=r[o])&&(p[l[o]]=!(h[l[o]]=s));if(t){if(y||f){if(y){for(r=[],o=p.length;o--;)(s=p[o])&&r.push(h[o]=s);y(null,p=[],r,i)}for(o=p.length;o--;)(s=p[o])&&-1<(r=y?q(t,s):a[o])&&(t[r]=!(e[r]=s))}}else p=xt(p===e?p.splice(u,p.length):p),y?y(null,e,p,i):R.apply(e,p)})}function Tt(t){for(var r,e,n,i=t.length,o=b.relative[t[0].type],s=o||b.relative[" "],a=o?1:0,l=bt(function(t){return t===r},s,!0),u=bt(function(t){return-1<q(r,t)},s,!0),c=[function(t,e,n){var i=!o&&(n||e!==w)||((r=e).nodeType?l(t,e,n):u(t,e,n));return r=null,i}];a<i;a++)if(e=b.relative[t[a].type])c=[bt(wt(c),e)];else{if((e=b.filter[t[a].type].apply(null,t[a].matches))[S]){for(n=++a;n<i&&!b.relative[t[n].type];n++);return Ct(1<a&&wt(c),1<a&&_t(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace($,"$1"),e,a<n&&Tt(t.slice(a,n)),n<i&&Tt(t=t.slice(n)),n<i&&_t(t))}c.push(e)}return wt(c)}return vt.prototype=b.filters=b.pseudos,b.setFilters=new vt,d=at.tokenize=function(t,e){var n,i,r,o,s,a,l,u=N[t+" "];if(u)return e?0:u.slice(0);for(s=t,a=[],l=b.preFilter;s;){for(o in n&&!(i=W.exec(s))||(i&&(s=s.slice(i[0].length)||s),a.push(r=[])),n=!1,(i=V.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace($," ")}),s=s.slice(n.length)),b.filter)!(i=Q[o].exec(s))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?at.error(t):N(t,a).slice(0)},p=at.compile=function(t,e){var n,i=[],r=[],o=M[t+" "];if(!o){for(e||(e=d(t)),n=e.length;n--;)(o=Tt(e[n]))[S]?i.push(o):r.push(o);(o=M(t,function(g,y){function t(t,e,n,i,r){var o,s,a,l=0,u="0",c=t&&[],h=[],p=w,f=t||_&&b.find.TAG("*",r),d=E+=null==p?1:Math.random()||.1,m=f.length;for(r&&(w=e===C||e||r);u!==m&&null!=(o=f[u]);u++){if(_&&o){for(s=0,e||o.ownerDocument===C||(x(o),n=!T);a=g[s++];)if(a(o,e||C,n)){i.push(o);break}r&&(E=d)}v&&((o=!a&&o)&&l--,t&&c.push(o))}if(l+=u,v&&u!==l){for(s=0;a=y[s++];)a(c,h,e,n);if(t){if(0<l)for(;u--;)c[u]||h[u]||(h[u]=P.call(i));h=xt(h)}R.apply(i,h),r&&!t&&0<h.length&&1<l+y.length&&at.uniqueSort(i)}return r&&(E=d,w=p),c}var v=0<y.length,_=0<g.length;return v?ut(t):t}(r,i))).selector=t}return o},m=at.select=function(t,e,n,i){var r,o,s,a,l,u="function"==typeof t&&t,c=!i&&d(t=u.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(s=o[0]).type&&9===e.nodeType&&T&&b.relative[o[1].type]){if(!(e=(b.find.ID(s.matches[0].replace(it,h),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=Q.needsContext.test(t)?0:o.length;r--&&(s=o[r],!b.relative[a=s.type]);)if((l=b.find[a])&&(i=l(s.matches[0].replace(it,h),nt.test(o[0].type)&&yt(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&_t(o)))return R.apply(n,i),n;break}}return(u||p(t,c))(i,e,!T,n,!e||nt.test(t)&&yt(e.parentNode)||e),n},f.sortStable=S.split("").sort(A).join("")===S,f.detectDuplicates=!!u,x(),f.sortDetached=ct(function(t){return 1&t.compareDocumentPosition(C.createElement("fieldset"))}),ct(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),f.attributes&&ct(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ct(function(t){return null==t.getAttribute("disabled")})||ht(j,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),at}(C);S.find=f,S.expr=f.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=f.uniqueSort,S.text=f.getText,S.isXMLDoc=f.isXML,S.contains=f.contains,S.escapeSelector=f.escape;function d(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&S(t).is(n))break;i.push(t)}return i}function x(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}var E=S.expr.match.needsContext;function k(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(t,n,i){return _(n)?S.grep(t,function(t,e){return!!n.call(t,e,t)!==i}):n.nodeType?S.grep(t,function(t){return t===n!==i}):"string"!=typeof n?S.grep(t,function(t){return-1<r.call(n,t)!==i}):S.filter(n,t,i)}S.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?S.find.matchesSelector(i,t)?[i]:[]:S.find.matches(t,S.grep(e,function(t){return 1===t.nodeType}))},S.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(S(t).filter(function(){for(e=0;e<i;e++)if(S.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)S.find(t,r[e],n);return 1<i?S.uniqueSort(n):n},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&E.test(t)?S(t):t||[],!1).length}});var D,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||D,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):_(t)?void 0!==n.ready?n.ready(t):t(S):S.makeArray(t,this);if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:A.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof S?e[0]:e,S.merge(this,S.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:T,!0)),N.test(i[1])&&S.isPlainObject(e))for(i in e)_(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=T.getElementById(i[2]))&&(this[0]=r,this.length=1),this}).prototype=S.fn,D=S(T);var O=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}S.fn.extend({has:function(t){var e=S(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(S.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],s="string"!=typeof t&&S(t);if(!E.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&S.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?r.call(S(t),this[0]):r.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),S.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return d(t,"parentNode")},parentsUntil:function(t,e,n){return d(t,"parentNode",n)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return d(t,"nextSibling")},prevAll:function(t){return d(t,"previousSibling")},nextUntil:function(t,e,n){return d(t,"nextSibling",n)},prevUntil:function(t,e,n){return d(t,"previousSibling",n)},siblings:function(t){return x((t.parentNode||{}).firstChild,t)},children:function(t){return x(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(k(t,"template")&&(t=t.content||t),S.merge([],t.childNodes))}},function(i,r){S.fn[i]=function(t,e){var n=S.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=S.filter(e,n)),1<this.length&&(P[i]||S.uniqueSort(n),O.test(i)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function L(t){return t}function q(t){throw t}function j(t,e,n,i){var r;try{t&&_(r=t.promise)?r.call(t).done(e).fail(n):t&&_(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}S.Callbacks=function(i){i="string"==typeof i?function(t){var n={};return S.each(t.match(R)||[],function(t,e){n[e]=!0}),n}(i):S.extend({},i);function n(){for(o=o||i.once,e=r=!0;a.length;l=-1)for(t=a.shift();++l<s.length;)!1===s[l].apply(t[0],t[1])&&i.stopOnFalse&&(l=s.length,t=!1);i.memory||(t=!1),r=!1,o&&(s=t?[]:"")}var r,t,e,o,s=[],a=[],l=-1,u={add:function(){return s&&(t&&!r&&(l=s.length-1,a.push(t)),function n(t){S.each(t,function(t,e){_(e)?i.unique&&u.has(e)||s.push(e):e&&e.length&&"string"!==w(e)&&n(e)})}(arguments),t&&!r&&n()),this},remove:function(){return S.each(arguments,function(t,e){for(var n;-1<(n=S.inArray(e,s,n));)s.splice(n,1),n<=l&&l--}),this},has:function(t){return t?-1<S.inArray(t,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return o=a=[],s=t="",this},disabled:function(){return!s},lock:function(){return o=a=[],t||r||(s=t=""),this},locked:function(){return!!o},fireWith:function(t,e){return o||(e=[t,(e=e||[]).slice?e.slice():e],a.push(e),r||n()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!e}};return u},S.extend({Deferred:function(t){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],r="pending",s={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var r=arguments;return S.Deferred(function(i){S.each(o,function(t,e){var n=_(r[e[4]])&&r[e[4]];a[e[1]](function(){var t=n&&n.apply(this,arguments);t&&_(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this,n?[t]:arguments)})}),r=null}).promise()},then:function(e,n,i){var l=0;function u(r,o,s,a){return function(){function t(){var t,e;if(!(r<l)){if((t=s.apply(n,i))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,_(e)?a?e.call(t,u(l,o,L,a),u(l,o,q,a)):(l++,e.call(t,u(l,o,L,a),u(l,o,q,a),u(l,o,L,o.notifyWith))):(s!==L&&(n=void 0,i=[t]),(a||o.resolveWith)(n,i))}}var n=this,i=arguments,e=a?t:function(){try{t()}catch(t){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(t,e.stackTrace),l<=r+1&&(s!==q&&(n=void 0,i=[t]),o.rejectWith(n,i))}};r?e():(S.Deferred.getStackHook&&(e.stackTrace=S.Deferred.getStackHook()),C.setTimeout(e))}}return S.Deferred(function(t){o[0][3].add(u(0,t,_(i)?i:L,t.notifyWith)),o[1][3].add(u(0,t,_(e)?e:L)),o[2][3].add(u(0,t,_(n)?n:q))}).promise()},promise:function(t){return null!=t?S.extend(t,s):s}},a={};return S.each(o,function(t,e){var n=e[2],i=e[5];s[e[1]]=n.add,i&&n.add(function(){r=i},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),n.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=n.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){function e(e){return function(t){r[e]=this,o[e]=1<arguments.length?a.call(arguments):t,--n||s.resolveWith(r,o)}}var n=arguments.length,i=n,r=Array(i),o=a.call(arguments),s=S.Deferred();if(n<=1&&(j(t,s.done(e(i)).resolve,s.reject,!n),"pending"===s.state()||_(o[i]&&o[i].then)))return s.then();for(;i--;)j(o[i],e(i),s.reject);return s.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,e){C.console&&C.console.warn&&t&&F.test(t.name)&&C.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},S.readyException=function(t){C.setTimeout(function(){throw t})};var z=S.Deferred();function H(){T.removeEventListener("DOMContentLoaded",H),C.removeEventListener("load",H),S.ready()}S.fn.ready=function(t){return z.then(t).catch(function(t){S.readyException(t)}),this},S.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--S.readyWait:S.isReady)||(S.isReady=!0)!==t&&0<--S.readyWait||z.resolveWith(T,[S])}}),S.ready.then=z.then,"complete"===T.readyState||"loading"!==T.readyState&&!T.documentElement.doScroll?C.setTimeout(S.ready):(T.addEventListener("DOMContentLoaded",H),C.addEventListener("load",H));var B=function(t,e,n,i,r,o,s){var a=0,l=t.length,u=null==n;if("object"===w(n))for(a in r=!0,n)B(t,e,a,n[a],!0,o,s);else if(void 0!==i&&(r=!0,_(i)||(s=!0),u&&(e=s?(e.call(t,i),null):(u=e,function(t,e,n){return u.call(S(t),n)})),e))for(;a<l;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return r?t:u?e.call(t):l?e(t[0],n):o},U=/^-ms-/,$=/-([a-z])/g;function W(t,e){return e.toUpperCase()}function V(t){return t.replace(U,"ms-").replace($,W)}function Y(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function K(){this.expando=S.expando+K.uid++}K.uid=1,K.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Y(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[V(e)]=n;else for(i in e)r[V(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][V(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(V):(e=V(e))in i?[e]:e.match(R)||[]).length;for(;n--;)delete i[e[n]]}void 0!==e&&!S.isEmptyObject(i)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var G=new K,Q=new K,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,X=/[A-Z]/g;function Z(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(X,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:J.test(t)?JSON.parse(t):t)}(n)}catch(t){}Q.set(t,e,n)}else n=void 0;return n}S.extend({hasData:function(t){return Q.hasData(t)||G.hasData(t)},data:function(t,e,n){return Q.access(t,e,n)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,n){return G.access(t,e,n)},_removeData:function(t,e){G.remove(t,e)}}),S.fn.extend({data:function(n,t){var e,i,r,o=this[0],s=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){Q.set(this,n)}):B(this,function(t){var e;if(o&&void 0===t)return void 0!==(e=Q.get(o,n))?e:void 0!==(e=Z(o,n))?e:void 0;this.each(function(){Q.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(r=Q.get(o),1===o.nodeType&&!G.get(o,"hasDataAttrs"))){for(e=s.length;e--;)s[e]&&0===(i=s[e].name).indexOf("data-")&&(i=V(i.slice(5)),Z(o,i,r[i]));G.set(o,"hasDataAttrs",!0)}return r},removeData:function(t){return this.each(function(){Q.remove(this,t)})}}),S.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=G.get(t,e),n&&(!i||Array.isArray(n)?i=G.access(t,e,S.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=S.queue(t,e),i=n.length,r=n.shift(),o=S._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,function(){S.dequeue(t,e)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return G.get(t,n)||G.access(t,n,{empty:S.Callbacks("once memory").add(function(){G.remove(t,[e+"queue",n])})})}}),S.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?S.queue(this[0],e):void 0===n?this:this.each(function(){var t=S.queue(this,e,n);S._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&S.dequeue(this,e)})},dequeue:function(t){return this.each(function(){S.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--r||o.resolveWith(s,[s])}var i,r=1,o=S.Deferred(),s=this,a=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(i=G.get(s[a],t+"queueHooks"))&&i.empty&&(r++,i.empty.add(n));return n(),o.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],it=T.documentElement,rt=function(t){return S.contains(t.ownerDocument,t)},ot={composed:!0};it.getRootNode&&(rt=function(t){return S.contains(t.ownerDocument,t)||t.getRootNode(ot)===t.ownerDocument});function st(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=s[o];return r}var at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&rt(t)&&"none"===S.css(t,"display")};function lt(t,e,n,i){var r,o,s=20,a=i?function(){return i.cur()}:function(){return S.css(t,e,"")},l=a(),u=n&&n[3]||(S.cssNumber[e]?"":"px"),c=t.nodeType&&(S.cssNumber[e]||"px"!==u&&+l)&&et.exec(S.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;s--;)S.style(t,e,c+u),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),c/=o;c*=2,S.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}var ut={};function ct(t,e){for(var n,i,r,o,s,a,l,u=[],c=0,h=t.length;c<h;c++)(i=t[c]).style&&(n=i.style.display,e?("none"===n&&(u[c]=G.get(i,"display")||null,u[c]||(i.style.display="")),""===i.style.display&&at(i)&&(u[c]=(l=s=o=void 0,s=(r=i).ownerDocument,a=r.nodeName,(l=ut[a])||(o=s.body.appendChild(s.createElement(a)),l=S.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),ut[a]=l)))):"none"!==n&&(u[c]="none",G.set(i,"display",n)));for(c=0;c<h;c++)null!=u[c]&&(t[c].style.display=u[c]);return t}S.fn.extend({show:function(){return ct(this,!0)},hide:function(){return ct(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){at(this)?S(this).show():S(this).hide()})}});var ht=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ft=/^$|^module$|\/(?:java|ecma)script/i,dt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&k(t,e)?S.merge([t],n):n}function gt(t,e){for(var n=0,i=t.length;n<i;n++)G.set(t[n],"globalEval",!e||G.get(e[n],"globalEval"))}dt.optgroup=dt.option,dt.tbody=dt.tfoot=dt.colgroup=dt.caption=dt.thead,dt.th=dt.td;var yt,vt,_t=/<|&#?\w+;/;function bt(t,e,n,i,r){for(var o,s,a,l,u,c,h=e.createDocumentFragment(),p=[],f=0,d=t.length;f<d;f++)if((o=t[f])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(_t.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(pt.exec(o)||["",""])[1].toLowerCase(),l=dt[a]||dt._default,s.innerHTML=l[1]+S.htmlPrefilter(o)+l[2],c=l[0];c--;)s=s.lastChild;S.merge(p,s.childNodes),(s=h.firstChild).textContent=""}else p.push(e.createTextNode(o));for(h.textContent="",f=0;o=p[f++];)if(i&&-1<S.inArray(o,i))r&&r.push(o);else if(u=rt(o),s=mt(h.appendChild(o),"script"),u&&gt(s),n)for(c=0;o=s[c++];)ft.test(o.type||"")&&n.push(o);return h}yt=T.createDocumentFragment().appendChild(T.createElement("div")),(vt=T.createElement("input")).setAttribute("type","radio"),vt.setAttribute("checked","checked"),vt.setAttribute("name","t"),yt.appendChild(vt),v.checkClone=yt.cloneNode(!0).cloneNode(!0).lastChild.checked,yt.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!yt.cloneNode(!0).lastChild.defaultValue;var wt=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ct=/^([^.]*)(?:\.(.+)|)/;function Tt(){return!0}function St(){return!1}function Et(t,e){return t===function(){try{return T.activeElement}catch(t){}}()==("focus"===e)}function kt(t,e,n,i,r,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)kt(t,a,n,i,e[a],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=St;else if(!r)return t;return 1===o&&(s=r,(r=function(t){return S().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=S.guid++)),t.each(function(){S.event.add(this,e,r,i,n)})}function Nt(t,r,o){o?(G.set(t,r,!1),S.event.add(t,r,{namespace:!1,handler:function(t){var e,n,i=G.get(this,r);if(1&t.isTrigger&&this[r]){if(i.length)(S.event.special[r]||{}).delegateType&&t.stopPropagation();else if(i=a.call(arguments),G.set(this,r,i),e=o(this,r),this[r](),i!==(n=G.get(this,r))||e?G.set(this,r,!1):n={},i!==n)return t.stopImmediatePropagation(),t.preventDefault(),n.value}else i.length&&(G.set(this,r,{value:S.event.trigger(S.extend(i[0],S.Event.prototype),i.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===G.get(t,r)&&S.event.add(t,r,Tt)}S.event={global:{},add:function(e,t,n,i,r){var o,s,a,l,u,c,h,p,f,d,m,g=G.get(e);if(g)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&S.find.matchesSelector(it,r),n.guid||(n.guid=S.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(R)||[""]).length;u--;)f=m=(a=Ct.exec(t[u])||[])[1],d=(a[2]||"").split(".").sort(),f&&(h=S.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=S.event.special[f]||{},c=S.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&S.expr.match.needsContext.test(r),namespace:d.join(".")},o),(p=l[f])||((p=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,d,s)||e.addEventListener&&e.addEventListener(f,s)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[f]=!0)},remove:function(t,e,n,i,r){var o,s,a,l,u,c,h,p,f,d,m,g=G.hasData(t)&&G.get(t);if(g&&(l=g.events)){for(u=(e=(e||"").match(R)||[""]).length;u--;)if(f=m=(a=Ct.exec(e[u])||[])[1],d=(a[2]||"").split(".").sort(),f){for(h=S.event.special[f]||{},p=l[f=(i?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!r&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(t,c));s&&!p.length&&(h.teardown&&!1!==h.teardown.call(t,d,g.handle)||S.removeEvent(t,f,g.handle),delete l[f])}else for(f in l)S.event.remove(t,f+e[u],n,i,!0);S.isEmptyObject(l)&&G.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,s,a=S.event.fix(t),l=new Array(arguments.length),u=(G.get(this,"events")||{})[a.type]||[],c=S.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(s=S.event.handlers.call(this,a,u),e=0;(r=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==o.namespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(i=((S.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,r,o,s,a=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],s={},n=0;n<l;n++)void 0===s[r=(i=e[n]).selector+" "]&&(s[r]=i.needsContext?-1<S(r,this).index(u):S.find(r,this,null,[u]).length),s[r]&&o.push(i);o.length&&a.push({elem:u,handlers:o})}return u=this,l<e.length&&a.push({elem:u,handlers:e.slice(l)}),a},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:_(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[S.expando]?t:new S.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ht.test(e.type)&&e.click&&k(e,"input")&&Nt(e,"click",Tt),!1},trigger:function(t){var e=this||t;return ht.test(e.type)&&e.click&&k(e,"input")&&Nt(e,"click"),!0},_default:function(t){var e=t.target;return ht.test(e.type)&&e.click&&k(e,"input")&&G.get(e,"click")||k(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},S.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},S.Event=function(t,e){if(!(this instanceof S.Event))return new S.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Tt:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&S.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Tt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Tt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Tt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(t,e){S.event.special[t]={setup:function(){return Nt(this,t,Et),!1},trigger:function(){return Nt(this,t),!0},delegateType:e}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){S.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||S.contains(this,n))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=r),e}}}),S.fn.extend({on:function(t,e,n,i){return kt(this,t,e,n,i)},one:function(t,e,n,i){return kt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,S(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=St),this.each(function(){S.event.remove(this,t,n,e)});for(r in t)this.off(r,e,t[r]);return this}});var Mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Dt=/<script|<style|<link/i,At=/checked\s*(?:[^=]|=\s*.checked.)/i,Ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pt(t,e){return k(t,"table")&&k(11!==e.nodeType?e:e.firstChild,"tr")&&S(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Rt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Lt(t,e){var n,i,r,o,s,a,l,u;if(1===e.nodeType){if(G.hasData(t)&&(o=G.access(t),s=G.set(e,o),u=o.events))for(r in delete s.handle,s.events={},u)for(n=0,i=u[r].length;n<i;n++)S.event.add(e,r,u[r][n]);Q.hasData(t)&&(a=Q.access(t),l=S.extend({},a),Q.set(e,l))}}function qt(n,i,r,o){i=g.apply([],i);var t,e,s,a,l,u,c=0,h=n.length,p=h-1,f=i[0],d=_(f);if(d||1<h&&"string"==typeof f&&!v.checkClone&&At.test(f))return n.each(function(t){var e=n.eq(t);d&&(i[0]=f.call(this,t,e.html())),qt(e,i,r,o)});if(h&&(e=(t=bt(i,n[0].ownerDocument,!1,n,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(a=(s=S.map(mt(t,"script"),It)).length;c<h;c++)l=t,c!==p&&(l=S.clone(l,!0,!0),a&&S.merge(s,mt(l,"script"))),r.call(n[c],l,c);if(a)for(u=s[s.length-1].ownerDocument,S.map(s,Rt),c=0;c<a;c++)l=s[c],ft.test(l.type||"")&&!G.access(l,"globalEval")&&S.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):b(l.textContent.replace(Ot,""),l,u))}return n}function jt(t,e,n){for(var i,r=e?S.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||S.cleanData(mt(i)),i.parentNode&&(n&&rt(i)&&gt(mt(i,"script")),i.parentNode.removeChild(i));return t}S.extend({htmlPrefilter:function(t){return t.replace(Mt,"<$1></$2>")},clone:function(t,e,n){var i,r,o,s,a,l,u,c=t.cloneNode(!0),h=rt(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||S.isXMLDoc(t)))for(s=mt(c),i=0,r=(o=mt(t)).length;i<r;i++)a=o[i],l=s[i],void 0,"input"===(u=l.nodeName.toLowerCase())&&ht.test(a.type)?l.checked=a.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=a.defaultValue);if(e)if(n)for(o=o||mt(t),s=s||mt(c),i=0,r=o.length;i<r;i++)Lt(o[i],s[i]);else Lt(t,c);return 0<(s=mt(c,"script")).length&&gt(s,!h&&mt(t,"script")),c},cleanData:function(t){for(var e,n,i,r=S.event.special,o=0;void 0!==(n=t[o]);o++)if(Y(n)){if(e=n[G.expando]){if(e.events)for(i in e.events)r[i]?S.event.remove(n,i):S.removeEvent(n,i,e.handle);n[G.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return B(this,function(t){return void 0===t?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return qt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pt(this,t).appendChild(t)})},prepend:function(){return qt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Pt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return qt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return qt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(S.cleanData(mt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return S.clone(this,t,e)})},html:function(t){return B(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!dt[(pt.exec(t)||["",""])[1].toLowerCase()]){t=S.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(S.cleanData(mt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return qt(this,arguments,function(t){var e=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(mt(this)),e&&e.replaceChild(t,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){S.fn[t]=function(t){for(var e,n=[],i=S(t),r=i.length-1,o=0;o<=r;o++)e=o===r?this:this.clone(!0),S(i[o])[s](e),l.apply(n,e.get());return this.pushStack(n)}});var Ft,zt,Ht,Bt,Ut,$t,Wt,Vt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Yt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=C),e.getComputedStyle(t)},Kt=new RegExp(nt.join("|"),"i");function Gt(){if(Wt){$t.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Wt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild($t).appendChild(Wt);var t=C.getComputedStyle(Wt);Ft="1%"!==t.top,Ut=12===Qt(t.marginLeft),Wt.style.right="60%",Bt=36===Qt(t.right),zt=36===Qt(t.width),Wt.style.position="absolute",Ht=12===Qt(Wt.offsetWidth/3),it.removeChild($t),Wt=null}}function Qt(t){return Math.round(parseFloat(t))}function Jt(t,e,n){var i,r,o,s,a=t.style;return(n=n||Yt(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||rt(t)||(s=S.style(t,e)),!v.pixelBoxStyles()&&Vt.test(s)&&Kt.test(e)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function Xt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}$t=T.createElement("div"),(Wt=T.createElement("div")).style&&(Wt.style.backgroundClip="content-box",Wt.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===Wt.style.backgroundClip,S.extend(v,{boxSizingReliable:function(){return Gt(),zt},pixelBoxStyles:function(){return Gt(),Bt},pixelPosition:function(){return Gt(),Ft},reliableMarginLeft:function(){return Gt(),Ut},scrollboxSize:function(){return Gt(),Ht}}));var Zt=["Webkit","Moz","ms"],te=T.createElement("div").style,ee={};function ne(t){var e=S.cssProps[t]||ee[t];return e||(t in te?t:ee[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Zt.length;n--;)if((t=Zt[n]+e)in te)return t}(t)||t)}var ie=/^(none|table(?!-c[ea]).+)/,re=/^--/,oe={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:"0",fontWeight:"400"};function ae(t,e,n){var i=et.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function le(t,e,n,i,r,o){var s="width"===e?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=S.css(t,n+nt[s],!0,r)),i?("content"===n&&(l-=S.css(t,"padding"+nt[s],!0,r)),"margin"!==n&&(l-=S.css(t,"border"+nt[s]+"Width",!0,r))):(l+=S.css(t,"padding"+nt[s],!0,r),"padding"!==n?l+=S.css(t,"border"+nt[s]+"Width",!0,r):a+=S.css(t,"border"+nt[s]+"Width",!0,r));return!i&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-a-.5))||0),l}function ue(t,e,n){var i=Yt(t),r=(!v.boxSizingReliable()||n)&&"border-box"===S.css(t,"boxSizing",!1,i),o=r,s=Jt(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Vt.test(s)){if(!n)return s;s="auto"}return(!v.boxSizingReliable()&&r||"auto"===s||!parseFloat(s)&&"inline"===S.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===S.css(t,"boxSizing",!1,i),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+le(t,e,n||(r?"border":"content"),o,i,s)+"px"}function ce(t,e,n,i,r){return new ce.prototype.init(t,e,n,i,r)}S.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Jt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=V(e),l=re.test(e),u=t.style;if(l||(e=ne(a)),s=S.cssHooks[e]||S.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:u[e];"string"===(o=typeof n)&&(r=et.exec(n))&&r[1]&&(n=lt(t,e,r),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=r&&r[3]||(S.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,i){var r,o,s,a=V(e);return re.test(e)||(e=ne(a)),(s=S.cssHooks[e]||S.cssHooks[a])&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=Jt(t,e,i)),"normal"===r&&e in se&&(r=se[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),S.each(["height","width"],function(t,l){S.cssHooks[l]={get:function(t,e,n){if(e)return!ie.test(S.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ue(t,l,n):st(t,oe,function(){return ue(t,l,n)})},set:function(t,e,n){var i,r=Yt(t),o=!v.scrollboxSize()&&"absolute"===r.position,s=(o||n)&&"border-box"===S.css(t,"boxSizing",!1,r),a=n?le(t,l,n,s,r):0;return s&&o&&(a-=Math.ceil(t["offset"+l[0].toUpperCase()+l.slice(1)]-parseFloat(r[l])-le(t,l,"border",!1,r)-.5)),a&&(i=et.exec(e))&&"px"!==(i[3]||"px")&&(t.style[l]=e,e=S.css(t,l)),ae(0,e,a)}}}),S.cssHooks.marginLeft=Xt(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Jt(t,"marginLeft"))||t.getBoundingClientRect().left-st(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(r,o){S.cssHooks[r+o]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[r+nt[e]+o]=i[e]||i[e-2]||i[0];return n}},"margin"!==r&&(S.cssHooks[r+o].set=ae)}),S.fn.extend({css:function(t,e){return B(this,function(t,e,n){var i,r,o={},s=0;if(Array.isArray(e)){for(i=Yt(t),r=e.length;s<r;s++)o[e[s]]=S.css(t,e[s],!1,i);return o}return void 0!==n?S.style(t,e,n):S.css(t,e)},t,e,1<arguments.length)}}),((S.Tween=ce).prototype={constructor:ce,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||S.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var t=ce.propHooks[this.prop];return t&&t.get?t.get(this):ce.propHooks._default.get(this)},run:function(t){var e,n=ce.propHooks[this.prop];return this.options.duration?this.pos=e=S.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ce.propHooks._default.set(this),this}}).init.prototype=ce.prototype,(ce.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=S.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){S.fx.step[t.prop]?S.fx.step[t.prop](t):1!==t.elem.nodeType||!S.cssHooks[t.prop]&&null==t.elem.style[ne(t.prop)]?t.elem[t.prop]=t.now:S.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ce.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},S.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},S.fx=ce.prototype.init,S.fx.step={};var he,pe,fe,de,me=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function ye(){pe&&(!1===T.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ye):C.setTimeout(ye,S.fx.interval),S.fx.tick())}function ve(){return C.setTimeout(function(){he=void 0}),he=Date.now()}function _e(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=nt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function be(t,e,n){for(var i,r=(we.tweeners[e]||[]).concat(we.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,e,t))return i}function we(o,t,e){var n,s,i=0,r=we.prefilters.length,a=S.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=he||ve(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),i=0,r=u.tweens.length;i<r;i++)u.tweens[i].run(n);return a.notifyWith(o,[u,n,e]),n<1&&r?e:(r||a.notifyWith(o,[u,1,0]),a.resolveWith(o,[u]),!1)},u=a.promise({elem:o,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},e),originalProperties:t,originalOptions:e,startTime:he||ve(),duration:e.duration,tweens:[],createTween:function(t,e){var n=S.Tween(o,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(s)return this;for(s=!0;e<n;e++)u.tweens[e].run(1);return t?(a.notifyWith(o,[u,1,0]),a.resolveWith(o,[u,t])):a.rejectWith(o,[u,t]),this}}),c=u.props;for(!function(t,e){var n,i,r,o,s;for(n in t)if(r=e[i=V(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(s=S.cssHooks[i])&&"expand"in s)for(n in o=s.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}(c,u.opts.specialEasing);i<r;i++)if(n=we.prefilters[i].call(u,o,c,u.opts))return _(n.stop)&&(S._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,be,u),_(u.opts.start)&&u.opts.start.call(o,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),S.fx.timer(S.extend(l,{elem:o,anim:u,queue:u.opts.queue})),u}S.Animation=S.extend(we,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return lt(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){for(var n,i=0,r=(t=_(t)?(e=t,["*"]):t.match(R)).length;i<r;i++)n=t[i],we.tweeners[n]=we.tweeners[n]||[],we.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,o,s,a,l,u,c,h="width"in e||"height"in e,p=this,f={},d=t.style,m=t.nodeType&&at(t),g=G.get(t,"fxshow");for(i in n.queue||(null==(s=S._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,p.always(function(){p.always(function(){s.unqueued--,S.queue(t,"fx").length||s.empty.fire()})})),e)if(r=e[i],me.test(r)){if(delete e[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||S.style(t,i)}if((l=!S.isEmptyObject(e))||!S.isEmptyObject(f))for(i in h&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(u=g&&g.display)&&(u=G.get(t,"display")),"none"===(c=S.css(t,"display"))&&(u?c=u:(ct([t],!0),u=t.style.display||u,c=S.css(t,"display"),ct([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===S.css(t,"float")&&(l||(p.done(function(){d.display=u}),null==u&&(c=d.display,u="none"===c?"":c)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",p.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=G.access(t,"fxshow",{display:u}),o&&(g.hidden=!m),m&&ct([t],!0),p.done(function(){for(i in m||ct([t]),G.remove(t,"fxshow"),f)S.style(t,i,f[i])})),l=be(m?g[i]:0,i,p),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?we.prefilters.unshift(t):we.prefilters.push(t)}}),S.speed=function(t,e,n){var i=t&&"object"==typeof t?S.extend({},t):{complete:n||!n&&e||_(t)&&t,duration:t,easing:n&&e||e&&!_(e)&&e};return S.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in S.fx.speeds?i.duration=S.fx.speeds[i.duration]:i.duration=S.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){_(i.old)&&i.old.call(this),i.queue&&S.dequeue(this,i.queue)},i},S.fn.extend({fadeTo:function(t,e,n,i){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){function r(){var t=we(this,S.extend({},e),s);(o||G.get(this,"finish"))&&t.stop(!0)}var o=S.isEmptyObject(e),s=S.speed(t,n,i);return r.finish=r,o||!1===s.queue?this.each(r):this.queue(s.queue,r)},stop:function(r,t,o){function s(t){var e=t.stop;delete t.stop,e(o)}return"string"!=typeof r&&(o=t,t=r,r=void 0),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=S.timers,i=G.get(this);if(e)i[e]&&i[e].stop&&s(i[e]);else for(e in i)i[e]&&i[e].stop&&ge.test(e)&&s(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||S.dequeue(this,r)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=G.get(this),n=e[s+"queue"],i=e[s+"queueHooks"],r=S.timers,o=n?n.length:0;for(e.finish=!0,S.queue(this,s,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===s&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),S.each(["toggle","show","hide"],function(t,i){var r=S.fn[i];S.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(_e(i,!0),t,e,n)}}),S.each({slideDown:_e("show"),slideUp:_e("hide"),slideToggle:_e("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){S.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),S.timers=[],S.fx.tick=function(){var t,e=0,n=S.timers;for(he=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||S.fx.stop(),he=void 0},S.fx.timer=function(t){S.timers.push(t),S.fx.start()},S.fx.interval=13,S.fx.start=function(){pe||(pe=!0,ye())},S.fx.stop=function(){pe=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(i,t){return i=S.fx&&S.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=C.setTimeout(t,i);e.stop=function(){C.clearTimeout(n)}})},fe=T.createElement("input"),de=T.createElement("select").appendChild(T.createElement("option")),fe.type="checkbox",v.checkOn=""!==fe.value,v.optSelected=de.selected,(fe=T.createElement("input")).value="t",fe.type="radio",v.radioValue="t"===fe.value;var xe,Ce=S.expr.attrHandle;S.fn.extend({attr:function(t,e){return B(this,S.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){S.removeAttr(this,t)})}}),S.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?S.prop(t,e,n):(1===o&&S.isXMLDoc(t)||(r=S.attrHooks[e.toLowerCase()]||(S.expr.match.bool.test(e)?xe:void 0)),void 0!==n?null===n?void S.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=S.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&k(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(R);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),xe={set:function(t,e,n){return!1===e?S.removeAttr(t,n):t.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(t,e){var s=Ce[e]||S.find.attr;Ce[e]=function(t,e,n){var i,r,o=e.toLowerCase();return n||(r=Ce[o],Ce[o]=i,i=null!=s(t,e,n)?o:null,Ce[o]=r),i}});var Te=/^(?:input|select|textarea|button)$/i,Se=/^(?:a|area)$/i;function Ee(t){return(t.match(R)||[]).join(" ")}function ke(t){return t.getAttribute&&t.getAttribute("class")||""}function Ne(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(R)||[]}S.fn.extend({prop:function(t,e){return B(this,S.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[S.propFix[t]||t]})}}),S.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(t)||(e=S.propFix[e]||e,r=S.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=S.find.attr(t,"tabindex");return e?parseInt(e,10):Te.test(t.nodeName)||Se.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(S.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(e){var t,n,i,r,o,s,a,l=0;if(_(e))return this.each(function(t){S(this).addClass(e.call(this,t,ke(this)))});if((t=Ne(e)).length)for(;n=this[l++];)if(r=ke(n),i=1===n.nodeType&&" "+Ee(r)+" "){for(s=0;o=t[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(a=Ee(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,r,o,s,a,l=0;if(_(e))return this.each(function(t){S(this).removeClass(e.call(this,t,ke(this)))});if(!arguments.length)return this.attr("class","");if((t=Ne(e)).length)for(;n=this[l++];)if(r=ke(n),i=1===n.nodeType&&" "+Ee(r)+" "){for(s=0;o=t[s++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(a=Ee(i))&&n.setAttribute("class",a)}return this},toggleClass:function(r,e){var o=typeof r,s="string"==o||Array.isArray(r);return"boolean"==typeof e&&s?e?this.addClass(r):this.removeClass(r):_(r)?this.each(function(t){S(this).toggleClass(r.call(this,t,ke(this),e),e)}):this.each(function(){var t,e,n,i;if(s)for(e=0,n=S(this),i=Ne(r);t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==r&&"boolean"!=o||((t=ke(this))&&G.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===r?"":G.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+Ee(ke(n))+" ").indexOf(e))return!0;return!1}});var Me=/\r/g;S.fn.extend({val:function(n){var i,t,r,e=this[0];return arguments.length?(r=_(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?n.call(this,t,S(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=S.map(e,function(t){return null==t?"":t+""})),(i=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):e?(i=S.valHooks[e.type]||S.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(Me,""):null==t?"":t:void 0}}),S.extend({valHooks:{option:{get:function(t){var e=S.find.attr(t,"value");return null!=e?e:Ee(S.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?o+1:r.length;for(i=o<0?l:s?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!k(n.parentNode,"optgroup"))){if(e=S(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=S.makeArray(e),s=r.length;s--;)((i=r[s]).selected=-1<S.inArray(S.valHooks.option.get(i),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<S.inArray(S(t).val(),e)}},v.checkOn||(S.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),v.focusin="onfocusin"in C;function De(t){t.stopPropagation()}var Ae=/^(?:focusinfocus|focusoutblur)$/;S.extend(S.event,{trigger:function(t,e,n,i){var r,o,s,a,l,u,c,h,p=[n||T],f=y.call(t,"type")?t.type:t,d=y.call(t,"namespace")?t.namespace.split("."):[];if(o=h=s=n=n||T,3!==n.nodeType&&8!==n.nodeType&&!Ae.test(f+S.event.triggered)&&(-1<f.indexOf(".")&&(f=(d=f.split(".")).shift(),d.sort()),l=f.indexOf(":")<0&&"on"+f,(t=t[S.expando]?t:new S.Event(f,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=d.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:S.makeArray(e,[t]),c=S.event.special[f]||{},i||!c.trigger||!1!==c.trigger.apply(n,e))){if(!i&&!c.noBubble&&!m(n)){for(a=c.delegateType||f,Ae.test(a+f)||(o=o.parentNode);o;o=o.parentNode)p.push(o),s=o;s===(n.ownerDocument||T)&&p.push(s.defaultView||s.parentWindow||C)}for(r=0;(o=p[r++])&&!t.isPropagationStopped();)h=o,t.type=1<r?a:c.bindType||f,(u=(G.get(o,"events")||{})[t.type]&&G.get(o,"handle"))&&u.apply(o,e),(u=l&&o[l])&&u.apply&&Y(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=f,i||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),e)||!Y(n)||l&&_(n[f])&&!m(n)&&((s=n[l])&&(n[l]=null),S.event.triggered=f,t.isPropagationStopped()&&h.addEventListener(f,De),n[f](),t.isPropagationStopped()&&h.removeEventListener(f,De),S.event.triggered=void 0,s&&(n[l]=s)),t.result}},simulate:function(t,e,n){var i=S.extend(new S.Event,n,{type:t,isSimulated:!0});S.event.trigger(i,null,e)}}),S.fn.extend({trigger:function(t,e){return this.each(function(){S.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return S.event.trigger(t,e,n,!0)}}),v.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,i){function r(t){S.event.simulate(i,t.target,S.event.fix(t))}S.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=G.access(t,i);e||t.addEventListener(n,r,!0),G.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=G.access(t,i)-1;e?G.access(t,i,e):(t.removeEventListener(n,r,!0),G.remove(t,i))}}});var Oe=C.location,Pe=Date.now(),Ie=/\?/;S.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new C.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+t),e};var Re=/\[\]$/,Le=/\r?\n/g,qe=/^(?:submit|button|image|reset|file)$/i,je=/^(?:input|select|textarea|keygen)/i;function Fe(n,t,i,r){var e;if(Array.isArray(t))S.each(t,function(t,e){i||Re.test(n)?r(n,e):Fe(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,i,r)});else if(i||"object"!==w(t))r(n,t);else for(e in t)Fe(n+"["+e+"]",t[e],i,r)}S.param=function(t,e){function n(t,e){var n=_(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)}var i,r=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!S.isPlainObject(t))S.each(t,function(){n(this.name,this.value)});else for(i in t)Fe(i,t[i],e,n);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=S.prop(this,"elements");return t?S.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!S(this).is(":disabled")&&je.test(this.nodeName)&&!qe.test(t)&&(this.checked||!ht.test(t))}).map(function(t,e){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(t){return{name:e.name,value:t.replace(Le,"\r\n")}}):{name:e.name,value:n.replace(Le,"\r\n")}}).get()}});var ze=/%20/g,He=/#.*$/,Be=/([?&])_=[^&]*/,Ue=/^(.*?):[ \t]*([^\r\n]*)$/gm,$e=/^(?:GET|HEAD)$/,We=/^\/\//,Ve={},Ye={},Ke="*/".concat("*"),Ge=T.createElement("a");function Qe(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(R)||[];if(_(e))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function Je(e,r,o,s){var a={},l=e===Ye;function u(t){var i;return a[t]=!0,S.each(e[t]||[],function(t,e){var n=e(r,o,s);return"string"!=typeof n||l||a[n]?l?!(i=n):void 0:(r.dataTypes.unshift(n),u(n),!1)}),i}return u(r.dataTypes[0])||!a["*"]&&u("*")}function Xe(t,e){var n,i,r=S.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&S.extend(!0,t,i),t}Ge.href=Oe.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Oe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Oe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ke,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Xe(Xe(t,S.ajaxSettings),e):Xe(S.ajaxSettings,t)},ajaxPrefilter:Qe(Ve),ajaxTransport:Qe(Ye),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var c,h,p,n,f,i,d,m,r,o,g=S.ajaxSetup({},e),y=g.context||g,v=g.context&&(y.nodeType||y.jquery)?S(y):S.event,_=S.Deferred(),b=S.Callbacks("once memory"),w=g.statusCode||{},s={},a={},l="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(d){if(!n)for(n={};e=Ue.exec(p);)n[e[1].toLowerCase()+" "]=(n[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=n[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return d?p:null},setRequestHeader:function(t,e){return null==d&&(t=a[t.toLowerCase()]=a[t.toLowerCase()]||t,s[t]=e),this},overrideMimeType:function(t){return null==d&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(d)x.always(t[x.status]);else for(e in t)w[e]=[w[e],t[e]];return this},abort:function(t){var e=t||l;return c&&c.abort(e),u(0,e),this}};if(_.promise(x),g.url=((t||g.url||Oe.href)+"").replace(We,Oe.protocol+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(R)||[""],null==g.crossDomain){i=T.createElement("a");try{i.href=g.url,i.href=i.href,g.crossDomain=Ge.protocol+"//"+Ge.host!=i.protocol+"//"+i.host}catch(t){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=S.param(g.data,g.traditional)),Je(Ve,g,e,x),d)return x;for(r in(m=S.event&&g.global)&&0==S.active++&&S.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!$e.test(g.type),h=g.url.replace(He,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(ze,"+")):(o=g.url.slice(h.length),g.data&&(g.processData||"string"==typeof g.data)&&(h+=(Ie.test(h)?"&":"?")+g.data,delete g.data),!1===g.cache&&(h=h.replace(Be,"$1"),o=(Ie.test(h)?"&":"?")+"_="+Pe+++o),g.url=h+o),g.ifModified&&(S.lastModified[h]&&x.setRequestHeader("If-Modified-Since",S.lastModified[h]),S.etag[h]&&x.setRequestHeader("If-None-Match",S.etag[h])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&x.setRequestHeader("Content-Type",g.contentType),x.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ke+"; q=0.01":""):g.accepts["*"]),g.headers)x.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(y,x,g)||d))return x.abort();if(l="abort",b.add(g.complete),x.done(g.success),x.fail(g.error),c=Je(Ye,g,e,x)){if(x.readyState=1,m&&v.trigger("ajaxSend",[x,g]),d)return x;g.async&&0<g.timeout&&(f=C.setTimeout(function(){x.abort("timeout")},g.timeout));try{d=!1,c.send(s,u)}catch(t){if(d)throw t;u(-1,t)}}else u(-1,"No Transport");function u(t,e,n,i){var r,o,s,a,l,u=e;d||(d=!0,f&&C.clearTimeout(f),c=void 0,p=i||"",x.readyState=0<t?4:0,r=200<=t&&t<300||304===t,n&&(a=function(t,e,n){for(var i,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}(g,x,n)),a=function(t,e,n,i){var r,o,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(r in u)if((a=r.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[r]:!0!==u[r]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(g,a,x,r),r?(g.ifModified&&((l=x.getResponseHeader("Last-Modified"))&&(S.lastModified[h]=l),(l=x.getResponseHeader("etag"))&&(S.etag[h]=l)),204===t||"HEAD"===g.type?u="nocontent":304===t?u="notmodified":(u=a.state,o=a.data,r=!(s=a.error))):(s=u,!t&&u||(u="error",t<0&&(t=0))),x.status=t,x.statusText=(e||u)+"",r?_.resolveWith(y,[o,u,x]):_.rejectWith(y,[x,u,s]),x.statusCode(w),w=void 0,m&&v.trigger(r?"ajaxSuccess":"ajaxError",[x,g,r?o:s]),b.fireWith(y,[x,u]),m&&(v.trigger("ajaxComplete",[x,g]),--S.active||S.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,n){return S.get(t,e,n,"json")},getScript:function(t,e){return S.get(t,void 0,e,"script")}}),S.each(["get","post"],function(t,r){S[r]=function(t,e,n,i){return _(e)&&(i=i||n,n=e,e=void 0),S.ajax(S.extend({url:t,type:r,dataType:i,data:e,success:n},S.isPlainObject(t)&&t))}}),S._evalUrl=function(t,e){return S.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){S.globalEval(t,e)}})},S.fn.extend({wrapAll:function(t){var e;return this[0]&&(_(t)&&(t=t.call(this[0])),e=S(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return _(n)?this.each(function(t){S(this).wrapInner(n.call(this,t))}):this.each(function(){var t=S(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=_(e);return this.each(function(t){S(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(t){return!S.expr.pseudos.visible(t)},S.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(t){}};var Ze={0:200,1223:204},tn=S.ajaxSettings.xhr();v.cors=!!tn&&"withCredentials"in tn,v.ajax=tn=!!tn,S.ajaxTransport(function(r){var o,s;if(v.cors||tn&&!r.crossDomain)return{send:function(t,e){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);o=function(t){return function(){o&&(o=s=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===t?i.abort():"error"===t?"number"!=typeof i.status?e(0,"error"):e(i.status,i.statusText):e(Ze[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=o(),s=i.onerror=i.ontimeout=o("error"),void 0!==i.onabort?i.onabort=s:i.onreadystatechange=function(){4===i.readyState&&C.setTimeout(function(){o&&s()})},o=o("abort");try{i.send(r.hasContent&&r.data||null)}catch(t){if(o)throw t}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return S.globalEval(t),t}}}),S.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),S.ajaxTransport("script",function(n){var i,r;if(n.crossDomain||n.scriptAttrs)return{send:function(t,e){i=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(t){i.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),T.head.appendChild(i[0])},abort:function(){r&&r()}}});var en,nn=[],rn=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=nn.pop()||S.expando+"_"+Pe++;return this[t]=!0,t}}),S.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,o,s=!1!==t.jsonp&&(rn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&rn.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=_(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(rn,"$1"+i):!1!==t.jsonp&&(t.url+=(Ie.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||S.error(i+" was not called"),o[0]},t.dataTypes[0]="json",r=C[i],C[i]=function(){o=arguments},n.always(function(){void 0===r?S(C).removeProp(i):C[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,nn.push(i)),o&&_(r)&&r(o[0]),o=r=void 0}),"script"}),v.createHTMLDocument=((en=T.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),S.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((i=(e=T.implementation.createHTMLDocument("")).createElement("base")).href=T.location.href,e.head.appendChild(i)):e=T),o=!n&&[],(r=N.exec(t))?[e.createElement(r[1])]:(r=bt([t],e,o),o&&o.length&&S(o).remove(),S.merge([],r.childNodes)));var i,r,o},S.fn.load=function(t,e,n){var i,r,o,s=this,a=t.indexOf(" ");return-1<a&&(i=Ee(t.slice(a)),t=t.slice(0,a)),_(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<s.length&&S.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?S("<div>").append(S.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){S.fn[e]=function(t){return this.on(e,t)}}),S.expr.pseudos.animated=function(e){return S.grep(S.timers,function(t){return e===t.elem}).length},S.offset={setOffset:function(t,e,n){var i,r,o,s,a,l,u=S.css(t,"position"),c=S(t),h={};"static"===u&&(t.style.position="relative"),a=c.offset(),o=S.css(t,"top"),l=S.css(t,"left"),r=("absolute"===u||"fixed"===u)&&-1<(o+l).indexOf("auto")?(s=(i=c.position()).top,i.left):(s=parseFloat(o)||0,parseFloat(l)||0),_(e)&&(e=e.call(t,n,S.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):c.css(h)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){S.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===S.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===S.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=S(t).offset()).top+=S.css(t,"borderTopWidth",!0),r.left+=S.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-S.css(i,"marginTop",!0),left:e.left-r.left-S.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===S.css(t,"position");)t=t.offsetParent;return t||it})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o="pageYOffset"===r;S.fn[e]=function(t){return B(this,function(t,e,n){var i;if(m(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===n)return i?i[r]:t[e];i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):t[e]=n},e,t,arguments.length)}}),S.each(["top","left"],function(t,n){S.cssHooks[n]=Xt(v.pixelPosition,function(t,e){if(e)return e=Jt(t,n),Vt.test(e)?S(t).position()[n]+"px":e})}),S.each({Height:"height",Width:"width"},function(s,a){S.each({padding:"inner"+s,content:a,"":"outer"+s},function(i,o){S.fn[o]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),r=i||(!0===t||!0===e?"margin":"border");return B(this,function(t,e,n){var i;return m(t)?0===o.indexOf("outer")?t["inner"+s]:t.document.documentElement["client"+s]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+s],i["scroll"+s],t.body["offset"+s],i["offset"+s],i["client"+s])):void 0===n?S.css(t,e,r):S.style(t,e,n,r)},a,n?t:void 0,n)}})}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){S.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),S.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),S.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),S.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),_(t))return i=a.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(a.call(arguments)))}).guid=t.guid=t.guid||S.guid++,r},S.holdReady=function(t){t?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=k,S.isFunction=_,S.isWindow=m,S.camelCase=V,S.type=w,S.now=Date.now,S.isNumeric=function(t){var e=S.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))};var on=C.jQuery,sn=C.$;return S.noConflict=function(t){return C.$===S&&(C.$=sn),t&&C.jQuery===S&&(C.jQuery=on),S},t||(C.jQuery=C.$=S),S})},{}],257:[function(t,W,e){(function(s){var o={},a=o.LEFT_BRACE=1,l=o.RIGHT_BRACE=2,u=o.LEFT_BRACKET=3,c=o.RIGHT_BRACKET=4,h=o.COLON=5,p=o.COMMA=6,f=o.TRUE=7,d=o.FALSE=8,m=o.NULL=9,g=o.STRING=10,y=o.NUMBER=11,v=o.START=17,_=o.TRUE1=33,b=o.TRUE2=34,w=o.TRUE3=35,x=o.FALSE1=49,C=o.FALSE2=50,T=o.FALSE3=51,S=o.FALSE4=52,E=o.NULL1=65,k=o.NULL3=66,N=o.NULL2=67,M=o.NUMBER1=81,D=o.NUMBER2=82,A=o.NUMBER3=83,O=o.NUMBER4=84,P=o.NUMBER5=85,I=o.NUMBER6=86,R=o.NUMBER7=87,L=o.NUMBER8=88,q=o.STRING1=97,j=o.STRING2=98,F=o.STRING3=99,z=o.STRING4=100,H=o.STRING5=101,B=o.STRING6=102,n=o.VALUE=113,i=o.KEY=114,r=o.OBJECT=129,U=o.ARRAY=130;function $(t){for(var e=Object.keys(o),n=0,i=e.length;n<i;n++){var r=e[n];if(o[r]===t)return r}return t&&"0x"+t.toString(16)}function t(){this.tState=v,this.value=void 0,this.string=void 0,this.unicode=void 0,this.negative=void 0,this.magnatude=void 0,this.position=void 0,this.exponent=void 0,this.negativeExponent=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=n,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new s(2),3:new s(3),4:new s(4)}}var e=t.prototype;e.charError=function(t,e){this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+$(this.tState)))},e.onError=function(t){throw t},e.write=function(t){var e;"string"==typeof t&&(t=new s(t));for(var n=0,i=t.length;n<i;n++)if(this.tState===v)123===(e=t[n])?this.onToken(a,"{"):125===e?this.onToken(l,"}"):91===e?this.onToken(u,"["):93===e?this.onToken(c,"]"):58===e?this.onToken(h,":"):44===e?this.onToken(p,","):116===e?this.tState=_:102===e?this.tState=x:110===e?this.tState=E:34===e?(this.string="",this.tState=q):45===e?(this.negative=!0,this.tState=M):48===e?(this.magnatude=0,this.tState=D):48<e&&e<64?(this.magnatude=e-48,this.tState=A):32===e||9===e||10===e||13===e||this.charError(t,n);else if(this.tState===q)if(e=t[n],0<this.bytes_remaining){for(var r=0;r<this.bytes_remaining;r++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+r]=t[r];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,n=n+r-1}else if(0===this.bytes_remaining&&128<=e)if(194<=e&&e<=223&&(this.bytes_in_sequence=2),224<=e&&e<=239&&(this.bytes_in_sequence=3),240<=e&&e<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+n>t.length){for(var o=0;o<=t.length-1-n;o++)this.temp_buffs[this.bytes_in_sequence][o]=t[n+o];this.bytes_remaining=n+this.bytes_in_sequence-t.length,n=t.length-1}else this.string+=t.slice(n,n+this.bytes_in_sequence).toString(),n=n+this.bytes_in_sequence-1;else 34===e?(this.tState=v,this.onToken(g,this.string),this.string=void 0):92===e?this.tState=j:32<=e?this.string+=String.fromCharCode(e):this.charError(t,n);else this.tState===j?34===(e=t[n])?(this.string+='"',this.tState=q):92===e?(this.string+="\\",this.tState=q):47===e?(this.string+="/",this.tState=q):98===e?(this.string+="\b",this.tState=q):102===e?(this.string+="\f",this.tState=q):110===e?(this.string+="\n",this.tState=q):114===e?(this.string+="\r",this.tState=q):116===e?(this.string+="\t",this.tState=q):117===e?(this.unicode="",this.tState=F):this.charError(t,n):this.tState===F||this.tState===z||this.tState===H||this.tState===B?48<=(e=t[n])&&e<64||64<e&&e<=70||96<e&&e<=102?(this.unicode+=String.fromCharCode(e),this.tState++==B&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=q)):this.charError(t,n):this.tState===M?48===(e=t[n])?(this.magnatude=0,this.tState=D):48<e&&e<64?(this.magnatude=e-48,this.tState=A):this.charError(t,n):this.tState===D?46===(e=t[n])?(this.position=.1,this.tState=O):101===e||69===e?(this.exponent=0,this.tState=I):(this.tState=v,this.onToken(y,0),this.magnatude=void 0,this.negative=void 0,n--):this.tState===A?46===(e=t[n])?(this.position=.1,this.tState=O):101===e||69===e?(this.exponent=0,this.tState=I):48<=e&&e<64?this.magnatude=10*this.magnatude+e-48:(this.tState=v,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(y,this.magnatude),this.magnatude=void 0,n--):this.tState===O?48<=(e=t[n])&&e<64?(this.magnatude+=this.position*(e-48),this.position/=10,this.tState=P):this.charError(t,n):this.tState===P?48<=(e=t[n])&&e<64?(this.magnatude+=this.position*(e-48),this.position/=10):101===e||69===e?(this.exponent=0,this.tState=I):(this.tState=v,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(y,this.negative?-this.magnatude:this.magnatude),this.magnatude=void 0,this.position=void 0,n--):this.tState===I?43===(e=t[n])||45===e?(45===e&&(this.negativeExponent=!0),this.tState=R):48<=e&&e<64?(this.exponent=10*this.exponent+(e-48),this.tState=L):this.charError(t,n):this.tState===R?48<=(e=t[n])&&e<64?(this.exponent=10*this.exponent+(e-48),this.tState=L):this.charError(t,n):this.tState===L?48<=(e=t[n])&&e<64?this.exponent=10*this.exponent+(e-48):(this.negativeExponent&&(this.exponent=-this.exponent,this.negativeExponent=void 0),this.magnatude*=Math.pow(10,this.exponent),this.exponent=void 0,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.tState=v,this.onToken(y,this.magnatude),this.magnatude=void 0,n--):this.tState===_?114===t[n]?this.tState=b:this.charError(t,n):this.tState===b?117===t[n]?this.tState=w:this.charError(t,n):this.tState===w?101===t[n]?(this.tState=v,this.onToken(f,!0)):this.charError(t,n):this.tState===x?97===t[n]?this.tState=C:this.charError(t,n):this.tState===C?108===t[n]?this.tState=T:this.charError(t,n):this.tState===T?115===t[n]?this.tState=S:this.charError(t,n):this.tState===S?101===t[n]?(this.tState=v,this.onToken(d,!1)):this.charError(t,n):this.tState===E?117===t[n]?this.tState=k:this.charError(t,n):this.tState===k?108===t[n]?this.tState=N:this.charError(t,n):this.tState===N&&(108===t[n]?(this.tState=v,this.onToken(m,null)):this.charError(t,n))},e.onToken=function(t,e){},e.parseError=function(t,e){this.onError(new Error("Unexpected "+$(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+$(this.state)))},e.onError=function(t){throw t},e.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},e.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=n)},e.emit=function(t){this.mode&&(this.state=p),this.onValue(t)},e.onValue=function(t){},e.onToken=function(t,e){this.state===n?t===g||t===y||t===f||t===d||t===m?(this.value&&(this.value[this.key]=e),this.emit(e)):t===a?(this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=i,this.mode=r):t===u?(this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=U,this.state=n):t===l?this.mode===r?this.pop():this.parseError(t,e):t===c&&this.mode===U?this.pop():this.parseError(t,e):this.state===i?t===g?(this.key=e,this.state=h):t===l?this.pop():this.parseError(t,e):this.state===h?t===h?this.state=n:this.parseError(t,e):this.state===p?t===p?this.mode===U?(this.key++,this.state=n):this.mode===r&&(this.state=i):t===c&&this.mode===U||t===l&&this.mode===r?this.pop():this.parseError(t,e):this.parseError(t,e)},W.exports=t}).call(this,t("buffer").Buffer)},{buffer:266}],258:[function(t,e,n){var i,r;i=this,r=function(){var n=[],i=[],o={},r={},s={};function a(t){return"string"==typeof t?new RegExp("^"+t+"$","i"):t}function l(t,e){return t===e?e:t===t.toLowerCase()?e.toLowerCase():t===t.toUpperCase()?e.toUpperCase():t[0]===t[0].toUpperCase()?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():e.toLowerCase()}function u(i,r){return i.replace(r[0],function(t,e){var n=function(t,n){return t.replace(/\$(\d{1,2})/g,function(t,e){return n[e]||""})}(r[1],arguments);return l(""===t?i[e-1]:t,n)})}function c(t,e,n){if(!t.length||o.hasOwnProperty(t))return e;for(var i=n.length;i--;){var r=n[i];if(r[0].test(e))return u(e,r)}return e}function t(n,i,r){return function(t){var e=t.toLowerCase();return i.hasOwnProperty(e)?l(t,e):n.hasOwnProperty(e)?l(t,n[e]):c(e,t,r)}}function e(n,i,r){return function(t){var e=t.toLowerCase();return!!i.hasOwnProperty(e)||!n.hasOwnProperty(e)&&c(e,e,r)===e}}function h(t,e,n){return(n?e+" ":"")+(1===e?h.singular(t):h.plural(t))}return h.plural=t(s,r,n),h.isPlural=e(s,r,n),h.singular=t(r,s,i),h.isSingular=e(r,s,i),h.addPluralRule=function(t,e){n.push([a(t),e])},h.addSingularRule=function(t,e){i.push([a(t),e])},h.addUncountableRule=function(t){"string"!=typeof t?(h.addPluralRule(t,"$0"),h.addSingularRule(t,"$0")):o[t.toLowerCase()]=!0},h.addIrregularRule=function(t,e){e=e.toLowerCase(),t=t.toLowerCase(),s[t]=e,r[e]=t},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(t){return h.addIrregularRule(t[0],t[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(t){return h.addPluralRule(t[0],t[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(t){return h.addSingularRule(t[0],t[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h},"function"==typeof t&&"object"==typeof n&&"object"==typeof e?e.exports=r():i.pluralize=r()},{}],259:[function(t,n,i){(function(tt){var t,e;t=this,e=function(){"use strict";for(var t="undefined"!=typeof window&&"undefined"!=typeof document,e=["Edge","Trident","Firefox"],n=0,i=0;i<e.length;i+=1)if(t&&0<=navigator.userAgent.indexOf(e[i])){n=1;break}var o=t&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},n))}};function s(t){return t&&"[object Function]"==={}.toString.call(t)}function b(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function d(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function m(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=b(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/(auto|scroll|overlay)/.test(n+r+i)?t:m(d(t))}var r=t&&!(!window.MSInputMethodContext||!document.documentMode),a=t&&/MSIE 10/.test(navigator.userAgent);function g(t){return 11===t?r:10===t?a:r||a}function _(t){if(!t)return document.documentElement;for(var e=g(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===b(n,"position")?_(n):n:t?t.ownerDocument.documentElement:document.documentElement}function l(t){return null!==t.parentNode?l(t.parentNode):t}function y(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?t:e,r=n?e:t,o=document.createRange();o.setStart(i,0),o.setEnd(r,0);var s=o.commonAncestorContainer;if(t!==s&&e!==s||i.contains(r))return function(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||_(t.firstElementChild)===t)}(s)?s:_(s);var a=l(t);return a.host?y(a.host,e):y(t,l(e).host)}function v(t,e){var n="top"===(1<arguments.length&&void 0!==e?e:"top")?"scrollTop":"scrollLeft",i=t.nodeName;if("BODY"!==i&&"HTML"!==i)return t[n];var r=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||r)[n]}function h(t,e){var n="x"===e?"Left":"Top",i="Left"==n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"],10)+parseFloat(t["border"+i+"Width"],10)}function u(t,e,n,i){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],g(10)?parseInt(n["offset"+t])+parseInt(i["margin"+("Height"===t?"Top":"Left")])+parseInt(i["margin"+("Height"===t?"Bottom":"Right")]):0)}function w(t){var e=t.body,n=t.documentElement,i=g(10)&&getComputedStyle(n);return{height:u("Height",e,n,i),width:u("Width",e,n,i)}}var c=function(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t};function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function T(t){return C({},t,{right:t.left+t.width,bottom:t.top+t.height})}function S(t){var e={};try{if(g(10)){e=t.getBoundingClientRect();var n=v(t,"top"),i=v(t,"left");e.top+=n,e.left+=i,e.bottom+=n,e.right+=i}else e=t.getBoundingClientRect()}catch(t){}var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?w(t.ownerDocument):{},s=o.width||t.clientWidth||r.right-r.left,a=o.height||t.clientHeight||r.bottom-r.top,l=t.offsetWidth-s,u=t.offsetHeight-a;if(l||u){var c=b(t);l-=h(c,"x"),u-=h(c,"y"),r.width-=l,r.height-=u}return T(r)}function E(t,e,n){var i=2<arguments.length&&void 0!==n&&n,r=g(10),o="HTML"===e.nodeName,s=S(t),a=S(e),l=m(t),u=b(e),c=parseFloat(u.borderTopWidth,10),h=parseFloat(u.borderLeftWidth,10);i&&o&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var p=T({top:s.top-a.top-c,left:s.left-a.left-h,width:s.width,height:s.height});if(p.marginTop=0,p.marginLeft=0,!r&&o){var f=parseFloat(u.marginTop,10),d=parseFloat(u.marginLeft,10);p.top-=c-f,p.bottom-=c-f,p.left-=h-d,p.right-=h-d,p.marginTop=f,p.marginLeft=d}return(r&&!i?e.contains(l):e===l&&"BODY"!==l.nodeName)&&(p=function(t,e,n){var i=2<arguments.length&&void 0!==n&&n,r=v(e,"top"),o=v(e,"left"),s=i?-1:1;return t.top+=r*s,t.bottom+=r*s,t.left+=o*s,t.right+=o*s,t}(p,e)),p}function k(t){if(!t||!t.parentElement||g())return document.documentElement;for(var e=t.parentElement;e&&"none"===b(e,"transform");)e=e.parentElement;return e||document.documentElement}function f(t,e,n,i,r){var o=4<arguments.length&&void 0!==r&&r,s={top:0,left:0},a=o?k(t):y(t,e);if("viewport"===i)s=function(t,e){var n=1<arguments.length&&void 0!==e&&e,i=t.ownerDocument.documentElement,r=E(t,i),o=Math.max(i.clientWidth,window.innerWidth||0),s=Math.max(i.clientHeight,window.innerHeight||0),a=n?0:v(i),l=n?0:v(i,"left");return T({top:a-r.top+r.marginTop,left:l-r.left+r.marginLeft,width:o,height:s})}(a,o);else{var l=void 0;"scrollParent"===i?"BODY"===(l=m(d(e))).nodeName&&(l=t.ownerDocument.documentElement):l="window"===i?t.ownerDocument.documentElement:i;var u=E(l,a,o);if("HTML"!==l.nodeName||function t(e){var n=e.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===b(e,"position"))return!0;var i=d(e);return!!i&&t(i)}(a))s=u;else{var c=w(t.ownerDocument),h=c.height,p=c.width;s.top+=u.top-u.marginTop,s.bottom=h+u.top,s.left+=u.left-u.marginLeft,s.right=p+u.left}}var f="number"==typeof(n=n||0);return s.left+=f?n:n.left||0,s.top+=f?n:n.top||0,s.right-=f?n:n.right||0,s.bottom-=f?n:n.bottom||0,s}function N(t,e,i,n,r,o){var s=5<arguments.length&&void 0!==o?o:0;if(-1===t.indexOf("auto"))return t;var a=f(i,n,s,r),l={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},u=Object.keys(l).map(function(t){return C({key:t},l[t],{area:function(t){return t.width*t.height}(l[t])})}).sort(function(t,e){return e.area-t.area}),c=u.filter(function(t){var e=t.width,n=t.height;return e>=i.clientWidth&&n>=i.clientHeight}),h=0<c.length?c[0].key:u[0].key,p=t.split("-")[1];return h+(p?"-"+p:"")}function M(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:null;return E(n,r?k(e):y(e,n),r)}function D(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),i=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+i,height:t.offsetHeight+n}}function A(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function O(t,e,n){n=n.split("-")[0];var i=D(t),r={width:i.width,height:i.height},o=-1!==["right","left"].indexOf(n),s=o?"top":"left",a=o?"left":"top",l=o?"height":"width",u=o?"width":"height";return r[s]=e[s]+e[l]/2-i[l]/2,r[a]=n===a?e[a]-i[u]:e[A(a)],r}function P(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function I(t,n,e){return(void 0===e?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===n});var i=P(t,function(t){return t[e]===n});return t.indexOf(i)}(t,"name",e))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&s(e)&&(n.offsets.popper=T(n.offsets.popper),n.offsets.reference=T(n.offsets.reference),n=e(n,t))}),n}function R(t,n){return t.some(function(t){var e=t.name;return t.enabled&&e===n})}function L(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<e.length;i++){var r=e[i],o=r?""+r+n:t;if(void 0!==document.body.style[o])return o}return null}function q(t){var e=t.ownerDocument;return e?e.defaultView:window}function j(t,e,n,i){n.updateBound=i,q(t).addEventListener("resize",n.updateBound,{passive:!0});var r=m(t);return function t(e,n,i,r){var o="BODY"===e.nodeName,s=o?e.ownerDocument.defaultView:e;s.addEventListener(n,i,{passive:!0}),o||t(m(s.parentNode),n,i,r),r.push(s)}(r,"scroll",n.updateBound,n.scrollParents),n.scrollElement=r,n.eventsEnabled=!0,n}function F(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(t,e){return q(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}(this.reference,this.state))}function z(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function H(n,i){Object.keys(i).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&z(i[t])&&(e="px"),n.style[t]=i[t]+e})}var B=t&&/Firefox/i.test(navigator.userAgent);function U(t,e,n){var i=P(t,function(t){return t.name===e}),r=!!i&&t.some(function(t){return t.name===n&&t.enabled&&t.order<i.order});if(!r){var o="`"+e+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return r}var $=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],W=$.slice(3);function V(t,e){var n=1<arguments.length&&void 0!==e&&e,i=W.indexOf(t),r=W.slice(i+1).concat(W.slice(0,i));return n?r.reverse():r}var Y="flip",K="clockwise",G="counterclockwise";function Q(t,r,o,e){var s=[0,0],a=-1!==["right","left"].indexOf(e),n=t.split(/(\+|\-)/).map(function(t){return t.trim()}),i=n.indexOf(P(n,function(t){return-1!==t.search(/,|\s/)}));n[i]&&-1===n[i].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1!==i?[n.slice(0,i).concat([n[i].split(l)[0]]),[n[i].split(l)[1]].concat(n.slice(i+1))]:[n];return(u=u.map(function(t,e){var n=(1===e?!a:a)?"height":"width",i=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,i=!0,t):i?(t[t.length-1]+=e,i=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,n,i){var r=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+r[1],s=r[2];if(!o)return t;if(0!==s.indexOf("%"))return"vh"!==s&&"vw"!==s?o:("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o;var a=void 0;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=i}return T(a)[e]/100*o}(t,n,r,o)})})).forEach(function(n,i){n.forEach(function(t,e){z(t)&&(s[i]+=t*("-"===n[e-1]?-1:1))})}),s}var J={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],i=e.split("-")[1];if(i){var r=t.offsets,o=r.reference,s=r.popper,a=-1!==["bottom","top"].indexOf(n),l=a?"left":"top",u=a?"width":"height",c={start:x({},l,o[l]),end:x({},l,o[l]+o[u]-s[u])};t.offsets.popper=C({},s,c[i])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,i=t.placement,r=t.offsets,o=r.popper,s=r.reference,a=i.split("-")[0],l=void 0;return l=z(+n)?[+n,0]:Q(n,o,s,a),"left"===a?(o.top+=l[0],o.left-=l[1]):"right"===a?(o.top+=l[0],o.left+=l[1]):"top"===a?(o.left+=l[0],o.top-=l[1]):"bottom"===a&&(o.left+=l[0],o.top+=l[1]),t.popper=o,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,i){var e=i.boundariesElement||_(t.instance.popper);t.instance.reference===e&&(e=_(e));var n=L("transform"),r=t.instance.popper.style,o=r.top,s=r.left,a=r[n];r.top="",r.left="",r[n]="";var l=f(t.instance.popper,t.instance.reference,i.padding,e,t.positionFixed);r.top=o,r.left=s,r[n]=a,i.boundaries=l;var u=i.priority,c=t.offsets.popper,h={primary:function(t){var e=c[t];return c[t]<l[t]&&!i.escapeWithReference&&(e=Math.max(c[t],l[t])),x({},t,e)},secondary:function(t){var e="right"===t?"left":"top",n=c[e];return c[t]>l[t]&&!i.escapeWithReference&&(n=Math.min(c[e],l[t]-("right"===t?c.width:c.height))),x({},e,n)}};return u.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";c=C({},c,h[e](t))}),t.offsets.popper=c,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,i=e.reference,r=t.placement.split("-")[0],o=Math.floor,s=-1!==["top","bottom"].indexOf(r),a=s?"right":"bottom",l=s?"left":"top",u=s?"width":"height";return n[a]<o(i[l])&&(t.offsets.popper[l]=o(i[l])-n[u]),n[l]>o(i[a])&&(t.offsets.popper[l]=o(i[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!U(t.instance.modifiers,"arrow","keepTogether"))return t;var i=e.element;if("string"==typeof i){if(!(i=t.instance.popper.querySelector(i)))return t}else if(!t.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],o=t.offsets,s=o.popper,a=o.reference,l=-1!==["left","right"].indexOf(r),u=l?"height":"width",c=l?"Top":"Left",h=c.toLowerCase(),p=l?"left":"top",f=l?"bottom":"right",d=D(i)[u];a[f]-d<s[h]&&(t.offsets.popper[h]-=s[h]-(a[f]-d)),a[h]+d>s[f]&&(t.offsets.popper[h]+=a[h]+d-s[f]),t.offsets.popper=T(t.offsets.popper);var m=a[h]+a[u]/2-d/2,g=b(t.instance.popper),y=parseFloat(g["margin"+c],10),v=parseFloat(g["border"+c+"Width"],10),_=m-t.offsets.popper[h]-y-v;return _=Math.max(Math.min(s[u]-d,_),0),t.arrowElement=i,t.offsets.arrow=(x(n={},h,Math.round(_)),x(n,p,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(m,g){if(R(m.instance.modifiers,"inner"))return m;if(m.flipped&&m.placement===m.originalPlacement)return m;var y=f(m.instance.popper,m.instance.reference,g.padding,g.boundariesElement,m.positionFixed),v=m.placement.split("-")[0],_=A(v),b=m.placement.split("-")[1]||"",w=[];switch(g.behavior){case Y:w=[v,_];break;case K:w=V(v);break;case G:w=V(v,!0);break;default:w=g.behavior}return w.forEach(function(t,e){if(v!==t||w.length===e+1)return m;v=m.placement.split("-")[0],_=A(v);var n=m.offsets.popper,i=m.offsets.reference,r=Math.floor,o="left"===v&&r(n.right)>r(i.left)||"right"===v&&r(n.left)<r(i.right)||"top"===v&&r(n.bottom)>r(i.top)||"bottom"===v&&r(n.top)<r(i.bottom),s=r(n.left)<r(y.left),a=r(n.right)>r(y.right),l=r(n.top)<r(y.top),u=r(n.bottom)>r(y.bottom),c="left"===v&&s||"right"===v&&a||"top"===v&&l||"bottom"===v&&u,h=-1!==["top","bottom"].indexOf(v),p=!!g.flipVariations&&(h&&"start"===b&&s||h&&"end"===b&&a||!h&&"start"===b&&l||!h&&"end"===b&&u),f=!!g.flipVariationsByContent&&(h&&"start"===b&&a||h&&"end"===b&&s||!h&&"start"===b&&u||!h&&"end"===b&&l),d=p||f;(o||c||d)&&(m.flipped=!0,(o||c)&&(v=w[e+1]),d&&(b=function(t){return"end"===t?"start":"start"===t?"end":t}(b)),m.placement=v+(b?"-"+b:""),m.offsets.popper=C({},m.offsets.popper,O(m.instance.popper,m.offsets.reference,m.placement)),m=I(m.instance.modifiers,m,"flip"))}),m},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],i=t.offsets,r=i.popper,o=i.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return r[s?"left":"top"]=o[n]-(a?r[s?"width":"height"]:0),t.placement=A(e),t.offsets.popper=T(r),t}},hide:{order:800,enabled:!0,fn:function(t){if(!U(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=P(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,i=e.y,r=t.offsets.popper,o=P(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=void 0!==o?o:e.gpuAcceleration,a=_(t.instance.popper),l=S(a),u={position:r.position},c=function(t,e){function n(t){return t}var i=t.offsets,r=i.popper,o=i.reference,s=Math.round,a=Math.floor,l=s(o.width),u=s(r.width),c=-1!==["left","right"].indexOf(t.placement),h=-1!==t.placement.indexOf("-"),p=e?c||h||l%2==u%2?s:a:n,f=e?s:n;return{left:p(l%2==1&&u%2==1&&!h&&e?r.left-1:r.left),top:f(r.top),bottom:f(r.bottom),right:p(r.right)}}(t,window.devicePixelRatio<2||!B),h="bottom"===n?"top":"bottom",p="right"===i?"left":"right",f=L("transform"),d=void 0,m=void 0;if(m="bottom"==h?"HTML"===a.nodeName?-a.clientHeight+c.bottom:-l.height+c.bottom:c.top,d="right"==p?"HTML"===a.nodeName?-a.clientWidth+c.right:-l.width+c.right:c.left,s&&f)u[f]="translate3d("+d+"px, "+m+"px, 0)",u[h]=0,u[p]=0,u.willChange="transform";else{var g="bottom"==h?-1:1,y="right"==p?-1:1;u[h]=m*g,u[p]=d*y,u.willChange=h+", "+p}var v={"x-placement":t.placement};return t.attributes=C({},v,t.attributes),t.styles=C({},u,t.styles),t.arrowStyles=C({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return H(t.instance.popper,t.styles),function(e,n){Object.keys(n).forEach(function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)})}(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&H(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,i,r){var o=M(r,e,t,n.positionFixed),s=N(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",s),H(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},X=(c(Z,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=M(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=N(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=O(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=I(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,R(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[L("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=j(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return F.call(this)}}]),Z);function Z(t,e){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Z),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=o(this.update.bind(this)),this.options=C({},Z.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(C({},Z.Defaults.modifiers,i.modifiers)).forEach(function(t){n.options.modifiers[t]=C({},Z.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return C({name:t},n.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&s(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();var r=this.options.eventsEnabled;r&&this.enableEventListeners(),this.state.eventsEnabled=r}return X.Utils=("undefined"!=typeof window?window:tt).PopperUtils,X.placements=$,X.Defaults=J,X},"object"==typeof i&&void 0!==n?n.exports=e():t.Popper=e()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],260:[function(e,n,t){(function(u){var c=e("stream");function t(e,n,t){e=e||function(t){this.queue(t)},n=n||function(){this.queue(null)};var i=!1,r=!1,o=[],s=!1,a=new c;function l(){for(;o.length&&!a.paused;){var t=o.shift();if(null===t)return a.emit("end");a.emit("data",t)}}return a.readable=a.writable=!0,a.paused=!1,a.autoDestroy=!(t&&!1===t.autoDestroy),a.write=function(t){return e.call(this,t),!a.paused},a.queue=a.push=function(t){return s||(null===t&&(s=!0),o.push(t),l()),a},a.on("end",function(){a.readable=!1,!a.writable&&a.autoDestroy&&u.nextTick(function(){a.destroy()})}),a.end=function(t){if(!i)return i=!0,arguments.length&&a.write(t),a.writable=!1,n.call(a),!a.readable&&a.autoDestroy&&a.destroy(),a},a.destroy=function(){if(!r)return i=r=!0,o.length=0,a.writable=a.readable=!1,a.emit("close"),a},a.pause=function(){if(!a.paused)return a.paused=!0,a},a.resume=function(){return a.paused&&(a.paused=!1,a.emit("resume")),l(),a.paused||a.emit("drain"),a},a}n.exports=t,t.through=t}).call(this,e("_process"))},{_process:275,stream:294}],261:[function(t,e,n){var i,r,o;i=this,r=function(c){var h=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:c.isArray,isFunction:c.isFunction,isObject:c.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(t){return t instanceof c},toStr:function(t){return h.isUndefined(t)||null===t?"":t+""},bind:c.proxy,each:function(t,n){c.each(t,function(t,e){return n(e,t)})},map:c.map,filter:c.grep,every:function(n,i){var r=!0;return n?(c.each(n,function(t,e){if(!(r=i.call(null,e,t,n)))return!1}),!!r):r},some:function(n,i){var r=!1;return n?(c.each(n,function(t,e){if(r=i.call(null,e,t,n))return!1}),!!r):r},mixin:c.extend,identity:function(t){return t},clone:function(t){return c.extend(!0,{},t)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(t){return c.isFunction(t)?t:function(){return String(t)}},defer:function(t){setTimeout(t,0)},debounce:function(r,o,s){var a,l;return function(){var t,e,n=this,i=arguments;return t=function(){a=null,s||(l=r.apply(n,i))},e=s&&!a,clearTimeout(a),a=setTimeout(t,o),e&&(l=r.apply(n,i)),l}},throttle:function(n,i){var r,o,s,a,l,u;return l=0,u=function(){l=new Date,s=null,a=n.apply(r,o)},function(){var t=new Date,e=i-(t-l);return r=this,o=arguments,e<=0?(clearTimeout(s),s=null,l=t,a=n.apply(r,o)):s||(s=setTimeout(u,e)),a}},stringify:function(t){return h.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n=function(){"use strict";return{nonword:e,whitespace:t,obj:{nonword:n(e),whitespace:n(t)}};function t(t){return(t=h.toStr(t))?t.split(/\s+/):[]}function e(t){return(t=h.toStr(t))?t.split(/\W+/):[]}function n(i){return function(t){return t=h.isArray(t)?t:[].slice.call(arguments,0),function(e){var n=[];return h.each(t,function(t){n=n.concat(i(h.toStr(e[t])))}),n}}}}(),i=function(){"use strict";function t(t){this.maxSize=h.isNumber(t)?t:100,this.reset(),this.maxSize<=0&&(this.set=this.get=c.noop)}function e(){this.head=this.tail=null}function r(t,e){this.key=t,this.val=e,this.prev=this.next=null}return h.mixin(t.prototype,{set:function(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new r(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val},reset:function(){this.size=0,this.hash={},this.list=new e}}),h.mixin(e.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),t}(),e=function(){"use strict";var o;try{(o=window.localStorage).setItem("~~~","!"),o.removeItem("~~~")}catch(t){o=null}function t(t,e){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+h.escapeRegExChars(this.prefix)),this.ls=e||o,this.ls||this._noop()}return h.mixin(t.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=h.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(t){"QuotaExceededError"===t.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),n(this.ls.getItem(this._prefix(t)))},set:function(t,e,n){return h.isNumber(n)?this._safeSet(this._ttlKey(t),r(i()+n)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),r(e))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=function(t){var e,n,i=[],r=o.length;for(e=0;e<r;e++)(n=o.key(e)).match(t)&&i.push(n.replace(t,""));return i}(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var e=n(this.ls.getItem(this._ttlKey(t)));return!!(h.isNumber(e)&&i()>e)}}),t;function i(){return(new Date).getTime()}function r(t){return JSON.stringify(h.isUndefined(t)?null:t)}function n(t){return c.parseJSON(t)}}(),r=function(){"use strict";var a=0,l={},u=6,e=new i(10);function t(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=!1===t.cache?new i(0):e}return t.setMaxPendingRequests=function(t){u=t},t.resetCache=function(){e.reset()},h.mixin(t.prototype,{_fingerprint:function(t){return(t=t||{}).url+t.type+c.param(t.data||{})},_get:function(t,e){var n,i,r=this;function o(t){e(null,t),r._cache.set(n,t)}function s(){e(!0)}n=this._fingerprint(t),this.cancelled||n!==this.lastReq||((i=l[n])?i.done(o).fail(s):a<u?(a++,l[n]=this._send(t).done(o).fail(s).always(function(){a--,delete l[n],r.onDeckRequestArgs&&(r._get.apply(r,r.onDeckRequestArgs),r.onDeckRequestArgs=null)})):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(t,e){var n,i;e=e||c.noop,t=h.isString(t)?{url:t}:t||{},i=this._fingerprint(t),this.cancelled=!1,this.lastReq=i,(n=this._cache.get(i))?e(null,n):this._get(t,e)},cancel:function(){this.cancelled=!0}}),t}(),o=window.SearchIndex=function(){"use strict";var a="c",l="i";function t(t){(t=t||{}).datumTokenizer&&t.queryTokenizer||c.error("datumTokenizer and queryTokenizer are both required"),this.identify=t.identify||h.stringify,this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}return h.mixin(t.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var o=this;t=h.isArray(t)?t:[t],h.each(t,function(t){var r,e;o.datums[r=o.identify(t)]=t,e=n(o.datumTokenizer(t)),h.each(e,function(t){var e,n,i;for(e=o.trie,n=t.split("");i=n.shift();)(e=e[a][i]||(e[a][i]=s()))[l].push(r)})})},get:function(t){var e=this;return h.map(t,function(t){return e.datums[t]})},search:function(t){var e,o,s=this;return e=n(this.queryTokenizer(t)),h.each(e,function(t){var e,n,i,r;if(o&&0===o.length)return!1;for(e=s.trie,n=t.split("");e&&(i=n.shift());)e=e[a][i];if(!e||0!==n.length)return!(o=[]);r=e[l].slice(0),o=o?function(t,e){var n=0,i=0,r=[];t=t.sort(),e=e.sort();var o=t.length,s=e.length;for(;n<o&&i<s;)t[n]<e[i]?n++:(t[n]>e[i]||(r.push(t[n]),n++),i++);return r}(o,r):r}),o?h.map(function(t){for(var e={},n=[],i=0,r=t.length;i<r;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}(o),function(t){return s.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=s()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),t;function n(t){return t=h.filter(t,function(t){return!!t}),t=h.map(t,function(t){return t.toLowerCase()})}function s(){var t={};return t[l]=[],t[a]={},t}}(),s=function(){"use strict";var n;function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new e(t.cacheKey)}return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},h.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(n.data,t,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(n.data),e.protocol=this.storage.get(n.protocol),e.thumbprint=this.storage.get(n.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(e){var t,n=this;e&&(t=this.prepare(this._settings()),this.transport(t).fail(function(){e(!0)}).done(function(t){e(null,n.transform(t))}))},clear:function(){return this.storage.clear(),this}}),t}(),a=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new r({cache:t.cache,limiter:t.limiter,transport:t.transport})}return h.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,n){var e,i=this;if(n)return t=t||"",e=this.prepare(t,this._settings()),this.transport.get(e,function(t,e){n(t?[]:i.transform(e))})},cancelLastRequest:function(){this.transport.cancel()}}),t}(),l=function(){"use strict";return function(t){var e,n;return e={initialize:!0,identify:h.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},(t=h.mixin(e,t||{})).datumTokenizer||c.error("datumTokenizer is required"),t.queryTokenizer||c.error("queryTokenizer is required"),n=t.sorter,t.sorter=n?function(t){return t.sort(n)}:h.identity,t.local=h.isFunction(t.local)?t.local():t.local,t.prefetch=function(t){var e;return t?(e={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:h.identity,transform:h.identity,transport:null},t=h.isString(t)?{url:t}:t,(t=h.mixin(e,t)).url||c.error("prefetch requires url to be set"),t.transform=t.filter||t.transform,t.cacheKey=t.cacheKey||t.url,t.thumbprint="0.11.1"+t.thumbprint,t.transport=t.transport?i(t.transport):c.ajax,t):null}(t.prefetch),t.remote=function(t){var e;return t?(e={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:h.identity,transport:null},t=h.isString(t)?{url:t}:t,(t=h.mixin(e,t)).url||c.error("remote requires url to be set"),t.transform=t.filter||t.transform,t.prepare=function(t){var e,n,i;if(e=t.prepare,n=t.replace,i=t.wildcard,e)return e;e=n?function(t,e){return e.url=n(e.url,t),e}:t.wildcard?function(t,e){return e.url=e.url.replace(i,encodeURIComponent(t)),e}:function(t,e){return e};return e}(t),t.limiter=function(t){var e,n,i;e=t.limiter,n=t.rateLimitBy,i=t.rateLimitWait,e||(e=/^throttle$/i.test(n)?function(e){return function(t){return h.throttle(t,e)}}(i):function(e){return function(t){return h.debounce(t,e)}}(i));return e}(t),t.transport=t.transport?i(t.transport):c.ajax,delete t.replace,delete t.wildcard,delete t.rateLimitBy,delete t.rateLimitWait,t):void 0}(t.remote),t};function i(n){return function(t){var e=c.Deferred();return n(t,function(t){h.defer(function(){e.resolve(t)})},function(t){h.defer(function(){e.reject(t)})}),e}}}();return function(){"use strict";var t;function e(t){t=l(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new a(t.remote):null,this.prefetch=t.prefetch?new s(t.prefetch):null,this.index=new o({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),!1!==t.initialize&&this.initialize()}return t=window&&window.Bloodhound,e.noConflict=function(){return window&&(window.Bloodhound=t),e},e.tokenizers=n,h.mixin(e.prototype,{__ttAdapter:function(){var i=this;return this.remote?function(t,e,n){return i.search(t,e,n)}:function(t,e){return i.search(t,e)}},_loadPrefetch:function(){var n,t,i=this;return n=c.Deferred(),this.prefetch?(t=this.prefetch.fromCache())?(this.index.bootstrap(t),n.resolve()):this.prefetch.fromNetwork(function(t,e){if(t)return n.reject();i.add(e),i.prefetch.store(i.index.serialize()),n.resolve()}):n.resolve(),n.promise()},_initialize:function(){var t=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(function(){t.add(t.local)}),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=h.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,e,i){var r,o=this;return r=this.sorter(this.index.search(t)),e(this.remote?r.slice():r),this.remote&&r.length<this.sufficient?this.remote.get(t,function(t){var n=[];h.each(t,function(e){h.some(r,function(t){return o.identify(e)===o.identify(t)})||n.push(e)}),i&&i(n)}):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return r.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),e}()},"object"==typeof n?e.exports=r(t("jquery")):i.Bloodhound=r(jQuery),o=function(g){var y=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:g.isArray,isFunction:g.isFunction,isObject:g.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(t){return t instanceof g},toStr:function(t){return y.isUndefined(t)||null===t?"":t+""},bind:g.proxy,each:function(t,n){g.each(t,function(t,e){return n(e,t)})},map:g.map,filter:g.grep,every:function(n,i){var r=!0;return n?(g.each(n,function(t,e){if(!(r=i.call(null,e,t,n)))return!1}),!!r):r},some:function(n,i){var r=!1;return n?(g.each(n,function(t,e){if(r=i.call(null,e,t,n))return!1}),!!r):r},mixin:g.extend,identity:function(t){return t},clone:function(t){return g.extend(!0,{},t)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(t){return g.isFunction(t)?t:function(){return String(t)}},defer:function(t){setTimeout(t,0)},debounce:function(r,o,s){var a,l;return function(){var t,e,n=this,i=arguments;return t=function(){a=null,s||(l=r.apply(n,i))},e=s&&!a,clearTimeout(a),a=setTimeout(t,o),e&&(l=r.apply(n,i)),l}},throttle:function(n,i){var r,o,s,a,l,u;return l=0,u=function(){l=new Date,s=null,a=n.apply(r,o)},function(){var t=new Date,e=i-(t-l);return r=this,o=arguments,e<=0?(clearTimeout(s),s=null,l=t,a=n.apply(r,o)):s||(s=setTimeout(u,e)),a}},stringify:function(t){return y.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n=function(){"use strict";var i={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(t){var e,n;return n=y.mixin({},i,t),{css:(e={css:function(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};y.isMsie()&&y.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});return t}(),classes:n,html:function(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}(n),selectors:function(t){var n={};return y.each(t,function(t,e){n[e]="."+t}),n}(n)}).css,html:e.html,classes:e.classes,selectors:e.selectors,mixin:function(t){y.mixin(t,e)}}}}(),v=function(){"use strict";var n;function t(t){t&&t.el||g.error("EventBus initialized without el"),this.$el=g(t.el)}return"typeahead:",n={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},y.mixin(t.prototype,{_trigger:function(t,e){var n;return n=g.Event("typeahead:"+t),(e=e||[]).unshift(n),this.$el.trigger.apply(this.$el,e),n},before:function(t){var e;return e=[].slice.call(arguments,1),this._trigger("before"+t,e).isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=n[t])&&this._trigger(e,[].slice.call(arguments,1))}}),t}(),e=function(){"use strict";var s=/\s+/,a=function(){var t;t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)};return t}();return{onSync:function(t,e,n){return i.call(this,"sync",t,e,n)},onAsync:function(t,e,n){return i.call(this,"async",t,e,n)},off:function(t){var e;if(!this._callbacks)return this;t=t.split(s);for(;e=t.shift();)delete this._callbacks[e];return this},trigger:function(t){var e,n,i,r,o;if(!this._callbacks)return this;t=t.split(s),i=[].slice.call(arguments,1);for(;(e=t.shift())&&(n=this._callbacks[e]);)r=l(n.sync,this,[e].concat(i)),o=l(n.async,this,[e].concat(i)),r()&&a(o);return this}};function i(t,e,n,i){var r;if(!n)return this;for(e=e.split(s),n=i?function(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function l(i,r,o){return function(){for(var t,e=0,n=i.length;!t&&e<n;e+=1)t=!1===i[e].apply(r,o);return!t}}}(),a=function(s){"use strict";var t={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){var o;(r=y.mixin({},t,r)).node&&r.pattern&&(r.pattern=y.isArray(r.pattern)?r.pattern:[r.pattern],o=function(t,e,n){for(var i,r=[],o=0,s=t.length;o<s;o++)r.push(y.escapeRegExChars(t[o]));return i=n?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",e?new RegExp(i):new RegExp(i,"i")}(r.pattern,r.caseSensitive,r.wordsOnly),function t(e,n){var i;for(var r=0;r<e.childNodes.length;r++)3===(i=e.childNodes[r]).nodeType?r+=n(i)?1:0:t(i,n)}(r.node,function(t){var e,n,i;(e=o.exec(t.data))&&(i=s.createElement(r.tagName),r.className&&(i.className=r.className),(n=t.splitText(e.index)).splitText(e[0].length),i.appendChild(n.cloneNode(!0)),t.parentNode.replaceChild(i,n));return!!e}))}}(window.document),_=function(){"use strict";var o;function r(t,e){(t=t||{}).input||g.error("input is missing"),e.mixin(this),this.$hint=g(t.hint),this.$input=g(t.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=function(t){return g('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=y.noop)}return o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},r.normalizeQuery=function(t){return y.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},y.mixin(r.prototype,e,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=o[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var n;switch(t){case"up":case"down":n=!i(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!i(e);break;default:n=!0}return n},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var n,i;i=!!(n=function(t,e){return r.normalizeQuery(t)===r.normalizeQuery(e)}(t,this.query))&&this.query.length!==t.length,this.query=t,e||n?!e&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,e,n,i,r=this;return t=y.bind(this._onBlur,this),e=y.bind(this._onFocus,this),n=y.bind(this._onKeydown,this),i=y.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",e).on("keydown.tt",n),!y.isMsie()||9<y.isMsie()?this.$input.on("input.tt",i):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){o[t.which||t.keyCode]||y.defer(y.bind(r._onInput,r,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n;n=(t=this.getInputValue())!==(e=this.getHint())&&0===e.indexOf(t),""!==t&&n&&!this.hasOverflow()||this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,e,n;return t=this.$input.val().length,e=this.$input[0].selectionStart,y.isNumber(e)?e===t:!document.selection||((n=document.selection.createRange()).moveStart("character",-t),t===n.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=g("<div>")}}),r;function i(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}}(),r=function(){"use strict";var s,n;function t(t,e){(t=t||{}).templates=t.templates||{},t.templates.notFound=t.templates.notFound||t.templates.empty,t.source||g.error("missing source"),t.node||g.error("missing node"),t.name&&!function(t){return/^[_a-zA-Z0-9-]+$/.test(t)}(t.name)&&g.error("invalid dataset name: "+t.name),e.mixin(this),this.highlight=!!t.highlight,this.name=t.name||n(),this.limit=t.limit||5,this.displayFn=function(e){return e=e||y.stringify,y.isFunction(e)?e:function(t){return t[e]}}(t.display||t.displayKey),this.templates=function(t,e){return{notFound:t.notFound&&y.templatify(t.notFound),pending:t.pending&&y.templatify(t.pending),header:t.header&&y.templatify(t.header),footer:t.footer&&y.templatify(t.footer),suggestion:t.suggestion||function(t){return g("<div>").text(e(t))}}}(t.templates,this.displayFn),this.source=t.source.__ttAdapter?t.source.__ttAdapter():t.source,this.async=y.isUndefined(t.async)?2<this.source.length:!!t.async,this._resetLastSuggestion(),this.$el=g(t.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}return s={val:"tt-selectable-display",obj:"tt-selectable-object"},n=y.getIdGenerator(),t.extractData=function(t){var e=g(t);return e.data(s.obj)?{val:e.data(s.val)||"",obj:e.data(s.obj)||null}:null},y.mixin(t.prototype,e,{_overwrite:function(t,e){(e=e||[]).length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){(e=e||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var n;n=this._getSuggestionsFragment(t,e),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var n,i;i=(n=this._getSuggestionsFragment(t,e)).children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,t){var r,o=this;return r=document.createDocumentFragment(),y.each(t,function(t){var e,n;n=o._injectQuery(i,t),e=g(o.templates.suggestion(n)).data(s.obj,t).data(s.val,o.displayFn(t)).addClass(o.classes.suggestion+" "+o.classes.selectable),r.appendChild(e[0])}),this.highlight&&a({className:this.classes.highlight,node:r,pattern:i}),g(r)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=g()},_injectQuery:function(t,e){return y.isObject(e)?y.mixin({_query:t},e):e},update:function(e){var n=this,i=!1,r=!1,o=0;function t(t){r||(r=!0,t=(t||[]).slice(0,n.limit),o=t.length,n._overwrite(e,t),o<n.limit&&n.async&&n.trigger("asyncRequested",e))}this.cancel(),this.cancel=function(){i=!0,n.cancel=g.noop,n.async&&n.trigger("asyncCanceled",e)},this.source(e,t,function(t){t=t||[],!i&&o<n.limit&&(n.cancel=g.noop,o+=t.length,n._append(e,t.slice(0,n.limit-o)),n.async&&n.trigger("asyncReceived",e))}),r||t([])},cancel:g.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=g("<div>")}}),t}(),b=function(){"use strict";function t(t,n){var i=this;(t=t||{}).node||g.error("node is required"),n.mixin(this),this.$node=g(t.node),this.query=null,this.datasets=y.map(t.datasets,function(t){var e=i.$node.find(t.node).first();return t.node=e.length?e:g("<div>").appendTo(i.$node),new r(t,n)})}return y.mixin(t.prototype,e,{_onSelectableClick:function(t){this.trigger("selectableClicked",g(t.currentTarget))},_onRendered:function(t,e,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return y.every(this.datasets,function(t){return t.isEmpty()})},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,n,i,r;n=(e=t.position().top)+t.outerHeight(!0),i=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),e<0?this.$node.scrollTop(i+e):r<n&&this.$node.scrollTop(i+(n-r))},bind:function(){var t,e=this;return t=y.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),y.each(this.datasets,function(t){t.onSync("asyncRequested",e._propagate,e).onSync("asyncCanceled",e._propagate,e).onSync("asyncReceived",e._propagate,e).onSync("rendered",e._onRendered,e).onSync("cleared",e._onCleared,e)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,n,i;return n=this.getActiveSelectable(),e=this._getSelectables(),-1===(i=(i=((i=(n?e.index(n):-1)+t)+1)%(e.length+1)-1)<-1?e.length-1:i)?null:e.eq(i)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?r.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(e){var t=e!==this.query;return t&&(this.query=e,y.each(this.datasets,function(t){t.update(e)})),t},empty:function(){y.each(this.datasets,function(t){t.clear()}),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt"),this.$node=g("<div>"),y.each(this.datasets,function(t){t.destroy()})}}),t}(),w=function(){"use strict";var e=b.prototype;function t(){b.apply(this,[].slice.call(arguments,0))}return y.mixin(t.prototype,b.prototype,{open:function(){return this._allDatasetsEmpty()||this._show(),e.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),e.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),e.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),x=function(){"use strict";function t(t,e){var n,i,r,o,s,a,l,u,c,h,p;(t=t||{}).input||g.error("missing input"),t.menu||g.error("missing menu"),t.eventBus||g.error("missing event bus"),e.mixin(this),this.eventBus=t.eventBus,this.minLength=y.isNumber(t.minLength)?t.minLength:1,this.input=t.input,this.menu=t.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),n=f(this,"activate","open","_onFocused"),i=f(this,"deactivate","_onBlurred"),r=f(this,"isActive","isOpen","_onEnterKeyed"),o=f(this,"isActive","isOpen","_onTabKeyed"),s=f(this,"isActive","_onEscKeyed"),a=f(this,"isActive","open","_onUpKeyed"),l=f(this,"isActive","open","_onDownKeyed"),u=f(this,"isActive","isOpen","_onLeftKeyed"),c=f(this,"isActive","isOpen","_onRightKeyed"),h=f(this,"_openIfActive","_onQueryChanged"),p=f(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",n,this).onSync("blurred",i,this).onSync("enterKeyed",r,this).onSync("tabKeyed",o,this).onSync("escKeyed",s,this).onSync("upKeyed",a,this).onSync("downKeyed",l,this).onSync("leftKeyed",u,this).onSync("rightKeyed",c,this).onSync("queryChanged",h,this).onSync("whitespaceChanged",p,this).onSync("langDirChanged",this._onLangDirChanged,this)}return y.mixin(t.prototype,{_hacks:function(){var r,o;r=this.input.$input||g("<div>"),o=this.menu.$node||g("<div>"),r.on("blur.tt",function(t){var e,n,i;e=document.activeElement,n=o.is(e),i=0<o.has(e).length,y.isMsie()&&(n||i)&&(t.preventDefault(),t.stopImmediatePropagation(),y.defer(function(){r.focus()}))}),o.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,e)},_onAsyncRequested:function(t,e,n){this.eventBus.trigger("asyncrequest",n,e)},_onAsyncCanceled:function(t,e,n){this.eventBus.trigger("asynccancel",n,e)},_onAsyncReceived:function(t,e,n){this.eventBus.trigger("asyncreceive",n,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&e.preventDefault()},_onTabKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&e.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return(t=y.isString(t)?t:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var t,e,n,i,r,o;t=this.menu.getTopSelectable(),e=this.menu.getSelectableData(t),n=this.input.getInputValue(),!e||y.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(i=_.normalizeQuery(n),r=y.escapeRegExChars(i),(o=new RegExp("^(?:"+r+")(.+$)","i").exec(e.val))&&this.input.setHint(n+o[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(y.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return!(!e||this.eventBus.before("select",e.obj))&&(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0)},autocomplete:function(t){var e,n;return e=this.input.getQuery(),!(!((n=this.menu.getSelectableData(t))&&e!==n.val)||this.eventBus.before("autocomplete",n.obj))&&(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0)},moveCursor:function(t){var e,n,i,r;return e=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(t),r=(i=this.menu.getSelectableData(n))?i.obj:null,!(this._minLengthMet()&&this.menu.update(e))&&!this.eventBus.before("cursorchange",r)&&(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),t;function f(n){var t=[].slice.call(arguments,1);return function(){var e=[].slice.call(arguments);y.each(t,function(t){return n[t].apply(n,e)})}}}();!function(){"use strict";var t,d,e;function i(t,n){t.each(function(){var t,e=g(this);(t=e.data(d.typeahead))&&n(t,e)})}function m(t){var e;return(e=y.isJQuery(t)||y.isElement(t)?g(t).first():[]).length?e:null}t=g.fn.typeahead,d={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},e={initialize:function(h,p){var f;return p=y.isArray(p)?p:[].slice.call(arguments,1),f=n((h=h||{}).classNames),this.each(function(){var t,e,n,i,r,o,s,a,l,u,c;y.each(p,function(t){t.highlight=!!h.highlight}),t=g(this),e=g(f.html.wrapper),n=m(h.hint),i=m(h.menu),r=!1!==h.hint&&!n,o=!1!==h.menu&&!i,r&&(n=function(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(function(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}(t,f)),o&&(i=g(f.html.menu).css(f.css.menu)),n&&n.val(""),t=function(t,e){t.data(d.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{t.attr("dir")||t.attr("dir","auto")}catch(t){}return t}(t,f),(r||o)&&(e.css(f.css.wrapper),t.css(r?f.css.input:f.css.inputWithNoHint),t.wrap(e).parent().prepend(r?n:null).append(o?i:null));c=o?w:b,s=new v({el:t}),a=new _({hint:n,input:t},f),l=new c({node:i,datasets:p},f),u=new x({input:a,menu:l,eventBus:s,minLength:h.minLength},f),t.data(d.www,f),t.data(d.typeahead,u)})},isEnabled:function(){var e;return i(this.first(),function(t){e=t.isEnabled()}),e},enable:function(){return i(this,function(t){t.enable()}),this},disable:function(){return i(this,function(t){t.disable()}),this},isActive:function(){var e;return i(this.first(),function(t){e=t.isActive()}),e},activate:function(){return i(this,function(t){t.activate()}),this},deactivate:function(){return i(this,function(t){t.deactivate()}),this},isOpen:function(){var e;return i(this.first(),function(t){e=t.isOpen()}),e},open:function(){return i(this,function(t){t.open()}),this},close:function(){return i(this,function(t){t.close()}),this},select:function(t){var e=!1,n=g(t);return i(this.first(),function(t){e=t.select(n)}),e},autocomplete:function(t){var e=!1,n=g(t);return i(this.first(),function(t){e=t.autocomplete(n)}),e},moveCursor:function(e){var n=!1;return i(this.first(),function(t){n=t.moveCursor(e)}),n},val:function(e){var n;return arguments.length?(i(this,function(t){t.setVal(e)}),this):(i(this.first(),function(t){n=t.getVal()}),n)},destroy:function(){return i(this,function(t,e){!function(n){var t,e;t=n.data(d.www),e=n.parent().filter(t.selectors.wrapper),y.each(n.data(d.attrs),function(t,e){y.isUndefined(t)?n.removeAttr(e):n.attr(e,t)}),n.removeData(d.typeahead).removeData(d.www).removeData(d.attr).removeClass(t.classes.input),e.length&&(n.detach().insertAfter(e),e.remove())}(e),t.destroy()}),this}},g.fn.typeahead=function(t){return e[t]?e[t].apply(this,[].slice.call(arguments,1)):e.initialize.apply(this,arguments)},g.fn.typeahead.noConflict=function(){return g.fn.typeahead=t,this}}()},"object"==typeof n?e.exports=o(t("jquery")):o(jQuery)},{jquery:256}],262:[function(t,Q,J){(function(G){!function(){function n(){}var t="object"==typeof self&&self.self===self&&self||"object"==typeof G&&G.global===G&&G||this||{},e=t._,i=Array.prototype,s=Object.prototype,h="undefined"!=typeof Symbol?Symbol.prototype:null,r=i.push,l=i.slice,p=s.toString,o=s.hasOwnProperty,a=Array.isArray,u=Object.keys,c=Object.create,f=function(t){return t instanceof f?t:this instanceof f?void(this._wrapped=t):new f(t)};void 0===J||J.nodeType?t._=f:(void 0!==Q&&!Q.nodeType&&Q.exports&&(J=Q.exports=f),J._=f),f.VERSION="1.9.1";function d(r,o,t){if(void 0===o)return r;switch(null==t?3:t){case 1:return function(t){return r.call(o,t)};case 3:return function(t,e,n){return r.call(o,t,e,n)};case 4:return function(t,e,n,i){return r.call(o,t,e,n,i)}}return function(){return r.apply(o,arguments)}}function m(t,e,n){return f.iteratee!==g?f.iteratee(t,e):null==t?f.identity:f.isFunction(t)?d(t,e,n):f.isObject(t)&&!f.isArray(t)?f.matcher(t):f.property(t)}var g;f.iteratee=g=function(t,e){return m(t,e,1/0)};function y(r,o){return o=null==o?r.length-1:+o,function(){for(var t=Math.max(arguments.length-o,0),e=Array(t),n=0;n<t;n++)e[n]=arguments[n+o];switch(o){case 0:return r.call(this,e);case 1:return r.call(this,arguments[0],e);case 2:return r.call(this,arguments[0],arguments[1],e)}var i=Array(o+1);for(n=0;n<o;n++)i[n]=arguments[n];return i[o]=e,r.apply(this,i)}}function v(t){if(!f.isObject(t))return{};if(c)return c(t);n.prototype=t;var e=new n;return n.prototype=null,e}function _(e){return function(t){return null==t?void 0:t[e]}}function b(t,e){return null!=t&&o.call(t,e)}function w(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0}function x(t){var e=T(t);return"number"==typeof e&&0<=e&&e<=C}var C=Math.pow(2,53)-1,T=_("length");f.each=f.forEach=function(t,e,n){var i,r;if(e=d(e,n),x(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var o=f.keys(t);for(i=0,r=o.length;i<r;i++)e(t[o[i]],o[i],t)}return t},f.map=f.collect=function(t,e,n){e=m(e,n);for(var i=!x(t)&&f.keys(t),r=(i||t).length,o=Array(r),s=0;s<r;s++){var a=i?i[s]:s;o[s]=e(t[a],a,t)}return o};function S(l){return function(t,e,n,i){var r=3<=arguments.length;return function(t,e,n,i){var r=!x(t)&&f.keys(t),o=(r||t).length,s=0<l?0:o-1;for(i||(n=t[r?r[s]:s],s+=l);0<=s&&s<o;s+=l){var a=r?r[s]:s;n=e(n,t[a],a,t)}return n}(t,d(e,i,4),n,r)}}f.reduce=f.foldl=f.inject=S(1),f.reduceRight=f.foldr=S(-1),f.find=f.detect=function(t,e,n){var i=(x(t)?f.findIndex:f.findKey)(t,e,n);if(void 0!==i&&-1!==i)return t[i]},f.filter=f.select=function(t,i,e){var r=[];return i=m(i,e),f.each(t,function(t,e,n){i(t,e,n)&&r.push(t)}),r},f.reject=function(t,e,n){return f.filter(t,f.negate(m(e)),n)},f.every=f.all=function(t,e,n){e=m(e,n);for(var i=!x(t)&&f.keys(t),r=(i||t).length,o=0;o<r;o++){var s=i?i[o]:o;if(!e(t[s],s,t))return!1}return!0},f.some=f.any=function(t,e,n){e=m(e,n);for(var i=!x(t)&&f.keys(t),r=(i||t).length,o=0;o<r;o++){var s=i?i[o]:o;if(e(t[s],s,t))return!0}return!1},f.contains=f.includes=f.include=function(t,e,n,i){return x(t)||(t=f.values(t)),"number"==typeof n&&!i||(n=0),0<=f.indexOf(t,e,n)},f.invoke=y(function(t,n,i){var r,o;return f.isFunction(n)?o=n:f.isArray(n)&&(r=n.slice(0,-1),n=n[n.length-1]),f.map(t,function(t){var e=o;if(!e){if(r&&r.length&&(t=w(t,r)),null==t)return;e=t[n]}return null==e?e:e.apply(t,i)})}),f.pluck=function(t,e){return f.map(t,f.property(e))},f.where=function(t,e){return f.filter(t,f.matcher(e))},f.findWhere=function(t,e){return f.find(t,f.matcher(e))},f.max=function(t,i,e){var n,r,o=-1/0,s=-1/0;if(null==i||"number"==typeof i&&"object"!=typeof t[0]&&null!=t)for(var a=0,l=(t=x(t)?t:f.values(t)).length;a<l;a++)null!=(n=t[a])&&o<n&&(o=n);else i=m(i,e),f.each(t,function(t,e,n){r=i(t,e,n),(s<r||r===-1/0&&o===-1/0)&&(o=t,s=r)});return o},f.min=function(t,i,e){var n,r,o=1/0,s=1/0;if(null==i||"number"==typeof i&&"object"!=typeof t[0]&&null!=t)for(var a=0,l=(t=x(t)?t:f.values(t)).length;a<l;a++)null!=(n=t[a])&&n<o&&(o=n);else i=m(i,e),f.each(t,function(t,e,n){((r=i(t,e,n))<s||r===1/0&&o===1/0)&&(o=t,s=r)});return o},f.shuffle=function(t){return f.sample(t,1/0)},f.sample=function(t,e,n){if(null==e||n)return x(t)||(t=f.values(t)),t[f.random(t.length-1)];var i=x(t)?f.clone(t):f.values(t),r=T(i);e=Math.max(Math.min(e,r),0);for(var o=r-1,s=0;s<e;s++){var a=f.random(s,o),l=i[s];i[s]=i[a],i[a]=l}return i.slice(0,e)},f.sortBy=function(t,i,e){var r=0;return i=m(i,e),f.pluck(f.map(t,function(t,e,n){return{value:t,index:r++,criteria:i(t,e,n)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};function E(s,e){return function(i,r,t){var o=e?[[],[]]:{};return r=m(r,t),f.each(i,function(t,e){var n=r(t,e,i);s(o,t,n)}),o}}f.groupBy=E(function(t,e,n){b(t,n)?t[n].push(e):t[n]=[e]}),f.indexBy=E(function(t,e,n){t[n]=e}),f.countBy=E(function(t,e,n){b(t,n)?t[n]++:t[n]=1});var k=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;f.toArray=function(t){return t?f.isArray(t)?l.call(t):f.isString(t)?t.match(k):x(t)?f.map(t,f.identity):f.values(t):[]},f.size=function(t){return null==t?0:x(t)?t.length:f.keys(t).length},f.partition=E(function(t,e,n){t[n?0:1].push(e)},!0),f.first=f.head=f.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:f.initial(t,t.length-e)},f.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},f.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:f.rest(t,Math.max(0,t.length-e))},f.rest=f.tail=f.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},f.compact=function(t){return f.filter(t,Boolean)};var N=function(t,e,n,i){for(var r=(i=i||[]).length,o=0,s=T(t);o<s;o++){var a=t[o];if(x(a)&&(f.isArray(a)||f.isArguments(a)))if(e)for(var l=0,u=a.length;l<u;)i[r++]=a[l++];else N(a,e,n,i),r=i.length;else n||(i[r++]=a)}return i};f.flatten=function(t,e){return N(t,e,!1)},f.without=y(function(t,e){return f.difference(t,e)}),f.uniq=f.unique=function(t,e,n,i){f.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=m(n,i));for(var r=[],o=[],s=0,a=T(t);s<a;s++){var l=t[s],u=n?n(l,s,t):l;e&&!n?(s&&o===u||r.push(l),o=u):n?f.contains(o,u)||(o.push(u),r.push(l)):f.contains(r,l)||r.push(l)}return r},f.union=y(function(t){return f.uniq(N(t,!0,!0))}),f.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=T(t);i<r;i++){var o=t[i];if(!f.contains(e,o)){var s;for(s=1;s<n&&f.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},f.difference=y(function(t,e){return e=N(e,!0,!0),f.filter(t,function(t){return!f.contains(e,t)})}),f.unzip=function(t){for(var e=t&&f.max(t,T).length||0,n=Array(e),i=0;i<e;i++)n[i]=f.pluck(t,i);return n},f.zip=y(f.unzip),f.object=function(t,e){for(var n={},i=0,r=T(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n};function M(o){return function(t,e,n){e=m(e,n);for(var i=T(t),r=0<o?0:i-1;0<=r&&r<i;r+=o)if(e(t[r],r,t))return r;return-1}}f.findIndex=M(1),f.findLastIndex=M(-1),f.sortedIndex=function(t,e,n,i){for(var r=(n=m(n,i,1))(e),o=0,s=T(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<r?o=a+1:s=a}return o};function D(o,s,a){return function(t,e,n){var i=0,r=T(t);if("number"==typeof n)0<o?i=0<=n?n:Math.max(n+r,i):r=0<=n?Math.min(n+1,r):n+r+1;else if(a&&n&&r)return t[n=a(t,e)]===e?n:-1;if(e!=e)return 0<=(n=s(l.call(t,i,r),f.isNaN))?n+i:-1;for(n=0<o?i:r-1;0<=n&&n<r;n+=o)if(t[n]===e)return n;return-1}}f.indexOf=D(1,f.findIndex,f.sortedIndex),f.lastIndexOf=D(-1,f.findLastIndex),f.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;o<i;o++,t+=n)r[o]=t;return r},f.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],i=0,r=t.length;i<r;)n.push(l.call(t,i,i+=e));return n};function A(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=v(t.prototype),s=t.apply(o,r);return f.isObject(s)?s:o}f.bind=y(function(e,n,i){if(!f.isFunction(e))throw new TypeError("Bind must be called on a function");var r=y(function(t){return A(e,r,n,this,i.concat(t))});return r}),f.partial=y(function(r,o){var s=f.partial.placeholder,a=function(){for(var t=0,e=o.length,n=Array(e),i=0;i<e;i++)n[i]=o[i]===s?arguments[t++]:o[i];for(;t<arguments.length;)n.push(arguments[t++]);return A(r,a,this,this,n)};return a}),(f.partial.placeholder=f).bindAll=y(function(t,e){var n=(e=N(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=f.bind(t[i],t)}}),f.memoize=function(i,r){var o=function(t){var e=o.cache,n=""+(r?r.apply(this,arguments):t);return b(e,n)||(e[n]=i.apply(this,arguments)),e[n]};return o.cache={},o},f.delay=y(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),f.defer=f.partial(f.delay,f,1),f.throttle=function(n,i,r){var o,s,a,l,u=0;r||(r={});function c(){u=!1===r.leading?0:f.now(),o=null,l=n.apply(s,a),o||(s=a=null)}function t(){var t=f.now();u||!1!==r.leading||(u=t);var e=i-(t-u);return s=this,a=arguments,e<=0||i<e?(o&&(clearTimeout(o),o=null),u=t,l=n.apply(s,a),o||(s=a=null)):o||!1===r.trailing||(o=setTimeout(c,e)),l}return t.cancel=function(){clearTimeout(o),u=0,o=s=a=null},t},f.debounce=function(n,i,r){function o(t,e){s=null,e&&(a=n.apply(t,e))}var s,a,t=y(function(t){if(s&&clearTimeout(s),r){var e=!s;s=setTimeout(o,i),e&&(a=n.apply(this,t))}else s=f.delay(o,i,this,t);return a});return t.cancel=function(){clearTimeout(s),s=null},t},f.wrap=function(t,e){return f.partial(e,t)},f.negate=function(t){return function(){return!t.apply(this,arguments)}},f.compose=function(){var n=arguments,i=n.length-1;return function(){for(var t=i,e=n[i].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},f.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},f.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},f.once=f.partial(f.before,2),f.restArguments=y;function O(t,e){var n=I.length,i=t.constructor,r=f.isFunction(i)&&i.prototype||s,o="constructor";for(b(t,o)&&!f.contains(e,o)&&e.push(o);n--;)(o=I[n])in t&&t[o]!==r[o]&&!f.contains(e,o)&&e.push(o)}var P=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];f.keys=function(t){if(!f.isObject(t))return[];if(u)return u(t);var e=[];for(var n in t)b(t,n)&&e.push(n);return P&&O(t,e),e},f.allKeys=function(t){if(!f.isObject(t))return[];var e=[];for(var n in t)e.push(n);return P&&O(t,e),e},f.values=function(t){for(var e=f.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i},f.mapObject=function(t,e,n){e=m(e,n);for(var i=f.keys(t),r=i.length,o={},s=0;s<r;s++){var a=i[s];o[a]=e(t[a],a,t)}return o},f.pairs=function(t){for(var e=f.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i},f.invert=function(t){for(var e={},n=f.keys(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e},f.functions=f.methods=function(t){var e=[];for(var n in t)f.isFunction(t[n])&&e.push(n);return e.sort()};function R(l,u){return function(t){var e=arguments.length;if(u&&(t=Object(t)),e<2||null==t)return t;for(var n=1;n<e;n++)for(var i=arguments[n],r=l(i),o=r.length,s=0;s<o;s++){var a=r[s];u&&void 0!==t[a]||(t[a]=i[a])}return t}}f.extend=R(f.allKeys),f.extendOwn=f.assign=R(f.keys),f.findKey=function(t,e,n){e=m(e,n);for(var i,r=f.keys(t),o=0,s=r.length;o<s;o++)if(e(t[i=r[o]],i,t))return i};function L(t,e,n){return e in n}var q,j;f.pick=y(function(t,e){var n={},i=e[0];if(null==t)return n;f.isFunction(i)?(1<e.length&&(i=d(i,e[1])),e=f.allKeys(t)):(i=L,e=N(e,!1,!1),t=Object(t));for(var r=0,o=e.length;r<o;r++){var s=e[r],a=t[s];i(a,s,t)&&(n[s]=a)}return n}),f.omit=y(function(t,n){var e,i=n[0];return f.isFunction(i)?(i=f.negate(i),1<n.length&&(e=n[1])):(n=f.map(N(n,!1,!1),String),i=function(t,e){return!f.contains(n,e)}),f.pick(t,i,e)}),f.defaults=R(f.allKeys,!0),f.create=function(t,e){var n=v(t);return e&&f.extendOwn(n,e),n},f.clone=function(t){return f.isObject(t)?f.isArray(t)?t.slice():f.extend({},t):t},f.tap=function(t,e){return e(t),t},f.isMatch=function(t,e){var n=f.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;o<i;o++){var s=n[o];if(e[s]!==r[s]||!(s in r))return!1}return!0},q=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;return("function"==r||"object"==r||"object"==typeof e)&&j(t,e,n,i)},j=function(t,e,n,i){t instanceof f&&(t=t._wrapped),e instanceof f&&(e=e._wrapped);var r=p.call(t);if(r!==p.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return h.valueOf.call(t)===h.valueOf.call(e)}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(f.isFunction(s)&&s instanceof s&&f.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),o){if((l=t.length)!==e.length)return!1;for(;l--;)if(!q(t[l],e[l],n,i))return!1}else{var u,c=f.keys(t);if(l=c.length,f.keys(e).length!==l)return!1;for(;l--;)if(u=c[l],!b(e,u)||!q(t[u],e[u],n,i))return!1}return n.pop(),i.pop(),!0},f.isEqual=function(t,e){return q(t,e)},f.isEmpty=function(t){return null==t||(x(t)&&(f.isArray(t)||f.isString(t)||f.isArguments(t))?0===t.length:0===f.keys(t).length)},f.isElement=function(t){return!(!t||1!==t.nodeType)},f.isArray=a||function(t){return"[object Array]"===p.call(t)},f.isObject=function(t){var e=typeof t;return"function"==e||"object"==e&&!!t},f.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){f["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),f.isArguments(arguments)||(f.isArguments=function(t){return b(t,"callee")});var F=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof F&&(f.isFunction=function(t){return"function"==typeof t||!1}),f.isFinite=function(t){return!f.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},f.isNaN=function(t){return f.isNumber(t)&&isNaN(t)},f.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===p.call(t)},f.isNull=function(t){return null===t},f.isUndefined=function(t){return void 0===t},f.has=function(t,e){if(!f.isArray(e))return b(t,e);for(var n=e.length,i=0;i<n;i++){var r=e[i];if(null==t||!o.call(t,r))return!1;t=t[r]}return!!n},f.noConflict=function(){return t._=e,this},f.identity=function(t){return t},f.constant=function(t){return function(){return t}},f.noop=function(){},f.property=function(e){return f.isArray(e)?function(t){return w(t,e)}:_(e)},f.propertyOf=function(e){return null==e?function(){}:function(t){return f.isArray(t)?w(e,t):e[t]}},f.matcher=f.matches=function(e){return e=f.extendOwn({},e),function(t){return f.isMatch(t,e)}},f.times=function(t,e,n){var i=Array(Math.max(0,t));e=d(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i},f.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},f.now=Date.now||function(){return(new Date).getTime()};function z(e){function n(t){return e[t]}var t="(?:"+f.keys(e).join("|")+")",i=RegExp(t),r=RegExp(t,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,n):t}}var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=f.invert(H);f.escape=z(H),f.unescape=z(B),f.result=function(t,e,n){f.isArray(e)||(e=[e]);var i=e.length;if(!i)return f.isFunction(n)?n.call(t):n;for(var r=0;r<i;r++){var o=null==t?void 0:t[e[r]];void 0===o&&(o=n,r=i),t=f.isFunction(o)?o.call(t):o}return t};var U=0;f.uniqueId=function(t){var e=++U+"";return t?t+e:e},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function $(t){return"\\"+V[t]}var W=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\u2028|\u2029/g;f.template=function(o,t,e){!t&&e&&(t=e),t=f.defaults({},t,f.templateSettings);var n,i=RegExp([(t.escape||W).source,(t.interpolate||W).source,(t.evaluate||W).source].join("|")+"|$","g"),s=0,a="__p+='";o.replace(i,function(t,e,n,i,r){return a+=o.slice(s,r).replace(Y,$),s=r+t.length,e?a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(t.variable||"obj","_",a)}catch(t){throw t.source=a,t}function r(t){return n.call(this,t,f)}var l=t.variable||"obj";return r.source="function("+l+"){\n"+a+"}",r},f.chain=function(t){var e=f(t);return e._chain=!0,e};function K(t,e){return t._chain?f(e).chain():e}f.mixin=function(n){return f.each(f.functions(n),function(t){var e=f[t]=n[t];f.prototype[t]=function(){var t=[this._wrapped];return r.apply(t,arguments),K(this,e.apply(f,t))}}),f},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=i[e];f.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],K(this,t)}}),f.each(["concat","join","slice"],function(t){var e=i[t];f.prototype[t]=function(){return K(this,e.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},f.prototype.valueOf=f.prototype.toJSON=f.prototype.value,f.prototype.toString=function(){return String(this._wrapped)}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],263:[function(t,e,n){},{}],264:[function(t,e,n){"use strict";n.byteLength=function(t){return 3*t.length/4-h(t)},n.toByteArray=function(t){var e,n,i,r,o,s=t.length;r=h(t),o=new c(3*s/4-r),n=0<r?s-4:s;var a=0;for(e=0;e<n;e+=4)i=u[t.charCodeAt(e)]<<18|u[t.charCodeAt(e+1)]<<12|u[t.charCodeAt(e+2)]<<6|u[t.charCodeAt(e+3)],o[a++]=i>>16&255,o[a++]=i>>8&255,o[a++]=255&i;2===r?(i=u[t.charCodeAt(e)]<<2|u[t.charCodeAt(e+1)]>>4,o[a++]=255&i):1===r&&(i=u[t.charCodeAt(e)]<<10|u[t.charCodeAt(e+1)]<<4|u[t.charCodeAt(e+2)]>>2,o[a++]=i>>8&255,o[a++]=255&i);return o},n.fromByteArray=function(t){for(var e,n=t.length,i=n%3,r="",o=[],s=0,a=n-i;s<a;s+=16383)o.push(p(t,s,a<s+16383?a:s+16383));1==i?(e=t[n-1],r+=l[e>>2],r+=l[e<<4&63],r+="=="):2==i&&(e=(t[n-2]<<8)+t[n-1],r+=l[e>>10],r+=l[e>>4&63],r+=l[e<<2&63],r+="=");return o.push(r),o.join("")};for(var l=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)l[r]=i[r],u[i.charCodeAt(r)]=r;function h(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function p(t,e,n){for(var i,r,o=[],s=e;s<n;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(l[(r=i)>>18&63]+l[r>>12&63]+l[r>>6&63]+l[63&r]);return o.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],265:[function(t,e,n){arguments[4][263][0].apply(n,arguments)},{dup:263}],266:[function(t,e,n){"use strict";var i=t("base64-js"),o=t("ieee754");n.Buffer=h,n.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},n.INSPECT_MAX_BYTES=50;var r=2147483647;function s(t){if(r<t)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=h.prototype,e}function h(t,e,n){if("number"!=typeof t)return a(t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(t)}function a(t,e,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return L(t)?function(t,e,n){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");var i;i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n);return i.__proto__=h.prototype,i}(t,e,n):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!h.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,e),i=s(n),r=i.write(t,e);r!==n&&(i=i.slice(0,r));return i}(t,e):function(t){if(h.isBuffer(t)){var e=0|p(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}if(t){if(q(t)||"length"in t)return"number"!=typeof t.length||j(t.length)?s(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t){return l(t),s(t<0?0:0|p(t))}function c(t){for(var e=t.length<0?0:0|p(t.length),n=s(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function p(t){if(r<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|t}function f(t,e){if(h.isBuffer(t))return t.length;if(q(t)||L(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return P(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return I(t).length;default:if(i)return P(t).length;e=(""+e).toLowerCase(),i=!0}}function d(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function m(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),j(n=+n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=h.from(e,i)),h.isBuffer(e))return 0===e.length?-1:g(t,e,n,i,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,i,r){var o,s=1,a=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a/=s=2,l/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var c=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(a<n+l&&(n=a-l),o=n;0<=o;o--){for(var h=!0,p=0;p<l;p++)if(u(t,o+p)!==u(e,p)){h=!1;break}if(h)return o}return-1}function y(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?r<(i=Number(i))&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<i&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(j(a))return s;t[n+s]=a}return s}function v(t,e,n,i){return R(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function _(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function b(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,l,u=t[r],c=null,h=239<u?4:223<u?3:191<u?2:1;if(r+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[r+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&2047<(l=(15&u)<<12|(63&o)<<6|63&s)&&(l<55296||57343<l)&&(c=l);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}return function(t){var e=t.length;if(e<=w)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=w));return n}(i)}n.kMaxLength=r,(h.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(t,e,n){return a(t,e,n)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(t,e,n){return function(t,e,n){return l(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},h.allocUnsafe=function(t){return u(t)},h.allocUnsafeSlow=function(t){return u(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var i=h.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},h.byteLength=f,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},h.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?b(this,0,t):function(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return b(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return _(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,n,i,r){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(r<=i&&n<=e)return 0;if(r<=i)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),l=this.slice(i,r),u=t.slice(e,n),c=0;c<a;++c)if(l[c]!==u[c]){o=l[c],s=u[c];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},h.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},h.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},h.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||r<n)&&(n=r),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o,s,a,l,u,c,h,p,f,d=!1;;)switch(i){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return p=e,f=n,R(P(t,(h=this).length-p),h,p,f);case"ascii":return v(this,t,e,n);case"latin1":case"binary":return v(this,t,e,n);case"base64":return l=this,u=e,c=n,R(I(t),l,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=e,a=n,R(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,(o=this).length-s),o,s,a);default:if(d)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),d=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function x(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function C(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function T(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||i<n)&&(n=i);for(var r="",o=e;o<n;++o)r+=O(t[o]);return r}function S(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function E(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,n,i,r,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function N(t,e,n,i){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,i,r){return e=+e,n>>>=0,r||N(t,0,n,4),o.write(t,e,n,i,23,4),n+4}function D(t,e,n,i,r){return e=+e,n>>>=0,r||N(t,0,n,8),o.write(t,e,n,i,52,8),n+8}h.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t);var i=this.subarray(t,e);return i.__proto__=h.prototype,i},h.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||E(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},h.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||E(t,e,this.length);for(var i=this[t+--e],r=1;0<e&&(r*=256);)i+=this[t+--e]*r;return i},h.prototype.readUInt8=function(t,e){return t>>>=0,e||E(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||E(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||E(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||E(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||E(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return(r*=128)<=i&&(i-=Math.pow(2,8*e)),i},h.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||E(t,e,this.length);for(var i=e,r=1,o=this[t+--i];0<i&&(r*=256);)o+=this[t+--i]*r;return(r*=128)<=o&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||E(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||E(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(t,e){t>>>=0,e||E(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return t>>>=0,e||E(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||E(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||E(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||E(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||k(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},h.prototype.writeUIntBE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||k(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;0<=--r&&(o*=256);)this[e+r]=t/o&255;return e+n},h.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var r=Math.pow(2,8*n-1);k(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},h.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var r=Math.pow(2,8*n-1);k(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},h.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},h.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},h.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},h.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},h.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),0<i&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;0<=r;--r)t[r+e]=this[r+n];else if(o<1e3)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},h.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=h.isBuffer(t)?t:new h(t,i),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var A=/[^+/0-9A-Za-z-_]/g;function O(t){return t<16?"0"+t.toString(16):t.toString(16)}function P(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!r){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===i){-1<(e-=3)&&o.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(e-=3)&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function I(t){return i.toByteArray(function(t){if((t=t.trim().replace(A,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function R(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function L(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function q(t){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(t)}function j(t){return t!=t}},{"base64-js":264,ieee754:270}],267:[function(t,e,n){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],268:[function(t,e,n){(function(t){function e(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return"[object RegExp]"===e(t)},n.isObject=function(t){return"object"==typeof t&&null!==t},n.isDate=function(t){return"[object Date]"===e(t)},n.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},n.isFunction=function(t){return"function"==typeof t},n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":272}],269:[function(t,e,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(t){return"function"==typeof t}function u(t){return"object"==typeof t&&null!==t}function c(t){return void 0===t}((e.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,n,i,r,o,s;if(this._events||(this._events={}),"error"===t&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var a=new Error('Uncaught, unspecified "error" event. ('+e+")");throw a.context=e,a}if(c(n=this._events[t]))return!1;if(l(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),n.apply(this,r)}else if(u(n))for(r=Array.prototype.slice.call(arguments,1),i=(s=n.slice()).length,o=0;o<i;o++)s[o].apply(this,r);return!0},i.prototype.on=i.prototype.addListener=function(t,e){var n;if(!l(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,l(e.listener)?e.listener:e),this._events[t]?u(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,u(this._events[t])&&!this._events[t].warned&&(n=c(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.once=function(t,e){if(!l(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var n,i,r,o;if(!l(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=(n=this._events[t]).length,i=-1,n===e||l(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(u(n)){for(o=r;0<o--;)if(n[o]===e||n[o].listener&&n[o].listener===e){i=o;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(l(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?l(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(l(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},{}],270:[function(t,e,n){n.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,u=l>>1,c=-7,h=n?r-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=a;0<c;o=256*o+t[e+h],h+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;0<c;s=256*s+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),o-=u}return(f?-1:1)*s*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var s,a,l,u=8*o-r-1,c=(1<<u)-1,h=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,d=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),2<=(e+=1<=s+h?p/l:p*Math.pow(2,1-h))*l&&(s++,l/=2),c<=s+h?(a=0,s=c):1<=s+h?(a=(e*l-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));8<=r;t[n+f]=255&a,f+=d,a/=256,r-=8);for(s=s<<r|a,u+=r;0<u;t[n+f]=255&s,f+=d,s/=256,u-=8);t[n+f-d]|=128*m}},{}],271:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],272:[function(t,e,n){function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(i(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],273:[function(t,e,n){var i={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},{}],274:[function(t,e,n){(function(a){"use strict";!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?e.exports=function(t,e,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var r,o,s=arguments.length;switch(s){case 0:case 1:return a.nextTick(t);case 2:return a.nextTick(function(){t.call(null,e)});case 3:return a.nextTick(function(){t.call(null,e,n)});case 4:return a.nextTick(function(){t.call(null,e,n,i)});default:for(r=new Array(s-1),o=0;o<r.length;)r[o++]=arguments[o];return a.nextTick(function(){t.apply(null,r)})}}:e.exports=a.nextTick}).call(this,t("_process"))},{_process:275}],275:[function(t,e,n){var i,r,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],h=!1,p=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):p=-1,c.length&&d())}function d(){if(!h){var t=l(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new m(t,e)),1!==c.length||h||l(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],276:[function(t,O,P){(function(A){!function(t){var e="object"==typeof P&&P&&!P.nodeType&&P,n="object"==typeof O&&O&&!O.nodeType&&O,i="object"==typeof A&&A;i.global!==i&&i.window!==i&&i.self!==i||(t=i);var r,o,y=2147483647,v=36,_=1,b=26,s=38,a=700,w=72,x=128,C="-",l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=v-_,T=Math.floor,S=String.fromCharCode;function E(t){throw new RangeError(h[t])}function f(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function d(t,e){var n=t.split("@"),i="";return 1<n.length&&(i=n[0]+"@",t=n[1]),i+f((t=t.replace(c,".")).split("."),e).join(".")}function k(t){for(var e,n,i=[],r=0,o=t.length;r<o;)55296<=(e=t.charCodeAt(r++))&&e<=56319&&r<o?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function N(t){return f(t,function(t){var e="";return 65535<t&&(e+=S((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=S(t)}).join("")}function M(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function D(t,e,n){var i=0;for(t=n?T(t/a):t>>1,t+=T(t/e);p*b>>1<t;i+=v)t=T(t/p);return T(i+(p+1)*t/(t+s))}function m(t){var e,n,i,r,o,s,a,l,u,c,h,p=[],f=t.length,d=0,m=x,g=w;for((n=t.lastIndexOf(C))<0&&(n=0),i=0;i<n;++i)128<=t.charCodeAt(i)&&E("not-basic"),p.push(t.charCodeAt(i));for(r=0<n?n+1:0;r<f;){for(o=d,s=1,a=v;f<=r&&E("invalid-input"),h=t.charCodeAt(r++),(v<=(l=h-48<10?h-22:h-65<26?h-65:h-97<26?h-97:v)||l>T((y-d)/s))&&E("overflow"),d+=l*s,!(l<(u=a<=g?_:g+b<=a?b:a-g));a+=v)s>T(y/(c=v-u))&&E("overflow"),s*=c;g=D(d-o,e=p.length+1,0==o),T(d/e)>y-m&&E("overflow"),m+=T(d/e),d%=e,p.splice(d++,0,m)}return N(p)}function g(t){var e,n,i,r,o,s,a,l,u,c,h,p,f,d,m,g=[];for(p=(t=k(t)).length,e=x,o=w,s=n=0;s<p;++s)(h=t[s])<128&&g.push(S(h));for(i=r=g.length,r&&g.push(C);i<p;){for(a=y,s=0;s<p;++s)e<=(h=t[s])&&h<a&&(a=h);for(a-e>T((y-n)/(f=i+1))&&E("overflow"),n+=(a-e)*f,e=a,s=0;s<p;++s)if((h=t[s])<e&&++n>y&&E("overflow"),h==e){for(l=n,u=v;!(l<(c=u<=o?_:o+b<=u?b:u-o));u+=v)m=l-c,d=v-c,g.push(S(M(c+m%d,0))),l=T(m/d);g.push(S(M(l,0))),o=D(n,f,i==r),n=0,++i}++n,++e}return g.join("")}if(r={version:"1.4.1",ucs2:{decode:k,encode:N},decode:m,encode:g,toASCII:function(t){return d(t,function(t){return u.test(t)?"xn--"+g(t):t})},toUnicode:function(t){return d(t,function(t){return l.test(t)?m(t.slice(4).toLowerCase()):t})}},e&&n)if(O.exports==e)n.exports=r;else for(o in r)r.hasOwnProperty(o)&&(e[o]=r[o]);else t.punycode=r}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],277:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){e=e||"&",n=n||"=";var r={};if("string"!=typeof t||0===t.length)return r;var o=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var a,l,u=t.length;0<s&&s<u&&(u=s);for(var c=0;c<u;++c){var h,p,f,d,m=t[c].replace(o,"%20"),g=m.indexOf(n);p=0<=g?(h=m.substr(0,g),m.substr(g+1)):(h=m,""),f=decodeURIComponent(h),d=decodeURIComponent(p),a=r,l=f,Object.prototype.hasOwnProperty.call(a,l)?y(r[f])?r[f].push(d):r[f]=[r[f],d]:r[f]=d}return r};var y=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],278:[function(t,e,n){"use strict";function o(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}e.exports=function(n,i,r,t){return i=i||"&",r=r||"=",null===n&&(n=void 0),"object"==typeof n?a(l(n),function(t){var e=encodeURIComponent(o(t))+r;return s(n[t])?a(n[t],function(t){return e+encodeURIComponent(o(t))}).join(i):e+encodeURIComponent(o(n[t]))}).join(i):t?encodeURIComponent(o(t))+r+encodeURIComponent(o(n)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i));return n}var l=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],279:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":277,"./encode":278}],280:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":281}],281:[function(t,e,n){"use strict";var i=t("process-nextick-args"),r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=h;var o=t("core-util-is");o.inherits=t("inherits");var s=t("./_stream_readable"),a=t("./_stream_writable");o.inherits(h,s);for(var l=r(a.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||i(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),i(e,t)}},{"./_stream_readable":283,"./_stream_writable":285,"core-util-is":268,inherits:271,"process-nextick-args":274}],282:[function(t,e,n){"use strict";e.exports=o;var i=t("./_stream_transform"),r=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}r.inherits=t("inherits"),r.inherits(o,i),o.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":284,"core-util-is":268,inherits:271}],283:[function(P,I,t){(function(m,t){"use strict";var g=P("process-nextick-args");I.exports=p;var r,y=P("isarray");p.ReadableState=h;function v(t,e){return t.listeners(e).length}P("events").EventEmitter;var o=P("./internal/streams/stream"),a=P("safe-buffer").Buffer,l=t.Uint8Array||function(){};var e=P("core-util-is");e.inherits=P("inherits");var n=P("util"),_=void 0;_=n&&n.debuglog?n.debuglog("stream"):function(){};var s,u=P("./internal/streams/BufferList"),i=P("./internal/streams/destroy");e.inherits(p,o);var c=["error","close","destroy","pause","resume"];function h(t,e){r=r||P("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,e instanceof r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=P("string_decoder/").StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function p(t){if(r=r||P("./_stream_duplex"),!(this instanceof p))return new p(t);this._readableState=new h(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function f(t,e,n,i,r){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,x(t)}(t,s)):(r||(o=function(t,e){var n;(function(t){return a.isBuffer(t)||t instanceof l})(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(s,e)),o?t.emit("error",o):s.objectMode||e&&0<e.length?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=function(t){return a.from(t)}(e)),i?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):d(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?d(t,s,e,!1):T(t,s)):d(t,s,e,!1))):i||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function d(t,e,n,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&x(t)),T(t,e)}Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),p.prototype.destroy=i.destroy,p.prototype._undestroy=i.undestroy,p.prototype._destroy=function(t,e){this.push(null),e(t)},p.prototype.push=function(t,e){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=a.from(t,e),e=""),n=!0),f(this,t,e,!1,n)},p.prototype.unshift=function(t){return f(this,t,null,!0,!1)},p.prototype.isPaused=function(){return!1===this._readableState.flowing},p.prototype.setEncoding=function(t){return s||(s=P("string_decoder/").StringDecoder),this._readableState.decoder=new s(t),this._readableState.encoding=t,this};var b=8388608;function w(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return b<=t?t=b:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function x(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(_("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?g(C,t):C(t))}function C(t){_("emit readable"),t.emit("readable"),N(t)}function T(t,e){e.readingMore||(e.readingMore=!0,g(S,t,e))}function S(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(_("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function E(t){_("readable nexttick read 0"),t.read(0)}function k(t,e){e.reading||(_("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(_("flow",e.flowing);e.flowing&&null!==t.read(););}function M(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var i;t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,i=1,r=n.data;t-=r.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?r+=o:r+=o.slice(0,t),0===(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=o.slice(s);break}++i}return e.length-=i,r}(t,e):function(t,e){var n=a.allocUnsafe(t),i=e.head,r=1;i.data.copy(n),t-=i.data.length;for(;i=i.next;){var o=i.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i).data=o.slice(s);break}++r}return e.length-=r,n}(t,e);return i}(t,e.buffer,e.decoder),n);var n}function D(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,g(A,e,t))}function A(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function O(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}p.prototype.read=function(t){_("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return _("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):x(this),null;if(0===(t=w(t,e))&&e.ended)return 0===e.length&&D(this),null;var i,r=e.needReadable;return _("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&_("length less than watermark",r=!0),e.ended||e.reading?_("reading or ended",r=!1):r&&(_("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=w(n,e))),null===(i=0<t?M(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&D(this)),null!==i&&this.emit("data",i),i},p.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},p.prototype.pipe=function(n,t){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=n;break;case 1:r.pipes=[r.pipes,n];break;default:r.pipes.push(n)}r.pipesCount+=1,_("pipe count=%d opts=%j",r.pipesCount,t);var e=(!t||!1!==t.end)&&n!==m.stdout&&n!==m.stderr?s:d;function o(t,e){_("onunpipe"),t===i&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,_("cleanup"),n.removeListener("close",p),n.removeListener("finish",f),n.removeListener("drain",a),n.removeListener("error",h),n.removeListener("unpipe",o),i.removeListener("end",s),i.removeListener("end",d),i.removeListener("data",c),l=!0,!r.awaitDrain||n._writableState&&!n._writableState.needDrain||a())}function s(){_("onend"),n.end()}r.endEmitted?g(e):i.once("end",e),n.on("unpipe",o);var a=function(e){return function(){var t=e._readableState;_("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&v(e,"data")&&(t.flowing=!0,N(e))}}(i);n.on("drain",a);var l=!1;var u=!1;function c(t){_("ondata"),(u=!1)!==n.write(t)||u||((1===r.pipesCount&&r.pipes===n||1<r.pipesCount&&-1!==O(r.pipes,n))&&!l&&(_("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,u=!0),i.pause())}function h(t){_("onerror",t),d(),n.removeListener("error",h),0===v(n,"error")&&n.emit("error",t)}function p(){n.removeListener("finish",f),d()}function f(){_("onfinish"),n.removeListener("close",p),d()}function d(){_("unpipe"),i.unpipe(n)}return i.on("data",c),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?y(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(n,"error",h),n.once("close",p),n.once("finish",f),n.emit("pipe",i),r.flowing||(_("pipe resume"),i.resume()),n},p.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var i=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,n);return this}var s=O(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},p.prototype.addListener=p.prototype.on=function(t,e){var n=o.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&x(this):g(E,this))}return n},p.prototype.resume=function(){var t=this._readableState;return t.flowing||(_("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,g(k,t,e))}(this,t)),this},p.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},p.prototype.wrap=function(e){var n=this._readableState,i=!1,r=this;for(var t in e.on("end",function(){if(_("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),e.on("data",function(t){_("wrapped data"),n.decoder&&(t=n.decoder.write(t)),n.objectMode&&null==t||(n.objectMode||t&&t.length)&&(r.push(t)||(i=!0,e.pause()))}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var o=0;o<c.length;o++)e.on(c[o],r.emit.bind(r,c[o]));return r._read=function(t){_("wrapped _read",t),i&&(i=!1,e.resume())},r},p._fromList=M}).call(this,P("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":281,"./internal/streams/BufferList":286,"./internal/streams/destroy":287,"./internal/streams/stream":288,_process:275,"core-util-is":268,events:269,inherits:271,isarray:273,"process-nextick-args":274,"safe-buffer":293,"string_decoder/":299,util:265}],284:[function(t,e,n){"use strict";e.exports=s;var i=t("./_stream_duplex"),r=t("core-util-is");function o(n){this.afterTransform=function(t,e){return function(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("write callback called multiple times"));i.writechunk=null,(i.writecb=null)!=n&&t.push(n);r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}(n,t,e)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function s(t){if(!(this instanceof s))return new s(t);i.call(this,t),this._transformState=new o(this);var n=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,e){a(n,t,e)}):a(n)})}function a(t,e,n){if(e)return t.emit("error",e);null!=n&&t.push(n);var i=t._writableState,r=t._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=t("inherits"),r.inherits(s,i),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;i.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},{"./_stream_duplex":281,"core-util-is":268,inherits:271}],285:[function(x,C,t){(function(t,e){"use strict";var s=x("process-nextick-args");function h(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var i=t.entry;t.entry=null;for(;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}C.exports=m;var o,a=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?setImmediate:s;m.WritableState=d;var n=x("core-util-is");n.inherits=x("inherits");var i={deprecate:x("util-deprecate")},r=x("./internal/streams/stream"),c=x("safe-buffer").Buffer,l=e.Uint8Array||function(){};var u,p=x("./internal/streams/destroy");function f(){}function d(t,e){o=o||x("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,e instanceof o&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,r=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,r){--e.pendingcb,n?(s(r,i),s(w,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(r(i),t._writableState.errorEmitted=!0,t.emit("error",i),w(t,e))}(t,n,i,e,r);else{var o=_(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||v(t,n),i?a(y,t,n,o,r):y(t,n,o,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}function m(t){if(o=o||x("./_stream_duplex"),!(u.call(m,this)||this instanceof o))return new m(t);this._writableState=new d(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),r.call(this)}function g(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function y(t,e,n,i){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),w(t,e)}function v(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=new Array(i),o=e.corkedRequestsFree;o.entry=n;for(var s=0,a=!0;n;)(r[s]=n).isBuf||(a=!1),n=n.next,s+=1;r.allBuffers=a,g(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new h(e)}else{for(;n;){var l=n.chunk,u=n.encoding,c=n.callback;if(g(t,e,!1,e.objectMode?1:l.length,l,u,c),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function _(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function b(e,n){e._final(function(t){n.pendingcb--,t&&e.emit("error",t),n.prefinished=!0,e.emit("prefinish"),w(e,n)})}function w(t,e){var n=_(e);return n&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,s(b,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}n.inherits(m,r),d.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(d.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!u.call(this,t)||t&&t._writableState instanceof d}})):u=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,n){var i=this._writableState,r=!1,o=function(t){return c.isBuffer(t)||t instanceof l}(t)&&!i.objectMode;return o&&!c.isBuffer(t)&&(t=function(t){return c.from(t)}(t)),"function"==typeof e&&(n=e,e=null),o?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=f),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),s(e,n)}(this,n):(o||function(t,e,n,i){var r=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),s(i,o),r=!1),r}(this,i,t,n))&&(i.pendingcb++,r=function(t,e,n,i,r,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,n));return e}(e,i,r);i!==s&&(n=!0,r="buffer",i=s)}var a=e.objectMode?1:i.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else g(t,e,!1,a,i,r,o);return l}(this,i,o,t,e,n)),r},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||v(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},m.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,e=t=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,n){e.ending=!0,w(t,e),n&&(e.finished?s(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,i,n)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=p.destroy,m.prototype._undestroy=p.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":281,"./internal/streams/destroy":287,"./internal/streams/stream":288,_process:275,"core-util-is":268,inherits:271,"process-nextick-args":274,"safe-buffer":293,"util-deprecate":303}],286:[function(t,e,n){"use strict";var a=t("safe-buffer").Buffer;function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.head=null,this.tail=null,this.length=0}e.exports=(i.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},i.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},i.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},i.prototype.concat=function(t){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,r=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,n=r,i=s,e.copy(n,i),s+=o.data.length,o=o.next;return r},i)},{"safe-buffer":293}],287:[function(t,e,n){"use strict";var o=t("process-nextick-args");function s(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var n=this,i=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;i||r?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o(s,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(o(s,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":274}],288:[function(t,e,n){e.exports=t("events").EventEmitter},{events:269}],289:[function(t,e,n){e.exports=t("./readable").PassThrough},{"./readable":290}],290:[function(t,e,n){(((n=e.exports=t("./lib/_stream_readable.js")).Stream=n).Readable=n).Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":281,"./lib/_stream_passthrough.js":282,"./lib/_stream_readable.js":283,"./lib/_stream_transform.js":284,"./lib/_stream_writable.js":285}],291:[function(t,e,n){e.exports=t("./readable").Transform},{"./readable":290}],292:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":285}],293:[function(t,e,n){var i=t("buffer"),r=i.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(o(i,n),n.Buffer=s),o(r,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},{buffer:266}],294:[function(t,e,n){e.exports=i;var c=t("events").EventEmitter;function i(){c.call(this)}t("inherits")(i,c),i.Readable=t("readable-stream/readable.js"),i.Writable=t("readable-stream/writable.js"),i.Duplex=t("readable-stream/duplex.js"),i.Transform=t("readable-stream/transform.js"),i.PassThrough=t("readable-stream/passthrough.js"),(i.Stream=i).prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",r),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",a));var o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(t){if(u(),0===c.listenerCount(this,"error"))throw t}function u(){n.removeListener("data",i),e.removeListener("drain",r),n.removeListener("end",s),n.removeListener("close",a),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",l),e.on("error",l),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},{events:269,inherits:271,"readable-stream/duplex.js":280,"readable-stream/passthrough.js":289,"readable-stream/readable.js":290,"readable-stream/transform.js":291,"readable-stream/writable.js":292}],295:[function(e,t,n){(function(l){var u=e("./lib/request"),c=e("xtend"),t=e("builtin-status-codes"),h=e("url"),i=n;i.request=function(t,e){t="string"==typeof t?h.parse(t):c(t);var n=-1===l.location.protocol.search(/^https?:$/)?"http:":"",i=t.protocol||n,r=t.hostname||t.host,o=t.port,s=t.path||"/";r&&-1!==r.indexOf(":")&&(r="["+r+"]"),t.url=(r?i+"//"+r:"")+(o?":"+o:"")+s,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var a=new u(t);return e&&a.on("response",e),a},i.get=function(t,e){var n=i.request(t,e);return n.end(),n},i.Agent=function(){},i.Agent.defaultMaxSockets=4,i.STATUS_CODES=t,i.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":297,"builtin-status-codes":267,url:301,xtend:304}],296:[function(t,e,a){(function(t){a.fetch=s(t.fetch)&&s(t.ReadableStream),a.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),a.blobConstructor=!0}catch(t){}var e;function n(){if(void 0!==e)return e;if(t.XMLHttpRequest){e=new t.XMLHttpRequest;try{e.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){e=null}}else e=null;return e}function i(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var r=void 0!==t.ArrayBuffer,o=r&&s(t.ArrayBuffer.prototype.slice);function s(t){return"function"==typeof t}a.arraybuffer=a.fetch||r&&i("arraybuffer"),a.msstream=!a.fetch&&o&&i("ms-stream"),a.mozchunkedarraybuffer=!a.fetch&&r&&i("moz-chunked-arraybuffer"),a.overrideMimeType=a.fetch||!!n()&&s(n().overrideMimeType),a.vbArray=s(t.VBArray),e=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],297:[function(p,f,t){(function(s,a,l){var u=p("./capability"),t=p("inherits"),e=p("./response"),r=p("readable-stream"),c=p("to-arraybuffer"),n=e.IncomingMessage,h=e.readyStates;var i=f.exports=function(e){var t,n=this;r.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+new l(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){n.setHeader(t,e.headers[t])});var i=!0;if("disable-fetch"===e.mode||"timeout"in e)t=!(i=!1);else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!u.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}n._mode=function(t,e){return u.fetch&&e?"fetch":u.mozchunkedarraybuffer?"moz-chunked-arraybuffer":u.msstream?"ms-stream":u.arraybuffer&&t?"arraybuffer":u.vbArray&&t?"text:vbarray":"text"}(t,i),n.on("finish",function(){n._onFinish()})};t(i,r.Writable),i.prototype.setHeader=function(t,e){var n=t.toLowerCase();-1===o.indexOf(n)&&(this._headers[n]={name:t,value:e})},i.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},i.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},i.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,i=e._headers,n=null;"GET"!==t.method&&"HEAD"!==t.method&&(n=u.blobConstructor?new a.Blob(e._body.map(function(t){return c(t)}),{type:(i["content-type"]||{}).value||""}):l.concat(e._body).toString());var r=[];if(Object.keys(i).forEach(function(t){var e=i[t].name,n=i[t].value;Array.isArray(n)?n.forEach(function(t){r.push([e,t])}):r.push([e,n])}),"fetch"===e._mode)a.fetch(e._opts.url,{method:e._opts.method,headers:r,body:n||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)});else{var o=e._xhr=new a.XMLHttpRequest;try{o.open(e._opts.method,e._opts.url,!0)}catch(t){return void s.nextTick(function(){e.emit("error",t)})}"responseType"in o&&(o.responseType=e._mode.split(":")[0]),"withCredentials"in o&&(o.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in t&&(o.timeout=t.timeout,o.ontimeout=function(){e.emit("timeout")}),r.forEach(function(t){o.setRequestHeader(t[0],t[1])}),e._response=null,o.onreadystatechange=function(){switch(o.readyState){case h.LOADING:case h.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(o.onprogress=function(){e._onXHRProgress()}),o.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{o.send(n)}catch(t){return void s.nextTick(function(){e.emit("error",t)})}}}},i.prototype._onXHRProgress=function(){!function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}}(this._xhr)||this._destroyed||(this._response||this._connect(),this._response._onXHRProgress())},i.prototype._connect=function(){var e=this;e._destroyed||(e._response=new n(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},i.prototype._write=function(t,e,n){this._body.push(t),n()},i.prototype.abort=i.prototype.destroy=function(){this._destroyed=!0,this._response&&(this._response._destroyed=!0),this._xhr&&this._xhr.abort()},i.prototype.end=function(t,e,n){"function"==typeof t&&(n=t,t=void 0),r.Writable.prototype.end.call(this,t,e,n)},i.prototype.flushHeaders=function(){},i.prototype.setTimeout=function(){},i.prototype.setNoDelay=function(){},i.prototype.setSocketKeepAlive=function(){};var o=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,p("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},p("buffer").Buffer)},{"./capability":296,"./response":298,_process:275,buffer:266,inherits:271,"readable-stream":290,"to-arraybuffer":300}],298:[function(n,t,i){(function(a,l,u){var c=n("./capability"),t=n("inherits"),h=n("readable-stream"),p=i.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},e=i.IncomingMessage=function(t,e,n){var i=this;if(h.Readable.call(i),i._mode=n,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",function(){a.nextTick(function(){i.emit("close")})}),"fetch"===n){i._fetchResponse=e,i.url=e.url,i.statusCode=e.status,i.statusMessage=e.statusText,e.headers.forEach(function(t,e){i.headers[e.toLowerCase()]=t,i.rawHeaders.push(e,t)});var r=e.body.getReader();!function e(){r.read().then(function(t){i._destroyed||(t.done?i.push(null):(i.push(new u(t.value)),e()))}).catch(function(t){i.emit("error",t)})}()}else{if(i._xhr=t,i._pos=0,i.url=t.responseURL,i.statusCode=t.status,i.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===i.headers[n]&&(i.headers[n]=[]),i.headers[n].push(e[2])):void 0!==i.headers[n]?i.headers[n]+=", "+e[2]:i.headers[n]=e[2],i.rawHeaders.push(e[1],e[2])}}),i._charset="x-user-defined",!c.overrideMimeType){var o=i.rawHeaders["mime-type"];if(o){var s=o.match(/;\s*charset=([^;])(;|$)/);s&&(i._charset=s[1].toLowerCase())}i._charset||(i._charset="utf-8")}}};t(e,h.Readable),e.prototype._read=function(){},e.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==p.DONE)break;try{n=new l.VBArray(t.responseBody).toArray()}catch(t){}if(null!==n){e.push(new u(n));break}case"text":try{n=t.responseText}catch(t){e._mode="text:vbarray";break}if(n.length>e._pos){var i=n.substr(e._pos);if("x-user-defined"===e._charset){for(var r=new u(i.length),o=0;o<i.length;o++)r[o]=255&i.charCodeAt(o);e.push(r)}else e.push(i,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==p.DONE||!t.response)break;n=t.response,e.push(new u(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==p.LOADING||!n)break;e.push(new u(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==p.LOADING)break;var s=new l.MSStreamReader;s.onprogress=function(){s.result.byteLength>e._pos&&(e.push(new u(new Uint8Array(s.result.slice(e._pos)))),e._pos=s.result.byteLength)},s.onload=function(){e.push(null)},s.readAsArrayBuffer(n)}e._xhr.readyState===p.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,n("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},n("buffer").Buffer)},{"./capability":296,_process:275,buffer:266,inherits:271,"readable-stream":290}],299:[function(t,e,n){"use strict";var i=t("safe-buffer").Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�".repeat(n);if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�".repeat(n+1);if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�".repeat(n+2)}}(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var n=t.toString("utf16le",e);if(n){var i=n.charCodeAt(n.length-1);if(55296<=i&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0==n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}(n.StringDecoder=o).prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�".repeat(this.lastTotal-this.lastNeed):e},o.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var r=s(e[i]);if(0<=r)return 0<r&&(t.lastNeed=r-1),r;if(--i<n)return 0;if(0<=(r=s(e[i])))return 0<r&&(t.lastNeed=r-2),r;if(--i<n)return 0;if(0<=(r=s(e[i])))return 0<r&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":293}],300:[function(t,e,n){var r=t("buffer").Buffer;e.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,i=0;i<n;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},{buffer:266}],301:[function(t,e,n){"use strict";var P=t("punycode"),I=t("./util");function k(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=o,n.resolve=function(t,e){return o(t,!1,!0).resolve(e)},n.resolveObject=function(t,e){return t?o(t,!1,!0).resolveObject(e):e},n.format=function(t){I.isString(t)&&(t=o(t));return t instanceof k?t.format():k.prototype.format.call(t)},n.Url=k;var R=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,L=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),q=["'"].concat(r),j=["%","/","?",";","#"].concat(q),F=["/","?","#"],z=/^[+a-z0-9A-Z_-]{0,63}$/,H=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,B={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},$={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},W=t("querystring");function o(t,e,n){if(t&&I.isObject(t)&&t instanceof k)return t;var i=new k;return i.parse(t,e,n),i}k.prototype.parse=function(t,e,n){if(!I.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),r=-1!==i&&i<t.indexOf("#")?"?":"#",o=t.split(r);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(r);if(s=s.trim(),!n&&1===t.split("#").length){var a=L.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?W.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=R.exec(s);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,s=s.substr(l.length)}if(n||l||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===s.substr(0,2);!c||l&&U[l]||(s=s.substr(2),this.slashes=!0)}if(!U[l]&&(c||l&&!$[l])){for(var h,p,f=-1,d=0;d<F.length;d++){-1!==(m=s.indexOf(F[d]))&&(-1===f||m<f)&&(f=m)}-1!==(p=-1===f?s.lastIndexOf("@"):s.lastIndexOf("@",f))&&(h=s.slice(0,p),s=s.slice(p+1),this.auth=decodeURIComponent(h)),f=-1;for(d=0;d<j.length;d++){var m;-1!==(m=s.indexOf(j[d]))&&(-1===f||m<f)&&(f=m)}-1===f&&(f=s.length),this.host=s.slice(0,f),s=s.slice(f),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var y=this.hostname.split(/\./),v=(d=0,y.length);d<v;d++){var _=y[d];if(_&&!_.match(z)){for(var b="",w=0,x=_.length;w<x;w++)127<_.charCodeAt(w)?b+="x":b+=_[w];if(!b.match(z)){var C=y.slice(0,d),T=y.slice(d+1),S=_.match(H);S&&(C.push(S[1]),T.unshift(S[2])),T.length&&(s="/"+T.join(".")+s),this.hostname=C.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=P.toASCII(this.hostname));var E=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+E,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!B[u])for(d=0,v=q.length;d<v;d++){var N=q[d];if(-1!==s.indexOf(N)){var M=encodeURIComponent(N);M===N&&(M=escape(N)),s=s.split(N).join(M)}}var D=s.indexOf("#");-1!==D&&(this.hash=s.substr(D),s=s.slice(0,D));var A=s.indexOf("?");if(-1!==A?(this.search=s.substr(A),this.query=s.substr(A+1),e&&(this.query=W.parse(this.query)),s=s.slice(0,A)):e&&(this.search="",this.query={}),s&&(this.pathname=s),$[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){E=this.pathname||"";var O=this.search||"";this.path=E+O}return this.href=this.format(),this},k.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&I.isObject(this.query)&&Object.keys(this.query).length&&(o=W.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||$[e])&&!1!==r?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),e+r+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+i},k.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},k.prototype.resolveObject=function(t){if(I.isString(t)){var e=new k;e.parse(t,!1,!0),t=e}for(var n=new k,i=Object.keys(this),r=0;r<i.length;r++){var o=i[r];n[o]=this[o]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var l=s[a];"protocol"!==l&&(n[l]=t[l])}return $[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!$[t.protocol]){for(var u=Object.keys(t),c=0;c<u.length;c++){var h=u[c];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||U[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var f=n.pathname||"",d=n.search||"";n.path=f+d}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=g||m||n.host&&t.pathname,v=y,_=n.pathname&&n.pathname.split("/")||[],b=(p=t.pathname&&t.pathname.split("/")||[],n.protocol&&!$[n.protocol]);if(b&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),y=y&&(""===p[0]||""===_[0])),g)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=p;else if(p.length)_||(_=[]),_.pop(),_=_.concat(p),n.search=t.search,n.query=t.query;else if(!I.isNullOrUndefined(t.search)){if(b)n.hostname=n.host=_.shift(),(S=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=S.shift(),n.host=n.hostname=S.shift());return n.search=t.search,n.query=t.query,I.isNull(n.pathname)&&I.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var w=_.slice(-1)[0],x=(n.host||t.host||1<_.length)&&("."===w||".."===w)||""===w,C=0,T=_.length;0<=T;T--)"."===(w=_[T])?_.splice(T,1):".."===w?(_.splice(T,1),C++):C&&(_.splice(T,1),C--);if(!y&&!v)for(;C--;)_.unshift("..");!y||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),x&&"/"!==_.join("/").substr(-1)&&_.push("");var S,E=""===_[0]||_[0]&&"/"===_[0].charAt(0);b&&(n.hostname=n.host=E?"":_.length?_.shift():"",(S=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=S.shift(),n.host=n.hostname=S.shift()));return(y=y||n.host&&_.length)&&!E&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),I.isNull(n.pathname)&&I.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},k.prototype.parseHost=function(){var t=this.host,e=i.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":302,punycode:276,querystring:279}],302:[function(t,e,n){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],303:[function(t,e,n){(function(n){function i(t){try{if(!n.localStorage)return!1}catch(t){return!1}var e=n.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}e.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],304:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},{}]},{},[15])(15)});